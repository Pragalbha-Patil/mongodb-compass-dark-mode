!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e=e||self).ReactIntersectionObserver={},e.React)}(this,(function(e,t){"use strict";function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var i="Invariant failed";function s(e,t){if(!e)throw new Error(i)}var a=new Map,c=new Map,h=new Map,d=0;function u(e,t,n){void 0===n&&(n={}),n.threshold||(n.threshold=0);var r=n,o=r.root,i=r.rootMargin,u=r.threshold;if(a.has(e)&&(process.env.NODE_ENV,s(!1)),e){var l=function(e){return e?h.has(e)?h.get(e):(d+=1,h.set(e,d.toString()),h.get(e)+"_"):""}(o)+(i?u.toString()+"_"+i:u.toString()),p=c.get(l);p||(p=new IntersectionObserver(f,n),l&&c.set(l,p));var v={callback:t,element:e,inView:!1,observerId:l,observer:p,thresholds:p.thresholds||(Array.isArray(u)?u:[u])};return a.set(e,v),p.observe(e),v}}function l(e){if(e){var t=a.get(e);if(t){var n=t.observerId,r=t.observer,o=r.root;r.unobserve(e);var i=!1,s=!1;n&&a.forEach((function(t,r){r!==e&&(t.observerId===n&&(i=!0,s=!0),t.observer.root===o&&(s=!0))})),!s&&o&&h.delete(o),r&&!i&&r.disconnect(),a.delete(e)}}}function f(e){e.forEach((function(e){var t=e.isIntersecting,n=e.intersectionRatio,r=e.target,o=a.get(r);if(o&&n>=0){var i=o.thresholds.some((function(e){return o.inView?n>e:n>=e}));void 0!==t&&(i=i&&t),o.inView=i,o.callback(i,e)}}))}var p=function(e){var i,a;function c(){for(var t,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n(o(t=e.call.apply(e,[this].concat(i))||this),"state",{inView:!1,entry:void 0}),n(o(t),"node",null),n(o(t),"handleNode",(function(e){t.node&&l(t.node),t.node=e||null,t.observeNode()})),n(o(t),"handleChange",(function(e,n){(e!==t.state.inView||e)&&t.setState({inView:e,entry:n}),t.props.onChange&&t.props.onChange(e,n)})),t}a=e,(i=c).prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a;var h=c.prototype;return h.componentDidMount=function(){this.node||(process.env.NODE_ENV,s(!1))},h.componentDidUpdate=function(e,t){e.rootMargin===this.props.rootMargin&&e.root===this.props.root&&e.threshold===this.props.threshold||(l(this.node),this.observeNode()),t.inView!==this.state.inView&&this.state.inView&&this.props.triggerOnce&&(l(this.node),this.node=null)},h.componentWillUnmount=function(){this.node&&(l(this.node),this.node=null)},h.observeNode=function(){if(this.node){var e=this.props,t=e.threshold,n=e.root,r=e.rootMargin;u(this.node,this.handleChange,{threshold:t,root:n,rootMargin:r})}},h.render=function(){var e=this.state,n=e.inView,o=e.entry;if(!function(e){return"function"!=typeof e.children}(this.props))return this.props.children({inView:n,entry:o,ref:this.handleNode});var i=this.props,s=i.children,a=i.as,c=i.tag,h=(i.triggerOnce,i.threshold,i.root,i.rootMargin,i.onChange,function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(i,["children","as","tag","triggerOnce","threshold","root","rootMargin","onChange"]));return t.createElement(a||c||"div",r({ref:this.handleNode},h),s)},c}(t.Component);n(p,"displayName","InView"),n(p,"defaultProps",{threshold:0,triggerOnce:!1}),e.InView=p,e.default=p,e.useInView=function(e){void 0===e&&(e={});var n=t.useRef(),r=t.useState({inView:!1,entry:void 0}),o=r[0],i=r[1],s=t.useCallback((function(t){n.current&&l(n.current),t&&u(t,(function(n,r){i({inView:n,entry:r}),n&&e.triggerOnce&&l(t)}),e),n.current=t}),[e.threshold,e.root,e.rootMargin,e.triggerOnce]);return t.useDebugValue(o.inView),[s,o.inView,o.entry]},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=react-intersection-observer.umd.min.js.map
