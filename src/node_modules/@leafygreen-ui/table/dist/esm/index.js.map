{"version":3,"file":"index.js","sources":["../../src/TableContext.tsx","../../src/HeaderRow.tsx","../../src/TableHead.tsx","../../src/SortContext.tsx","../../src/TableBody.tsx","../../src/FontSizeContext.tsx","../../src/DarkModeContext.tsx","../../src/Table.tsx","../../src/styles.tsx","../../src/Cell.tsx","../../src/Row.tsx","../../src/TableHeader.tsx"],"sourcesContent":["import React, {\n  createContext,\n  useContext,\n  useMemo,\n  useReducer,\n  useEffect,\n} from 'react';\n\nconst TableActionTypes = {\n  RegisterColumn: 'REGISTER_COLUMN_INFO',\n  SetHasNestedRows: 'SET_HAS_NESTED_ROWS',\n  SetHasRowSpan: 'SET_HAS_ROW_SPAN',\n  SetData: 'SET_DATA',\n} as const;\n\ntype TableActionTypes = typeof TableActionTypes[keyof typeof TableActionTypes];\n\nexport { TableActionTypes };\n\ninterface ActionPayload {\n  [TableActionTypes.RegisterColumn]: {\n    dataType?: DataType;\n    index: number;\n  };\n  [TableActionTypes.SetData]: Array<any>;\n  [TableActionTypes.SetHasRowSpan]: boolean;\n  [TableActionTypes.SetHasNestedRows]: boolean;\n}\n\ntype ActionMap<A extends Record<string, any>> = {\n  [Key in keyof A]: A[Key] extends undefined\n    ? {\n        type: Key;\n      }\n    : {\n        type: Key;\n        payload: A[Key];\n      };\n};\n\ntype Action = ActionMap<ActionPayload>[keyof ActionMap<ActionPayload>];\n\ntype Dispatch = (action: Action) => void;\n\nconst DataType = {\n  Number: 'number',\n  Weight: 'weight',\n  ZipCode: 'zipCode',\n  String: 'string',\n  Date: 'date',\n} as const;\n\ntype DataType = typeof DataType[keyof typeof DataType];\n\nexport { DataType };\n\nexport interface State {\n  data: Array<any>;\n  columnInfo?: Record<number, { dataType?: DataType }>;\n  hasNestedRows?: boolean;\n  hasRowSpan?: boolean;\n}\n\ninterface TableProviderInterface {\n  children: React.ReactNode;\n  data: Array<any>;\n}\n\ninterface ContextInterface {\n  state: State;\n  dispatch: Dispatch;\n}\n\nconst TableContext = createContext<ContextInterface>({\n  state: {\n    data: [],\n  },\n  dispatch: () => {},\n});\n\nexport function reducer(state: State, action: Action): State {\n  switch (action.type) {\n    case TableActionTypes.SetHasRowSpan:\n      return {\n        ...state,\n        hasRowSpan: action.payload,\n      };\n\n    case TableActionTypes.SetHasNestedRows:\n      return {\n        ...state,\n        hasNestedRows: action.payload,\n      };\n\n    case TableActionTypes.RegisterColumn:\n      return {\n        ...state,\n        columnInfo: {\n          ...state.columnInfo,\n          [action.payload.index]: {\n            dataType: action.payload.dataType,\n          },\n        },\n      };\n\n    case TableActionTypes.SetData:\n      return {\n        ...state,\n        data: action.payload,\n      };\n\n    default:\n      return state;\n  }\n}\n\nexport function TableProvider({ children, data }: TableProviderInterface) {\n  const initialState: State = {\n    data,\n    hasNestedRows: false,\n  };\n\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  useEffect(() => {\n    dispatch({\n      type: TableActionTypes.SetData,\n      payload: data,\n    });\n  }, [data]);\n\n  const contextValue = useMemo(() => {\n    return { state, dispatch };\n  }, [state, dispatch]);\n\n  return (\n    <TableContext.Provider value={contextValue}>\n      {children}\n    </TableContext.Provider>\n  );\n}\n\nexport function useTableContext() {\n  return useContext(TableContext);\n}\n","import React from 'react';\nimport { HTMLElementProps } from '@leafygreen-ui/lib';\n\nexport type HeaderRowProps = HTMLElementProps<'tr', never>;\n\nexport type HeaderRowElement = React.ReactComponentElement<typeof HeaderRow>;\n\nfunction HeaderRow({ children, className, ...rest }: HeaderRowProps) {\n  return (\n    <tr {...rest} className={className} data-testid=\"leafygreen-ui-header-row\">\n      {children}\n    </tr>\n  );\n}\n\nHeaderRow.displayName = 'HeaderRow';\n\nexport default HeaderRow;\n","import React from 'react';\nimport HeaderRow, { HeaderRowElement } from './HeaderRow';\nimport { TableProps } from './Table';\nimport { TableHeaderElement } from './TableHeader';\nimport { isComponentType } from '@leafygreen-ui/lib';\n\ntype TableHeaderProps<Shape> = Pick<TableProps<Shape>, 'columns'>;\n\nfunction TableHead<Shape>({ columns = [] }: TableHeaderProps<Shape>) {\n  const usingHeaderRow = React.useRef(false);\n\n  function createCols(array: Array<React.ReactNode>): React.ReactNode {\n    return array.map((child, index) => {\n      const tableHeaderCommonProps = {\n        key: index,\n        index,\n      };\n\n      if (isComponentType<HeaderRowElement>(child, 'HeaderRow')) {\n        usingHeaderRow.current = true;\n\n        const { children } = child?.props;\n\n        return React.cloneElement(child, {\n          children: createCols(React.Children.toArray(children)),\n        });\n      }\n\n      if (isComponentType<TableHeaderElement>(child, 'TableHeader')) {\n        return React.cloneElement(child, tableHeaderCommonProps);\n      }\n\n      return child;\n    });\n  }\n\n  const columnArray: Array<React.ReactElement> =\n    // @ts-expect-error Property 'type' does not exist on type '{}'.ts(2339)\n    columns.type === React.Fragment ||\n    isComponentType<HeaderRowElement>(columns, 'HeaderRow')\n      ? React.Children.toArray((columns as React.ReactElement).props.children)\n      : (columns as Array<any>);\n\n  const cols = createCols(columnArray);\n\n  if (usingHeaderRow.current) {\n    return <thead>{cols}</thead>;\n  }\n\n  return (\n    <thead>\n      <HeaderRow>{cols}</HeaderRow>\n    </thead>\n  );\n}\n\nexport default TableHead;\n","import React, { createContext, useContext, useMemo, useState } from 'react';\n\nexport type SortDirection = 'asc' | 'desc';\n\ninterface Sort {\n  columnId: number;\n  direction: SortDirection;\n  accessorValue?: (data: any) => string;\n  compareFn?: (a: any, b: any, direction: SortDirection) => number;\n  handleSort?: (direction: SortDirection) => void;\n}\n\ninterface ContextInterface {\n  sort?: Sort;\n  setSort: React.Dispatch<React.SetStateAction<Sort | undefined>>;\n}\n\nconst SortContext = createContext<ContextInterface>({\n  sort: undefined,\n  setSort: () => {},\n});\n\nexport function SortProvider({ children }: { children: React.ReactNode }) {\n  const [sort, setSort] = useState<Sort | undefined>(undefined);\n\n  const contextValue = useMemo(() => {\n    return { sort, setSort };\n  }, [sort, setSort]);\n\n  return (\n    <SortContext.Provider value={contextValue}>{children}</SortContext.Provider>\n  );\n}\n\nexport function useSortContext() {\n  return useContext(SortContext);\n}\n\nconst alphanumericCollator = new Intl.Collator(undefined, {\n  numeric: true,\n  sensitivity: 'base',\n});\n\nexport const getDataComparisonFunction = <T extends {}>({\n  direction,\n  accessorValue,\n  compareFn,\n}: {\n  direction: SortDirection;\n  accessorValue?: (data: T) => string;\n  compareFn?: (a: T, b: T, dir: SortDirection) => number;\n}) => {\n  if (accessorValue) {\n    return (a: T, b: T) => {\n      const aVal = accessorValue(a);\n      const bVal = accessorValue(b);\n\n      if (direction !== 'desc') {\n        return alphanumericCollator.compare(aVal, bVal);\n      }\n\n      return alphanumericCollator.compare(bVal, aVal);\n    };\n  }\n\n  if (compareFn) {\n    return (a: T, b: T) => compareFn(a, b, direction);\n  }\n\n  console.error(\n    'Error getting Table data comparison function. Please supply either an `accessorValue` or `compareFn`',\n  );\n};\n","import React, { useMemo, useCallback } from 'react';\nimport { useTableContext } from './TableContext';\nimport { getDataComparisonFunction, useSortContext } from './SortContext';\nimport { TableProps } from './Table';\n\ntype TableBodyProps<Shape> = Pick<TableProps<Shape>, 'children'>;\n\n/**\n * Hook that avoids re-rendering children when the data used to\n * render them hasn't changed, even if their ordering has changed.\n */\nfunction useRenderedChildren<Datum>(\n  data: Array<Datum>,\n  renderFunction: React.FunctionComponent<Datum>,\n  compareFn?: (a: Datum, b: Datum) => number,\n): Array<React.ReactNode> {\n  const resultMap = useMemo(() => {\n    const resultMap = new Map<Datum, React.ReactNode>();\n    data.forEach((datum, index) =>\n      resultMap.set(\n        datum,\n        <React.Fragment key={index}>{renderFunction(datum)}</React.Fragment>,\n      ),\n    );\n    return resultMap;\n  }, [data, renderFunction]);\n\n  return useMemo(() => {\n    if (!compareFn) {\n      return Array.from(resultMap.values());\n    }\n\n    return [...data].sort(compareFn).map(datum => resultMap.get(datum));\n  }, [data, resultMap, compareFn]);\n}\n\nfunction TableBody<Shape>({ children }: TableBodyProps<Shape>) {\n  const {\n    state: { data },\n  } = useTableContext();\n\n  const { sort } = useSortContext();\n\n  const compareFn = useMemo(() => {\n    if (sort) {\n      const { direction, accessorValue, compareFn } = sort;\n\n      if (compareFn) {\n        return getDataComparisonFunction({ direction, compareFn });\n      }\n\n      if (accessorValue) {\n        return getDataComparisonFunction({ direction, accessorValue });\n      }\n    }\n  }, [sort]);\n\n  const renderFunction = useCallback(datum => children({ datum }), [children]);\n\n  const rows = useRenderedChildren(data, renderFunction, compareFn);\n\n  return <tbody>{rows}</tbody>;\n}\n\nTableBody.displayName = 'TableBody';\n\nexport default TableBody;\n","import React, { createContext, useContext } from 'react';\n\ntype BaseFontSize = 14 | 16;\n\ninterface FontSizeProviderInterface {\n  baseFontSize: BaseFontSize;\n  children: React.ReactNode;\n}\n\nconst FontSizeContext = createContext<BaseFontSize>(14);\n\nexport function FontSizeProvider({\n  children,\n  baseFontSize,\n}: FontSizeProviderInterface) {\n  return (\n    <FontSizeContext.Provider value={baseFontSize}>\n      {children}\n    </FontSizeContext.Provider>\n  );\n}\n\nexport function useFontSizeContext() {\n  return useContext(FontSizeContext);\n}\n","import React, { createContext, useContext } from 'react';\n\ninterface DarkModeProviderInterface {\n  darkMode: boolean;\n  children: React.ReactNode;\n}\n\nconst DarkModeContext = createContext<boolean>(false);\n\nexport function DarkModeProvider({\n  children,\n  darkMode,\n}: DarkModeProviderInterface) {\n  return (\n    <DarkModeContext.Provider value={darkMode}>\n      {children}\n    </DarkModeContext.Provider>\n  );\n}\n\nexport function useDarkModeContext() {\n  return useContext(DarkModeContext);\n}\n","import React from 'react';\nimport debounce from 'lodash/debounce';\nimport { transparentize } from 'polished';\nimport { HTMLElementProps } from '@leafygreen-ui/lib';\nimport { cx, css } from '@leafygreen-ui/emotion';\nimport { uiColors } from '@leafygreen-ui/palette';\nimport {\n  useIsomorphicLayoutEffect,\n  useViewportSize,\n} from '@leafygreen-ui/hooks';\nimport { useBaseFontSize } from '@leafygreen-ui/leafygreen-provider';\nimport { HeaderRowProps } from './HeaderRow';\nimport { TableHeaderProps } from './TableHeader';\nimport { TableProvider } from './TableContext';\nimport TableHead from './TableHead';\nimport TableBody from './TableBody';\nimport { SortProvider } from './SortContext';\nimport { FontSizeProvider } from './FontSizeContext';\nimport { DarkModeProvider } from './DarkModeContext';\n\nconst lmShadowColor = transparentize(0.7, uiColors.black);\nconst dmShadowColor = transparentize(0.2, uiColors.black);\n\nconst containerStyle = css`\n  position: relative;\n  max-width: 100%;\n`;\n\nconst tableStyles = css`\n  border-collapse: collapse;\n  box-sizing: border-box;\n  width: 100%;\n`;\n\nconst shadow = css`\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  width: 16px;\n  overflow: hidden;\n  pointer-events: none;\n\n  &:after {\n    opacity: 0;\n    content: '';\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    width: 16px;\n    border-radius: 100%;\n    transition: opacity 150ms ease-in-out;\n  }\n`;\n\nconst leftShadow = (darkMode: boolean) => css`\n  left: 0;\n\n  &:after {\n    right: 100%;\n    box-shadow: 4px 0 4px ${darkMode ? dmShadowColor : lmShadowColor};\n  }\n`;\n\nconst rightShadow = (darkMode: boolean) => css`\n  right: 0;\n\n  &:after {\n    left: 100%;\n    box-shadow: -4px 0 4px ${darkMode ? dmShadowColor : lmShadowColor};\n  }\n`;\n\nconst showScroll = css`\n  &:after {\n    opacity: 1;\n  }\n`;\n\nconst ScrollState = {\n  None: 'none',\n  Left: 'left',\n  Right: 'right',\n  Both: 'both',\n} as const;\n\ntype ScrollState = typeof ScrollState[keyof typeof ScrollState];\n\ninterface TableRowInterface<Shape = {}> {\n  datum: Shape;\n}\n\nexport interface TableProps<Shape> extends HTMLElementProps<'table', never> {\n  data: Array<Shape>;\n  columns:\n    | Array<React.ReactElement<HeaderRowProps | TableHeaderProps<Shape>>>\n    | React.ReactFragment;\n\n  children: (TableRowArgs: TableRowInterface<Shape>) => JSX.Element;\n  baseFontSize?: 14 | 16;\n  darkMode?: boolean;\n}\n\nexport default function Table<Shape>({\n  columns = [],\n  data: dataProp = [],\n  children,\n  className,\n  baseFontSize: baseFontSizeProp,\n  darkMode = false,\n  ...rest\n}: TableProps<Shape>) {\n  const [scrollState, setScrollState] = React.useState<ScrollState>(\n    ScrollState.None,\n  );\n  const divRef = React.useRef<HTMLDivElement>(null);\n  const viewportSize = useViewportSize();\n\n  const providerFontSize = useBaseFontSize();\n  const normalizedProviderFontSize =\n    providerFontSize === 14 || providerFontSize === 16 ? providerFontSize : 14;\n  const baseFontSize = baseFontSizeProp ?? normalizedProviderFontSize;\n\n  useIsomorphicLayoutEffect(() => {\n    const divNode = divRef.current;\n\n    if (divNode == null) {\n      return;\n    }\n\n    if (divNode.scrollWidth > divNode.clientWidth) {\n      setScrollState(ScrollState.Right);\n    } else if (\n      viewportSize != null &&\n      divNode.getBoundingClientRect().width <= viewportSize.width\n    ) {\n      setScrollState(ScrollState.None);\n    }\n  }, [viewportSize]);\n\n  const handleScroll = (e: React.UIEvent) => {\n    const {\n      scrollWidth,\n      clientWidth: elementWidth,\n    } = e.target as HTMLDivElement;\n    const isScrollable = scrollWidth > elementWidth;\n\n    if (isScrollable) {\n      const scrollPosition = (e.target as HTMLDivElement).scrollLeft;\n      const maxPosition = scrollWidth - elementWidth;\n\n      if (scrollPosition > 0 && scrollPosition < maxPosition) {\n        setScrollState(ScrollState.Both);\n      } else if (scrollPosition > 0) {\n        setScrollState(ScrollState.Left);\n      } else if (scrollPosition < maxPosition) {\n        setScrollState(ScrollState.Right);\n      }\n    }\n  };\n\n  const debounceScroll = debounce(handleScroll, 50, { leading: true });\n\n  const onScroll: React.EventHandler<React.UIEvent> = e => {\n    e.persist();\n    debounceScroll(e);\n  };\n\n  const showLeft =\n    scrollState === ScrollState.Left || scrollState === ScrollState.Both;\n  const showRight =\n    scrollState === ScrollState.Right || scrollState === ScrollState.Both;\n\n  return (\n    <div className={containerStyle}>\n      <div\n        className={cx(shadow, leftShadow(darkMode), {\n          [showScroll]: showLeft,\n        })}\n      />\n      <div\n        className={cx(shadow, rightShadow(darkMode), {\n          [showScroll]: showRight,\n        })}\n      />\n\n      <div\n        ref={divRef}\n        onScroll={onScroll}\n        className={cx(\n          css`\n            overflow-x: auto;\n          `,\n        )}\n      >\n        <table\n          cellSpacing=\"0\"\n          cellPadding=\"0\"\n          className={cx(\n            tableStyles,\n            css`\n              border-bottom: 1px solid\n                ${darkMode ? uiColors.gray.dark1 : uiColors.gray.light2};\n            `,\n            className,\n          )}\n          {...rest}\n        >\n          <TableProvider data={dataProp}>\n            <SortProvider>\n              <FontSizeProvider baseFontSize={baseFontSize}>\n                <DarkModeProvider darkMode={darkMode}>\n                  <TableHead columns={columns} />\n                  <TableBody>{children}</TableBody>\n                </DarkModeProvider>\n              </FontSizeProvider>\n            </SortProvider>\n          </TableProvider>\n        </table>\n      </div>\n    </div>\n  );\n}\n","import { css } from '@leafygreen-ui/emotion';\n\nconst sharedStyles = css`\n  min-width: 40px;\n  padding: 8px 8px;\n  box-sizing: border-box;\n  vertical-align: middle;\n`;\n\nexport const getCommonCellStyles = (baseFontSize: 14 | 16) => {\n  if (baseFontSize === 14) {\n    return css`\n      ${sharedStyles}\n      font-size: 14px;\n      line-height: 20px;\n    `;\n  }\n\n  return css`\n    ${sharedStyles}\n    font-size: 16px;\n    line-height: 24px;\n  `;\n};\n","import React from 'react';\nimport { HTMLElementProps, createDataProp } from '@leafygreen-ui/lib';\nimport { css, cx } from '@leafygreen-ui/emotion';\nimport { getCommonCellStyles } from './styles';\nimport { useFontSizeContext } from './FontSizeContext';\n\nexport const tdInnerDiv = createDataProp('td-inner-div');\n\ninterface HeaderCellProps\n  extends HTMLElementProps<'th', HTMLTableHeaderCellElement> {\n  isHeader: true;\n}\n\ninterface TableCellProps extends HTMLElementProps<'td', HTMLTableCellElement> {\n  isHeader?: false;\n}\n\ntype CellProps = HeaderCellProps | TableCellProps;\n\nconst baseStyles = css`\n  line-height: 20px;\n  position: relative;\n`;\n\nconst thStyles = css`\n  font-weight: bold;\n`;\n\nconst innerDivStyles = css`\n  display: flex;\n  align-items: center;\n`;\n\nexport type CellElement = React.ReactComponentElement<typeof Cell>;\nconst Cell = React.forwardRef(\n  (\n    { children, className, isHeader = false, ...rest }: CellProps,\n    ref: React.Ref<any>,\n  ) => {\n    const Root = isHeader ? 'th' : 'td';\n\n    const baseFontSize = useFontSizeContext();\n\n    const props: Partial<CellProps> = {\n      ref,\n      className: cx(\n        getCommonCellStyles(baseFontSize),\n        baseStyles,\n        { [thStyles]: isHeader },\n        className,\n      ),\n    };\n\n    if (isHeader) {\n      props.scope = 'row';\n      props.role = 'rowheader';\n    }\n\n    return (\n      <Root {...props} {...rest}>\n        <div className={innerDivStyles} {...tdInnerDiv.prop}>\n          {children}\n        </div>\n      </Root>\n    );\n  },\n);\n\nCell.displayName = 'Cell';\n\nexport default Cell;\n","import React, { useState, useEffect, useRef, useMemo } from 'react';\nimport useSSR from 'use-ssr';\nimport { Transition } from 'react-transition-group';\nimport IconButton from '@leafygreen-ui/icon-button';\nimport ChevronRightIcon from '@leafygreen-ui/icon/dist/ChevronRight';\nimport ChevronDownIcon from '@leafygreen-ui/icon/dist/ChevronDown';\nimport { isComponentType, HTMLElementProps } from '@leafygreen-ui/lib';\nimport { css, cx } from '@leafygreen-ui/emotion';\nimport { uiColors } from '@leafygreen-ui/palette';\nimport { useIdAllocator } from '@leafygreen-ui/hooks';\nimport { useTableContext, TableActionTypes, DataType } from './TableContext';\nimport { CellElement, tdInnerDiv } from './Cell';\nimport { useDarkModeContext } from './DarkModeContext';\nimport { TransitionStatus } from 'react-transition-group/Transition';\n\n/**\n * Types & Constants\n */\nconst Mode = {\n  Light: 'light',\n  Dark: 'dark',\n} as const;\n\ntype Mode = typeof Mode[keyof typeof Mode];\n\nconst transitionTime = 200;\n\n/**\n * Styles\n */\nconst iconButtonMargin = css`\n  margin-right: 4px;\n  margin-left: -8px;\n`;\n\nconst modeStyles = {\n  [Mode.Light]: {\n    rowStyle: css`\n      --lg-table-row-border-color: ${uiColors.gray.light2};\n      color: ${uiColors.gray.dark2};\n    `,\n\n    altColor: css`\n      &:nth-of-type(even) {\n        background-color: ${uiColors.gray.light3};\n      }\n    `,\n\n    disabledStyle: css`\n      background-color: ${uiColors.gray.light2};\n      color: ${uiColors.gray.base};\n      cursor: not-allowed;\n      border-top: 1px solid ${uiColors.gray.light1};\n      border-bottom: 1px solid ${uiColors.gray.light1};\n    `,\n  },\n\n  [Mode.Dark]: {\n    rowStyle: css`\n      --lg-table-row-border-color: ${uiColors.gray.dark1};\n      background-color: ${uiColors.gray.dark3};\n      color: ${uiColors.gray.light3};\n    `,\n\n    altColor: css`\n      &:nth-of-type(even) {\n        background-color: ${uiColors.gray.dark2};\n      }\n    `,\n\n    disabledStyle: css`\n      background-color: ${uiColors.gray.dark1};\n      color: ${uiColors.gray.base};\n      cursor: not-allowed;\n      border-top: 1px solid ${uiColors.gray.base};\n      border-bottom: 1px solid ${uiColors.gray.base};\n    `,\n  },\n};\n\nconst rowStyle = css`\n  --lg-min-cell-height: 40px;\n  border-top: 1px solid var(--lg-table-row-border-color);\n\n  & > td > ${tdInnerDiv.selector} {\n    min-height: var(--lg-min-cell-height);\n    max-height: unset;\n  }\n`;\n\nconst hideRow = css`\n  opacity: 0;\n`;\n\nconst nestedRowInitialStyle = css`\n  transform-origin: 50% 0%;\n  border-color: var(--lg-table-row-border-color);\n  opacity: 0;\n  transition: ${transitionTime}ms ease-in-out;\n  transition-property: border-color, opacity;\n\n  & > td {\n    transition: ${transitionTime}ms ease-in-out;\n    transition-property: padding-block;\n\n    & > ${tdInnerDiv.selector} {\n      overflow: hidden;\n      transition: ${transitionTime}ms ease-in-out;\n      transition-property: min-height, max-height;\n    }\n  }\n`;\n\nconst hiddenRowStyles = css`\n  opacity: 0;\n  border-color: transparent;\n\n  & > td {\n    padding-block: 0;\n\n    & > ${tdInnerDiv.selector} {\n      min-height: 0px;\n      max-height: 0px;\n    }\n  }\n`;\n\nconst transitionStyles = (state: TransitionStatus, height?: number): string => {\n  switch (state) {\n    case 'entered':\n      return css`\n        opacity: 1;\n        & > td {\n          padding-block: 8px;\n\n          & > ${tdInnerDiv.selector} {\n            min-height: var(--lg-min-cell-height);\n            max-height: max(var(--lg-min-cell-height), ${height}px);\n          }\n        }\n      `;\n    default:\n      return hiddenRowStyles;\n  }\n};\n\nfunction styleColumn(index: string, dataType?: DataType) {\n  let justify;\n\n  if (dataType === DataType.Number) {\n    justify = 'flex-end';\n  } else {\n    justify = 'flex-start';\n  }\n\n  return css`\n    & td:nth-child(${index}) > div {\n      justify-content: ${justify};\n    }\n  `;\n}\n\nfunction getIndentLevelStyle(indentLevel: number) {\n  return css`\n    & > td:nth-child(1) {\n      padding-left: ${8 + indentLevel * 16}px;\n    }\n  `;\n}\n\ninterface RowProps extends HTMLElementProps<'tr', HTMLTableRowElement> {\n  expanded?: boolean;\n  disabled?: boolean;\n  indentLevel?: number;\n  isAnyAncestorCollapsed?: boolean;\n}\n\ntype RowElement = React.ReactComponentElement<\n  typeof Row,\n  React.ComponentPropsWithRef<typeof Row>\n>;\n\nconst Row = React.forwardRef(\n  (\n    {\n      expanded = false,\n      disabled = false,\n      indentLevel = 0,\n      isAnyAncestorCollapsed: isAnyAncestorCollapsedProp,\n      children,\n      className,\n      ...rest\n    }: RowProps,\n    ref: React.Ref<any>,\n  ) => {\n    const { isBrowser } = useSSR();\n    const {\n      state: { data, columnInfo, hasNestedRows, hasRowSpan },\n      dispatch: tableDispatch,\n    } = useTableContext();\n    const darkMode = useDarkModeContext();\n    const mode = darkMode ? Mode.Dark : Mode.Light;\n\n    const indexRef = useRef(useIdAllocator({ prefix: 'row' }));\n    const [isExpanded, setIsExpanded] = useState(expanded);\n    const nestedRowNodeRef = useRef<HTMLTableRowElement>(null);\n\n    const [nestedRowHeight, setNestedRowHeight] = useState(0);\n    useEffect(() => {\n      if (nestedRowNodeRef && nestedRowNodeRef.current) {\n        const innerSpan: HTMLSpanElement | null = nestedRowNodeRef.current.querySelector(\n          `${tdInnerDiv.selector} > span`,\n        );\n\n        if (innerSpan && innerSpan.offsetHeight) {\n          setNestedRowHeight(innerSpan.offsetHeight);\n        }\n      }\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [nestedRowNodeRef.current, isExpanded]);\n\n    useEffect(() => {\n      let shouldDispatchHasNestedRows = false;\n      let shouldDispatchHasRowSpan = false;\n\n      if (hasNestedRows && hasRowSpan) {\n        return;\n      }\n\n      React.Children.forEach(children, child => {\n        if (\n          isComponentType<RowElement>(child, 'Row') &&\n          !shouldDispatchHasNestedRows &&\n          !hasNestedRows\n        ) {\n          shouldDispatchHasNestedRows = true;\n        }\n\n        if (\n          isComponentType<CellElement>(child, 'Cell') &&\n          child.props.rowSpan &&\n          child.props.rowSpan > 1 &&\n          !hasRowSpan &&\n          !shouldDispatchHasRowSpan\n        ) {\n          shouldDispatchHasRowSpan = true;\n        }\n      });\n\n      if (\n        shouldDispatchHasNestedRows &&\n        hasNestedRows !== shouldDispatchHasNestedRows\n      ) {\n        tableDispatch({\n          type: TableActionTypes.SetHasNestedRows,\n          payload: true,\n        });\n      }\n\n      if (shouldDispatchHasRowSpan && hasRowSpan !== shouldDispatchHasRowSpan) {\n        tableDispatch({\n          type: TableActionTypes.SetHasRowSpan,\n          payload: true,\n        });\n      }\n    }, [children, hasNestedRows, hasRowSpan, tableDispatch, data]);\n\n    // Render any nested rows and their transition group\n    const { rowHasNestedRows, renderedTransitionGroup } = useMemo(() => {\n      const renderedNestedRows: Array<React.ReactElement> = [];\n      const rowHasNestedRows = React.Children.toArray(children).some(child =>\n        isComponentType<RowElement>(child, 'Row'),\n      );\n\n      const shouldTransitionGroupBeVisible =\n        isExpanded && !isAnyAncestorCollapsedProp;\n\n      // We don't need the transition group except on the client here, and rendering this bit on the server breaks rendering these rows.\n      const renderedTransitionGroup = isBrowser ? (\n        <Transition\n          in={shouldTransitionGroupBeVisible}\n          timeout={{\n            enter: 0,\n            exit: transitionTime,\n          }}\n          nodeRef={nestedRowNodeRef}\n        >\n          {state =>\n            React.Children.map(children, (child, index) => {\n              if (child != null && isComponentType<RowElement>(child, 'Row')) {\n                return React.cloneElement(child, {\n                  ref: nestedRowNodeRef,\n                  isAnyAncestorCollapsed:\n                    isAnyAncestorCollapsedProp || !isExpanded,\n                  indentLevel: indentLevel + 1,\n                  key: `${indexRef.current}-${indentLevel}-${index}`,\n                  className: cx(\n                    nestedRowInitialStyle,\n                    transitionStyles(state, nestedRowHeight),\n                    `transition-${state}`,\n                  ),\n                });\n              }\n            })\n          }\n        </Transition>\n      ) : (\n        renderedNestedRows\n      );\n\n      return { rowHasNestedRows, renderedNestedRows, renderedTransitionGroup };\n    }, [\n      children,\n      isExpanded,\n      isAnyAncestorCollapsedProp,\n      isBrowser,\n      indentLevel,\n      nestedRowHeight,\n    ]);\n\n    const renderedChildren = useMemo(() => {\n      const renderedChildren: Array<React.ReactElement> = [];\n\n      React.Children.forEach(children, (child, index) => {\n        if (isComponentType<CellElement>(child, 'Cell')) {\n          if (child.props.children == null) {\n            return null;\n          }\n\n          renderedChildren.push(\n            React.cloneElement(child, {\n              children: <span>{child.props.children}</span>,\n              key: `${indexRef.current}-${index}`,\n            }),\n          );\n        }\n      });\n\n      if (rowHasNestedRows) {\n        const Icon = isExpanded ? ChevronDownIcon : ChevronRightIcon;\n\n        const chevronButton = (\n          <IconButton\n            onClick={() => setIsExpanded(curr => !curr)}\n            aria-label={isExpanded ? 'Collapse row' : 'Expand row'}\n            aria-expanded={isExpanded}\n            className={iconButtonMargin}\n            darkMode={darkMode}\n          >\n            <Icon\n              aria-hidden\n              color={darkMode ? uiColors.gray.base : uiColors.gray.dark2}\n            />\n          </IconButton>\n        );\n        renderedChildren[0] = React.cloneElement(renderedChildren[0], {\n          children: (\n            <>\n              {chevronButton}\n              <span>{renderedChildren[0].props.children}</span>\n            </>\n          ),\n          key: `${indexRef.current}-${renderedChildren[0].props.children}`,\n        });\n      }\n\n      return renderedChildren;\n    }, [children, rowHasNestedRows, isExpanded, setIsExpanded, darkMode]);\n\n    const shouldAltRowColor =\n      data && data.length >= 10 && hasNestedRows != null && !hasNestedRows;\n\n    const alignmentStyles = columnInfo\n      ? Object.entries(columnInfo).map(([key, { dataType }]) =>\n          styleColumn(key, dataType),\n        )\n      : [''];\n\n    const rowClassName = cx(\n      rowStyle,\n      modeStyles[mode].rowStyle,\n      getIndentLevelStyle(indentLevel),\n      [...alignmentStyles],\n      {\n        // Hide the row until we can apply correct alignment to cells.\n        [hideRow]: !columnInfo,\n        [modeStyles[mode].altColor]: shouldAltRowColor,\n        [modeStyles[mode].disabledStyle]: disabled,\n      },\n      className,\n    );\n\n    return (\n      <>\n        <tr\n          role=\"row\"\n          className={rowClassName}\n          aria-disabled={disabled}\n          ref={ref}\n          key={indexRef.current}\n          {...rest}\n        >\n          {renderedChildren}\n        </tr>\n\n        {renderedTransitionGroup}\n      </>\n    );\n  },\n);\n\nRow.displayName = 'Row';\n\nexport default Row;\n","import React from 'react';\nimport SortAscendingIcon from '@leafygreen-ui/icon/dist/SortAscending';\nimport SortDescendingIcon from '@leafygreen-ui/icon/dist/SortDescending';\nimport UnsortedIcon from '@leafygreen-ui/icon/dist/Unsorted';\nimport IconButton from '@leafygreen-ui/icon-button';\nimport { css, cx } from '@leafygreen-ui/emotion';\nimport { uiColors } from '@leafygreen-ui/palette';\nimport { getCommonCellStyles } from './styles';\nimport { SortDirection, useSortContext } from './SortContext';\nimport { useFontSizeContext } from './FontSizeContext';\nimport { useTableContext, TableActionTypes, DataType } from './TableContext';\nimport { enforceExhaustive } from '@leafygreen-ui/lib';\nimport { useDarkModeContext } from './DarkModeContext';\n\nconst Mode = {\n  Light: 'light',\n  Dark: 'dark',\n} as const;\n\ntype Mode = typeof Mode[keyof typeof Mode];\n\nconst modeStyles = {\n  [Mode.Light]: {\n    thStyle: css`\n      border-color: ${uiColors.gray.light2};\n    `,\n    labelStyle: css`\n      color: ${uiColors.gray.dark2};\n    `,\n    glyphColor: css`\n      color: ${uiColors.blue.base};\n    `,\n  },\n\n  [Mode.Dark]: {\n    thStyle: css`\n      background-color: ${uiColors.gray.dark3};\n      border-color: ${uiColors.gray.dark1};\n    `,\n    labelStyle: css`\n      color: ${uiColors.gray.light3};\n    `,\n    glyphColor: css`\n      color: ${uiColors.blue.light1};\n    `,\n  },\n};\n\nconst thStyle = css`\n  border-width: 0px 1px 3px 1px;\n  border-style: solid;\n`;\n\nconst flexDisplay = css`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  min-height: 32px;\n`;\n\nconst labelStyle = css`\n  padding-right: 4px;\n`;\n\nconst glyphMap = {\n  unsorted: UnsortedIcon,\n  asc: SortDescendingIcon,\n  desc: SortAscendingIcon,\n} as const;\n\ntype NormalizedAccessor<T extends string | Function> = T extends string\n  ? <U>(data: U) => T extends keyof U ? U[T] : undefined\n  : T;\nexport function normalizeAccessor<T extends string | Function>(\n  accessor: T,\n): NormalizedAccessor<T> {\n  let accessorFn = accessor as NormalizedAccessor<T>;\n\n  if (typeof accessor === 'string') {\n    if (accessor.includes('.')) {\n      const accessorArr = accessor.split('.');\n\n      accessorFn = ((data: any) => {\n        return accessorArr.reduce((obj, access) => {\n          return obj[access];\n        }, data);\n      }) as NormalizedAccessor<T>;\n    } else {\n      accessorFn = ((data: any) => data[accessor]) as NormalizedAccessor<T>;\n    }\n  }\n\n  return accessorFn;\n}\n\ninterface TableHeaderInterface<Shape> {\n  /**\n   * The label of the column\n   */\n  label: React.ReactElement | string;\n\n  /**\n   * The index of the column\n   */\n  index?: number;\n\n  /**\n   * Callback fired when the header is clicked\n   */\n  onClick?: (\n    colId: number,\n    accessorValue: ((data: any) => string) | string,\n  ) => void;\n\n  /**\n   * A callback to define which property of the data structure to sort on\n   */\n  sortBy?: ((data: Shape) => string) | string;\n\n  /**\n   * A callback to provide more customization in column sorting.\n   * This callback has a similar signature to the Array.sort method,\n   * with the addition of a `direction` parameter, which has values `asc` or `desc`.\n   *\n   * Pin a row to the top by returning -1 if `a` matches, and 1 if `b` matches the desired row\n   */\n  compareFn?: (a: Shape, b: Shape, direction: SortDirection) => number;\n\n  /**\n   * A callback that gets called when a user initiates sort on the column.\n   * Internal sorting is disabled when this callback is provided.\n   */\n  handleSort?: (direction: SortDirection) => void;\n\n  /**\n   * The type of data as a `DataType`\n   */\n  dataType?: DataType;\n}\n\nexport type TableHeaderProps<Shape> = Omit<\n  React.ComponentPropsWithoutRef<'th'>,\n  keyof TableHeaderInterface<Shape>\n> &\n  TableHeaderInterface<Shape>;\n\nexport type TableHeaderElement = React.ReactComponentElement<\n  typeof TableHeader\n>;\n\nfunction TableHeader<Shape>({\n  label,\n  onClick,\n  index,\n  className,\n  dataType,\n  sortBy,\n  compareFn,\n  handleSort,\n  ...rest\n}: TableHeaderProps<Shape>) {\n  const { dispatch } = useTableContext();\n  const { sort, setSort } = useSortContext();\n  const baseFontSize = useFontSizeContext();\n  const darkMode = useDarkModeContext();\n\n  const mode = darkMode ? Mode.Dark : Mode.Light;\n\n  React.useEffect(() => {\n    if (typeof index === 'number') {\n      dispatch({\n        type: TableActionTypes.RegisterColumn,\n        payload: {\n          // Offsetting 0-index\n          index: index + 1,\n          dataType,\n        },\n      });\n    }\n  }, [index, dataType, dispatch]);\n\n  const normalizedAccessor = sortBy && normalizeAccessor(sortBy);\n  const isSortable = !!(sortBy || compareFn || handleSort);\n\n  const sortDirection = sort && sort.columnId === index ? sort.direction : null;\n  const glyph: 'unsorted' | SortDirection = sortDirection ?? 'unsorted';\n  const Glyph = glyphMap[glyph];\n\n  const sortRows = () => {\n    if (typeof index === 'number' && isSortable) {\n      const newDirection: SortDirection =\n        index === sort?.columnId\n          ? sort.direction === 'asc'\n            ? 'desc'\n            : 'asc'\n          : 'desc';\n\n      setSort(prevSort => {\n        return {\n          columnId: index,\n          direction: newDirection,\n          accessorValue: normalizedAccessor || undefined,\n          compareFn,\n        };\n      });\n\n      handleSort?.(newDirection);\n    }\n  };\n\n  let ariaSort: React.AriaAttributes['aria-sort'];\n\n  switch (sortDirection) {\n    case 'asc':\n      ariaSort = 'ascending';\n      break;\n    case 'desc':\n      ariaSort = 'descending';\n      break;\n    case null:\n      ariaSort = 'none';\n      break;\n    default:\n      enforceExhaustive(sortDirection);\n  }\n\n  return (\n    <th\n      role=\"columnheader\"\n      scope=\"col\"\n      aria-sort={ariaSort}\n      {...rest}\n      className={cx(\n        thStyle,\n        getCommonCellStyles(baseFontSize),\n        modeStyles[mode].thStyle,\n        className,\n      )}\n    >\n      <div className={flexDisplay}>\n        <span className={cx(labelStyle, modeStyles[mode].labelStyle)}>\n          {label}\n        </span>\n        {isSortable && (\n          <IconButton aria-label=\"sort\" onClick={sortRows} darkMode={darkMode}>\n            <Glyph\n              size=\"small\"\n              title={`${glyph}-${index}`}\n              className={cx({\n                [modeStyles[mode].glyphColor]:\n                  glyph === 'asc' || glyph === 'desc',\n              })}\n            />\n          </IconButton>\n        )}\n      </div>\n    </th>\n  );\n}\n\nTableHeader.displayName = 'TableHeader';\n\nexport default TableHeader;\n"],"names":["TableActionTypes","DataType","Number","Weight","ZipCode","String","Date","TableContext","createContext","state","data","dispatch","reducer","action","type","_objectSpread","hasRowSpan","payload","hasNestedRows","columnInfo","_defineProperty","index","dataType","TableProvider","_ref","children","_useReducer2","_slicedToArray","useReducer","useEffect","contextValue","useMemo","___EmotionJSX","Provider","value","useTableContext","useContext","_excluded","HeaderRow","className","rest","_objectWithoutProperties","_extends","data-testid","TableHead","_ref$columns","columns","usingHeaderRow","React","useRef","cols","createCols","array","map","child","tableHeaderCommonProps","key","isComponentType","current","props","cloneElement","Children","toArray","Fragment","displayName","SortContext","sort","undefined","setSort","SortProvider","_useState2","useState","useSortContext","alphanumericCollator","Intl","Collator","numeric","sensitivity","getDataComparisonFunction","_ref2","direction","accessorValue","compareFn","a","b","aVal","bVal","compare","console","error","TableBody","_compareFn","rows","renderFunction","resultMap","Map","forEach","datum","set","_toConsumableArray","get","Array","from","values","useRenderedChildren","useCallback","FontSizeContext","FontSizeProvider","baseFontSize","useFontSizeContext","DarkModeContext","DarkModeProvider","darkMode","useDarkModeContext","_templateObject","_templateObject2","_templateObject3","_templateObject4","_templateObject5","_templateObject6","_templateObject7","_templateObject8","lmShadowColor","transparentize","uiColors","black","dmShadowColor","containerStyle","css","_taggedTemplateLiteral","tableStyles","shadow","leftShadow","rightShadow","showScroll","ScrollState","Table","_ref$data","dataProp","baseFontSizeProp","_ref$darkMode","_React$useState2","scrollState","setScrollState","divRef","viewportSize","useViewportSize","providerFontSize","useBaseFontSize","useIsomorphicLayoutEffect","divNode","scrollWidth","clientWidth","getBoundingClientRect","width","debounceScroll","debounce","e","target","elementWidth","scrollPosition","scrollLeft","maxPosition","leading","showLeft","showRight","cx","ref","onScroll","persist","cellSpacing","cellPadding","gray","dark1","light2","sharedStyles","getCommonCellStyles","tdInnerDiv","createDataProp","baseStyles","thStyles","innerDivStyles","Cell","forwardRef","_ref$isHeader","isHeader","Root","scope","role","prop","_modeStyles","_templateObject9","_templateObject10","_templateObject11","_templateObject12","_templateObject13","_templateObject14","Mode","iconButtonMargin","modeStyles","rowStyle","dark2","altColor","light3","disabledStyle","base","light1","dark3","selector","hideRow","nestedRowInitialStyle","hiddenRowStyles","transitionStyles","height","Row","_cx","_ref$expanded","expanded","_ref$disabled","disabled","_ref$indentLevel","indentLevel","isAnyAncestorCollapsedProp","isAnyAncestorCollapsed","isBrowser","useSSR","_useTableContext","_useTableContext$stat","tableDispatch","mode","indexRef","useIdAllocator","prefix","isExpanded","setIsExpanded","nestedRowNodeRef","_useState4","nestedRowHeight","setNestedRowHeight","innerSpan","querySelector","concat","offsetHeight","shouldDispatchHasNestedRows","shouldDispatchHasRowSpan","rowSpan","_useMemo","renderedNestedRows","rowHasNestedRows","some","renderedTransitionGroup","Transition","in","timeout","enter","exit","nodeRef","renderedChildren","push","chevronButton","IconButton","onClick","curr","aria-label","aria-expanded","ChevronDownIcon","ChevronRightIcon","aria-hidden","color","shouldAltRowColor","length","alignmentStyles","Object","entries","_ref3","justify","styleColumn","rowClassName","getIndentLevelStyle","aria-disabled","thStyle","labelStyle","glyphColor","blue","flexDisplay","glyphMap","unsorted","UnsortedIcon","asc","SortDescendingIcon","desc","SortAscendingIcon","TableHeader","label","sortBy","handleSort","_useSortContext","ariaSort","normalizedAccessor","accessor","accessorFn","includes","accessorArr","split","reduce","obj","access","normalizeAccessor","isSortable","sortDirection","columnId","glyph","Glyph","enforceExhaustive","aria-sort","newDirection","prevSort","size","title"],"mappings":"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"}