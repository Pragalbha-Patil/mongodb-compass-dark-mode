{"version":3,"file":"index.js","sources":["../../src/useEventListener.ts","../../src/useMutationObserver.ts","../../src/useViewportSize.ts","../../src/useEscapeKey.ts","../../src/usePoller.ts","../../src/usePrevious.ts","../../src/useObjectDependency.ts","../../src/useIsomorphicLayoutEffect.ts","../../src/useIdAllocator.ts","../../src/useValidation.tsx","../../src/useDynamicRefs.tsx","../../src/useForwardedRef.tsx"],"sourcesContent":["import { useEffect, useRef } from 'react';\n\nexport interface UseEventOptions {\n  options?: Omit<AddEventListenerOptions, 'once'>;\n  dependencies?: Array<any>;\n  enabled?: boolean | 'once';\n  element?: Document | HTMLElement;\n}\n\n/**\n * Hook to subscribe to an event listener.\n * @param type Represents the event type to listen for.\n * @param eventCallback Event listener callback function.\n * @param optional Optional third argument passed to function with implementation specifications\n * @param optional.options Parameter to specify options passed to the eventListener.\n * @param optional.enabled Determines whether or not the useEffect hook should run.\n * @param optional.dependencies Array to be passed to useEffect hook, such that the hook will only run if the array's values have changed.\n * @param optional.element Value to be passed as target of event handler, will default to document.\n */\nexport default function useEventListener<Type extends keyof DocumentEventMap>(\n  type: Type,\n  eventCallback: (e: DocumentEventMap[Type]) => void,\n  {\n    options,\n    enabled = true,\n    dependencies = [enabled, type],\n    element,\n  }: UseEventOptions = {},\n) {\n  const memoizedEventCallback: React.MutableRefObject<\n    (e: DocumentEventMap[Type]) => void\n  > = useRef(() => {});\n\n  useEffect(() => {\n    memoizedEventCallback.current = eventCallback;\n  }, [eventCallback]);\n\n  useEffect(() => {\n    if (enabled === false) {\n      return;\n    }\n\n    // Handle this in case non-TypeScript users pass in the wrong value\n    if (enabled !== 'once' && enabled !== true) {\n      console.error(\n        `Received value of type ${typeof enabled} for property \\`enabled\\`. Expected a boolean.`,\n      );\n      return;\n    }\n\n    const callback = (e: DocumentEventMap[Type]) =>\n      memoizedEventCallback.current(e);\n\n    const eventListenerOptions = {\n      ...options,\n      once: enabled === 'once',\n    };\n    // NOTE(JeT): I'm pretty sure there should be a way to avoid this type assertion, but I couldn't figure it out.\n    (element ?? document).addEventListener(\n      type,\n      callback as EventListener,\n      eventListenerOptions,\n    );\n\n    return () => {\n      (element ?? document).removeEventListener(\n        type,\n        callback as EventListener,\n        eventListenerOptions,\n      );\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, dependencies);\n}\n","import { useEffect, useState } from 'react';\n\ntype MutationHandler<Value> = (\n  mutations: Array<MutationRecord>,\n  observer: MutationObserver,\n) => Value;\n\n/**\n * Hook to subscribe to changes on the DOM.\n * @param target HTML element that is subscribed to DOM changes.\n * @param options Object with information about what DOM changes to subscribe to.\n * @param callback Callback function to execute inside of MutationObserver instance.\n * @param enabled Determines whether or not the hook should run, defaults to true.\n */\nexport default function useMutationObserver<Value>(\n  target: HTMLElement | null,\n  options: MutationObserverInit,\n  callback: MutationHandler<Value>,\n  enabled = true,\n): Value | undefined {\n  const [value, setValue] = useState<Value>();\n\n  useEffect(() => {\n    if (!enabled) {\n      return;\n    }\n\n    const observer = new MutationObserver((...args) => {\n      setValue(callback(...args));\n    });\n\n    if (target) {\n      observer.observe(target, options);\n    }\n\n    return () => observer.disconnect();\n  }, [target, options, callback, enabled]);\n\n  return value;\n}\n","import { useEffect, useState } from 'react';\nimport debounce from 'lodash/debounce';\n\ninterface ViewportSize {\n  width: number;\n  height: number;\n}\n\nfunction getViewportSize(): ViewportSize {\n  return {\n    width: window.innerWidth,\n    height: window.innerHeight,\n  };\n}\n\nexport default function useViewportSize(): ViewportSize | null {\n  const [viewportSize, setViewportUpdateVal] = useState<ViewportSize | null>(\n    null,\n  );\n\n  useEffect(() => {\n    setViewportUpdateVal(getViewportSize());\n\n    const calcResize = debounce(\n      () => setViewportUpdateVal(getViewportSize()),\n      100,\n    );\n\n    window.addEventListener('resize', calcResize);\n\n    return () => window.removeEventListener('resize', calcResize);\n  }, []);\n\n  return viewportSize;\n}\n","import useEventListener, { UseEventOptions } from './useEventListener';\n\nconst escapeKeyCode = 27;\n\nconst handleEscape = (e: KeyboardEvent, callback: () => void) => {\n  if (e.keyCode === escapeKeyCode) {\n    e.stopImmediatePropagation();\n    callback();\n  }\n};\n\n/**\n * Hook to subscribe to an escape-key-press.\n * @param callback Callback function to be executed when Escape key is pressed.\n * @param options Object to refine when callback is invoked.\n * @param options.options Parameter to specify options passed to the eventListener.\n * @param options.enabled Determines whether or not the useEffect hook should run.\n * @param options.dependencies Array to be passed to useEffect hook, such that the hook will only run if the array's values have changed.\n * @param options.element Value to be passed as target of event handler, will default to document.\n */\nconst useEscapeKey = (callback: () => void, options?: UseEventOptions) => {\n  return useEventListener('keydown', e => handleEscape(e, callback), options);\n};\n\nexport default useEscapeKey;\n","import { useState, useRef, useEffect } from 'react';\nimport useEventListener from './useEventListener';\n\nfunction useVisibilityChange() {\n  const isVisibilityStateVisible = () => document.visibilityState === 'visible';\n\n  const [isVisible, setIsVisible] = useState(true);\n\n  useEffect(() => {\n    setIsVisible(isVisibilityStateVisible);\n  }, []);\n\n  useEventListener('visibilitychange', () => {\n    setIsVisible(isVisibilityStateVisible);\n  });\n\n  return isVisible;\n}\n\ntype OnPoll = () => void;\n\ninterface PollerOptions {\n  /**\n   * How frequently should we call the onPoll handler. Defaults to 30 seconds.\n   * @default 30000\n   */\n  interval?: number;\n\n  /**\n   * Should we immediately trigger the onPoll handler.\n   * @default true\n   */\n  immediate?: boolean;\n\n  /**\n   * Should we be polling.\n   * @default true\n   */\n  enabled?: boolean;\n}\n\nexport default function usePoller(\n  onPoll: OnPoll,\n  { interval = 30e3, immediate = true, enabled = true }: PollerOptions = {},\n) {\n  const savedCallback = useRef<OnPoll>();\n  const isVisible = useVisibilityChange();\n\n  const isPolling = isVisible && enabled;\n\n  useEffect(() => {\n    savedCallback.current = onPoll;\n  });\n\n  useEffect(() => {\n    if (!isPolling) {\n      return;\n    }\n\n    // Using this reflection to get return type of setTimeout so we don't have to\n    // use window.setTimeout, makes this more cross-environment compatible\n    // Sourced from: https://stackoverflow.com/a/51040768\n    let id: ReturnType<typeof setTimeout>;\n\n    function scheduleNextPoll() {\n      unscheduleNextPoll();\n      id = setTimeout(poll, interval);\n    }\n\n    function unscheduleNextPoll() {\n      clearTimeout(id);\n    }\n\n    function poll() {\n      Promise.resolve(savedCallback.current?.()).finally(scheduleNextPoll);\n    }\n\n    if (immediate) {\n      poll();\n    } else {\n      scheduleNextPoll();\n    }\n\n    return unscheduleNextPoll;\n  }, [interval, immediate, isPolling]);\n}\n","import { useEffect, useRef } from 'react';\n\n/**\n * Hook to store previous props\n * https://reactjs.org/docs/hooks-faq.html#how-to-get-the-previous-props-or-state\n */\nexport default function usePrevious<T>(value: T): T | undefined {\n  const ref = useRef<T>();\n\n  useEffect(() => {\n    ref.current = value;\n  });\n\n  return ref.current;\n}\n","import { useRef } from 'react';\nimport isEqual from 'lodash/isEqual';\n\nexport default function useObjectDependency<T>(object: T): T {\n  const ref = useRef<T>();\n\n  // we need isEqual for deep object comparison\n  if (ref.current === undefined || !isEqual(ref.current, object)) {\n    ref.current = object;\n  }\n\n  return ref.current;\n}\n","import { useEffect, useLayoutEffect } from 'react';\n\nconst useIsomorphicLayoutEffect: typeof useLayoutEffect = (...args) => {\n  const effectHook =\n    typeof window === 'undefined' ? useEffect : useLayoutEffect;\n  return effectHook(...args);\n};\n\nexport default useIsomorphicLayoutEffect;\n","import { useEffect, useState } from 'react';\nimport useIsomorphicLayoutEffect from './useIsomorphicLayoutEffect';\n\nlet serverHandoffComplete = false;\nconst registry: Map<string, number> = new Map();\n\nconst genId = (prefix: string) => {\n  if (registry.has(prefix)) {\n    const val = registry.get(prefix);\n    const update = val ? val + 1 : 1;\n    registry.set(prefix, update);\n    return update;\n  } else {\n    registry.set(prefix, 1);\n    return 1;\n  }\n};\n\n/**\n * Generates an SSR-compatible unique id based on a prefix string and an optional idProp parameter.\n * @param options {prefix: string; id: string;}\n * @param options.prefix string that prefixes the generated id\n * @param options.id string that represents an already-created id\n */\nfunction useIdAllocator({\n  prefix,\n  id: idProp,\n}: {\n  prefix?: string;\n  id?: string;\n}) {\n  const initialId = prefix && (serverHandoffComplete ? genId(prefix) : null);\n\n  const [id, setId] = useState(initialId);\n\n  useIsomorphicLayoutEffect(() => {\n    if (prefix && id === null) {\n      setId(genId(prefix));\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    if (serverHandoffComplete === false) {\n      serverHandoffComplete = true;\n    }\n  }, []);\n\n  return idProp ? idProp : `${prefix}-${id}`;\n}\n\nexport default useIdAllocator;\n","import isUndefined from 'lodash/isUndefined';\nimport { useState } from 'react';\n\nexport default function useValidation<\n  T extends HTMLInputElement | HTMLTextAreaElement\n>(handleValidation?: (value: string) => void) {\n  const [isDirty, setIsDirty] = useState(false);\n\n  if (isUndefined(handleValidation) || typeof handleValidation !== 'function') {\n    return {\n      onBlur: () => {},\n      onChange: () => {},\n    };\n  }\n\n  const onBlur = (e: React.FocusEvent<T>) => {\n    setIsDirty(true);\n    handleValidation?.(e.target.value);\n  };\n\n  const onChange = (e: React.ChangeEvent<T>) => {\n    if (isDirty) {\n      handleValidation?.(e.target.value);\n    }\n  };\n\n  return {\n    onBlur,\n    onChange,\n  };\n}\n","/**\n * From https://github.com/fitzmode/use-dynamic-refs/blob/master/src/index.tsx\n *\n * There's a bug in the original package\n *\n * Consider moving this to `/hooks`\n */\n\nimport * as React from 'react';\n\nconst map = new Map<string, React.RefObject<unknown>>();\n\nfunction getGetRef<T>(prefix = '') {\n  function getRef(): undefined;\n  function getRef(key: string): React.RefObject<T>;\n  function getRef(key?: string): React.RefObject<T> | undefined {\n    if (!key) {\n      console.error(`useDynamicRefs: Cannot get ref without key`);\n      return;\n    }\n\n    const fullKey = prefix + '-' + key;\n\n    if (map.get(fullKey)) {\n      return map.get(fullKey) as React.RefObject<T>;\n    }\n\n    const ref = React.createRef<T>();\n    map.set(fullKey, ref);\n    return ref;\n  }\n\n  return getRef;\n}\n\nfunction useDynamicRefs<T>({\n  prefix,\n}: {\n  prefix: string;\n}): (key?: string) => undefined | React.RefObject<T> {\n  return getGetRef<T>(prefix);\n}\n\nexport default useDynamicRefs;\n","import { useCallback, useMemo, useRef } from 'react';\n\n// Ported from Select/utils\n// TODO: - remove duplicated code from Select/utils\nexport function useObservedRef<T>(\n  callback: (value: T) => void,\n  initialValue: T,\n  options: { initialValue: T; deps?: React.DependencyList },\n): React.MutableRefObject<T>;\nexport function useObservedRef<T>(\n  callback: (value: T) => void,\n  options?: { initialValue: T | null; deps?: React.DependencyList },\n): React.RefObject<T>;\nexport function useObservedRef<T>(\n  callback: (value: T | undefined) => void,\n  options?: { deps?: React.DependencyList },\n): React.MutableRefObject<T>;\nexport function useObservedRef<T>(\n  callback: (value: T | null | undefined) => void,\n  {\n    initialValue,\n    deps = [],\n  }: { initialValue?: T | null; deps?: React.DependencyList } = {},\n) {\n  const ref = useRef(initialValue);\n\n  return useMemo(\n    () => ({\n      get current() {\n        return ref.current;\n      },\n      set current(nextValue) {\n        ref.current = nextValue;\n        callback(nextValue);\n      },\n    }),\n    [\n      callback,\n      ref,\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n      ...deps,\n    ],\n  );\n}\n\ntype SettableRef<T> = React.RefCallback<T> | React.MutableRefObject<T>;\n\ntype ValueOrArray<T> = T | ReadonlyArray<T>;\n\nexport function useForwardedRef<T>(\n  forwardedRefOrRefs: ValueOrArray<SettableRef<T> | null>,\n  initialValue: T,\n): React.MutableRefObject<T>;\nexport function useForwardedRef<T>(\n  forwardedRefOrRefs: ValueOrArray<SettableRef<T | null> | null>,\n  initialValue: T | null,\n): React.RefObject<T>;\nexport function useForwardedRef<T>(\n  forwardedRefOrRefs: ValueOrArray<SettableRef<T | null | undefined> | null>,\n  initialValue?: T | null,\n): React.MutableRefObject<T | null | undefined> {\n  const forwardValueToRefs = useCallback(\n    <T,>(\n      forwardedRefOrRefs: ValueOrArray<SettableRef<T> | null>,\n      nextValue: T,\n    ) => {\n      if (Array.isArray(forwardedRefOrRefs)) {\n        forwardedRefOrRefs.forEach(forwardValueToRefs);\n      } else if (typeof forwardedRefOrRefs === 'function') {\n        forwardedRefOrRefs(nextValue);\n      } else if (forwardedRefOrRefs) {\n        // @ts-expect-error https://github.com/microsoft/TypeScript/issues/40527\n        forwardedRefOrRefs.current = nextValue;\n      }\n    },\n    [],\n  );\n\n  return useObservedRef(\n    useCallback(value => forwardValueToRefs(forwardedRefOrRefs, value), [\n      forwardedRefOrRefs,\n      forwardValueToRefs,\n    ]),\n    { initialValue },\n  );\n}\n"],"names":["useEventListener","type","eventCallback","_ref","arguments","length","undefined","options","_ref$enabled","enabled","_ref$dependencies","dependencies","element","memoizedEventCallback","useRef","useEffect","current","callback","e","eventListenerOptions","_objectSpread","once","document","addEventListener","removeEventListener","console","error","concat","_typeof","useMutationObserver","target","_useState","useState","_useState2","_slicedToArray","value","setValue","observer","MutationObserver","apply","observe","disconnect","getViewportSize","width","window","innerWidth","height","innerHeight","useViewportSize","viewportSize","setViewportUpdateVal","calcResize","debounce","useEscapeKey","keyCode","stopImmediatePropagation","handleEscape","useVisibilityChange","isVisibilityStateVisible","visibilityState","isVisible","setIsVisible","usePoller","onPoll","_ref$interval","interval","_ref$immediate","immediate","savedCallback","isPolling","id","poll","scheduleNextPoll","unscheduleNextPoll","setTimeout","clearTimeout","_savedCallback$curren","Promise","resolve","call","finally","usePrevious","ref","useObjectDependency","object","isEqual","useIsomorphicLayoutEffect","effectHook","useLayoutEffect","serverHandoffComplete","registry","Map","genId","prefix","has","val","get","update","set","useIdAllocator","idProp","initialId","setId","useValidation","handleValidation","isDirty","setIsDirty","isUndefined","onBlur","onChange","map","useDynamicRefs","getRef","key","fullKey","React.createRef","getGetRef","useObservedRef","initialValue","_ref$deps","deps","useMemo","nextValue","_toConsumableArray","useForwardedRef","forwardedRefOrRefs","forwardValueToRefs","useCallback","Array","isArray","forEach"],"mappings":"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"}