{"version":3,"file":"index.js","sources":["../src/Portal.tsx"],"sourcesContent":["import { OneOf } from '@leafygreen-ui/lib';\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { createPortal } from 'react-dom';\nimport { useIsomorphicLayoutEffect } from '@leafygreen-ui/hooks';\n\ntype PortalProps = {\n  children?: React.ReactNode;\n} & OneOf<\n  { container: HTMLElement; className?: never },\n  { className?: string; container?: null }\n>;\n\nfunction usePortalContainer(customContainer?: HTMLElement) {\n  // Make container initially undefined so that the portal is not created\n  // or rendered on initial render. This allows server-side rendering since:\n  //  - ReactDOMServer cannot render portals\n  //  - A component's initial hydrated render should match the server render\n  const [container, setContainer] = useState<HTMLElement | undefined>();\n\n  useIsomorphicLayoutEffect(() => {\n    if (customContainer) {\n      setContainer(customContainer);\n    } else {\n      const defaultContainer = document.createElement('div');\n      document.body.appendChild(defaultContainer);\n\n      setContainer(defaultContainer);\n\n      return () => {\n        defaultContainer.remove();\n      };\n    }\n  }, [customContainer]);\n\n  return container;\n}\n\nfunction Portal(props: PortalProps) {\n  const container = usePortalContainer(props.container ?? undefined);\n\n  useIsomorphicLayoutEffect(() => {\n    if (container && !props.container) {\n      container.className = props.className ?? '';\n    }\n  }, [container, props.container, props.className]);\n\n  if (!container) {\n    return null;\n  }\n\n  return createPortal(props.children, container);\n}\n\nPortal.displayName = 'Portal';\n\nPortal.propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.string,\n  container: PropTypes.oneOfType([PropTypes.node, PropTypes.object]),\n};\n\nexport default Portal;\n"],"names":["Portal","props","_props$container","container","customContainer","_useState2","_slicedToArray","useState","setContainer","useIsomorphicLayoutEffect","defaultContainer","document","createElement","body","appendChild","remove","usePortalContainer","undefined","_props$className","className","createPortal","children","displayName","propTypes","PropTypes","node","string","oneOfType","object"],"mappings":"g/CA+BA,SAASA,EAAOC,GACd,IAAIC,EAEAC,EA5BN,SAA4BC,GAK1B,IACIC,EAAaC,EADDC,aAC2B,GACvCJ,EAAYE,EAAW,GACvBG,EAAeH,EAAW,GAc9B,OAZAI,6BAA0B,WACxB,IAAIL,EAEG,CACL,IAAIM,EAAmBC,SAASC,cAAc,OAG9C,OAFAD,SAASE,KAAKC,YAAYJ,GAC1BF,EAAaE,GACN,WACLA,EAAiBK,UANnBP,EAAaJ,KASd,CAACA,IACGD,EAMSa,CAA4D,QAAxCd,EAAmBD,EAAME,iBAA4C,IAArBD,EAA8BA,OAAmBe,GASrI,OARAR,6BAA0B,WAEtB,IAAIS,EADFf,IAAcF,EAAME,YAGtBA,EAAUgB,UAAqD,QAAxCD,EAAmBjB,EAAMkB,iBAA4C,IAArBD,EAA8BA,EAAmB,MAEzH,CAACf,EAAWF,EAAME,UAAWF,EAAMkB,YAEjChB,EAIeiB,eAAanB,EAAMoB,SAAUlB,GAHxC,YAMXH,EAAOsB,YAAc,SACrBtB,EAAOuB,UAAY,CACjBF,SAAUG,UAAUC,KACpBN,UAAWK,UAAUE,OACrBvB,UAAWqB,UAAUG,UAAU,CAACH,UAAUC,KAAMD,UAAUI"}