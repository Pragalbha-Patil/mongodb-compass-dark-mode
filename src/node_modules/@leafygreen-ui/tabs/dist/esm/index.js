import e,{useState as n,useRef as r,useEffect as t,useMemo as o,useCallback as l}from"react";import a from"prop-types";import{css as i,cx as c}from"@leafygreen-ui/emotion";import{uiColors as s}from"@leafygreen-ui/palette";import{keyMap as f,isComponentType as u}from"@leafygreen-ui/lib";import{validateAriaLabelProps as d}from"@leafygreen-ui/a11y";import p from"@leafygreen-ui/portal";import{useIsomorphicLayoutEffect as b,useIdAllocator as y}from"@leafygreen-ui/hooks";import m from"@leafygreen-ui/box";import{useUsingKeyboardContext as g}from"@leafygreen-ui/leafygreen-provider";import{fontFamilies as h}from"@leafygreen-ui/tokens";import{jsx as v}from"@emotion/react";function O(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function k(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?O(Object(r),!0).forEach((function(n){x(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function j(){return(j=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e}).apply(this,arguments)}function S(e,n){if(null==e)return{};var r,t,o=function(e,n){if(null==e)return{};var r,t,o={},l=Object.keys(e);for(t=0;t<l.length;t++)r=l[t],n.indexOf(r)>=0||(o[r]=e[r]);return o}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(t=0;t<l.length;t++)r=l[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function T(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function C(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var t,o,l=[],a=!0,i=!1;try{for(r=r.call(e);!(a=(t=r.next()).done)&&(l.push(t.value),!n||l.length!==n);a=!0);}catch(e){i=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(i)throw o}}return l}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return N(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function P(e){return"string"==typeof(n=e)||"number"==typeof n?e.toString().trim():Array.isArray(e)?e.map(P).join(" ").trim():function(e){return e&&"object"===w(e)&&e.props}(e)?P(e.props.children):"";var n}var A,D,R,E,I,K,M,F,L,X=["selected","disabled","children","className","darkMode","parentRef"],z={light:{listTitleColor:i(A||(A=T(["\n      color: ",";\n    "])),s.gray.dark1),listTitleHover:i(D||(D=T(["\n      &:hover {\n        cursor: pointer;\n\n        &:not(:focus) {\n          color: ",";\n\n          &:after {\n            background-color: ",";\n          }\n        }\n      }\n    "])),s.gray.dark3,s.gray.light2),listTitleFocus:i(R||(R=T(["\n      &:focus {\n        color: ",";\n\n        &:after {\n          background-color: ",";\n        }\n      }\n    "])),s.blue.base,s.blue.base)},dark:{listTitleColor:i(E||(E=T(["\n      color: ",";\n    "])),s.gray.light1),listTitleHover:i(I||(I=T(["\n      &:hover {\n        cursor: pointer;\n\n        &:not(:focus) {\n          color: ",";\n\n          &:after {\n            background-color: ",";\n          }\n        }\n      }\n    "])),s.white,s.gray.dark1),listTitleFocus:i(K||(K=T(["\n      &:focus {\n        color: ",";\n\n        &:after {\n          background-color: ",";\n        }\n      }\n    "])),s.blue.light1,s.focus)}},H=i(M||(M=T(["\n  &:after {\n    transform: scaleX(1);\n    background-color: ",";\n  }\n\n  &:hover:after {\n    transform: scaleX(1);\n    background-color: ",";\n  }\n"])),s.green.base,s.green.base),U=i(F||(F=T(["\n  background-color: transparent;\n  border: 0px;\n  padding: 12px 16px;\n  text-decoration: none;\n  max-width: 300px;\n  white-space: nowrap;\n  transition: 150ms color ease-in-out;\n  font-family: ",";\n  font-weight: 600;\n  font-size: 16px;\n  position: relative;\n\n  &:focus {\n    outline: none;\n  }\n\n  &:after {\n    content: '';\n    position: absolute;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    height: 4px;\n    border-radius: 4px 4px 0 0;\n    transition: all 150ms ease-in-out;\n    background-color: transparent;\n    transform: scaleX(0.8);\n  }\n\n  &:hover:after {\n    transform: scaleX(0.95);\n  }\n\n  &:active:after {\n    &:after {\n      transform: scaleX(1);\n      background-color: ",";\n    }\n  }\n"])),h.default,s.green.base),W=i(L||(L=T(["\n  cursor: pointer;\n  overflow: hidden;\n  text-overflow: ellipsis;\n"]))),$=function(e){var o,l,a=e.selected,i=void 0!==a&&a,s=e.disabled,f=void 0!==s&&s,u=e.children,d=e.className,p=e.darkMode,y=e.parentRef,h=S(e,X),O=g().usingKeyboard,w=C(n(!1),2),T=w[0],N=w[1],A=r(null),D=p?oe.Dark:oe.Light;t((function(){var e,n=Array.from(null!==(e=null==y?void 0:y.children)&&void 0!==e?e:[]),r=document.activeElement;r&&-1!==n.indexOf(r)&&!f&&i&&A.current&&A.current.focus()}),[y,f,i,A]),b((function(){var e=A.current;null!=e&&e.scrollWidth>300&&N(!0)}),[A,N]);var R=k(k({},h),{},(l={className:c(U,z[D].listTitleColor,(o={},x(o,H,i),x(o,z[D].listTitleFocus,O),x(o,W,T),x(o,z[D].listTitleHover,!f&&!i),o),d),role:"tab",tabIndex:i?0:-1},x(l,"aria-selected",i),x(l,"name",P(h.name)),l));return"string"==typeof h.href?v(m,j({as:"a",ref:A},R),u):v(m,j({as:"button",ref:A},R),u)};$.displayName="TabTitle";var q=["child","selected","tabRef","panelRef"],B=e.memo((function(n){var r=n.child,t=n.selected,l=n.tabRef,a=n.panelRef,i=S(n,q),c=r.props,s=c.id,f=c.name,u=y({prefix:"tab-panel"}),d=y({prefix:"tab",id:s}),b=v($,j({},i,{selected:t,id:d,"aria-controls":u}),f),m=o((function(){return e.cloneElement(r,x({id:u,selected:t},"aria-labelledby",d))}),[r,u,t,d]);return v(e.Fragment,null,v(p,{container:l},b),v(p,{container:a},m))}));B.displayName="InternalTab";var G,J,Q,V,Y,Z,_,ee,ne,re=["children","setSelected","selected","className","darkMode","as","aria-labelledby","aria-label"],te=["disabled","onClick","onKeyDown","className"],oe={Dark:"dark",Light:"light"},le=(x(_={},oe.Light,{activeStyle:i(G||(G=T(["\n      color: ",";\n\n      &:hover:not(:focus) {\n        color: ",";\n      }\n    "])),s.green.dark2,s.green.dark2),disabledColor:i(J||(J=T(["\n      color: ",";\n    "])),s.gray.light1),underlineColor:i(Q||(Q=T(["\n      border-bottom: 1px solid ",";\n    "])),s.gray.light2)}),x(_,oe.Dark,{activeStyle:i(V||(V=T(["\n      color: ",";\n\n      &:hover:not(:focus) {\n        color: ",";\n      }\n    "])),s.green.light2,s.green.light2),disabledColor:i(Y||(Y=T(["\n      color: ",";\n    "])),s.gray.dark1),underlineColor:i(Z||(Z=T(["\n      border-bottom: 1px solid ",";\n    "])),s.gray.dark2)}),_),ae=i(ee||(ee=T(["\n  list-style: none;\n  padding: 0;\n  display: flex;\n  width: 100%;\n  overflow-x: auto;\n\n  /* Remove scrollbar */\n\n  /* Chrome, Edge, Safari and Opera */\n  &::-webkit-scrollbar {\n    display: none;\n  }\n\n  -ms-overflow-style: none; /* IE */\n  scrollbar-width: none; /* Firefox */\n"]))),ie=i(ne||(ne=T(["\n  cursor: not-allowed;\n"])));function ce(r){var t;d(r,"Tabs");var a=r.children,i=r.setSelected,s=r.selected,p=r.className,b=r.darkMode,y=void 0!==b&&b,m=r.as,g=void 0===m?"button":m,h=r["aria-labelledby"],O=r["aria-label"],w=S(r,re),T=y?oe.Dark:oe.Light,N=C(n(null),2),P=N[0],A=N[1],D=C(n(null),2),R=D[0],E=D[1],I=(x(t={},"aria-label",O),x(t,"aria-labelledby",h),t),K=o((function(){return e.Children.toArray(a)}),[a]),M="number"==typeof s,F=C(n(K.findIndex((function(e){return e.props.default||0}))),2),L=F[0],X=F[1],z=M?s:L,H=M?i:X,U=l((function(e,n){null==H||H(n)}),[H]),W=l((function(){var e=K.filter((function(e){return!e.props.disabled})).map((function(e){return K.indexOf(e)}));return[e,e.indexOf(z)]}),[K,z]),$=l((function(e){if(!e.metaKey&&!e.ctrlKey)if(e.keyCode===f.ArrowRight){var n=C(W(),2),r=n[0],t=n[1];null==H||H(r[(t+1)%r.length])}else if(e.keyCode===f.ArrowLeft){var o=C(W(),2),l=o[0],a=o[1];null==H||H(l[(a-1+l.length)%l.length])}}),[W,H]),q=e.Children.map(a,(function(e,n){var r;if(!u(e,"Tab"))return e;var t=n===z,o=e.props,l=o.disabled,a=o.onClick,i=o.onKeyDown,s=o.className,f=S(o,te),d=k({as:g,disabled:l,darkMode:y,parentRef:P,className:c((r={},x(r,le[T].activeStyle,t),x(r,c(le[T].disabledColor,ie),l),r),s),onKeyDown:function(e){null==i||i(e),$(e)},onClick:l?void 0:function(e){null==a||a(e),U(e,n)}},f);return v(B,j({child:e,selected:t,tabRef:P,panelRef:R},d))}));return v("div",j({},w,{className:p}),q,v("div",j({className:c(ae,le[T].underlineColor),role:"tablist",ref:A,"aria-orientation":"horizontal"},I)),v("div",{ref:E}))}ce.displayName="Tabs",ce.propTypes={children:a.node,setSelected:a.func,selected:a.number,className:a.string,as:a.oneOfType([a.string,a.func])};var se=["selected","children"];function fe(e){var n=e.selected,r=e.children,t=S(e,se);return delete t.default,delete t.name,delete t.onClick,delete t.href,v("div",j({},t,{role:"tabpanel"}),n?r:null)}fe.displayName="Tab",fe.propTypes={selected:a.bool,children:a.node,name:a.oneOfType([a.string,a.node]),content:a.node,disabled:a.bool,ariaControl:a.string};export{fe as Tab,ce as Tabs};
//# sourceMappingURL=index.js.map
