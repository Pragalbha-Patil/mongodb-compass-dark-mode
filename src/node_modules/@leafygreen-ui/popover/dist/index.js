!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react"),require("prop-types"),require("react-transition-group"),require("@leafygreen-ui/emotion"),require("@leafygreen-ui/portal"),require("@leafygreen-ui/leafygreen-provider"),require("@leafygreen-ui/hooks"),require("@emotion/react")):"function"==typeof define&&define.amd?define(["exports","react","prop-types","react-transition-group","@leafygreen-ui/emotion","@leafygreen-ui/portal","@leafygreen-ui/leafygreen-provider","@leafygreen-ui/hooks","@emotion/react"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self)["@leafygreen-ui/popover"]={},t.React,t.PropTypes,t.reactTransitionGroup,t["@leafygreen-ui/emotion"],t["@leafygreen-ui/portal"],t["@leafygreen-ui/leafygreen-provider"],t["@leafygreen-ui/hooks"],t.react)}(this,(function(t,e,n,r,o,i,a,c,u){"use strict";function s(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var l=s(e),f=s(n),d=s(i);function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g(){return(g=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){p(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function m(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function v(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function w(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(t,e)||P(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(t){return function(t){if(Array.isArray(t))return j(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||P(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(t,e){if(t){if("string"==typeof t)return j(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(t,e):void 0}}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var E,O,x,C,S,D,H,T,M={Top:"top",Bottom:"bottom",Left:"left",Right:"right",CenterVertical:"center-vertical",CenterHorizontal:"center-horizontal"},R={Start:"start",Middle:"middle",End:"end",Fit:"fit"};function V(t){var e=t.useRelativePositioning,n=t.spacing,r=t.align,o=t.justify,i=t.referenceElViewportPos,a=void 0===i?L:i,c=t.referenceElDocumentPos,u=void 0===c?L:c,s=t.contentElViewportPos,l=void 0===s?L:s,f=t.contentElDocumentPos,d=void 0===f?L:f,p=t.windowHeight,g=void 0===p?window.innerHeight:p,h=t.windowWidth,m=void 0===h?window.innerWidth:h,v={windowWidth:m,windowHeight:g,referenceElViewportPos:a,contentElViewportPos:l,spacing:n},w=function(t,e){var n=e.spacing,r=e.windowWidth,o=e.windowHeight,i=e.contentElViewportPos,a=e.referenceElViewportPos;return[t].concat(b(X[t])).find((function(t){return[M.Top,M.Bottom,M.CenterVertical].includes(t)?U({top:_({align:t,contentElPos:i,referenceElPos:a,spacing:n}),windowHeight:o,contentHeight:i.height}):!![M.Left,M.Right,M.CenterHorizontal].includes(t)&&J({left:G({align:t,contentElPos:i,referenceElPos:a,spacing:n}),windowWidth:r,contentWidth:i.width})}))||t}(r,v),P=function(t,e,n){var r,o,i=n.spacing,a=n.windowWidth,c=n.windowHeight,u=n.contentElViewportPos,s=n.referenceElViewportPos,l=[t].concat(b(Y[t]));switch(e){case M.Top:case M.Bottom:case M.CenterVertical:return null!==(r=l.find((function(t){return J({contentWidth:t===R.Fit?s.width:u.width,windowWidth:a,left:G({contentElPos:u,referenceElPos:s,spacing:i,align:e,justify:t})})})))&&void 0!==r?r:Y[t][0];case M.Left:case M.Right:case M.CenterHorizontal:return null!==(o=l.find((function(t){return U({contentHeight:t===R.Fit?s.height:u.height,windowHeight:c,top:_({contentElPos:u,referenceElPos:s,spacing:i,align:e,justify:t})})})))&&void 0!==o?o:Y[t][0]}}(o,w,v),j=function(t){var e,n,r=t.align,o=t.justify,i=N[r],a=null!==(e=i.x)&&void 0!==e?e:W[o],c=null!==(n=i.y)&&void 0!==n?n:z[o];return"".concat(a," ").concat(c)}({align:w,justify:P}),E=function(t,e){var n=.8;switch(t){case M.Top:return"translate3d(0, ".concat(e,"px, 0) scale(").concat(n,")");case M.Bottom:return"translate3d(0, -".concat(e,"px, 0) scale(").concat(n,")");case M.Left:return"translate3d(".concat(e,"px, 0, 0) scale(").concat(n,")");case M.Right:return"translate3d(-".concat(e,"px, 0, 0) scale(").concat(n,")");case M.CenterHorizontal:case M.CenterVertical:return"scale(".concat(n,")")}}(w,n);return e?{align:w,justify:P,positionCSS:y({},k({align:w,justify:P,referenceElDocumentPos:u,contentElDocumentPos:d,spacing:n}),{transformOrigin:j,transform:E})}:{align:w,justify:P,positionCSS:y({},Z({align:w,justify:P,referenceElDocumentPos:u,contentElDocumentPos:d,spacing:n,windowHeight:g,windowWidth:m}),{transformOrigin:j,transform:E})}}var L={top:0,bottom:0,left:0,right:0,height:0,width:0};function B(t,e){if(!t)return L;var n=t.getBoundingClientRect(),r=n.top,o=n.bottom,i=n.left,a=n.right,c=t.offsetHeight,u=t.offsetWidth;if(e){var s=e.scrollTop,l=e.scrollLeft,f=e.getBoundingClientRect();return{top:r+s-f.top,bottom:o+s-f.bottom,left:i+l-f.left,right:a+l-f.right,height:c,width:u}}var d=window,p=d.scrollX,g=d.scrollY;return{top:r+g,bottom:o+g,left:i+p,right:a+p,height:c,width:u}}function F(t,e){if(!t)return L;var n=t.getBoundingClientRect(),r=n.top,o=n.bottom,i=n.left,a=n.right,c=t.offsetHeight,u=t.offsetWidth;if(e){var s=e.getBoundingClientRect();return{top:r-s.top,bottom:o-s.bottom,left:i-s.left,right:a-s.right,height:c,width:u}}return{top:r,bottom:o,left:i,right:a,height:c,width:u}}var z=(p(E={},R.Start,"top"),p(E,R.Middle,"center"),p(E,R.End,"bottom"),p(E,R.Fit,"center"),E),W=(p(O={},R.Start,"left"),p(O,R.Middle,"center"),p(O,R.End,"right"),p(O,R.Fit,"center"),O),N=(p(x={},M.Left,{x:"right"}),p(x,M.Right,{x:"left"}),p(x,M.Top,{y:"bottom"}),p(x,M.Bottom,{y:"top"}),p(x,M.CenterHorizontal,{x:"center"}),p(x,M.CenterVertical,{y:"center"}),x);var A=(p(C={},R.Start,{top:0}),p(C,R.End,{bottom:0}),p(C,R.Middle,(function(t){var e=t.contentElDocumentPos,n=t.referenceElDocumentPos;return{top:"".concat(n.height/2-e.height/2,"px")}})),p(C,R.Fit,{top:0,bottom:0}),C),I=(p(S={},R.Start,{left:0}),p(S,R.End,{right:0}),p(S,R.Middle,(function(t){var e=t.contentElDocumentPos,n=t.referenceElDocumentPos;return{left:"".concat(n.width/2-e.width/2,"px")}})),p(S,R.Fit,{left:0,right:0}),S),q=(p(D={},M.Top,{constant:function(t){var e=t.spacing;return{bottom:"calc(100% + ".concat(e,"px)")}},justifyPositions:I}),p(D,M.Bottom,{constant:function(t){var e=t.spacing;return{top:"calc(100% + ".concat(e,"px)")}},justifyPositions:I}),p(D,M.CenterVertical,{constant:function(t){var e=t.referenceElDocumentPos;return{top:"calc(".concat(e.height/2,"px - 50%)")}},justifyPositions:I}),p(D,M.Left,{constant:function(t){var e=t.spacing;return{right:"calc(100% + ".concat(e,"px)")}},justifyPositions:A}),p(D,M.Right,{constant:function(t){var e=t.spacing;return{left:"calc(100% + ".concat(e,"px)")}},justifyPositions:A}),p(D,M.CenterHorizontal,{constant:function(t){var e=t.referenceElDocumentPos;return{left:"calc(".concat(e.width/2,"px - 50%)")}},justifyPositions:A}),D);function k(t){var e,n=t.align,r=t.justify,o=t.referenceElDocumentPos,i=t.contentElDocumentPos,a=t.spacing,c=q[n],u=c.justifyPositions[r],s={contentElDocumentPos:i,referenceElDocumentPos:o,spacing:a};return y({},null===(e=c.constant)||void 0===e?void 0:e.call(c,s),{},"function"==typeof u?u(s):u)}function Z(t){var e=t.align,n=t.justify,r=t.referenceElDocumentPos,o=t.contentElDocumentPos,i=t.spacing,a=t.windowWidth,c=t.windowHeight,u="".concat(G({align:e,justify:n,referenceElPos:r,contentElPos:o,spacing:i}),"px"),s="".concat(_({align:e,justify:n,referenceElPos:r,contentElPos:o,spacing:i}),"px");return n!==R.Fit?{left:u,top:s}:[M.Left,M.Right,M.CenterHorizontal].includes(e)?{left:u,top:s,bottom:"".concat(c-r.bottom,"px")}:{left:u,top:s,right:"".concat(a-r.right,"px")}}function _(t){var e=t.align,n=t.justify,r=t.contentElPos,o=t.referenceElPos,i=t.spacing;switch(e){case M.Left:case M.Right:case M.CenterHorizontal:switch(n){case R.Start:case R.Fit:return o.top;case R.End:return o.top+o.height-r.height;case R.Middle:default:return o.top-(r.height-o.height)/2}case M.CenterVertical:return o.top-(r.height-o.height)/2;case M.Top:return o.top-r.height-i;case M.Bottom:default:return o.top+o.height+i}}function G(t){var e=t.align,n=t.justify,r=t.contentElPos,o=t.referenceElPos,i=t.spacing;switch(e){case M.Top:case M.Bottom:case M.CenterVertical:switch(n){case R.End:return o.left+o.width-r.width;case R.Middle:return o.left-(r.width-o.width)/2;case R.Start:case R.Fit:default:return o.left}case M.Left:return o.left-r.width-i;case M.Right:return o.left+o.width+i;case M.CenterHorizontal:default:return o.left-(r.width-o.width)/2}}function J(t){var e=t.left,n=t.windowWidth,r=t.contentWidth;return e>=0&&!(e+r>n)}function U(t){var e=t.top,n=t.windowHeight,r=t.contentHeight;return e>=0&&!(e+r>n)}var X=(p(H={},M.Top,[M.Bottom]),p(H,M.Bottom,[M.Top]),p(H,M.Left,[M.Right]),p(H,M.Right,[M.Left]),p(H,M.CenterHorizontal,[M.Left,M.Right]),p(H,M.CenterVertical,[M.Top,M.Bottom]),H);var Y=(p(T={},R.Start,[R.End,R.Middle]),p(T,R.Middle,[R.End,R.Start]),p(T,R.End,[R.Start,R.Middle]),p(T,R.Fit,[R.Middle,R.Start,R.End]),T);function $(){var t=v(["\n                    z-index: ",";\n                  "]);return $=function(){return t},t}function K(){var t=v(["\n              display: none;\n            "]);return K=function(){return t},t}function Q(){var t=v(["\n    opacity: 1;\n    position: ",";\n    pointer-events: initial;\n  "]);return Q=function(){return t},t}function tt(){var t=v(["\n  position: absolute;\n  transition: transform 150ms ease-in-out, opacity 150ms ease-in-out;\n  opacity: 0;\n"]);return tt=function(){return t},t}var et=o.css(tt()),nt={attributes:!0,characterData:!0,childList:!0,subtree:!0};function rt(t){var n=t.active,i=void 0!==n&&n,s=t.spacing,f=void 0===s?10:s,h=t.align,y=void 0===h?M.Bottom:h,v=t.justify,b=void 0===v?R.Start:v,P=t.adjustOnMutation,j=void 0!==P&&P,E=t.children,O=t.className,x=t.popoverZIndex,C=t.refEl,S=t.usePortal,D=void 0===S||S,H=t.portalClassName,T=t.portalContainer,L=t.scrollContainer,z=m(t,["active","spacing","align","justify","adjustOnMutation","children","className","popoverZIndex","refEl","usePortal","portalClassName","portalContainer","scrollContainer"]),W=w(e.useState(null),2),N=W[0],A=W[1],I=w(e.useState(null),2),q=I[0],k=I[1],Z=w(e.useState(0),2),_=Z[0],G=Z[1],J=a.usePopoverPortalContainer(),U=J.portalContainer,X=J.scrollContainer;U=T||U,X=L||X;var Y=l.default.useRef(q);Y.current=q;var tt=null;if(C&&C.current)tt=C.current;else if(N){var rt=N.parentNode;rt&&rt instanceof HTMLElement&&(tt=rt)}var ot=c.useViewportSize(),it=j&&i,at=c.useMutationObserver(tt,nt,Date.now,it),ct=c.useMutationObserver(q,nt,Date.now,it),ut=c.useObjectDependency(F(tt,X)),st=c.useObjectDependency(F(q,X)),lt=c.useObjectDependency(e.useMemo((function(){return B(tt,X)}),[tt,X,ot,at,i,y,b,_])),ft=c.useObjectDependency(e.useMemo((function(){return B(q)}),[q,ot,ct,i,y,b,_])),dt=c.usePrevious(b),pt=c.usePrevious(y),gt=dt!==b&&(b===R.Fit||dt===R.Fit)||pt!==y&&b===R.Fit;c.useIsomorphicLayoutEffect((function(){gt&&G((function(t){return t+1}))}),[gt]);var ht=w(e.useState(!1),2),yt=ht[0],mt=ht[1];if(c.useIsomorphicLayoutEffect((function(){return mt(!0)}),[]),!yt)return null;var vt,wt=V({useRelativePositioning:!D,spacing:f,align:y,justify:b,referenceElViewportPos:ut,referenceElDocumentPos:lt,contentElViewportPos:st,contentElDocumentPos:ft}),bt=wt.align,Pt=wt.justify,jt=wt.positionCSS,Et=jt.transform,Ot=m(jt,["transform"]),xt=o.css(Q(),D?"":"absolute"),Ct=D?d.default:e.Fragment,St=D?U?{container:U}:{className:null!=H?H:void 0}:{};return vt=null==E?null:"function"==typeof E?E({align:bt,justify:Pt,referenceElPos:lt}):E,u.jsx(r.Transition,{nodeRef:Y,in:i,timeout:150,mountOnEnter:!0,unmountOnExit:!0,appear:!0},(function(t){var e;return u.jsx(l.default.Fragment,null,u.jsx("div",{ref:A,className:o.css(K())}),u.jsx(Ct,St,u.jsx("div",g({},z,{className:o.cx(et,o.css(Ot),(e={},p(e,o.css({transform:Et}),"entering"===t||"exiting"===t),p(e,xt,"entered"===t),p(e,o.css($(),x),"number"==typeof x),e),O)}),u.jsx("div",{ref:k},vt))))}))}rt.displayName="Popover",rt.propTypes={children:f.default.oneOfType([f.default.node,f.default.func]),active:f.default.bool,className:f.default.string,align:f.default.oneOf(Object.values(M)),justify:f.default.oneOf(Object.values(R)),refEl:f.default.shape({current:"undefined"!=typeof window?f.default.instanceOf(Element):f.default.any}),usePortal:f.default.bool,portalClassName:f.default.string,spacing:f.default.number,adjustOnMutation:f.default.bool},t.Align=M,t.Justify=R,t.default=rt,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=index.js.map
