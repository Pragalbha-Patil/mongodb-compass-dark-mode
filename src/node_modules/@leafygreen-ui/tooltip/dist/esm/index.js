import n,{useState as t,useEffect as r,useCallback as e}from"react";import o from"prop-types";import{transparentize as i}from"polished";import a from"lodash/debounce";import c,{Justify as l,Align as u}from"@leafygreen-ui/popover";export{Justify}from"@leafygreen-ui/popover";import{useIdAllocator as p,useEscapeKey as f,useEventListener as s}from"@leafygreen-ui/hooks";import{css as d,cx as g}from"@leafygreen-ui/emotion";import{uiColors as b}from"@leafygreen-ui/palette";import{fontFamilies as h}from"@leafygreen-ui/tokens";import{isComponentType as m}from"@leafygreen-ui/lib";import{useBaseFontSize as y}from"@leafygreen-ui/leafygreen-provider";import{isComponentGlyph as v}from"@leafygreen-ui/icon";import x from"lodash/clamp";import{jsx as O}from"@emotion/react";function k(n,t,r){return t in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,n}function j(){return(j=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(n[e]=r[e])}return n}).apply(this,arguments)}function w(n,t){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(n);t&&(e=e.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.push.apply(r,e)}return r}function C(n){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){k(n,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(r,t))}))}return n}function P(n,t){if(null==n)return{};var r,e,o=function(n,t){if(null==n)return{};var r,e,o={},i=Object.keys(n);for(e=0;e<i.length;e++)r=i[e],t.indexOf(r)>=0||(o[r]=n[r]);return o}(n,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(e=0;e<i.length;e++)r=i[e],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(n,r)&&(o[r]=n[r])}return o}function E(n,t){return t||(t=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(t)}}))}function N(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(n)))return;var r=[],e=!0,o=!1,i=void 0;try{for(var a,c=n[Symbol.iterator]();!(e=(a=c.next()).done)&&(r.push(a.value),!t||r.length!==t);e=!0);}catch(n){o=!0,i=n}finally{try{e||null==c.return||c.return()}finally{if(o)throw i}}return r}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return M(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,e=new Array(t);r<t;r++)e[r]=n[r];return e}function S(){var n=E(["\n      min-width: ","px;\n      transform: ",";\n    "]);return S=function(){return n},n}function I(){var n=E(["\n      ",";\n      position: absolute;\n      transform: rotate(45deg);\n      width: ","px;\n      height: ","px;\n      margin: auto;\n    "]);return I=function(){return n},n}function T(){var n=E(["\n      position: absolute;\n      width: ","px;\n      height: ","px;\n      overflow: hidden;\n      margin: auto;\n      pointer-events: none;\n      ",";\n    "]);return T=function(){return n},n}var A;function L(){var n=E(["\n      background-color: ",";\n      border: 1px solid ",";\n      box-shadow: 2px 2px 4px ",";\n    "]);return L=function(){return n},n}function F(){var n=E(["\n      color: ",";\n    "]);return F=function(){return n},n}function z(){var n=E(["\n      background-color: ",";\n      color: ",";\n      border: 1px solid ",";\n    "]);return z=function(){return n},n}function B(){var n=E(["\n      background-color: ",";\n      box-shadow: 2px 2px 4px ",";\n    "]);return B=function(){return n},n}function D(){var n=E(["\n      color: ",";\n    "]);return D=function(){return n},n}function H(){var n=E(["\n      background-color: ",";\n      color: ",";\n    "]);return H=function(){return n},n}function U(){var n=E(["\n  position: relative;\n"]);return U=function(){return n},n}function Z(){var n=E(["\n  padding: 14px 16px;\n  border-radius: 3px;\n  box-shadow: 0px 2px 4px -1px ",";\n  cursor: default;\n  overflow-wrap: break-word;\n"]);return Z=function(){return n},n}function G(){var n=E(["\n  font-size: 16px;\n  line-height: 24px;\n  letter-spacing: 0px;\n"]);return G=function(){return n},n}function R(){var n=E(["\n  font-size: 14px;\n  line-height: 20px;\n  letter-spacing: 0px;\n"]);return R=function(){return n},n}function X(){var n=E(["\n  margin: unset;\n  font-family: ",";\n  color: ",";\n  font-weight: 400;\n"]);return X=function(){return n},n}var Y=d(X(),h.default,b.gray.dark3),J=d(R()),$=d(G()),q={Hover:"hover",Click:"click"},K="light",Q="dark",V={Top:u.Top,Bottom:u.Bottom,Left:u.Left,Right:u.Right},W=d(Z(),i(.8,b.black)),_=d(U()),nn=(k(A={},Q,{tooltip:d(H(),b.gray.dark3,b.gray.light1),children:d(D(),b.gray.light1),notch:d(B(),b.gray.dark3,i(.9,b.black))}),k(A,K,{tooltip:d(z(),b.gray.light3,b.gray.dark2,b.gray.light2),children:d(F(),b.gray.dark2),notch:d(L(),b.gray.light3,b.gray.light2,i(.9,b.black))}),A),tn=function(n){n.stopPropagation()};function rn(o){var i=o.open,u=o.setOpen,b=o.className,h=o.children,k=o.trigger,w=o.triggerEvent,E=void 0===w?q.Hover:w,M=o.darkMode,A=void 0!==M&&M,L=o.enabled,F=void 0===L||L,z=o.align,B=void 0===z?"top":z,D=o.justify,H=void 0===D?"start":D,U=o.spacing,Z=void 0===U?12:U,G=o.id,R=o.shouldClose,X=o.usePortal,V=void 0===X||X,rn=o.portalClassName,en=o.portalContainer,on=o.scrollContainer,an=o.popoverZIndex,cn=o.refEl,ln=P(o,["open","setOpen","className","children","trigger","triggerEvent","darkMode","enabled","align","justify","spacing","id","shouldClose","usePortal","portalClassName","portalContainer","scrollContainer","popoverZIndex","refEl"]),un="boolean"==typeof i,pn=N(t(!1),2),fn=pn[0],sn=pn[1],dn=y(),gn=un?i:fn,bn=un&&u?u:sn,hn=N(t(null),2),mn=hn[0],yn=hn[1],vn=null!=G?G:null==mn?void 0:mn.id,xn=p({prefix:"tooltip",id:vn});r((function(){(k&&m(k,"Icon")||v(k))&&console.warn("Using a LeafyGreenUI Icon or Glyph component as a trigger will not render a Tooltip, as these components do not render their children. To use, please wrap your trigger element in another HTML tag.")}),[k]);var On=e((function(){("function"!=typeof R||R())&&bn(!1)}),[bn,R]),kn=e((function(n,t){switch(n){case q.Hover:return{onMouseEnter:a((function(n){r("onMouseEnter",n),bn(!0)}),35),onMouseLeave:a((function(n){r("onMouseLeave",n),On()}),35),onFocus:function(n){r("onFocus",n),bn(!0)},onBlur:function(n){r("onBlur",n),On()}};case q.Click:default:return{onClick:function(n){n.target!==mn&&(r("onClick",n),bn((function(n){return!n})))}}}function r(n,r){t&&t[n]&&"function"==typeof t[n]&&t[n](r)}}),[On,bn,mn]);f(On,{enabled:gn});var jn=e((function(n){mn&&!mn.contains(n.target)&&On()}),[On,mn]);s("click",jn,{enabled:gn&&"click"===E});var wn=C({refEl:cn,popoverZIndex:an},V?{spacing:Z,usePortal:V,portalClassName:rn,portalContainer:en,scrollContainer:on}:{spacing:Z,usePortal:V}),Cn=A?Q:K,Pn=F&&gn,En=O(c,j({key:"tooltip",active:Pn,align:B,justify:H,adjustOnMutation:!0,onClick:tn},wn),(function(n){var t=function(n,t,r){if(!n||!t||!r)return{notchContainer:"",notch:"",tooltip:""};var e,o,i={},a={},c=10,u=0,p="";switch(n){case"top":case"bottom":switch(c=15,e=r.width/2-10,u=x(e,5,c),o=e<=5,i.left="0px",i.right="0px","top"===n?(a.top="calc(100% - 1px)",i.top="".concat(-5,"px")):(a.bottom="calc(100% - 1px)",i.bottom="".concat(-5,"px")),t){case l.Start:a.left="".concat(u,"px"),o&&(p="translateX(-".concat(5-e,"px)"));break;case l.Middle:case l.Fit:a.left="0px",a.right="0px";break;case l.End:a.right="".concat(u,"px"),o&&(p="translateX(".concat(5-e,"px)"))}break;case"left":case"right":switch(c=10,e=r.height/2-10,u=x(e,5,c),o=e<=5,i.top="0px",i.bottom="0px","left"===n?(i.left="".concat(-5,"px"),a.left="100%"):(i.right="".concat(-5,"px"),a.right="100%"),t){case l.Start:a.top="".concat(u,"px"),o&&(p="translateY(-".concat(5-e,"px)"));break;case l.Middle:case l.Fit:a.top="0px",a.bottom="0px";break;case l.End:a.bottom="".concat(u,"px"),o&&(p="translateY(".concat(5-e,"px)"))}}return{notchContainer:d(T(),20,20,d(a)),notch:d(I(),d(i),10,10),tooltip:d(S(),2*u+20,p)}}(n.align,n.justify,n.referenceElPos),r=t.notchContainer,e=t.notch,o=t.tooltip;return O("div",j({},ln,{role:"tooltip",id:xn,className:g(W,o,nn[Cn].tooltip,b),ref:yn}),O("div",{className:g(Y,16===dn?$:J,nn[Cn].children)},h),O("div",{className:r},O("div",{className:g(e,nn[Cn].notch)})))}));return k?"function"==typeof k?k(C({},kn(E),{className:_,"aria-describedby":Pn?xn:void 0,children:En})):n.cloneElement(k,C({},kn(E,k.props),{"aria-describedby":Pn?xn:void 0,children:O(n.Fragment,null,k.props.children,En),className:g(_,k.props.className)})):En}rn.displayName="Tooltip",rn.propTypes={children:o.node,className:o.string,align:o.oneOf(Object.values(V)),justify:o.oneOf(Object.values(l)),trigger:o.oneOfType([o.node,o.func]),triggerEvent:o.oneOf(Object.values(q)),darkMode:o.bool,enabled:o.bool,open:o.bool,setOpen:o.func,id:o.string,shouldClose:o.func,usePortal:o.bool,portalClassName:o.string};export default rn;export{V as Align,q as TriggerEvent};
//# sourceMappingURL=index.js.map
