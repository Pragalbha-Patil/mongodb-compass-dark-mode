import n,{useRef as e,useState as r,useMemo as t,useCallback as o}from"react";import i from"prop-types";import u,{Align as a,Justify as l}from"@leafygreen-ui/popover";import{useEventListener as c}from"@leafygreen-ui/hooks";import{isComponentType as f,keyMap as s,createDataProp as d}from"@leafygreen-ui/lib";import{css as p,cx as g}from"@leafygreen-ui/emotion";import{uiColors as b}from"@leafygreen-ui/palette";import{transparentize as m}from"polished";import{jsx as v}from"@emotion/react";import{useUsingKeyboardContext as y}from"@leafygreen-ui/leafygreen-provider";import h from"@leafygreen-ui/box";import{Transition as k}from"react-transition-group";import x from"@leafygreen-ui/icon-button";import O from"@leafygreen-ui/icon/dist/CaretUp";import w from"@leafygreen-ui/icon/dist/CaretDown";function j(n){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function N(n,e,r){return e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function C(){return(C=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}return n}).apply(this,arguments)}function E(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.push.apply(r,t)}return r}function S(n){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?E(Object(r),!0).forEach((function(e){N(n,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))}))}return n}function P(n,e){if(null==n)return{};var r,t,o=function(n,e){if(null==n)return{};var r,t,o={},i=Object.keys(n);for(t=0;t<i.length;t++)r=i[t],e.indexOf(r)>=0||(o[r]=n[r]);return o}(n,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(t=0;t<i.length;t++)r=i[t],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(n,r)&&(o[r]=n[r])}return o}function A(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}function I(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(n)))return;var r=[],t=!0,o=!1,i=void 0;try{for(var u,a=n[Symbol.iterator]();!(t=(u=a.next()).done)&&(r.push(u.value),!e||r.length!==e);t=!0);}catch(n){o=!0,i=n}finally{try{t||null==a.return||a.return()}finally{if(o)throw i}}return r}(n,e)||z(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(n){return function(n){if(Array.isArray(n))return D(n)}(n)||function(n){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(n))return Array.from(n)}(n)||z(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(n,e){if(n){if("string"==typeof n)return D(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?D(n,e):void 0}}function D(n,e){(null==e||e>n.length)&&(e=n.length);for(var r=0,t=new Array(e);r<e;r++)t[r]=n[r];return t}function T(){var n=A(["\n  overflow: auto;\n  list-style: none;\n  margin-block-start: 0px;\n  margin-block-end: 0px;\n  padding-inline-start: 0px;\n  padding: 0px;\n"]);return T=function(){return n},n}function F(){var n=A(["\n  width: 200px;\n  border-radius: 4px;\n  overflow: hidden;\n  box-shadow: 0 2px 6px ",";\n  background-color: ",";\n"]);return F=function(){return n},n}var R=p(F(),m(.8,b.black),b.white),K=p(T());function U(i){var d=i.align,p=void 0===d?a.Bottom:d,b=i.justify,m=void 0===b?l.End:b,y=i.adjustOnMutation,h=void 0!==y&&y,k=i.shouldClose,x=void 0===k?function(){return!0}:k,O=i.spacing,w=i.open,N=i.setOpen,E=i.children,A=i.className,z=i.refEl,D=i.trigger,T=i.usePortal,F=void 0===T||T,U=i.portalClassName,Z=i.portalContainer,q=i.scrollContainer,H=i.popoverZIndex,B=P(i,["align","justify","adjustOnMutation","shouldClose","spacing","open","setOpen","children","className","refEl","trigger","usePortal","portalClassName","portalContainer","scrollContainer","popoverZIndex"]),L=e(!1),V=e(!1),$=I(r(!1),2)[1],_=I(r(null),2),G=_[0],J=_[1],Q=I(r(!1),2),W=Q[0],X=Q[1],Y="boolean"==typeof w&&N||X,nn=null!=w?w:W,en=n.useMemo((function(){if(null==E||["boolean","number","string"].includes(j(E)))return{updatedChildren:void 0,refs:[]};var e=[],r=[];return{updatedChildren:function t(o){return n.Children.map(o,(function(o){var i,u;if(!n.isValidElement(o)||(null===(i=o.props)||void 0===i?void 0:i.disabled))return o;var a=o.props,l=null,c=function(n){null!=n&&(r.push(n),l=n,nn&&!1===L.current&&(sn(r[0]),L.current=!0))},d=null!==(u=null==a?void 0:a.title)&&void 0!==u&&u,p=function(n){var e=n.target;an(e)};if(f(o,"SubMenu")&&d){if(e.includes(d))throw new Error("SubMenu titles must be unique");e.push(d),G||!a.active||V.current||(J(o),V.current=!0);var g=(null==G?void 0:G.props.title)===d;return n.cloneElement(o,{ref:c,open:g,setOpen:function(n){l&&an(l),J(n?o:null)},onKeyDown:function(n){n.keyCode===s.ArrowLeft&&g&&J(null),n.keyCode===s.ArrowRight&&J(o)},onFocus:p,children:t(a.children),onExited:function(){$((function(n){return!n}))}})}return f(o,"MenuItem")||f(o,"FocusableMenuItem")?n.cloneElement(o,{ref:c,onFocus:p}):(null==a?void 0:a.children)?n.cloneElement(o,{children:t(a.children)}):o}))}(E),refs:r}}),[E,G,nn]),rn=en.updatedChildren,tn=en.refs,on=I(r(tn[0]||null),2),un=on[0],an=on[1],ln=I(r(null),2),cn=ln[0],fn=ln[1],sn=function(n){null!=n&&(an(n),n.focus())};t((function(){nn&&(L.current=!1,V.current=!1)}),[nn]);var dn=o((function(){x()&&Y(!1)}),[Y,x]),pn=o((function(n){cn&&!cn.contains(n.target)&&dn()}),[dn,cn]);c("click",pn,{enabled:nn}),c("keydown",(function(n){var e,r=tn.filter((function(n){return null!==n}));switch(n.keyCode){case s.ArrowDown:e=tn[(tn.indexOf(un)+1)%tn.length],sn(e);break;case s.ArrowUp:e=tn[(tn.indexOf(un)-1+tn.length)%tn.length],sn(e);break;case s.Tab:!n.shiftKey&&function(n){return document.activeElement===n[n.length-1]}(r)&&(n.preventDefault(),sn(tn[0])),n.shiftKey&&function(){var n=tn.filter((function(n){return null!==n}));return document.activeElement===n[0]}()&&(n.preventDefault(),sn(r[r.length-1]));break;case s.Escape:dn();break;case s.Space:case s.Enter:nn||sn(tn[0])}}),{enabled:nn});var gn=S({popoverZIndex:H},F?{spacing:O,usePortal:F,portalClassName:U,portalContainer:Z,scrollContainer:q}:{spacing:O,usePortal:F}),bn=v(u,C({key:"popover",active:nn,align:p,justify:m,refEl:z,adjustOnMutation:h},gn),v("div",{className:g(R,A)},v("ul",C({},B,{className:K,role:"menu",ref:fn,onClick:function(n){return n.stopPropagation()}}),rn)));if(D){if("function"==typeof D)return D({onClick:function(){return Y((function(n){return!n}))},children:bn});var mn=D.props.children;return n.cloneElement(D,{onClick:function(n){Y((function(n){return!n})),D.props.onClick&&D.props.onClick(n)},children:mn?[].concat(M(mn instanceof Array?mn:[mn]),[bn]):bn})}return bn}function Z(){var n=A(["\n  border-top: 1px solid ",";\n"]);return Z=function(){return n},n}U.displayName="Menu",U.propTypes={children:i.node,className:i.string,align:i.oneOf(Object.values(a)),justify:i.oneOf(Object.values(l)),refEl:i.shape({current:"undefined"!=typeof window?i.instanceOf(Element):i.any}),usePortal:i.bool,trigger:i.oneOfType([i.node,i.func]),open:i.bool,setOpen:i.func};var q=p(Z(),b.gray.light2);function H(){return v("li",{role:"separator",className:q})}function B(){var n=A(["\n  color: ",";\n"]);return B=function(){return n},n}function L(){var n=A(["\n  text-decoration: none;\n  color: inherit;\n"]);return L=function(){return n},n}function V(){var n=A(["\n  &:focus {\n    text-decoration: none;\n    background-color: ",";\n    color: ",";\n\n    &:before {\n      background-color: #63b0d0;\n    }\n  }\n\n  &::-moz-focus-inner {\n    border: 0;\n  }\n"]);return V=function(){return n},n}function $(){var n=A(["\n  cursor: not-allowed;\n  pointer-events: none;\n  background-color: ",";\n\n  &:hover:before {\n    background-color: unset;\n  }\n"]);return $=function(){return n},n}function _(){var n=A(["\n  &:before {\n    background-color: ",";\n  }\n\n  &:hover {\n    background-color: ",";\n    color: ",";\n    &:before {\n      background-color: ",";\n    }\n  }\n"]);return _=function(){return n},n}function G(){var n=A(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding-left: ","px;\n  padding-right: ","px;\n  text-decoration: none;\n  cursor: pointer;\n  text-decoration: none;\n  position: relative;\n  transition: background-color 150ms ease-in-out;\n  border: none;\n  margin: unset;\n  width: 100%;\n  font-family: Akzidenz, ‘Helvetica Neue’, Helvetica, Arial, sans-serif;\n  box-sizing: border-box;\n  background: ",";\n  text-align: left;\n\n  &:focus {\n    outline: none;\n    text-decoration: none;\n  }\n\n  &:before {\n    content: '';\n    position: absolute;\n    width: ","px;\n    top: 0;\n    bottom: 0;\n    left: -1px;\n    background-color: transparent;\n    transition: background-color 150ms ease-in-out;\n  }\n\n  &:hover {\n    text-decoration: none;\n    background-color: ",";\n    &:before {\n      background-color: ",";\n    }\n  }\n\n  &:active {\n    background-color: ",";\n    &:before {\n      background-color: ",";\n    }\n  }\n"]);return G=function(){return n},n}H.displayName="MenuSeparator";var J,Q=p(G(),15,15,b.white,5,b.gray.light2,b.gray.light1,b.gray.light2,b.gray.light1),W=p(_(),b.green.base,b.gray.light3,b.green.dark3,b.green.base),X=p($(),b.gray.light3),Y=p(V(),b.blue.light3,b.blue.dark3),nn=p(L()),en=p(B(),b.gray.light1);function rn(){var n=A(["\n            width: 100%;\n          "]);return rn=function(){return n},n}function tn(){var n=A(["\n    min-height: 56px;\n  "]);return tn=function(){return n},n}function on(){var n=A(["\n    min-height: 36px;\n  "]);return on=function(){return n},n}function un(){var n=A(["\n  color: ",";\n  ",":hover > & {\n    color: ",";\n  }\n"]);return un=function(){return n},n}function an(){var n=A(["\n  ",":focus > & {\n    color: ",";\n  }\n"]);return an=function(){return n},n}function ln(){var n=A(["\n  color: ",";\n  margin-right: ","px;\n  flex-shrink: 0;\n\n  ",":hover > & {\n    color: ",";\n  }\n"]);return ln=function(){return n},n}function cn(){var n=A(["\n  ",":focus & {\n    color: ",";\n  }\n"]);return cn=function(){return n},n}function fn(){var n=A(["\n  font-size: 12px;\n  font-weight: normal;\n  color: ",";\n"]);return fn=function(){return n},n}function sn(){var n=A(["\n  color: ",";\n"]);return sn=function(){return n},n}function dn(){var n=A(["\n  font-weight: bold;\n  color: ",";\n"]);return dn=function(){return n},n}function pn(){var n=A(["\n  ",":focus & {\n    color: ",";\n  }\n"]);return pn=function(){return n},n}function gn(){var n=A(["\n  width: 100%;\n  font-size: 14px;\n  font-weight: normal;\n  color: ",";\n"]);return gn=function(){return n},n}var bn=d("menu-item-container"),mn=p(gn(),b.gray.dark2),vn=p(pn(),bn.selector,b.blue.dark3),yn=p(dn(),b.green.dark3),hn=p(sn(),b.green.dark2),kn=p(fn(),b.gray.dark1),xn=p(cn(),bn.selector,b.blue.dark2),On=p(ln(),b.gray.dark1,13,bn.selector,b.gray.dark1),wn=p(an(),bn.selector,b.blue.base),jn=p(un(),b.green.base,bn.selector,b.green.base),Nn="large",Cn=(N(J={},"default",p(on())),N(J,Nn,p(tn())),J),En=n.forwardRef((function(e,r){var t,o,i,u,a=e.disabled,l=void 0!==a&&a,c=e.active,f=void 0!==c&&c,s=e.size,d=void 0===s?"default":s,b=e.className,m=e.children,k=e.description,x=e.glyph,O=P(e,["disabled","active","size","className","children","description","glyph"]),w=y().usingKeyboard,j=x&&n.cloneElement(x,{role:"presentation",className:g(On,(t={},N(t,jn,f),N(t,wn,w),t),null===(o=x.props)||void 0===o?void 0:o.className)}),E=S({},O,{},bn.prop,{ref:r,className:g(Q,Cn[d],nn,mn,(i={},N(i,yn,f),N(i,en,l),N(i,vn,w),N(i,W,f),N(i,X,l),N(i,Y,w),i),b),role:"menuitem",tabIndex:l?-1:void 0},"string"!=typeof O.href&&{disabled:l},{"aria-disabled":l}),A=v(n.Fragment,null,j,v("div",{className:p(rn())},v("div",null,m),k&&v("div",{className:g(kn,(u={},N(u,hn,f),N(u,en,l),N(u,xn,w),u))},k)));return"string"==typeof O.href?v("li",{role:"none"},v(h,C({as:"a"},{target:"_self",rel:""},E),A)):v("li",{role:"none"},v(h,C({as:"button"},E),A))}));En.displayName="MenuItem",En.propTypes={href:i.string,onClick:i.func,className:i.string,description:i.node,disabled:i.bool,active:i.bool,children:i.node};var Sn=n.forwardRef((function(e,r){var t=e.children;return n.cloneElement(t,{ref:r})}));function Pn(){var n=A(["\n                      padding-left: ","px;\n                    "]);return Pn=function(){return n},n}function An(){var n=A(["\n                  height: ","px;\n                "]);return An=function(){return n},n}function In(){var n=A(["\n  position: absolute;\n  width: 100%;\n  height: 1px;\n  background: ",";\n  top: 0;\n"]);return In=function(){return n},n}function Mn(){var n=A(["\n  list-style: none;\n  padding: 0;\n  height: 0;\n  overflow: hidden;\n  transition: height 150ms ease-in-out;\n"]);return Mn=function(){return n},n}function zn(){var n=A(["\n  font-size: 11px;\n"]);return zn=function(){return n},n}function Dn(){var n=A(["\n  color: ",";\n  ",":hover > & {\n    color: ",";\n  }\n"]);return Dn=function(){return n},n}function Tn(){var n=A(["\n  ",":focus > & {\n    color: ",";\n  }\n"]);return Tn=function(){return n},n}function Fn(){var n=A(["\n  color: ",";\n  margin-right: ","px;\n  flex-shrink: 0;\n\n  ",":hover > & {\n    color: ",";\n  }\n"]);return Fn=function(){return n},n}function Rn(){var n=A(["\n  background-color: ",";\n"]);return Rn=function(){return n},n}function Kn(){var n=A(["\n  ",":focus + & {\n    background-color: ",";\n\n    &:hover:before {\n      background-color: ",";\n    }\n  }\n"]);return Kn=function(){return n},n}function Un(){var n=A(["\n  position: absolute;\n  z-index: 1;\n  right: 8px;\n  top: ","px;\n  margin: auto;\n  background-color: ",";\n  transition: background-color 150ms ease-in-out;\n\n  ",":hover + & {\n    background-color: ",";\n  }\n"]);return Un=function(){return n},n}function Zn(){var n=A(["\n  font-weight: bolder;\n  color: ",";\n"]);return Zn=function(){return n},n}function qn(){var n=A(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  font-size: 14px;\n  color: ",";\n  ",":focus & {\n    color: ",";\n  }\n"]);return qn=function(){return n},n}function Hn(){var n=A(["\n  color: ",";\n"]);return Hn=function(){return n},n}function Bn(){var n=A(["\n  transition: color 200ms ease-in-out;\n  color: ",";\n"]);return Bn=function(){return n},n}function Ln(){var n=A(["\n  ",":focus + "," & {\n    color: ",";\n  }\n"]);return Ln=function(){return n},n}function Vn(){var n=A(["\n  background-color: transparent;\n\n  &:hover {\n    background-color: ",";\n  }\n"]);return Vn=function(){return n},n}function $n(){var n=A(["\n  min-height: 56px;\n  border-top: 1px solid ",";\n  background-color: ",";\n  align-items: center;\n  justify-content: flex-start;\n"]);return $n=function(){return n},n}function _n(){var n=A(["\n  position: relative;\n  overflow: hidden;\n"]);return _n=function(){return n},n}Sn.displayName="FocusableMenuItem",Sn.propTypes={children:i.element.isRequired,onFocus:i.func};var Gn=d("sub-menu-container"),Jn=d("icon-button"),Qn=p(_n()),Wn=p($n(),b.gray.light2,b.gray.light3),Xn=p(Vn(),b.gray.light2),Yn=p(Ln(),Gn.selector,Jn.selector,b.blue.dark2),ne=p(Bn(),b.gray.base),ee=p(Hn(),b.gray.dark2),re=p(qn(),b.gray.dark3,Gn.selector,b.blue.dark3),te=p(Zn(),b.green.dark3),oe=p(Un(),14,b.gray.light3,Gn.selector,b.gray.light2),ie=p(Kn(),Gn.selector,b.blue.light3,b.blue.light2),ue=p(Rn(),b.white),ae=p(Fn(),b.gray.dark1,13,Gn.selector,b.gray.dark1),le=p(Tn(),Gn.selector,b.blue.base),ce=p(Dn(),b.green.base,Gn.selector,b.green.base),fe=p(zn()),se=p(Mn()),de=p(In(),b.gray.light2),pe=n.forwardRef((function(e,t){var i,u,a,l,c=e.title,f=e.children,s=e.onClick,d=e.description,b=e.setOpen,m=e.className,j=e.glyph,E=e.onExited,A=void 0===E?function(){}:E,M=e.open,z=void 0!==M&&M,D=e.active,T=void 0!==D&&D,F=e.disabled,R=void 0!==F&&F,K=P(e,["title","children","onClick","description","setOpen","className","glyph","onExited","open","active","disabled"]),U=y().usingKeyboard,Z=n.useRef(null),q=I(r(null),2),H=q[0],B=q[1],L=o((function(n){(null==H?void 0:H.contains(n.target))?n.preventDefault():s&&s(n)}),[H,s]),V=n.Children.toArray(f).length,$=j&&n.cloneElement(j,{role:"presentation",className:g(ae,(i={},N(i,ce,T),N(i,le,U),i),null===(u=j.props)||void 0===u?void 0:u.className)}),_=S({},Gn.prop,{},K,{ref:t,onClick:L,role:"menuitem","aria-haspopup":!0,className:g(Q,Wn,nn,(a={},N(a,W,T),N(a,X,R),N(a,Xn,z),N(a,Y,U),a),m)}),G=v(n.Fragment,null,$,v("div",null,v("div",{className:g(re,N({},te,T))},c),v("div",{className:g(fe,N({},en,R))},d))),J="string"==typeof K.href?v(h,C({as:"a"},_),G):v(h,C({as:"button"},_),G),rn=g(z?ee:ne,N({},Yn,U));return v("li",{role:"none",className:Qn},J,v(x,C({},Jn.prop,{ref:B,"aria-label":z?"Close Sub-menu":"Open Sub-menu",className:g(oe,(l={},N(l,ue,z),N(l,ie,U),l)),onClick:function(n){n.nativeEvent.stopImmediatePropagation(),b&&b(!z)}}),v(z?O:w,{role:"presentation",className:rn})),v(k,{in:z,timeout:{enter:0,exit:150},mountOnEnter:!0,unmountOnExit:!0,onExited:A,nodeRef:Z},(function(e){return v("ul",{ref:Z,className:g(se,N({},p(An(),36*V),"entered"===e)),role:"menu","aria-label":c},n.Children.map(f,(function(e){return n.cloneElement(e,{children:v(n.Fragment,null,v("div",{className:de}),e.props.children),className:g(p(Pn(),j?52:28),e.props.className),onClick:function(n){var r,t;null===(r=e.props)||void 0===r||null===(t=r.onClick)||void 0===t||t.call(r,n),s&&s(n)}})})))})))}));pe.displayName="SubMenu",pe.propTypes={title:i.string,description:i.oneOfType([i.string,i.element]),href:i.string,children:i.node,setOpen:i.func,onKeyDown:i.func,className:i.string,onClick:i.func,glyph:i.element,onExited:i.func,open:i.bool,active:i.bool,disabled:i.bool};export{Sn as FocusableMenuItem,U as Menu,En as MenuItem,H as MenuSeparator,pe as SubMenu};
//# sourceMappingURL=index.js.map
