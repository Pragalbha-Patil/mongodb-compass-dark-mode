import n,{createRef as r,useRef as e,useEffect as o,useMemo as t,useState as a,useCallback as i,useContext as l}from"react";import{useIdAllocator as d}from"@leafygreen-ui/hooks";import{css as c,cx as s}from"@leafygreen-ui/emotion";import{createDataProp as u,isComponentType as p}from"@leafygreen-ui/lib";import{uiColors as g}from"@leafygreen-ui/palette";import{Overline as f}from"@leafygreen-ui/typography";import{useUsingKeyboardContext as h}from"@leafygreen-ui/leafygreen-provider";import{once as v}from"lodash";import{jsx as m}from"@emotion/react";import b from"@leafygreen-ui/interaction-ring";import x from"@leafygreen-ui/box";function y(){return(y=Object.assign||function(n){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n}).apply(this,arguments)}function w(n,r){if(null==n)return{};var e,o,t=function(n,r){if(null==n)return{};var e,o,t={},a=Object.keys(n);for(o=0;o<a.length;o++)e=a[o],r.indexOf(e)>=0||(t[e]=n[e]);return t}(n,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(o=0;o<a.length;o++)e=a[o],r.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(n,e)&&(t[e]=n[e])}return t}function k(n,r){return r||(r=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(r)}}))}function C(n,r){return function(n){if(Array.isArray(n))return n}(n)||function(n,r){var e=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==e)return;var o,t,a=[],i=!0,l=!1;try{for(e=e.call(n);!(i=(o=e.next()).done)&&(a.push(o.value),!r||a.length!==r);i=!0);}catch(n){l=!0,t=n}finally{try{i||null==e.return||e.return()}finally{if(l)throw t}}return a}(n,r)||function(n,r){if(!n)return;if("string"==typeof n)return z(n,r);var e=Object.prototype.toString.call(n).slice(8,-1);"Object"===e&&n.constructor&&(e=n.constructor.name);if("Map"===e||"Set"===e)return Array.from(n);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return z(n,r)}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(n,r){(null==r||r>n.length)&&(r=n.length);for(var e=0,o=new Array(r);e<r;e++)o[e]=n[e];return o}var O=new Map;function _(n){if(!n)return console.warn("useDynamicRefs: Cannot set ref without key ");if(O.get(n))return O.get(n);var e=r();return O.set(n,e),e}function N(n){return n?O.get(n):console.warn("useDynamicRefs: Cannot get ref without key")}function j(){return[N,_]}var S,A,I,M,F,P,E,R,D,H,K,L,T,V=["children","name","size","darkMode","defaultValue","value","onChange","className","label","followFocus","aria-controls"],q=u("selection-indicator"),U=u("hover-indicator"),W=c(S||(S=k(["\n  display: flex;\n  gap: 8px;\n  align-items: center;\n  z-index: 0;\n"]))),X={light:c(A||(A=k(["\n    color: ",";\n  "])),g.gray.dark1),dark:c(I||(I=k(["\n    color: ",";\n  "])),g.gray.light1)},$={small:c(M||(M=k(["\n    --segment-gap: 1px;\n    --frame-padding: 0px;\n    --frame-border-radius: 4px;\n    --indicator-height: 100%;\n  "]))),default:c(F||(F=k(["\n    --segment-gap: 5px;\n    --frame-padding: 3px;\n    --frame-border-radius: 6px;\n    --indicator-height: calc(100% - 2 * var(--frame-padding));\n  "]))),large:c(P||(P=k(["\n    --segment-gap: 5px;\n    --frame-padding: 3px;\n    --frame-border-radius: 6px;\n    --indicator-height: calc(100% - 2 * var(--frame-padding));\n  "])))},B={light:c(E||(E=k(["\n    --background-color: ",";\n    --border-color: transparent;\n    --border-width: 0px;\n    --inner-shadow: 0px 1px 2px rgba(0, 0, 0, 0.3) inset;\n    --outer-shadow: 0px 1px 1px #e7eeec;\n    --hover-background-color: ",";\n    --indicator-background-color: ",";\n    --indicator-border-color: ",";\n  "])),g.gray.light3,g.white,g.gray.light2,"#869499"),dark:c(R||(R=k(["\n    --background-color: ",";\n    --border-color: ",";\n    --border-width: 1px;\n    --inner-shadow: unset;\n    --outer-shadow: unset;\n    --hover-background-color: ",";\n    --indicator-background-color: ",";\n    --indicator-border-color: ",";\n  "])),g.gray.dark3,g.gray.dark1,g.gray.dark2,g.gray.dark1,g.gray.base)},G=function(n){var r=n.mode,e=void 0===r?"light":r,o=n.size;return s($[void 0===o?"default":o],B[e],c(D||(D=k(["\n      position: relative;\n      display: grid;\n      grid-auto-flow: column;\n      grid-auto-columns: 1fr;\n      gap: var(--segment-gap);\n      align-items: center;\n      padding: var(--frame-padding);\n      border: var(--border-width) solid var(--border-color);\n      border-radius: var(--frame-border-radius);\n      background-color: var(--background-color);\n\n      &:focus {\n        outline: none;\n      }\n\n      // Frame shadow\n      &:after {\n        content: '';\n        position: absolute;\n        width: 100%;\n        height: 100%;\n        border-radius: inherit;\n        box-shadow: var(--inner-shadow), var(--outer-shadow);\n        z-index: 1;\n        pointer-events: none;\n      }\n    "]))))},J=c(H||(H=k(["\n  position: absolute;\n  grid-column: 1/2; // position the selector in the grid until it gets positioned\n  width: 100%;\n  height: var(--indicator-height);\n  z-index: 2;\n  box-shadow: 0px 1px 2px rgba(6, 22, 33, 0.3);\n  border-radius: 4px;\n  border-width: 1px;\n  border-style: solid;\n  background-color: var(--indicator-background-color);\n  border-color: var(--indicator-border-color);\n  transition: transform 150ms ease-in-out;\n"]))),Q=c(L||(L=k(["\n  position: absolute;\n  height: var(--indicator-height);\n  width: 100%;\n  grid-column: unset;\n  border-radius: 4px;\n  background-color: var(--hover-background-color);\n  z-index: 0;\n  opacity: 0;\n"]))),Y=n.createContext({size:"default",mode:"light",name:"",followFocus:!0}),Z=n.forwardRef((function(r,l){var u,g,v=r.children,b=r.name,x=r.size,z=void 0===x?"default":x,O=r.darkMode,_=void 0!==O&&O,N=r.defaultValue,S=r.value,A=r.onChange,I=r.className,M=r.label,F=r.followFocus,P=void 0===F||F,E=r["aria-controls"],R=w(r,V),D=h().usingKeyboard,H=C(j(),2),L=H[0],$=H[1],B=_?"dark":"light",Z=d({prefix:"segmented-control",id:null!=b?b:M}),nn=t((function(){return null!=S}),[S]),rn=C(a(null!=N?N:S),2),en=rn[0],on=rn[1],tn=C(a(null!=N?N:S),2),an=tn[0],ln=tn[1];u=function(){var r=n.Children.toArray(v)[0];!en&&p(r,"SegmentedControlOption")&&(on(r.props.value),ln(r.props.value))},g=e(!1),o((function(){g.current||(g.current=!0,u())}),[u]);var dn=i((function(n){en!==n&&(on(n),null==A||A(n))}),[en,A]),cn=t((function(){return n.Children.map(v,(function(r,e){var o,t;if(!p(r,"SegmentedControlOption"))return un("Error in Segmented Control: ".concat(r," is not a SegmentedControlOption")),r;E||r.props["aria-controls"]||pn("The property `aria-controls` is required on each Segmented Control option, or on the Segmented Control parent.");var a=null!==(o=r.props.id)&&void 0!==o?o:"".concat(Z,"-").concat(e),i=nn?r.props.value===S||!!r.props.checked:r.props.value===en,l=r.props.value===an;return n.cloneElement(r,{_id:a,_checked:i,_focused:l,_index:e,"aria-controls":null!==(t=r.props["aria-controls"])&&void 0!==t?t:E,_onClick:dn,_onHover:function(n){hn(n?e:null)},ref:$("".concat(Z,"-").concat(e))})}))}),[v,nn,S,en,an,Z,E,dn,$]),sn=t((function(){return cn?n.Children.map(cn,(function(n){var r;return null==n||null===(r=n.props)||void 0===r?void 0:r._id})).join(" "):""}),[cn]),gn=C(a(null),2),fn=gn[0],hn=gn[1],vn=t((function(){return n.Children.toArray(cn).findIndex((function(n){return nn?n.props.value===S:n.props.value===en}))}),[S,nn,cn,en]),mn=t((function(){return n.Children.toArray(cn).findIndex((function(n){return n.props.value===an}))}),[cn,an]),bn=function(r){var e=n.Children.toArray(cn).filter((function(n){return!n.props.disabled})),o=e.length,t=e[r=r>=o?r%o:r<0?o+r:r].props.value;ln(t)};o((function(){D||ln(en)}),[en,D]);var xn=C(a(""),2),yn=xn[0],wn=xn[1];o((function(){var n=L("".concat(Z,"-").concat(vn));if(n&&n.current){var r=n.current;if(r){var e=r.offsetWidth,o=r.offsetLeft;wn(function(n,r){return c(K||(K=k(["\n    grid-column: unset;\n    width: ","px;\n    transform: translateX(","px);\n  "])),n,r)}(e,o))}}}),[L,Z,vn,cn]);var kn=t((function(){return function(n){if(null!=n)return c(T||(T=k(["\n      opacity: 1;\n      grid-column: "," / ",";\n    "])),n+1,n+2)}(fn)}),[fn]);return m(Y.Provider,{value:{size:z,mode:B,name:Z,followFocus:P}},m("div",y({className:s(W,I)},R),M&&m(f,{className:X[B]},M),m("div",{role:"tablist","aria-label":Z,"aria-owns":sn,className:s(G({mode:B,size:z})),ref:l,onKeyDownCapture:function(n){switch(n.stopPropagation(),n.key){case"ArrowRight":bn(mn+1);break;case"ArrowLeft":bn(mn-1)}}},cn,m("div",y({},q.prop,{className:s(J,yn)})),m("div",y({},U.prop,{className:s(Q,kn)})))))}));Z.displayName="SegmentedControl";var nn,rn,en,on,tn,an,ln,dn,cn,sn,un=v(console.error),pn=v(console.warn),gn=["value","children","disabled","as","className","aria-controls","_id","_checked","_focused","_index","_onClick","_onHover"],fn=function(n){var r=n.mode,e=void 0===r?"light":r,o=n.size,t=void 0===o?"default":o;return s(function(n){switch(n){case"light":return c(nn||(nn=k(["\n        --base-text-color: ",";\n        --base-background-color: transparent;\n        --base-shadow-color: transparent;\n        --hover-text-color: ",";\n        --hover-background-color: ",";\n        --active-text-color: ",";\n        --disabled-text-color: ",";\n      "])),g.gray.dark1,g.gray.dark3,g.white,g.gray.dark3,g.gray.light1);case"dark":return c(rn||(rn=k(["\n        --base-text-color: ",";\n        --base-background-color: transparent;\n        --base-shadow-color: transparent;\n        --hover-text-color: ",";\n        --hover-background-color: ",";\n        --active-text-color: ",";\n        --disabled-text-color: ",";\n      "])),g.gray.light1,g.gray.light2,g.gray.dark2,g.white,g.gray.dark1)}}(e),function(n){switch(n){case"small":return c(en||(en=k(["\n        --font-size: 12px;\n        --line-height: 16px;\n        --padding-block: 3px;\n        --padding-inline: 12px;\n        --text-transform: uppercase;\n        --font-weight: bold;\n        --divider-height: 12px;\n      "])));case"large":return c(on||(on=k(["\n        --font-size: 16px;\n        --line-height: 28px;\n        --padding-block: 4px;\n        --padding-inline: 12px;\n        --text-transform: none;\n        --font-weight: normal;\n        --divider-height: 20px;\n      "])));case"default":return c(tn||(tn=k(["\n        --font-size: 14px;\n        --line-height: 24px;\n        --padding-block: 3px;\n        --padding-inline: 12px;\n        --text-transform: none;\n        --font-weight: normal;\n        --divider-height: 18px;\n      "])))}}(t),c(an||(an=k(["\n      position: relative;\n      display: flex;\n      width: 100%;\n      align-items: center;\n      justify-content: center;\n      z-index: 3;\n\n      --divider-background-color: ",";\n\n      &:first-child,\n      &[data-lg-checked='true'],\n      &[data-lg-checked='true'] + [data-lg-checked='false'] {\n        --divider-background-color: transparent;\n      }\n\n      /* \n      * Adds the divider line to unselected segments \n      */\n      &:before {\n        --divider-width: 1px;\n        content: '';\n        position: absolute;\n        height: var(--divider-height);\n        width: var(--divider-width);\n        left: calc(0px - (var(--segment-gap) + var(--divider-width)) / 2);\n        top: calc(\n          (\n              var(--line-height) + var(--padding-block) * 2 -\n                var(--divider-height)\n            ) / 2\n        );\n        transition: background-color 100ms ease-in-out;\n        background-color: var(--divider-background-color);\n      }\n    "])),g.gray.light1))},hn=c(ln||(ln=k(["\n  width: 100%;\n  z-index: 1;\n\n  /* disable the interaction ring hover state */\n  &:hover > [data-leafygreen-ui='interaction-ring'] {\n    box-shadow: none;\n  }\n"]))),vn=c(dn||(dn=k(["\n  width: 100%;\n  text-decoration: none;\n"]))),mn=c(cn||(cn=k(["\n  display: inline-flex;\n  position: relative;\n  width: 100%;\n  height: 100%;\n  align-items: center;\n  justify-content: center;\n  padding: var(--padding-block) var(--padding-inline);\n  background-color: var(--base-background-color);\n  border-radius: 4px;\n  text-align: center;\n  font-size: var(--font-size);\n  line-height: var(--line-height);\n  text-transform: var(--text-transform, none);\n  font-weight: var(--font-weight);\n  color: var(--base-text-color);\n  box-shadow: 0px 1px 2px var(--base-shadow-color);\n  cursor: pointer;\n  transition: all 100ms ease-in-out;\n  text-decoration: none;\n  outline: none;\n  border: none;\n\n  &:hover {\n    color: var(--hover-text-color);\n  }\n\n  &[aria-selected='true'] {\n    color: var(--active-text-color);\n  }\n\n  &:disabled {\n    color: var(--disabled-text-color);\n    cursor: not-allowed;\n  }\n"]))),bn=c(sn||(sn=k(["\n  display: inline-flex;\n  min-height: var(--line-height);\n  align-items: center;\n  gap: calc(var(--font-size) / 2);\n"]))),xn=n.forwardRef((function(n,r){var t=n.value,a=n.children,i=n.disabled,d=void 0!==i&&i,c=n.as,u=n.className,p=n["aria-controls"],g=n._id,f=n._checked,v=n._focused,k=(n._index,n._onClick),C=n._onHover,z=w(n,gn),O=l(Y),_=O.size,N=O.mode,j=O.followFocus,S=h().usingKeyboard,A=e(!1),I=e(null);return o((function(){var n,r;A.current&&(S&&v&&(null==I||null===(n=I.current)||void 0===n||n.focus(),j&&(null==I||null===(r=I.current)||void 0===r||r.click())));A.current=!0}),[v,j,S]),m("div",{className:s(fn({mode:N,size:_}),u),ref:r,"data-lg-checked":f},m(b,{darkMode:"dark"===N,className:hn},m(x,y({as:c,tabIndex:-1,className:vn},z),m("button",{role:"tab",id:g,tabIndex:v?0:-1,"aria-selected":f,"aria-controls":p,disabled:d,className:mn,ref:I,onClick:function(){null==k||k(t)},onMouseEnter:function(){null==C||C(!0)},onMouseLeave:function(){null==C||C(!1)}},m("span",{className:bn},a)))))}));xn.displayName="SegmentedControlOption";export{Z as SegmentedControl,xn as SegmentedControlOption};
//# sourceMappingURL=index.js.map
