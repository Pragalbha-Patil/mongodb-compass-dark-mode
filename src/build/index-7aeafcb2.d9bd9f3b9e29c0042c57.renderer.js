(global.webpackChunkMongoDBCompass=global.webpackChunkMongoDBCompass||[]).push([[449],{16324:(e,t,n)=>{const{BsonTranspilersAttributeError:r,BsonTranspilersArgumentError:s,BsonTranspilersInternalError:a,BsonTranspilersReferenceError:o,BsonTranspilersRuntimeError:i,BsonTranspilersTypeError:l,BsonTranspilersUnimplementedError:p}=n(76405),{removeQuotes:m}=n(74169);e.exports=e=>class extends e{constructor(){super(),this.idiomatic=!0,this.clearImports()}clearImports(){this.requiredImports={},[300,301,302,303,304,305,306].forEach((e=>this.requiredImports[e]=[]))}returnResult(e){const t=`visit${this.startRule.replace(/^\w/,(e=>e.toUpperCase()))}`;if(!this.startRule||!(t in this))throw new a("Unimplemented Visitor: the entry rule for the compiler must be set");return this[t](e)}start(e){return this.returnResult(e).trim()}getImports(e){const t=this.Imports.import.template?this.Imports.import.template:e=>Object.values(e).filter(((t,n)=>Object.values(e).indexOf(t)===n)).join("\n");return[300,301,302,303,304,305,306].forEach((e=>{e in this.requiredImports&&0===this.requiredImports[e].length&&(this.requiredImports[e]=!1)})),this.requiredImports.driver=!!e,t(Object.keys(this.requiredImports).filter((e=>this.requiredImports[e]&&this.Imports[e]&&this.Imports[e].template)).reduce(((e,t)=>(e[t]=this.Imports[t].template(this.requiredImports[t]),e)),{}))}deepCopyRequiredImports(){const e=Object.assign({},this.requiredImports);return[300,301,302,303,304,305,306].forEach((t=>{e[t]=Array.from(this.requiredImports[t])})),e}unimplemented(e){const t=this.renameNode(e.constructor.name);throw new p(`'${t}' not yet implemented`)}skipFakeNodesDown(e,t){return e}_getType(e){if(void 0!==e.type)return e;if(!e.children)return null;for(const t of e.children){const e=this._getType(t);if(e)return e}return null}findTypedNode(e){const t=this._getType(e);if(!t)throw new a("Type not set on any child nodes");return t}getParentOriginalType(e){return void 0!==e.originalType?e.originalType:e.parentCtx?this.getParentOriginalType(e.parentCtx):null}compareTypes(e,t,n,r){if(-1!==e.indexOf(t)||-1!==e.indexOf(t.id))return r;const s=[this.Types._integer,this.Types._decimal,this.Types._hex,this.Types._octal,this.Types._long];for(let r=0;r<e.length;r++)if(-1!==s.indexOf(t)&&-1!==s.indexOf(e[r])){if("_octal"===t.id)return this.leafHelper(e[r],{type:e[r],originalType:t.id,getText:()=>this.visit(n)});const s=this.skipFakeNodesDown(n);return s.originalType=t,s.type=e[r],this.leafHelper(e[r],s)}return-1!==e.indexOf(this.Types._numeric)&&(-1!==s.indexOf(t)||106===t.code||105===t.code||104===t.code)||s.some((t=>-1!==e.indexOf(t)))&&(106===t.code||105===t.code||104===t.code||t===this.Types._numeric)?r:null}castType(e,t){const n=this.visit(t);let r=this.findTypedNode(t).type,s=this.compareTypes(e,r,t,n);for(;null===s;){if(null===r.type)return null;r=r.type,s=this.compareTypes(e,r,t,n)}return s}checkArguments(e,t,n,r){const a=[];if(0===t.length){if(0===e.length||-1!==e[0].indexOf(null))return a;throw new s(`Argument count mismatch: '${n}' requires least one argument`)}if(t.length>e.length)throw new s(`Argument count mismatch: '${n}' expects ${e.length} args and got ${t.length}`);for(let o=0;o<e.length;o++){if(void 0===t[o]){if(-1!==e[o].indexOf(null))return a;throw new s(`Argument count mismatch: too few arguments passed to '${n}'`)}const i=this.checkNamedArgs(e[o],t[o],r),l=this.castType(...i);if(null===l){const r=`Argument type mismatch: '${n}' expects types ${e[o].map((e=>{const t=e&&e.id?e.id:e;return e?t:"[optional]"})).join(", ")} but got type ${this.findTypedNode(t[o]).type.id} for argument at index ${o}`;throw new s(r)}a.push(l)}return a}returnFunctionCallLhs(e,t){return t}returnFunctionCallLhsRhs(e,t,n,r){return`${e}${t=n.argsTemplate?n.argsTemplate(r,...t):`(${t.join(", ")})`}`}returnAttributeAccess(e,t,n){return n&&n.attr[t].template?n.attr[t].template(e,t):`${e}.${t}`}returnParenthesis(e){return`(${e})`}returnSet(e,t){return this.visitChildren(t)}generateFunctionCall(e){const t=this.getFunctionCallName(e),n=this.visit(t);let r=n,s=this.findTypedNode(t).type;if("string"==typeof s&&(s=this.Types[s]),`process${s.id}`in this)return this[`process${s.id}`](e);if(`emit${s.id}`in this)return this[`emit${s.id}`](e);if(e.type=s.type,!s.callable)throw new l(`${s.id} is not callable`);const a=s.args,o=this.checkArguments(a,this.getArguments(e),s.id,s.namedArgs);s.argsTemplate&&(r=this.visit(this.getIfIdentifier(t)));const i=this.returnFunctionCallLhsRhs(n,o,s,r),p=s.callable===this.SYMBOL_TYPE.CONSTRUCTOR;return this.Syntax.new.template?this.Syntax.new.template(i,!p,s.code):i}generateIdentifier(e){const t=this.visitChildren(e);if(e.type=this.Symbols[t],void 0===e.type)throw new o(`Symbol '${t}' is undefined`);return this.requiredImports[e.type.code]=!0,e.type.template?e.type.template():this.returnFunctionCallLhs(e.type.code,t)}generateAttributeAccess(e){if("emitAttributeAccess"in this)return this.emitAttributeAccess(e);const t=this.getAttributeLHS(e),n=this.visit(t),s=this.getAttributeRHS(e).getText();let a=this.findTypedNode(t).type;for("string"==typeof a&&(a=this.Types[a]);null!==a&&!a.attr.hasOwnProperty(s);){if(a.id in this.BsonTypes&&null!==this.BsonTypes[a.id].id)throw new r(`'${s}' not an attribute of ${a.id}`);a=a.type,"string"==typeof a&&(a=this.Types[a])}return null===a?(e.type=this.Types._undefined,this.returnAttributeAccess(n,s,a)):(e.type=a.attr[s],this.returnAttributeAccess(n,s,a))}generateCall(e,t,n,r,s,a,o){if(`emit${t.id}`in this)return this[`emit${t.id}`](e);const i=t.template?t.template():r,l=t.argsTemplate?t.argsTemplate(i,...n):s,p=o?"":i;return this.Syntax.new.template?this.Syntax.new.template(`${p}${l}`,a,t.code):`${p}${l}`}generateObjectLiteral(e){if(this.idiomatic&&"emitIdiomaticObjectLiteral"in this)return this.emitIdiomaticObjectLiteral(e);const t=this.Types._object;if(`emit${t.id}`in this)return this[`emit${t.id}`](e);e.type=t,this.requiredImports[10]=!0,e.indentDepth=this.findIndentDepth(e)+1;let n="";const r=this.getKeyValueList(e);return n=e.type.argsTemplate?e.type.argsTemplate(this.getKeyValueList(e).map((e=>[this.getKeyStr(e),this.visit(this.getValue(e))])),e.indentDepth):this.visit(r),e.indentDepth--,e.type.template?e.type.template(n,e.indentDepth):this.visitChildren(e)}generateArrayLiteral(e){const t=this.Types._array;if(`emit${t.id}`in this)return this[`emit${t.id}`](e);e.type=t,e.indentDepth=this.findIndentDepth(e)+1,this.requiredImports[9]=!0;let n="";const r=this.getList(e).map((e=>this.visit(e)));return n=e.type.argsTemplate?r.map(((t,n)=>{const s=!r[n+1];return e.type.argsTemplate(t,e.indentDepth,s)})).join(""):r.join(", "),e.type.template?e.type.template(n,e.indentDepth):this.visitChildren(e)}generateNumericClass(e){const t=this.getFunctionCallName(e),n=this.visit(t);let r=this.findTypedNode(t).type;"string"==typeof r&&(r=this.Types[r]),e.type=r.type,`emit${r.id}`in this&&this[`emit${r.id}`](e);const s=r.args;let a,o=this.checkArguments(s,this.getArguments(e),r.id,r.namedArgs);if(0===o.length)o=["0"],a=this.Types._integer;else{const t=this.getArgumentAt(e,0),n=this.findTypedNode(t);a=void 0!==n.originalType?n.originalType:n.type}return this.generateCall(e,r,[o[0],a.id],n,`(${o.join(", ")})`)}generateLiteral(e,t,n,r,s){if(`emit${t.id}`in this)return this[`emit${t.id}`](e);if(t.template){const e=t.template(...n);return this.Syntax.new.template?this.Syntax.new.template(e,s,t.code):e}return r}leafHelper(e,t){t.type=e,this.requiredImports[t.type.code]=!0;const n=this.getParentOriginalType(t),r=null===n?t.type:n;if(`process${t.type.id}`in this)return this[`process${t.type.id}`](t);if(`emit${t.type.id}`in this)return this[`emit${t.type.id}`](t);const s=t.getText();return this.generateLiteral(t,t.type,[s,r.id],s,!0)}findIndentDepth(e){for(;void 0===e.indentDepth;)if(null==(e=e.parentCtx))return-1;return e.indentDepth}generateBSONRegex(e,t,n){if(`emit${t.id}`in this)return this[`emit${t.id}`](e);e.type=t;const r=this.checkArguments(n.args,this.getArguments(e),t.id,n.namedArgs),s=this.Syntax.bsonRegexFlags?this.Syntax.bsonRegexFlags:{i:"i",m:"m",x:"x",s:"s",l:"l",u:"u"};let a=null;const o=r[0];if(2===r.length){a=r[1];for(let e=1;e<a.length-1;e++)if(!(a[e]in s))throw new i(`Invalid flag '${a[e]}' passed to Regexp`);a=a.replace(/[imxlsu]/g,(e=>s[e]))}return this.generateCall(e,n,[o,a],"Regex",`(${o}${a?", "+a:""})`)}generateBSONCode(e,t,n,r){if(`emit${t.id}`in this)return this[`emit${t.id}`](e);e.type=t;const a=this.getArguments(e);if(1!==a.length&&2!==a.length)throw new s("Argument count mismatch: Code requires one or two arguments");let o,i="";if(r){const t=this.getArgumentAt(e,0);if(i=this.visit(t),this.findTypedNode(t).type!==this.Types._string)throw new s("Argument type mismatch: Code requires first argument to be a string")}else i=m(this.getArgumentAt(e,0).getText());let l="";if(2===a.length){const t=this.idiomatic;this.idiomatic=!1;const r=this.checkNamedArgs([this.Types._object],this.getArgumentAt(e,1),n.namedArgs);if(o=this.castType(...r),null===o)throw new s("Code expects argument 'scope' to be object");this.idiomatic=t,l=`, ${o}`,this.requiredImports[113]=!0,this.requiredImports[10]=!0}return this.generateCall(e,n,[i,o],"Code",`(${i}${l})`)}generateObjectIdFromTime(e){const t=this.getFunctionCallName(e),n=this.visit(t);let r=this.findTypedNode(t).type;"string"==typeof r&&(r=this.Types[r]);const s=this.checkArguments(r.args,this.getArguments(e),r.id,r.namedArgs),a=200!==this.findTypedNode(this.getArgumentAt(e,0)).type.code;return this.generateCall(e,r,[s[0],a],n,`(${s.join(", ")})`,!0)}generateFuncDefExpression(){throw new p("Support for exporting functions to languages other than javascript is not yet available.")}visitChildren(e,t){const n={start:0,step:1,separator:"",ignore:[],children:e.children};Object.assign(n,t||{}),n.end="end"in n?n.end:n.children.length-1;let r="";for(let e=n.start;e<=n.end;e+=n.step)-1===n.ignore.indexOf(e)&&(r=`${r}${this.visit(n.children[e])}${e===n.end?"":n.separator}`);return r}visitEof(){return this.Syntax.eof.template?this.Syntax.eof.template():""}visitEos(){return this.Syntax.eos.template?this.Syntax.eos.template():"\n"}visitTerminal(e){return e.getText()}}},29191:(e,t,n)=>{const r=n(34764),{BsonTranspilersSyntaxError:s}=n(76405);class a extends r.error.ErrorListener{syntaxError(e,t,n,r,a,o){throw new s(a,{symbol:t,line:n,column:r,payload:o})}}e.exports=a},88824:e=>{e.exports=e=>class extends e{constructor(){super()}}},6894:(e,t,n)=>{const{doubleQuoteStringify:r,removeQuotes:s}=n(74169),{BsonTranspilersRuntimeError:a,BsonTranspilersUnimplementedError:o}=n(76405);e.exports=e=>class extends e{constructor(){super(),this.field_opts=["gt","lt","lte","gte","eq","ne","nin","in","not","exists","type","all","size","elemMatch","mod","regex","sum","avg","first","last","max","min","push","addToSet","stdDevSamp","stdDevPop","bitsAllSet","bitsAllClear","bitsAnySet","bitsAnyClear","geoWithin","geoIntersects","near","nearSphere"],this.opts=["match","skip","limit","out","sortByCount","count","or","nor","and"],this.builderImports=[["all","and","bitsAllClear","bitsAllSet","bitsAnyClear","bitsAnySet","elemMatch","eq","exists","expr","geoIntersects","geoWithin","geoWithinBox","geoWithinCenter","geoWithinCenterSphere","geoWithinPolygon","gt","gte","in","lt","lte","mod","ne","near","nearSphere","nin","nor","not","or","regex","size","text","type","where","options"],["addFields","bucket","bucketAuto","count","facet","graphLookup","group","limit","lookup","match","out","project","replaceRoot","sample","skip","sort","sortByCount","unwind"],["addToSet","avg","first","last","max","min","push","stdDevPop","stdDevSamp","sum"]].reduce(((e,t,n)=>(t.forEach((t=>{e[t]=n+300})),e)),{})}emitIdiomaticObjectLiteral(e){e.type=this.Types._object,e.indentDepth=this.findIndentDepth(e)+1;let t=!1,n="";const s=this.getKeyValueList(e);return s.length?(n=s.map((n=>{const s=this.getKeyStr(n),o=this.getValue(n);if(s.startsWith("$")){const n=s.substr(1);if(this.builderImports[n]&&this.requiredImports[this.builderImports[n]].push(n),"regex"===n&&(t=!0),`handle${n}`in this)return this[`handle${n}`](this.getObjectChild(o),n,e);if(-1!==this.field_opts.indexOf(n)){if(!this.isSubObject(e))throw new a(`$${n} cannot be top-level`);return this.handleFieldOp(o,n,e)}if(-1!==this.opts.indexOf(n))return`${s.substr(1)}(${this.visit(o)})`}const i=this.visit(o),l=this.getObjectChild(o);return this.isFilter(l)?i:(this.requiredImports[300].push("eq"),`eq(${r(s)}, ${i})`)})),n.length>1&&!t?(this.requiredImports[300].push("and"),`and(${n.join(", ")})`):n[0]):(this.requiredImports[10]=!0,"new Document()")}handleFieldOp(e,t,n){const s=this.getParentKeyStr(n);return`${t}(${r(s)}, ${this.visit(e)})`}isFilter(e){const t=this.getKeyValueList(e);for(let e=0;e<t.length;e++){const n=t[e],r=this.getKeyStr(n);if(-1!==this.field_opts.indexOf(r.substr(1)))return!0}return!1}handleSingleSubfield(e,t,n,r){const s=this.assertIsNonemptyObject(e,t);let o="";if(s.forEach((e=>{const s=this.getKeyStr(e);if(s!==n)throw new a(`Unrecognized option to $${t}: ${s}`);this.idiomatic=r,o=this.visit(this.getValue(e)),this.idiomatic=!0})),""===o)throw new a(`Missing option '${n}' in $${t}`);return`${t}(${o})`}handleOptionsObject(e,t,n,r,s){const o=this.assertIsNonemptyObject(e,t),i={};o.forEach((e=>{const s=this.getKeyStr(e);if(-1===n.indexOf(s)&&-1===r.indexOf(s))throw new a(`Unrecognized option to $${t}: ${s}`);i[s]=this.visit(this.getValue(e))})),n.map((e=>{if(!(e in i))throw new a(`Missing option '${e}' in $${t}`)}));let l="";return Object.keys(i).length>n.length&&(this.requiredImports[306].push(s[t]),l=`, new ${s[t]}()${Object.keys(i).filter((e=>-1!==r.indexOf(e))).map((e=>void 0!==s&&e in s?s[e](i[e]):`.${e}(${i[e]})`)).join("")}`),`${t}(${n.map((e=>i[e])).join(", ")}${l})`}handleMultipleSubfields(e,t,n,r,s){const o=this.assertIsNonemptyObject(e,t),i=[],l={};if(o.forEach((e=>{const t=this.getKeyStr(e);-1!==n.indexOf(t)?i.push(this.visit(this.getValue(e))):(this.idiomatic=s,l[t]=this.visit(this.getValue(e)),this.idiomatic=!0)})),i.length!==n.length)throw new a(`Required option missing from ${t}`);return`${t}(${i.concat(Object.keys(l).map((e=>r(e,l[e])))).join(", ")})`}handleproject(e){const t=this.assertIsNonemptyObject(e,"project"),n={};t.forEach((e=>{const t=this.getKeyStr(e),s=this.getValue(e).getText();if("true"===s.toLowerCase()||"1"===s)"_id"!==t&&(n.includes=n.includes?`${n.includes}, ${r(t)}`:`include(${r(t)}`,this.requiredImports[303].push("include"));else if("false"===s.toLowerCase()||"0"===s)"_id"!==t?(n.excludes=n.excludes?`${n.excludes}, ${r(t)}`:`exclude(${r(t)}`,this.requiredImports[303].push("exclude")):(n.excludeId="excludeId()",this.requiredImports[303].push("excludeId"));else{const s=this.visit(this.getValue(e));n.computed=n.computed?`${n.computed}, computed(${r(t)}, ${s})`:`computed(${r(t)}, ${s})`,this.requiredImports[303].push("computed")}})),n.includes&&(n.includes=`${n.includes})`),n.excludes&&(n.excludes=`${n.excludes})`);const s=Object.values(n);let a;return 1===s.length?a=s[0]:(a=`fields(${s.join(", ")})`,this.requiredImports[303].push("fields")),`project(${a})`}handlenot(e,t,n){const r=this.assertIsNonemptyObject(e,t),s=this.getValue(r[0]),a=this.getKeyStr(r[0]).substr(1);return this.requiredImports[300].push(a),`${t}(${this.handleFieldOp(s,a,n)})`}handlemod(e,t,n){const s=this.getList(e);if(2!==s.length)throw new a("$mod requires an array of 2-elements");const o=this.getParentKeyStr(n),i=s.map((e=>this.visit(e)));return`${t}(${r(o)}, ${i.join(", ")})`}handleregex(e,t,n){const s=this.getParentKeyStr(n),a={r:"",o:""};return this.getKeyValueList(n).forEach((e=>{const t=this.getKeyStr(e);"$regex"===t&&(a.r=this.visit(this.getValue(e))),"$options"===t&&(a.o=`, ${this.visit(this.getValue(e))}`)})),`${t}(${r(s)}, ${a.r}${a.o})`}handleoptions(){return""}handlewhere(e){let t;return t="getParent"in e?e.getParent().getText():e.getText(),`where(${r(t)})`}handlesort(e){const t=this.assertIsNonemptyObject(e,"sort"),n=[];let s;return t.forEach((e=>{const t=this.getKeyStr(e),s=this.getValue(e).getText();if("1"===s)n.push(`ascending(${r(t)})`),this.requiredImports[304].push("ascending");else if("-1"===s)n.push(`descending(${r(t)})`),this.requiredImports[304].push("descending");else{if(!s.match(new RegExp(/{(?:'|")?\$meta(?:'|")?:(?:'|")textScore*(?:'|")}/)))throw new a("$sort key ordering must be specified using a number or {$meta: 'textScore'}");n.push(`metaTextScore(${r(t)})`),this.requiredImports[304].push("metaTextScore")}})),n.length>1?(s=`orderBy(${n.join(", ")})`,this.requiredImports[304].push("orderBy")):s=n[0],`sort(${s})`}handlegeoWithin(e,t,n){this.requiredImports[300].splice(this.requiredImports[300].indexOf("geoWithin"),1);const s=this.assertIsNonemptyObject(e,t),o=r(this.getParentKeyStr(n)),i={};if(s.forEach((e=>{const t=this.getKeyStr(e);i[t]=this.getValue(e)})),1!==Object.keys(i).length)throw new a("$geoWithin takes an object with only 1 field");const l=Object.keys(i)[0];switch(l){case"$geometry":return this.requiredImports[300].push("geoWithin"),`geoWithin(${o}, ${this.handlegeometry(i[l])})`;case"$box":return this.requiredImports[300].push("geoWithinBox"),`geoWithinBox(${o}, ${this.combineCoordinates(i[l],2,"",!0,(e=>this.combineCoordinates(e,2,"",!0,(e=>this.visit(e)))))})`;case"$polygon":return this.requiredImports[300].push("geoWithinPolygon"),`geoWithinPolygon(${o}, ${this.visit(i[l])})`;case"$centerSphere":case"$center":{const e=this.assertIsNonemptyArray(i[l]);if(2!==e.length)throw new a(`${l} takes array of length 2`);const t=this.combineCoordinates(e[0],2,"",!0,(e=>this.visit(e))),n=`geoWithin${l[1].toUpperCase()}${l.substr(2)}`;return this.requiredImports[300].push(n),`${n}(${o}, ${t}, ${this.visit(e[1])})`}default:throw new a(`unrecognized option ${l} to $geoWithin`)}}handlenear(e,t,n){const s=this.assertIsNonemptyObject(e,t),o=r(this.getParentKeyStr(n)),i={};if(s.forEach((e=>{const t=this.getKeyStr(e);i[t]=this.getValue(e)})),["$geometry","$minDistance","$maxDistance"].map((e=>{if(!(e in i))throw new a(`Missing required field ${e} in $${t}`)})),3!==Object.keys(i).length)throw new a(`Too many fields to $${t}`);return`${t}(${o}, ${this.handlegeometry(i.$geometry)}, ${this.visit(i.$maxDistance)}, ${this.visit(i.$minDistance)})`}handlenearSphere(e,t,n){return this.handlenear(e,t,n)}generateposition(e){const t=this.assertIsNonemptyArray(e,"geometry");if(2!==t.length)throw new a("Position must be 2 coordinates");return this.requiredImports[305].push("Position"),`new Position(${this.visit(t[0])}, ${this.visit(t[1])})`}assertIsNonemptyArray(e,t){const n=this.getArray(e);if(!n||0===this.getList(n).length)throw new a(`$${t} requires a non-empty array`);return this.getList(n)}assertIsNonemptyObject(e,t){this.getObject(e)&&(e=this.getObject(e));const n=this.getKeyValueList(e);if(0===n.length)throw new a(`$${t} requires a non-empty document`);return n}combineCoordinates(e,t,n,r,s){r||(this.requiredImports[9]=!0);const o=this.assertIsNonemptyArray(e,"geometry");if(o.length<t)throw new a(`${n||"$geometry inner array"} must have at least ${t} elements (has ${o.length})`);let i=o.map((e=>s?s(e):this.generateposition(e))).join(", ");return i=r?i:`Arrays.asList(${i})`,n?(this.requiredImports[305].push(n),`new ${n}(${i})`):i}generatepoint(e){return`new Point(${this.generateposition(e)})`}generatemultipoint(e){return this.combineCoordinates(e,1,"MultiPoint")}generatelinestring(e){return this.combineCoordinates(e,2,"LineString")}generatemultilinestring(e){return this.combineCoordinates(e,1,"MultiLineString",!1,(e=>this.combineCoordinates(e,2)))}generatepolygon(e){return`new Polygon(${this.combineCoordinates(e,1,"PolygonCoordinates",!0,(e=>this.combineCoordinates(e,4)))})`}generatemultipolygon(e){return this.combineCoordinates(e,1,"MultiPolygon",!1,(e=>this.combineCoordinates(e,1,"PolygonCoordinates",!0,(e=>this.combineCoordinates(e,4)))))}generategeometrycollection(e){return`new GeometryCollection(Arrays.asList(${this.assertIsNonemptyArray(e,"geometry").map((e=>{const t=this.getObject(e);if(!t)throw new a("$GeometryCollection requires objects");return this.handlegeometry(t)})).join(", ")}))`}handlegeometry(e){const t=this.assertIsNonemptyObject(e,"geometry"),n={};if(t.forEach((e=>{const t=this.getKeyStr(e);if("type"===t)n.type=s(this.visit(this.getValue(e)));else{if("coordinates"!==t)throw"crs"===t?new o("Coordinate reference systems not currently supported"):new a(`Unrecognized option to $geometry: ${t}`);n.coordinates=this.getValue(e)}})),!n.type||!n.coordinates)throw new a("Missing option to $geometry");if(!this.getArray(n.coordinates)||0===this.getList(this.getArray(n.coordinates)).length)throw new a("Invalid coordinates option for $geometry");if(`generate${n.type.toLowerCase()}`in this)return this.requiredImports[305].push(n.type),this[`generate${n.type.toLowerCase()}`](n.coordinates);throw new a(`Unrecognized GeoJSON type "${n.type}"`)}handlesample(e){return this.handleSingleSubfield(e,"sample","size",!0)}handlereplaceRoot(e){return this.handleSingleSubfield(e,"replaceRoot","newRoot",!1)}handlegraphLookup(e){return this.handleOptionsObject(e,"graphLookup",["from","startWith","connectFromField","connectToField","as"],["maxDepth","depthField","restrictSearchWithMatch"],{graphLookup:"GraphLookupOptions"})}handlelookup(e){return this.handleOptionsObject(e,"lookup",["from","localField","foreignField","as"],[],{lookup:"LookupOptions"})}handlebucket(e){return this.handleOptionsObject(e,"bucket",["groupBy","boundaries"],["default","output"],{bucket:"BucketOptions",default:e=>`.defaultBucket(${e})`})}handlebucketAuto(e){return this.handleOptionsObject(e,"bucketAuto",["groupBy","buckets"],["granularity","output"],{bucketAuto:"BucketAutoOptions",granularity:e=>`.granularity(BucketGranularity.fromString(${e}))`})}handletext(e){return this.handleOptionsObject(e,"text",["$search"],["$language","$caseSensitive","$diacriticSensitive"],{text:"TextSearchOptions",$language:e=>`.language(${e})`,$caseSensitive:e=>`.caseSensitive(${e})`,$diacriticSensitive:e=>`.diacriticSensitive(${e})`})}handleunwind(e){const t=this.deepCopyRequiredImports(),n=this.visit(e.parentCtx);return this.requiredImports=t,"_string"===this.findTypedNode(e.parentCtx).type.id?`unwind(${n})`:this.handleOptionsObject(e,"unwind",["path"],["includeArrayIndex","preserveNullAndEmptyArrays"],{unwind:"UnwindOptions"})}handlegroup(e){return this.handleMultipleSubfields(e,"group",["_id"],((e,t)=>t),!0)}handlefacet(e){return this.requiredImports[306].push("Facet"),this.handleMultipleSubfields(e,"facet",[],((e,t)=>`new Facet(${r(e)}, ${t})`),!0)}handleaddFields(e){return this.requiredImports[306].push("Field"),this.handleMultipleSubfields(e,"addFields",[],((e,t)=>`new Field(${r(e)}, ${t})`),!1)}}},75077:e=>{e.exports=e=>class extends e{constructor(){super()}generateFuncDefExpression(e){const t=e.start.source[1].strdata,n=e.start.start,r=e.stop.stop;return t.slice(n,r+1)}}},88532:(e,t,n)=>{const r=n(24179),s=n(79906),{BsonTranspilersArgumentError:a,BsonTranspilersRuntimeError:o,BsonTranspilersUnimplementedError:i}=n(76405),{removeQuotes:l}=n(74169);e.exports=e=>class extends e{constructor(){super(),this.startRule="program",this.visitThisExpression=this.visitDeleteExpression=this.visitVoidExpression=this.visitTypeofExpression=this.visitInExpression=this.visitInstanceofExpression=this.visitAssignmentExpression=this.visitAssignmentOperatorExpression=this.visitMemberIndexExpression=this.visitTernaryExpression=this.visitFunctionDeclaration=this.visitVariableStatement=this.visitIfStatement=this.visitDoWhileStatement=this.visitWhileStatement=this.visitForStatement=this.visitForVarStatement=this.visitForInStatement=this.visitForVarInStatement=this.visitContinueStatement=this.visitBreakStatement=this.visitReturnStatement=this.visitWithStatement=this.visitLabelledStatement=this.visitSwitchStatement=this.visitThrowStatement=this.visitTryStatement=this.visitDebuggerStatement=this.unimplemented}visitProgram(e){if(e.getChildCount()<2)throw new o("Expression contains 0 statements. Input should be a single statement");return this.visitChildren(e)}visitSourceElements(e){if(1!==e.sourceElement().length)throw new o(`Expression contains ${e.sourceElement().length} statements. Input should be a single statement`);return this.visitChildren(e)}visitEmptyStatement(){throw new o("Expression contains 0 statements. Input should be a single statement")}visitFuncCallExpression(e){return this.generateFunctionCall(e)}visitIdentifierExpression(e){return this.generateIdentifier(e)}visitGetAttributeExpression(e){return this.generateAttributeAccess(e)}visitObjectLiteral(e){return this.generateObjectLiteral(e)}visitArrayLiteral(e){return this.generateArrayLiteral(e)}visitNullLiteral(e){return this.leafHelper(this.Types._null,e)}visitUndefinedLiteral(e){return this.leafHelper(this.Types._undefined,e)}visitBooleanLiteral(e){return this.leafHelper(this.Types._bool,e)}visitStringLiteral(e){return this.leafHelper(this.Types._string,e)}visitRegularExpressionLiteral(e){return this.leafHelper(this.Types._regex,e)}visitIntegerLiteral(e){return this.leafHelper(this.Types._long,e)}visitDecimalLiteral(e){return this.leafHelper(this.Types._decimal,e)}visitHexIntegerLiteral(e){return this.leafHelper(this.Types._hex,e)}visitOctalIntegerLiteral(e){return this.leafHelper(this.Types._octal,e)}visitElision(e){return e.type=this.Types._undefined,e.type.template?e.type.template():"null"}visitNewExpression(e){e.singleExpression().wasNew=!0;const t=this.visit(e.singleExpression());return e.type=this.findTypedNode(e.singleExpression()).type,t}visitRelationalExpression(e){e.type=this.Types._boolean;const t=this.visit(e.singleExpression()[0]),n=this.visit(e.singleExpression()[1]),r=this.visit(e.children[1]);return this.Syntax.equality?this.Syntax.equality.template(t,r,n):this.visitChildren(e)}visitEqualityExpression(e){e.type=this.Types._boolean;const t=this.visit(e.singleExpression()[0]),n=this.visit(e.singleExpression()[1]),r=this.visit(e.children[1]);return this.Syntax.equality?this.Syntax.equality.template(t,r,n):this.visitChildren(e)}visitLogicalAndExpression(e){return this.Syntax.and?this.Syntax.and.template(e.singleExpression().map((e=>this.visit(e)))):this.visitChildren(e)}visitLogicalOrExpression(e){return this.Syntax.or?this.Syntax.or.template(e.singleExpression().map((e=>this.visit(e)))):this.visitChildren(e)}visitNotExpression(e){return this.Syntax.not?this.Syntax.not.template(this.visit(e.singleExpression())):this.visitChildren(e)}visitBitAndExpression(e){if(this.Syntax.binary.template){const t=e.children.map((e=>this.visit(e)));return this.Syntax.binary.template(t)}return this.visitChildren(e)}visitBitXOrExpression(e){if(this.Syntax.binary.template){const t=e.children.map((e=>this.visit(e)));return this.Syntax.binary.template(t)}return this.visitChildren(e)}visitBitOrExpression(e){if(this.Syntax.binary.template){const t=e.children.map((e=>this.visit(e)));return this.Syntax.binary.template(t)}return this.visitChildren(e)}visitBitNotExpression(e){return this.Syntax.unary.template?this.Syntax.unary.template("~",this.visit(e.singleExpression())):this.visitChildren(e)}visitUnaryPlusExpression(e){return this.Syntax.unary.template?this.Syntax.unary.template("+",this.visit(e.singleExpression())):this.visitChildren(e)}visitUnaryMinusExpression(e){return this.Syntax.unary.template?this.Syntax.unary.template("-",this.visit(e.singleExpression())):this.visitChildren(e)}visitAdditiveExpression(e){if(this.Syntax.binary.template){const t=e.children.map((e=>this.visit(e)));return this.Syntax.binary.template(t)}return this.visitChildren(e)}visitMultiplicativeExpression(e){if(this.Syntax.binary.template){const t=e.children.map((e=>this.visit(e)));return this.Syntax.binary.template(t)}return this.visitChildren(e)}visitBitShiftExpression(e){if(this.Syntax.binary.template){const t=e.children.map((e=>this.visit(e)));return this.Syntax.binary.template(t)}return this.visitChildren(e)}visitParenthesizedExpression(e){if(this.Syntax.parens.template){const t=this.visit(e.expressionSequence());return this.Syntax.parens.template(t)}return this.visitChildren(e)}visitFuncDefExpression(e){return this.generateFuncDefExpression(e)}processNumber(e){return this.generateNumericClass(e)}processInt32(e){return this.generateNumericClass(e)}processDouble(e){return this.generateNumericClass(e)}processRegExp(e){return this.checkArguments(this.Symbols.RegExp.args,this.getArguments(e),"RegExp"),this.process_regex(e)}process_regex(e){let t,n;e.type=this.Types._regex;try{const r=this.executeJavascript(e.getText());t=r.source,n=r.flags}catch(e){throw new o(e.message)}let r=n.replace(/[imuyg]/g,(e=>this.Syntax.regexFlags[e]));return r=""===r?"":`${r.split("").sort().join("")}`,this.generateLiteral(e,e.type,[t,r],"RegExp")}processBSONRegExp(e){return this.generateBSONRegex(e,this.Types.BSONRegExpType,this.Symbols.BSONRegExp)}processCodeFromJS(e){return this.generateBSONCode(e,this.Types.Code,this.Symbols.Code,!1)}processObjectId(e){e.type=this.Types.ObjectId;const t=this.Symbols.ObjectId,n=this.getArguments(e);let r;this.checkArguments(t.args,n,"ObjectId");try{r=this.executeJavascript(`new ${e.getText()}`).toHexString()}catch(e){throw new o(e.message)}const s=0===n.length?[]:[r];return this.generateCall(e,t,s,"ObjectId",`(${r})`)}processLong(e){e.type=this.Types.Long;const t=this.Symbols.Long;let n;this.checkArguments(t.args,this.getArguments(e),"Long");try{n=this.executeJavascript(`new ${e.getText()}`).toString()}catch(e){throw new o(e.message)}return this.generateCall(e,t,[n,"_long"],"Long",`(${n})`)}processLongfromBits(e){return"emitLongfromBits"in this?this.emitLongfromBits(e):this.processLong(e)}processDecimal128(e){e.type=this.Types.Decimal128;const t=this.Symbols.Decimal128;let n;if(1!==this.getArguments(e).length)throw new a("Argument count mismatch: Decimal128 requires one argument");try{n=this.executeJavascript(`new ${e.getText()}`).toString()}catch(e){if("TypeError"===e.name||"ERR_INVALID_ARG_TYPE"===e.code)throw new a(e.message);throw new o(e.message)}return this.generateCall(e,t,[n],"Decimal128",`(${n})`)}processLongtoString(e){e.type=this.Types._string;const t=e.singleExpression().singleExpression();let n;this.checkArguments([[this.Types._numeric,null]],this.getArguments(e),"Long toString");try{n=this.executeJavascript(`new ${t.getText()}`).toString()}catch(e){throw new o(e.message)}return e.type.template?e.type.template(n):`'${n}'`}processDate(e){const t=!(e.getText().includes("ISODate")||e.wasNew),n=this.Symbols.Date;e.type=this.Types.Date,t&&(e.type=this.Types._string,this.requiredImports[201]=!0);const r=this.getArguments(e);let s=null;if(0!==r.length){try{this.checkArguments(this.Symbols.Date.args,r,"Date")}catch(e){throw new a("Invalid argument to Date: requires no args, one string/number, or up to 7 numbers")}let t=e.getText();t=t.startsWith("new ")?t:`new ${t}`;try{s=this.executeJavascript(t)}catch(e){throw new o(e.message)}}const i=`Date(${s?this.Types._string.template(s.toUTCString()):""})`;return this.generateCall(e,n,[s,t],"",i,t,!0)}processObjectIdCreateFromTime(e){return this.generateObjectIdFromTime(e)}processBinary(){throw new i("Binary type not supported")}renameNode(e){return e?e.replace("_stmt",""):"Expression"}checkNamedArgs(e,t){return[e,t]}executeJavascript(e){const t={RegExp,BSONRegExp:r.BSONRegExp,DBRef:r.DBRef,Decimal128:r.Decimal128,Double:r.Double,Int32:r.Int32,Long:r.Long,Int64:r.Long,Map:r.Map,MaxKey:r.MaxKey,MinKey:r.MinKey,ObjectID:r.ObjectID,ObjectId:r.ObjectID,BSONSymbol:r.BSONSymbol,Timestamp:r.Timestamp,Code:function(e,t){return new r.Code(e,t)},Date:function(e){const t=Array.from(arguments);return 1===t.length?new Date(e):new Date(Date.UTC(...t))},Buffer,__result:{}},n=new s(t),a=n.evaluate("__result = "+e);return n.destroy(),a}getArguments(e){return"arguments"in e&&"argumentList"in e.arguments()&&e.arguments().argumentList()?e.arguments().argumentList().singleExpression():[]}getArgumentAt(e,t){return this.getArguments(e)[t]}getFunctionCallName(e){return e.singleExpression()}getIfIdentifier(e){return"identifierName"in e?e.singleExpression():e}getAttributeLHS(e){return e.singleExpression()}getAttributeRHS(e){return e.identifierName()}getList(e){if(!("elementList"in e)||!e.elementList())return[];const t=e.elementList().elision(),n=e.elementList().singleExpression();return e.elementList().children.filter((e=>-1!==t.indexOf(e)||-1!==n.indexOf(e)))}getArray(e){return"arrayLiteral"in e&&e.arrayLiteral()}getObject(e){return"objectLiteral"in e&&e.objectLiteral()}getKeyValueList(e){return"propertyNameAndValueList"in e&&e.propertyNameAndValueList()?e.propertyNameAndValueList().propertyAssignment():[]}getKeyStr(e){return l(this.visit(e.propertyName()))}getValue(e){return e.singleExpression()}isSubObject(e){return"propertyName"in e.parentCtx.parentCtx}getParentKeyStr(e){return this.getKeyStr(e.parentCtx.parentCtx)}getObjectChild(e){return e.getChild(0)}}},89593:(e,t,n)=>{const r=n(24179),{BsonTranspilersReferenceError:s,BsonTranspilersTypeError:a,BsonTranspilersRuntimeError:o}=n(76405),{removeQuotes:i}=n(74169);e.exports=e=>class extends e{constructor(){super(),this.IGNORE="a unique thing"}start(e){return this.returnResult(e)}generateCall(e,t,n){if(`emit${t.id}`in this)return this[`emit${t.id}`](e,...n);const r=this.visit(this.getFunctionCallName(e));return this.returnFunctionCallLhsRhs(r,n,t)}visitChildren(e,t){const n={start:0,step:1,separator:"",ignore:[],children:e.children};Object.assign(n,t||{}),n.end="end"in n?n.end:n.children.length-1;const r=[];for(let e=n.start;e<=n.end;e+=n.step)-1===n.ignore.indexOf(e)&&r.push(this.visit(n.children[e]));const s=r.filter((e=>e!==this.IGNORE));return 1===s.length?s[0]:s}returnFunctionCallRhs(e){return e}returnFunctionCallLhs(e,t){const n={100:r.Code,101:r.ObjectId,102:r.Binary,103:r.DBRef,104:r.Double,105:r.Int32,106:r.Long,107:r.MinKey,108:r.MaxKey,109:r.BSONRegExp,110:r.Timestamp,111:r.BSONSymbol,112:r.Decimal128,200:Date,8:RegExp,2:Number,10:Object}[e];if(void 0===n)throw new s(`Cannot instantiate ${t} with code=${e}`);return n}returnFunctionCallLhsRhs(e,t,n){if(1===t.length&&void 0===t[0]&&(t=[]),n&&n.argsTemplate)return n.argsTemplate(e,...t);let r;try{r=n.callable===this.SYMBOL_TYPE.CONSTRUCTOR?new e(...t):e(...t)}catch(n){if(!n.message.includes("constructor"))throw n.message=`Error constructing type: ${n.message}`,n;try{r=e(...t)}catch(e){throw e.message=`Error constructing type: ${e.message}`,e}}return r}returnAttributeAccess(e,t,n){if(null===n)throw new a(`Error: ${t} is undefined and cannot be called`);let r=e[t];return n.attr[t].template&&(r=n.attr[t].template(e,t),"function"==typeof r)?function(){return r(...arguments)}:"function"==typeof r?function(){return e[t](...arguments)}:r}returnParenthesis(e){return e}returnSet(e){return e}returnComparison(e){return e.children.reduce(((e,t,n,r)=>{if(n===r.length-1)return e;if(n%2==0)return e;const s=this.visit(t);if("object"==typeof s&&2===s.length&&s.every((e=>-1!==["in","is","not"].indexOf(e))))return this.Syntax.equality.template(e,"!=",this.visit(r[n+1]));if(-1!==[">","<","<=",">=","<>","==","!=","is"].indexOf(s))return this.Syntax.equality.template(e,s,this.visit(r[n+1]));if("in"===s||"notin"===s)return this.Syntax.in.template(e,s,this.visit(r[n+1]));throw new o(`Unrecognized operation ${s}`)}),this.visit(e.children[0]))}emitLongfromBits(e){e.type=this.Types.Long;const t=this.Symbols.Long.attr.fromBits,n=this.checkArguments(t.args,this.getArguments(e),"Long.fromBits");return r.Long.fromBits(...n)}emitRegex(e,t,n){return new r.BSONRegExp(t,n)}emit_array(e){return e.type=this.Types._array,this.requiredImports[9]=!0,this.getList(e).map((e=>this.visit(e)))}emit_object(e){e.type=this.Types._object,this.requiredImports[10]=!0;const t={};return this.getKeyValueList(e).map((e=>{const n=this.getKeyStr(e);t[n]="$where"===n?i(this.getValue(e).getText()):this.visit(this.getValue(e))})),t}emitdatetime(e,t,n){return null===t&&n?Date():null===t?new Date:t}emitDate(e,t,n){return null===t&&n?Date():null===t?new Date:t}emitNumber(e,t){return Number(t)}emitint(e,t){return new r.Int32(t)}emitfloat(e,t){return new r.Double(t)}}},62745:e=>{e.exports=e=>class extends e{constructor(){super()}}},45387:(e,t,n)=>{const r=n(79906),{BsonTranspilersArgumentError:s,BsonTranspilersRuntimeError:a,BsonTranspilersInternalError:o,BsonTranspilersUnimplementedError:i}=n(76405),{removeQuotes:l}=n(74169);e.exports=e=>class extends e{constructor(){super(),this.startRule="file_input",this.visitDel_stmt=this.visitPass_stmt=this.visitFlow_stmt=this.visitImport_stmt=this.visitGlobal_stmt=this.visitNonlocal_stmt=this.visitAssert_stmt=this.visitIf_stmt=this.visitWhile_stmt=this.visitFor_stmt=this.visitTry_stmt=this.visitWith_stmt=this.visitFuncdef=this.visitClassdef=this.visitDecorated=this.visitAsync_stmt=this.visitComp_iter=this.visitStar_expr=this.visitInline_if=this.visitAssign_stmt=this.visitEllipsesAtom=this.visitAugassign=this.visitImag_literal=this.unimplemented}visitFile_input(e){if(1!==e.stmt().length)throw new a(`Expression contains ${e.stmt().length} statements. Input should be a single statement`);return this.visitChildren(e)}visitFunctionCall(e){return 1===e.getChildCount()?this.visitChildren(e):this.generateFunctionCall(e)}visitIdentifier(e){return this.generateIdentifier(e)}visitAttributeAccess(e){return 1===e.getChildCount()?this.visitChildren(e):this.generateAttributeAccess(e)}visitObject_literal(e){return this.testForComprehension(e.dictorsetmaker()),this.generateObjectLiteral(e)}visitArray_literal(e){return this.testForComprehension(e.testlist_comp()),this.generateArrayLiteral(e)}visitExpr(e){if(1===e.getChildCount())return this.visitChildren(e);if(this.Syntax.binary.template){const t=e.children.map((e=>this.visit(e)));return this.Syntax.binary.template(t)}return this.visitChildren(e)}visitXor_expr(e){if(1===e.getChildCount())return this.visitChildren(e);if(this.Syntax.binary.template){const t=e.children.map((e=>this.visit(e)));return this.Syntax.binary.template(t)}return this.visitChildren(e)}visitAnd_expr(e){if(1===e.getChildCount())return this.visitChildren(e);if(this.Syntax.binary.template){const t=e.children.map((e=>this.visit(e)));return this.Syntax.binary.template(t)}return this.visitChildren(e)}visitShift_expr(e){if(1===e.getChildCount())return this.visitChildren(e);const t=e.children.map((e=>this.visit(e)));return this.Syntax.binary.template?this.Syntax.binary.template(t):this.visitChildren(e)}visitArith_expr(e){if(1===e.getChildCount())return this.visitChildren(e);const t=e.children.map((e=>this.visit(e)));return this.Syntax.binary.template?this.Syntax.binary.template(t):this.visitChildren(e)}visitSet_literal(e){e.type=this.Types._array,e.indentDepth=this.findIndentDepth(e)+1,this.requiredImports[9]=!0;let t=[];const n=e.testlist_comp();let r;if(this.testForComprehension(n),n){if(1===n.children.length)return this.returnParenthesis(this.visit(n.children[0]));const s=n.children.map((e=>this.visit(e))).filter((e=>","!==e));e.type.argsTemplate?(t=s.map(((t,n)=>{const r=!s[n+1];return e.type.argsTemplate(t,e.indentDepth,r)})),r=""):(t=s,r=", ")}return e.type.template?e.type.template(t.join(r),e.indentDepth):this.returnSet(t,e)}visitStringAtom(e){e.type=this.Types._string,this.requiredImports[e.type.code]=!0;const t=void 0===e.originalType?e.type:e.originalType;let n=this.visitChildren(e);return n=n.replace(/^([rubf]?[rubf]["']|'''|"""|'|")/gi,""),n=n.replace(/(["]{3}|["]|[']{3}|['])$/,""),this.generateLiteral(e,e.type,[n,t.id],`'${n}'`,!0)}visitInteger_literal(e){return this.leafHelper(this.Types._long,e)}visitOct_literal(e){return this.leafHelper(this.Types._octal,e)}visitHex_literal(e){return this.leafHelper(this.Types._hex,e)}visitBin_literal(e){return this.leafHelper(this.Types._bin,e)}visitFloat_literal(e){return this.leafHelper(this.Types._decimal,e)}visitBoolean_literal(e){return this.leafHelper(this.Types._bool,e)}visitNone_literal(e){return this.leafHelper(this.Types._null,e)}visitExpr_stmt(e){if("assign_stmt"in e&&null!==e.assign_stmt()||"augassign"in e&&null!==e.augassign()||"annassign"in e&&null!==e.annassign())throw new i("Assignment not yet implemented");return this.visitChildren(e)}visitFactor(e){if(1===e.getChildCount())return this.visitChildren(e);const t=this.visit(e.children[0]),n=this.visit(e.factor());return e.type=this.findTypedNode(e.factor()).type,this.Syntax.unary.template?this.Syntax.unary.template(t,n):`${t}${n}`}visitTerm(e){if(1===e.getChildCount())return this.visitChildren(e);const t=e.children.map((e=>this.visit(e)));return this.Syntax.binary.template?this.Syntax.binary.template(t):this.visitChildren(e)}visitPower(e){if(1===e.getChildCount())return this.visitChildren(e);const t=this.visit(e.atom()),n=this.visit(e.factor());return this.Syntax.binary.template?this.Syntax.binary.template([t,"**",n]):`${t} ** ${n}`}visitAnd_test(e){if(1===e.getChildCount())return this.visitChildren(e);const t=e.not_test().map((e=>this.visit(e)));return this.Syntax.and?this.Syntax.and.template(t):t.join(" and ")}visitOr_test(e){if(1===e.getChildCount())return this.visitChildren(e);const t=e.and_test().map((e=>this.visit(e)));return this.Syntax.or?this.Syntax.or.template(t):t.join(" or ")}visitNot_test(e){if(1===e.getChildCount())return this.visitChildren(e);const t=this.visit(e.children[1]);return this.Syntax.not?this.Syntax.not.template(t):void 0}returnComparison(e){let t=!1;return e.children.reduce(((e,n,r,s)=>{if(t)return t=!1,e;if(r===s.length-1)return`${e}${this.visit(n)}`;if(r%2==0)return e;const a=this.visit(n);return"=="===a||"!="===a||"is"===a||"isnot"===a?(t=!0,this.Syntax.equality?`${e}${this.Syntax.equality.template(this.visit(s[r-1]),a,this.visit(s[r+1]))}`:`${e} === ${this.visit(s[r-1])} ${a} ${this.visit(s[r+1])}`):"in"===a||"notin"===a?(t=!0,this.Syntax.in?`${e}${this.Syntax.in.template(this.visit(s[r-1]),a,this.visit(s[r+1]))}`:`${e} ${this.visit(s[r-1])} ${a} ${this.visit(s[r+1])}`):`${e}${this.visit(s[r-1])} ${a} `}),"")}visitComparison(e){return 1===e.getChildCount()?this.visitChildren(e):this.returnComparison(e)}visitIndexAccess(e){if(1===e.getChildCount())return this.visitChildren(e);throw new i("Indexing not currently supported")}processint(e){return this.generateNumericClass(e)}processfloat(e){return this.generateNumericClass(e)}processInt64(e){return this.generateNumericClass(e)}processfrom_native(e){e.type=this.Types.BSONRegExp;const t=this.Symbols.Regex;if(1!==this.getArguments(e).length)throw new s("RegExp.from_native requires one argument");const n=this.skipFakeNodesDown(this.getArgumentAt(e,0)),r=this.findPatternAndFlags(n,{256:"",2:"i",128:"",4:"l",8:"m",16:"s",64:"x"},this.Syntax.bsonRegexFlags);return this.generateCall(e,t,r,"Regex",`(${r[0]}${r[1]?", "+r[1]:""})`)}processcompile(e){e.type=this.Types._regex;const t=this.findPatternAndFlags(e,{256:"",2:"i",128:"",4:"",8:"m",16:"",64:""},this.Syntax.regexFlags);return this.generateLiteral(e,e.type,t,"RegExp")}processRegex(e){return this.generateBSONRegex(e,this.Types.Regex,this.Symbols.Regex)}processCode(e){return this.generateBSONCode(e,this.Types.Code,this.Symbols.Code,!0)}processdatetime(e){e.type=this.Types.Date,e.wasNew=!0;const t=this.Symbols.datetime;let n=null;const r=this.getArguments(e);if(0!==r.length){if(r.length<3)throw new s(`Wrong number of arguments to datetime: needs at at least 3, got ${r.length}`);try{this.checkArguments(t.args,r,"datetime")}catch(e){throw new s(`Invalid argument to datetime: requires no args or up to 7 numbers. ${e.message}`)}const e=r.map((e=>{let t;try{t=parseInt(e.getText(),10)}catch(t){throw new a(`Unable to convert datetime argument to integer: ${e.getText()}`)}if(isNaN(t))throw new a(`Unable to convert datetime argument to integer: ${e.getText()}`);return t}));e[1]--,e[0]-=1900;try{n=new Date(Date.UTC(...e))}catch(e){throw new o(`Unable to construct date from arguments: ${e.message}`)}}const i=`Date(${n?this.Types._string.template(n.toUTCString()):""})`;return this.generateCall(e,t,[n,!1],"",i,!1,!0)}processObjectIdfrom_datetime(e){return this.generateObjectIdFromTime(e)}processBinary(){throw new i("Binary type not supported")}findPatternAndFlags(e,t,n){let s;const o=this.Symbols.re.attr.compile,i=this.getArguments(e),l=this.checkArguments(o.args,i,o.id,o.namedArgs),p=this.getArgumentAt(e,0).getText();let m=p.replace(/^([rubf]?[rubf]["']|'''|"""|'|")/gi,"");m=m.replace(/(["]{3}|["]|[']{3}|['])$/,"");const c=`new RegExp(${p.substr(-1)}${m}${p.substr(-1)})`;try{const e={RegExp},t=new r(e),n=t.evaluate("__result = "+c);t.destroy(),s=n.source}catch(e){throw new a(e.message)}if(1===l.length)return[s,n.u];let u,g=i[1];g=this.skipFakeNodesDown(this.checkNamedArgs([this.Types._integer],g,o.namedArgs)[1]),u="expr"in g.parentCtx?g.xor_expr().map((e=>this.visit(e))):[this.visit(g)];const d=u.map((e=>t[e])).filter((e=>void 0!==e));return-1===u.indexOf("256")&&d.push("u"),[s,d.map((e=>n[e])).filter((e=>void 0!==e)).sort().join("")]}testForComprehension(e){if(null!=e&&("comp_for"in e&&null!==e.comp_for()||"comp_if"in e&&null!==e.comp_if()))throw new i("Comprehensions not yet implemented")}getParentUntil(e,t,n){n=void 0===n?0:n;let r=e,s=!1;const a=[];for(;null!=r&&!s;){if(t in r&&r[t]()===a[a.length-1]){s=!0;break}a.push(r),r=r.parentCtx}return!!s&&a[a.length-1-n]}skipFakeNodesDown(e,t){let n=e;for(;void 0!==n.children&&1===n.children.length;)if(n=n.children[0],t&&t in n){n=n[t]();break}return void 0===n.children?n.parentCtx:n}skipFakeNodesUp(e,t){let n=e.parentCtx;for(;null!=n&&void 0!==n.children&&1===n.children.length;){if(t&&t in n){n=n[t]();break}n=n.parentCtx}return n}renameNode(e){return e?e.replace("_stmt",""):"Expression"}checkNamedArgs(e,t,n){const r=this.skipFakeNodesDown(t);if(n&&"test"in r&&r.test().length>1){const e=r.test()[0].getText(),t=r.test()[1],a=n[e];if(void 0===a)throw new s(`Unknown named argument '${e}'`);return[a.type,t]}return[e,t]}getArguments(e){const t=e.paren_trailer();return"arglist"in t&&null!==t.arglist()?t.arglist().argument():[]}getArgumentAt(e,t){return this.getArguments(e)[t]}getFunctionCallName(e){return e.atom()}getIfIdentifier(e){return"identifier"in e?e.identifier():e}getAttributeLHS(e){return e.atom()}getAttributeRHS(e){return e.dot_trailer().identifier()}getList(e){return"testlist_comp"in e&&e.testlist_comp()?e.testlist_comp().test():[]}getArray(e){return this.skipFakeNodesDown(e,"array_literal")}getObject(e){return this.skipFakeNodesDown(e,"object_literal")}getKeyValueList(e){if("dictorsetmaker"in e&&e.dictorsetmaker()){const t=e.dictorsetmaker().test();return t.map(((e,n)=>n%2==0?[e,t[n+1]]:null)).filter((e=>null!==e))}return[]}getKeyStr(e){return l(this.visit(e[0]))}getValue(e){return e[1]}isSubObject(e){return this.getParentUntil(e.parentCtx,"dictorsetmaker",1)}getParentKeyStr(e){const t=this.getParentUntil(e.parentCtx,"dictorsetmaker",1),n=t.parentCtx,r=n.test().indexOf(t),s=n.test()[r-1],a=this.visit(s);return l(a)}getObjectChild(e){return this.skipFakeNodesDown(e)}}},2854:e=>{e.exports=e=>class extends e{constructor(){super()}}},98001:e=>{e.exports=e=>class extends e{constructor(){super()}}},78816:(e,t,n)=>{const r=n(24179),s=n(79906),{BsonTranspilersRuntimeError:a,BsonTranspilersUnimplementedError:o}=n(76405);e.exports=e=>class extends e{constructor(){super()}processNumberLong(e){return this.generateNumericClass(e)}executeJavascript(e){const t={RegExp,DBRef:r.DBRef,Map:r.Map,MaxKey:r.MaxKey,MinKey:r.MinKey,ObjectId:r.ObjectID,BSONSymbol:r.BSONSymbol,Timestamp:r.Timestamp,Code:function(e,t){return new r.Code(e,t)},NumberDecimal:function(e){return void 0===e&&(e="0"),r.Decimal128.fromString(e.toString())},NumberInt:function(e){return parseInt(e,10)},NumberLong:function(e){return void 0===e&&(e=0),r.Long.fromNumber(e)},ISODate:function(e){return new Date(e)},Date:function(e){const t=Array.from(arguments);return 1===t.length?new Date(e):new Date(Date.UTC(...t))},Buffer,__result:{}},n=new s(t),a=n.evaluate("__result = "+e);return n.destroy(),a}processBinData(){throw new o("BinData type not supported")}processNumberDecimal(e){e.type=this.Types.NumberDecimal;const t=this.Symbols.NumberDecimal;let n;try{n=this.executeJavascript(`new ${e.getText()}`).toString()}catch(e){throw new a(e.message)}if("emitNumberDecimal"in this)return this.emitNumberDecimal(e,n);const r=t.template?t.template():this.returnFunctionCallLhs(t.code,"NumberDecimal"),s=this.returnFunctionCallLhsRhs(r,[n],t,r);return this.Syntax.new.template?this.Syntax.new.template(s,!1,e.type.code):this.returnFunctionCallLhsRhs(r,[n],t,r)}processISODate(e){return e.wasNew=!0,this.processDate(e)}processCode(e){e.type=this.Types.Code;const t=this.Symbols.Code,n=t.template?t.template():this.returnFunctionCallLhs(t.code,"Code");if(0===this.getArguments(e).length){const r=this.returnFunctionCallLhsRhs(n,[],t,n);return this.Syntax.new.template?this.Syntax.new.template(r,!1,e.type.code):r}return this.generateBSONCode(e,e.type,t,!0)}}},76405:(e,t,n)=>{const r=n(53666),s={};Object.keys(r).forEach((e=>{const t=`BsonTranspilers${e}Error`,n=`E_BSONTRANSPILERS_${e.toUpperCase()}`,a=r[e].message;s[t]=class extends Error{constructor(e,r){const o=e||a;super(),this.name=t,this.code=n,this.message=o,r&&"stack"in r?this.stack=r.stack:Error.captureStackTrace(this,s[t]),Object.assign(this,r||{})}}})),e.exports=s},74169:e=>{e.exports={doubleQuoteStringify:function(e){let t=e.toString();return("'"===t.charAt(0)&&"'"===t.charAt(t.length-1)||'"'===t.charAt(0)&&'"'===t.charAt(t.length-1))&&(t=t.substr(1,t.length-2)),`"${t.replace(/\\([\s\S])|(")/g,"\\$1$2")}"`},singleQuoteStringify:function(e){let t=e.toString();return("'"===t.charAt(0)&&"'"===t.charAt(t.length-1)||'"'===t.charAt(0)&&'"'===t.charAt(t.length-1))&&(t=e.substr(1,t.length-2)),`'${t.replace(/\\([\s\S])|(')/g,"\\$1$2")}'`},removeQuotes:function(e){let t=e.toString();return('"'===t.charAt(0)&&'"'===t.charAt(t.length-1)||"'"===t.charAt(0)&&"'"===t.charAt(t.length-1))&&(t=t.substr(1,t.length-2)),t}}},13688:(e,t,n)=>{const r=n(34764),s=n(42146),a=n(83495),o=n(72706),i=n(72065),l=n(53177).g,p=n(85185).f,m=n(29191),{BsonTranspilersInternalError:c,BsonTranspilersUnimplementedError:u}=n(76405),g=n(49431),d=n(16324),h=n(88532),T=n(78816),y=n(45387),f=n(6894),b=n(62745),S=n(88824),A=n(98001),E=n(75077),_=n(89593),x=n(2854),I=n(92650),L=n(79666),v=n(49093),C=n(87858),R=n(1817),O=n(26780),N=n(24083),j=n(97164),w=n(40681),D=n(48538),B=n(16106),M=n(55786),$=n(1841),k=n(59151),P=n(46149),F=n(5879),U=n(73127),q=n(44002),G=(e,t)=>{const n=new r.InputStream(e),o=new s.ECMAScriptLexer(n);o.strictMode=!1;const i=new r.CommonTokenStream(o),l=new a.ECMAScriptParser(i);l.buildParseTrees=!0;const p=new m;return l.removeErrorListeners(),l.addErrorListener(p),l[t]()},H=(e,t)=>{const n=new r.InputStream(e+"\n"),s=new o.Python3Lexer(n),a=new r.CommonTokenStream(s),l=new i.Python3Parser(a);l.buildParseTrees=!0;const p=new m;return l.removeErrorListeners(),l.addErrorListener(p),l[t]()},V=(e,t,n,r)=>{const s=new(n(t)),a=g.load(r);["BasicTypes","BsonTypes","NativeTypes","SymbolTypes","BsonTypes","BsonSymbols","NativeSymbols","SymbolTypes"].map((e=>{if(!(e in a))throw new c(`Invalid Symbol Table: missing ${e}`)})),Object.assign(s,{SYMBOL_TYPE:a.SymbolTypes,BsonTypes:a.BsonTypes,Symbols:Object.assign({},a.BsonSymbols,a.NativeSymbols),Types:Object.assign({},a.BasicTypes,a.BsonTypes,a.NativeTypes),Syntax:a.Syntax,Imports:a.Imports});const o=(t,n,r)=>{try{const a=e(t,s.startRule);return s.idiomatic=void 0===n?s.idiomatic:n,r||s.clearImports(),s.start(a)}catch(e){if(e.code&&e.code.includes("BSONTRANSPILERS"))throw e;throw new c(e.message,e)}finally{s.idiomatic=!0}};return{compileWithDriver:(e,t)=>{s.clearImports();const n={};if(Object.keys(e).map((r=>{n[r]="options"===r?e[r]:o(e[r],t,!0)})),!("options"in n&&"uri"in n.options&&"database"in n.options&&"collection"in n.options))throw new c("Missing required metadata to generate drivers syntax");if(!("aggregation"in n)&&!("filter"in n))throw new c("Need to pass 'aggregation' or 'filter' when compiling with driver syntax");if(!s.Syntax.driver)throw new u("Generating driver syntax not implemented for current language");return s.Syntax.driver(n)},compile:o,getImports:e=>s.getImports(e)}};e.exports={javascript:{java:V(G,h(d(l)),f,I),python:V(G,h(d(l)),b,L),csharp:V(G,h(d(l)),S,v),shell:V(G,h(d(l)),A,C),object:V(G,h(d(l)),_,R),ruby:V(G,h(d(l)),x,O)},shell:{java:V(G,T(h(d(l))),f,N),python:V(G,T(h(d(l))),b,j),csharp:V(G,T(h(d(l))),S,w),javascript:V(G,T(h(d(l))),E,D),object:V(G,T(h(d(l))),_,B),ruby:V(G,T(h(d(l))),x,M)},python:{java:V(H,y(d(p)),f,$),shell:V(H,y(d(p)),A,k),csharp:V(H,y(d(p)),S,P),javascript:V(H,y(d(p)),E,F),object:V(H,y(d(p)),_,U),ruby:V(H,y(d(p)),x,q)},getTree:{javascript:G,shell:G,python:H}}},42146:(e,t,n)=>{var r=n(34764),s=["","k\b\t\t","\t\t\t\t","\b\t\b\t\t\t\n\t\n\v\t\v","\f\t\f\r\t\r\t\t","\t\t\t\t","\t\t\t","\t\t\t\t","\t\t\t",'\t\t \t !\t!"\t"#',"\t#$\t$%\t%&\t&'\t'(\t()\t)","*\t*+\t+,\t,-\t-.\t./\t/0\t0","1\t12\t23\t34\t45\t56\t67\t7","8\t89\t9:\t:;\t;<\t<=\t=>\t>","?\t?@\t@A\tAB\tBC\tCD\tDE\tE","F\tFG\tGH\tHI\tIJ\tJK\tKL\tL","M\tMN\tNO\tOP\tPQ\tQR\tRS\tS","T\tTU\tUV\tVW\tWX\tXY\tYZ\tZ","[\t[\\\t\\]\t]^\t^_\t_`\t`a\ta","b\tbc\tcd\tde\tef\tfg\tgh\th","i\tij\tjk\tkl\tlm\tmn\tno\to","p\tpq\tqr\trs\tst\ttu\tuv\tv","w\twx\txy\tyz\tz{\t{|\t|}\t}","~\t~\t\t\t","\t\t\t\t","\t\t\t","\t\t","","","\b\b\t\t","\n\n\v\v\f\f\r","\r","","","","","","","   !!",'!""""####',"$$%%&&'''(","(()))***+","++,,,---..","..////0000","0111222333","4444455555","5555566666","66666\n6777\n","78888\n8\f88\v8","88\n8888\n8\r88","88\n88\n89999","\n9\r99::::\n:\r::",":::::\n:\r:::","\n:;;;;;;<<","<=========","==>>>>>>>?","????@@@@@A","AAABBBBCCC","CCCDDDDDDD","DEEEEEEEFF","FFFGGGGGGG","GGHHHHIIII","IIIJJJJJJK","KKKKKKKKLL","LLLLLLLMMM","MMNNNNNOOO","OOOOOPPPQQ","QQQQRRRRRR","RSSSTTTTUU","UUUUVVVVVW","WWWWWWWXXX","XXXYYYYYYZ","ZZZZZZ[[[[","[[[\\\\\\\\\\\\","\\\\\\\\\\\\]]]","]]^^^^^^^^","^________`","``````````","aaaaaaaaab","bbbbbbbbbb","ccccccccdd","dddddeee\ne\fe","e\vefff\nf\fff\vf","ffff\nf\fff\vff","f\nfgg\ng\rggg","ghhhhh\nh\fhh\v","hhhhhhiiii","i\ni\fii\viiijj","kkkkk\nkllll","l\nlmmmmm\nmn","nn\nnooooppp","pppqqrrsss","s\nstttuuuu\n","uvvwwxxyyy","y\ny\fyy\vyy\nyzz","z\nzzz\nz\rzz{{","{{{\n{||||||","|\n|}}\n}~~\n~","\n\n","","\n\f\v","\n\f\v","\n","\n","","\n\f\v","\n","\t\v","\r\b\t\n\v\f\r","!#%')+","-/13579;= ?!A","\"C#E$G%I&K'M(O)Q*S+U,W-Y.[/]0_1a2c3e4g5i6k7m8o9q:s;u<w=y>{?}@","ABCDEFGHIJ","KLMNOPQRST","UVWXYZ[\\]^","_`abcdefgh","ijk","","","","","","\f\fZZzzQQqq",'\v\v\r""\f\f$$^',"^\f\f))^^\v$$))^^ddhhppttvvxx","\f\f$$))2;^^ddhhppttvxzzwwzz","2;2;CHch293;GGgg","--//&&aaC\\c|","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","f","","","","","","","","","","","","","","","","","2;","","","\taa","\b\f\f",",,11]^\f\f11]^","\f\f^_","","\t\v","\r","","","","","!#","%'",")+","-/","135","79",";=","?A","CE","GIK","MO","QS","UW","Y[","]_a","ce","gi","km","oq","suw","y{","}","","","","","","","","","","","","","","","","","","","","","","","\t","\v\r","","","","","!","#%","')","+-/","13","57","9;","=?","ACE","GI","KM","OQ","SU","WY[","]_","ac","eg","ik","moq","su","wy","{}","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","1","1","\t","\b","]","\b_","\n*","\f+","}","","=",".","?","A","<","0","-","- ",'//"',"-$","/&","(","#*",",,","1.'","0@","@2",">>4","@","@@6",">8","@:",">?<","@","?>?","?@","#?","B?","??D","#?","?F","(H","`J","~L","((N","~~","P,","?R","1?T","'?","V-","?X","/?Z",">",">?\\","@@","?^","@@","@?`","(?","b`","?d","~?f","p","wnn","hw","pf","gh","kp","gfj","vt","wg","hc","nu","g","l","yz","n","y0","v","","","z","","0","v","","","z","","","p2","\tw","","","r:","2x","","",":","2\t","x","","","t","dt","gc","mv","fqx","k","puv","cp","eg","qhz","v","{rg","qh","|e","cu","g~","gnu","g","pg","y","xc","t","ec","ve","j","hkp","cn","n{","t","gv","wt","p","xqk","f","eq","pv","kp","wg","h","qt","uy","kv","ej","y","jk","ng","f","gdw","ii","gt","h","wp","ev","kqp","v","jk","u","yk","vj","f","gh","cwn","v","kh","v","jt","qy","f","gn","gvg","k","p","vt","{","en","cu","u","gp","wo","gz","vg","pf","u","uw","rg","t","eqp","uv","g","zr","qt","v","ko","rqt","v","\\k","or","ng","og","pvu","]","ng","v","^r","tk","xc","vg","_\br","wd","nk","e","`\tkp","vg","th","ce","g","a\nrc","em","ci","g","b\vr","tq","vge","vg","f","c\fu","vc","vke","d\r","{k","gn","f","{|","","","","$k","","","$",")","l","","",")","","\t","","","\bg","1,","\v","","","",",1","\bh","1","1","\n","","","\bi","\v","\n","^m","t","","\n^","mt","","","n2","op","","","q","r","","zw","w","ww","www","\t\b","\n\t","q","v\t\n","","^","u","\f","","","\t\v","\t\f","\t\r","2\t","v","","","","","\t\t","","v","","","}","\t^","p","","{","~","","","","","\t","","\t","\t","","\t","","","","","","","","|","","","\n","","","\n","","","","\n","^","","]","","","","_\n","","","+","","",""].join(""),a=(new r.atn.ATNDeserializer).deserialize(s),o=a.decisionToState.map((function(e,t){return new r.dfa.DFA(e,t)}));function i(e){return r.Lexer.call(this,e),this._interp=new r.atn.LexerATNSimulator(this,a,o,new r.PredictionContextCache),this}i.prototype=Object.create(r.Lexer.prototype),i.prototype.constructor=i,Object.defineProperty(i.prototype,"atn",{get:function(){return a}}),i.EOF=r.Token.EOF,i.RegularExpressionLiteral=1,i.LineTerminator=2,i.OpenBracket=3,i.CloseBracket=4,i.OpenParen=5,i.CloseParen=6,i.OpenBrace=7,i.CloseBrace=8,i.SemiColon=9,i.Comma=10,i.Assign=11,i.QuestionMark=12,i.Colon=13,i.Dot=14,i.PlusPlus=15,i.MinusMinus=16,i.Plus=17,i.Minus=18,i.BitNot=19,i.Not=20,i.Multiply=21,i.Divide=22,i.Modulus=23,i.RightShiftArithmetic=24,i.LeftShiftArithmetic=25,i.RightShiftLogical=26,i.LessThan=27,i.MoreThan=28,i.LessThanEquals=29,i.GreaterThanEquals=30,i.Equals=31,i.NotEquals=32,i.IdentityEquals=33,i.IdentityNotEquals=34,i.BitAnd=35,i.BitXOr=36,i.BitOr=37,i.And=38,i.Or=39,i.MultiplyAssign=40,i.DivideAssign=41,i.ModulusAssign=42,i.PlusAssign=43,i.MinusAssign=44,i.LeftShiftArithmeticAssign=45,i.RightShiftArithmeticAssign=46,i.RightShiftLogicalAssign=47,i.BitAndAssign=48,i.BitXorAssign=49,i.BitOrAssign=50,i.NullLiteral=51,i.UndefinedLiteral=52,i.BooleanLiteral=53,i.IntegerLiteral=54,i.DecimalLiteral=55,i.HexIntegerLiteral=56,i.OctalIntegerLiteral=57,i.Break=58,i.Do=59,i.Instanceof=60,i.Typeof=61,i.Case=62,i.Else=63,i.New=64,i.Var=65,i.Catch=66,i.Finally=67,i.Return=68,i.Void=69,i.Continue=70,i.For=71,i.Switch=72,i.While=73,i.Debugger=74,i.Function=75,i.This=76,i.With=77,i.Default=78,i.If=79,i.Throw=80,i.Delete=81,i.In=82,i.Try=83,i.Class=84,i.Enum=85,i.Extends=86,i.Super=87,i.Const=88,i.Export=89,i.Import=90,i.Implements=91,i.Let=92,i.Private=93,i.Public=94,i.Interface=95,i.Package=96,i.Protected=97,i.Static=98,i.Yield=99,i.Identifier=100,i.StringLiteral=101,i.WhiteSpaces=102,i.MultiLineComment=103,i.SingleLineComment=104,i.UnexpectedCharacter=105,i.prototype.channelNames=["DEFAULT_TOKEN_CHANNEL","HIDDEN"],i.prototype.modeNames=["DEFAULT_MODE"],i.prototype.literalNames=[null,null,null,"'['","']'","'('","')'","'{'","'}'","';'","','","'='","'?'","':'","'.'","'++'","'--'","'+'","'-'","'~'","'!'","'*'","'/'","'%'","'>>'","'<<'","'>>>'","'<'","'>'","'<='","'>='","'=='","'!='","'==='","'!=='","'&'","'^'","'|'","'&&'","'||'","'*='","'/='","'%='","'+='","'-='","'<<='","'>>='","'>>>='","'&='","'^='","'|='","'null'","'undefined'",null,null,null,null,null,"'break'","'do'","'instanceof'","'typeof'","'case'","'else'","'new'","'var'","'catch'","'finally'","'return'","'void'","'continue'","'for'","'switch'","'while'","'debugger'","'function'","'this'","'with'","'default'","'if'","'throw'","'delete'","'in'","'try'","'class'","'enum'","'extends'","'super'","'const'","'export'","'import'"],i.prototype.symbolicNames=[null,"RegularExpressionLiteral","LineTerminator","OpenBracket","CloseBracket","OpenParen","CloseParen","OpenBrace","CloseBrace","SemiColon","Comma","Assign","QuestionMark","Colon","Dot","PlusPlus","MinusMinus","Plus","Minus","BitNot","Not","Multiply","Divide","Modulus","RightShiftArithmetic","LeftShiftArithmetic","RightShiftLogical","LessThan","MoreThan","LessThanEquals","GreaterThanEquals","Equals","NotEquals","IdentityEquals","IdentityNotEquals","BitAnd","BitXOr","BitOr","And","Or","MultiplyAssign","DivideAssign","ModulusAssign","PlusAssign","MinusAssign","LeftShiftArithmeticAssign","RightShiftArithmeticAssign","RightShiftLogicalAssign","BitAndAssign","BitXorAssign","BitOrAssign","NullLiteral","UndefinedLiteral","BooleanLiteral","IntegerLiteral","DecimalLiteral","HexIntegerLiteral","OctalIntegerLiteral","Break","Do","Instanceof","Typeof","Case","Else","New","Var","Catch","Finally","Return","Void","Continue","For","Switch","While","Debugger","Function","This","With","Default","If","Throw","Delete","In","Try","Class","Enum","Extends","Super","Const","Export","Import","Implements","Let","Private","Public","Interface","Package","Protected","Static","Yield","Identifier","StringLiteral","WhiteSpaces","MultiLineComment","SingleLineComment","UnexpectedCharacter"],i.prototype.ruleNames=["RegularExpressionLiteral","LineTerminator","OpenBracket","CloseBracket","OpenParen","CloseParen","OpenBrace","CloseBrace","SemiColon","Comma","Assign","QuestionMark","Colon","Dot","PlusPlus","MinusMinus","Plus","Minus","BitNot","Not","Multiply","Divide","Modulus","RightShiftArithmetic","LeftShiftArithmetic","RightShiftLogical","LessThan","MoreThan","LessThanEquals","GreaterThanEquals","Equals","NotEquals","IdentityEquals","IdentityNotEquals","BitAnd","BitXOr","BitOr","And","Or","MultiplyAssign","DivideAssign","ModulusAssign","PlusAssign","MinusAssign","LeftShiftArithmeticAssign","RightShiftArithmeticAssign","RightShiftLogicalAssign","BitAndAssign","BitXorAssign","BitOrAssign","NullLiteral","UndefinedLiteral","BooleanLiteral","IntegerLiteral","DecimalLiteral","HexIntegerLiteral","OctalIntegerLiteral","Break","Do","Instanceof","Typeof","Case","Else","New","Var","Catch","Finally","Return","Void","Continue","For","Switch","While","Debugger","Function","This","With","Default","If","Throw","Delete","In","Try","Class","Enum","Extends","Super","Const","Export","Import","Implements","Let","Private","Public","Interface","Package","Protected","Static","Yield","Identifier","StringLiteral","WhiteSpaces","MultiLineComment","SingleLineComment","UnexpectedCharacter","DoubleStringCharacter","SingleStringCharacter","EscapeSequence","CharacterEscapeSequence","HexEscapeSequence","UnicodeEscapeSequence","SingleEscapeCharacter","NonEscapeCharacter","EscapeCharacter","LineContinuation","LineTerminatorSequence","DecimalDigit","HexDigit","OctalDigit","DecimalIntegerLiteral","ExponentPart","IdentifierStart","IdentifierPart","UnicodeLetter","UnicodeCombiningMark","UnicodeDigit","UnicodeConnectorPunctuation","ZWNJ","ZWJ","RegularExpressionBody","RegularExpressionFlags","RegularExpressionFirstChar","RegularExpressionChar","RegularExpressionNonTerminator","RegularExpressionBackslashSequence","RegularExpressionClass","RegularExpressionClassChar"],i.prototype.grammarFileName="ECMAScript.g4",i.prototype.strictMode=!0,i.prototype.lastToken=null,i.prototype.getStrictMode=function(){return this.strictMode},i.prototype.setStrictMode=function(e){this.strictMode=e},i.prototype.nextToken=function(){var e=r.Lexer.prototype.nextToken.call(this);return e.channel==r.Token.DEFAULT_CHANNEL&&(this.lastToken=e),e},i.prototype.isRegexPossible=function(){if(null==this.lastToken)return!0;switch(this.lastToken.type){case i.Identifier:case i.NullLiteral:case i.UndefinedLiteral:case i.BooleanLiteral:case i.This:case i.CloseBracket:case i.CloseParen:case i.OctalIntegerLiteral:case i.IntegerLiteral:case i.DecimalLiteral:case i.HexIntegerLiteral:case i.StringLiteral:case i.PlusPlus:case i.MinusMinus:return!1;default:return!0}},i.prototype.sempred=function(e,t,n){switch(t){case 0:return this.RegularExpressionLiteral_sempred(e,n);case 56:return this.OctalIntegerLiteral_sempred(e,n);case 90:return this.Implements_sempred(e,n);case 91:return this.Let_sempred(e,n);case 92:return this.Private_sempred(e,n);case 93:return this.Public_sempred(e,n);case 94:return this.Interface_sempred(e,n);case 95:return this.Package_sempred(e,n);case 96:return this.Protected_sempred(e,n);case 97:return this.Static_sempred(e,n);case 98:return this.Yield_sempred(e,n);default:throw"No registered predicate for:"+t}},i.prototype.RegularExpressionLiteral_sempred=function(e,t){if(0===t)return this.isRegexPossible();throw"No predicate with index:"+t},i.prototype.OctalIntegerLiteral_sempred=function(e,t){switch(t){case 1:case 2:return!this.strictMode;default:throw"No predicate with index:"+t}},i.prototype.Implements_sempred=function(e,t){if(3===t)return this.strictMode;throw"No predicate with index:"+t},i.prototype.Let_sempred=function(e,t){if(4===t)return this.strictMode;throw"No predicate with index:"+t},i.prototype.Private_sempred=function(e,t){if(5===t)return this.strictMode;throw"No predicate with index:"+t},i.prototype.Public_sempred=function(e,t){if(6===t)return this.strictMode;throw"No predicate with index:"+t},i.prototype.Interface_sempred=function(e,t){if(7===t)return this.strictMode;throw"No predicate with index:"+t},i.prototype.Package_sempred=function(e,t){if(8===t)return this.strictMode;throw"No predicate with index:"+t},i.prototype.Protected_sempred=function(e,t){if(9===t)return this.strictMode;throw"No predicate with index:"+t},i.prototype.Static_sempred=function(e,t){if(10===t)return this.strictMode;throw"No predicate with index:"+t},i.prototype.Yield_sempred=function(e,t){if(11===t)return this.strictMode;throw"No predicate with index:"+t},t.ECMAScriptLexer=i},80480:(e,t,n)=>{var r=n(34764);function s(){return r.tree.ParseTreeListener.call(this),this}s.prototype=Object.create(r.tree.ParseTreeListener.prototype),s.prototype.constructor=s,s.prototype.enterProgram=function(e){},s.prototype.exitProgram=function(e){},s.prototype.enterSourceElements=function(e){},s.prototype.exitSourceElements=function(e){},s.prototype.enterSourceElement=function(e){},s.prototype.exitSourceElement=function(e){},s.prototype.enterStatement=function(e){},s.prototype.exitStatement=function(e){},s.prototype.enterStatementOrBlock=function(e){},s.prototype.exitStatementOrBlock=function(e){},s.prototype.enterBlock=function(e){},s.prototype.exitBlock=function(e){},s.prototype.enterStatementList=function(e){},s.prototype.exitStatementList=function(e){},s.prototype.enterVariableStatement=function(e){},s.prototype.exitVariableStatement=function(e){},s.prototype.enterVariableDeclarationList=function(e){},s.prototype.exitVariableDeclarationList=function(e){},s.prototype.enterVariableDeclaration=function(e){},s.prototype.exitVariableDeclaration=function(e){},s.prototype.enterInitialiser=function(e){},s.prototype.exitInitialiser=function(e){},s.prototype.enterEmptyStatement=function(e){},s.prototype.exitEmptyStatement=function(e){},s.prototype.enterExpressionStatement=function(e){},s.prototype.exitExpressionStatement=function(e){},s.prototype.enterIfStatement=function(e){},s.prototype.exitIfStatement=function(e){},s.prototype.enterDoWhileStatement=function(e){},s.prototype.exitDoWhileStatement=function(e){},s.prototype.enterWhileStatement=function(e){},s.prototype.exitWhileStatement=function(e){},s.prototype.enterForStatement=function(e){},s.prototype.exitForStatement=function(e){},s.prototype.enterForVarStatement=function(e){},s.prototype.exitForVarStatement=function(e){},s.prototype.enterForInStatement=function(e){},s.prototype.exitForInStatement=function(e){},s.prototype.enterForVarInStatement=function(e){},s.prototype.exitForVarInStatement=function(e){},s.prototype.enterContinueStatement=function(e){},s.prototype.exitContinueStatement=function(e){},s.prototype.enterBreakStatement=function(e){},s.prototype.exitBreakStatement=function(e){},s.prototype.enterReturnStatement=function(e){},s.prototype.exitReturnStatement=function(e){},s.prototype.enterWithStatement=function(e){},s.prototype.exitWithStatement=function(e){},s.prototype.enterSwitchStatement=function(e){},s.prototype.exitSwitchStatement=function(e){},s.prototype.enterCaseBlock=function(e){},s.prototype.exitCaseBlock=function(e){},s.prototype.enterCaseClauses=function(e){},s.prototype.exitCaseClauses=function(e){},s.prototype.enterCaseClause=function(e){},s.prototype.exitCaseClause=function(e){},s.prototype.enterDefaultClause=function(e){},s.prototype.exitDefaultClause=function(e){},s.prototype.enterLabelledStatement=function(e){},s.prototype.exitLabelledStatement=function(e){},s.prototype.enterThrowStatement=function(e){},s.prototype.exitThrowStatement=function(e){},s.prototype.enterTryStatement=function(e){},s.prototype.exitTryStatement=function(e){},s.prototype.enterCatchProduction=function(e){},s.prototype.exitCatchProduction=function(e){},s.prototype.enterFinallyProduction=function(e){},s.prototype.exitFinallyProduction=function(e){},s.prototype.enterDebuggerStatement=function(e){},s.prototype.exitDebuggerStatement=function(e){},s.prototype.enterFunctionDeclaration=function(e){},s.prototype.exitFunctionDeclaration=function(e){},s.prototype.enterFormalParameterList=function(e){},s.prototype.exitFormalParameterList=function(e){},s.prototype.enterFunctionBody=function(e){},s.prototype.exitFunctionBody=function(e){},s.prototype.enterArrayLiteral=function(e){},s.prototype.exitArrayLiteral=function(e){},s.prototype.enterElementList=function(e){},s.prototype.exitElementList=function(e){},s.prototype.enterElision=function(e){},s.prototype.exitElision=function(e){},s.prototype.enterObjectLiteral=function(e){},s.prototype.exitObjectLiteral=function(e){},s.prototype.enterPropertyNameAndValueList=function(e){},s.prototype.exitPropertyNameAndValueList=function(e){},s.prototype.enterPropertyAssignmentExpression=function(e){},s.prototype.exitPropertyAssignmentExpression=function(e){},s.prototype.enterPropertyGetter=function(e){},s.prototype.exitPropertyGetter=function(e){},s.prototype.enterPropertySetter=function(e){},s.prototype.exitPropertySetter=function(e){},s.prototype.enterPropertyName=function(e){},s.prototype.exitPropertyName=function(e){},s.prototype.enterPropertySetParameterList=function(e){},s.prototype.exitPropertySetParameterList=function(e){},s.prototype.enterArguments=function(e){},s.prototype.exitArguments=function(e){},s.prototype.enterArgumentList=function(e){},s.prototype.exitArgumentList=function(e){},s.prototype.enterExpressionSequence=function(e){},s.prototype.exitExpressionSequence=function(e){},s.prototype.enterTernaryExpression=function(e){},s.prototype.exitTernaryExpression=function(e){},s.prototype.enterLogicalAndExpression=function(e){},s.prototype.exitLogicalAndExpression=function(e){},s.prototype.enterFuncDefExpression=function(e){},s.prototype.exitFuncDefExpression=function(e){},s.prototype.enterPreIncrementExpression=function(e){},s.prototype.exitPreIncrementExpression=function(e){},s.prototype.enterObjectLiteralExpression=function(e){},s.prototype.exitObjectLiteralExpression=function(e){},s.prototype.enterInExpression=function(e){},s.prototype.exitInExpression=function(e){},s.prototype.enterLogicalOrExpression=function(e){},s.prototype.exitLogicalOrExpression=function(e){},s.prototype.enterNotExpression=function(e){},s.prototype.exitNotExpression=function(e){},s.prototype.enterPreDecreaseExpression=function(e){},s.prototype.exitPreDecreaseExpression=function(e){},s.prototype.enterThisExpression=function(e){},s.prototype.exitThisExpression=function(e){},s.prototype.enterUnaryMinusExpression=function(e){},s.prototype.exitUnaryMinusExpression=function(e){},s.prototype.enterPostDecreaseExpression=function(e){},s.prototype.exitPostDecreaseExpression=function(e){},s.prototype.enterAssignmentExpression=function(e){},s.prototype.exitAssignmentExpression=function(e){},s.prototype.enterTypeofExpression=function(e){},s.prototype.exitTypeofExpression=function(e){},s.prototype.enterInstanceofExpression=function(e){},s.prototype.exitInstanceofExpression=function(e){},s.prototype.enterUnaryPlusExpression=function(e){},s.prototype.exitUnaryPlusExpression=function(e){},s.prototype.enterDeleteExpression=function(e){},s.prototype.exitDeleteExpression=function(e){},s.prototype.enterEqualityExpression=function(e){},s.prototype.exitEqualityExpression=function(e){},s.prototype.enterBitXOrExpression=function(e){},s.prototype.exitBitXOrExpression=function(e){},s.prototype.enterMultiplicativeExpression=function(e){},s.prototype.exitMultiplicativeExpression=function(e){},s.prototype.enterBitShiftExpression=function(e){},s.prototype.exitBitShiftExpression=function(e){},s.prototype.enterParenthesizedExpression=function(e){},s.prototype.exitParenthesizedExpression=function(e){},s.prototype.enterGetAttributeExpression=function(e){},s.prototype.exitGetAttributeExpression=function(e){},s.prototype.enterAdditiveExpression=function(e){},s.prototype.exitAdditiveExpression=function(e){},s.prototype.enterRelationalExpression=function(e){},s.prototype.exitRelationalExpression=function(e){},s.prototype.enterPostIncrementExpression=function(e){},s.prototype.exitPostIncrementExpression=function(e){},s.prototype.enterFuncCallExpression=function(e){},s.prototype.exitFuncCallExpression=function(e){},s.prototype.enterBitNotExpression=function(e){},s.prototype.exitBitNotExpression=function(e){},s.prototype.enterNewExpression=function(e){},s.prototype.exitNewExpression=function(e){},s.prototype.enterLiteralExpression=function(e){},s.prototype.exitLiteralExpression=function(e){},s.prototype.enterArrayLiteralExpression=function(e){},s.prototype.exitArrayLiteralExpression=function(e){},s.prototype.enterMemberIndexExpression=function(e){},s.prototype.exitMemberIndexExpression=function(e){},s.prototype.enterIdentifierExpression=function(e){},s.prototype.exitIdentifierExpression=function(e){},s.prototype.enterBitAndExpression=function(e){},s.prototype.exitBitAndExpression=function(e){},s.prototype.enterBitOrExpression=function(e){},s.prototype.exitBitOrExpression=function(e){},s.prototype.enterAssignmentOperatorExpression=function(e){},s.prototype.exitAssignmentOperatorExpression=function(e){},s.prototype.enterVoidExpression=function(e){},s.prototype.exitVoidExpression=function(e){},s.prototype.enterAssignmentOperator=function(e){},s.prototype.exitAssignmentOperator=function(e){},s.prototype.enterNullLiteral=function(e){},s.prototype.exitNullLiteral=function(e){},s.prototype.enterUndefinedLiteral=function(e){},s.prototype.exitUndefinedLiteral=function(e){},s.prototype.enterBooleanLiteral=function(e){},s.prototype.exitBooleanLiteral=function(e){},s.prototype.enterStringLiteral=function(e){},s.prototype.exitStringLiteral=function(e){},s.prototype.enterRegularExpressionLiteral=function(e){},s.prototype.exitRegularExpressionLiteral=function(e){},s.prototype.enterNumericLiteralWrapper=function(e){},s.prototype.exitNumericLiteralWrapper=function(e){},s.prototype.enterIntegerLiteral=function(e){},s.prototype.exitIntegerLiteral=function(e){},s.prototype.enterDecimalLiteral=function(e){},s.prototype.exitDecimalLiteral=function(e){},s.prototype.enterHexIntegerLiteral=function(e){},s.prototype.exitHexIntegerLiteral=function(e){},s.prototype.enterOctalIntegerLiteral=function(e){},s.prototype.exitOctalIntegerLiteral=function(e){},s.prototype.enterIdentifierName=function(e){},s.prototype.exitIdentifierName=function(e){},s.prototype.enterReservedWord=function(e){},s.prototype.exitReservedWord=function(e){},s.prototype.enterKeyword=function(e){},s.prototype.exitKeyword=function(e){},s.prototype.enterFutureReservedWord=function(e){},s.prototype.exitFutureReservedWord=function(e){},s.prototype.enterGetter=function(e){},s.prototype.exitGetter=function(e){},s.prototype.enterSetter=function(e){},s.prototype.exitSetter=function(e){},s.prototype.enterEos=function(e){},s.prototype.exitEos=function(e){},s.prototype.enterEof=function(e){},s.prototype.exitEof=function(e){},t.p=s},83495:(e,t,n)=>{var r=n(34764),s=n(80480).p,a=n(53177).g,o=["","k\t\t\t","\t\t\t","\b\t\b\t\t\t\n\t\n\v\t\v\f\t\f","\r\t\r\t\t\t","\t\t\t\t","\t\t\t","\t\t\t\t","\t\t\t",'\t \t !\t!"\t"#\t#$\t$',"%\t%&\t&'\t'(\t()\t)*\t*+\t+",",\t,-\t-.\t./\t/0\t01\t12\t2","3\t34\t45\t56\t67\t78\t89\t9","t\nw\n","~\n","\r","\n","","\n","\n","\n\f\v","\b\b\n\b\r\b\b","\t\t\t\t\n\n\n\n\n\n","\f\n\n\v\n\v\v\v","\n\v\f\f\f\r\r","","\n","","","\n","\n","\n","\n","\n","","","","\n","\n","\n","\n","","","\n","\n","\n","\n\r","\n","\n","","","","\n","","   ","  \n      !!",'!!\n!\f!!\v!""\n"',"######\n####","\n#$$\n$\f$$\v$$$","\n$\f$$\v$$$$$\n$\f$","$\v$$$\n$$\n$\f$$","\v$$\n$%%&&&&","&&\n&&&&\n&''","''\n'\f''\v'(((","(((((((((","((((((((\n()",")))\n)**+++\n","+++\n+++,,,,","\n,\f,,\v,----\n-\f-","-\v-....\n...",".\n.........",".\n.........","..........","..........","\n..........","..........","..........","..........","..........","..........",".......\n.\f..","\v.//000000","0\n011111\n12","22\n23333\n34","4556666777","788888\n8999","Z:\b\n\f",' "$&(*,.02468:<>@BDFHJLNPRTVXZ\\^`bdfhjlnp',"\v"," !$*455","77<UVes","}","\b\n","\f","","","","",' "$',"&(","*,",".0","24","68:","<>","@B","DF","HJ","LNP","RT","VX","Z\\","^`","bdf","hj","ln","prt","srsttv","uwvuvw","wxxyp9y","z{{|n8|~","}z~","}","\b","> ","","\t\r",""," ",'"$',"&2","(46","<","","","","","","","\t","\f\b","","\v\t","\b","","","\n","\r\n","","","C","\nn8","\v","\f\v","","","","f\f","","\rZ.","\v","X-","Q","X-","\b\n","A\n","","=\n","K","X-\b","n8","K","X-\b\n","I","X-","","\v","X-","","\vX-","","\b","\nI","C","\n\v","X-","\v","X-","","\b\n","I","Z.","TX-","\b\n","I","C","\vTX-","\b\n","","","","","H","f","","n8!","<","f","","n8#F","X-","","n8%","O","X-\b","\n'","J","X-\b","*)","\t,","","0,","","","","\n+",".","","-","@X-","\b","/","P","\b","1","f","\b3","R","X-n8","5U","\f8","U","\f:","U","\f8:","","","7D","f","\b\f","9E","\f;","Ln8=","Mf","@!","","\b",'\tB"\n',"?f","\ff","","","A","","C","","F$","\f","","","","EH%","","","","H%","","","Z.\f","H%","","","Z.","","","","","","G","\fI","\t\n\t","L'\f","","\n","","K","N(\f","N(","","M","P)","Z.","j6","\b\t",'B"\n',"l7","R*\b",'\tB"',"\n","","O","b2g`1","","Q","fS","V,","","\f","","\bU","Z.\f","Z.","","W","Z.","\fZ.","","Y","\b.","Mf","","","@!","","\b\t",'B"\n',"BZ.","T+","","SZ. G","Z.?","Z.","Z.","Z.Z.","Z.","Z.","Z.","Nf^0","D#J&","X-\b","","","","","","","","","","\f","\tZ.","\f\t","Z.\f\t","Z.\f","\tZ.\f",">Z.","\fT","Z.\f\t","Z.\f","%Z.","\f&","Z.\f'","Z.\f\r","(Z.\f\f",")Z.\r\f","\v","Z.Z.\f","\f&","X-","\f","%","b2\f$T+",'\f".',"\f!.","\f\n","\rX-","\f\t\\/X-","","","","","","","","","","","","","[","\t]","56","7g","`1","","","_","89",":;","","","af","d3","c","f4h5\t\b","","e","\t\tg","\t\ni6","fP)","k7","fP)m","\v","88","","","o","q<sv","","","","",""].join(""),i=(new r.atn.ATNDeserializer).deserialize(o),l=i.decisionToState.map((function(e,t){return new r.dfa.DFA(e,t)})),p=new r.PredictionContextCache,m=[null,null,null,"'['","']'","'('","')'","'{'","'}'","';'","','","'='","'?'","':'","'.'","'++'","'--'","'+'","'-'","'~'","'!'","'*'","'/'","'%'","'>>'","'<<'","'>>>'","'<'","'>'","'<='","'>='","'=='","'!='","'==='","'!=='","'&'","'^'","'|'","'&&'","'||'","'*='","'/='","'%='","'+='","'-='","'<<='","'>>='","'>>>='","'&='","'^='","'|='","'null'","'undefined'",null,null,null,null,null,"'break'","'do'","'instanceof'","'typeof'","'case'","'else'","'new'","'var'","'catch'","'finally'","'return'","'void'","'continue'","'for'","'switch'","'while'","'debugger'","'function'","'this'","'with'","'default'","'if'","'throw'","'delete'","'in'","'try'","'class'","'enum'","'extends'","'super'","'const'","'export'","'import'"],c=[null,"RegularExpressionLiteral","LineTerminator","OpenBracket","CloseBracket","OpenParen","CloseParen","OpenBrace","CloseBrace","SemiColon","Comma","Assign","QuestionMark","Colon","Dot","PlusPlus","MinusMinus","Plus","Minus","BitNot","Not","Multiply","Divide","Modulus","RightShiftArithmetic","LeftShiftArithmetic","RightShiftLogical","LessThan","MoreThan","LessThanEquals","GreaterThanEquals","Equals","NotEquals","IdentityEquals","IdentityNotEquals","BitAnd","BitXOr","BitOr","And","Or","MultiplyAssign","DivideAssign","ModulusAssign","PlusAssign","MinusAssign","LeftShiftArithmeticAssign","RightShiftArithmeticAssign","RightShiftLogicalAssign","BitAndAssign","BitXorAssign","BitOrAssign","NullLiteral","UndefinedLiteral","BooleanLiteral","IntegerLiteral","DecimalLiteral","HexIntegerLiteral","OctalIntegerLiteral","Break","Do","Instanceof","Typeof","Case","Else","New","Var","Catch","Finally","Return","Void","Continue","For","Switch","While","Debugger","Function","This","With","Default","If","Throw","Delete","In","Try","Class","Enum","Extends","Super","Const","Export","Import","Implements","Let","Private","Public","Interface","Package","Protected","Static","Yield","Identifier","StringLiteral","WhiteSpaces","MultiLineComment","SingleLineComment","UnexpectedCharacter"],u=["program","sourceElements","sourceElement","statement","statementOrBlock","block","statementList","variableStatement","variableDeclarationList","variableDeclaration","initialiser","emptyStatement","expressionStatement","ifStatement","iterationStatement","continueStatement","breakStatement","returnStatement","withStatement","switchStatement","caseBlock","caseClauses","caseClause","defaultClause","labelledStatement","throwStatement","tryStatement","catchProduction","finallyProduction","debuggerStatement","functionDeclaration","formalParameterList","functionBody","arrayLiteral","elementList","elision","objectLiteral","propertyNameAndValueList","propertyAssignment","propertyName","propertySetParameterList","arguments","argumentList","expressionSequence","singleExpression","assignmentOperator","literal","numericLiteral","identifierName","reservedWord","keyword","futureReservedWord","getter","setter","eos","eof"];function g(e){return r.Parser.call(this,e),this._interp=new r.atn.ParserATNSimulator(this,i,l,p),this.ruleNames=u,this.literalNames=m,this.symbolicNames=c,g.prototype.here=function(e){var t=r.Parser.prototype.getCurrentToken.call(this).tokenIndex-1,n=this._input.get(t);return n.channel==r.Lexer.HIDDEN&&n.type==e},g.prototype.lineTerminatorAhead=function(){var e=r.Parser.prototype.getCurrentToken.call(this).tokenIndex-1,t=this._input.get(e);if(t.channel!=r.Lexer.HIDDEN)return!1;var n=t.text,s=t.type;return s==g.MultiLineComment&&-1!==n.indexOf("\r")||-1!==n.indexOf("\n")||s==g.LineTerminator},this}function d(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_program,this}function h(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_sourceElements,this}function T(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_sourceElement,this}function y(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_statement,this}function f(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_statementOrBlock,this}function b(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_block,this}function S(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_statementList,this}function A(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_variableStatement,this}function E(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_variableDeclarationList,this}function _(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_variableDeclaration,this}function x(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_initialiser,this}function I(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_emptyStatement,this}function L(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_expressionStatement,this}function v(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_ifStatement,this}function C(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_iterationStatement,this}function R(e,t){return C.call(this,e),C.prototype.copyFrom.call(this,t),this}function O(e,t){return C.call(this,e),C.prototype.copyFrom.call(this,t),this}function N(e,t){return C.call(this,e),C.prototype.copyFrom.call(this,t),this}function j(e,t){return C.call(this,e),C.prototype.copyFrom.call(this,t),this}function w(e,t){return C.call(this,e),C.prototype.copyFrom.call(this,t),this}function D(e,t){return C.call(this,e),C.prototype.copyFrom.call(this,t),this}function B(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_continueStatement,this}function M(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_breakStatement,this}function $(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_returnStatement,this}function k(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_withStatement,this}function P(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_switchStatement,this}function F(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_caseBlock,this}function U(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_caseClauses,this}function q(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_caseClause,this}function G(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_defaultClause,this}function H(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_labelledStatement,this}function V(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_throwStatement,this}function K(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_tryStatement,this}function W(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_catchProduction,this}function Y(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_finallyProduction,this}function z(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_debuggerStatement,this}function Z(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_functionDeclaration,this}function X(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_formalParameterList,this}function J(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_functionBody,this}function Q(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_arrayLiteral,this}function ee(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_elementList,this}function te(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_elision,this}function ne(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_objectLiteral,this}function re(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_propertyNameAndValueList,this}function se(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_propertyAssignment,this}function ae(e,t){return se.call(this,e),se.prototype.copyFrom.call(this,t),this}function oe(e,t){return se.call(this,e),se.prototype.copyFrom.call(this,t),this}function ie(e,t){return se.call(this,e),se.prototype.copyFrom.call(this,t),this}function le(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_propertyName,this}function pe(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_propertySetParameterList,this}function me(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_arguments,this}function ce(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_argumentList,this}function ue(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_expressionSequence,this}function ge(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_singleExpression,this}function de(e,t){return ge.call(this,e),ge.prototype.copyFrom.call(this,t),this}function he(e,t){return ge.call(this,e),ge.prototype.copyFrom.call(this,t),this}function Te(e,t){return ge.call(this,e),ge.prototype.copyFrom.call(this,t),this}function ye(e,t){return ge.call(this,e),ge.prototype.copyFrom.call(this,t),this}function fe(e,t){return ge.call(this,e),ge.prototype.copyFrom.call(this,t),this}function be(e,t){return ge.call(this,e),ge.prototype.copyFrom.call(this,t),this}function Se(e,t){return ge.call(this,e),ge.prototype.copyFrom.call(this,t),this}function Ae(e,t){return ge.call(this,e),ge.prototype.copyFrom.call(this,t),this}function Ee(e,t){return ge.call(this,e),ge.prototype.copyFrom.call(this,t),this}function _e(e,t){return ge.call(this,e),ge.prototype.copyFrom.call(this,t),this}function xe(e,t){return ge.call(this,e),ge.prototype.copyFrom.call(this,t),this}function Ie(e,t){return ge.call(this,e),ge.prototype.copyFrom.call(this,t),this}function Le(e,t){return ge.call(this,e),ge.prototype.copyFrom.call(this,t),this}function ve(e,t){return ge.call(this,e),ge.prototype.copyFrom.call(this,t),this}function Ce(e,t){return ge.call(this,e),ge.prototype.copyFrom.call(this,t),this}function Re(e,t){return ge.call(this,e),ge.prototype.copyFrom.call(this,t),this}function Oe(e,t){return ge.call(this,e),ge.prototype.copyFrom.call(this,t),this}function Ne(e,t){return ge.call(this,e),ge.prototype.copyFrom.call(this,t),this}function je(e,t){return ge.call(this,e),ge.prototype.copyFrom.call(this,t),this}function we(e,t){return ge.call(this,e),ge.prototype.copyFrom.call(this,t),this}function De(e,t){return ge.call(this,e),ge.prototype.copyFrom.call(this,t),this}function Be(e,t){return ge.call(this,e),ge.prototype.copyFrom.call(this,t),this}function Me(e,t){return ge.call(this,e),ge.prototype.copyFrom.call(this,t),this}function $e(e,t){return ge.call(this,e),ge.prototype.copyFrom.call(this,t),this}function ke(e,t){return ge.call(this,e),ge.prototype.copyFrom.call(this,t),this}function Pe(e,t){return ge.call(this,e),ge.prototype.copyFrom.call(this,t),this}function Fe(e,t){return ge.call(this,e),ge.prototype.copyFrom.call(this,t),this}function Ue(e,t){return ge.call(this,e),ge.prototype.copyFrom.call(this,t),this}function qe(e,t){return ge.call(this,e),ge.prototype.copyFrom.call(this,t),this}function Ge(e,t){return ge.call(this,e),ge.prototype.copyFrom.call(this,t),this}function He(e,t){return ge.call(this,e),ge.prototype.copyFrom.call(this,t),this}function Ve(e,t){return ge.call(this,e),ge.prototype.copyFrom.call(this,t),this}function Ke(e,t){return ge.call(this,e),ge.prototype.copyFrom.call(this,t),this}function We(e,t){return ge.call(this,e),ge.prototype.copyFrom.call(this,t),this}function Ye(e,t){return ge.call(this,e),ge.prototype.copyFrom.call(this,t),this}function ze(e,t){return ge.call(this,e),ge.prototype.copyFrom.call(this,t),this}function Ze(e,t){return ge.call(this,e),ge.prototype.copyFrom.call(this,t),this}function Xe(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_assignmentOperator,this}function Je(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_literal,this}function Qe(e,t){return Je.call(this,e),Je.prototype.copyFrom.call(this,t),this}function et(e,t){return Je.call(this,e),Je.prototype.copyFrom.call(this,t),this}function tt(e,t){return Je.call(this,e),Je.prototype.copyFrom.call(this,t),this}function nt(e,t){return Je.call(this,e),Je.prototype.copyFrom.call(this,t),this}function rt(e,t){return Je.call(this,e),Je.prototype.copyFrom.call(this,t),this}function st(e,t){return Je.call(this,e),Je.prototype.copyFrom.call(this,t),this}function at(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_numericLiteral,this}function ot(e,t){return at.call(this,e),at.prototype.copyFrom.call(this,t),this}function it(e,t){return at.call(this,e),at.prototype.copyFrom.call(this,t),this}function lt(e,t){return at.call(this,e),at.prototype.copyFrom.call(this,t),this}function pt(e,t){return at.call(this,e),at.prototype.copyFrom.call(this,t),this}function mt(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_identifierName,this}function ct(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_reservedWord,this}function ut(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_keyword,this}function gt(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_futureReservedWord,this}function dt(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_getter,this}function ht(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_setter,this}function Tt(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_eos,this}function yt(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_eof,this}g.prototype=Object.create(r.Parser.prototype),g.prototype.constructor=g,Object.defineProperty(g.prototype,"atn",{get:function(){return i}}),g.EOF=r.Token.EOF,g.RegularExpressionLiteral=1,g.LineTerminator=2,g.OpenBracket=3,g.CloseBracket=4,g.OpenParen=5,g.CloseParen=6,g.OpenBrace=7,g.CloseBrace=8,g.SemiColon=9,g.Comma=10,g.Assign=11,g.QuestionMark=12,g.Colon=13,g.Dot=14,g.PlusPlus=15,g.MinusMinus=16,g.Plus=17,g.Minus=18,g.BitNot=19,g.Not=20,g.Multiply=21,g.Divide=22,g.Modulus=23,g.RightShiftArithmetic=24,g.LeftShiftArithmetic=25,g.RightShiftLogical=26,g.LessThan=27,g.MoreThan=28,g.LessThanEquals=29,g.GreaterThanEquals=30,g.Equals=31,g.NotEquals=32,g.IdentityEquals=33,g.IdentityNotEquals=34,g.BitAnd=35,g.BitXOr=36,g.BitOr=37,g.And=38,g.Or=39,g.MultiplyAssign=40,g.DivideAssign=41,g.ModulusAssign=42,g.PlusAssign=43,g.MinusAssign=44,g.LeftShiftArithmeticAssign=45,g.RightShiftArithmeticAssign=46,g.RightShiftLogicalAssign=47,g.BitAndAssign=48,g.BitXorAssign=49,g.BitOrAssign=50,g.NullLiteral=51,g.UndefinedLiteral=52,g.BooleanLiteral=53,g.IntegerLiteral=54,g.DecimalLiteral=55,g.HexIntegerLiteral=56,g.OctalIntegerLiteral=57,g.Break=58,g.Do=59,g.Instanceof=60,g.Typeof=61,g.Case=62,g.Else=63,g.New=64,g.Var=65,g.Catch=66,g.Finally=67,g.Return=68,g.Void=69,g.Continue=70,g.For=71,g.Switch=72,g.While=73,g.Debugger=74,g.Function=75,g.This=76,g.With=77,g.Default=78,g.If=79,g.Throw=80,g.Delete=81,g.In=82,g.Try=83,g.Class=84,g.Enum=85,g.Extends=86,g.Super=87,g.Const=88,g.Export=89,g.Import=90,g.Implements=91,g.Let=92,g.Private=93,g.Public=94,g.Interface=95,g.Package=96,g.Protected=97,g.Static=98,g.Yield=99,g.Identifier=100,g.StringLiteral=101,g.WhiteSpaces=102,g.MultiLineComment=103,g.SingleLineComment=104,g.UnexpectedCharacter=105,g.RULE_program=0,g.RULE_sourceElements=1,g.RULE_sourceElement=2,g.RULE_statement=3,g.RULE_statementOrBlock=4,g.RULE_block=5,g.RULE_statementList=6,g.RULE_variableStatement=7,g.RULE_variableDeclarationList=8,g.RULE_variableDeclaration=9,g.RULE_initialiser=10,g.RULE_emptyStatement=11,g.RULE_expressionStatement=12,g.RULE_ifStatement=13,g.RULE_iterationStatement=14,g.RULE_continueStatement=15,g.RULE_breakStatement=16,g.RULE_returnStatement=17,g.RULE_withStatement=18,g.RULE_switchStatement=19,g.RULE_caseBlock=20,g.RULE_caseClauses=21,g.RULE_caseClause=22,g.RULE_defaultClause=23,g.RULE_labelledStatement=24,g.RULE_throwStatement=25,g.RULE_tryStatement=26,g.RULE_catchProduction=27,g.RULE_finallyProduction=28,g.RULE_debuggerStatement=29,g.RULE_functionDeclaration=30,g.RULE_formalParameterList=31,g.RULE_functionBody=32,g.RULE_arrayLiteral=33,g.RULE_elementList=34,g.RULE_elision=35,g.RULE_objectLiteral=36,g.RULE_propertyNameAndValueList=37,g.RULE_propertyAssignment=38,g.RULE_propertyName=39,g.RULE_propertySetParameterList=40,g.RULE_arguments=41,g.RULE_argumentList=42,g.RULE_expressionSequence=43,g.RULE_singleExpression=44,g.RULE_assignmentOperator=45,g.RULE_literal=46,g.RULE_numericLiteral=47,g.RULE_identifierName=48,g.RULE_reservedWord=49,g.RULE_keyword=50,g.RULE_futureReservedWord=51,g.RULE_getter=52,g.RULE_setter=53,g.RULE_eos=54,g.RULE_eof=55,d.prototype=Object.create(r.ParserRuleContext.prototype),d.prototype.constructor=d,d.prototype.eof=function(){return this.getTypedRuleContext(yt,0)},d.prototype.sourceElements=function(){return this.getTypedRuleContext(h,0)},d.prototype.sourceElement=function(){return this.getTypedRuleContext(T,0)},d.prototype.enterRule=function(e){e instanceof s&&e.enterProgram(this)},d.prototype.exitRule=function(e){e instanceof s&&e.exitProgram(this)},d.prototype.accept=function(e){return e instanceof a?e.visitProgram(this):e.visitChildren(this)},g.ProgramContext=d,g.prototype.program=function(){var e=new d(this,this._ctx,this.state);this.enterRule(e,0,g.RULE_program);var t=0;try{this.enterOuterAlt(e,1),this.state=113,this._errHandler.sync(this),1===this._interp.adaptivePredict(this._input,0,this._ctx)&&(this.state=112,this.sourceElements()),this.state=116,this._errHandler.sync(this),(0==(-32&(t=this._input.LA(1)))&&0!=(1<<t&(1<<g.RegularExpressionLiteral|1<<g.OpenBracket|1<<g.OpenParen|1<<g.OpenBrace|1<<g.SemiColon|1<<g.PlusPlus|1<<g.MinusMinus|1<<g.Plus|1<<g.Minus|1<<g.BitNot|1<<g.Not))||0==(t-51&-32)&&0!=(1<<t-51&(1<<g.NullLiteral-51|1<<g.UndefinedLiteral-51|1<<g.BooleanLiteral-51|1<<g.IntegerLiteral-51|1<<g.DecimalLiteral-51|1<<g.HexIntegerLiteral-51|1<<g.OctalIntegerLiteral-51|1<<g.Break-51|1<<g.Do-51|1<<g.Typeof-51|1<<g.New-51|1<<g.Var-51|1<<g.Return-51|1<<g.Void-51|1<<g.Continue-51|1<<g.For-51|1<<g.Switch-51|1<<g.While-51|1<<g.Debugger-51|1<<g.Function-51|1<<g.This-51|1<<g.With-51|1<<g.If-51|1<<g.Throw-51|1<<g.Delete-51))||0==(t-83&-32)&&0!=(1<<t-83&(1<<g.Try-83|1<<g.Identifier-83|1<<g.StringLiteral-83)))&&(this.state=115,this.sourceElement()),this.state=118,this.eof()}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},h.prototype=Object.create(r.ParserRuleContext.prototype),h.prototype.constructor=h,h.prototype.sourceElement=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(T):this.getTypedRuleContext(T,e)},h.prototype.eos=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(Tt):this.getTypedRuleContext(Tt,e)},h.prototype.enterRule=function(e){e instanceof s&&e.enterSourceElements(this)},h.prototype.exitRule=function(e){e instanceof s&&e.exitSourceElements(this)},h.prototype.accept=function(e){return e instanceof a?e.visitSourceElements(this):e.visitChildren(this)},g.SourceElementsContext=h,g.prototype.sourceElements=function(){var e=new h(this,this._ctx,this.state);this.enterRule(e,2,g.RULE_sourceElements);try{this.enterOuterAlt(e,1),this.state=123,this._errHandler.sync(this);var t=1;do{if(1!==t)throw new r.error.NoViableAltException(this);this.state=120,this.sourceElement(),this.state=121,this.eos(),this.state=125,this._errHandler.sync(this),t=this._interp.adaptivePredict(this._input,2,this._ctx)}while(2!=t&&t!=r.atn.ATN.INVALID_ALT_NUMBER)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},T.prototype=Object.create(r.ParserRuleContext.prototype),T.prototype.constructor=T,T.prototype.statement=function(){return this.getTypedRuleContext(y,0)},T.prototype.functionDeclaration=function(){return this.getTypedRuleContext(Z,0)},T.prototype.enterRule=function(e){e instanceof s&&e.enterSourceElement(this)},T.prototype.exitRule=function(e){e instanceof s&&e.exitSourceElement(this)},T.prototype.accept=function(e){return e instanceof a?e.visitSourceElement(this):e.visitChildren(this)},g.SourceElementContext=T,g.prototype.sourceElement=function(){var e=new T(this,this._ctx,this.state);this.enterRule(e,4,g.RULE_sourceElement);try{switch(this.state=129,this._errHandler.sync(this),this._interp.adaptivePredict(this._input,3,this._ctx)){case 1:this.enterOuterAlt(e,1),this.state=127,this.statement();break;case 2:this.enterOuterAlt(e,2),this.state=128,this.functionDeclaration()}}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},y.prototype=Object.create(r.ParserRuleContext.prototype),y.prototype.constructor=y,y.prototype.variableStatement=function(){return this.getTypedRuleContext(A,0)},y.prototype.emptyStatement=function(){return this.getTypedRuleContext(I,0)},y.prototype.expressionStatement=function(){return this.getTypedRuleContext(L,0)},y.prototype.ifStatement=function(){return this.getTypedRuleContext(v,0)},y.prototype.iterationStatement=function(){return this.getTypedRuleContext(C,0)},y.prototype.continueStatement=function(){return this.getTypedRuleContext(B,0)},y.prototype.breakStatement=function(){return this.getTypedRuleContext(M,0)},y.prototype.returnStatement=function(){return this.getTypedRuleContext($,0)},y.prototype.withStatement=function(){return this.getTypedRuleContext(k,0)},y.prototype.labelledStatement=function(){return this.getTypedRuleContext(H,0)},y.prototype.switchStatement=function(){return this.getTypedRuleContext(P,0)},y.prototype.throwStatement=function(){return this.getTypedRuleContext(V,0)},y.prototype.tryStatement=function(){return this.getTypedRuleContext(K,0)},y.prototype.debuggerStatement=function(){return this.getTypedRuleContext(z,0)},y.prototype.enterRule=function(e){e instanceof s&&e.enterStatement(this)},y.prototype.exitRule=function(e){e instanceof s&&e.exitStatement(this)},y.prototype.accept=function(e){return e instanceof a?e.visitStatement(this):e.visitChildren(this)},g.StatementContext=y,g.prototype.statement=function(){var e=new y(this,this._ctx,this.state);this.enterRule(e,6,g.RULE_statement);try{switch(this.state=145,this._errHandler.sync(this),this._interp.adaptivePredict(this._input,4,this._ctx)){case 1:this.enterOuterAlt(e,1),this.state=131,this.variableStatement();break;case 2:this.enterOuterAlt(e,2),this.state=132,this.emptyStatement();break;case 3:this.enterOuterAlt(e,3),this.state=133,this.expressionStatement();break;case 4:this.enterOuterAlt(e,4),this.state=134,this.ifStatement();break;case 5:this.enterOuterAlt(e,5),this.state=135,this.iterationStatement();break;case 6:this.enterOuterAlt(e,6),this.state=136,this.continueStatement();break;case 7:this.enterOuterAlt(e,7),this.state=137,this.breakStatement();break;case 8:this.enterOuterAlt(e,8),this.state=138,this.returnStatement();break;case 9:this.enterOuterAlt(e,9),this.state=139,this.withStatement();break;case 10:this.enterOuterAlt(e,10),this.state=140,this.labelledStatement();break;case 11:this.enterOuterAlt(e,11),this.state=141,this.switchStatement();break;case 12:this.enterOuterAlt(e,12),this.state=142,this.throwStatement();break;case 13:this.enterOuterAlt(e,13),this.state=143,this.tryStatement();break;case 14:this.enterOuterAlt(e,14),this.state=144,this.debuggerStatement()}}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},f.prototype=Object.create(r.ParserRuleContext.prototype),f.prototype.constructor=f,f.prototype.block=function(){return this.getTypedRuleContext(b,0)},f.prototype.statement=function(){return this.getTypedRuleContext(y,0)},f.prototype.enterRule=function(e){e instanceof s&&e.enterStatementOrBlock(this)},f.prototype.exitRule=function(e){e instanceof s&&e.exitStatementOrBlock(this)},f.prototype.accept=function(e){return e instanceof a?e.visitStatementOrBlock(this):e.visitChildren(this)},g.StatementOrBlockContext=f,g.prototype.statementOrBlock=function(){var e=new f(this,this._ctx,this.state);this.enterRule(e,8,g.RULE_statementOrBlock);try{switch(this.state=149,this._errHandler.sync(this),this._interp.adaptivePredict(this._input,5,this._ctx)){case 1:this.enterOuterAlt(e,1),this.state=147,this.block();break;case 2:this.enterOuterAlt(e,2),this.state=148,this.statement()}}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},b.prototype=Object.create(r.ParserRuleContext.prototype),b.prototype.constructor=b,b.prototype.OpenBrace=function(){return this.getToken(g.OpenBrace,0)},b.prototype.CloseBrace=function(){return this.getToken(g.CloseBrace,0)},b.prototype.statement=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(y):this.getTypedRuleContext(y,e)},b.prototype.enterRule=function(e){e instanceof s&&e.enterBlock(this)},b.prototype.exitRule=function(e){e instanceof s&&e.exitBlock(this)},b.prototype.accept=function(e){return e instanceof a?e.visitBlock(this):e.visitChildren(this)},g.BlockContext=b,g.prototype.block=function(){var e=new b(this,this._ctx,this.state);this.enterRule(e,10,g.RULE_block);var t=0;try{for(this.enterOuterAlt(e,1),this.state=151,this.match(g.OpenBrace),this.state=155,this._errHandler.sync(this),t=this._input.LA(1);0==(-32&t)&&0!=(1<<t&(1<<g.RegularExpressionLiteral|1<<g.OpenBracket|1<<g.OpenParen|1<<g.OpenBrace|1<<g.SemiColon|1<<g.PlusPlus|1<<g.MinusMinus|1<<g.Plus|1<<g.Minus|1<<g.BitNot|1<<g.Not))||0==(t-51&-32)&&0!=(1<<t-51&(1<<g.NullLiteral-51|1<<g.UndefinedLiteral-51|1<<g.BooleanLiteral-51|1<<g.IntegerLiteral-51|1<<g.DecimalLiteral-51|1<<g.HexIntegerLiteral-51|1<<g.OctalIntegerLiteral-51|1<<g.Break-51|1<<g.Do-51|1<<g.Typeof-51|1<<g.New-51|1<<g.Var-51|1<<g.Return-51|1<<g.Void-51|1<<g.Continue-51|1<<g.For-51|1<<g.Switch-51|1<<g.While-51|1<<g.Debugger-51|1<<g.Function-51|1<<g.This-51|1<<g.With-51|1<<g.If-51|1<<g.Throw-51|1<<g.Delete-51))||0==(t-83&-32)&&0!=(1<<t-83&(1<<g.Try-83|1<<g.Identifier-83|1<<g.StringLiteral-83));)this.state=152,this.statement(),this.state=157,this._errHandler.sync(this),t=this._input.LA(1);this.state=158,this.match(g.CloseBrace)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},S.prototype=Object.create(r.ParserRuleContext.prototype),S.prototype.constructor=S,S.prototype.statementOrBlock=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(f):this.getTypedRuleContext(f,e)},S.prototype.enterRule=function(e){e instanceof s&&e.enterStatementList(this)},S.prototype.exitRule=function(e){e instanceof s&&e.exitStatementList(this)},S.prototype.accept=function(e){return e instanceof a?e.visitStatementList(this):e.visitChildren(this)},g.StatementListContext=S,g.prototype.statementList=function(){var e=new S(this,this._ctx,this.state);this.enterRule(e,12,g.RULE_statementList);var t=0;try{this.enterOuterAlt(e,1),this.state=161,this._errHandler.sync(this),t=this._input.LA(1);do{this.state=160,this.statementOrBlock(),this.state=163,this._errHandler.sync(this),t=this._input.LA(1)}while(0==(-32&t)&&0!=(1<<t&(1<<g.RegularExpressionLiteral|1<<g.OpenBracket|1<<g.OpenParen|1<<g.OpenBrace|1<<g.SemiColon|1<<g.PlusPlus|1<<g.MinusMinus|1<<g.Plus|1<<g.Minus|1<<g.BitNot|1<<g.Not))||0==(t-51&-32)&&0!=(1<<t-51&(1<<g.NullLiteral-51|1<<g.UndefinedLiteral-51|1<<g.BooleanLiteral-51|1<<g.IntegerLiteral-51|1<<g.DecimalLiteral-51|1<<g.HexIntegerLiteral-51|1<<g.OctalIntegerLiteral-51|1<<g.Break-51|1<<g.Do-51|1<<g.Typeof-51|1<<g.New-51|1<<g.Var-51|1<<g.Return-51|1<<g.Void-51|1<<g.Continue-51|1<<g.For-51|1<<g.Switch-51|1<<g.While-51|1<<g.Debugger-51|1<<g.Function-51|1<<g.This-51|1<<g.With-51|1<<g.If-51|1<<g.Throw-51|1<<g.Delete-51))||0==(t-83&-32)&&0!=(1<<t-83&(1<<g.Try-83|1<<g.Identifier-83|1<<g.StringLiteral-83)))}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},A.prototype=Object.create(r.ParserRuleContext.prototype),A.prototype.constructor=A,A.prototype.Var=function(){return this.getToken(g.Var,0)},A.prototype.variableDeclarationList=function(){return this.getTypedRuleContext(E,0)},A.prototype.eos=function(){return this.getTypedRuleContext(Tt,0)},A.prototype.enterRule=function(e){e instanceof s&&e.enterVariableStatement(this)},A.prototype.exitRule=function(e){e instanceof s&&e.exitVariableStatement(this)},A.prototype.accept=function(e){return e instanceof a?e.visitVariableStatement(this):e.visitChildren(this)},g.VariableStatementContext=A,g.prototype.variableStatement=function(){var e=new A(this,this._ctx,this.state);this.enterRule(e,14,g.RULE_variableStatement);try{this.enterOuterAlt(e,1),this.state=165,this.match(g.Var),this.state=166,this.variableDeclarationList(),this.state=167,this.eos()}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},E.prototype=Object.create(r.ParserRuleContext.prototype),E.prototype.constructor=E,E.prototype.variableDeclaration=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(_):this.getTypedRuleContext(_,e)},E.prototype.Comma=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.Comma):this.getToken(g.Comma,e)},E.prototype.enterRule=function(e){e instanceof s&&e.enterVariableDeclarationList(this)},E.prototype.exitRule=function(e){e instanceof s&&e.exitVariableDeclarationList(this)},E.prototype.accept=function(e){return e instanceof a?e.visitVariableDeclarationList(this):e.visitChildren(this)},g.VariableDeclarationListContext=E,g.prototype.variableDeclarationList=function(){var e=new E(this,this._ctx,this.state);this.enterRule(e,16,g.RULE_variableDeclarationList);try{this.enterOuterAlt(e,1),this.state=169,this.variableDeclaration(),this.state=174,this._errHandler.sync(this);for(var t=this._interp.adaptivePredict(this._input,8,this._ctx);2!=t&&t!=r.atn.ATN.INVALID_ALT_NUMBER;)1===t&&(this.state=170,this.match(g.Comma),this.state=171,this.variableDeclaration()),this.state=176,this._errHandler.sync(this),t=this._interp.adaptivePredict(this._input,8,this._ctx)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},_.prototype=Object.create(r.ParserRuleContext.prototype),_.prototype.constructor=_,_.prototype.Identifier=function(){return this.getToken(g.Identifier,0)},_.prototype.initialiser=function(){return this.getTypedRuleContext(x,0)},_.prototype.enterRule=function(e){e instanceof s&&e.enterVariableDeclaration(this)},_.prototype.exitRule=function(e){e instanceof s&&e.exitVariableDeclaration(this)},_.prototype.accept=function(e){return e instanceof a?e.visitVariableDeclaration(this):e.visitChildren(this)},g.VariableDeclarationContext=_,g.prototype.variableDeclaration=function(){var e=new _(this,this._ctx,this.state);this.enterRule(e,18,g.RULE_variableDeclaration);try{this.enterOuterAlt(e,1),this.state=177,this.match(g.Identifier),this.state=179,this._errHandler.sync(this),1===this._interp.adaptivePredict(this._input,9,this._ctx)&&(this.state=178,this.initialiser())}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},x.prototype=Object.create(r.ParserRuleContext.prototype),x.prototype.constructor=x,x.prototype.Assign=function(){return this.getToken(g.Assign,0)},x.prototype.singleExpression=function(){return this.getTypedRuleContext(ge,0)},x.prototype.enterRule=function(e){e instanceof s&&e.enterInitialiser(this)},x.prototype.exitRule=function(e){e instanceof s&&e.exitInitialiser(this)},x.prototype.accept=function(e){return e instanceof a?e.visitInitialiser(this):e.visitChildren(this)},g.InitialiserContext=x,g.prototype.initialiser=function(){var e=new x(this,this._ctx,this.state);this.enterRule(e,20,g.RULE_initialiser);try{this.enterOuterAlt(e,1),this.state=181,this.match(g.Assign),this.state=182,this.singleExpression(0)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},I.prototype=Object.create(r.ParserRuleContext.prototype),I.prototype.constructor=I,I.prototype.SemiColon=function(){return this.getToken(g.SemiColon,0)},I.prototype.enterRule=function(e){e instanceof s&&e.enterEmptyStatement(this)},I.prototype.exitRule=function(e){e instanceof s&&e.exitEmptyStatement(this)},I.prototype.accept=function(e){return e instanceof a?e.visitEmptyStatement(this):e.visitChildren(this)},g.EmptyStatementContext=I,g.prototype.emptyStatement=function(){var e=new I(this,this._ctx,this.state);this.enterRule(e,22,g.RULE_emptyStatement);try{this.enterOuterAlt(e,1),this.state=184,this.match(g.SemiColon)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},L.prototype=Object.create(r.ParserRuleContext.prototype),L.prototype.constructor=L,L.prototype.expressionSequence=function(){return this.getTypedRuleContext(ue,0)},L.prototype.enterRule=function(e){e instanceof s&&e.enterExpressionStatement(this)},L.prototype.exitRule=function(e){e instanceof s&&e.exitExpressionStatement(this)},L.prototype.accept=function(e){return e instanceof a?e.visitExpressionStatement(this):e.visitChildren(this)},g.ExpressionStatementContext=L,g.prototype.expressionStatement=function(){var e=new L(this,this._ctx,this.state);this.enterRule(e,24,g.RULE_expressionStatement);try{this.enterOuterAlt(e,1),this.state=186,this.expressionSequence()}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},v.prototype=Object.create(r.ParserRuleContext.prototype),v.prototype.constructor=v,v.prototype.If=function(){return this.getToken(g.If,0)},v.prototype.OpenParen=function(){return this.getToken(g.OpenParen,0)},v.prototype.expressionSequence=function(){return this.getTypedRuleContext(ue,0)},v.prototype.CloseParen=function(){return this.getToken(g.CloseParen,0)},v.prototype.statementOrBlock=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(f):this.getTypedRuleContext(f,e)},v.prototype.Else=function(){return this.getToken(g.Else,0)},v.prototype.enterRule=function(e){e instanceof s&&e.enterIfStatement(this)},v.prototype.exitRule=function(e){e instanceof s&&e.exitIfStatement(this)},v.prototype.accept=function(e){return e instanceof a?e.visitIfStatement(this):e.visitChildren(this)},g.IfStatementContext=v,g.prototype.ifStatement=function(){var e=new v(this,this._ctx,this.state);this.enterRule(e,26,g.RULE_ifStatement);try{this.enterOuterAlt(e,1),this.state=188,this.match(g.If),this.state=189,this.match(g.OpenParen),this.state=190,this.expressionSequence(),this.state=191,this.match(g.CloseParen),this.state=192,this.statementOrBlock(),this.state=195,this._errHandler.sync(this),1===this._interp.adaptivePredict(this._input,10,this._ctx)&&(this.state=193,this.match(g.Else),this.state=194,this.statementOrBlock())}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},C.prototype=Object.create(r.ParserRuleContext.prototype),C.prototype.constructor=C,C.prototype.copyFrom=function(e){r.ParserRuleContext.prototype.copyFrom.call(this,e)},R.prototype=Object.create(C.prototype),R.prototype.constructor=R,g.ForVarStatementContext=R,R.prototype.For=function(){return this.getToken(g.For,0)},R.prototype.OpenParen=function(){return this.getToken(g.OpenParen,0)},R.prototype.Var=function(){return this.getToken(g.Var,0)},R.prototype.variableDeclarationList=function(){return this.getTypedRuleContext(E,0)},R.prototype.SemiColon=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.SemiColon):this.getToken(g.SemiColon,e)},R.prototype.CloseParen=function(){return this.getToken(g.CloseParen,0)},R.prototype.statementOrBlock=function(){return this.getTypedRuleContext(f,0)},R.prototype.expressionSequence=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(ue):this.getTypedRuleContext(ue,e)},R.prototype.enterRule=function(e){e instanceof s&&e.enterForVarStatement(this)},R.prototype.exitRule=function(e){e instanceof s&&e.exitForVarStatement(this)},R.prototype.accept=function(e){return e instanceof a?e.visitForVarStatement(this):e.visitChildren(this)},O.prototype=Object.create(C.prototype),O.prototype.constructor=O,g.ForVarInStatementContext=O,O.prototype.For=function(){return this.getToken(g.For,0)},O.prototype.OpenParen=function(){return this.getToken(g.OpenParen,0)},O.prototype.Var=function(){return this.getToken(g.Var,0)},O.prototype.variableDeclaration=function(){return this.getTypedRuleContext(_,0)},O.prototype.In=function(){return this.getToken(g.In,0)},O.prototype.expressionSequence=function(){return this.getTypedRuleContext(ue,0)},O.prototype.CloseParen=function(){return this.getToken(g.CloseParen,0)},O.prototype.statementOrBlock=function(){return this.getTypedRuleContext(f,0)},O.prototype.enterRule=function(e){e instanceof s&&e.enterForVarInStatement(this)},O.prototype.exitRule=function(e){e instanceof s&&e.exitForVarInStatement(this)},O.prototype.accept=function(e){return e instanceof a?e.visitForVarInStatement(this):e.visitChildren(this)},N.prototype=Object.create(C.prototype),N.prototype.constructor=N,g.WhileStatementContext=N,N.prototype.While=function(){return this.getToken(g.While,0)},N.prototype.OpenParen=function(){return this.getToken(g.OpenParen,0)},N.prototype.expressionSequence=function(){return this.getTypedRuleContext(ue,0)},N.prototype.CloseParen=function(){return this.getToken(g.CloseParen,0)},N.prototype.statementOrBlock=function(){return this.getTypedRuleContext(f,0)},N.prototype.enterRule=function(e){e instanceof s&&e.enterWhileStatement(this)},N.prototype.exitRule=function(e){e instanceof s&&e.exitWhileStatement(this)},N.prototype.accept=function(e){return e instanceof a?e.visitWhileStatement(this):e.visitChildren(this)},j.prototype=Object.create(C.prototype),j.prototype.constructor=j,g.ForStatementContext=j,j.prototype.For=function(){return this.getToken(g.For,0)},j.prototype.OpenParen=function(){return this.getToken(g.OpenParen,0)},j.prototype.SemiColon=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.SemiColon):this.getToken(g.SemiColon,e)},j.prototype.CloseParen=function(){return this.getToken(g.CloseParen,0)},j.prototype.statementOrBlock=function(){return this.getTypedRuleContext(f,0)},j.prototype.expressionSequence=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(ue):this.getTypedRuleContext(ue,e)},j.prototype.enterRule=function(e){e instanceof s&&e.enterForStatement(this)},j.prototype.exitRule=function(e){e instanceof s&&e.exitForStatement(this)},j.prototype.accept=function(e){return e instanceof a?e.visitForStatement(this):e.visitChildren(this)},w.prototype=Object.create(C.prototype),w.prototype.constructor=w,g.DoWhileStatementContext=w,w.prototype.Do=function(){return this.getToken(g.Do,0)},w.prototype.statementOrBlock=function(){return this.getTypedRuleContext(f,0)},w.prototype.While=function(){return this.getToken(g.While,0)},w.prototype.OpenParen=function(){return this.getToken(g.OpenParen,0)},w.prototype.expressionSequence=function(){return this.getTypedRuleContext(ue,0)},w.prototype.CloseParen=function(){return this.getToken(g.CloseParen,0)},w.prototype.eos=function(){return this.getTypedRuleContext(Tt,0)},w.prototype.enterRule=function(e){e instanceof s&&e.enterDoWhileStatement(this)},w.prototype.exitRule=function(e){e instanceof s&&e.exitDoWhileStatement(this)},w.prototype.accept=function(e){return e instanceof a?e.visitDoWhileStatement(this):e.visitChildren(this)},D.prototype=Object.create(C.prototype),D.prototype.constructor=D,g.ForInStatementContext=D,D.prototype.For=function(){return this.getToken(g.For,0)},D.prototype.OpenParen=function(){return this.getToken(g.OpenParen,0)},D.prototype.singleExpression=function(){return this.getTypedRuleContext(ge,0)},D.prototype.In=function(){return this.getToken(g.In,0)},D.prototype.expressionSequence=function(){return this.getTypedRuleContext(ue,0)},D.prototype.CloseParen=function(){return this.getToken(g.CloseParen,0)},D.prototype.statementOrBlock=function(){return this.getTypedRuleContext(f,0)},D.prototype.enterRule=function(e){e instanceof s&&e.enterForInStatement(this)},D.prototype.exitRule=function(e){e instanceof s&&e.exitForInStatement(this)},D.prototype.accept=function(e){return e instanceof a?e.visitForInStatement(this):e.visitChildren(this)},g.IterationStatementContext=C,g.prototype.iterationStatement=function(){var e=new C(this,this._ctx,this.state);this.enterRule(e,28,g.RULE_iterationStatement);var t=0;try{switch(this.state=258,this._errHandler.sync(this),this._interp.adaptivePredict(this._input,16,this._ctx)){case 1:e=new w(this,e),this.enterOuterAlt(e,1),this.state=197,this.match(g.Do),this.state=198,this.statementOrBlock(),this.state=199,this.match(g.While),this.state=200,this.match(g.OpenParen),this.state=201,this.expressionSequence(),this.state=202,this.match(g.CloseParen),this.state=203,this.eos();break;case 2:e=new N(this,e),this.enterOuterAlt(e,2),this.state=205,this.match(g.While),this.state=206,this.match(g.OpenParen),this.state=207,this.expressionSequence(),this.state=208,this.match(g.CloseParen),this.state=209,this.statementOrBlock();break;case 3:e=new j(this,e),this.enterOuterAlt(e,3),this.state=211,this.match(g.For),this.state=212,this.match(g.OpenParen),this.state=214,this._errHandler.sync(this),(0==(-32&(t=this._input.LA(1)))&&0!=(1<<t&(1<<g.RegularExpressionLiteral|1<<g.OpenBracket|1<<g.OpenParen|1<<g.OpenBrace|1<<g.PlusPlus|1<<g.MinusMinus|1<<g.Plus|1<<g.Minus|1<<g.BitNot|1<<g.Not))||0==(t-51&-32)&&0!=(1<<t-51&(1<<g.NullLiteral-51|1<<g.UndefinedLiteral-51|1<<g.BooleanLiteral-51|1<<g.IntegerLiteral-51|1<<g.DecimalLiteral-51|1<<g.HexIntegerLiteral-51|1<<g.OctalIntegerLiteral-51|1<<g.Typeof-51|1<<g.New-51|1<<g.Void-51|1<<g.Function-51|1<<g.This-51|1<<g.Delete-51))||t===g.Identifier||t===g.StringLiteral)&&(this.state=213,this.expressionSequence()),this.state=216,this.match(g.SemiColon),this.state=218,this._errHandler.sync(this),(0==(-32&(t=this._input.LA(1)))&&0!=(1<<t&(1<<g.RegularExpressionLiteral|1<<g.OpenBracket|1<<g.OpenParen|1<<g.OpenBrace|1<<g.PlusPlus|1<<g.MinusMinus|1<<g.Plus|1<<g.Minus|1<<g.BitNot|1<<g.Not))||0==(t-51&-32)&&0!=(1<<t-51&(1<<g.NullLiteral-51|1<<g.UndefinedLiteral-51|1<<g.BooleanLiteral-51|1<<g.IntegerLiteral-51|1<<g.DecimalLiteral-51|1<<g.HexIntegerLiteral-51|1<<g.OctalIntegerLiteral-51|1<<g.Typeof-51|1<<g.New-51|1<<g.Void-51|1<<g.Function-51|1<<g.This-51|1<<g.Delete-51))||t===g.Identifier||t===g.StringLiteral)&&(this.state=217,this.expressionSequence()),this.state=220,this.match(g.SemiColon),this.state=222,this._errHandler.sync(this),(0==(-32&(t=this._input.LA(1)))&&0!=(1<<t&(1<<g.RegularExpressionLiteral|1<<g.OpenBracket|1<<g.OpenParen|1<<g.OpenBrace|1<<g.PlusPlus|1<<g.MinusMinus|1<<g.Plus|1<<g.Minus|1<<g.BitNot|1<<g.Not))||0==(t-51&-32)&&0!=(1<<t-51&(1<<g.NullLiteral-51|1<<g.UndefinedLiteral-51|1<<g.BooleanLiteral-51|1<<g.IntegerLiteral-51|1<<g.DecimalLiteral-51|1<<g.HexIntegerLiteral-51|1<<g.OctalIntegerLiteral-51|1<<g.Typeof-51|1<<g.New-51|1<<g.Void-51|1<<g.Function-51|1<<g.This-51|1<<g.Delete-51))||t===g.Identifier||t===g.StringLiteral)&&(this.state=221,this.expressionSequence()),this.state=224,this.match(g.CloseParen),this.state=225,this.statementOrBlock();break;case 4:e=new R(this,e),this.enterOuterAlt(e,4),this.state=226,this.match(g.For),this.state=227,this.match(g.OpenParen),this.state=228,this.match(g.Var),this.state=229,this.variableDeclarationList(),this.state=230,this.match(g.SemiColon),this.state=232,this._errHandler.sync(this),(0==(-32&(t=this._input.LA(1)))&&0!=(1<<t&(1<<g.RegularExpressionLiteral|1<<g.OpenBracket|1<<g.OpenParen|1<<g.OpenBrace|1<<g.PlusPlus|1<<g.MinusMinus|1<<g.Plus|1<<g.Minus|1<<g.BitNot|1<<g.Not))||0==(t-51&-32)&&0!=(1<<t-51&(1<<g.NullLiteral-51|1<<g.UndefinedLiteral-51|1<<g.BooleanLiteral-51|1<<g.IntegerLiteral-51|1<<g.DecimalLiteral-51|1<<g.HexIntegerLiteral-51|1<<g.OctalIntegerLiteral-51|1<<g.Typeof-51|1<<g.New-51|1<<g.Void-51|1<<g.Function-51|1<<g.This-51|1<<g.Delete-51))||t===g.Identifier||t===g.StringLiteral)&&(this.state=231,this.expressionSequence()),this.state=234,this.match(g.SemiColon),this.state=236,this._errHandler.sync(this),(0==(-32&(t=this._input.LA(1)))&&0!=(1<<t&(1<<g.RegularExpressionLiteral|1<<g.OpenBracket|1<<g.OpenParen|1<<g.OpenBrace|1<<g.PlusPlus|1<<g.MinusMinus|1<<g.Plus|1<<g.Minus|1<<g.BitNot|1<<g.Not))||0==(t-51&-32)&&0!=(1<<t-51&(1<<g.NullLiteral-51|1<<g.UndefinedLiteral-51|1<<g.BooleanLiteral-51|1<<g.IntegerLiteral-51|1<<g.DecimalLiteral-51|1<<g.HexIntegerLiteral-51|1<<g.OctalIntegerLiteral-51|1<<g.Typeof-51|1<<g.New-51|1<<g.Void-51|1<<g.Function-51|1<<g.This-51|1<<g.Delete-51))||t===g.Identifier||t===g.StringLiteral)&&(this.state=235,this.expressionSequence()),this.state=238,this.match(g.CloseParen),this.state=239,this.statementOrBlock();break;case 5:e=new D(this,e),this.enterOuterAlt(e,5),this.state=241,this.match(g.For),this.state=242,this.match(g.OpenParen),this.state=243,this.singleExpression(0),this.state=244,this.match(g.In),this.state=245,this.expressionSequence(),this.state=246,this.match(g.CloseParen),this.state=247,this.statementOrBlock();break;case 6:e=new O(this,e),this.enterOuterAlt(e,6),this.state=249,this.match(g.For),this.state=250,this.match(g.OpenParen),this.state=251,this.match(g.Var),this.state=252,this.variableDeclaration(),this.state=253,this.match(g.In),this.state=254,this.expressionSequence(),this.state=255,this.match(g.CloseParen),this.state=256,this.statementOrBlock()}}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},B.prototype=Object.create(r.ParserRuleContext.prototype),B.prototype.constructor=B,B.prototype.Continue=function(){return this.getToken(g.Continue,0)},B.prototype.eos=function(){return this.getTypedRuleContext(Tt,0)},B.prototype.Identifier=function(){return this.getToken(g.Identifier,0)},B.prototype.enterRule=function(e){e instanceof s&&e.enterContinueStatement(this)},B.prototype.exitRule=function(e){e instanceof s&&e.exitContinueStatement(this)},B.prototype.accept=function(e){return e instanceof a?e.visitContinueStatement(this):e.visitChildren(this)},g.ContinueStatementContext=B,g.prototype.continueStatement=function(){var e=new B(this,this._ctx,this.state);this.enterRule(e,30,g.RULE_continueStatement);try{if(this.enterOuterAlt(e,1),this.state=260,this.match(g.Continue),this.state=263,this._errHandler.sync(this),1===this._interp.adaptivePredict(this._input,17,this._ctx)){if(this.state=261,this.here(g.LineTerminator))throw new r.error.FailedPredicateException(this,"!this.here(ECMAScriptParser.LineTerminator)");this.state=262,this.match(g.Identifier)}this.state=265,this.eos()}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},M.prototype=Object.create(r.ParserRuleContext.prototype),M.prototype.constructor=M,M.prototype.Break=function(){return this.getToken(g.Break,0)},M.prototype.eos=function(){return this.getTypedRuleContext(Tt,0)},M.prototype.Identifier=function(){return this.getToken(g.Identifier,0)},M.prototype.enterRule=function(e){e instanceof s&&e.enterBreakStatement(this)},M.prototype.exitRule=function(e){e instanceof s&&e.exitBreakStatement(this)},M.prototype.accept=function(e){return e instanceof a?e.visitBreakStatement(this):e.visitChildren(this)},g.BreakStatementContext=M,g.prototype.breakStatement=function(){var e=new M(this,this._ctx,this.state);this.enterRule(e,32,g.RULE_breakStatement);try{if(this.enterOuterAlt(e,1),this.state=267,this.match(g.Break),this.state=270,this._errHandler.sync(this),1===this._interp.adaptivePredict(this._input,18,this._ctx)){if(this.state=268,this.here(g.LineTerminator))throw new r.error.FailedPredicateException(this,"!this.here(ECMAScriptParser.LineTerminator)");this.state=269,this.match(g.Identifier)}this.state=272,this.eos()}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},$.prototype=Object.create(r.ParserRuleContext.prototype),$.prototype.constructor=$,$.prototype.Return=function(){return this.getToken(g.Return,0)},$.prototype.eos=function(){return this.getTypedRuleContext(Tt,0)},$.prototype.expressionSequence=function(){return this.getTypedRuleContext(ue,0)},$.prototype.enterRule=function(e){e instanceof s&&e.enterReturnStatement(this)},$.prototype.exitRule=function(e){e instanceof s&&e.exitReturnStatement(this)},$.prototype.accept=function(e){return e instanceof a?e.visitReturnStatement(this):e.visitChildren(this)},g.ReturnStatementContext=$,g.prototype.returnStatement=function(){var e=new $(this,this._ctx,this.state);this.enterRule(e,34,g.RULE_returnStatement);try{if(this.enterOuterAlt(e,1),this.state=274,this.match(g.Return),this.state=277,this._errHandler.sync(this),1===this._interp.adaptivePredict(this._input,19,this._ctx)){if(this.state=275,this.here(g.LineTerminator))throw new r.error.FailedPredicateException(this,"!this.here(ECMAScriptParser.LineTerminator)");this.state=276,this.expressionSequence()}this.state=279,this.eos()}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},k.prototype=Object.create(r.ParserRuleContext.prototype),k.prototype.constructor=k,k.prototype.With=function(){return this.getToken(g.With,0)},k.prototype.OpenParen=function(){return this.getToken(g.OpenParen,0)},k.prototype.expressionSequence=function(){return this.getTypedRuleContext(ue,0)},k.prototype.CloseParen=function(){return this.getToken(g.CloseParen,0)},k.prototype.statementOrBlock=function(){return this.getTypedRuleContext(f,0)},k.prototype.enterRule=function(e){e instanceof s&&e.enterWithStatement(this)},k.prototype.exitRule=function(e){e instanceof s&&e.exitWithStatement(this)},k.prototype.accept=function(e){return e instanceof a?e.visitWithStatement(this):e.visitChildren(this)},g.WithStatementContext=k,g.prototype.withStatement=function(){var e=new k(this,this._ctx,this.state);this.enterRule(e,36,g.RULE_withStatement);try{this.enterOuterAlt(e,1),this.state=281,this.match(g.With),this.state=282,this.match(g.OpenParen),this.state=283,this.expressionSequence(),this.state=284,this.match(g.CloseParen),this.state=285,this.statementOrBlock()}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},P.prototype=Object.create(r.ParserRuleContext.prototype),P.prototype.constructor=P,P.prototype.Switch=function(){return this.getToken(g.Switch,0)},P.prototype.OpenParen=function(){return this.getToken(g.OpenParen,0)},P.prototype.expressionSequence=function(){return this.getTypedRuleContext(ue,0)},P.prototype.CloseParen=function(){return this.getToken(g.CloseParen,0)},P.prototype.caseBlock=function(){return this.getTypedRuleContext(F,0)},P.prototype.enterRule=function(e){e instanceof s&&e.enterSwitchStatement(this)},P.prototype.exitRule=function(e){e instanceof s&&e.exitSwitchStatement(this)},P.prototype.accept=function(e){return e instanceof a?e.visitSwitchStatement(this):e.visitChildren(this)},g.SwitchStatementContext=P,g.prototype.switchStatement=function(){var e=new P(this,this._ctx,this.state);this.enterRule(e,38,g.RULE_switchStatement);try{this.enterOuterAlt(e,1),this.state=287,this.match(g.Switch),this.state=288,this.match(g.OpenParen),this.state=289,this.expressionSequence(),this.state=290,this.match(g.CloseParen),this.state=291,this.caseBlock()}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},F.prototype=Object.create(r.ParserRuleContext.prototype),F.prototype.constructor=F,F.prototype.OpenBrace=function(){return this.getToken(g.OpenBrace,0)},F.prototype.CloseBrace=function(){return this.getToken(g.CloseBrace,0)},F.prototype.caseClauses=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(U):this.getTypedRuleContext(U,e)},F.prototype.defaultClause=function(){return this.getTypedRuleContext(G,0)},F.prototype.enterRule=function(e){e instanceof s&&e.enterCaseBlock(this)},F.prototype.exitRule=function(e){e instanceof s&&e.exitCaseBlock(this)},F.prototype.accept=function(e){return e instanceof a?e.visitCaseBlock(this):e.visitChildren(this)},g.CaseBlockContext=F,g.prototype.caseBlock=function(){var e=new F(this,this._ctx,this.state);this.enterRule(e,40,g.RULE_caseBlock);try{this.enterOuterAlt(e,1),this.state=293,this.match(g.OpenBrace),this.state=295,this._errHandler.sync(this),this._input.LA(1)===g.Case&&(this.state=294,this.caseClauses()),this.state=301,this._errHandler.sync(this),this._input.LA(1)===g.Default&&(this.state=297,this.defaultClause(),this.state=299,this._errHandler.sync(this),this._input.LA(1)===g.Case&&(this.state=298,this.caseClauses())),this.state=303,this.match(g.CloseBrace)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},U.prototype=Object.create(r.ParserRuleContext.prototype),U.prototype.constructor=U,U.prototype.caseClause=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(q):this.getTypedRuleContext(q,e)},U.prototype.enterRule=function(e){e instanceof s&&e.enterCaseClauses(this)},U.prototype.exitRule=function(e){e instanceof s&&e.exitCaseClauses(this)},U.prototype.accept=function(e){return e instanceof a?e.visitCaseClauses(this):e.visitChildren(this)},g.CaseClausesContext=U,g.prototype.caseClauses=function(){var e=new U(this,this._ctx,this.state);this.enterRule(e,42,g.RULE_caseClauses);var t=0;try{this.enterOuterAlt(e,1),this.state=306,this._errHandler.sync(this),t=this._input.LA(1);do{this.state=305,this.caseClause(),this.state=308,this._errHandler.sync(this),t=this._input.LA(1)}while(t===g.Case)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},q.prototype=Object.create(r.ParserRuleContext.prototype),q.prototype.constructor=q,q.prototype.Case=function(){return this.getToken(g.Case,0)},q.prototype.expressionSequence=function(){return this.getTypedRuleContext(ue,0)},q.prototype.Colon=function(){return this.getToken(g.Colon,0)},q.prototype.statementList=function(){return this.getTypedRuleContext(S,0)},q.prototype.enterRule=function(e){e instanceof s&&e.enterCaseClause(this)},q.prototype.exitRule=function(e){e instanceof s&&e.exitCaseClause(this)},q.prototype.accept=function(e){return e instanceof a?e.visitCaseClause(this):e.visitChildren(this)},g.CaseClauseContext=q,g.prototype.caseClause=function(){var e=new q(this,this._ctx,this.state);this.enterRule(e,44,g.RULE_caseClause);var t=0;try{this.enterOuterAlt(e,1),this.state=310,this.match(g.Case),this.state=311,this.expressionSequence(),this.state=312,this.match(g.Colon),this.state=314,this._errHandler.sync(this),(0==(-32&(t=this._input.LA(1)))&&0!=(1<<t&(1<<g.RegularExpressionLiteral|1<<g.OpenBracket|1<<g.OpenParen|1<<g.OpenBrace|1<<g.SemiColon|1<<g.PlusPlus|1<<g.MinusMinus|1<<g.Plus|1<<g.Minus|1<<g.BitNot|1<<g.Not))||0==(t-51&-32)&&0!=(1<<t-51&(1<<g.NullLiteral-51|1<<g.UndefinedLiteral-51|1<<g.BooleanLiteral-51|1<<g.IntegerLiteral-51|1<<g.DecimalLiteral-51|1<<g.HexIntegerLiteral-51|1<<g.OctalIntegerLiteral-51|1<<g.Break-51|1<<g.Do-51|1<<g.Typeof-51|1<<g.New-51|1<<g.Var-51|1<<g.Return-51|1<<g.Void-51|1<<g.Continue-51|1<<g.For-51|1<<g.Switch-51|1<<g.While-51|1<<g.Debugger-51|1<<g.Function-51|1<<g.This-51|1<<g.With-51|1<<g.If-51|1<<g.Throw-51|1<<g.Delete-51))||0==(t-83&-32)&&0!=(1<<t-83&(1<<g.Try-83|1<<g.Identifier-83|1<<g.StringLiteral-83)))&&(this.state=313,this.statementList())}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},G.prototype=Object.create(r.ParserRuleContext.prototype),G.prototype.constructor=G,G.prototype.Default=function(){return this.getToken(g.Default,0)},G.prototype.Colon=function(){return this.getToken(g.Colon,0)},G.prototype.statementList=function(){return this.getTypedRuleContext(S,0)},G.prototype.enterRule=function(e){e instanceof s&&e.enterDefaultClause(this)},G.prototype.exitRule=function(e){e instanceof s&&e.exitDefaultClause(this)},G.prototype.accept=function(e){return e instanceof a?e.visitDefaultClause(this):e.visitChildren(this)},g.DefaultClauseContext=G,g.prototype.defaultClause=function(){var e=new G(this,this._ctx,this.state);this.enterRule(e,46,g.RULE_defaultClause);var t=0;try{this.enterOuterAlt(e,1),this.state=316,this.match(g.Default),this.state=317,this.match(g.Colon),this.state=319,this._errHandler.sync(this),(0==(-32&(t=this._input.LA(1)))&&0!=(1<<t&(1<<g.RegularExpressionLiteral|1<<g.OpenBracket|1<<g.OpenParen|1<<g.OpenBrace|1<<g.SemiColon|1<<g.PlusPlus|1<<g.MinusMinus|1<<g.Plus|1<<g.Minus|1<<g.BitNot|1<<g.Not))||0==(t-51&-32)&&0!=(1<<t-51&(1<<g.NullLiteral-51|1<<g.UndefinedLiteral-51|1<<g.BooleanLiteral-51|1<<g.IntegerLiteral-51|1<<g.DecimalLiteral-51|1<<g.HexIntegerLiteral-51|1<<g.OctalIntegerLiteral-51|1<<g.Break-51|1<<g.Do-51|1<<g.Typeof-51|1<<g.New-51|1<<g.Var-51|1<<g.Return-51|1<<g.Void-51|1<<g.Continue-51|1<<g.For-51|1<<g.Switch-51|1<<g.While-51|1<<g.Debugger-51|1<<g.Function-51|1<<g.This-51|1<<g.With-51|1<<g.If-51|1<<g.Throw-51|1<<g.Delete-51))||0==(t-83&-32)&&0!=(1<<t-83&(1<<g.Try-83|1<<g.Identifier-83|1<<g.StringLiteral-83)))&&(this.state=318,this.statementList())}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},H.prototype=Object.create(r.ParserRuleContext.prototype),H.prototype.constructor=H,H.prototype.Identifier=function(){return this.getToken(g.Identifier,0)},H.prototype.Colon=function(){return this.getToken(g.Colon,0)},H.prototype.statement=function(){return this.getTypedRuleContext(y,0)},H.prototype.enterRule=function(e){e instanceof s&&e.enterLabelledStatement(this)},H.prototype.exitRule=function(e){e instanceof s&&e.exitLabelledStatement(this)},H.prototype.accept=function(e){return e instanceof a?e.visitLabelledStatement(this):e.visitChildren(this)},g.LabelledStatementContext=H,g.prototype.labelledStatement=function(){var e=new H(this,this._ctx,this.state);this.enterRule(e,48,g.RULE_labelledStatement);try{this.enterOuterAlt(e,1),this.state=321,this.match(g.Identifier),this.state=322,this.match(g.Colon),this.state=323,this.statement()}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},V.prototype=Object.create(r.ParserRuleContext.prototype),V.prototype.constructor=V,V.prototype.Throw=function(){return this.getToken(g.Throw,0)},V.prototype.expressionSequence=function(){return this.getTypedRuleContext(ue,0)},V.prototype.eos=function(){return this.getTypedRuleContext(Tt,0)},V.prototype.enterRule=function(e){e instanceof s&&e.enterThrowStatement(this)},V.prototype.exitRule=function(e){e instanceof s&&e.exitThrowStatement(this)},V.prototype.accept=function(e){return e instanceof a?e.visitThrowStatement(this):e.visitChildren(this)},g.ThrowStatementContext=V,g.prototype.throwStatement=function(){var e=new V(this,this._ctx,this.state);this.enterRule(e,50,g.RULE_throwStatement);try{if(this.enterOuterAlt(e,1),this.state=325,this.match(g.Throw),this.state=326,this.here(g.LineTerminator))throw new r.error.FailedPredicateException(this,"!this.here(ECMAScriptParser.LineTerminator)");this.state=327,this.expressionSequence(),this.state=328,this.eos()}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},K.prototype=Object.create(r.ParserRuleContext.prototype),K.prototype.constructor=K,K.prototype.Try=function(){return this.getToken(g.Try,0)},K.prototype.block=function(){return this.getTypedRuleContext(b,0)},K.prototype.catchProduction=function(){return this.getTypedRuleContext(W,0)},K.prototype.finallyProduction=function(){return this.getTypedRuleContext(Y,0)},K.prototype.enterRule=function(e){e instanceof s&&e.enterTryStatement(this)},K.prototype.exitRule=function(e){e instanceof s&&e.exitTryStatement(this)},K.prototype.accept=function(e){return e instanceof a?e.visitTryStatement(this):e.visitChildren(this)},g.TryStatementContext=K,g.prototype.tryStatement=function(){var e=new K(this,this._ctx,this.state);this.enterRule(e,52,g.RULE_tryStatement);try{switch(this.state=343,this._errHandler.sync(this),this._interp.adaptivePredict(this._input,26,this._ctx)){case 1:this.enterOuterAlt(e,1),this.state=330,this.match(g.Try),this.state=331,this.block(),this.state=332,this.catchProduction();break;case 2:this.enterOuterAlt(e,2),this.state=334,this.match(g.Try),this.state=335,this.block(),this.state=336,this.finallyProduction();break;case 3:this.enterOuterAlt(e,3),this.state=338,this.match(g.Try),this.state=339,this.block(),this.state=340,this.catchProduction(),this.state=341,this.finallyProduction()}}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},W.prototype=Object.create(r.ParserRuleContext.prototype),W.prototype.constructor=W,W.prototype.Catch=function(){return this.getToken(g.Catch,0)},W.prototype.OpenParen=function(){return this.getToken(g.OpenParen,0)},W.prototype.Identifier=function(){return this.getToken(g.Identifier,0)},W.prototype.CloseParen=function(){return this.getToken(g.CloseParen,0)},W.prototype.block=function(){return this.getTypedRuleContext(b,0)},W.prototype.enterRule=function(e){e instanceof s&&e.enterCatchProduction(this)},W.prototype.exitRule=function(e){e instanceof s&&e.exitCatchProduction(this)},W.prototype.accept=function(e){return e instanceof a?e.visitCatchProduction(this):e.visitChildren(this)},g.CatchProductionContext=W,g.prototype.catchProduction=function(){var e=new W(this,this._ctx,this.state);this.enterRule(e,54,g.RULE_catchProduction);try{this.enterOuterAlt(e,1),this.state=345,this.match(g.Catch),this.state=346,this.match(g.OpenParen),this.state=347,this.match(g.Identifier),this.state=348,this.match(g.CloseParen),this.state=349,this.block()}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},Y.prototype=Object.create(r.ParserRuleContext.prototype),Y.prototype.constructor=Y,Y.prototype.Finally=function(){return this.getToken(g.Finally,0)},Y.prototype.block=function(){return this.getTypedRuleContext(b,0)},Y.prototype.enterRule=function(e){e instanceof s&&e.enterFinallyProduction(this)},Y.prototype.exitRule=function(e){e instanceof s&&e.exitFinallyProduction(this)},Y.prototype.accept=function(e){return e instanceof a?e.visitFinallyProduction(this):e.visitChildren(this)},g.FinallyProductionContext=Y,g.prototype.finallyProduction=function(){var e=new Y(this,this._ctx,this.state);this.enterRule(e,56,g.RULE_finallyProduction);try{this.enterOuterAlt(e,1),this.state=351,this.match(g.Finally),this.state=352,this.block()}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},z.prototype=Object.create(r.ParserRuleContext.prototype),z.prototype.constructor=z,z.prototype.Debugger=function(){return this.getToken(g.Debugger,0)},z.prototype.eos=function(){return this.getTypedRuleContext(Tt,0)},z.prototype.enterRule=function(e){e instanceof s&&e.enterDebuggerStatement(this)},z.prototype.exitRule=function(e){e instanceof s&&e.exitDebuggerStatement(this)},z.prototype.accept=function(e){return e instanceof a?e.visitDebuggerStatement(this):e.visitChildren(this)},g.DebuggerStatementContext=z,g.prototype.debuggerStatement=function(){var e=new z(this,this._ctx,this.state);this.enterRule(e,58,g.RULE_debuggerStatement);try{this.enterOuterAlt(e,1),this.state=354,this.match(g.Debugger),this.state=355,this.eos()}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},Z.prototype=Object.create(r.ParserRuleContext.prototype),Z.prototype.constructor=Z,Z.prototype.Function=function(){return this.getToken(g.Function,0)},Z.prototype.Identifier=function(){return this.getToken(g.Identifier,0)},Z.prototype.OpenParen=function(){return this.getToken(g.OpenParen,0)},Z.prototype.CloseParen=function(){return this.getToken(g.CloseParen,0)},Z.prototype.OpenBrace=function(){return this.getToken(g.OpenBrace,0)},Z.prototype.functionBody=function(){return this.getTypedRuleContext(J,0)},Z.prototype.CloseBrace=function(){return this.getToken(g.CloseBrace,0)},Z.prototype.formalParameterList=function(){return this.getTypedRuleContext(X,0)},Z.prototype.enterRule=function(e){e instanceof s&&e.enterFunctionDeclaration(this)},Z.prototype.exitRule=function(e){e instanceof s&&e.exitFunctionDeclaration(this)},Z.prototype.accept=function(e){return e instanceof a?e.visitFunctionDeclaration(this):e.visitChildren(this)},g.FunctionDeclarationContext=Z,g.prototype.functionDeclaration=function(){var e=new Z(this,this._ctx,this.state);this.enterRule(e,60,g.RULE_functionDeclaration);try{this.enterOuterAlt(e,1),this.state=357,this.match(g.Function),this.state=358,this.match(g.Identifier),this.state=359,this.match(g.OpenParen),this.state=361,this._errHandler.sync(this),this._input.LA(1)===g.Identifier&&(this.state=360,this.formalParameterList()),this.state=363,this.match(g.CloseParen),this.state=364,this.match(g.OpenBrace),this.state=365,this.functionBody(),this.state=366,this.match(g.CloseBrace)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},X.prototype=Object.create(r.ParserRuleContext.prototype),X.prototype.constructor=X,X.prototype.Identifier=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.Identifier):this.getToken(g.Identifier,e)},X.prototype.Comma=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.Comma):this.getToken(g.Comma,e)},X.prototype.enterRule=function(e){e instanceof s&&e.enterFormalParameterList(this)},X.prototype.exitRule=function(e){e instanceof s&&e.exitFormalParameterList(this)},X.prototype.accept=function(e){return e instanceof a?e.visitFormalParameterList(this):e.visitChildren(this)},g.FormalParameterListContext=X,g.prototype.formalParameterList=function(){var e=new X(this,this._ctx,this.state);this.enterRule(e,62,g.RULE_formalParameterList);var t=0;try{for(this.enterOuterAlt(e,1),this.state=368,this.match(g.Identifier),this.state=373,this._errHandler.sync(this),t=this._input.LA(1);t===g.Comma;)this.state=369,this.match(g.Comma),this.state=370,this.match(g.Identifier),this.state=375,this._errHandler.sync(this),t=this._input.LA(1)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},J.prototype=Object.create(r.ParserRuleContext.prototype),J.prototype.constructor=J,J.prototype.sourceElements=function(){return this.getTypedRuleContext(h,0)},J.prototype.enterRule=function(e){e instanceof s&&e.enterFunctionBody(this)},J.prototype.exitRule=function(e){e instanceof s&&e.exitFunctionBody(this)},J.prototype.accept=function(e){return e instanceof a?e.visitFunctionBody(this):e.visitChildren(this)},g.FunctionBodyContext=J,g.prototype.functionBody=function(){var e=new J(this,this._ctx,this.state);this.enterRule(e,64,g.RULE_functionBody);var t=0;try{this.enterOuterAlt(e,1),this.state=377,this._errHandler.sync(this),(0==(-32&(t=this._input.LA(1)))&&0!=(1<<t&(1<<g.RegularExpressionLiteral|1<<g.OpenBracket|1<<g.OpenParen|1<<g.OpenBrace|1<<g.SemiColon|1<<g.PlusPlus|1<<g.MinusMinus|1<<g.Plus|1<<g.Minus|1<<g.BitNot|1<<g.Not))||0==(t-51&-32)&&0!=(1<<t-51&(1<<g.NullLiteral-51|1<<g.UndefinedLiteral-51|1<<g.BooleanLiteral-51|1<<g.IntegerLiteral-51|1<<g.DecimalLiteral-51|1<<g.HexIntegerLiteral-51|1<<g.OctalIntegerLiteral-51|1<<g.Break-51|1<<g.Do-51|1<<g.Typeof-51|1<<g.New-51|1<<g.Var-51|1<<g.Return-51|1<<g.Void-51|1<<g.Continue-51|1<<g.For-51|1<<g.Switch-51|1<<g.While-51|1<<g.Debugger-51|1<<g.Function-51|1<<g.This-51|1<<g.With-51|1<<g.If-51|1<<g.Throw-51|1<<g.Delete-51))||0==(t-83&-32)&&0!=(1<<t-83&(1<<g.Try-83|1<<g.Identifier-83|1<<g.StringLiteral-83)))&&(this.state=376,this.sourceElements())}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},Q.prototype=Object.create(r.ParserRuleContext.prototype),Q.prototype.constructor=Q,Q.prototype.OpenBracket=function(){return this.getToken(g.OpenBracket,0)},Q.prototype.CloseBracket=function(){return this.getToken(g.CloseBracket,0)},Q.prototype.elementList=function(){return this.getTypedRuleContext(ee,0)},Q.prototype.Comma=function(){return this.getToken(g.Comma,0)},Q.prototype.enterRule=function(e){e instanceof s&&e.enterArrayLiteral(this)},Q.prototype.exitRule=function(e){e instanceof s&&e.exitArrayLiteral(this)},Q.prototype.accept=function(e){return e instanceof a?e.visitArrayLiteral(this):e.visitChildren(this)},g.ArrayLiteralContext=Q,g.prototype.arrayLiteral=function(){var e=new Q(this,this._ctx,this.state);this.enterRule(e,66,g.RULE_arrayLiteral);try{switch(this.state=388,this._errHandler.sync(this),this._interp.adaptivePredict(this._input,31,this._ctx)){case 1:this.enterOuterAlt(e,1),this.state=379,this.match(g.OpenBracket),this.state=380,this.match(g.CloseBracket);break;case 2:this.enterOuterAlt(e,2),this.state=381,this.match(g.OpenBracket),this.state=382,this.elementList(),this.state=384,this._errHandler.sync(this),this._input.LA(1)===g.Comma&&(this.state=383,this.match(g.Comma)),this.state=386,this.match(g.CloseBracket)}}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},ee.prototype=Object.create(r.ParserRuleContext.prototype),ee.prototype.constructor=ee,ee.prototype.elision=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(te):this.getTypedRuleContext(te,e)},ee.prototype.singleExpression=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(ge):this.getTypedRuleContext(ge,e)},ee.prototype.Comma=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.Comma):this.getToken(g.Comma,e)},ee.prototype.enterRule=function(e){e instanceof s&&e.enterElementList(this)},ee.prototype.exitRule=function(e){e instanceof s&&e.exitElementList(this)},ee.prototype.accept=function(e){return e instanceof a?e.visitElementList(this):e.visitChildren(this)},g.ElementListContext=ee,g.prototype.elementList=function(){var e=new ee(this,this._ctx,this.state);this.enterRule(e,68,g.RULE_elementList);var t=0;try{switch(this.state=418,this._errHandler.sync(this),this._interp.adaptivePredict(this._input,37,this._ctx)){case 1:this.enterOuterAlt(e,1),this.state=393,this._errHandler.sync(this);for(var n=this._interp.adaptivePredict(this._input,32,this._ctx);2!=n&&n!=r.atn.ATN.INVALID_ALT_NUMBER;)1===n&&(this.state=390,this.elision()),this.state=395,this._errHandler.sync(this),n=this._interp.adaptivePredict(this._input,32,this._ctx);break;case 2:for(this.enterOuterAlt(e,2),this.state=399,this._errHandler.sync(this),t=this._input.LA(1);t===g.Comma;)this.state=396,this.elision(),this.state=401,this._errHandler.sync(this),t=this._input.LA(1);for(this.state=402,this.singleExpression(0),this.state=415,this._errHandler.sync(this),n=this._interp.adaptivePredict(this._input,36,this._ctx);2!=n&&n!=r.atn.ATN.INVALID_ALT_NUMBER;){if(1===n){for(this.state=403,this.match(g.Comma),this.state=407,this._errHandler.sync(this),n=this._interp.adaptivePredict(this._input,34,this._ctx);2!=n&&n!=r.atn.ATN.INVALID_ALT_NUMBER;)1===n&&(this.state=404,this.elision()),this.state=409,this._errHandler.sync(this),n=this._interp.adaptivePredict(this._input,34,this._ctx);this.state=411,this._errHandler.sync(this),(0==(-32&(t=this._input.LA(1)))&&0!=(1<<t&(1<<g.RegularExpressionLiteral|1<<g.OpenBracket|1<<g.OpenParen|1<<g.OpenBrace|1<<g.PlusPlus|1<<g.MinusMinus|1<<g.Plus|1<<g.Minus|1<<g.BitNot|1<<g.Not))||0==(t-51&-32)&&0!=(1<<t-51&(1<<g.NullLiteral-51|1<<g.UndefinedLiteral-51|1<<g.BooleanLiteral-51|1<<g.IntegerLiteral-51|1<<g.DecimalLiteral-51|1<<g.HexIntegerLiteral-51|1<<g.OctalIntegerLiteral-51|1<<g.Typeof-51|1<<g.New-51|1<<g.Void-51|1<<g.Function-51|1<<g.This-51|1<<g.Delete-51))||t===g.Identifier||t===g.StringLiteral)&&(this.state=410,this.singleExpression(0))}this.state=417,this._errHandler.sync(this),n=this._interp.adaptivePredict(this._input,36,this._ctx)}}}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},te.prototype=Object.create(r.ParserRuleContext.prototype),te.prototype.constructor=te,te.prototype.Comma=function(){return this.getToken(g.Comma,0)},te.prototype.enterRule=function(e){e instanceof s&&e.enterElision(this)},te.prototype.exitRule=function(e){e instanceof s&&e.exitElision(this)},te.prototype.accept=function(e){return e instanceof a?e.visitElision(this):e.visitChildren(this)},g.ElisionContext=te,g.prototype.elision=function(){var e=new te(this,this._ctx,this.state);this.enterRule(e,70,g.RULE_elision);try{this.enterOuterAlt(e,1),this.state=420,this.match(g.Comma)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},ne.prototype=Object.create(r.ParserRuleContext.prototype),ne.prototype.constructor=ne,ne.prototype.OpenBrace=function(){return this.getToken(g.OpenBrace,0)},ne.prototype.CloseBrace=function(){return this.getToken(g.CloseBrace,0)},ne.prototype.propertyNameAndValueList=function(){return this.getTypedRuleContext(re,0)},ne.prototype.Comma=function(){return this.getToken(g.Comma,0)},ne.prototype.enterRule=function(e){e instanceof s&&e.enterObjectLiteral(this)},ne.prototype.exitRule=function(e){e instanceof s&&e.exitObjectLiteral(this)},ne.prototype.accept=function(e){return e instanceof a?e.visitObjectLiteral(this):e.visitChildren(this)},g.ObjectLiteralContext=ne,g.prototype.objectLiteral=function(){var e=new ne(this,this._ctx,this.state);this.enterRule(e,72,g.RULE_objectLiteral);try{switch(this.state=431,this._errHandler.sync(this),this._interp.adaptivePredict(this._input,39,this._ctx)){case 1:this.enterOuterAlt(e,1),this.state=422,this.match(g.OpenBrace),this.state=423,this.match(g.CloseBrace);break;case 2:this.enterOuterAlt(e,2),this.state=424,this.match(g.OpenBrace),this.state=425,this.propertyNameAndValueList(),this.state=427,this._errHandler.sync(this),this._input.LA(1)===g.Comma&&(this.state=426,this.match(g.Comma)),this.state=429,this.match(g.CloseBrace)}}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},re.prototype=Object.create(r.ParserRuleContext.prototype),re.prototype.constructor=re,re.prototype.propertyAssignment=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(se):this.getTypedRuleContext(se,e)},re.prototype.Comma=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.Comma):this.getToken(g.Comma,e)},re.prototype.enterRule=function(e){e instanceof s&&e.enterPropertyNameAndValueList(this)},re.prototype.exitRule=function(e){e instanceof s&&e.exitPropertyNameAndValueList(this)},re.prototype.accept=function(e){return e instanceof a?e.visitPropertyNameAndValueList(this):e.visitChildren(this)},g.PropertyNameAndValueListContext=re,g.prototype.propertyNameAndValueList=function(){var e=new re(this,this._ctx,this.state);this.enterRule(e,74,g.RULE_propertyNameAndValueList);try{this.enterOuterAlt(e,1),this.state=433,this.propertyAssignment(),this.state=438,this._errHandler.sync(this);for(var t=this._interp.adaptivePredict(this._input,40,this._ctx);2!=t&&t!=r.atn.ATN.INVALID_ALT_NUMBER;)1===t&&(this.state=434,this.match(g.Comma),this.state=435,this.propertyAssignment()),this.state=440,this._errHandler.sync(this),t=this._interp.adaptivePredict(this._input,40,this._ctx)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},se.prototype=Object.create(r.ParserRuleContext.prototype),se.prototype.constructor=se,se.prototype.copyFrom=function(e){r.ParserRuleContext.prototype.copyFrom.call(this,e)},ae.prototype=Object.create(se.prototype),ae.prototype.constructor=ae,g.PropertySetterContext=ae,ae.prototype.setter=function(){return this.getTypedRuleContext(ht,0)},ae.prototype.OpenParen=function(){return this.getToken(g.OpenParen,0)},ae.prototype.propertySetParameterList=function(){return this.getTypedRuleContext(pe,0)},ae.prototype.CloseParen=function(){return this.getToken(g.CloseParen,0)},ae.prototype.OpenBrace=function(){return this.getToken(g.OpenBrace,0)},ae.prototype.functionBody=function(){return this.getTypedRuleContext(J,0)},ae.prototype.CloseBrace=function(){return this.getToken(g.CloseBrace,0)},ae.prototype.enterRule=function(e){e instanceof s&&e.enterPropertySetter(this)},ae.prototype.exitRule=function(e){e instanceof s&&e.exitPropertySetter(this)},ae.prototype.accept=function(e){return e instanceof a?e.visitPropertySetter(this):e.visitChildren(this)},oe.prototype=Object.create(se.prototype),oe.prototype.constructor=oe,g.PropertyAssignmentExpressionContext=oe,oe.prototype.propertyName=function(){return this.getTypedRuleContext(le,0)},oe.prototype.Colon=function(){return this.getToken(g.Colon,0)},oe.prototype.singleExpression=function(){return this.getTypedRuleContext(ge,0)},oe.prototype.enterRule=function(e){e instanceof s&&e.enterPropertyAssignmentExpression(this)},oe.prototype.exitRule=function(e){e instanceof s&&e.exitPropertyAssignmentExpression(this)},oe.prototype.accept=function(e){return e instanceof a?e.visitPropertyAssignmentExpression(this):e.visitChildren(this)},ie.prototype=Object.create(se.prototype),ie.prototype.constructor=ie,g.PropertyGetterContext=ie,ie.prototype.getter=function(){return this.getTypedRuleContext(dt,0)},ie.prototype.OpenParen=function(){return this.getToken(g.OpenParen,0)},ie.prototype.CloseParen=function(){return this.getToken(g.CloseParen,0)},ie.prototype.OpenBrace=function(){return this.getToken(g.OpenBrace,0)},ie.prototype.functionBody=function(){return this.getTypedRuleContext(J,0)},ie.prototype.CloseBrace=function(){return this.getToken(g.CloseBrace,0)},ie.prototype.enterRule=function(e){e instanceof s&&e.enterPropertyGetter(this)},ie.prototype.exitRule=function(e){e instanceof s&&e.exitPropertyGetter(this)},ie.prototype.accept=function(e){return e instanceof a?e.visitPropertyGetter(this):e.visitChildren(this)},g.PropertyAssignmentContext=se,g.prototype.propertyAssignment=function(){var e=new se(this,this._ctx,this.state);this.enterRule(e,76,g.RULE_propertyAssignment);try{switch(this.state=460,this._errHandler.sync(this),this._interp.adaptivePredict(this._input,41,this._ctx)){case 1:e=new oe(this,e),this.enterOuterAlt(e,1),this.state=441,this.propertyName(),this.state=442,this.match(g.Colon),this.state=443,this.singleExpression(0);break;case 2:e=new ie(this,e),this.enterOuterAlt(e,2),this.state=445,this.getter(),this.state=446,this.match(g.OpenParen),this.state=447,this.match(g.CloseParen),this.state=448,this.match(g.OpenBrace),this.state=449,this.functionBody(),this.state=450,this.match(g.CloseBrace);break;case 3:e=new ae(this,e),this.enterOuterAlt(e,3),this.state=452,this.setter(),this.state=453,this.match(g.OpenParen),this.state=454,this.propertySetParameterList(),this.state=455,this.match(g.CloseParen),this.state=456,this.match(g.OpenBrace),this.state=457,this.functionBody(),this.state=458,this.match(g.CloseBrace)}}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},le.prototype=Object.create(r.ParserRuleContext.prototype),le.prototype.constructor=le,le.prototype.identifierName=function(){return this.getTypedRuleContext(mt,0)},le.prototype.StringLiteral=function(){return this.getToken(g.StringLiteral,0)},le.prototype.numericLiteral=function(){return this.getTypedRuleContext(at,0)},le.prototype.enterRule=function(e){e instanceof s&&e.enterPropertyName(this)},le.prototype.exitRule=function(e){e instanceof s&&e.exitPropertyName(this)},le.prototype.accept=function(e){return e instanceof a?e.visitPropertyName(this):e.visitChildren(this)},g.PropertyNameContext=le,g.prototype.propertyName=function(){var e=new le(this,this._ctx,this.state);this.enterRule(e,78,g.RULE_propertyName);try{switch(this.state=465,this._errHandler.sync(this),this._input.LA(1)){case g.NullLiteral:case g.BooleanLiteral:case g.Break:case g.Do:case g.Instanceof:case g.Typeof:case g.Case:case g.Else:case g.New:case g.Var:case g.Catch:case g.Finally:case g.Return:case g.Void:case g.Continue:case g.For:case g.Switch:case g.While:case g.Debugger:case g.Function:case g.This:case g.With:case g.Default:case g.If:case g.Throw:case g.Delete:case g.In:case g.Try:case g.Class:case g.Enum:case g.Extends:case g.Super:case g.Const:case g.Export:case g.Import:case g.Implements:case g.Let:case g.Private:case g.Public:case g.Interface:case g.Package:case g.Protected:case g.Static:case g.Yield:case g.Identifier:this.enterOuterAlt(e,1),this.state=462,this.identifierName();break;case g.StringLiteral:this.enterOuterAlt(e,2),this.state=463,this.match(g.StringLiteral);break;case g.IntegerLiteral:case g.DecimalLiteral:case g.HexIntegerLiteral:case g.OctalIntegerLiteral:this.enterOuterAlt(e,3),this.state=464,this.numericLiteral();break;default:throw new r.error.NoViableAltException(this)}}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},pe.prototype=Object.create(r.ParserRuleContext.prototype),pe.prototype.constructor=pe,pe.prototype.Identifier=function(){return this.getToken(g.Identifier,0)},pe.prototype.enterRule=function(e){e instanceof s&&e.enterPropertySetParameterList(this)},pe.prototype.exitRule=function(e){e instanceof s&&e.exitPropertySetParameterList(this)},pe.prototype.accept=function(e){return e instanceof a?e.visitPropertySetParameterList(this):e.visitChildren(this)},g.PropertySetParameterListContext=pe,g.prototype.propertySetParameterList=function(){var e=new pe(this,this._ctx,this.state);this.enterRule(e,80,g.RULE_propertySetParameterList);try{this.enterOuterAlt(e,1),this.state=467,this.match(g.Identifier)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},me.prototype=Object.create(r.ParserRuleContext.prototype),me.prototype.constructor=me,me.prototype.OpenParen=function(){return this.getToken(g.OpenParen,0)},me.prototype.CloseParen=function(){return this.getToken(g.CloseParen,0)},me.prototype.argumentList=function(){return this.getTypedRuleContext(ce,0)},me.prototype.Comma=function(){return this.getToken(g.Comma,0)},me.prototype.enterRule=function(e){e instanceof s&&e.enterArguments(this)},me.prototype.exitRule=function(e){e instanceof s&&e.exitArguments(this)},me.prototype.accept=function(e){return e instanceof a?e.visitArguments(this):e.visitChildren(this)},g.ArgumentsContext=me,g.prototype.arguments=function(){var e=new me(this,this._ctx,this.state);this.enterRule(e,82,g.RULE_arguments);var t=0;try{this.enterOuterAlt(e,1),this.state=469,this.match(g.OpenParen),this.state=471,this._errHandler.sync(this),(0==(-32&(t=this._input.LA(1)))&&0!=(1<<t&(1<<g.RegularExpressionLiteral|1<<g.OpenBracket|1<<g.OpenParen|1<<g.OpenBrace|1<<g.PlusPlus|1<<g.MinusMinus|1<<g.Plus|1<<g.Minus|1<<g.BitNot|1<<g.Not))||0==(t-51&-32)&&0!=(1<<t-51&(1<<g.NullLiteral-51|1<<g.UndefinedLiteral-51|1<<g.BooleanLiteral-51|1<<g.IntegerLiteral-51|1<<g.DecimalLiteral-51|1<<g.HexIntegerLiteral-51|1<<g.OctalIntegerLiteral-51|1<<g.Typeof-51|1<<g.New-51|1<<g.Void-51|1<<g.Function-51|1<<g.This-51|1<<g.Delete-51))||t===g.Identifier||t===g.StringLiteral)&&(this.state=470,this.argumentList()),this.state=474,this._errHandler.sync(this),(t=this._input.LA(1))===g.Comma&&(this.state=473,this.match(g.Comma)),this.state=476,this.match(g.CloseParen)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},ce.prototype=Object.create(r.ParserRuleContext.prototype),ce.prototype.constructor=ce,ce.prototype.singleExpression=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(ge):this.getTypedRuleContext(ge,e)},ce.prototype.Comma=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.Comma):this.getToken(g.Comma,e)},ce.prototype.enterRule=function(e){e instanceof s&&e.enterArgumentList(this)},ce.prototype.exitRule=function(e){e instanceof s&&e.exitArgumentList(this)},ce.prototype.accept=function(e){return e instanceof a?e.visitArgumentList(this):e.visitChildren(this)},g.ArgumentListContext=ce,g.prototype.argumentList=function(){var e=new ce(this,this._ctx,this.state);this.enterRule(e,84,g.RULE_argumentList);try{this.enterOuterAlt(e,1),this.state=478,this.singleExpression(0),this.state=483,this._errHandler.sync(this);for(var t=this._interp.adaptivePredict(this._input,45,this._ctx);2!=t&&t!=r.atn.ATN.INVALID_ALT_NUMBER;)1===t&&(this.state=479,this.match(g.Comma),this.state=480,this.singleExpression(0)),this.state=485,this._errHandler.sync(this),t=this._interp.adaptivePredict(this._input,45,this._ctx)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},ue.prototype=Object.create(r.ParserRuleContext.prototype),ue.prototype.constructor=ue,ue.prototype.singleExpression=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(ge):this.getTypedRuleContext(ge,e)},ue.prototype.Comma=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.Comma):this.getToken(g.Comma,e)},ue.prototype.enterRule=function(e){e instanceof s&&e.enterExpressionSequence(this)},ue.prototype.exitRule=function(e){e instanceof s&&e.exitExpressionSequence(this)},ue.prototype.accept=function(e){return e instanceof a?e.visitExpressionSequence(this):e.visitChildren(this)},g.ExpressionSequenceContext=ue,g.prototype.expressionSequence=function(){var e=new ue(this,this._ctx,this.state);this.enterRule(e,86,g.RULE_expressionSequence);try{this.enterOuterAlt(e,1),this.state=486,this.singleExpression(0),this.state=491,this._errHandler.sync(this);for(var t=this._interp.adaptivePredict(this._input,46,this._ctx);2!=t&&t!=r.atn.ATN.INVALID_ALT_NUMBER;)1===t&&(this.state=487,this.match(g.Comma),this.state=488,this.singleExpression(0)),this.state=493,this._errHandler.sync(this),t=this._interp.adaptivePredict(this._input,46,this._ctx)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},ge.prototype=Object.create(r.ParserRuleContext.prototype),ge.prototype.constructor=ge,ge.prototype.copyFrom=function(e){r.ParserRuleContext.prototype.copyFrom.call(this,e)},de.prototype=Object.create(ge.prototype),de.prototype.constructor=de,g.TernaryExpressionContext=de,de.prototype.singleExpression=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(ge):this.getTypedRuleContext(ge,e)},de.prototype.QuestionMark=function(){return this.getToken(g.QuestionMark,0)},de.prototype.Colon=function(){return this.getToken(g.Colon,0)},de.prototype.enterRule=function(e){e instanceof s&&e.enterTernaryExpression(this)},de.prototype.exitRule=function(e){e instanceof s&&e.exitTernaryExpression(this)},de.prototype.accept=function(e){return e instanceof a?e.visitTernaryExpression(this):e.visitChildren(this)},he.prototype=Object.create(ge.prototype),he.prototype.constructor=he,g.LogicalAndExpressionContext=he,he.prototype.singleExpression=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(ge):this.getTypedRuleContext(ge,e)},he.prototype.And=function(){return this.getToken(g.And,0)},he.prototype.enterRule=function(e){e instanceof s&&e.enterLogicalAndExpression(this)},he.prototype.exitRule=function(e){e instanceof s&&e.exitLogicalAndExpression(this)},he.prototype.accept=function(e){return e instanceof a?e.visitLogicalAndExpression(this):e.visitChildren(this)},Te.prototype=Object.create(ge.prototype),Te.prototype.constructor=Te,g.FuncDefExpressionContext=Te,Te.prototype.Function=function(){return this.getToken(g.Function,0)},Te.prototype.OpenParen=function(){return this.getToken(g.OpenParen,0)},Te.prototype.CloseParen=function(){return this.getToken(g.CloseParen,0)},Te.prototype.OpenBrace=function(){return this.getToken(g.OpenBrace,0)},Te.prototype.functionBody=function(){return this.getTypedRuleContext(J,0)},Te.prototype.CloseBrace=function(){return this.getToken(g.CloseBrace,0)},Te.prototype.Identifier=function(){return this.getToken(g.Identifier,0)},Te.prototype.formalParameterList=function(){return this.getTypedRuleContext(X,0)},Te.prototype.enterRule=function(e){e instanceof s&&e.enterFuncDefExpression(this)},Te.prototype.exitRule=function(e){e instanceof s&&e.exitFuncDefExpression(this)},Te.prototype.accept=function(e){return e instanceof a?e.visitFuncDefExpression(this):e.visitChildren(this)},ye.prototype=Object.create(ge.prototype),ye.prototype.constructor=ye,g.PreIncrementExpressionContext=ye,ye.prototype.PlusPlus=function(){return this.getToken(g.PlusPlus,0)},ye.prototype.singleExpression=function(){return this.getTypedRuleContext(ge,0)},ye.prototype.enterRule=function(e){e instanceof s&&e.enterPreIncrementExpression(this)},ye.prototype.exitRule=function(e){e instanceof s&&e.exitPreIncrementExpression(this)},ye.prototype.accept=function(e){return e instanceof a?e.visitPreIncrementExpression(this):e.visitChildren(this)},fe.prototype=Object.create(ge.prototype),fe.prototype.constructor=fe,g.ObjectLiteralExpressionContext=fe,fe.prototype.objectLiteral=function(){return this.getTypedRuleContext(ne,0)},fe.prototype.enterRule=function(e){e instanceof s&&e.enterObjectLiteralExpression(this)},fe.prototype.exitRule=function(e){e instanceof s&&e.exitObjectLiteralExpression(this)},fe.prototype.accept=function(e){return e instanceof a?e.visitObjectLiteralExpression(this):e.visitChildren(this)},be.prototype=Object.create(ge.prototype),be.prototype.constructor=be,g.InExpressionContext=be,be.prototype.singleExpression=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(ge):this.getTypedRuleContext(ge,e)},be.prototype.In=function(){return this.getToken(g.In,0)},be.prototype.enterRule=function(e){e instanceof s&&e.enterInExpression(this)},be.prototype.exitRule=function(e){e instanceof s&&e.exitInExpression(this)},be.prototype.accept=function(e){return e instanceof a?e.visitInExpression(this):e.visitChildren(this)},Se.prototype=Object.create(ge.prototype),Se.prototype.constructor=Se,g.LogicalOrExpressionContext=Se,Se.prototype.singleExpression=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(ge):this.getTypedRuleContext(ge,e)},Se.prototype.Or=function(){return this.getToken(g.Or,0)},Se.prototype.enterRule=function(e){e instanceof s&&e.enterLogicalOrExpression(this)},Se.prototype.exitRule=function(e){e instanceof s&&e.exitLogicalOrExpression(this)},Se.prototype.accept=function(e){return e instanceof a?e.visitLogicalOrExpression(this):e.visitChildren(this)},Ae.prototype=Object.create(ge.prototype),Ae.prototype.constructor=Ae,g.NotExpressionContext=Ae,Ae.prototype.Not=function(){return this.getToken(g.Not,0)},Ae.prototype.singleExpression=function(){return this.getTypedRuleContext(ge,0)},Ae.prototype.enterRule=function(e){e instanceof s&&e.enterNotExpression(this)},Ae.prototype.exitRule=function(e){e instanceof s&&e.exitNotExpression(this)},Ae.prototype.accept=function(e){return e instanceof a?e.visitNotExpression(this):e.visitChildren(this)},Ee.prototype=Object.create(ge.prototype),Ee.prototype.constructor=Ee,g.PreDecreaseExpressionContext=Ee,Ee.prototype.MinusMinus=function(){return this.getToken(g.MinusMinus,0)},Ee.prototype.singleExpression=function(){return this.getTypedRuleContext(ge,0)},Ee.prototype.enterRule=function(e){e instanceof s&&e.enterPreDecreaseExpression(this)},Ee.prototype.exitRule=function(e){e instanceof s&&e.exitPreDecreaseExpression(this)},Ee.prototype.accept=function(e){return e instanceof a?e.visitPreDecreaseExpression(this):e.visitChildren(this)},_e.prototype=Object.create(ge.prototype),_e.prototype.constructor=_e,g.ThisExpressionContext=_e,_e.prototype.This=function(){return this.getToken(g.This,0)},_e.prototype.enterRule=function(e){e instanceof s&&e.enterThisExpression(this)},_e.prototype.exitRule=function(e){e instanceof s&&e.exitThisExpression(this)},_e.prototype.accept=function(e){return e instanceof a?e.visitThisExpression(this):e.visitChildren(this)},xe.prototype=Object.create(ge.prototype);xe.prototype.constructor=xe,g.UnaryMinusExpressionContext=xe,xe.prototype.Minus=function(){return this.getToken(g.Minus,0)},xe.prototype.singleExpression=function(){return this.getTypedRuleContext(ge,0)},xe.prototype.enterRule=function(e){e instanceof s&&e.enterUnaryMinusExpression(this)},xe.prototype.exitRule=function(e){e instanceof s&&e.exitUnaryMinusExpression(this)},xe.prototype.accept=function(e){return e instanceof a?e.visitUnaryMinusExpression(this):e.visitChildren(this)},Ie.prototype=Object.create(ge.prototype),Ie.prototype.constructor=Ie,g.PostDecreaseExpressionContext=Ie,Ie.prototype.singleExpression=function(){return this.getTypedRuleContext(ge,0)},Ie.prototype.MinusMinus=function(){return this.getToken(g.MinusMinus,0)},Ie.prototype.enterRule=function(e){e instanceof s&&e.enterPostDecreaseExpression(this)},Ie.prototype.exitRule=function(e){e instanceof s&&e.exitPostDecreaseExpression(this)},Ie.prototype.accept=function(e){return e instanceof a?e.visitPostDecreaseExpression(this):e.visitChildren(this)},Le.prototype=Object.create(ge.prototype),Le.prototype.constructor=Le,g.AssignmentExpressionContext=Le,Le.prototype.singleExpression=function(){return this.getTypedRuleContext(ge,0)},Le.prototype.Assign=function(){return this.getToken(g.Assign,0)},Le.prototype.expressionSequence=function(){return this.getTypedRuleContext(ue,0)},Le.prototype.enterRule=function(e){e instanceof s&&e.enterAssignmentExpression(this)},Le.prototype.exitRule=function(e){e instanceof s&&e.exitAssignmentExpression(this)},Le.prototype.accept=function(e){return e instanceof a?e.visitAssignmentExpression(this):e.visitChildren(this)},ve.prototype=Object.create(ge.prototype),ve.prototype.constructor=ve,g.TypeofExpressionContext=ve,ve.prototype.Typeof=function(){return this.getToken(g.Typeof,0)},ve.prototype.singleExpression=function(){return this.getTypedRuleContext(ge,0)},ve.prototype.enterRule=function(e){e instanceof s&&e.enterTypeofExpression(this)},ve.prototype.exitRule=function(e){e instanceof s&&e.exitTypeofExpression(this)},ve.prototype.accept=function(e){return e instanceof a?e.visitTypeofExpression(this):e.visitChildren(this)},Ce.prototype=Object.create(ge.prototype),Ce.prototype.constructor=Ce,g.InstanceofExpressionContext=Ce,Ce.prototype.singleExpression=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(ge):this.getTypedRuleContext(ge,e)},Ce.prototype.Instanceof=function(){return this.getToken(g.Instanceof,0)},Ce.prototype.enterRule=function(e){e instanceof s&&e.enterInstanceofExpression(this)},Ce.prototype.exitRule=function(e){e instanceof s&&e.exitInstanceofExpression(this)},Ce.prototype.accept=function(e){return e instanceof a?e.visitInstanceofExpression(this):e.visitChildren(this)},Re.prototype=Object.create(ge.prototype),Re.prototype.constructor=Re,g.UnaryPlusExpressionContext=Re,Re.prototype.Plus=function(){return this.getToken(g.Plus,0)},Re.prototype.singleExpression=function(){return this.getTypedRuleContext(ge,0)},Re.prototype.enterRule=function(e){e instanceof s&&e.enterUnaryPlusExpression(this)},Re.prototype.exitRule=function(e){e instanceof s&&e.exitUnaryPlusExpression(this)},Re.prototype.accept=function(e){return e instanceof a?e.visitUnaryPlusExpression(this):e.visitChildren(this)},Oe.prototype=Object.create(ge.prototype),Oe.prototype.constructor=Oe,g.DeleteExpressionContext=Oe,Oe.prototype.Delete=function(){return this.getToken(g.Delete,0)},Oe.prototype.singleExpression=function(){return this.getTypedRuleContext(ge,0)},Oe.prototype.enterRule=function(e){e instanceof s&&e.enterDeleteExpression(this)},Oe.prototype.exitRule=function(e){e instanceof s&&e.exitDeleteExpression(this)},Oe.prototype.accept=function(e){return e instanceof a?e.visitDeleteExpression(this):e.visitChildren(this)},Ne.prototype=Object.create(ge.prototype),Ne.prototype.constructor=Ne,g.EqualityExpressionContext=Ne,Ne.prototype.singleExpression=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(ge):this.getTypedRuleContext(ge,e)},Ne.prototype.Equals=function(){return this.getToken(g.Equals,0)},Ne.prototype.NotEquals=function(){return this.getToken(g.NotEquals,0)},Ne.prototype.IdentityEquals=function(){return this.getToken(g.IdentityEquals,0)},Ne.prototype.IdentityNotEquals=function(){return this.getToken(g.IdentityNotEquals,0)},Ne.prototype.enterRule=function(e){e instanceof s&&e.enterEqualityExpression(this)},Ne.prototype.exitRule=function(e){e instanceof s&&e.exitEqualityExpression(this)},Ne.prototype.accept=function(e){return e instanceof a?e.visitEqualityExpression(this):e.visitChildren(this)},je.prototype=Object.create(ge.prototype),je.prototype.constructor=je,g.BitXOrExpressionContext=je,je.prototype.singleExpression=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(ge):this.getTypedRuleContext(ge,e)},je.prototype.BitXOr=function(){return this.getToken(g.BitXOr,0)},je.prototype.enterRule=function(e){e instanceof s&&e.enterBitXOrExpression(this)},je.prototype.exitRule=function(e){e instanceof s&&e.exitBitXOrExpression(this)},je.prototype.accept=function(e){return e instanceof a?e.visitBitXOrExpression(this):e.visitChildren(this)},we.prototype=Object.create(ge.prototype),we.prototype.constructor=we,g.MultiplicativeExpressionContext=we,we.prototype.singleExpression=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(ge):this.getTypedRuleContext(ge,e)},we.prototype.Multiply=function(){return this.getToken(g.Multiply,0)},we.prototype.Divide=function(){return this.getToken(g.Divide,0)},we.prototype.Modulus=function(){return this.getToken(g.Modulus,0)},we.prototype.enterRule=function(e){e instanceof s&&e.enterMultiplicativeExpression(this)},we.prototype.exitRule=function(e){e instanceof s&&e.exitMultiplicativeExpression(this)},we.prototype.accept=function(e){return e instanceof a?e.visitMultiplicativeExpression(this):e.visitChildren(this)},De.prototype=Object.create(ge.prototype),De.prototype.constructor=De,g.BitShiftExpressionContext=De,De.prototype.singleExpression=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(ge):this.getTypedRuleContext(ge,e)},De.prototype.LeftShiftArithmetic=function(){return this.getToken(g.LeftShiftArithmetic,0)},De.prototype.RightShiftArithmetic=function(){return this.getToken(g.RightShiftArithmetic,0)},De.prototype.RightShiftLogical=function(){return this.getToken(g.RightShiftLogical,0)},De.prototype.enterRule=function(e){e instanceof s&&e.enterBitShiftExpression(this)},De.prototype.exitRule=function(e){e instanceof s&&e.exitBitShiftExpression(this)},De.prototype.accept=function(e){return e instanceof a?e.visitBitShiftExpression(this):e.visitChildren(this)},Be.prototype=Object.create(ge.prototype),Be.prototype.constructor=Be,g.ParenthesizedExpressionContext=Be,Be.prototype.OpenParen=function(){return this.getToken(g.OpenParen,0)},Be.prototype.expressionSequence=function(){return this.getTypedRuleContext(ue,0)},Be.prototype.CloseParen=function(){return this.getToken(g.CloseParen,0)},Be.prototype.enterRule=function(e){e instanceof s&&e.enterParenthesizedExpression(this)},Be.prototype.exitRule=function(e){e instanceof s&&e.exitParenthesizedExpression(this)},Be.prototype.accept=function(e){return e instanceof a?e.visitParenthesizedExpression(this):e.visitChildren(this)},Me.prototype=Object.create(ge.prototype),Me.prototype.constructor=Me,g.GetAttributeExpressionContext=Me,Me.prototype.singleExpression=function(){return this.getTypedRuleContext(ge,0)},Me.prototype.Dot=function(){return this.getToken(g.Dot,0)},Me.prototype.identifierName=function(){return this.getTypedRuleContext(mt,0)},Me.prototype.enterRule=function(e){e instanceof s&&e.enterGetAttributeExpression(this)},Me.prototype.exitRule=function(e){e instanceof s&&e.exitGetAttributeExpression(this)},Me.prototype.accept=function(e){return e instanceof a?e.visitGetAttributeExpression(this):e.visitChildren(this)},$e.prototype=Object.create(ge.prototype),$e.prototype.constructor=$e,g.AdditiveExpressionContext=$e,$e.prototype.singleExpression=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(ge):this.getTypedRuleContext(ge,e)},$e.prototype.Plus=function(){return this.getToken(g.Plus,0)},$e.prototype.Minus=function(){return this.getToken(g.Minus,0)},$e.prototype.enterRule=function(e){e instanceof s&&e.enterAdditiveExpression(this)},$e.prototype.exitRule=function(e){e instanceof s&&e.exitAdditiveExpression(this)},$e.prototype.accept=function(e){return e instanceof a?e.visitAdditiveExpression(this):e.visitChildren(this)},ke.prototype=Object.create(ge.prototype),ke.prototype.constructor=ke,g.RelationalExpressionContext=ke,ke.prototype.singleExpression=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(ge):this.getTypedRuleContext(ge,e)},ke.prototype.LessThan=function(){return this.getToken(g.LessThan,0)},ke.prototype.MoreThan=function(){return this.getToken(g.MoreThan,0)},ke.prototype.LessThanEquals=function(){return this.getToken(g.LessThanEquals,0)},ke.prototype.GreaterThanEquals=function(){return this.getToken(g.GreaterThanEquals,0)},ke.prototype.enterRule=function(e){e instanceof s&&e.enterRelationalExpression(this)},ke.prototype.exitRule=function(e){e instanceof s&&e.exitRelationalExpression(this)},ke.prototype.accept=function(e){return e instanceof a?e.visitRelationalExpression(this):e.visitChildren(this)},Pe.prototype=Object.create(ge.prototype),Pe.prototype.constructor=Pe,g.PostIncrementExpressionContext=Pe,Pe.prototype.singleExpression=function(){return this.getTypedRuleContext(ge,0)},Pe.prototype.PlusPlus=function(){return this.getToken(g.PlusPlus,0)},Pe.prototype.enterRule=function(e){e instanceof s&&e.enterPostIncrementExpression(this)},Pe.prototype.exitRule=function(e){e instanceof s&&e.exitPostIncrementExpression(this)},Pe.prototype.accept=function(e){return e instanceof a?e.visitPostIncrementExpression(this):e.visitChildren(this)},Fe.prototype=Object.create(ge.prototype),Fe.prototype.constructor=Fe,g.FuncCallExpressionContext=Fe,Fe.prototype.singleExpression=function(){return this.getTypedRuleContext(ge,0)},Fe.prototype.arguments=function(){return this.getTypedRuleContext(me,0)},Fe.prototype.enterRule=function(e){e instanceof s&&e.enterFuncCallExpression(this)},Fe.prototype.exitRule=function(e){e instanceof s&&e.exitFuncCallExpression(this)},Fe.prototype.accept=function(e){return e instanceof a?e.visitFuncCallExpression(this):e.visitChildren(this)},Ue.prototype=Object.create(ge.prototype),Ue.prototype.constructor=Ue,g.BitNotExpressionContext=Ue,Ue.prototype.BitNot=function(){return this.getToken(g.BitNot,0)},Ue.prototype.singleExpression=function(){return this.getTypedRuleContext(ge,0)},Ue.prototype.enterRule=function(e){e instanceof s&&e.enterBitNotExpression(this)},Ue.prototype.exitRule=function(e){e instanceof s&&e.exitBitNotExpression(this)},Ue.prototype.accept=function(e){return e instanceof a?e.visitBitNotExpression(this):e.visitChildren(this)},qe.prototype=Object.create(ge.prototype),qe.prototype.constructor=qe,g.NewExpressionContext=qe,qe.prototype.New=function(){return this.getToken(g.New,0)},qe.prototype.singleExpression=function(){return this.getTypedRuleContext(ge,0)},qe.prototype.arguments=function(){return this.getTypedRuleContext(me,0)},qe.prototype.enterRule=function(e){e instanceof s&&e.enterNewExpression(this)},qe.prototype.exitRule=function(e){e instanceof s&&e.exitNewExpression(this)},qe.prototype.accept=function(e){return e instanceof a?e.visitNewExpression(this):e.visitChildren(this)},Ge.prototype=Object.create(ge.prototype),Ge.prototype.constructor=Ge,g.LiteralExpressionContext=Ge,Ge.prototype.literal=function(){return this.getTypedRuleContext(Je,0)},Ge.prototype.enterRule=function(e){e instanceof s&&e.enterLiteralExpression(this)},Ge.prototype.exitRule=function(e){e instanceof s&&e.exitLiteralExpression(this)},Ge.prototype.accept=function(e){return e instanceof a?e.visitLiteralExpression(this):e.visitChildren(this)},He.prototype=Object.create(ge.prototype),He.prototype.constructor=He,g.ArrayLiteralExpressionContext=He,He.prototype.arrayLiteral=function(){return this.getTypedRuleContext(Q,0)},He.prototype.enterRule=function(e){e instanceof s&&e.enterArrayLiteralExpression(this)},He.prototype.exitRule=function(e){e instanceof s&&e.exitArrayLiteralExpression(this)},He.prototype.accept=function(e){return e instanceof a?e.visitArrayLiteralExpression(this):e.visitChildren(this)},Ve.prototype=Object.create(ge.prototype),Ve.prototype.constructor=Ve,g.MemberIndexExpressionContext=Ve,Ve.prototype.singleExpression=function(){return this.getTypedRuleContext(ge,0)},Ve.prototype.OpenBracket=function(){return this.getToken(g.OpenBracket,0)},Ve.prototype.expressionSequence=function(){return this.getTypedRuleContext(ue,0)},Ve.prototype.CloseBracket=function(){return this.getToken(g.CloseBracket,0)},Ve.prototype.enterRule=function(e){e instanceof s&&e.enterMemberIndexExpression(this)},Ve.prototype.exitRule=function(e){e instanceof s&&e.exitMemberIndexExpression(this)},Ve.prototype.accept=function(e){return e instanceof a?e.visitMemberIndexExpression(this):e.visitChildren(this)},Ke.prototype=Object.create(ge.prototype),Ke.prototype.constructor=Ke,g.IdentifierExpressionContext=Ke,Ke.prototype.Identifier=function(){return this.getToken(g.Identifier,0)},Ke.prototype.enterRule=function(e){e instanceof s&&e.enterIdentifierExpression(this)},Ke.prototype.exitRule=function(e){e instanceof s&&e.exitIdentifierExpression(this)},Ke.prototype.accept=function(e){return e instanceof a?e.visitIdentifierExpression(this):e.visitChildren(this)},We.prototype=Object.create(ge.prototype),We.prototype.constructor=We,g.BitAndExpressionContext=We,We.prototype.singleExpression=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(ge):this.getTypedRuleContext(ge,e)},We.prototype.BitAnd=function(){return this.getToken(g.BitAnd,0)},We.prototype.enterRule=function(e){e instanceof s&&e.enterBitAndExpression(this)},We.prototype.exitRule=function(e){e instanceof s&&e.exitBitAndExpression(this)},We.prototype.accept=function(e){return e instanceof a?e.visitBitAndExpression(this):e.visitChildren(this)},Ye.prototype=Object.create(ge.prototype),Ye.prototype.constructor=Ye,g.BitOrExpressionContext=Ye,Ye.prototype.singleExpression=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(ge):this.getTypedRuleContext(ge,e)},Ye.prototype.BitOr=function(){return this.getToken(g.BitOr,0)},Ye.prototype.enterRule=function(e){e instanceof s&&e.enterBitOrExpression(this)},Ye.prototype.exitRule=function(e){e instanceof s&&e.exitBitOrExpression(this)},Ye.prototype.accept=function(e){return e instanceof a?e.visitBitOrExpression(this):e.visitChildren(this)},ze.prototype=Object.create(ge.prototype),ze.prototype.constructor=ze,g.AssignmentOperatorExpressionContext=ze,ze.prototype.singleExpression=function(){return this.getTypedRuleContext(ge,0)},ze.prototype.assignmentOperator=function(){return this.getTypedRuleContext(Xe,0)},ze.prototype.expressionSequence=function(){return this.getTypedRuleContext(ue,0)},ze.prototype.enterRule=function(e){e instanceof s&&e.enterAssignmentOperatorExpression(this)},ze.prototype.exitRule=function(e){e instanceof s&&e.exitAssignmentOperatorExpression(this)},ze.prototype.accept=function(e){return e instanceof a?e.visitAssignmentOperatorExpression(this):e.visitChildren(this)},Ze.prototype=Object.create(ge.prototype),Ze.prototype.constructor=Ze,g.VoidExpressionContext=Ze,Ze.prototype.Void=function(){return this.getToken(g.Void,0)},Ze.prototype.singleExpression=function(){return this.getTypedRuleContext(ge,0)},Ze.prototype.enterRule=function(e){e instanceof s&&e.enterVoidExpression(this)},Ze.prototype.exitRule=function(e){e instanceof s&&e.exitVoidExpression(this)},Ze.prototype.accept=function(e){return e instanceof a?e.visitVoidExpression(this):e.visitChildren(this)},g.prototype.singleExpression=function(e){void 0===e&&(e=0);var t=this._ctx,n=this.state,s=new ge(this,this._ctx,n),a=88;this.enterRecursionRule(s,88,g.RULE_singleExpression,e);var o=0;try{switch(this.enterOuterAlt(s,1),this.state=540,this._errHandler.sync(this),this._input.LA(1)){case g.Function:s=new Te(this,s),this._ctx=s,this.state=495,this.match(g.Function),this.state=497,this._errHandler.sync(this),(o=this._input.LA(1))===g.Identifier&&(this.state=496,this.match(g.Identifier)),this.state=499,this.match(g.OpenParen),this.state=501,this._errHandler.sync(this),(o=this._input.LA(1))===g.Identifier&&(this.state=500,this.formalParameterList()),this.state=503,this.match(g.CloseParen),this.state=504,this.match(g.OpenBrace),this.state=505,this.functionBody(),this.state=506,this.match(g.CloseBrace);break;case g.New:s=new qe(this,s),this._ctx=s,this.state=508,this.match(g.New),this.state=509,this.singleExpression(0),this.state=511,this._errHandler.sync(this),1===this._interp.adaptivePredict(this._input,49,this._ctx)&&(this.state=510,this.arguments());break;case g.Delete:s=new Oe(this,s),this._ctx=s,this.state=513,this.match(g.Delete),this.state=514,this.singleExpression(30);break;case g.Void:s=new Ze(this,s),this._ctx=s,this.state=515,this.match(g.Void),this.state=516,this.singleExpression(29);break;case g.Typeof:s=new ve(this,s),this._ctx=s,this.state=517,this.match(g.Typeof),this.state=518,this.singleExpression(28);break;case g.PlusPlus:s=new ye(this,s),this._ctx=s,this.state=519,this.match(g.PlusPlus),this.state=520,this.singleExpression(27);break;case g.MinusMinus:s=new Ee(this,s),this._ctx=s,this.state=521,this.match(g.MinusMinus),this.state=522,this.singleExpression(26);break;case g.Plus:s=new Re(this,s),this._ctx=s,this.state=523,this.match(g.Plus),this.state=524,this.singleExpression(25);break;case g.Minus:s=new xe(this,s),this._ctx=s,this.state=525,this.match(g.Minus),this.state=526,this.singleExpression(24);break;case g.BitNot:s=new Ue(this,s),this._ctx=s,this.state=527,this.match(g.BitNot),this.state=528,this.singleExpression(23);break;case g.Not:s=new Ae(this,s),this._ctx=s,this.state=529,this.match(g.Not),this.state=530,this.singleExpression(22);break;case g.This:s=new _e(this,s),this._ctx=s,this.state=531,this.match(g.This);break;case g.Identifier:s=new Ke(this,s),this._ctx=s,this.state=532,this.match(g.Identifier);break;case g.RegularExpressionLiteral:case g.NullLiteral:case g.UndefinedLiteral:case g.BooleanLiteral:case g.IntegerLiteral:case g.DecimalLiteral:case g.HexIntegerLiteral:case g.OctalIntegerLiteral:case g.StringLiteral:s=new Ge(this,s),this._ctx=s,this.state=533,this.literal();break;case g.OpenBracket:s=new He(this,s),this._ctx=s,this.state=534,this.arrayLiteral();break;case g.OpenBrace:s=new fe(this,s),this._ctx=s,this.state=535,this.objectLiteral();break;case g.OpenParen:s=new Be(this,s),this._ctx=s,this.state=536,this.match(g.OpenParen),this.state=537,this.expressionSequence(),this.state=538,this.match(g.CloseParen);break;default:throw new r.error.NoViableAltException(this)}this._ctx.stop=this._input.LT(-1),this.state=609,this._errHandler.sync(this);for(var i=this._interp.adaptivePredict(this._input,52,this._ctx);2!=i&&i!=r.atn.ATN.INVALID_ALT_NUMBER;){if(1===i)switch(null!==this._parseListeners&&this.triggerExitRuleEvent(),this.state=607,this._errHandler.sync(this),this._interp.adaptivePredict(this._input,51,this._ctx)){case 1:if(s=new we(this,new ge(this,t,n)),this.pushNewRecursionContext(s,a,g.RULE_singleExpression),this.state=542,!this.precpred(this._ctx,21))throw new r.error.FailedPredicateException(this,"this.precpred(this._ctx, 21)");this.state=543,0!=(-32&(o=this._input.LA(1)))||0==(1<<o&(1<<g.Multiply|1<<g.Divide|1<<g.Modulus))?this._errHandler.recoverInline(this):(this._errHandler.reportMatch(this),this.consume()),this.state=544,this.singleExpression(22);break;case 2:if(s=new $e(this,new ge(this,t,n)),this.pushNewRecursionContext(s,a,g.RULE_singleExpression),this.state=545,!this.precpred(this._ctx,20))throw new r.error.FailedPredicateException(this,"this.precpred(this._ctx, 20)");this.state=546,(o=this._input.LA(1))!==g.Plus&&o!==g.Minus?this._errHandler.recoverInline(this):(this._errHandler.reportMatch(this),this.consume()),this.state=547,this.singleExpression(21);break;case 3:if(s=new De(this,new ge(this,t,n)),this.pushNewRecursionContext(s,a,g.RULE_singleExpression),this.state=548,!this.precpred(this._ctx,19))throw new r.error.FailedPredicateException(this,"this.precpred(this._ctx, 19)");this.state=549,0!=(-32&(o=this._input.LA(1)))||0==(1<<o&(1<<g.RightShiftArithmetic|1<<g.LeftShiftArithmetic|1<<g.RightShiftLogical))?this._errHandler.recoverInline(this):(this._errHandler.reportMatch(this),this.consume()),this.state=550,this.singleExpression(20);break;case 4:if(s=new ke(this,new ge(this,t,n)),this.pushNewRecursionContext(s,a,g.RULE_singleExpression),this.state=551,!this.precpred(this._ctx,18))throw new r.error.FailedPredicateException(this,"this.precpred(this._ctx, 18)");this.state=552,0!=(-32&(o=this._input.LA(1)))||0==(1<<o&(1<<g.LessThan|1<<g.MoreThan|1<<g.LessThanEquals|1<<g.GreaterThanEquals))?this._errHandler.recoverInline(this):(this._errHandler.reportMatch(this),this.consume()),this.state=553,this.singleExpression(19);break;case 5:if(s=new Ce(this,new ge(this,t,n)),this.pushNewRecursionContext(s,a,g.RULE_singleExpression),this.state=554,!this.precpred(this._ctx,17))throw new r.error.FailedPredicateException(this,"this.precpred(this._ctx, 17)");this.state=555,this.match(g.Instanceof),this.state=556,this.singleExpression(18);break;case 6:if(s=new be(this,new ge(this,t,n)),this.pushNewRecursionContext(s,a,g.RULE_singleExpression),this.state=557,!this.precpred(this._ctx,16))throw new r.error.FailedPredicateException(this,"this.precpred(this._ctx, 16)");this.state=558,this.match(g.In),this.state=559,this.singleExpression(17);break;case 7:if(s=new Ne(this,new ge(this,t,n)),this.pushNewRecursionContext(s,a,g.RULE_singleExpression),this.state=560,!this.precpred(this._ctx,15))throw new r.error.FailedPredicateException(this,"this.precpred(this._ctx, 15)");this.state=561,0!=((o=this._input.LA(1))-31&-32)||0==(1<<o-31&(1<<g.Equals-31|1<<g.NotEquals-31|1<<g.IdentityEquals-31|1<<g.IdentityNotEquals-31))?this._errHandler.recoverInline(this):(this._errHandler.reportMatch(this),this.consume()),this.state=562,this.singleExpression(16);break;case 8:if(s=new We(this,new ge(this,t,n)),this.pushNewRecursionContext(s,a,g.RULE_singleExpression),this.state=563,!this.precpred(this._ctx,14))throw new r.error.FailedPredicateException(this,"this.precpred(this._ctx, 14)");this.state=564,this.match(g.BitAnd),this.state=565,this.singleExpression(15);break;case 9:if(s=new je(this,new ge(this,t,n)),this.pushNewRecursionContext(s,a,g.RULE_singleExpression),this.state=566,!this.precpred(this._ctx,13))throw new r.error.FailedPredicateException(this,"this.precpred(this._ctx, 13)");this.state=567,this.match(g.BitXOr),this.state=568,this.singleExpression(14);break;case 10:if(s=new Ye(this,new ge(this,t,n)),this.pushNewRecursionContext(s,a,g.RULE_singleExpression),this.state=569,!this.precpred(this._ctx,12))throw new r.error.FailedPredicateException(this,"this.precpred(this._ctx, 12)");this.state=570,this.match(g.BitOr),this.state=571,this.singleExpression(13);break;case 11:if(s=new he(this,new ge(this,t,n)),this.pushNewRecursionContext(s,a,g.RULE_singleExpression),this.state=572,!this.precpred(this._ctx,11))throw new r.error.FailedPredicateException(this,"this.precpred(this._ctx, 11)");this.state=573,this.match(g.And),this.state=574,this.singleExpression(12);break;case 12:if(s=new Se(this,new ge(this,t,n)),this.pushNewRecursionContext(s,a,g.RULE_singleExpression),this.state=575,!this.precpred(this._ctx,10))throw new r.error.FailedPredicateException(this,"this.precpred(this._ctx, 10)");this.state=576,this.match(g.Or),this.state=577,this.singleExpression(11);break;case 13:if(s=new de(this,new ge(this,t,n)),this.pushNewRecursionContext(s,a,g.RULE_singleExpression),this.state=578,!this.precpred(this._ctx,9))throw new r.error.FailedPredicateException(this,"this.precpred(this._ctx, 9)");this.state=579,this.match(g.QuestionMark),this.state=580,this.singleExpression(0),this.state=581,this.match(g.Colon),this.state=582,this.singleExpression(10);break;case 14:if(s=new Ve(this,new ge(this,t,n)),this.pushNewRecursionContext(s,a,g.RULE_singleExpression),this.state=584,!this.precpred(this._ctx,36))throw new r.error.FailedPredicateException(this,"this.precpred(this._ctx, 36)");this.state=585,this.match(g.OpenBracket),this.state=586,this.expressionSequence(),this.state=587,this.match(g.CloseBracket);break;case 15:if(s=new Me(this,new ge(this,t,n)),this.pushNewRecursionContext(s,a,g.RULE_singleExpression),this.state=589,!this.precpred(this._ctx,35))throw new r.error.FailedPredicateException(this,"this.precpred(this._ctx, 35)");this.state=590,this.match(g.Dot),this.state=591,this.identifierName();break;case 16:if(s=new Fe(this,new ge(this,t,n)),this.pushNewRecursionContext(s,a,g.RULE_singleExpression),this.state=592,!this.precpred(this._ctx,34))throw new r.error.FailedPredicateException(this,"this.precpred(this._ctx, 34)");this.state=593,this.arguments();break;case 17:if(s=new Pe(this,new ge(this,t,n)),this.pushNewRecursionContext(s,a,g.RULE_singleExpression),this.state=594,!this.precpred(this._ctx,32))throw new r.error.FailedPredicateException(this,"this.precpred(this._ctx, 32)");if(this.state=595,this.here(g.LineTerminator))throw new r.error.FailedPredicateException(this,"!this.here(ECMAScriptParser.LineTerminator)");this.state=596,this.match(g.PlusPlus);break;case 18:if(s=new Ie(this,new ge(this,t,n)),this.pushNewRecursionContext(s,a,g.RULE_singleExpression),this.state=597,!this.precpred(this._ctx,31))throw new r.error.FailedPredicateException(this,"this.precpred(this._ctx, 31)");if(this.state=598,this.here(g.LineTerminator))throw new r.error.FailedPredicateException(this,"!this.here(ECMAScriptParser.LineTerminator)");this.state=599,this.match(g.MinusMinus);break;case 19:if(s=new Le(this,new ge(this,t,n)),this.pushNewRecursionContext(s,a,g.RULE_singleExpression),this.state=600,!this.precpred(this._ctx,8))throw new r.error.FailedPredicateException(this,"this.precpred(this._ctx, 8)");this.state=601,this.match(g.Assign),this.state=602,this.expressionSequence();break;case 20:if(s=new ze(this,new ge(this,t,n)),this.pushNewRecursionContext(s,a,g.RULE_singleExpression),this.state=603,!this.precpred(this._ctx,7))throw new r.error.FailedPredicateException(this,"this.precpred(this._ctx, 7)");this.state=604,this.assignmentOperator(),this.state=605,this.expressionSequence()}this.state=611,this._errHandler.sync(this),i=this._interp.adaptivePredict(this._input,52,this._ctx)}}catch(e){if(!(e instanceof r.error.RecognitionException))throw e;s.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.unrollRecursionContexts(t)}return s},Xe.prototype=Object.create(r.ParserRuleContext.prototype),Xe.prototype.constructor=Xe,Xe.prototype.MultiplyAssign=function(){return this.getToken(g.MultiplyAssign,0)},Xe.prototype.DivideAssign=function(){return this.getToken(g.DivideAssign,0)},Xe.prototype.ModulusAssign=function(){return this.getToken(g.ModulusAssign,0)},Xe.prototype.PlusAssign=function(){return this.getToken(g.PlusAssign,0)},Xe.prototype.MinusAssign=function(){return this.getToken(g.MinusAssign,0)},Xe.prototype.LeftShiftArithmeticAssign=function(){return this.getToken(g.LeftShiftArithmeticAssign,0)},Xe.prototype.RightShiftArithmeticAssign=function(){return this.getToken(g.RightShiftArithmeticAssign,0)},Xe.prototype.RightShiftLogicalAssign=function(){return this.getToken(g.RightShiftLogicalAssign,0)},Xe.prototype.BitAndAssign=function(){return this.getToken(g.BitAndAssign,0)},Xe.prototype.BitXorAssign=function(){return this.getToken(g.BitXorAssign,0)},Xe.prototype.BitOrAssign=function(){return this.getToken(g.BitOrAssign,0)},Xe.prototype.enterRule=function(e){e instanceof s&&e.enterAssignmentOperator(this)},Xe.prototype.exitRule=function(e){e instanceof s&&e.exitAssignmentOperator(this)},Xe.prototype.accept=function(e){return e instanceof a?e.visitAssignmentOperator(this):e.visitChildren(this)},g.AssignmentOperatorContext=Xe,g.prototype.assignmentOperator=function(){var e=new Xe(this,this._ctx,this.state);this.enterRule(e,90,g.RULE_assignmentOperator);var t=0;try{this.enterOuterAlt(e,1),this.state=612,0!=((t=this._input.LA(1))-40&-32)||0==(1<<t-40&(1<<g.MultiplyAssign-40|1<<g.DivideAssign-40|1<<g.ModulusAssign-40|1<<g.PlusAssign-40|1<<g.MinusAssign-40|1<<g.LeftShiftArithmeticAssign-40|1<<g.RightShiftArithmeticAssign-40|1<<g.RightShiftLogicalAssign-40|1<<g.BitAndAssign-40|1<<g.BitXorAssign-40|1<<g.BitOrAssign-40))?this._errHandler.recoverInline(this):(this._errHandler.reportMatch(this),this.consume())}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},Je.prototype=Object.create(r.ParserRuleContext.prototype),Je.prototype.constructor=Je,Je.prototype.copyFrom=function(e){r.ParserRuleContext.prototype.copyFrom.call(this,e)},Qe.prototype=Object.create(Je.prototype),Qe.prototype.constructor=Qe,g.NumericLiteralWrapperContext=Qe,Qe.prototype.numericLiteral=function(){return this.getTypedRuleContext(at,0)},Qe.prototype.enterRule=function(e){e instanceof s&&e.enterNumericLiteralWrapper(this)},Qe.prototype.exitRule=function(e){e instanceof s&&e.exitNumericLiteralWrapper(this)},Qe.prototype.accept=function(e){return e instanceof a?e.visitNumericLiteralWrapper(this):e.visitChildren(this)},et.prototype=Object.create(Je.prototype),et.prototype.constructor=et,g.UndefinedLiteralContext=et,et.prototype.UndefinedLiteral=function(){return this.getToken(g.UndefinedLiteral,0)},et.prototype.enterRule=function(e){e instanceof s&&e.enterUndefinedLiteral(this)},et.prototype.exitRule=function(e){e instanceof s&&e.exitUndefinedLiteral(this)},et.prototype.accept=function(e){return e instanceof a?e.visitUndefinedLiteral(this):e.visitChildren(this)},tt.prototype=Object.create(Je.prototype),tt.prototype.constructor=tt,g.StringLiteralContext=tt,tt.prototype.StringLiteral=function(){return this.getToken(g.StringLiteral,0)},tt.prototype.enterRule=function(e){e instanceof s&&e.enterStringLiteral(this)},tt.prototype.exitRule=function(e){e instanceof s&&e.exitStringLiteral(this)},tt.prototype.accept=function(e){return e instanceof a?e.visitStringLiteral(this):e.visitChildren(this)},nt.prototype=Object.create(Je.prototype),nt.prototype.constructor=nt,g.RegularExpressionLiteralContext=nt,nt.prototype.RegularExpressionLiteral=function(){return this.getToken(g.RegularExpressionLiteral,0)},nt.prototype.enterRule=function(e){e instanceof s&&e.enterRegularExpressionLiteral(this)},nt.prototype.exitRule=function(e){e instanceof s&&e.exitRegularExpressionLiteral(this)},nt.prototype.accept=function(e){return e instanceof a?e.visitRegularExpressionLiteral(this):e.visitChildren(this)},rt.prototype=Object.create(Je.prototype),rt.prototype.constructor=rt,g.BooleanLiteralContext=rt,rt.prototype.BooleanLiteral=function(){return this.getToken(g.BooleanLiteral,0)},rt.prototype.enterRule=function(e){e instanceof s&&e.enterBooleanLiteral(this)},rt.prototype.exitRule=function(e){e instanceof s&&e.exitBooleanLiteral(this)},rt.prototype.accept=function(e){return e instanceof a?e.visitBooleanLiteral(this):e.visitChildren(this)},st.prototype=Object.create(Je.prototype),st.prototype.constructor=st,g.NullLiteralContext=st,st.prototype.NullLiteral=function(){return this.getToken(g.NullLiteral,0)},st.prototype.enterRule=function(e){e instanceof s&&e.enterNullLiteral(this)},st.prototype.exitRule=function(e){e instanceof s&&e.exitNullLiteral(this)},st.prototype.accept=function(e){return e instanceof a?e.visitNullLiteral(this):e.visitChildren(this)},g.LiteralContext=Je,g.prototype.literal=function(){var e=new Je(this,this._ctx,this.state);this.enterRule(e,92,g.RULE_literal);try{switch(this.state=620,this._errHandler.sync(this),this._input.LA(1)){case g.NullLiteral:e=new st(this,e),this.enterOuterAlt(e,1),this.state=614,this.match(g.NullLiteral);break;case g.UndefinedLiteral:e=new et(this,e),this.enterOuterAlt(e,2),this.state=615,this.match(g.UndefinedLiteral);break;case g.BooleanLiteral:e=new rt(this,e),this.enterOuterAlt(e,3),this.state=616,this.match(g.BooleanLiteral);break;case g.StringLiteral:e=new tt(this,e),this.enterOuterAlt(e,4),this.state=617,this.match(g.StringLiteral);break;case g.RegularExpressionLiteral:e=new nt(this,e),this.enterOuterAlt(e,5),this.state=618,this.match(g.RegularExpressionLiteral);break;case g.IntegerLiteral:case g.DecimalLiteral:case g.HexIntegerLiteral:case g.OctalIntegerLiteral:e=new Qe(this,e),this.enterOuterAlt(e,6),this.state=619,this.numericLiteral();break;default:throw new r.error.NoViableAltException(this)}}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},at.prototype=Object.create(r.ParserRuleContext.prototype),at.prototype.constructor=at,at.prototype.copyFrom=function(e){r.ParserRuleContext.prototype.copyFrom.call(this,e)},ot.prototype=Object.create(at.prototype),ot.prototype.constructor=ot,g.HexIntegerLiteralContext=ot,ot.prototype.HexIntegerLiteral=function(){return this.getToken(g.HexIntegerLiteral,0)},ot.prototype.enterRule=function(e){e instanceof s&&e.enterHexIntegerLiteral(this)},ot.prototype.exitRule=function(e){e instanceof s&&e.exitHexIntegerLiteral(this)},ot.prototype.accept=function(e){return e instanceof a?e.visitHexIntegerLiteral(this):e.visitChildren(this)},it.prototype=Object.create(at.prototype),it.prototype.constructor=it,g.OctalIntegerLiteralContext=it,it.prototype.OctalIntegerLiteral=function(){return this.getToken(g.OctalIntegerLiteral,0)},it.prototype.enterRule=function(e){e instanceof s&&e.enterOctalIntegerLiteral(this)},it.prototype.exitRule=function(e){e instanceof s&&e.exitOctalIntegerLiteral(this)},it.prototype.accept=function(e){return e instanceof a?e.visitOctalIntegerLiteral(this):e.visitChildren(this)},lt.prototype=Object.create(at.prototype),lt.prototype.constructor=lt,g.DecimalLiteralContext=lt,lt.prototype.DecimalLiteral=function(){return this.getToken(g.DecimalLiteral,0)},lt.prototype.enterRule=function(e){e instanceof s&&e.enterDecimalLiteral(this)},lt.prototype.exitRule=function(e){e instanceof s&&e.exitDecimalLiteral(this)},lt.prototype.accept=function(e){return e instanceof a?e.visitDecimalLiteral(this):e.visitChildren(this)},pt.prototype=Object.create(at.prototype),pt.prototype.constructor=pt,g.IntegerLiteralContext=pt,pt.prototype.IntegerLiteral=function(){return this.getToken(g.IntegerLiteral,0)},pt.prototype.enterRule=function(e){e instanceof s&&e.enterIntegerLiteral(this)},pt.prototype.exitRule=function(e){e instanceof s&&e.exitIntegerLiteral(this)},pt.prototype.accept=function(e){return e instanceof a?e.visitIntegerLiteral(this):e.visitChildren(this)},g.NumericLiteralContext=at,g.prototype.numericLiteral=function(){var e=new at(this,this._ctx,this.state);this.enterRule(e,94,g.RULE_numericLiteral);try{switch(this.state=626,this._errHandler.sync(this),this._input.LA(1)){case g.IntegerLiteral:e=new pt(this,e),this.enterOuterAlt(e,1),this.state=622,this.match(g.IntegerLiteral);break;case g.DecimalLiteral:e=new lt(this,e),this.enterOuterAlt(e,2),this.state=623,this.match(g.DecimalLiteral);break;case g.HexIntegerLiteral:e=new ot(this,e),this.enterOuterAlt(e,3),this.state=624,this.match(g.HexIntegerLiteral);break;case g.OctalIntegerLiteral:e=new it(this,e),this.enterOuterAlt(e,4),this.state=625,this.match(g.OctalIntegerLiteral);break;default:throw new r.error.NoViableAltException(this)}}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},mt.prototype=Object.create(r.ParserRuleContext.prototype),mt.prototype.constructor=mt,mt.prototype.Identifier=function(){return this.getToken(g.Identifier,0)},mt.prototype.reservedWord=function(){return this.getTypedRuleContext(ct,0)},mt.prototype.enterRule=function(e){e instanceof s&&e.enterIdentifierName(this)},mt.prototype.exitRule=function(e){e instanceof s&&e.exitIdentifierName(this)},mt.prototype.accept=function(e){return e instanceof a?e.visitIdentifierName(this):e.visitChildren(this)},g.IdentifierNameContext=mt,g.prototype.identifierName=function(){var e=new mt(this,this._ctx,this.state);this.enterRule(e,96,g.RULE_identifierName);try{switch(this.state=630,this._errHandler.sync(this),this._input.LA(1)){case g.Identifier:this.enterOuterAlt(e,1),this.state=628,this.match(g.Identifier);break;case g.NullLiteral:case g.BooleanLiteral:case g.Break:case g.Do:case g.Instanceof:case g.Typeof:case g.Case:case g.Else:case g.New:case g.Var:case g.Catch:case g.Finally:case g.Return:case g.Void:case g.Continue:case g.For:case g.Switch:case g.While:case g.Debugger:case g.Function:case g.This:case g.With:case g.Default:case g.If:case g.Throw:case g.Delete:case g.In:case g.Try:case g.Class:case g.Enum:case g.Extends:case g.Super:case g.Const:case g.Export:case g.Import:case g.Implements:case g.Let:case g.Private:case g.Public:case g.Interface:case g.Package:case g.Protected:case g.Static:case g.Yield:this.enterOuterAlt(e,2),this.state=629,this.reservedWord();break;default:throw new r.error.NoViableAltException(this)}}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},ct.prototype=Object.create(r.ParserRuleContext.prototype),ct.prototype.constructor=ct,ct.prototype.keyword=function(){return this.getTypedRuleContext(ut,0)},ct.prototype.futureReservedWord=function(){return this.getTypedRuleContext(gt,0)},ct.prototype.NullLiteral=function(){return this.getToken(g.NullLiteral,0)},ct.prototype.BooleanLiteral=function(){return this.getToken(g.BooleanLiteral,0)},ct.prototype.enterRule=function(e){e instanceof s&&e.enterReservedWord(this)},ct.prototype.exitRule=function(e){e instanceof s&&e.exitReservedWord(this)},ct.prototype.accept=function(e){return e instanceof a?e.visitReservedWord(this):e.visitChildren(this)},g.ReservedWordContext=ct,g.prototype.reservedWord=function(){var e=new ct(this,this._ctx,this.state);this.enterRule(e,98,g.RULE_reservedWord);var t=0;try{switch(this.state=635,this._errHandler.sync(this),this._input.LA(1)){case g.Break:case g.Do:case g.Instanceof:case g.Typeof:case g.Case:case g.Else:case g.New:case g.Var:case g.Catch:case g.Finally:case g.Return:case g.Void:case g.Continue:case g.For:case g.Switch:case g.While:case g.Debugger:case g.Function:case g.This:case g.With:case g.Default:case g.If:case g.Throw:case g.Delete:case g.In:case g.Try:this.enterOuterAlt(e,1),this.state=632,this.keyword();break;case g.Class:case g.Enum:case g.Extends:case g.Super:case g.Const:case g.Export:case g.Import:case g.Implements:case g.Let:case g.Private:case g.Public:case g.Interface:case g.Package:case g.Protected:case g.Static:case g.Yield:this.enterOuterAlt(e,2),this.state=633,this.futureReservedWord();break;case g.NullLiteral:case g.BooleanLiteral:this.enterOuterAlt(e,3),this.state=634,(t=this._input.LA(1))!==g.NullLiteral&&t!==g.BooleanLiteral?this._errHandler.recoverInline(this):(this._errHandler.reportMatch(this),this.consume());break;default:throw new r.error.NoViableAltException(this)}}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},ut.prototype=Object.create(r.ParserRuleContext.prototype),ut.prototype.constructor=ut,ut.prototype.Break=function(){return this.getToken(g.Break,0)},ut.prototype.Do=function(){return this.getToken(g.Do,0)},ut.prototype.Instanceof=function(){return this.getToken(g.Instanceof,0)},ut.prototype.Typeof=function(){return this.getToken(g.Typeof,0)},ut.prototype.Case=function(){return this.getToken(g.Case,0)},ut.prototype.Else=function(){return this.getToken(g.Else,0)},ut.prototype.New=function(){return this.getToken(g.New,0)},ut.prototype.Var=function(){return this.getToken(g.Var,0)},ut.prototype.Catch=function(){return this.getToken(g.Catch,0)},ut.prototype.Finally=function(){return this.getToken(g.Finally,0)},ut.prototype.Return=function(){return this.getToken(g.Return,0)},ut.prototype.Void=function(){return this.getToken(g.Void,0)},ut.prototype.Continue=function(){return this.getToken(g.Continue,0)},ut.prototype.For=function(){return this.getToken(g.For,0)},ut.prototype.Switch=function(){return this.getToken(g.Switch,0)},ut.prototype.While=function(){return this.getToken(g.While,0)},ut.prototype.Debugger=function(){return this.getToken(g.Debugger,0)},ut.prototype.Function=function(){return this.getToken(g.Function,0)},ut.prototype.This=function(){return this.getToken(g.This,0)},ut.prototype.With=function(){return this.getToken(g.With,0)},ut.prototype.Default=function(){return this.getToken(g.Default,0)},ut.prototype.If=function(){return this.getToken(g.If,0)},ut.prototype.Throw=function(){return this.getToken(g.Throw,0)},ut.prototype.Delete=function(){return this.getToken(g.Delete,0)},ut.prototype.In=function(){return this.getToken(g.In,0)},ut.prototype.Try=function(){return this.getToken(g.Try,0)},ut.prototype.enterRule=function(e){e instanceof s&&e.enterKeyword(this)},ut.prototype.exitRule=function(e){e instanceof s&&e.exitKeyword(this)},ut.prototype.accept=function(e){return e instanceof a?e.visitKeyword(this):e.visitChildren(this)},g.KeywordContext=ut,g.prototype.keyword=function(){var e=new ut(this,this._ctx,this.state);this.enterRule(e,100,g.RULE_keyword);var t=0;try{this.enterOuterAlt(e,1),this.state=637,0!=((t=this._input.LA(1))-58&-32)||0==(1<<t-58&(1<<g.Break-58|1<<g.Do-58|1<<g.Instanceof-58|1<<g.Typeof-58|1<<g.Case-58|1<<g.Else-58|1<<g.New-58|1<<g.Var-58|1<<g.Catch-58|1<<g.Finally-58|1<<g.Return-58|1<<g.Void-58|1<<g.Continue-58|1<<g.For-58|1<<g.Switch-58|1<<g.While-58|1<<g.Debugger-58|1<<g.Function-58|1<<g.This-58|1<<g.With-58|1<<g.Default-58|1<<g.If-58|1<<g.Throw-58|1<<g.Delete-58|1<<g.In-58|1<<g.Try-58))?this._errHandler.recoverInline(this):(this._errHandler.reportMatch(this),this.consume())}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},gt.prototype=Object.create(r.ParserRuleContext.prototype),gt.prototype.constructor=gt,gt.prototype.Class=function(){return this.getToken(g.Class,0)},gt.prototype.Enum=function(){return this.getToken(g.Enum,0)},gt.prototype.Extends=function(){return this.getToken(g.Extends,0)},gt.prototype.Super=function(){return this.getToken(g.Super,0)},gt.prototype.Const=function(){return this.getToken(g.Const,0)},gt.prototype.Export=function(){return this.getToken(g.Export,0)},gt.prototype.Import=function(){return this.getToken(g.Import,0)},gt.prototype.Implements=function(){return this.getToken(g.Implements,0)},gt.prototype.Let=function(){return this.getToken(g.Let,0)},gt.prototype.Private=function(){return this.getToken(g.Private,0)},gt.prototype.Public=function(){return this.getToken(g.Public,0)},gt.prototype.Interface=function(){return this.getToken(g.Interface,0)},gt.prototype.Package=function(){return this.getToken(g.Package,0)},gt.prototype.Protected=function(){return this.getToken(g.Protected,0)},gt.prototype.Static=function(){return this.getToken(g.Static,0)},gt.prototype.Yield=function(){return this.getToken(g.Yield,0)},gt.prototype.enterRule=function(e){e instanceof s&&e.enterFutureReservedWord(this)},gt.prototype.exitRule=function(e){e instanceof s&&e.exitFutureReservedWord(this)},gt.prototype.accept=function(e){return e instanceof a?e.visitFutureReservedWord(this):e.visitChildren(this)},g.FutureReservedWordContext=gt,g.prototype.futureReservedWord=function(){var e=new gt(this,this._ctx,this.state);this.enterRule(e,102,g.RULE_futureReservedWord);var t=0;try{this.enterOuterAlt(e,1),this.state=639,0!=((t=this._input.LA(1))-84&-32)||0==(1<<t-84&(1<<g.Class-84|1<<g.Enum-84|1<<g.Extends-84|1<<g.Super-84|1<<g.Const-84|1<<g.Export-84|1<<g.Import-84|1<<g.Implements-84|1<<g.Let-84|1<<g.Private-84|1<<g.Public-84|1<<g.Interface-84|1<<g.Package-84|1<<g.Protected-84|1<<g.Static-84|1<<g.Yield-84))?this._errHandler.recoverInline(this):(this._errHandler.reportMatch(this),this.consume())}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},dt.prototype=Object.create(r.ParserRuleContext.prototype),dt.prototype.constructor=dt,dt.prototype.Identifier=function(){return this.getToken(g.Identifier,0)},dt.prototype.propertyName=function(){return this.getTypedRuleContext(le,0)},dt.prototype.enterRule=function(e){e instanceof s&&e.enterGetter(this)},dt.prototype.exitRule=function(e){e instanceof s&&e.exitGetter(this)},dt.prototype.accept=function(e){return e instanceof a?e.visitGetter(this):e.visitChildren(this)},g.GetterContext=dt,g.prototype.getter=function(){var e=new dt(this,this._ctx,this.state);this.enterRule(e,104,g.RULE_getter);try{if(this.enterOuterAlt(e,1),this.state=641,!this._input.LT(1).text.startsWith("get"))throw new r.error.FailedPredicateException(this,'this._input.LT(1).text.startsWith("get")');this.state=642,this.match(g.Identifier),this.state=643,this.propertyName()}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},ht.prototype=Object.create(r.ParserRuleContext.prototype),ht.prototype.constructor=ht,ht.prototype.Identifier=function(){return this.getToken(g.Identifier,0)},ht.prototype.propertyName=function(){return this.getTypedRuleContext(le,0)},ht.prototype.enterRule=function(e){e instanceof s&&e.enterSetter(this)},ht.prototype.exitRule=function(e){e instanceof s&&e.exitSetter(this)},ht.prototype.accept=function(e){return e instanceof a?e.visitSetter(this):e.visitChildren(this)},g.SetterContext=ht,g.prototype.setter=function(){var e=new ht(this,this._ctx,this.state);this.enterRule(e,106,g.RULE_setter);try{if(this.enterOuterAlt(e,1),this.state=645,!this._input.LT(1).text.startsWith("set"))throw new r.error.FailedPredicateException(this,'this._input.LT(1).text.startsWith("set")');this.state=646,this.match(g.Identifier),this.state=647,this.propertyName()}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},Tt.prototype=Object.create(r.ParserRuleContext.prototype),Tt.prototype.constructor=Tt,Tt.prototype.SemiColon=function(){return this.getToken(g.SemiColon,0)},Tt.prototype.EOF=function(){return this.getToken(g.EOF,0)},Tt.prototype.enterRule=function(e){e instanceof s&&e.enterEos(this)},Tt.prototype.exitRule=function(e){e instanceof s&&e.exitEos(this)},Tt.prototype.accept=function(e){return e instanceof a?e.visitEos(this):e.visitChildren(this)},g.EosContext=Tt,g.prototype.eos=function(){var e=new Tt(this,this._ctx,this.state);this.enterRule(e,108,g.RULE_eos);try{switch(this.state=653,this._errHandler.sync(this),this._interp.adaptivePredict(this._input,57,this._ctx)){case 1:this.enterOuterAlt(e,1),this.state=649,this.match(g.SemiColon);break;case 2:this.enterOuterAlt(e,2),this.state=650,this.match(g.EOF);break;case 3:if(this.enterOuterAlt(e,3),this.state=651,!this.lineTerminatorAhead())throw new r.error.FailedPredicateException(this,"this.lineTerminatorAhead()");break;case 4:if(this.enterOuterAlt(e,4),this.state=652,this._input.LT(1).type!=g.CloseBrace)throw new r.error.FailedPredicateException(this,"this._input.LT(1).type == ECMAScriptParser.CloseBrace")}}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},yt.prototype=Object.create(r.ParserRuleContext.prototype),yt.prototype.constructor=yt,yt.prototype.EOF=function(){return this.getToken(g.EOF,0)},yt.prototype.enterRule=function(e){e instanceof s&&e.enterEof(this)},yt.prototype.exitRule=function(e){e instanceof s&&e.exitEof(this)},yt.prototype.accept=function(e){return e instanceof a?e.visitEof(this):e.visitChildren(this)},g.EofContext=yt,g.prototype.eof=function(){var e=new yt(this,this._ctx,this.state);this.enterRule(e,110,g.RULE_eof);try{this.enterOuterAlt(e,1),this.state=655,this.match(g.EOF)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},g.prototype.sempred=function(e,t,n){switch(t){case 15:return this.continueStatement_sempred(e,n);case 16:return this.breakStatement_sempred(e,n);case 17:return this.returnStatement_sempred(e,n);case 25:return this.throwStatement_sempred(e,n);case 44:return this.singleExpression_sempred(e,n);case 52:return this.getter_sempred(e,n);case 53:return this.setter_sempred(e,n);case 54:return this.eos_sempred(e,n);default:throw"No predicate with index:"+t}},g.prototype.continueStatement_sempred=function(e,t){if(0===t)return!this.here(g.LineTerminator);throw"No predicate with index:"+t},g.prototype.breakStatement_sempred=function(e,t){if(1===t)return!this.here(g.LineTerminator);throw"No predicate with index:"+t},g.prototype.returnStatement_sempred=function(e,t){if(2===t)return!this.here(g.LineTerminator);throw"No predicate with index:"+t},g.prototype.throwStatement_sempred=function(e,t){if(3===t)return!this.here(g.LineTerminator);throw"No predicate with index:"+t},g.prototype.singleExpression_sempred=function(e,t){switch(t){case 4:return this.precpred(this._ctx,21);case 5:return this.precpred(this._ctx,20);case 6:return this.precpred(this._ctx,19);case 7:return this.precpred(this._ctx,18);case 8:return this.precpred(this._ctx,17);case 9:return this.precpred(this._ctx,16);case 10:return this.precpred(this._ctx,15);case 11:return this.precpred(this._ctx,14);case 12:return this.precpred(this._ctx,13);case 13:return this.precpred(this._ctx,12);case 14:return this.precpred(this._ctx,11);case 15:return this.precpred(this._ctx,10);case 16:return this.precpred(this._ctx,9);case 17:return this.precpred(this._ctx,36);case 18:return this.precpred(this._ctx,35);case 19:return this.precpred(this._ctx,34);case 20:return this.precpred(this._ctx,32);case 21:return!this.here(g.LineTerminator);case 22:return this.precpred(this._ctx,31);case 23:return!this.here(g.LineTerminator);case 24:return this.precpred(this._ctx,8);case 25:return this.precpred(this._ctx,7);default:throw"No predicate with index:"+t}},g.prototype.getter_sempred=function(e,t){if(26===t)return this._input.LT(1).text.startsWith("get");throw"No predicate with index:"+t},g.prototype.setter_sempred=function(e,t){if(27===t)return this._input.LT(1).text.startsWith("set");throw"No predicate with index:"+t},g.prototype.eos_sempred=function(e,t){switch(t){case 28:return this.lineTerminatorAhead();case 29:return this._input.LT(1).type==g.CloseBrace;default:throw"No predicate with index:"+t}},t.ECMAScriptParser=g},53177:(e,t,n)=>{var r=n(34764);function s(){return r.tree.ParseTreeVisitor.call(this),this}s.prototype=Object.create(r.tree.ParseTreeVisitor.prototype),s.prototype.constructor=s,s.prototype.visitProgram=function(e){return this.visitChildren(e)},s.prototype.visitSourceElements=function(e){return this.visitChildren(e)},s.prototype.visitSourceElement=function(e){return this.visitChildren(e)},s.prototype.visitStatement=function(e){return this.visitChildren(e)},s.prototype.visitStatementOrBlock=function(e){return this.visitChildren(e)},s.prototype.visitBlock=function(e){return this.visitChildren(e)},s.prototype.visitStatementList=function(e){return this.visitChildren(e)},s.prototype.visitVariableStatement=function(e){return this.visitChildren(e)},s.prototype.visitVariableDeclarationList=function(e){return this.visitChildren(e)},s.prototype.visitVariableDeclaration=function(e){return this.visitChildren(e)},s.prototype.visitInitialiser=function(e){return this.visitChildren(e)},s.prototype.visitEmptyStatement=function(e){return this.visitChildren(e)},s.prototype.visitExpressionStatement=function(e){return this.visitChildren(e)},s.prototype.visitIfStatement=function(e){return this.visitChildren(e)},s.prototype.visitDoWhileStatement=function(e){return this.visitChildren(e)},s.prototype.visitWhileStatement=function(e){return this.visitChildren(e)},s.prototype.visitForStatement=function(e){return this.visitChildren(e)},s.prototype.visitForVarStatement=function(e){return this.visitChildren(e)},s.prototype.visitForInStatement=function(e){return this.visitChildren(e)},s.prototype.visitForVarInStatement=function(e){return this.visitChildren(e)},s.prototype.visitContinueStatement=function(e){return this.visitChildren(e)},s.prototype.visitBreakStatement=function(e){return this.visitChildren(e)},s.prototype.visitReturnStatement=function(e){return this.visitChildren(e)},s.prototype.visitWithStatement=function(e){return this.visitChildren(e)},s.prototype.visitSwitchStatement=function(e){return this.visitChildren(e)},s.prototype.visitCaseBlock=function(e){return this.visitChildren(e)},s.prototype.visitCaseClauses=function(e){return this.visitChildren(e)},s.prototype.visitCaseClause=function(e){return this.visitChildren(e)},s.prototype.visitDefaultClause=function(e){return this.visitChildren(e)},s.prototype.visitLabelledStatement=function(e){return this.visitChildren(e)},s.prototype.visitThrowStatement=function(e){return this.visitChildren(e)},s.prototype.visitTryStatement=function(e){return this.visitChildren(e)},s.prototype.visitCatchProduction=function(e){return this.visitChildren(e)},s.prototype.visitFinallyProduction=function(e){return this.visitChildren(e)},s.prototype.visitDebuggerStatement=function(e){return this.visitChildren(e)},s.prototype.visitFunctionDeclaration=function(e){return this.visitChildren(e)},s.prototype.visitFormalParameterList=function(e){return this.visitChildren(e)},s.prototype.visitFunctionBody=function(e){return this.visitChildren(e)},s.prototype.visitArrayLiteral=function(e){return this.visitChildren(e)},s.prototype.visitElementList=function(e){return this.visitChildren(e)},s.prototype.visitElision=function(e){return this.visitChildren(e)},s.prototype.visitObjectLiteral=function(e){return this.visitChildren(e)},s.prototype.visitPropertyNameAndValueList=function(e){return this.visitChildren(e)},s.prototype.visitPropertyAssignmentExpression=function(e){return this.visitChildren(e)},s.prototype.visitPropertyGetter=function(e){return this.visitChildren(e)},s.prototype.visitPropertySetter=function(e){return this.visitChildren(e)},s.prototype.visitPropertyName=function(e){return this.visitChildren(e)},s.prototype.visitPropertySetParameterList=function(e){return this.visitChildren(e)},s.prototype.visitArguments=function(e){return this.visitChildren(e)},s.prototype.visitArgumentList=function(e){return this.visitChildren(e)},s.prototype.visitExpressionSequence=function(e){return this.visitChildren(e)},s.prototype.visitTernaryExpression=function(e){return this.visitChildren(e)},s.prototype.visitLogicalAndExpression=function(e){return this.visitChildren(e)},s.prototype.visitFuncDefExpression=function(e){return this.visitChildren(e)},s.prototype.visitPreIncrementExpression=function(e){return this.visitChildren(e)},s.prototype.visitObjectLiteralExpression=function(e){return this.visitChildren(e)},s.prototype.visitInExpression=function(e){return this.visitChildren(e)},s.prototype.visitLogicalOrExpression=function(e){return this.visitChildren(e)},s.prototype.visitNotExpression=function(e){return this.visitChildren(e)},s.prototype.visitPreDecreaseExpression=function(e){return this.visitChildren(e)},s.prototype.visitThisExpression=function(e){return this.visitChildren(e)},s.prototype.visitUnaryMinusExpression=function(e){return this.visitChildren(e)},s.prototype.visitPostDecreaseExpression=function(e){return this.visitChildren(e)},s.prototype.visitAssignmentExpression=function(e){return this.visitChildren(e)},s.prototype.visitTypeofExpression=function(e){return this.visitChildren(e)},s.prototype.visitInstanceofExpression=function(e){return this.visitChildren(e)},s.prototype.visitUnaryPlusExpression=function(e){return this.visitChildren(e)},s.prototype.visitDeleteExpression=function(e){return this.visitChildren(e)},s.prototype.visitEqualityExpression=function(e){return this.visitChildren(e)},s.prototype.visitBitXOrExpression=function(e){return this.visitChildren(e)},s.prototype.visitMultiplicativeExpression=function(e){return this.visitChildren(e)},s.prototype.visitBitShiftExpression=function(e){return this.visitChildren(e)},s.prototype.visitParenthesizedExpression=function(e){return this.visitChildren(e)},s.prototype.visitGetAttributeExpression=function(e){return this.visitChildren(e)},s.prototype.visitAdditiveExpression=function(e){return this.visitChildren(e)},s.prototype.visitRelationalExpression=function(e){return this.visitChildren(e)},s.prototype.visitPostIncrementExpression=function(e){return this.visitChildren(e)},s.prototype.visitFuncCallExpression=function(e){return this.visitChildren(e)},s.prototype.visitBitNotExpression=function(e){return this.visitChildren(e)},s.prototype.visitNewExpression=function(e){return this.visitChildren(e)},s.prototype.visitLiteralExpression=function(e){return this.visitChildren(e)},s.prototype.visitArrayLiteralExpression=function(e){return this.visitChildren(e)},s.prototype.visitMemberIndexExpression=function(e){return this.visitChildren(e)},s.prototype.visitIdentifierExpression=function(e){return this.visitChildren(e)},s.prototype.visitBitAndExpression=function(e){return this.visitChildren(e)},s.prototype.visitBitOrExpression=function(e){return this.visitChildren(e)},s.prototype.visitAssignmentOperatorExpression=function(e){return this.visitChildren(e)},s.prototype.visitVoidExpression=function(e){return this.visitChildren(e)},s.prototype.visitAssignmentOperator=function(e){return this.visitChildren(e)},s.prototype.visitNullLiteral=function(e){return this.visitChildren(e)},s.prototype.visitUndefinedLiteral=function(e){return this.visitChildren(e)},s.prototype.visitBooleanLiteral=function(e){return this.visitChildren(e)},s.prototype.visitStringLiteral=function(e){return this.visitChildren(e)},s.prototype.visitRegularExpressionLiteral=function(e){return this.visitChildren(e)},s.prototype.visitNumericLiteralWrapper=function(e){return this.visitChildren(e)},s.prototype.visitIntegerLiteral=function(e){return this.visitChildren(e)},s.prototype.visitDecimalLiteral=function(e){return this.visitChildren(e)},s.prototype.visitHexIntegerLiteral=function(e){return this.visitChildren(e)},s.prototype.visitOctalIntegerLiteral=function(e){return this.visitChildren(e)},s.prototype.visitIdentifierName=function(e){return this.visitChildren(e)},s.prototype.visitReservedWord=function(e){return this.visitChildren(e)},s.prototype.visitKeyword=function(e){return this.visitChildren(e)},s.prototype.visitFutureReservedWord=function(e){return this.visitChildren(e)},s.prototype.visitGetter=function(e){return this.visitChildren(e)},s.prototype.visitSetter=function(e){return this.visitChildren(e)},s.prototype.visitEos=function(e){return this.visitChildren(e)},s.prototype.visitEof=function(e){return this.visitChildren(e)},t.g=s},72706:(e,t,n)=>{var r=n(34764),s=["","`\b\t\t","\t\t\t\t","\b\t\b\t\t\t\n\t\n\v\t\v","\f\t\f\r\t\r\t\t","\t\t\t\t","\t\t\t","\t\t\t\t","\t\t\t",'\t\t \t !\t!"\t"#',"\t#$\t$%\t%&\t&'\t'(\t()\t)","*\t*+\t+,\t,-\t-.\t./\t/0\t0","1\t12\t23\t34\t45\t56\t67\t7","8\t89\t9:\t:;\t;<\t<=\t=>\t>","?\t?@\t@A\tAB\tBC\tCD\tDE\tE","F\tFG\tGH\tHI\tIJ\tJK\tKL\tL","M\tMN\tNO\tOP\tPQ\tQR\tRS\tS","T\tTU\tUV\tVW\tWX\tXY\tYZ\tZ","[\t[\\\t\\]\t]^\t^_\t_`\t`a\ta","b\tbc\tcd\tde\tef\tfg\tgh\th","i\tij\tjk\tkl\tlm\tmn\tno\to","p\tpq\tqr\trs\tst\ttu\tuv\tv","w\twx\txy\tyz\tz","","","","","\b","\b\b\b\b\b\b\t\t","\t\t\t\t\t\t\t\n\n","\n\n\n\n\n\v\v\v","\f\f\f\f\f\r\r\r","\r\r","","","","","","","","","","","","","","","     !!",'!!!!!!!"""','"""######',"$$$$$$%%%%","\n%%%%\n%%%\n%%","\n%%%&&&\n&\f&&\v","&''''''\n''","''\n'(((((","(\n((((\n()))","\n)\f))\v)))\n)\r))",")\n)****\n*\r**","++++\n+\r++,,",",,\n,\r,,---\n-","...\n...//00","0011222333","4455667778","8999:::;;<","<==>>>???@","@AABBCCDDD","EEFFFGGGHH","IIJJJKKKLL","LMMMNNNOOP","PPQQQRRRSS","STTTUUUVVV","WWWXXXYYYZ","ZZZ[[[[\\\\\\","\\]]]]^^^^","\n^^^__````\n","`\f``\v``````\n","`\f``\v```\n`aa","aaaa\na\faa\vaa","aaaaaaaa\na\fa","a\vaaaaa\nabb","b\nbccddddd\n","deeffgghhi","ijj\njjjjjj\n","jkkk\nkkkll\n","l\rllmmm\nm\rmm","nnn\nnnn\nn\rnn","oooo\no\foo\voo","oooo\no\foo\voo","o\nopppppp\np\fp","p\vpppppppp","pp\np\fpp\vpppp","p\npqqq\nqrr\nr","ss\nstt\ntuuu","vv\nv\rvvwww\nw\fw","w\vwxxx\nxxx\nx","xxx\nxyy\nyzz","z\nz{","\t\v\r\b\t\n\v","\f\r!","#%')+-/135","79;= ?!A\"C#E$G%I&K'M(O)Q*S+U,W-Y.[/]0_1a2c3e4g5","i6k7m8o9q:s;u<w=y>{?}@ABCDEF","GHIJKLMNOP","QRSTUVWXYZ","[\\]^_`","","","","","\bHHTTWWhhttwwHHhh","TTttDDddQQqqZZzzLLl","l\f\f))^^\f\f$$^^","^^3;2;292;CHc","h23GGgg--//\v","\r(*]_\v\r#%]_","]_\v",'\v""\f\fC\\aac|',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","2;","","","","","","","","","","","","","","","","","","","","","","","","","","","\t\v","\r","","","","","!#%","')","+-","/1","35","79;","=?","AC","EG","IK","MOQ","SU","WY","[]","_a","ceg","ik","mo","qs","uw","y{}","","","","","","","","","","","","","","","","","","\t","\v\r","","","","","!","#%","')","+-","/13","57","9;","=?","AC","EGI","KM","OQ","SU","WY","[]_","ac","eg","ik","mo","qsu","wy","{}","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","f","gh","t","gv","wt","p","tc","ku","g\bh","tq","o\n","ko","rq","tv\f","cu","i","nq","dc","n","pq","pnq","ec","n","cu","ug","tv","k","h","gnk","h","gn","ug","y","jk","ng","h","qt","kp"," v","t{",'"h',"kp","cnn","{$","yk","vj&","g","zeg","rv","(n","co","df","c*q","t,","cp","f.","pq","v0k","u2","Pq","pg4","V","twg","6H","cn","ug8","e","ncu","u:","{k","gn","f<","fgn",">r","cu","u@","eq","pvk","pw","gB","dt","gc","mDc","u{","pe","Fc","yc","kvH","%v","","","\f","","v","","","","\b%J","yz","","L","\t","\t\t","\t\t","","","`","a","N","\t\t","\t\t","\t","","o","p","P","ef","","","","2","","","R","2","\tg","","T","2\t","h","","V","2\t","i","","X","jk","","ZY-","l","","\t\b\\0","^0","00","`,","b*","\b2d+","\b3f",".h","<j","=l,",",n","?p","]\b9r","_\b:","t~","v`x","(z",">>","|@","@~","-","/","1","'","11","","}","\bF","\bG\b",">","@","??","@","?",">?",">","@","#?","B","/","@","-?","/","?",",?","B?","1","?","'?","(","?","~?","`","?",">>","?","@@","?",",,?","1","1?","v","wx","","","\b^\t\v","",")d\n\t","","","",")","$d","\n\n","","","","$","","))",")","b","","",")","))$","$$","b","","","","$$","$","","cd","","\n\v","^","\v^","I%","\t","\f\t\r","\t","\t","\t","l","","m","l0","","","lj","","n","f","","","0","f","","","\t\t","","f","","",")","ru","","","",")","$s","u","","","$","",")","))","q","","","","))",")$","$$","q","","","","$$","$","","tu","","\t","\t","","\t","^","\t","\t","","","%\n","","","","^v","","","","\f","","","\t","y","\t","","9","","","","\n%","239:FG\b","\b"].join(""),a=(new r.atn.ATNDeserializer).deserialize(s),o=a.decisionToState.map((function(e,t){return new r.dfa.DFA(e,t)}));function i(e){return r.Lexer.call(this,e),this._interp=new r.atn.LexerATNSimulator(this,a,o,new r.PredictionContextCache),this}i.prototype=Object.create(r.Lexer.prototype),i.prototype.constructor=i,Object.defineProperty(i.prototype,"atn",{get:function(){return a}}),i.EOF=r.Token.EOF,i.DEF=1,i.RETURN=2,i.RAISE=3,i.FROM=4,i.IMPORT=5,i.AS=6,i.GLOBAL=7,i.NONLOCAL=8,i.ASSERT=9,i.IF=10,i.ELIF=11,i.ELSE=12,i.WHILE=13,i.FOR=14,i.IN=15,i.TRY=16,i.FINALLY=17,i.WITH=18,i.EXCEPT=19,i.LAMBDA=20,i.OR=21,i.AND=22,i.NOT=23,i.IS=24,i.NONE=25,i.TRUE=26,i.FALSE=27,i.CLASS=28,i.YIELD=29,i.DEL=30,i.PASS=31,i.CONTINUE=32,i.BREAK=33,i.ASYNC=34,i.AWAIT=35,i.NEWLINE=36,i.NAME=37,i.STRING_LITERAL=38,i.BYTES_LITERAL=39,i.DECIMAL_INTEGER=40,i.OCT_INTEGER=41,i.HEX_INTEGER=42,i.BIN_INTEGER=43,i.FLOAT_NUMBER=44,i.IMAG_NUMBER=45,i.DOT=46,i.ELLIPSIS=47,i.STAR=48,i.OPEN_PAREN=49,i.CLOSE_PAREN=50,i.COMMA=51,i.COLON=52,i.SEMI_COLON=53,i.POWER=54,i.ASSIGN=55,i.OPEN_BRACK=56,i.CLOSE_BRACK=57,i.OR_OP=58,i.XOR=59,i.AND_OP=60,i.LEFT_SHIFT=61,i.RIGHT_SHIFT=62,i.ADD=63,i.MINUS=64,i.DIV=65,i.MOD=66,i.IDIV=67,i.NOT_OP=68,i.OPEN_BRACE=69,i.CLOSE_BRACE=70,i.LESS_THAN=71,i.GREATER_THAN=72,i.EQUALS=73,i.GT_EQ=74,i.LT_EQ=75,i.NOT_EQ_1=76,i.NOT_EQ_2=77,i.AT=78,i.ARROW=79,i.ADD_ASSIGN=80,i.SUB_ASSIGN=81,i.MULT_ASSIGN=82,i.AT_ASSIGN=83,i.DIV_ASSIGN=84,i.MOD_ASSIGN=85,i.AND_ASSIGN=86,i.OR_ASSIGN=87,i.XOR_ASSIGN=88,i.LEFT_SHIFT_ASSIGN=89,i.RIGHT_SHIFT_ASSIGN=90,i.POWER_ASSIGN=91,i.IDIV_ASSIGN=92,i.SKIP_=93,i.UNKNOWN_CHAR=94,i.prototype.channelNames=["DEFAULT_TOKEN_CHANNEL","HIDDEN"],i.prototype.modeNames=["DEFAULT_MODE"],i.prototype.literalNames=[null,"'def'","'return'","'raise'","'from'","'import'","'as'","'global'","'nonlocal'","'assert'","'if'","'elif'","'else'","'while'","'for'","'in'","'try'","'finally'","'with'","'except'","'lambda'","'or'","'and'","'not'","'is'","'None'","'True'","'False'","'class'","'yield'","'del'","'pass'","'continue'","'break'","'async'","'await'",null,null,null,null,null,null,null,null,null,null,"'.'","'...'","'*'","'('","')'","','","':'","';'","'**'","'='","'['","']'","'|'","'^'","'&'","'<<'","'>>'","'+'","'-'","'/'","'%'","'//'","'~'","'{'","'}'","'<'","'>'","'=='","'>='","'<='","'<>'","'!='","'@'","'->'","'+='","'-='","'*='","'@='","'/='","'%='","'&='","'|='","'^='","'<<='","'>>='","'**='","'//='"],i.prototype.symbolicNames=[null,"DEF","RETURN","RAISE","FROM","IMPORT","AS","GLOBAL","NONLOCAL","ASSERT","IF","ELIF","ELSE","WHILE","FOR","IN","TRY","FINALLY","WITH","EXCEPT","LAMBDA","OR","AND","NOT","IS","NONE","TRUE","FALSE","CLASS","YIELD","DEL","PASS","CONTINUE","BREAK","ASYNC","AWAIT","NEWLINE","NAME","STRING_LITERAL","BYTES_LITERAL","DECIMAL_INTEGER","OCT_INTEGER","HEX_INTEGER","BIN_INTEGER","FLOAT_NUMBER","IMAG_NUMBER","DOT","ELLIPSIS","STAR","OPEN_PAREN","CLOSE_PAREN","COMMA","COLON","SEMI_COLON","POWER","ASSIGN","OPEN_BRACK","CLOSE_BRACK","OR_OP","XOR","AND_OP","LEFT_SHIFT","RIGHT_SHIFT","ADD","MINUS","DIV","MOD","IDIV","NOT_OP","OPEN_BRACE","CLOSE_BRACE","LESS_THAN","GREATER_THAN","EQUALS","GT_EQ","LT_EQ","NOT_EQ_1","NOT_EQ_2","AT","ARROW","ADD_ASSIGN","SUB_ASSIGN","MULT_ASSIGN","AT_ASSIGN","DIV_ASSIGN","MOD_ASSIGN","AND_ASSIGN","OR_ASSIGN","XOR_ASSIGN","LEFT_SHIFT_ASSIGN","RIGHT_SHIFT_ASSIGN","POWER_ASSIGN","IDIV_ASSIGN","SKIP_","UNKNOWN_CHAR"],i.prototype.ruleNames=["DEF","RETURN","RAISE","FROM","IMPORT","AS","GLOBAL","NONLOCAL","ASSERT","IF","ELIF","ELSE","WHILE","FOR","IN","TRY","FINALLY","WITH","EXCEPT","LAMBDA","OR","AND","NOT","IS","NONE","TRUE","FALSE","CLASS","YIELD","DEL","PASS","CONTINUE","BREAK","ASYNC","AWAIT","NEWLINE","NAME","STRING_LITERAL","BYTES_LITERAL","DECIMAL_INTEGER","OCT_INTEGER","HEX_INTEGER","BIN_INTEGER","FLOAT_NUMBER","IMAG_NUMBER","DOT","ELLIPSIS","STAR","OPEN_PAREN","CLOSE_PAREN","COMMA","COLON","SEMI_COLON","POWER","ASSIGN","OPEN_BRACK","CLOSE_BRACK","OR_OP","XOR","AND_OP","LEFT_SHIFT","RIGHT_SHIFT","ADD","MINUS","DIV","MOD","IDIV","NOT_OP","OPEN_BRACE","CLOSE_BRACE","LESS_THAN","GREATER_THAN","EQUALS","GT_EQ","LT_EQ","NOT_EQ_1","NOT_EQ_2","AT","ARROW","ADD_ASSIGN","SUB_ASSIGN","MULT_ASSIGN","AT_ASSIGN","DIV_ASSIGN","MOD_ASSIGN","AND_ASSIGN","OR_ASSIGN","XOR_ASSIGN","LEFT_SHIFT_ASSIGN","RIGHT_SHIFT_ASSIGN","POWER_ASSIGN","IDIV_ASSIGN","SKIP_","UNKNOWN_CHAR","SHORT_STRING","LONG_STRING","LONG_STRING_ITEM","LONG_STRING_CHAR","STRING_ESCAPE_SEQ","NON_ZERO_DIGIT","DIGIT","OCT_DIGIT","HEX_DIGIT","BIN_DIGIT","POINT_FLOAT","EXPONENT_FLOAT","INT_PART","FRACTION","EXPONENT","SHORT_BYTES","LONG_BYTES","LONG_BYTES_ITEM","SHORT_BYTES_CHAR_NO_SINGLE_QUOTE","SHORT_BYTES_CHAR_NO_DOUBLE_QUOTE","LONG_BYTES_CHAR","BYTES_ESCAPE_SEQ","SPACES","COMMENT","LINE_JOINING","ID_START","ID_CONTINUE"],i.prototype.grammarFileName="Python3.g4";let l=n(80592).CommonToken,p=n(72065).Python3Parser,m=i;(i=function(){m.apply(this,arguments),this.reset.call(this)}).prototype=Object.create(m.prototype),i.prototype.constructor=i,i.prototype.reset=function(){this.token_queue=[],this.indents=[],this.opened=0,r.Lexer.prototype.reset.call(this)},i.prototype.emitToken=function(e){this._token=e,this.token_queue.push(e)},i.prototype.nextToken=function(){if(this._input.LA(1)===p.EOF&&this.indents.length){for(this.token_queue=this.token_queue.filter((function(e){return e.type!==p.EOF})),this.emitToken(this.commonToken(p.NEWLINE,"\n"));this.indents.length;)this.emitToken(this.createDedent()),this.indents.pop();this.emitToken(this.commonToken(p.EOF,"<EOF>"))}let e=r.Lexer.prototype.nextToken.call(this);return this.token_queue.length?this.token_queue.shift():e},i.prototype.createDedent=function(){return this.commonToken(p.DEDENT,"")},i.prototype.commonToken=function(e,t){let n=this.getCharIndex()-1,s=t.length?n-t.length+1:n;return new l(this._tokenFactorySourcePair,e,r.Lexer.DEFAULT_TOKEN_CHANNEL,s,n)},i.prototype.getIndentationCount=function(e){let t=0;for(let n=0;n<e.length;n++)"\t"===e[n]?t+=8-t%8:t++;return t},i.prototype.atStartOfInput=function(){return 0===this.getCharIndex()},i.prototype.action=function(e,t,n){switch(t){case 35:this.NEWLINE_action(e,n);break;case 48:this.OPEN_PAREN_action(e,n);break;case 49:this.CLOSE_PAREN_action(e,n);break;case 55:this.OPEN_BRACK_action(e,n);break;case 56:this.CLOSE_BRACK_action(e,n);break;case 68:this.OPEN_BRACE_action(e,n);break;case 69:this.CLOSE_BRACE_action(e,n);break;default:throw"No registered action for:"+t}},i.prototype.NEWLINE_action=function(e,t){if(0!==t)throw"No registered action for:"+t;{let e=this.text.replace(/[^\r\n]+/g,""),t=this.text.replace(/[\r\n]+/g,""),n=this._input.LA(1);if(this.opened>0||13===n||10===n||35===n)this.skip();else{this.emitToken(this.commonToken(p.NEWLINE,e));let n=this.getIndentationCount(t),r=this.indents.length?this.indents[this.indents.length-1]:0;if(n===r)this.skip();else if(n>r)this.indents.push(n),this.emitToken(this.commonToken(p.INDENT,t));else for(;this.indents.length&&this.indents[this.indents.length-1]>n;)this.emitToken(this.createDedent()),this.indents.pop()}}},i.prototype.OPEN_PAREN_action=function(e,t){if(1!==t)throw"No registered action for:"+t;this.opened++},i.prototype.CLOSE_PAREN_action=function(e,t){if(2!==t)throw"No registered action for:"+t;this.opened--},i.prototype.OPEN_BRACK_action=function(e,t){if(3!==t)throw"No registered action for:"+t;this.opened++},i.prototype.CLOSE_BRACK_action=function(e,t){if(4!==t)throw"No registered action for:"+t;this.opened--},i.prototype.OPEN_BRACE_action=function(e,t){if(5!==t)throw"No registered action for:"+t;this.opened++},i.prototype.CLOSE_BRACE_action=function(e,t){if(6!==t)throw"No registered action for:"+t;this.opened--},i.prototype.sempred=function(e,t,n){if(35===t)return this.NEWLINE_sempred(e,n);throw"No registered predicate for:"+t},i.prototype.NEWLINE_sempred=function(e,t){if(0===t)return this.atStartOfInput();throw"No predicate with index:"+t},t.Python3Lexer=i},6512:(e,t,n)=>{var r=n(34764);function s(){return r.tree.ParseTreeListener.call(this),this}s.prototype=Object.create(r.tree.ParseTreeListener.prototype),s.prototype.constructor=s,s.prototype.enterSingle_input=function(e){},s.prototype.exitSingle_input=function(e){},s.prototype.enterFile_input=function(e){},s.prototype.exitFile_input=function(e){},s.prototype.enterEval_input=function(e){},s.prototype.exitEval_input=function(e){},s.prototype.enterDecorator=function(e){},s.prototype.exitDecorator=function(e){},s.prototype.enterDecorators=function(e){},s.prototype.exitDecorators=function(e){},s.prototype.enterDecorated=function(e){},s.prototype.exitDecorated=function(e){},s.prototype.enterAsync_funcdef=function(e){},s.prototype.exitAsync_funcdef=function(e){},s.prototype.enterFuncdef=function(e){},s.prototype.exitFuncdef=function(e){},s.prototype.enterParameters=function(e){},s.prototype.exitParameters=function(e){},s.prototype.enterTypedargslist=function(e){},s.prototype.exitTypedargslist=function(e){},s.prototype.enterTfpdef=function(e){},s.prototype.exitTfpdef=function(e){},s.prototype.enterVarargslist=function(e){},s.prototype.exitVarargslist=function(e){},s.prototype.enterVfpdef=function(e){},s.prototype.exitVfpdef=function(e){},s.prototype.enterStmt=function(e){},s.prototype.exitStmt=function(e){},s.prototype.enterSimple_stmt=function(e){},s.prototype.exitSimple_stmt=function(e){},s.prototype.enterSmall_stmt=function(e){},s.prototype.exitSmall_stmt=function(e){},s.prototype.enterExpr_stmt=function(e){},s.prototype.exitExpr_stmt=function(e){},s.prototype.enterAssign_stmt=function(e){},s.prototype.exitAssign_stmt=function(e){},s.prototype.enterAnnassign=function(e){},s.prototype.exitAnnassign=function(e){},s.prototype.enterTestlist_star_expr=function(e){},s.prototype.exitTestlist_star_expr=function(e){},s.prototype.enterAugassign=function(e){},s.prototype.exitAugassign=function(e){},s.prototype.enterDel_stmt=function(e){},s.prototype.exitDel_stmt=function(e){},s.prototype.enterPass_stmt=function(e){},s.prototype.exitPass_stmt=function(e){},s.prototype.enterFlow_stmt=function(e){},s.prototype.exitFlow_stmt=function(e){},s.prototype.enterBreak_stmt=function(e){},s.prototype.exitBreak_stmt=function(e){},s.prototype.enterContinue_stmt=function(e){},s.prototype.exitContinue_stmt=function(e){},s.prototype.enterReturn_stmt=function(e){},s.prototype.exitReturn_stmt=function(e){},s.prototype.enterYield_stmt=function(e){},s.prototype.exitYield_stmt=function(e){},s.prototype.enterRaise_stmt=function(e){},s.prototype.exitRaise_stmt=function(e){},s.prototype.enterImport_stmt=function(e){},s.prototype.exitImport_stmt=function(e){},s.prototype.enterImport_name=function(e){},s.prototype.exitImport_name=function(e){},s.prototype.enterImport_from=function(e){},s.prototype.exitImport_from=function(e){},s.prototype.enterImport_as_name=function(e){},s.prototype.exitImport_as_name=function(e){},s.prototype.enterDotted_as_name=function(e){},s.prototype.exitDotted_as_name=function(e){},s.prototype.enterImport_as_names=function(e){},s.prototype.exitImport_as_names=function(e){},s.prototype.enterDotted_as_names=function(e){},s.prototype.exitDotted_as_names=function(e){},s.prototype.enterDotted_name=function(e){},s.prototype.exitDotted_name=function(e){},s.prototype.enterGlobal_stmt=function(e){},s.prototype.exitGlobal_stmt=function(e){},s.prototype.enterNonlocal_stmt=function(e){},s.prototype.exitNonlocal_stmt=function(e){},s.prototype.enterAssert_stmt=function(e){},s.prototype.exitAssert_stmt=function(e){},s.prototype.enterCompound_stmt=function(e){},s.prototype.exitCompound_stmt=function(e){},s.prototype.enterAsync_stmt=function(e){},s.prototype.exitAsync_stmt=function(e){},s.prototype.enterIf_stmt=function(e){},s.prototype.exitIf_stmt=function(e){},s.prototype.enterWhile_stmt=function(e){},s.prototype.exitWhile_stmt=function(e){},s.prototype.enterFor_stmt=function(e){},s.prototype.exitFor_stmt=function(e){},s.prototype.enterTry_stmt=function(e){},s.prototype.exitTry_stmt=function(e){},s.prototype.enterWith_stmt=function(e){},s.prototype.exitWith_stmt=function(e){},s.prototype.enterWith_item=function(e){},s.prototype.exitWith_item=function(e){},s.prototype.enterExcept_clause=function(e){},s.prototype.exitExcept_clause=function(e){},s.prototype.enterSuite=function(e){},s.prototype.exitSuite=function(e){},s.prototype.enterTest=function(e){},s.prototype.exitTest=function(e){},s.prototype.enterInline_if=function(e){},s.prototype.exitInline_if=function(e){},s.prototype.enterTest_nocond=function(e){},s.prototype.exitTest_nocond=function(e){},s.prototype.enterLambdef=function(e){},s.prototype.exitLambdef=function(e){},s.prototype.enterLambdef_nocond=function(e){},s.prototype.exitLambdef_nocond=function(e){},s.prototype.enterOr_test=function(e){},s.prototype.exitOr_test=function(e){},s.prototype.enterAnd_test=function(e){},s.prototype.exitAnd_test=function(e){},s.prototype.enterNot_test=function(e){},s.prototype.exitNot_test=function(e){},s.prototype.enterComparison=function(e){},s.prototype.exitComparison=function(e){},s.prototype.enterComp_op=function(e){},s.prototype.exitComp_op=function(e){},s.prototype.enterStar_expr=function(e){},s.prototype.exitStar_expr=function(e){},s.prototype.enterExpr=function(e){},s.prototype.exitExpr=function(e){},s.prototype.enterXor_expr=function(e){},s.prototype.exitXor_expr=function(e){},s.prototype.enterAnd_expr=function(e){},s.prototype.exitAnd_expr=function(e){},s.prototype.enterShift_expr=function(e){},s.prototype.exitShift_expr=function(e){},s.prototype.enterArith_expr=function(e){},s.prototype.exitArith_expr=function(e){},s.prototype.enterTerm=function(e){},s.prototype.exitTerm=function(e){},s.prototype.enterFactor=function(e){},s.prototype.exitFactor=function(e){},s.prototype.enterPower=function(e){},s.prototype.exitPower=function(e){},s.prototype.enterObjectAtom=function(e){},s.prototype.exitObjectAtom=function(e){},s.prototype.enterArrayAtom=function(e){},s.prototype.exitArrayAtom=function(e){},s.prototype.enterEllipsesAtom=function(e){},s.prototype.exitEllipsesAtom=function(e){},s.prototype.enterSetAtom=function(e){},s.prototype.exitSetAtom=function(e){},s.prototype.enterNumberAtom=function(e){},s.prototype.exitNumberAtom=function(e){},s.prototype.enterStringAtom=function(e){},s.prototype.exitStringAtom=function(e){},s.prototype.enterIndexAccess=function(e){},s.prototype.exitIndexAccess=function(e){},s.prototype.enterNoneAtom=function(e){},s.prototype.exitNoneAtom=function(e){},s.prototype.enterBooleanAtom=function(e){},s.prototype.exitBooleanAtom=function(e){},s.prototype.enterFunctionCall=function(e){},s.prototype.exitFunctionCall=function(e){},s.prototype.enterAttributeAccess=function(e){},s.prototype.exitAttributeAccess=function(e){},s.prototype.enterIdentifierAtom=function(e){},s.prototype.exitIdentifierAtom=function(e){},s.prototype.enterTestlist_comp=function(e){},s.prototype.exitTestlist_comp=function(e){},s.prototype.enterArray_literal=function(e){},s.prototype.exitArray_literal=function(e){},s.prototype.enterObject_literal=function(e){},s.prototype.exitObject_literal=function(e){},s.prototype.enterSet_literal=function(e){},s.prototype.exitSet_literal=function(e){},s.prototype.enterParen_trailer=function(e){},s.prototype.exitParen_trailer=function(e){},s.prototype.enterBracket_trailer=function(e){},s.prototype.exitBracket_trailer=function(e){},s.prototype.enterDot_trailer=function(e){},s.prototype.exitDot_trailer=function(e){},s.prototype.enterSubscriptlist=function(e){},s.prototype.exitSubscriptlist=function(e){},s.prototype.enterSubscript=function(e){},s.prototype.exitSubscript=function(e){},s.prototype.enterSliceop=function(e){},s.prototype.exitSliceop=function(e){},s.prototype.enterExprlist=function(e){},s.prototype.exitExprlist=function(e){},s.prototype.enterTestlist=function(e){},s.prototype.exitTestlist=function(e){},s.prototype.enterDictorsetmaker=function(e){},s.prototype.exitDictorsetmaker=function(e){},s.prototype.enterClassdef=function(e){},s.prototype.exitClassdef=function(e){},s.prototype.enterArglist=function(e){},s.prototype.exitArglist=function(e){},s.prototype.enterArgument=function(e){},s.prototype.exitArgument=function(e){},s.prototype.enterComp_iter=function(e){},s.prototype.exitComp_iter=function(e){},s.prototype.enterComp_for=function(e){},s.prototype.exitComp_for=function(e){},s.prototype.enterComp_if=function(e){},s.prototype.exitComp_if=function(e){},s.prototype.enterEncoding_decl=function(e){},s.prototype.exitEncoding_decl=function(e){},s.prototype.enterYield_expr=function(e){},s.prototype.exitYield_expr=function(e){},s.prototype.enterYield_arg=function(e){},s.prototype.exitYield_arg=function(e){},s.prototype.enterString_literal=function(e){},s.prototype.exitString_literal=function(e){},s.prototype.enterIntegerLiteral=function(e){},s.prototype.exitIntegerLiteral=function(e){},s.prototype.enterOctLiteral=function(e){},s.prototype.exitOctLiteral=function(e){},s.prototype.enterHexLiteral=function(e){},s.prototype.exitHexLiteral=function(e){},s.prototype.enterBinLiteral=function(e){},s.prototype.exitBinLiteral=function(e){},s.prototype.enterFloatLiteral=function(e){},s.prototype.exitFloatLiteral=function(e){},s.prototype.enterImagLiteral=function(e){},s.prototype.exitImagLiteral=function(e){},s.prototype.enterInteger_literal=function(e){},s.prototype.exitInteger_literal=function(e){},s.prototype.enterOct_literal=function(e){},s.prototype.exitOct_literal=function(e){},s.prototype.enterHex_literal=function(e){},s.prototype.exitHex_literal=function(e){},s.prototype.enterBin_literal=function(e){},s.prototype.exitBin_literal=function(e){},s.prototype.enterFloat_literal=function(e){},s.prototype.exitFloat_literal=function(e){},s.prototype.enterImag_literal=function(e){},s.prototype.exitImag_literal=function(e){},s.prototype.enterBoolean_literal=function(e){},s.prototype.exitBoolean_literal=function(e){},s.prototype.enterNone_literal=function(e){},s.prototype.exitNone_literal=function(e){},s.prototype.enterIdentifier=function(e){},s.prototype.exitIdentifier=function(e){},s.prototype.enterEof=function(e){},s.prototype.exitEof=function(e){},s.prototype.enterEos=function(e){},s.prototype.exitEos=function(e){},t.a=s},72065:(e,t,n)=>{var r=n(34764),s=n(6512).a,a=n(85185).f,o=["","b\t\t\t","\t\t\t","\b\t\b\t\t\t\n\t\n\v\t\v\f\t\f","\r\t\r\t\t\t","\t\t\t\t","\t\t\t","\t\t\t\t","\t\t\t",'\t \t !\t!"\t"#\t#$\t$',"%\t%&\t&'\t'(\t()\t)*\t*+\t+",",\t,-\t-.\t./\t/0\t01\t12\t2","3\t34\t45\t56\t67\t78\t89\t9",":\t:;\t;<\t<=\t=>\t>?\t?@\t@","A\tAB\tBC\tCD\tDE\tEF\tFG\tG","H\tHI\tIJ\tJK\tKL\tLM\tMN\tN","O\tOP\tPQ\tQR\tRS\tST\tTU\tU","V\tVW\tWX\tXY\tYZ\tZ[\t[\\\t\\","]\t]^\t^_\t_`\t`a\tab\tbc\tc","d\tde\tef\tfg\tgh\thi\tij\tj","","\n\n\f","\v","\n\f\v","","\n\n","\n\r","","\n\b\b\b\t\t\t\t","\t\t\n\t\t\t\t\n\n\n","\n\n\n\n\v\v\v","\v\n\v\v\v\v\v","\v\n\v\v\n\v\f\v\v","\v\v\v\v\v\v","\n\v\v\v\v\v\v","\n\v\v\n\v\f\v\v\v","\v\v\v\v\v\v","\n\v\v\n\v\v\n\v\v","\v\v\v\n\v\v","\n\v\v\n\v\v\v\v","\n\v\v\v\v\v","\v\n\v\v\n\v\f\v\v","\v\v\v\v\v\v\v","\n\v\v\n\v\v\n\v","\v\v\v\v\n\v\v","\n\v\f\f\f\f\n\f\r","\r\r\r\n\r\r\r\r\r\r","\n\r\r\n\r\f\r\r\v\r\r","\r\r\r\n\r\r\r\r\r\r","\n\r\r\n\r\f\r\r\v\r\r","\r\r\r\r\n\r\r\n\r\r","\n\r\r\r\r\r\n\r\r\n\r","\r\n\r\r\r\r\n\r\r\r","\r\r\r\n\r\r\n\r\f\r\r\v","\r\r\r\r\r\r\n\r\r\n","\r\r\n\r\r\r\r\r\n\r","\r\n\r","\n","","\n","\n","\n\n","\n\n\r","","\n\n","\n","\n\f\v","\n","","\n","","\n","\n\n","\n  "," !!!\n!\f!!\v!!","!!\n!\r!!!\n!!!",'!!!!!!\n!""','""\n"####\n#$',"$$$\n$\f$$\v$$$","\n$%%%%\n%\f%%\v%","&&&&\n&\f&&\v&'","''''\n'\f''\v'","(((((\n(\f((\v(",")))))\n)****","******\n*+++","++\n+,,,,,,,",",,,\n,\f,,\v,,,",",,\n,-------","-\n-........","..\n.///////","/\n/\r//////\n/","////\n/////\n","/00000\n0\f00\v","00001111\n12","2222\n22\n233","333\n3\r33333","\n3444\n444\n45","5555666\n677","7\n7777888\n8","8889999\n9\f99","\v9::::\n:\f::\v:",";;;;\n;<<<<","<\n<\f<<\v<====","==========","\n=>>>????\n?\f?","?\v?@@@@\n@\f@@","\v@AAAA\nA\fAA\vA","BBBB\nB\fBB\vBC","CCC\nC\fCC\vCDD","DD\nD\fDD\vDEEE","E\nEFFFF\nFGG","GGGGGG\nG\rGG","GGGG\nGGGGG","GGG\nG\fGG\vGHH","H\nHHHHHH\nHH","\nH\fHH\vHHH\nHH\nH","III\nIIIJJJ\n","JJJKKKK\nKKK","LLL\nLLLMMMM","NNNOOOO\nO\fOO","\vOOO\nOPPP\nPP","PP\nPPP\nPP\nP","QQQ\nQRRR\nRR","RRR\nRR\nR\fRR\vR","RR\nRSSSS\nS\fSS","\vSSS\nSTTTTT","TT\nTTTTTTTT","TT\nTT\nT\fTT\vTT","T\nTT\nTTTT\nTT","TTTT\nTT\nT\fTT\v","TTT\nTT\nTT\nTU","UUUU\nUUU\nUU","UUVVVV\nV\fVV\v","VVV\nVWWW\nWW","WWWWWWWW\nWX","XX\nXYY\nYYYY","YYY\nYZZZZ\nZ","[[\\\\\\\n\\]]]","]\n]^^______","_\n_``aabbcc","ddeeffgghh","iijj\njjjjj\n","jj\njjk\b\n\f",' "$&(*,.0246',"8:<>@BDFHJLNPRTVXZ\\^`bdfhjlnprtvxz|~","","","","\nR^01?@","AB22CEPPABFF()","","\b","\n\f","","","",""," ",'"$',"&(","*,.","02","46","8:","<>","@BD","FH","JL","NP","RT","VXZ","\\^","`b","df","hj","lnp","rt","vx","z|","~","","","","","","","","","","","","","","","","","","","","","j","R*","j","","","j","","","","i","S","j","","","i","P","J&3","V","","4","","j\t","\b","","\v","\nU","\t\b","","\r$","\t","'","\nQ","f4","","6d3","3","\v","4","","\f9f4","","5","\f9","f4","","","","","52","\f","5","\f9","f4","","","","","58","\f5","","","","","8","\f5","","","","","","2\f","","5","\f9f4","","","","","5","8\f","5","","","","","8\f","5","","","","'6f4","","","9f4","","5","9","f4","","","","","52","","5","9","f4","","","","","58","5","","","","","8","5","","","","","","2","","5","9","f4","","","","","58","5","","","","","8","5","","","","'","","R*",""," j",'",',".0","<L'","N(P)","","","","!","(&","*\\","S","","$","","","#","9\\","(","","","%","6","f49f4","","'f4","z>","","5f4z>","","","","","5","",")\t+"," ","R-!","/2","46",":8","","","1","#3",'"5',"S","7","\\9","f4","f4","","",";","> @!","=","H","%?","\t","","","J&","\t","","","","","23","F$4","F$","","A'","\b'","","CJ&","\b'","E",'B"5','B"',"","","5","","GD#","5D#","","I","'","0'","","","K","\t'","5'","","","M","\n'","5'","","O","","\vf45","f4","Q","V,X-","Z.\\/^0","\tU","\fT+","","","","","S$","\t^0","Z.","U","\f","f46d3","\rf4","6d3","","","","6","d3","W","f4","6d3","6","d3","Y","R","S","6d3","6d3","","[","6d3","b26d3","","","","6","d3","","6","d3","","6","d3","]","`15","`1","","","6","d3_","f4\b|?","","a","f4\b","'","","c","","ja","","","b","","e","p9h5","","l7","g","\f","p9","f4ip9","n8","k","\r","","6","f4m","\r","","6j6","or:","r:","","q","","t;t;","","","s","t;","v<","u","|?x=|?","","","w","I","JK","LM","NO","","","","","","","","","y2","|?{","~@<","~@","","}","A=","A","","","B",">B","","","","C\t","C","","","D","\tD","","","","E\t","E","","","\t","EF","","G8","E","","\bGK","JI","h_","^","","","1g","f","","","","","\f","L\fM","\fN","","","","","f4z>","","Y5","f4z>","","","","","5","","","",":H","",";","G","T","","H","3\\","H","","4","3","V","4",":","O;","0","h","P5","P","","","5","","f4","f4","","6f4","","Q","","","6","f4","","|?z>","","5","|?z>","","","","","5","","f45","f4","","","5","","f4","6f4","8|?","","Y","5f4","6f4","8|?","","","","","5","","","","f4z>","","Y5","f4z>","","","","","5","","","","","","'3","V","","4","","6d3","W5","W","","","5","","f4","Y","","f49","f48","f42","f4","","","YZ","","$","","","R","p9X","","\fj6","X","","'","]","","","f4S","","\t\b","`","abc","de","","","","*","+",",","-",".","/","\t\t","","'","","&","","7","&7","","","","","","","","","","","","","","","","",""].join(""),i=(new r.atn.ATNDeserializer).deserialize(o),l=i.decisionToState.map((function(e,t){return new r.dfa.DFA(e,t)})),p=new r.PredictionContextCache,m=[null,"'def'","'return'","'raise'","'from'","'import'","'as'","'global'","'nonlocal'","'assert'","'if'","'elif'","'else'","'while'","'for'","'in'","'try'","'finally'","'with'","'except'","'lambda'","'or'","'and'","'not'","'is'","'None'","'True'","'False'","'class'","'yield'","'del'","'pass'","'continue'","'break'","'async'","'await'",null,null,null,null,null,null,null,null,null,null,"'.'","'...'","'*'","'('","')'","','","':'","';'","'**'","'='","'['","']'","'|'","'^'","'&'","'<<'","'>>'","'+'","'-'","'/'","'%'","'//'","'~'","'{'","'}'","'<'","'>'","'=='","'>='","'<='","'<>'","'!='","'@'","'->'","'+='","'-='","'*='","'@='","'/='","'%='","'&='","'|='","'^='","'<<='","'>>='","'**='","'//='"],c=[null,"DEF","RETURN","RAISE","FROM","IMPORT","AS","GLOBAL","NONLOCAL","ASSERT","IF","ELIF","ELSE","WHILE","FOR","IN","TRY","FINALLY","WITH","EXCEPT","LAMBDA","OR","AND","NOT","IS","NONE","TRUE","FALSE","CLASS","YIELD","DEL","PASS","CONTINUE","BREAK","ASYNC","AWAIT","NEWLINE","NAME","STRING_LITERAL","BYTES_LITERAL","DECIMAL_INTEGER","OCT_INTEGER","HEX_INTEGER","BIN_INTEGER","FLOAT_NUMBER","IMAG_NUMBER","DOT","ELLIPSIS","STAR","OPEN_PAREN","CLOSE_PAREN","COMMA","COLON","SEMI_COLON","POWER","ASSIGN","OPEN_BRACK","CLOSE_BRACK","OR_OP","XOR","AND_OP","LEFT_SHIFT","RIGHT_SHIFT","ADD","MINUS","DIV","MOD","IDIV","NOT_OP","OPEN_BRACE","CLOSE_BRACE","LESS_THAN","GREATER_THAN","EQUALS","GT_EQ","LT_EQ","NOT_EQ_1","NOT_EQ_2","AT","ARROW","ADD_ASSIGN","SUB_ASSIGN","MULT_ASSIGN","AT_ASSIGN","DIV_ASSIGN","MOD_ASSIGN","AND_ASSIGN","OR_ASSIGN","XOR_ASSIGN","LEFT_SHIFT_ASSIGN","RIGHT_SHIFT_ASSIGN","POWER_ASSIGN","IDIV_ASSIGN","SKIP_","UNKNOWN_CHAR","INDENT","DEDENT"],u=["single_input","file_input","eval_input","decorator","decorators","decorated","async_funcdef","funcdef","parameters","typedargslist","tfpdef","varargslist","vfpdef","stmt","simple_stmt","small_stmt","expr_stmt","assign_stmt","annassign","testlist_star_expr","augassign","del_stmt","pass_stmt","flow_stmt","break_stmt","continue_stmt","return_stmt","yield_stmt","raise_stmt","import_stmt","import_name","import_from","import_as_name","dotted_as_name","import_as_names","dotted_as_names","dotted_name","global_stmt","nonlocal_stmt","assert_stmt","compound_stmt","async_stmt","if_stmt","while_stmt","for_stmt","try_stmt","with_stmt","with_item","except_clause","suite","test","inline_if","test_nocond","lambdef","lambdef_nocond","or_test","and_test","not_test","comparison","comp_op","star_expr","expr","xor_expr","and_expr","shift_expr","arith_expr","term","factor","power","atom","testlist_comp","array_literal","object_literal","set_literal","paren_trailer","bracket_trailer","dot_trailer","subscriptlist","subscript","sliceop","exprlist","testlist","dictorsetmaker","classdef","arglist","argument","comp_iter","comp_for","comp_if","encoding_decl","yield_expr","yield_arg","string_literal","number_literal","integer_literal","oct_literal","hex_literal","bin_literal","float_literal","imag_literal","boolean_literal","none_literal","identifier","eof","eos"];function g(e){return r.Parser.call(this,e),this._interp=new r.atn.ParserATNSimulator(this,i,l,p),this.ruleNames=u,this.literalNames=m,this.symbolicNames=c,this}function d(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_single_input,this}function h(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_file_input,this}function T(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_eval_input,this}function y(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_decorator,this}function f(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_decorators,this}function b(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_decorated,this}function S(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_async_funcdef,this}function A(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_funcdef,this}function E(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_parameters,this}function _(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_typedargslist,this}function x(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_tfpdef,this}function I(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_varargslist,this}function L(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_vfpdef,this}function v(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_stmt,this}function C(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_simple_stmt,this}function R(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_small_stmt,this}function O(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_expr_stmt,this}function N(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_assign_stmt,this}function j(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_annassign,this}function w(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_testlist_star_expr,this}function D(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_augassign,this}function B(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_del_stmt,this}function M(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_pass_stmt,this}function $(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_flow_stmt,this}function k(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_break_stmt,this}function P(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_continue_stmt,this}function F(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_return_stmt,this}function U(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_yield_stmt,this}function q(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_raise_stmt,this}function G(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_import_stmt,this}function H(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_import_name,this}function V(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_import_from,this}function K(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_import_as_name,this}function W(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_dotted_as_name,this}function Y(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_import_as_names,this}function z(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_dotted_as_names,this}function Z(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_dotted_name,this}function X(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_global_stmt,this}function J(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_nonlocal_stmt,this}function Q(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_assert_stmt,this}function ee(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_compound_stmt,this}function te(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_async_stmt,this}function ne(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_if_stmt,this}function re(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_while_stmt,this}function se(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_for_stmt,this}function ae(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_try_stmt,this}function oe(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_with_stmt,this}function ie(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_with_item,this}function le(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_except_clause,this}function pe(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_suite,this}function me(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_test,this}function ce(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_inline_if,this}function ue(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_test_nocond,this}function ge(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_lambdef,this}function de(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_lambdef_nocond,this}function he(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_or_test,this}function Te(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_and_test,this}function ye(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_not_test,this}function fe(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_comparison,this}function be(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_comp_op,this}function Se(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_star_expr,this}function Ae(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_expr,this}function Ee(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_xor_expr,this}function _e(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_and_expr,this}function xe(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_shift_expr,this}function Ie(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_arith_expr,this}function Le(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_term,this}function ve(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_factor,this}function Ce(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_power,this}function Re(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_atom,this}function Oe(e,t){return Re.call(this,e),Re.prototype.copyFrom.call(this,t),this}function Ne(e,t){return Re.call(this,e),Re.prototype.copyFrom.call(this,t),this}function je(e,t){return Re.call(this,e),Re.prototype.copyFrom.call(this,t),this}function we(e,t){return Re.call(this,e),Re.prototype.copyFrom.call(this,t),this}function De(e,t){return Re.call(this,e),Re.prototype.copyFrom.call(this,t),this}function Be(e,t){return Re.call(this,e),Re.prototype.copyFrom.call(this,t),this}function Me(e,t){return Re.call(this,e),Re.prototype.copyFrom.call(this,t),this}function $e(e,t){return Re.call(this,e),Re.prototype.copyFrom.call(this,t),this}function ke(e,t){return Re.call(this,e),Re.prototype.copyFrom.call(this,t),this}function Pe(e,t){return Re.call(this,e),Re.prototype.copyFrom.call(this,t),this}function Fe(e,t){return Re.call(this,e),Re.prototype.copyFrom.call(this,t),this}function Ue(e,t){return Re.call(this,e),Re.prototype.copyFrom.call(this,t),this}function qe(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_testlist_comp,this}function Ge(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_array_literal,this}function He(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_object_literal,this}function Ve(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_set_literal,this}function Ke(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_paren_trailer,this}function We(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_bracket_trailer,this}function Ye(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_dot_trailer,this}function ze(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_subscriptlist,this}function Ze(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_subscript,this}function Xe(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_sliceop,this}function Je(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_exprlist,this}function Qe(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_testlist,this}function et(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_dictorsetmaker,this}function tt(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_classdef,this}function nt(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_arglist,this}function rt(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_argument,this}function st(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_comp_iter,this}function at(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_comp_for,this}function ot(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_comp_if,this}function it(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_encoding_decl,this}function lt(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_yield_expr,this}function pt(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_yield_arg,this}function mt(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_string_literal,this}function ct(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_number_literal,this}function ut(e,t){return ct.call(this,e),ct.prototype.copyFrom.call(this,t),this}function gt(e,t){return ct.call(this,e),ct.prototype.copyFrom.call(this,t),this}function dt(e,t){return ct.call(this,e),ct.prototype.copyFrom.call(this,t),this}function ht(e,t){return ct.call(this,e),ct.prototype.copyFrom.call(this,t),this}function Tt(e,t){return ct.call(this,e),ct.prototype.copyFrom.call(this,t),this}function yt(e,t){return ct.call(this,e),ct.prototype.copyFrom.call(this,t),this}function ft(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_integer_literal,this}function bt(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_oct_literal,this}function St(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_hex_literal,this}function At(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_bin_literal,this}function Et(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_float_literal,this}function _t(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_imag_literal,this}function xt(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_boolean_literal,this}function It(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_none_literal,this}function Lt(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_identifier,this}function vt(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_eof,this}function Ct(e,t,n){return void 0===t&&(t=null),null==n&&(n=-1),r.ParserRuleContext.call(this,t,n),this.parser=e,this.ruleIndex=g.RULE_eos,this}g.prototype=Object.create(r.Parser.prototype),g.prototype.constructor=g,Object.defineProperty(g.prototype,"atn",{get:function(){return i}}),g.EOF=r.Token.EOF,g.DEF=1,g.RETURN=2,g.RAISE=3,g.FROM=4,g.IMPORT=5,g.AS=6,g.GLOBAL=7,g.NONLOCAL=8,g.ASSERT=9,g.IF=10,g.ELIF=11,g.ELSE=12,g.WHILE=13,g.FOR=14,g.IN=15,g.TRY=16,g.FINALLY=17,g.WITH=18,g.EXCEPT=19,g.LAMBDA=20,g.OR=21,g.AND=22,g.NOT=23,g.IS=24,g.NONE=25,g.TRUE=26,g.FALSE=27,g.CLASS=28,g.YIELD=29,g.DEL=30,g.PASS=31,g.CONTINUE=32,g.BREAK=33,g.ASYNC=34,g.AWAIT=35,g.NEWLINE=36,g.NAME=37,g.STRING_LITERAL=38,g.BYTES_LITERAL=39,g.DECIMAL_INTEGER=40,g.OCT_INTEGER=41,g.HEX_INTEGER=42,g.BIN_INTEGER=43,g.FLOAT_NUMBER=44,g.IMAG_NUMBER=45,g.DOT=46,g.ELLIPSIS=47,g.STAR=48,g.OPEN_PAREN=49,g.CLOSE_PAREN=50,g.COMMA=51,g.COLON=52,g.SEMI_COLON=53,g.POWER=54,g.ASSIGN=55,g.OPEN_BRACK=56,g.CLOSE_BRACK=57,g.OR_OP=58,g.XOR=59,g.AND_OP=60,g.LEFT_SHIFT=61,g.RIGHT_SHIFT=62,g.ADD=63,g.MINUS=64,g.DIV=65,g.MOD=66,g.IDIV=67,g.NOT_OP=68,g.OPEN_BRACE=69,g.CLOSE_BRACE=70,g.LESS_THAN=71,g.GREATER_THAN=72,g.EQUALS=73,g.GT_EQ=74,g.LT_EQ=75,g.NOT_EQ_1=76,g.NOT_EQ_2=77,g.AT=78,g.ARROW=79,g.ADD_ASSIGN=80,g.SUB_ASSIGN=81,g.MULT_ASSIGN=82,g.AT_ASSIGN=83,g.DIV_ASSIGN=84,g.MOD_ASSIGN=85,g.AND_ASSIGN=86,g.OR_ASSIGN=87,g.XOR_ASSIGN=88,g.LEFT_SHIFT_ASSIGN=89,g.RIGHT_SHIFT_ASSIGN=90,g.POWER_ASSIGN=91,g.IDIV_ASSIGN=92,g.SKIP_=93,g.UNKNOWN_CHAR=94,g.INDENT=95,g.DEDENT=96,g.RULE_single_input=0,g.RULE_file_input=1,g.RULE_eval_input=2,g.RULE_decorator=3,g.RULE_decorators=4,g.RULE_decorated=5,g.RULE_async_funcdef=6,g.RULE_funcdef=7,g.RULE_parameters=8,g.RULE_typedargslist=9,g.RULE_tfpdef=10,g.RULE_varargslist=11,g.RULE_vfpdef=12,g.RULE_stmt=13,g.RULE_simple_stmt=14,g.RULE_small_stmt=15,g.RULE_expr_stmt=16,g.RULE_assign_stmt=17,g.RULE_annassign=18,g.RULE_testlist_star_expr=19,g.RULE_augassign=20,g.RULE_del_stmt=21,g.RULE_pass_stmt=22,g.RULE_flow_stmt=23,g.RULE_break_stmt=24,g.RULE_continue_stmt=25,g.RULE_return_stmt=26,g.RULE_yield_stmt=27,g.RULE_raise_stmt=28,g.RULE_import_stmt=29,g.RULE_import_name=30,g.RULE_import_from=31,g.RULE_import_as_name=32,g.RULE_dotted_as_name=33,g.RULE_import_as_names=34,g.RULE_dotted_as_names=35,g.RULE_dotted_name=36,g.RULE_global_stmt=37,g.RULE_nonlocal_stmt=38,g.RULE_assert_stmt=39,g.RULE_compound_stmt=40,g.RULE_async_stmt=41,g.RULE_if_stmt=42,g.RULE_while_stmt=43,g.RULE_for_stmt=44,g.RULE_try_stmt=45,g.RULE_with_stmt=46,g.RULE_with_item=47,g.RULE_except_clause=48,g.RULE_suite=49,g.RULE_test=50,g.RULE_inline_if=51,g.RULE_test_nocond=52,g.RULE_lambdef=53,g.RULE_lambdef_nocond=54,g.RULE_or_test=55,g.RULE_and_test=56,g.RULE_not_test=57,g.RULE_comparison=58,g.RULE_comp_op=59,g.RULE_star_expr=60,g.RULE_expr=61,g.RULE_xor_expr=62,g.RULE_and_expr=63,g.RULE_shift_expr=64,g.RULE_arith_expr=65,g.RULE_term=66,g.RULE_factor=67,g.RULE_power=68,g.RULE_atom=69,g.RULE_testlist_comp=70,g.RULE_array_literal=71,g.RULE_object_literal=72,g.RULE_set_literal=73,g.RULE_paren_trailer=74,g.RULE_bracket_trailer=75,g.RULE_dot_trailer=76,g.RULE_subscriptlist=77,g.RULE_subscript=78,g.RULE_sliceop=79,g.RULE_exprlist=80,g.RULE_testlist=81,g.RULE_dictorsetmaker=82,g.RULE_classdef=83,g.RULE_arglist=84,g.RULE_argument=85,g.RULE_comp_iter=86,g.RULE_comp_for=87,g.RULE_comp_if=88,g.RULE_encoding_decl=89,g.RULE_yield_expr=90,g.RULE_yield_arg=91,g.RULE_string_literal=92,g.RULE_number_literal=93,g.RULE_integer_literal=94,g.RULE_oct_literal=95,g.RULE_hex_literal=96,g.RULE_bin_literal=97,g.RULE_float_literal=98,g.RULE_imag_literal=99,g.RULE_boolean_literal=100,g.RULE_none_literal=101,g.RULE_identifier=102,g.RULE_eof=103,g.RULE_eos=104,d.prototype=Object.create(r.ParserRuleContext.prototype),d.prototype.constructor=d,d.prototype.eos=function(){return this.getTypedRuleContext(Ct,0)},d.prototype.simple_stmt=function(){return this.getTypedRuleContext(C,0)},d.prototype.compound_stmt=function(){return this.getTypedRuleContext(ee,0)},d.prototype.enterRule=function(e){e instanceof s&&e.enterSingle_input(this)},d.prototype.exitRule=function(e){e instanceof s&&e.exitSingle_input(this)},d.prototype.accept=function(e){return e instanceof a?e.visitSingle_input(this):e.visitChildren(this)},g.Single_inputContext=d,g.prototype.single_input=function(){var e=new d(this,this._ctx,this.state);this.enterRule(e,0,g.RULE_single_input);try{switch(this.state=215,this._errHandler.sync(this),this._input.LA(1)){case g.NEWLINE:case g.SEMI_COLON:this.enterOuterAlt(e,1),this.state=210,this.eos();break;case g.RETURN:case g.RAISE:case g.FROM:case g.IMPORT:case g.GLOBAL:case g.NONLOCAL:case g.ASSERT:case g.LAMBDA:case g.NOT:case g.NONE:case g.TRUE:case g.FALSE:case g.YIELD:case g.DEL:case g.PASS:case g.CONTINUE:case g.BREAK:case g.NAME:case g.STRING_LITERAL:case g.BYTES_LITERAL:case g.DECIMAL_INTEGER:case g.OCT_INTEGER:case g.HEX_INTEGER:case g.BIN_INTEGER:case g.FLOAT_NUMBER:case g.IMAG_NUMBER:case g.ELLIPSIS:case g.STAR:case g.OPEN_PAREN:case g.OPEN_BRACK:case g.ADD:case g.MINUS:case g.NOT_OP:case g.OPEN_BRACE:this.enterOuterAlt(e,2),this.state=211,this.simple_stmt();break;case g.DEF:case g.IF:case g.WHILE:case g.FOR:case g.TRY:case g.WITH:case g.CLASS:case g.ASYNC:case g.AT:this.enterOuterAlt(e,3),this.state=212,this.compound_stmt(),this.state=213,this.eos();break;default:throw new r.error.NoViableAltException(this)}}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},h.prototype=Object.create(r.ParserRuleContext.prototype),h.prototype.constructor=h,h.prototype.eof=function(){return this.getTypedRuleContext(vt,0)},h.prototype.eos=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(Ct):this.getTypedRuleContext(Ct,e)},h.prototype.stmt=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(v):this.getTypedRuleContext(v,e)},h.prototype.enterRule=function(e){e instanceof s&&e.enterFile_input(this)},h.prototype.exitRule=function(e){e instanceof s&&e.exitFile_input(this)},h.prototype.accept=function(e){return e instanceof a?e.visitFile_input(this):e.visitChildren(this)},g.File_inputContext=h,g.prototype.file_input=function(){var e=new h(this,this._ctx,this.state);this.enterRule(e,2,g.RULE_file_input);var t=0;try{for(this.enterOuterAlt(e,1),this.state=221,this._errHandler.sync(this),t=this._input.LA(1);0==(-32&t)&&0!=(1<<t&(1<<g.DEF|1<<g.RETURN|1<<g.RAISE|1<<g.FROM|1<<g.IMPORT|1<<g.GLOBAL|1<<g.NONLOCAL|1<<g.ASSERT|1<<g.IF|1<<g.WHILE|1<<g.FOR|1<<g.TRY|1<<g.WITH|1<<g.LAMBDA|1<<g.NOT|1<<g.NONE|1<<g.TRUE|1<<g.FALSE|1<<g.CLASS|1<<g.YIELD|1<<g.DEL|1<<g.PASS))||0==(t-32&-32)&&0!=(1<<t-32&(1<<g.CONTINUE-32|1<<g.BREAK-32|1<<g.ASYNC-32|1<<g.NEWLINE-32|1<<g.NAME-32|1<<g.STRING_LITERAL-32|1<<g.BYTES_LITERAL-32|1<<g.DECIMAL_INTEGER-32|1<<g.OCT_INTEGER-32|1<<g.HEX_INTEGER-32|1<<g.BIN_INTEGER-32|1<<g.FLOAT_NUMBER-32|1<<g.IMAG_NUMBER-32|1<<g.ELLIPSIS-32|1<<g.STAR-32|1<<g.OPEN_PAREN-32|1<<g.SEMI_COLON-32|1<<g.OPEN_BRACK-32|1<<g.ADD-32))||0==(t-64&-32)&&0!=(1<<t-64&(1<<g.MINUS-64|1<<g.NOT_OP-64|1<<g.OPEN_BRACE-64|1<<g.AT-64));){switch(this.state=219,this._errHandler.sync(this),this._input.LA(1)){case g.NEWLINE:case g.SEMI_COLON:this.state=217,this.eos();break;case g.DEF:case g.RETURN:case g.RAISE:case g.FROM:case g.IMPORT:case g.GLOBAL:case g.NONLOCAL:case g.ASSERT:case g.IF:case g.WHILE:case g.FOR:case g.TRY:case g.WITH:case g.LAMBDA:case g.NOT:case g.NONE:case g.TRUE:case g.FALSE:case g.CLASS:case g.YIELD:case g.DEL:case g.PASS:case g.CONTINUE:case g.BREAK:case g.ASYNC:case g.NAME:case g.STRING_LITERAL:case g.BYTES_LITERAL:case g.DECIMAL_INTEGER:case g.OCT_INTEGER:case g.HEX_INTEGER:case g.BIN_INTEGER:case g.FLOAT_NUMBER:case g.IMAG_NUMBER:case g.ELLIPSIS:case g.STAR:case g.OPEN_PAREN:case g.OPEN_BRACK:case g.ADD:case g.MINUS:case g.NOT_OP:case g.OPEN_BRACE:case g.AT:this.state=218,this.stmt();break;default:throw new r.error.NoViableAltException(this)}this.state=223,this._errHandler.sync(this),t=this._input.LA(1)}this.state=224,this.eof()}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},T.prototype=Object.create(r.ParserRuleContext.prototype),T.prototype.constructor=T,T.prototype.testlist=function(){return this.getTypedRuleContext(Qe,0)},T.prototype.eof=function(){return this.getTypedRuleContext(vt,0)},T.prototype.eos=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(Ct):this.getTypedRuleContext(Ct,e)},T.prototype.enterRule=function(e){e instanceof s&&e.enterEval_input(this)},T.prototype.exitRule=function(e){e instanceof s&&e.exitEval_input(this)},T.prototype.accept=function(e){return e instanceof a?e.visitEval_input(this):e.visitChildren(this)},g.Eval_inputContext=T,g.prototype.eval_input=function(){var e=new T(this,this._ctx,this.state);this.enterRule(e,4,g.RULE_eval_input);var t=0;try{for(this.enterOuterAlt(e,1),this.state=226,this.testlist(),this.state=230,this._errHandler.sync(this),t=this._input.LA(1);t===g.NEWLINE||t===g.SEMI_COLON;)this.state=227,this.eos(),this.state=232,this._errHandler.sync(this),t=this._input.LA(1);this.state=233,this.eof()}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},y.prototype=Object.create(r.ParserRuleContext.prototype),y.prototype.constructor=y,y.prototype.AT=function(){return this.getToken(g.AT,0)},y.prototype.dotted_name=function(){return this.getTypedRuleContext(Z,0)},y.prototype.eos=function(){return this.getTypedRuleContext(Ct,0)},y.prototype.OPEN_PAREN=function(){return this.getToken(g.OPEN_PAREN,0)},y.prototype.CLOSE_PAREN=function(){return this.getToken(g.CLOSE_PAREN,0)},y.prototype.arglist=function(){return this.getTypedRuleContext(nt,0)},y.prototype.enterRule=function(e){e instanceof s&&e.enterDecorator(this)},y.prototype.exitRule=function(e){e instanceof s&&e.exitDecorator(this)},y.prototype.accept=function(e){return e instanceof a?e.visitDecorator(this):e.visitChildren(this)},g.DecoratorContext=y,g.prototype.decorator=function(){var e=new y(this,this._ctx,this.state);this.enterRule(e,6,g.RULE_decorator);var t=0;try{this.enterOuterAlt(e,1),this.state=235,this.match(g.AT),this.state=236,this.dotted_name(),this.state=242,this._errHandler.sync(this),(t=this._input.LA(1))===g.OPEN_PAREN&&(this.state=237,this.match(g.OPEN_PAREN),this.state=239,this._errHandler.sync(this),(0==((t=this._input.LA(1))-20&-32)&&0!=(1<<t-20&(1<<g.LAMBDA-20|1<<g.NOT-20|1<<g.NONE-20|1<<g.TRUE-20|1<<g.FALSE-20|1<<g.NAME-20|1<<g.STRING_LITERAL-20|1<<g.BYTES_LITERAL-20|1<<g.DECIMAL_INTEGER-20|1<<g.OCT_INTEGER-20|1<<g.HEX_INTEGER-20|1<<g.BIN_INTEGER-20|1<<g.FLOAT_NUMBER-20|1<<g.IMAG_NUMBER-20|1<<g.ELLIPSIS-20|1<<g.STAR-20|1<<g.OPEN_PAREN-20))||0==(t-54&-32)&&0!=(1<<t-54&(1<<g.POWER-54|1<<g.OPEN_BRACK-54|1<<g.ADD-54|1<<g.MINUS-54|1<<g.NOT_OP-54|1<<g.OPEN_BRACE-54)))&&(this.state=238,this.arglist()),this.state=241,this.match(g.CLOSE_PAREN)),this.state=244,this.eos()}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},f.prototype=Object.create(r.ParserRuleContext.prototype),f.prototype.constructor=f,f.prototype.decorator=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(y):this.getTypedRuleContext(y,e)},f.prototype.enterRule=function(e){e instanceof s&&e.enterDecorators(this)},f.prototype.exitRule=function(e){e instanceof s&&e.exitDecorators(this)},f.prototype.accept=function(e){return e instanceof a?e.visitDecorators(this):e.visitChildren(this)},g.DecoratorsContext=f,g.prototype.decorators=function(){var e=new f(this,this._ctx,this.state);this.enterRule(e,8,g.RULE_decorators);var t=0;try{this.enterOuterAlt(e,1),this.state=247,this._errHandler.sync(this),t=this._input.LA(1);do{this.state=246,this.decorator(),this.state=249,this._errHandler.sync(this),t=this._input.LA(1)}while(t===g.AT)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},b.prototype=Object.create(r.ParserRuleContext.prototype),b.prototype.constructor=b,b.prototype.decorators=function(){return this.getTypedRuleContext(f,0)},b.prototype.classdef=function(){return this.getTypedRuleContext(tt,0)},b.prototype.funcdef=function(){return this.getTypedRuleContext(A,0)},b.prototype.async_funcdef=function(){return this.getTypedRuleContext(S,0)},b.prototype.enterRule=function(e){e instanceof s&&e.enterDecorated(this)},b.prototype.exitRule=function(e){e instanceof s&&e.exitDecorated(this)},b.prototype.accept=function(e){return e instanceof a?e.visitDecorated(this):e.visitChildren(this)},g.DecoratedContext=b,g.prototype.decorated=function(){var e=new b(this,this._ctx,this.state);this.enterRule(e,10,g.RULE_decorated);try{switch(this.enterOuterAlt(e,1),this.state=251,this.decorators(),this.state=255,this._errHandler.sync(this),this._input.LA(1)){case g.CLASS:this.state=252,this.classdef();break;case g.DEF:this.state=253,this.funcdef();break;case g.ASYNC:this.state=254,this.async_funcdef();break;default:throw new r.error.NoViableAltException(this)}}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},S.prototype=Object.create(r.ParserRuleContext.prototype),S.prototype.constructor=S,S.prototype.ASYNC=function(){return this.getToken(g.ASYNC,0)},S.prototype.funcdef=function(){return this.getTypedRuleContext(A,0)},S.prototype.enterRule=function(e){e instanceof s&&e.enterAsync_funcdef(this)},S.prototype.exitRule=function(e){e instanceof s&&e.exitAsync_funcdef(this)},S.prototype.accept=function(e){return e instanceof a?e.visitAsync_funcdef(this):e.visitChildren(this)},g.Async_funcdefContext=S,g.prototype.async_funcdef=function(){var e=new S(this,this._ctx,this.state);this.enterRule(e,12,g.RULE_async_funcdef);try{this.enterOuterAlt(e,1),this.state=257,this.match(g.ASYNC),this.state=258,this.funcdef()}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},A.prototype=Object.create(r.ParserRuleContext.prototype),A.prototype.constructor=A,A.prototype.DEF=function(){return this.getToken(g.DEF,0)},A.prototype.NAME=function(){return this.getToken(g.NAME,0)},A.prototype.parameters=function(){return this.getTypedRuleContext(E,0)},A.prototype.COLON=function(){return this.getToken(g.COLON,0)},A.prototype.suite=function(){return this.getTypedRuleContext(pe,0)},A.prototype.ARROW=function(){return this.getToken(g.ARROW,0)},A.prototype.test=function(){return this.getTypedRuleContext(me,0)},A.prototype.enterRule=function(e){e instanceof s&&e.enterFuncdef(this)},A.prototype.exitRule=function(e){e instanceof s&&e.exitFuncdef(this)},A.prototype.accept=function(e){return e instanceof a?e.visitFuncdef(this):e.visitChildren(this)},g.FuncdefContext=A,g.prototype.funcdef=function(){var e=new A(this,this._ctx,this.state);this.enterRule(e,14,g.RULE_funcdef);try{this.enterOuterAlt(e,1),this.state=260,this.match(g.DEF),this.state=261,this.match(g.NAME),this.state=262,this.parameters(),this.state=265,this._errHandler.sync(this),this._input.LA(1)===g.ARROW&&(this.state=263,this.match(g.ARROW),this.state=264,this.test()),this.state=267,this.match(g.COLON),this.state=268,this.suite()}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},E.prototype=Object.create(r.ParserRuleContext.prototype),E.prototype.constructor=E,E.prototype.OPEN_PAREN=function(){return this.getToken(g.OPEN_PAREN,0)},E.prototype.CLOSE_PAREN=function(){return this.getToken(g.CLOSE_PAREN,0)},E.prototype.typedargslist=function(){return this.getTypedRuleContext(_,0)},E.prototype.enterRule=function(e){e instanceof s&&e.enterParameters(this)},E.prototype.exitRule=function(e){e instanceof s&&e.exitParameters(this)},E.prototype.accept=function(e){return e instanceof a?e.visitParameters(this):e.visitChildren(this)},g.ParametersContext=E,g.prototype.parameters=function(){var e=new E(this,this._ctx,this.state);this.enterRule(e,16,g.RULE_parameters);var t=0;try{this.enterOuterAlt(e,1),this.state=270,this.match(g.OPEN_PAREN),this.state=272,this._errHandler.sync(this),0==((t=this._input.LA(1))-37&-32)&&0!=(1<<t-37&(1<<g.NAME-37|1<<g.STAR-37|1<<g.POWER-37))&&(this.state=271,this.typedargslist()),this.state=274,this.match(g.CLOSE_PAREN)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},_.prototype=Object.create(r.ParserRuleContext.prototype),_.prototype.constructor=_,_.prototype.tfpdef=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(x):this.getTypedRuleContext(x,e)},_.prototype.STAR=function(){return this.getToken(g.STAR,0)},_.prototype.POWER=function(){return this.getToken(g.POWER,0)},_.prototype.ASSIGN=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.ASSIGN):this.getToken(g.ASSIGN,e)},_.prototype.test=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(me):this.getTypedRuleContext(me,e)},_.prototype.COMMA=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.COMMA):this.getToken(g.COMMA,e)},_.prototype.enterRule=function(e){e instanceof s&&e.enterTypedargslist(this)},_.prototype.exitRule=function(e){e instanceof s&&e.exitTypedargslist(this)},_.prototype.accept=function(e){return e instanceof a?e.visitTypedargslist(this):e.visitChildren(this)},g.TypedargslistContext=_,g.prototype.typedargslist=function(){var e=new _(this,this._ctx,this.state);this.enterRule(e,18,g.RULE_typedargslist);try{switch(this.enterOuterAlt(e,1),this.state=357,this._errHandler.sync(this),this._input.LA(1)){case g.NAME:this.state=276,this.tfpdef(),this.state=279,this._errHandler.sync(this),this._input.LA(1)===g.ASSIGN&&(this.state=277,this.match(g.ASSIGN),this.state=278,this.test()),this.state=289,this._errHandler.sync(this);for(var t=this._interp.adaptivePredict(this._input,12,this._ctx);2!=t&&t!=r.atn.ATN.INVALID_ALT_NUMBER;)1===t&&(this.state=281,this.match(g.COMMA),this.state=282,this.tfpdef(),this.state=285,this._errHandler.sync(this),this._input.LA(1)===g.ASSIGN&&(this.state=283,this.match(g.ASSIGN),this.state=284,this.test())),this.state=291,this._errHandler.sync(this),t=this._interp.adaptivePredict(this._input,12,this._ctx);if(this.state=325,this._errHandler.sync(this),this._input.LA(1)===g.COMMA)switch(this.state=292,this.match(g.COMMA),this.state=323,this._errHandler.sync(this),this._input.LA(1)){case g.STAR:for(this.state=293,this.match(g.STAR),this.state=295,this._errHandler.sync(this),this._input.LA(1)===g.NAME&&(this.state=294,this.tfpdef()),this.state=305,this._errHandler.sync(this),t=this._interp.adaptivePredict(this._input,15,this._ctx);2!=t&&t!=r.atn.ATN.INVALID_ALT_NUMBER;)1===t&&(this.state=297,this.match(g.COMMA),this.state=298,this.tfpdef(),this.state=301,this._errHandler.sync(this),this._input.LA(1)===g.ASSIGN&&(this.state=299,this.match(g.ASSIGN),this.state=300,this.test())),this.state=307,this._errHandler.sync(this),t=this._interp.adaptivePredict(this._input,15,this._ctx);this.state=316,this._errHandler.sync(this),this._input.LA(1)===g.COMMA&&(this.state=308,this.match(g.COMMA),this.state=314,this._errHandler.sync(this),this._input.LA(1)===g.POWER&&(this.state=309,this.match(g.POWER),this.state=310,this.tfpdef(),this.state=312,this._errHandler.sync(this),this._input.LA(1)===g.COMMA&&(this.state=311,this.match(g.COMMA))));break;case g.POWER:this.state=318,this.match(g.POWER),this.state=319,this.tfpdef(),this.state=321,this._errHandler.sync(this),this._input.LA(1)===g.COMMA&&(this.state=320,this.match(g.COMMA));case g.CLOSE_PAREN:}break;case g.STAR:for(this.state=327,this.match(g.STAR),this.state=329,this._errHandler.sync(this),this._input.LA(1)===g.NAME&&(this.state=328,this.tfpdef()),this.state=339,this._errHandler.sync(this),t=this._interp.adaptivePredict(this._input,24,this._ctx);2!=t&&t!=r.atn.ATN.INVALID_ALT_NUMBER;)1===t&&(this.state=331,this.match(g.COMMA),this.state=332,this.tfpdef(),this.state=335,this._errHandler.sync(this),this._input.LA(1)===g.ASSIGN&&(this.state=333,this.match(g.ASSIGN),this.state=334,this.test())),this.state=341,this._errHandler.sync(this),t=this._interp.adaptivePredict(this._input,24,this._ctx);this.state=350,this._errHandler.sync(this),this._input.LA(1)===g.COMMA&&(this.state=342,this.match(g.COMMA),this.state=348,this._errHandler.sync(this),this._input.LA(1)===g.POWER&&(this.state=343,this.match(g.POWER),this.state=344,this.tfpdef(),this.state=346,this._errHandler.sync(this),this._input.LA(1)===g.COMMA&&(this.state=345,this.match(g.COMMA))));break;case g.POWER:this.state=352,this.match(g.POWER),this.state=353,this.tfpdef(),this.state=355,this._errHandler.sync(this),this._input.LA(1)===g.COMMA&&(this.state=354,this.match(g.COMMA));break;default:throw new r.error.NoViableAltException(this)}}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},x.prototype=Object.create(r.ParserRuleContext.prototype),x.prototype.constructor=x,x.prototype.NAME=function(){return this.getToken(g.NAME,0)},x.prototype.COLON=function(){return this.getToken(g.COLON,0)},x.prototype.test=function(){return this.getTypedRuleContext(me,0)},x.prototype.enterRule=function(e){e instanceof s&&e.enterTfpdef(this)},x.prototype.exitRule=function(e){e instanceof s&&e.exitTfpdef(this)},x.prototype.accept=function(e){return e instanceof a?e.visitTfpdef(this):e.visitChildren(this)},g.TfpdefContext=x,g.prototype.tfpdef=function(){var e=new x(this,this._ctx,this.state);this.enterRule(e,20,g.RULE_tfpdef);try{this.enterOuterAlt(e,1),this.state=359,this.match(g.NAME),this.state=362,this._errHandler.sync(this),this._input.LA(1)===g.COLON&&(this.state=360,this.match(g.COLON),this.state=361,this.test())}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},I.prototype=Object.create(r.ParserRuleContext.prototype),I.prototype.constructor=I,I.prototype.vfpdef=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(L):this.getTypedRuleContext(L,e)},I.prototype.STAR=function(){return this.getToken(g.STAR,0)},I.prototype.POWER=function(){return this.getToken(g.POWER,0)},I.prototype.ASSIGN=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.ASSIGN):this.getToken(g.ASSIGN,e)},I.prototype.test=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(me):this.getTypedRuleContext(me,e)},I.prototype.COMMA=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.COMMA):this.getToken(g.COMMA,e)},I.prototype.enterRule=function(e){e instanceof s&&e.enterVarargslist(this)},I.prototype.exitRule=function(e){e instanceof s&&e.exitVarargslist(this)},I.prototype.accept=function(e){return e instanceof a?e.visitVarargslist(this):e.visitChildren(this)},g.VarargslistContext=I,g.prototype.varargslist=function(){var e=new I(this,this._ctx,this.state);this.enterRule(e,22,g.RULE_varargslist);try{switch(this.enterOuterAlt(e,1),this.state=445,this._errHandler.sync(this),this._input.LA(1)){case g.NAME:this.state=364,this.vfpdef(),this.state=367,this._errHandler.sync(this),this._input.LA(1)===g.ASSIGN&&(this.state=365,this.match(g.ASSIGN),this.state=366,this.test()),this.state=377,this._errHandler.sync(this);for(var t=this._interp.adaptivePredict(this._input,33,this._ctx);2!=t&&t!=r.atn.ATN.INVALID_ALT_NUMBER;)1===t&&(this.state=369,this.match(g.COMMA),this.state=370,this.vfpdef(),this.state=373,this._errHandler.sync(this),this._input.LA(1)===g.ASSIGN&&(this.state=371,this.match(g.ASSIGN),this.state=372,this.test())),this.state=379,this._errHandler.sync(this),t=this._interp.adaptivePredict(this._input,33,this._ctx);if(this.state=413,this._errHandler.sync(this),this._input.LA(1)===g.COMMA)switch(this.state=380,this.match(g.COMMA),this.state=411,this._errHandler.sync(this),this._input.LA(1)){case g.STAR:for(this.state=381,this.match(g.STAR),this.state=383,this._errHandler.sync(this),this._input.LA(1)===g.NAME&&(this.state=382,this.vfpdef()),this.state=393,this._errHandler.sync(this),t=this._interp.adaptivePredict(this._input,36,this._ctx);2!=t&&t!=r.atn.ATN.INVALID_ALT_NUMBER;)1===t&&(this.state=385,this.match(g.COMMA),this.state=386,this.vfpdef(),this.state=389,this._errHandler.sync(this),this._input.LA(1)===g.ASSIGN&&(this.state=387,this.match(g.ASSIGN),this.state=388,this.test())),this.state=395,this._errHandler.sync(this),t=this._interp.adaptivePredict(this._input,36,this._ctx);this.state=404,this._errHandler.sync(this),this._input.LA(1)===g.COMMA&&(this.state=396,this.match(g.COMMA),this.state=402,this._errHandler.sync(this),this._input.LA(1)===g.POWER&&(this.state=397,this.match(g.POWER),this.state=398,this.vfpdef(),this.state=400,this._errHandler.sync(this),this._input.LA(1)===g.COMMA&&(this.state=399,this.match(g.COMMA))));break;case g.POWER:this.state=406,this.match(g.POWER),this.state=407,this.vfpdef(),this.state=409,this._errHandler.sync(this),this._input.LA(1)===g.COMMA&&(this.state=408,this.match(g.COMMA));case g.COLON:}break;case g.STAR:for(this.state=415,this.match(g.STAR),this.state=417,this._errHandler.sync(this),this._input.LA(1)===g.NAME&&(this.state=416,this.vfpdef()),this.state=427,this._errHandler.sync(this),t=this._interp.adaptivePredict(this._input,45,this._ctx);2!=t&&t!=r.atn.ATN.INVALID_ALT_NUMBER;)1===t&&(this.state=419,this.match(g.COMMA),this.state=420,this.vfpdef(),this.state=423,this._errHandler.sync(this),this._input.LA(1)===g.ASSIGN&&(this.state=421,this.match(g.ASSIGN),this.state=422,this.test())),this.state=429,this._errHandler.sync(this),t=this._interp.adaptivePredict(this._input,45,this._ctx);this.state=438,this._errHandler.sync(this),this._input.LA(1)===g.COMMA&&(this.state=430,this.match(g.COMMA),this.state=436,this._errHandler.sync(this),this._input.LA(1)===g.POWER&&(this.state=431,this.match(g.POWER),this.state=432,this.vfpdef(),this.state=434,this._errHandler.sync(this),this._input.LA(1)===g.COMMA&&(this.state=433,this.match(g.COMMA))));break;case g.POWER:this.state=440,this.match(g.POWER),this.state=441,this.vfpdef(),this.state=443,this._errHandler.sync(this),this._input.LA(1)===g.COMMA&&(this.state=442,this.match(g.COMMA));break;default:throw new r.error.NoViableAltException(this)}}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},L.prototype=Object.create(r.ParserRuleContext.prototype),L.prototype.constructor=L,L.prototype.NAME=function(){return this.getToken(g.NAME,0)},L.prototype.enterRule=function(e){e instanceof s&&e.enterVfpdef(this)},L.prototype.exitRule=function(e){e instanceof s&&e.exitVfpdef(this)},L.prototype.accept=function(e){return e instanceof a?e.visitVfpdef(this):e.visitChildren(this)},g.VfpdefContext=L,g.prototype.vfpdef=function(){var e=new L(this,this._ctx,this.state);this.enterRule(e,24,g.RULE_vfpdef);try{this.enterOuterAlt(e,1),this.state=447,this.match(g.NAME)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},v.prototype=Object.create(r.ParserRuleContext.prototype),v.prototype.constructor=v,v.prototype.simple_stmt=function(){return this.getTypedRuleContext(C,0)},v.prototype.compound_stmt=function(){return this.getTypedRuleContext(ee,0)},v.prototype.enterRule=function(e){e instanceof s&&e.enterStmt(this)},v.prototype.exitRule=function(e){e instanceof s&&e.exitStmt(this)},v.prototype.accept=function(e){return e instanceof a?e.visitStmt(this):e.visitChildren(this)},g.StmtContext=v,g.prototype.stmt=function(){var e=new v(this,this._ctx,this.state);this.enterRule(e,26,g.RULE_stmt);try{switch(this.state=451,this._errHandler.sync(this),this._input.LA(1)){case g.RETURN:case g.RAISE:case g.FROM:case g.IMPORT:case g.GLOBAL:case g.NONLOCAL:case g.ASSERT:case g.LAMBDA:case g.NOT:case g.NONE:case g.TRUE:case g.FALSE:case g.YIELD:case g.DEL:case g.PASS:case g.CONTINUE:case g.BREAK:case g.NAME:case g.STRING_LITERAL:case g.BYTES_LITERAL:case g.DECIMAL_INTEGER:case g.OCT_INTEGER:case g.HEX_INTEGER:case g.BIN_INTEGER:case g.FLOAT_NUMBER:case g.IMAG_NUMBER:case g.ELLIPSIS:case g.STAR:case g.OPEN_PAREN:case g.OPEN_BRACK:case g.ADD:case g.MINUS:case g.NOT_OP:case g.OPEN_BRACE:this.enterOuterAlt(e,1),this.state=449,this.simple_stmt();break;case g.DEF:case g.IF:case g.WHILE:case g.FOR:case g.TRY:case g.WITH:case g.CLASS:case g.ASYNC:case g.AT:this.enterOuterAlt(e,2),this.state=450,this.compound_stmt();break;default:throw new r.error.NoViableAltException(this)}}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},C.prototype=Object.create(r.ParserRuleContext.prototype),C.prototype.constructor=C,C.prototype.small_stmt=function(){return this.getTypedRuleContext(R,0)},C.prototype.eos=function(){return this.getTypedRuleContext(Ct,0)},C.prototype.enterRule=function(e){e instanceof s&&e.enterSimple_stmt(this)},C.prototype.exitRule=function(e){e instanceof s&&e.exitSimple_stmt(this)},C.prototype.accept=function(e){return e instanceof a?e.visitSimple_stmt(this):e.visitChildren(this)},g.Simple_stmtContext=C,g.prototype.simple_stmt=function(){var e=new C(this,this._ctx,this.state);this.enterRule(e,28,g.RULE_simple_stmt);try{this.enterOuterAlt(e,1),this.state=453,this.small_stmt(),this.state=454,this.eos()}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},R.prototype=Object.create(r.ParserRuleContext.prototype),R.prototype.constructor=R,R.prototype.expr_stmt=function(){return this.getTypedRuleContext(O,0)},R.prototype.del_stmt=function(){return this.getTypedRuleContext(B,0)},R.prototype.pass_stmt=function(){return this.getTypedRuleContext(M,0)},R.prototype.flow_stmt=function(){return this.getTypedRuleContext($,0)},R.prototype.import_stmt=function(){return this.getTypedRuleContext(G,0)},R.prototype.global_stmt=function(){return this.getTypedRuleContext(X,0)},R.prototype.nonlocal_stmt=function(){return this.getTypedRuleContext(J,0)},R.prototype.assert_stmt=function(){return this.getTypedRuleContext(Q,0)},R.prototype.enterRule=function(e){e instanceof s&&e.enterSmall_stmt(this)},R.prototype.exitRule=function(e){e instanceof s&&e.exitSmall_stmt(this)},R.prototype.accept=function(e){return e instanceof a?e.visitSmall_stmt(this):e.visitChildren(this)},g.Small_stmtContext=R,g.prototype.small_stmt=function(){var e=new R(this,this._ctx,this.state);this.enterRule(e,30,g.RULE_small_stmt);try{switch(this.enterOuterAlt(e,1),this.state=464,this._errHandler.sync(this),this._input.LA(1)){case g.LAMBDA:case g.NOT:case g.NONE:case g.TRUE:case g.FALSE:case g.NAME:case g.STRING_LITERAL:case g.BYTES_LITERAL:case g.DECIMAL_INTEGER:case g.OCT_INTEGER:case g.HEX_INTEGER:case g.BIN_INTEGER:case g.FLOAT_NUMBER:case g.IMAG_NUMBER:case g.ELLIPSIS:case g.STAR:case g.OPEN_PAREN:case g.OPEN_BRACK:case g.ADD:case g.MINUS:case g.NOT_OP:case g.OPEN_BRACE:this.state=456,this.expr_stmt();break;case g.DEL:this.state=457,this.del_stmt();break;case g.PASS:this.state=458,this.pass_stmt();break;case g.RETURN:case g.RAISE:case g.YIELD:case g.CONTINUE:case g.BREAK:this.state=459,this.flow_stmt();break;case g.FROM:case g.IMPORT:this.state=460,this.import_stmt();break;case g.GLOBAL:this.state=461,this.global_stmt();break;case g.NONLOCAL:this.state=462,this.nonlocal_stmt();break;case g.ASSERT:this.state=463,this.assert_stmt();break;default:throw new r.error.NoViableAltException(this)}}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},O.prototype=Object.create(r.ParserRuleContext.prototype),O.prototype.constructor=O,O.prototype.testlist_star_expr=function(){return this.getTypedRuleContext(w,0)},O.prototype.annassign=function(){return this.getTypedRuleContext(j,0)},O.prototype.augassign=function(){return this.getTypedRuleContext(D,0)},O.prototype.yield_expr=function(){return this.getTypedRuleContext(lt,0)},O.prototype.testlist=function(){return this.getTypedRuleContext(Qe,0)},O.prototype.assign_stmt=function(){return this.getTypedRuleContext(N,0)},O.prototype.enterRule=function(e){e instanceof s&&e.enterExpr_stmt(this)},O.prototype.exitRule=function(e){e instanceof s&&e.exitExpr_stmt(this)},O.prototype.accept=function(e){return e instanceof a?e.visitExpr_stmt(this):e.visitChildren(this)},g.Expr_stmtContext=O,g.prototype.expr_stmt=function(){var e=new O(this,this._ctx,this.state);this.enterRule(e,32,g.RULE_expr_stmt);try{switch(this.enterOuterAlt(e,1),this.state=466,this.testlist_star_expr(),this.state=476,this._errHandler.sync(this),this._input.LA(1)){case g.COLON:this.state=467,this.annassign();break;case g.ADD_ASSIGN:case g.SUB_ASSIGN:case g.MULT_ASSIGN:case g.AT_ASSIGN:case g.DIV_ASSIGN:case g.MOD_ASSIGN:case g.AND_ASSIGN:case g.OR_ASSIGN:case g.XOR_ASSIGN:case g.LEFT_SHIFT_ASSIGN:case g.RIGHT_SHIFT_ASSIGN:case g.POWER_ASSIGN:case g.IDIV_ASSIGN:switch(this.state=468,this.augassign(),this.state=471,this._errHandler.sync(this),this._input.LA(1)){case g.YIELD:this.state=469,this.yield_expr();break;case g.LAMBDA:case g.NOT:case g.NONE:case g.TRUE:case g.FALSE:case g.NAME:case g.STRING_LITERAL:case g.BYTES_LITERAL:case g.DECIMAL_INTEGER:case g.OCT_INTEGER:case g.HEX_INTEGER:case g.BIN_INTEGER:case g.FLOAT_NUMBER:case g.IMAG_NUMBER:case g.ELLIPSIS:case g.OPEN_PAREN:case g.OPEN_BRACK:case g.ADD:case g.MINUS:case g.NOT_OP:case g.OPEN_BRACE:this.state=470,this.testlist();break;default:throw new r.error.NoViableAltException(this)}break;case g.NEWLINE:case g.SEMI_COLON:case g.ASSIGN:this.state=474,this._errHandler.sync(this),this._input.LA(1)===g.ASSIGN&&(this.state=473,this.assign_stmt());break;default:throw new r.error.NoViableAltException(this)}}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},N.prototype=Object.create(r.ParserRuleContext.prototype),N.prototype.constructor=N,N.prototype.ASSIGN=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.ASSIGN):this.getToken(g.ASSIGN,e)},N.prototype.yield_expr=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(lt):this.getTypedRuleContext(lt,e)},N.prototype.testlist_star_expr=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(w):this.getTypedRuleContext(w,e)},N.prototype.enterRule=function(e){e instanceof s&&e.enterAssign_stmt(this)},N.prototype.exitRule=function(e){e instanceof s&&e.exitAssign_stmt(this)},N.prototype.accept=function(e){return e instanceof a?e.visitAssign_stmt(this):e.visitChildren(this)},g.Assign_stmtContext=N,g.prototype.assign_stmt=function(){var e=new N(this,this._ctx,this.state);this.enterRule(e,34,g.RULE_assign_stmt);var t=0;try{this.enterOuterAlt(e,1),this.state=483,this._errHandler.sync(this),t=this._input.LA(1);do{switch(this.state=478,this.match(g.ASSIGN),this.state=481,this._errHandler.sync(this),this._input.LA(1)){case g.YIELD:this.state=479,this.yield_expr();break;case g.LAMBDA:case g.NOT:case g.NONE:case g.TRUE:case g.FALSE:case g.NAME:case g.STRING_LITERAL:case g.BYTES_LITERAL:case g.DECIMAL_INTEGER:case g.OCT_INTEGER:case g.HEX_INTEGER:case g.BIN_INTEGER:case g.FLOAT_NUMBER:case g.IMAG_NUMBER:case g.ELLIPSIS:case g.STAR:case g.OPEN_PAREN:case g.OPEN_BRACK:case g.ADD:case g.MINUS:case g.NOT_OP:case g.OPEN_BRACE:this.state=480,this.testlist_star_expr();break;default:throw new r.error.NoViableAltException(this)}this.state=485,this._errHandler.sync(this),t=this._input.LA(1)}while(t===g.ASSIGN)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},j.prototype=Object.create(r.ParserRuleContext.prototype),j.prototype.constructor=j,j.prototype.COLON=function(){return this.getToken(g.COLON,0)},j.prototype.test=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(me):this.getTypedRuleContext(me,e)},j.prototype.ASSIGN=function(){return this.getToken(g.ASSIGN,0)},j.prototype.enterRule=function(e){e instanceof s&&e.enterAnnassign(this)},j.prototype.exitRule=function(e){e instanceof s&&e.exitAnnassign(this)},j.prototype.accept=function(e){return e instanceof a?e.visitAnnassign(this):e.visitChildren(this)},g.AnnassignContext=j,g.prototype.annassign=function(){var e=new j(this,this._ctx,this.state);this.enterRule(e,36,g.RULE_annassign);try{this.enterOuterAlt(e,1),this.state=487,this.match(g.COLON),this.state=488,this.test(),this.state=491,this._errHandler.sync(this),this._input.LA(1)===g.ASSIGN&&(this.state=489,this.match(g.ASSIGN),this.state=490,this.test())}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},w.prototype=Object.create(r.ParserRuleContext.prototype),w.prototype.constructor=w,w.prototype.test=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(me):this.getTypedRuleContext(me,e)},w.prototype.star_expr=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(Se):this.getTypedRuleContext(Se,e)},w.prototype.COMMA=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.COMMA):this.getToken(g.COMMA,e)},w.prototype.enterRule=function(e){e instanceof s&&e.enterTestlist_star_expr(this)},w.prototype.exitRule=function(e){e instanceof s&&e.exitTestlist_star_expr(this)},w.prototype.accept=function(e){return e instanceof a?e.visitTestlist_star_expr(this):e.visitChildren(this)},g.Testlist_star_exprContext=w,g.prototype.testlist_star_expr=function(){var e=new w(this,this._ctx,this.state);this.enterRule(e,38,g.RULE_testlist_star_expr);try{switch(this.enterOuterAlt(e,1),this.state=495,this._errHandler.sync(this),this._input.LA(1)){case g.LAMBDA:case g.NOT:case g.NONE:case g.TRUE:case g.FALSE:case g.NAME:case g.STRING_LITERAL:case g.BYTES_LITERAL:case g.DECIMAL_INTEGER:case g.OCT_INTEGER:case g.HEX_INTEGER:case g.BIN_INTEGER:case g.FLOAT_NUMBER:case g.IMAG_NUMBER:case g.ELLIPSIS:case g.OPEN_PAREN:case g.OPEN_BRACK:case g.ADD:case g.MINUS:case g.NOT_OP:case g.OPEN_BRACE:this.state=493,this.test();break;case g.STAR:this.state=494,this.star_expr();break;default:throw new r.error.NoViableAltException(this)}this.state=504,this._errHandler.sync(this);for(var t=this._interp.adaptivePredict(this._input,61,this._ctx);2!=t&&t!=r.atn.ATN.INVALID_ALT_NUMBER;){if(1===t)switch(this.state=497,this.match(g.COMMA),this.state=500,this._errHandler.sync(this),this._input.LA(1)){case g.LAMBDA:case g.NOT:case g.NONE:case g.TRUE:case g.FALSE:case g.NAME:case g.STRING_LITERAL:case g.BYTES_LITERAL:case g.DECIMAL_INTEGER:case g.OCT_INTEGER:case g.HEX_INTEGER:case g.BIN_INTEGER:case g.FLOAT_NUMBER:case g.IMAG_NUMBER:case g.ELLIPSIS:case g.OPEN_PAREN:case g.OPEN_BRACK:case g.ADD:case g.MINUS:case g.NOT_OP:case g.OPEN_BRACE:this.state=498,this.test();break;case g.STAR:this.state=499,this.star_expr();break;default:throw new r.error.NoViableAltException(this)}this.state=506,this._errHandler.sync(this),t=this._interp.adaptivePredict(this._input,61,this._ctx)}this.state=508,this._errHandler.sync(this),this._input.LA(1)===g.COMMA&&(this.state=507,this.match(g.COMMA))}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},D.prototype=Object.create(r.ParserRuleContext.prototype),D.prototype.constructor=D,D.prototype.ADD_ASSIGN=function(){return this.getToken(g.ADD_ASSIGN,0)},D.prototype.SUB_ASSIGN=function(){return this.getToken(g.SUB_ASSIGN,0)},D.prototype.MULT_ASSIGN=function(){return this.getToken(g.MULT_ASSIGN,0)},D.prototype.AT_ASSIGN=function(){return this.getToken(g.AT_ASSIGN,0)},D.prototype.DIV_ASSIGN=function(){return this.getToken(g.DIV_ASSIGN,0)},D.prototype.MOD_ASSIGN=function(){return this.getToken(g.MOD_ASSIGN,0)},D.prototype.AND_ASSIGN=function(){return this.getToken(g.AND_ASSIGN,0)},D.prototype.OR_ASSIGN=function(){return this.getToken(g.OR_ASSIGN,0)},D.prototype.XOR_ASSIGN=function(){return this.getToken(g.XOR_ASSIGN,0)},D.prototype.LEFT_SHIFT_ASSIGN=function(){return this.getToken(g.LEFT_SHIFT_ASSIGN,0)},D.prototype.RIGHT_SHIFT_ASSIGN=function(){return this.getToken(g.RIGHT_SHIFT_ASSIGN,0)},D.prototype.POWER_ASSIGN=function(){return this.getToken(g.POWER_ASSIGN,0)},D.prototype.IDIV_ASSIGN=function(){return this.getToken(g.IDIV_ASSIGN,0)},D.prototype.enterRule=function(e){e instanceof s&&e.enterAugassign(this)},D.prototype.exitRule=function(e){e instanceof s&&e.exitAugassign(this)},D.prototype.accept=function(e){return e instanceof a?e.visitAugassign(this):e.visitChildren(this)},g.AugassignContext=D,g.prototype.augassign=function(){var e=new D(this,this._ctx,this.state);this.enterRule(e,40,g.RULE_augassign);var t=0;try{this.enterOuterAlt(e,1),this.state=510,0!=((t=this._input.LA(1))-80&-32)||0==(1<<t-80&(1<<g.ADD_ASSIGN-80|1<<g.SUB_ASSIGN-80|1<<g.MULT_ASSIGN-80|1<<g.AT_ASSIGN-80|1<<g.DIV_ASSIGN-80|1<<g.MOD_ASSIGN-80|1<<g.AND_ASSIGN-80|1<<g.OR_ASSIGN-80|1<<g.XOR_ASSIGN-80|1<<g.LEFT_SHIFT_ASSIGN-80|1<<g.RIGHT_SHIFT_ASSIGN-80|1<<g.POWER_ASSIGN-80|1<<g.IDIV_ASSIGN-80))?this._errHandler.recoverInline(this):(this._errHandler.reportMatch(this),this.consume())}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},B.prototype=Object.create(r.ParserRuleContext.prototype),B.prototype.constructor=B,B.prototype.DEL=function(){return this.getToken(g.DEL,0)},B.prototype.exprlist=function(){return this.getTypedRuleContext(Je,0)},B.prototype.enterRule=function(e){e instanceof s&&e.enterDel_stmt(this)},B.prototype.exitRule=function(e){e instanceof s&&e.exitDel_stmt(this)},B.prototype.accept=function(e){return e instanceof a?e.visitDel_stmt(this):e.visitChildren(this)},g.Del_stmtContext=B,g.prototype.del_stmt=function(){var e=new B(this,this._ctx,this.state);this.enterRule(e,42,g.RULE_del_stmt);try{this.enterOuterAlt(e,1),this.state=512,this.match(g.DEL),this.state=513,this.exprlist()}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},M.prototype=Object.create(r.ParserRuleContext.prototype),M.prototype.constructor=M,M.prototype.PASS=function(){return this.getToken(g.PASS,0)},M.prototype.enterRule=function(e){e instanceof s&&e.enterPass_stmt(this)},M.prototype.exitRule=function(e){e instanceof s&&e.exitPass_stmt(this)},M.prototype.accept=function(e){return e instanceof a?e.visitPass_stmt(this):e.visitChildren(this)},g.Pass_stmtContext=M,g.prototype.pass_stmt=function(){var e=new M(this,this._ctx,this.state);this.enterRule(e,44,g.RULE_pass_stmt);try{this.enterOuterAlt(e,1),this.state=515,this.match(g.PASS)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},$.prototype=Object.create(r.ParserRuleContext.prototype),$.prototype.constructor=$,$.prototype.break_stmt=function(){return this.getTypedRuleContext(k,0)},$.prototype.continue_stmt=function(){return this.getTypedRuleContext(P,0)},$.prototype.return_stmt=function(){return this.getTypedRuleContext(F,0)},$.prototype.raise_stmt=function(){return this.getTypedRuleContext(q,0)},$.prototype.yield_stmt=function(){return this.getTypedRuleContext(U,0)},$.prototype.enterRule=function(e){e instanceof s&&e.enterFlow_stmt(this)},$.prototype.exitRule=function(e){e instanceof s&&e.exitFlow_stmt(this)},$.prototype.accept=function(e){return e instanceof a?e.visitFlow_stmt(this):e.visitChildren(this)},g.Flow_stmtContext=$,g.prototype.flow_stmt=function(){var e=new $(this,this._ctx,this.state);this.enterRule(e,46,g.RULE_flow_stmt);try{switch(this.state=522,this._errHandler.sync(this),this._input.LA(1)){case g.BREAK:this.enterOuterAlt(e,1),this.state=517,this.break_stmt();break;case g.CONTINUE:this.enterOuterAlt(e,2),this.state=518,this.continue_stmt();break;case g.RETURN:this.enterOuterAlt(e,3),this.state=519,this.return_stmt();break;case g.RAISE:this.enterOuterAlt(e,4),this.state=520,this.raise_stmt();break;case g.YIELD:this.enterOuterAlt(e,5),this.state=521,this.yield_stmt();break;default:throw new r.error.NoViableAltException(this)}}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},k.prototype=Object.create(r.ParserRuleContext.prototype),k.prototype.constructor=k,k.prototype.BREAK=function(){return this.getToken(g.BREAK,0)},k.prototype.enterRule=function(e){e instanceof s&&e.enterBreak_stmt(this)},k.prototype.exitRule=function(e){e instanceof s&&e.exitBreak_stmt(this)},k.prototype.accept=function(e){return e instanceof a?e.visitBreak_stmt(this):e.visitChildren(this)},g.Break_stmtContext=k,g.prototype.break_stmt=function(){var e=new k(this,this._ctx,this.state);this.enterRule(e,48,g.RULE_break_stmt);try{this.enterOuterAlt(e,1),this.state=524,this.match(g.BREAK)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},P.prototype=Object.create(r.ParserRuleContext.prototype),P.prototype.constructor=P,P.prototype.CONTINUE=function(){return this.getToken(g.CONTINUE,0)},P.prototype.enterRule=function(e){e instanceof s&&e.enterContinue_stmt(this)},P.prototype.exitRule=function(e){e instanceof s&&e.exitContinue_stmt(this)},P.prototype.accept=function(e){return e instanceof a?e.visitContinue_stmt(this):e.visitChildren(this)},g.Continue_stmtContext=P,g.prototype.continue_stmt=function(){var e=new P(this,this._ctx,this.state);this.enterRule(e,50,g.RULE_continue_stmt);try{this.enterOuterAlt(e,1),this.state=526,this.match(g.CONTINUE)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},F.prototype=Object.create(r.ParserRuleContext.prototype),F.prototype.constructor=F,F.prototype.RETURN=function(){return this.getToken(g.RETURN,0)},F.prototype.testlist=function(){return this.getTypedRuleContext(Qe,0)},F.prototype.enterRule=function(e){e instanceof s&&e.enterReturn_stmt(this)},F.prototype.exitRule=function(e){e instanceof s&&e.exitReturn_stmt(this)},F.prototype.accept=function(e){return e instanceof a?e.visitReturn_stmt(this):e.visitChildren(this)},g.Return_stmtContext=F,g.prototype.return_stmt=function(){var e=new F(this,this._ctx,this.state);this.enterRule(e,52,g.RULE_return_stmt);var t=0;try{this.enterOuterAlt(e,1),this.state=528,this.match(g.RETURN),this.state=530,this._errHandler.sync(this),(0==((t=this._input.LA(1))-20&-32)&&0!=(1<<t-20&(1<<g.LAMBDA-20|1<<g.NOT-20|1<<g.NONE-20|1<<g.TRUE-20|1<<g.FALSE-20|1<<g.NAME-20|1<<g.STRING_LITERAL-20|1<<g.BYTES_LITERAL-20|1<<g.DECIMAL_INTEGER-20|1<<g.OCT_INTEGER-20|1<<g.HEX_INTEGER-20|1<<g.BIN_INTEGER-20|1<<g.FLOAT_NUMBER-20|1<<g.IMAG_NUMBER-20|1<<g.ELLIPSIS-20|1<<g.OPEN_PAREN-20))||0==(t-56&-32)&&0!=(1<<t-56&(1<<g.OPEN_BRACK-56|1<<g.ADD-56|1<<g.MINUS-56|1<<g.NOT_OP-56|1<<g.OPEN_BRACE-56)))&&(this.state=529,this.testlist())}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},U.prototype=Object.create(r.ParserRuleContext.prototype),U.prototype.constructor=U,U.prototype.yield_expr=function(){return this.getTypedRuleContext(lt,0)},U.prototype.enterRule=function(e){e instanceof s&&e.enterYield_stmt(this)},U.prototype.exitRule=function(e){e instanceof s&&e.exitYield_stmt(this)},U.prototype.accept=function(e){return e instanceof a?e.visitYield_stmt(this):e.visitChildren(this)},g.Yield_stmtContext=U,g.prototype.yield_stmt=function(){var e=new U(this,this._ctx,this.state);this.enterRule(e,54,g.RULE_yield_stmt);try{this.enterOuterAlt(e,1),this.state=532,this.yield_expr()}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},q.prototype=Object.create(r.ParserRuleContext.prototype),q.prototype.constructor=q,q.prototype.RAISE=function(){return this.getToken(g.RAISE,0)},q.prototype.test=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(me):this.getTypedRuleContext(me,e)},q.prototype.FROM=function(){return this.getToken(g.FROM,0)},q.prototype.enterRule=function(e){e instanceof s&&e.enterRaise_stmt(this)},q.prototype.exitRule=function(e){e instanceof s&&e.exitRaise_stmt(this)},q.prototype.accept=function(e){return e instanceof a?e.visitRaise_stmt(this):e.visitChildren(this)},g.Raise_stmtContext=q,g.prototype.raise_stmt=function(){var e=new q(this,this._ctx,this.state);this.enterRule(e,56,g.RULE_raise_stmt);var t=0;try{this.enterOuterAlt(e,1),this.state=534,this.match(g.RAISE),this.state=540,this._errHandler.sync(this),(0==((t=this._input.LA(1))-20&-32)&&0!=(1<<t-20&(1<<g.LAMBDA-20|1<<g.NOT-20|1<<g.NONE-20|1<<g.TRUE-20|1<<g.FALSE-20|1<<g.NAME-20|1<<g.STRING_LITERAL-20|1<<g.BYTES_LITERAL-20|1<<g.DECIMAL_INTEGER-20|1<<g.OCT_INTEGER-20|1<<g.HEX_INTEGER-20|1<<g.BIN_INTEGER-20|1<<g.FLOAT_NUMBER-20|1<<g.IMAG_NUMBER-20|1<<g.ELLIPSIS-20|1<<g.OPEN_PAREN-20))||0==(t-56&-32)&&0!=(1<<t-56&(1<<g.OPEN_BRACK-56|1<<g.ADD-56|1<<g.MINUS-56|1<<g.NOT_OP-56|1<<g.OPEN_BRACE-56)))&&(this.state=535,this.test(),this.state=538,this._errHandler.sync(this),(t=this._input.LA(1))===g.FROM&&(this.state=536,this.match(g.FROM),this.state=537,this.test()))}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},G.prototype=Object.create(r.ParserRuleContext.prototype),G.prototype.constructor=G,G.prototype.import_name=function(){return this.getTypedRuleContext(H,0)},G.prototype.import_from=function(){return this.getTypedRuleContext(V,0)},G.prototype.enterRule=function(e){e instanceof s&&e.enterImport_stmt(this)},G.prototype.exitRule=function(e){e instanceof s&&e.exitImport_stmt(this)},G.prototype.accept=function(e){return e instanceof a?e.visitImport_stmt(this):e.visitChildren(this)},g.Import_stmtContext=G,g.prototype.import_stmt=function(){var e=new G(this,this._ctx,this.state);this.enterRule(e,58,g.RULE_import_stmt);try{switch(this.state=544,this._errHandler.sync(this),this._input.LA(1)){case g.IMPORT:this.enterOuterAlt(e,1),this.state=542,this.import_name();break;case g.FROM:this.enterOuterAlt(e,2),this.state=543,this.import_from();break;default:throw new r.error.NoViableAltException(this)}}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},H.prototype=Object.create(r.ParserRuleContext.prototype),H.prototype.constructor=H,H.prototype.IMPORT=function(){return this.getToken(g.IMPORT,0)},H.prototype.dotted_as_names=function(){return this.getTypedRuleContext(z,0)},H.prototype.enterRule=function(e){e instanceof s&&e.enterImport_name(this)},H.prototype.exitRule=function(e){e instanceof s&&e.exitImport_name(this)},H.prototype.accept=function(e){return e instanceof a?e.visitImport_name(this):e.visitChildren(this)},g.Import_nameContext=H,g.prototype.import_name=function(){var e=new H(this,this._ctx,this.state);this.enterRule(e,60,g.RULE_import_name);try{this.enterOuterAlt(e,1),this.state=546,this.match(g.IMPORT),this.state=547,this.dotted_as_names()}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},V.prototype=Object.create(r.ParserRuleContext.prototype),V.prototype.constructor=V,V.prototype.FROM=function(){return this.getToken(g.FROM,0)},V.prototype.IMPORT=function(){return this.getToken(g.IMPORT,0)},V.prototype.dotted_name=function(){return this.getTypedRuleContext(Z,0)},V.prototype.STAR=function(){return this.getToken(g.STAR,0)},V.prototype.OPEN_PAREN=function(){return this.getToken(g.OPEN_PAREN,0)},V.prototype.import_as_names=function(){return this.getTypedRuleContext(Y,0)},V.prototype.CLOSE_PAREN=function(){return this.getToken(g.CLOSE_PAREN,0)},V.prototype.DOT=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.DOT):this.getToken(g.DOT,e)},V.prototype.ELLIPSIS=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.ELLIPSIS):this.getToken(g.ELLIPSIS,e)},V.prototype.enterRule=function(e){e instanceof s&&e.enterImport_from(this)},V.prototype.exitRule=function(e){e instanceof s&&e.exitImport_from(this)},V.prototype.accept=function(e){return e instanceof a?e.visitImport_from(this):e.visitChildren(this)},g.Import_fromContext=V,g.prototype.import_from=function(){var e=new V(this,this._ctx,this.state);this.enterRule(e,62,g.RULE_import_from);var t=0;try{switch(this.enterOuterAlt(e,1),this.state=549,this.match(g.FROM),this.state=562,this._errHandler.sync(this),this._interp.adaptivePredict(this._input,70,this._ctx)){case 1:for(this.state=553,this._errHandler.sync(this),t=this._input.LA(1);t===g.DOT||t===g.ELLIPSIS;)this.state=550,(t=this._input.LA(1))!==g.DOT&&t!==g.ELLIPSIS?this._errHandler.recoverInline(this):(this._errHandler.reportMatch(this),this.consume()),this.state=555,this._errHandler.sync(this),t=this._input.LA(1);this.state=556,this.dotted_name();break;case 2:this.state=558,this._errHandler.sync(this),t=this._input.LA(1);do{this.state=557,(t=this._input.LA(1))!==g.DOT&&t!==g.ELLIPSIS?this._errHandler.recoverInline(this):(this._errHandler.reportMatch(this),this.consume()),this.state=560,this._errHandler.sync(this),t=this._input.LA(1)}while(t===g.DOT||t===g.ELLIPSIS)}switch(this.state=564,this.match(g.IMPORT),this.state=571,this._errHandler.sync(this),this._input.LA(1)){case g.STAR:this.state=565,this.match(g.STAR);break;case g.OPEN_PAREN:this.state=566,this.match(g.OPEN_PAREN),this.state=567,this.import_as_names(),this.state=568,this.match(g.CLOSE_PAREN);break;case g.NAME:this.state=570,this.import_as_names();break;default:throw new r.error.NoViableAltException(this)}}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},K.prototype=Object.create(r.ParserRuleContext.prototype),K.prototype.constructor=K,K.prototype.NAME=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.NAME):this.getToken(g.NAME,e)},K.prototype.AS=function(){return this.getToken(g.AS,0)},K.prototype.enterRule=function(e){e instanceof s&&e.enterImport_as_name(this)},K.prototype.exitRule=function(e){e instanceof s&&e.exitImport_as_name(this)},K.prototype.accept=function(e){return e instanceof a?e.visitImport_as_name(this):e.visitChildren(this)},g.Import_as_nameContext=K,g.prototype.import_as_name=function(){var e=new K(this,this._ctx,this.state);this.enterRule(e,64,g.RULE_import_as_name);try{this.enterOuterAlt(e,1),this.state=573,this.match(g.NAME),this.state=576,this._errHandler.sync(this),this._input.LA(1)===g.AS&&(this.state=574,this.match(g.AS),this.state=575,this.match(g.NAME))}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},W.prototype=Object.create(r.ParserRuleContext.prototype),W.prototype.constructor=W,W.prototype.dotted_name=function(){return this.getTypedRuleContext(Z,0)},W.prototype.AS=function(){return this.getToken(g.AS,0)},W.prototype.NAME=function(){return this.getToken(g.NAME,0)},W.prototype.enterRule=function(e){e instanceof s&&e.enterDotted_as_name(this)},W.prototype.exitRule=function(e){e instanceof s&&e.exitDotted_as_name(this)},W.prototype.accept=function(e){return e instanceof a?e.visitDotted_as_name(this):e.visitChildren(this)},g.Dotted_as_nameContext=W,g.prototype.dotted_as_name=function(){var e=new W(this,this._ctx,this.state);this.enterRule(e,66,g.RULE_dotted_as_name);try{this.enterOuterAlt(e,1),this.state=578,this.dotted_name(),this.state=581,this._errHandler.sync(this),this._input.LA(1)===g.AS&&(this.state=579,this.match(g.AS),this.state=580,this.match(g.NAME))}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},Y.prototype=Object.create(r.ParserRuleContext.prototype),Y.prototype.constructor=Y,Y.prototype.import_as_name=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(K):this.getTypedRuleContext(K,e)},Y.prototype.COMMA=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.COMMA):this.getToken(g.COMMA,e)},Y.prototype.enterRule=function(e){e instanceof s&&e.enterImport_as_names(this)},Y.prototype.exitRule=function(e){e instanceof s&&e.exitImport_as_names(this)},Y.prototype.accept=function(e){return e instanceof a?e.visitImport_as_names(this):e.visitChildren(this)},g.Import_as_namesContext=Y,g.prototype.import_as_names=function(){var e=new Y(this,this._ctx,this.state);this.enterRule(e,68,g.RULE_import_as_names);try{this.enterOuterAlt(e,1),this.state=583,this.import_as_name(),this.state=588,this._errHandler.sync(this);for(var t=this._interp.adaptivePredict(this._input,74,this._ctx);2!=t&&t!=r.atn.ATN.INVALID_ALT_NUMBER;)1===t&&(this.state=584,this.match(g.COMMA),this.state=585,this.import_as_name()),this.state=590,this._errHandler.sync(this),t=this._interp.adaptivePredict(this._input,74,this._ctx);this.state=592,this._errHandler.sync(this),this._input.LA(1)===g.COMMA&&(this.state=591,this.match(g.COMMA))}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},z.prototype=Object.create(r.ParserRuleContext.prototype),z.prototype.constructor=z,z.prototype.dotted_as_name=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(W):this.getTypedRuleContext(W,e)},z.prototype.COMMA=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.COMMA):this.getToken(g.COMMA,e)},z.prototype.enterRule=function(e){e instanceof s&&e.enterDotted_as_names(this)},z.prototype.exitRule=function(e){e instanceof s&&e.exitDotted_as_names(this)},z.prototype.accept=function(e){return e instanceof a?e.visitDotted_as_names(this):e.visitChildren(this)},g.Dotted_as_namesContext=z,g.prototype.dotted_as_names=function(){var e=new z(this,this._ctx,this.state);this.enterRule(e,70,g.RULE_dotted_as_names);var t=0;try{for(this.enterOuterAlt(e,1),this.state=594,this.dotted_as_name(),this.state=599,this._errHandler.sync(this),t=this._input.LA(1);t===g.COMMA;)this.state=595,this.match(g.COMMA),this.state=596,this.dotted_as_name(),this.state=601,this._errHandler.sync(this),t=this._input.LA(1)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},Z.prototype=Object.create(r.ParserRuleContext.prototype),Z.prototype.constructor=Z,Z.prototype.NAME=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.NAME):this.getToken(g.NAME,e)},Z.prototype.DOT=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.DOT):this.getToken(g.DOT,e)},Z.prototype.enterRule=function(e){e instanceof s&&e.enterDotted_name(this)},Z.prototype.exitRule=function(e){e instanceof s&&e.exitDotted_name(this)},Z.prototype.accept=function(e){return e instanceof a?e.visitDotted_name(this):e.visitChildren(this)},g.Dotted_nameContext=Z,g.prototype.dotted_name=function(){var e=new Z(this,this._ctx,this.state);this.enterRule(e,72,g.RULE_dotted_name);var t=0;try{for(this.enterOuterAlt(e,1),this.state=602,this.match(g.NAME),this.state=607,this._errHandler.sync(this),t=this._input.LA(1);t===g.DOT;)this.state=603,this.match(g.DOT),this.state=604,this.match(g.NAME),this.state=609,this._errHandler.sync(this),t=this._input.LA(1)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},X.prototype=Object.create(r.ParserRuleContext.prototype),X.prototype.constructor=X,X.prototype.GLOBAL=function(){return this.getToken(g.GLOBAL,0)},X.prototype.NAME=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.NAME):this.getToken(g.NAME,e)},X.prototype.COMMA=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.COMMA):this.getToken(g.COMMA,e)},X.prototype.enterRule=function(e){e instanceof s&&e.enterGlobal_stmt(this)},X.prototype.exitRule=function(e){e instanceof s&&e.exitGlobal_stmt(this)},X.prototype.accept=function(e){return e instanceof a?e.visitGlobal_stmt(this):e.visitChildren(this)},g.Global_stmtContext=X,g.prototype.global_stmt=function(){var e=new X(this,this._ctx,this.state);this.enterRule(e,74,g.RULE_global_stmt);var t=0;try{for(this.enterOuterAlt(e,1),this.state=610,this.match(g.GLOBAL),this.state=611,this.match(g.NAME),this.state=616,this._errHandler.sync(this),t=this._input.LA(1);t===g.COMMA;)this.state=612,this.match(g.COMMA),this.state=613,this.match(g.NAME),this.state=618,this._errHandler.sync(this),t=this._input.LA(1)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},J.prototype=Object.create(r.ParserRuleContext.prototype),J.prototype.constructor=J,J.prototype.NONLOCAL=function(){return this.getToken(g.NONLOCAL,0)},J.prototype.NAME=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.NAME):this.getToken(g.NAME,e)},J.prototype.COMMA=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.COMMA):this.getToken(g.COMMA,e)},J.prototype.enterRule=function(e){e instanceof s&&e.enterNonlocal_stmt(this)},J.prototype.exitRule=function(e){e instanceof s&&e.exitNonlocal_stmt(this)},J.prototype.accept=function(e){return e instanceof a?e.visitNonlocal_stmt(this):e.visitChildren(this)},g.Nonlocal_stmtContext=J,g.prototype.nonlocal_stmt=function(){var e=new J(this,this._ctx,this.state);this.enterRule(e,76,g.RULE_nonlocal_stmt);var t=0;try{for(this.enterOuterAlt(e,1),this.state=619,this.match(g.NONLOCAL),this.state=620,this.match(g.NAME),this.state=625,this._errHandler.sync(this),t=this._input.LA(1);t===g.COMMA;)this.state=621,this.match(g.COMMA),this.state=622,this.match(g.NAME),this.state=627,this._errHandler.sync(this),t=this._input.LA(1)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},Q.prototype=Object.create(r.ParserRuleContext.prototype),Q.prototype.constructor=Q,Q.prototype.ASSERT=function(){return this.getToken(g.ASSERT,0)},Q.prototype.test=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(me):this.getTypedRuleContext(me,e)},Q.prototype.COMMA=function(){return this.getToken(g.COMMA,0)},Q.prototype.enterRule=function(e){e instanceof s&&e.enterAssert_stmt(this)},Q.prototype.exitRule=function(e){e instanceof s&&e.exitAssert_stmt(this)},Q.prototype.accept=function(e){return e instanceof a?e.visitAssert_stmt(this):e.visitChildren(this)},g.Assert_stmtContext=Q,g.prototype.assert_stmt=function(){var e=new Q(this,this._ctx,this.state);this.enterRule(e,78,g.RULE_assert_stmt);try{this.enterOuterAlt(e,1),this.state=628,this.match(g.ASSERT),this.state=629,this.test(),this.state=632,this._errHandler.sync(this),this._input.LA(1)===g.COMMA&&(this.state=630,this.match(g.COMMA),this.state=631,this.test())}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},ee.prototype=Object.create(r.ParserRuleContext.prototype),ee.prototype.constructor=ee,ee.prototype.if_stmt=function(){return this.getTypedRuleContext(ne,0)},ee.prototype.while_stmt=function(){return this.getTypedRuleContext(re,0)},ee.prototype.for_stmt=function(){return this.getTypedRuleContext(se,0)},ee.prototype.try_stmt=function(){return this.getTypedRuleContext(ae,0)},ee.prototype.with_stmt=function(){return this.getTypedRuleContext(oe,0)},ee.prototype.funcdef=function(){return this.getTypedRuleContext(A,0)},ee.prototype.classdef=function(){return this.getTypedRuleContext(tt,0)},ee.prototype.decorated=function(){return this.getTypedRuleContext(b,0)},ee.prototype.async_stmt=function(){return this.getTypedRuleContext(te,0)},ee.prototype.enterRule=function(e){e instanceof s&&e.enterCompound_stmt(this)},ee.prototype.exitRule=function(e){e instanceof s&&e.exitCompound_stmt(this)},ee.prototype.accept=function(e){return e instanceof a?e.visitCompound_stmt(this):e.visitChildren(this)},g.Compound_stmtContext=ee,g.prototype.compound_stmt=function(){var e=new ee(this,this._ctx,this.state);this.enterRule(e,80,g.RULE_compound_stmt);try{switch(this.state=643,this._errHandler.sync(this),this._input.LA(1)){case g.IF:this.enterOuterAlt(e,1),this.state=634,this.if_stmt();break;case g.WHILE:this.enterOuterAlt(e,2),this.state=635,this.while_stmt();break;case g.FOR:this.enterOuterAlt(e,3),this.state=636,this.for_stmt();break;case g.TRY:this.enterOuterAlt(e,4),this.state=637,this.try_stmt();break;case g.WITH:this.enterOuterAlt(e,5),this.state=638,this.with_stmt();break;case g.DEF:this.enterOuterAlt(e,6),this.state=639,this.funcdef();break;case g.CLASS:this.enterOuterAlt(e,7),this.state=640,this.classdef();break;case g.AT:this.enterOuterAlt(e,8),this.state=641,this.decorated();break;case g.ASYNC:this.enterOuterAlt(e,9),this.state=642,this.async_stmt();break;default:throw new r.error.NoViableAltException(this)}}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},te.prototype=Object.create(r.ParserRuleContext.prototype),te.prototype.constructor=te,te.prototype.ASYNC=function(){return this.getToken(g.ASYNC,0)},te.prototype.funcdef=function(){return this.getTypedRuleContext(A,0)},te.prototype.with_stmt=function(){return this.getTypedRuleContext(oe,0)},te.prototype.for_stmt=function(){return this.getTypedRuleContext(se,0)},te.prototype.enterRule=function(e){e instanceof s&&e.enterAsync_stmt(this)},te.prototype.exitRule=function(e){e instanceof s&&e.exitAsync_stmt(this)},te.prototype.accept=function(e){return e instanceof a?e.visitAsync_stmt(this):e.visitChildren(this)},g.Async_stmtContext=te,g.prototype.async_stmt=function(){var e=new te(this,this._ctx,this.state);this.enterRule(e,82,g.RULE_async_stmt);try{switch(this.enterOuterAlt(e,1),this.state=645,this.match(g.ASYNC),this.state=649,this._errHandler.sync(this),this._input.LA(1)){case g.DEF:this.state=646,this.funcdef();break;case g.WITH:this.state=647,this.with_stmt();break;case g.FOR:this.state=648,this.for_stmt();break;default:throw new r.error.NoViableAltException(this)}}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},ne.prototype=Object.create(r.ParserRuleContext.prototype),ne.prototype.constructor=ne,ne.prototype.IF=function(){return this.getToken(g.IF,0)},ne.prototype.test=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(me):this.getTypedRuleContext(me,e)},ne.prototype.COLON=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.COLON):this.getToken(g.COLON,e)},ne.prototype.suite=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(pe):this.getTypedRuleContext(pe,e)},ne.prototype.ELIF=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.ELIF):this.getToken(g.ELIF,e)},ne.prototype.ELSE=function(){return this.getToken(g.ELSE,0)},ne.prototype.enterRule=function(e){e instanceof s&&e.enterIf_stmt(this)},ne.prototype.exitRule=function(e){e instanceof s&&e.exitIf_stmt(this)},ne.prototype.accept=function(e){return e instanceof a?e.visitIf_stmt(this):e.visitChildren(this)},g.If_stmtContext=ne,g.prototype.if_stmt=function(){var e=new ne(this,this._ctx,this.state);this.enterRule(e,84,g.RULE_if_stmt);var t=0;try{for(this.enterOuterAlt(e,1),this.state=651,this.match(g.IF),this.state=652,this.test(),this.state=653,this.match(g.COLON),this.state=654,this.suite(),this.state=662,this._errHandler.sync(this),t=this._input.LA(1);t===g.ELIF;)this.state=655,this.match(g.ELIF),this.state=656,this.test(),this.state=657,this.match(g.COLON),this.state=658,this.suite(),this.state=664,this._errHandler.sync(this),t=this._input.LA(1);this.state=668,this._errHandler.sync(this),(t=this._input.LA(1))===g.ELSE&&(this.state=665,this.match(g.ELSE),this.state=666,this.match(g.COLON),this.state=667,this.suite())}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},re.prototype=Object.create(r.ParserRuleContext.prototype),re.prototype.constructor=re,re.prototype.WHILE=function(){return this.getToken(g.WHILE,0)},re.prototype.test=function(){return this.getTypedRuleContext(me,0)},re.prototype.COLON=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.COLON):this.getToken(g.COLON,e)},re.prototype.suite=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(pe):this.getTypedRuleContext(pe,e)},re.prototype.ELSE=function(){return this.getToken(g.ELSE,0)},re.prototype.enterRule=function(e){e instanceof s&&e.enterWhile_stmt(this)},re.prototype.exitRule=function(e){e instanceof s&&e.exitWhile_stmt(this)},re.prototype.accept=function(e){return e instanceof a?e.visitWhile_stmt(this):e.visitChildren(this)},g.While_stmtContext=re,g.prototype.while_stmt=function(){var e=new re(this,this._ctx,this.state);this.enterRule(e,86,g.RULE_while_stmt);try{this.enterOuterAlt(e,1),this.state=670,this.match(g.WHILE),this.state=671,this.test(),this.state=672,this.match(g.COLON),this.state=673,this.suite(),this.state=677,this._errHandler.sync(this),this._input.LA(1)===g.ELSE&&(this.state=674,this.match(g.ELSE),this.state=675,this.match(g.COLON),this.state=676,this.suite())}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},se.prototype=Object.create(r.ParserRuleContext.prototype),se.prototype.constructor=se,se.prototype.FOR=function(){return this.getToken(g.FOR,0)},se.prototype.exprlist=function(){return this.getTypedRuleContext(Je,0)},se.prototype.IN=function(){return this.getToken(g.IN,0)},se.prototype.testlist=function(){return this.getTypedRuleContext(Qe,0)},se.prototype.COLON=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.COLON):this.getToken(g.COLON,e)},se.prototype.suite=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(pe):this.getTypedRuleContext(pe,e)},se.prototype.ELSE=function(){return this.getToken(g.ELSE,0)},se.prototype.enterRule=function(e){e instanceof s&&e.enterFor_stmt(this)},se.prototype.exitRule=function(e){e instanceof s&&e.exitFor_stmt(this)},se.prototype.accept=function(e){return e instanceof a?e.visitFor_stmt(this):e.visitChildren(this)},g.For_stmtContext=se,g.prototype.for_stmt=function(){var e=new se(this,this._ctx,this.state);this.enterRule(e,88,g.RULE_for_stmt);try{this.enterOuterAlt(e,1),this.state=679,this.match(g.FOR),this.state=680,this.exprlist(),this.state=681,this.match(g.IN),this.state=682,this.testlist(),this.state=683,this.match(g.COLON),this.state=684,this.suite(),this.state=688,this._errHandler.sync(this),this._input.LA(1)===g.ELSE&&(this.state=685,this.match(g.ELSE),this.state=686,this.match(g.COLON),this.state=687,this.suite())}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},ae.prototype=Object.create(r.ParserRuleContext.prototype),ae.prototype.constructor=ae,ae.prototype.TRY=function(){return this.getToken(g.TRY,0)},ae.prototype.COLON=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.COLON):this.getToken(g.COLON,e)},ae.prototype.suite=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(pe):this.getTypedRuleContext(pe,e)},ae.prototype.FINALLY=function(){return this.getToken(g.FINALLY,0)},ae.prototype.except_clause=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(le):this.getTypedRuleContext(le,e)},ae.prototype.ELSE=function(){return this.getToken(g.ELSE,0)},ae.prototype.enterRule=function(e){e instanceof s&&e.enterTry_stmt(this)},ae.prototype.exitRule=function(e){e instanceof s&&e.exitTry_stmt(this)},ae.prototype.accept=function(e){return e instanceof a?e.visitTry_stmt(this):e.visitChildren(this)},g.Try_stmtContext=ae,g.prototype.try_stmt=function(){var e=new ae(this,this._ctx,this.state);this.enterRule(e,90,g.RULE_try_stmt);var t=0;try{switch(this.enterOuterAlt(e,1),this.state=690,this.match(g.TRY),this.state=691,this.match(g.COLON),this.state=692,this.suite(),this.state=714,this._errHandler.sync(this),this._input.LA(1)){case g.EXCEPT:this.state=697,this._errHandler.sync(this),t=this._input.LA(1);do{this.state=693,this.except_clause(),this.state=694,this.match(g.COLON),this.state=695,this.suite(),this.state=699,this._errHandler.sync(this),t=this._input.LA(1)}while(t===g.EXCEPT);this.state=704,this._errHandler.sync(this),(t=this._input.LA(1))===g.ELSE&&(this.state=701,this.match(g.ELSE),this.state=702,this.match(g.COLON),this.state=703,this.suite()),this.state=709,this._errHandler.sync(this),(t=this._input.LA(1))===g.FINALLY&&(this.state=706,this.match(g.FINALLY),this.state=707,this.match(g.COLON),this.state=708,this.suite());break;case g.FINALLY:this.state=711,this.match(g.FINALLY),this.state=712,this.match(g.COLON),this.state=713,this.suite();break;default:throw new r.error.NoViableAltException(this)}}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},oe.prototype=Object.create(r.ParserRuleContext.prototype),oe.prototype.constructor=oe,oe.prototype.WITH=function(){return this.getToken(g.WITH,0)},oe.prototype.with_item=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(ie):this.getTypedRuleContext(ie,e)},oe.prototype.COLON=function(){return this.getToken(g.COLON,0)},oe.prototype.suite=function(){return this.getTypedRuleContext(pe,0)},oe.prototype.COMMA=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.COMMA):this.getToken(g.COMMA,e)},oe.prototype.enterRule=function(e){e instanceof s&&e.enterWith_stmt(this)},oe.prototype.exitRule=function(e){e instanceof s&&e.exitWith_stmt(this)},oe.prototype.accept=function(e){return e instanceof a?e.visitWith_stmt(this):e.visitChildren(this)},g.With_stmtContext=oe,g.prototype.with_stmt=function(){var e=new oe(this,this._ctx,this.state);this.enterRule(e,92,g.RULE_with_stmt);var t=0;try{for(this.enterOuterAlt(e,1),this.state=716,this.match(g.WITH),this.state=717,this.with_item(),this.state=722,this._errHandler.sync(this),t=this._input.LA(1);t===g.COMMA;)this.state=718,this.match(g.COMMA),this.state=719,this.with_item(),this.state=724,this._errHandler.sync(this),t=this._input.LA(1);this.state=725,this.match(g.COLON),this.state=726,this.suite()}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},ie.prototype=Object.create(r.ParserRuleContext.prototype),ie.prototype.constructor=ie,ie.prototype.test=function(){return this.getTypedRuleContext(me,0)},ie.prototype.AS=function(){return this.getToken(g.AS,0)},ie.prototype.expr=function(){return this.getTypedRuleContext(Ae,0)},ie.prototype.enterRule=function(e){e instanceof s&&e.enterWith_item(this)},ie.prototype.exitRule=function(e){e instanceof s&&e.exitWith_item(this)},ie.prototype.accept=function(e){return e instanceof a?e.visitWith_item(this):e.visitChildren(this)},g.With_itemContext=ie,g.prototype.with_item=function(){var e=new ie(this,this._ctx,this.state);this.enterRule(e,94,g.RULE_with_item);try{this.enterOuterAlt(e,1),this.state=728,this.test(),this.state=731,this._errHandler.sync(this),this._input.LA(1)===g.AS&&(this.state=729,this.match(g.AS),this.state=730,this.expr())}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},le.prototype=Object.create(r.ParserRuleContext.prototype),le.prototype.constructor=le,le.prototype.EXCEPT=function(){return this.getToken(g.EXCEPT,0)},le.prototype.test=function(){return this.getTypedRuleContext(me,0)},le.prototype.AS=function(){return this.getToken(g.AS,0)},le.prototype.NAME=function(){return this.getToken(g.NAME,0)},le.prototype.enterRule=function(e){e instanceof s&&e.enterExcept_clause(this)},le.prototype.exitRule=function(e){e instanceof s&&e.exitExcept_clause(this)},le.prototype.accept=function(e){return e instanceof a?e.visitExcept_clause(this):e.visitChildren(this)},g.Except_clauseContext=le,g.prototype.except_clause=function(){var e=new le(this,this._ctx,this.state);this.enterRule(e,96,g.RULE_except_clause);var t=0;try{this.enterOuterAlt(e,1),this.state=733,this.match(g.EXCEPT),this.state=739,this._errHandler.sync(this),(0==((t=this._input.LA(1))-20&-32)&&0!=(1<<t-20&(1<<g.LAMBDA-20|1<<g.NOT-20|1<<g.NONE-20|1<<g.TRUE-20|1<<g.FALSE-20|1<<g.NAME-20|1<<g.STRING_LITERAL-20|1<<g.BYTES_LITERAL-20|1<<g.DECIMAL_INTEGER-20|1<<g.OCT_INTEGER-20|1<<g.HEX_INTEGER-20|1<<g.BIN_INTEGER-20|1<<g.FLOAT_NUMBER-20|1<<g.IMAG_NUMBER-20|1<<g.ELLIPSIS-20|1<<g.OPEN_PAREN-20))||0==(t-56&-32)&&0!=(1<<t-56&(1<<g.OPEN_BRACK-56|1<<g.ADD-56|1<<g.MINUS-56|1<<g.NOT_OP-56|1<<g.OPEN_BRACE-56)))&&(this.state=734,this.test(),this.state=737,this._errHandler.sync(this),(t=this._input.LA(1))===g.AS&&(this.state=735,this.match(g.AS),this.state=736,this.match(g.NAME)))}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},pe.prototype=Object.create(r.ParserRuleContext.prototype),pe.prototype.constructor=pe,pe.prototype.simple_stmt=function(){return this.getTypedRuleContext(C,0)},pe.prototype.eos=function(){return this.getTypedRuleContext(Ct,0)},pe.prototype.INDENT=function(){return this.getToken(g.INDENT,0)},pe.prototype.DEDENT=function(){return this.getToken(g.DEDENT,0)},pe.prototype.stmt=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(v):this.getTypedRuleContext(v,e)},pe.prototype.enterRule=function(e){e instanceof s&&e.enterSuite(this)},pe.prototype.exitRule=function(e){e instanceof s&&e.exitSuite(this)},pe.prototype.accept=function(e){return e instanceof a?e.visitSuite(this):e.visitChildren(this)},g.SuiteContext=pe,g.prototype.suite=function(){var e=new pe(this,this._ctx,this.state);this.enterRule(e,98,g.RULE_suite);var t=0;try{switch(this.state=751,this._errHandler.sync(this),this._input.LA(1)){case g.RETURN:case g.RAISE:case g.FROM:case g.IMPORT:case g.GLOBAL:case g.NONLOCAL:case g.ASSERT:case g.LAMBDA:case g.NOT:case g.NONE:case g.TRUE:case g.FALSE:case g.YIELD:case g.DEL:case g.PASS:case g.CONTINUE:case g.BREAK:case g.NAME:case g.STRING_LITERAL:case g.BYTES_LITERAL:case g.DECIMAL_INTEGER:case g.OCT_INTEGER:case g.HEX_INTEGER:case g.BIN_INTEGER:case g.FLOAT_NUMBER:case g.IMAG_NUMBER:case g.ELLIPSIS:case g.STAR:case g.OPEN_PAREN:case g.OPEN_BRACK:case g.ADD:case g.MINUS:case g.NOT_OP:case g.OPEN_BRACE:this.enterOuterAlt(e,1),this.state=741,this.simple_stmt();break;case g.NEWLINE:case g.SEMI_COLON:this.enterOuterAlt(e,2),this.state=742,this.eos(),this.state=743,this.match(g.INDENT),this.state=745,this._errHandler.sync(this),t=this._input.LA(1);do{this.state=744,this.stmt(),this.state=747,this._errHandler.sync(this),t=this._input.LA(1)}while(0==(-32&t)&&0!=(1<<t&(1<<g.DEF|1<<g.RETURN|1<<g.RAISE|1<<g.FROM|1<<g.IMPORT|1<<g.GLOBAL|1<<g.NONLOCAL|1<<g.ASSERT|1<<g.IF|1<<g.WHILE|1<<g.FOR|1<<g.TRY|1<<g.WITH|1<<g.LAMBDA|1<<g.NOT|1<<g.NONE|1<<g.TRUE|1<<g.FALSE|1<<g.CLASS|1<<g.YIELD|1<<g.DEL|1<<g.PASS))||0==(t-32&-32)&&0!=(1<<t-32&(1<<g.CONTINUE-32|1<<g.BREAK-32|1<<g.ASYNC-32|1<<g.NAME-32|1<<g.STRING_LITERAL-32|1<<g.BYTES_LITERAL-32|1<<g.DECIMAL_INTEGER-32|1<<g.OCT_INTEGER-32|1<<g.HEX_INTEGER-32|1<<g.BIN_INTEGER-32|1<<g.FLOAT_NUMBER-32|1<<g.IMAG_NUMBER-32|1<<g.ELLIPSIS-32|1<<g.STAR-32|1<<g.OPEN_PAREN-32|1<<g.OPEN_BRACK-32|1<<g.ADD-32))||0==(t-64&-32)&&0!=(1<<t-64&(1<<g.MINUS-64|1<<g.NOT_OP-64|1<<g.OPEN_BRACE-64|1<<g.AT-64)));this.state=749,this.match(g.DEDENT);break;default:throw new r.error.NoViableAltException(this)}}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},me.prototype=Object.create(r.ParserRuleContext.prototype),me.prototype.constructor=me,me.prototype.or_test=function(){return this.getTypedRuleContext(he,0)},me.prototype.inline_if=function(){return this.getTypedRuleContext(ce,0)},me.prototype.lambdef=function(){return this.getTypedRuleContext(ge,0)},me.prototype.enterRule=function(e){e instanceof s&&e.enterTest(this)},me.prototype.exitRule=function(e){e instanceof s&&e.exitTest(this)},me.prototype.accept=function(e){return e instanceof a?e.visitTest(this):e.visitChildren(this)},g.TestContext=me,g.prototype.test=function(){var e=new me(this,this._ctx,this.state);this.enterRule(e,100,g.RULE_test);try{switch(this.state=758,this._errHandler.sync(this),this._input.LA(1)){case g.NOT:case g.NONE:case g.TRUE:case g.FALSE:case g.NAME:case g.STRING_LITERAL:case g.BYTES_LITERAL:case g.DECIMAL_INTEGER:case g.OCT_INTEGER:case g.HEX_INTEGER:case g.BIN_INTEGER:case g.FLOAT_NUMBER:case g.IMAG_NUMBER:case g.ELLIPSIS:case g.OPEN_PAREN:case g.OPEN_BRACK:case g.ADD:case g.MINUS:case g.NOT_OP:case g.OPEN_BRACE:this.enterOuterAlt(e,1),this.state=753,this.or_test(),this.state=755,this._errHandler.sync(this),this._input.LA(1)===g.IF&&(this.state=754,this.inline_if());break;case g.LAMBDA:this.enterOuterAlt(e,2),this.state=757,this.lambdef();break;default:throw new r.error.NoViableAltException(this)}}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},ce.prototype=Object.create(r.ParserRuleContext.prototype),ce.prototype.constructor=ce,ce.prototype.IF=function(){return this.getToken(g.IF,0)},ce.prototype.or_test=function(){return this.getTypedRuleContext(he,0)},ce.prototype.ELSE=function(){return this.getToken(g.ELSE,0)},ce.prototype.test=function(){return this.getTypedRuleContext(me,0)},ce.prototype.enterRule=function(e){e instanceof s&&e.enterInline_if(this)},ce.prototype.exitRule=function(e){e instanceof s&&e.exitInline_if(this)},ce.prototype.accept=function(e){return e instanceof a?e.visitInline_if(this):e.visitChildren(this)},g.Inline_ifContext=ce,g.prototype.inline_if=function(){var e=new ce(this,this._ctx,this.state);this.enterRule(e,102,g.RULE_inline_if);try{this.enterOuterAlt(e,1),this.state=760,this.match(g.IF),this.state=761,this.or_test(),this.state=762,this.match(g.ELSE),this.state=763,this.test()}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},ue.prototype=Object.create(r.ParserRuleContext.prototype),ue.prototype.constructor=ue,ue.prototype.or_test=function(){return this.getTypedRuleContext(he,0)},ue.prototype.lambdef_nocond=function(){return this.getTypedRuleContext(de,0)},ue.prototype.enterRule=function(e){e instanceof s&&e.enterTest_nocond(this)},ue.prototype.exitRule=function(e){e instanceof s&&e.exitTest_nocond(this)},ue.prototype.accept=function(e){return e instanceof a?e.visitTest_nocond(this):e.visitChildren(this)},g.Test_nocondContext=ue,g.prototype.test_nocond=function(){var e=new ue(this,this._ctx,this.state);this.enterRule(e,104,g.RULE_test_nocond);try{switch(this.state=767,this._errHandler.sync(this),this._input.LA(1)){case g.NOT:case g.NONE:case g.TRUE:case g.FALSE:case g.NAME:case g.STRING_LITERAL:case g.BYTES_LITERAL:case g.DECIMAL_INTEGER:case g.OCT_INTEGER:case g.HEX_INTEGER:case g.BIN_INTEGER:case g.FLOAT_NUMBER:case g.IMAG_NUMBER:case g.ELLIPSIS:case g.OPEN_PAREN:case g.OPEN_BRACK:case g.ADD:case g.MINUS:case g.NOT_OP:case g.OPEN_BRACE:this.enterOuterAlt(e,1),this.state=765,this.or_test();break;case g.LAMBDA:this.enterOuterAlt(e,2),this.state=766,this.lambdef_nocond();break;default:throw new r.error.NoViableAltException(this)}}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},ge.prototype=Object.create(r.ParserRuleContext.prototype),ge.prototype.constructor=ge,ge.prototype.LAMBDA=function(){return this.getToken(g.LAMBDA,0)},ge.prototype.COLON=function(){return this.getToken(g.COLON,0)},ge.prototype.test=function(){return this.getTypedRuleContext(me,0)},ge.prototype.varargslist=function(){return this.getTypedRuleContext(I,0)},ge.prototype.enterRule=function(e){e instanceof s&&e.enterLambdef(this)},ge.prototype.exitRule=function(e){e instanceof s&&e.exitLambdef(this)},ge.prototype.accept=function(e){return e instanceof a?e.visitLambdef(this):e.visitChildren(this)},g.LambdefContext=ge,g.prototype.lambdef=function(){var e=new ge(this,this._ctx,this.state);this.enterRule(e,106,g.RULE_lambdef);var t=0;try{this.enterOuterAlt(e,1),this.state=769,this.match(g.LAMBDA),this.state=771,this._errHandler.sync(this),0==((t=this._input.LA(1))-37&-32)&&0!=(1<<t-37&(1<<g.NAME-37|1<<g.STAR-37|1<<g.POWER-37))&&(this.state=770,this.varargslist()),this.state=773,this.match(g.COLON),this.state=774,this.test()}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},de.prototype=Object.create(r.ParserRuleContext.prototype),de.prototype.constructor=de,de.prototype.LAMBDA=function(){return this.getToken(g.LAMBDA,0)},de.prototype.COLON=function(){return this.getToken(g.COLON,0)},de.prototype.test_nocond=function(){return this.getTypedRuleContext(ue,0)},de.prototype.varargslist=function(){return this.getTypedRuleContext(I,0)},de.prototype.enterRule=function(e){e instanceof s&&e.enterLambdef_nocond(this)},de.prototype.exitRule=function(e){e instanceof s&&e.exitLambdef_nocond(this)},de.prototype.accept=function(e){return e instanceof a?e.visitLambdef_nocond(this):e.visitChildren(this)},g.Lambdef_nocondContext=de,g.prototype.lambdef_nocond=function(){var e=new de(this,this._ctx,this.state);this.enterRule(e,108,g.RULE_lambdef_nocond);var t=0;try{this.enterOuterAlt(e,1),this.state=776,this.match(g.LAMBDA),this.state=778,this._errHandler.sync(this),0==((t=this._input.LA(1))-37&-32)&&0!=(1<<t-37&(1<<g.NAME-37|1<<g.STAR-37|1<<g.POWER-37))&&(this.state=777,this.varargslist()),this.state=780,this.match(g.COLON),this.state=781,this.test_nocond()}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},he.prototype=Object.create(r.ParserRuleContext.prototype),he.prototype.constructor=he;he.prototype.and_test=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(Te):this.getTypedRuleContext(Te,e)},he.prototype.OR=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.OR):this.getToken(g.OR,e)},he.prototype.enterRule=function(e){e instanceof s&&e.enterOr_test(this)},he.prototype.exitRule=function(e){e instanceof s&&e.exitOr_test(this)},he.prototype.accept=function(e){return e instanceof a?e.visitOr_test(this):e.visitChildren(this)},g.Or_testContext=he,g.prototype.or_test=function(){var e=new he(this,this._ctx,this.state);this.enterRule(e,110,g.RULE_or_test);var t=0;try{for(this.enterOuterAlt(e,1),this.state=783,this.and_test(),this.state=788,this._errHandler.sync(this),t=this._input.LA(1);t===g.OR;)this.state=784,this.match(g.OR),this.state=785,this.and_test(),this.state=790,this._errHandler.sync(this),t=this._input.LA(1)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},Te.prototype=Object.create(r.ParserRuleContext.prototype),Te.prototype.constructor=Te,Te.prototype.not_test=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(ye):this.getTypedRuleContext(ye,e)},Te.prototype.AND=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.AND):this.getToken(g.AND,e)},Te.prototype.enterRule=function(e){e instanceof s&&e.enterAnd_test(this)},Te.prototype.exitRule=function(e){e instanceof s&&e.exitAnd_test(this)},Te.prototype.accept=function(e){return e instanceof a?e.visitAnd_test(this):e.visitChildren(this)},g.And_testContext=Te,g.prototype.and_test=function(){var e=new Te(this,this._ctx,this.state);this.enterRule(e,112,g.RULE_and_test);var t=0;try{for(this.enterOuterAlt(e,1),this.state=791,this.not_test(),this.state=796,this._errHandler.sync(this),t=this._input.LA(1);t===g.AND;)this.state=792,this.match(g.AND),this.state=793,this.not_test(),this.state=798,this._errHandler.sync(this),t=this._input.LA(1)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},ye.prototype=Object.create(r.ParserRuleContext.prototype),ye.prototype.constructor=ye,ye.prototype.NOT=function(){return this.getToken(g.NOT,0)},ye.prototype.not_test=function(){return this.getTypedRuleContext(ye,0)},ye.prototype.comparison=function(){return this.getTypedRuleContext(fe,0)},ye.prototype.enterRule=function(e){e instanceof s&&e.enterNot_test(this)},ye.prototype.exitRule=function(e){e instanceof s&&e.exitNot_test(this)},ye.prototype.accept=function(e){return e instanceof a?e.visitNot_test(this):e.visitChildren(this)},g.Not_testContext=ye,g.prototype.not_test=function(){var e=new ye(this,this._ctx,this.state);this.enterRule(e,114,g.RULE_not_test);try{switch(this.state=802,this._errHandler.sync(this),this._input.LA(1)){case g.NOT:this.enterOuterAlt(e,1),this.state=799,this.match(g.NOT),this.state=800,this.not_test();break;case g.NONE:case g.TRUE:case g.FALSE:case g.NAME:case g.STRING_LITERAL:case g.BYTES_LITERAL:case g.DECIMAL_INTEGER:case g.OCT_INTEGER:case g.HEX_INTEGER:case g.BIN_INTEGER:case g.FLOAT_NUMBER:case g.IMAG_NUMBER:case g.ELLIPSIS:case g.OPEN_PAREN:case g.OPEN_BRACK:case g.ADD:case g.MINUS:case g.NOT_OP:case g.OPEN_BRACE:this.enterOuterAlt(e,2),this.state=801,this.comparison();break;default:throw new r.error.NoViableAltException(this)}}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},fe.prototype=Object.create(r.ParserRuleContext.prototype),fe.prototype.constructor=fe,fe.prototype.expr=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(Ae):this.getTypedRuleContext(Ae,e)},fe.prototype.comp_op=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(be):this.getTypedRuleContext(be,e)},fe.prototype.enterRule=function(e){e instanceof s&&e.enterComparison(this)},fe.prototype.exitRule=function(e){e instanceof s&&e.exitComparison(this)},fe.prototype.accept=function(e){return e instanceof a?e.visitComparison(this):e.visitChildren(this)},g.ComparisonContext=fe,g.prototype.comparison=function(){var e=new fe(this,this._ctx,this.state);this.enterRule(e,116,g.RULE_comparison);var t=0;try{for(this.enterOuterAlt(e,1),this.state=804,this.expr(),this.state=810,this._errHandler.sync(this),t=this._input.LA(1);0==(-32&t)&&0!=(1<<t&(1<<g.IN|1<<g.NOT|1<<g.IS))||0==(t-71&-32)&&0!=(1<<t-71&(1<<g.LESS_THAN-71|1<<g.GREATER_THAN-71|1<<g.EQUALS-71|1<<g.GT_EQ-71|1<<g.LT_EQ-71|1<<g.NOT_EQ_1-71|1<<g.NOT_EQ_2-71));)this.state=805,this.comp_op(),this.state=806,this.expr(),this.state=812,this._errHandler.sync(this),t=this._input.LA(1)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},be.prototype=Object.create(r.ParserRuleContext.prototype),be.prototype.constructor=be,be.prototype.LESS_THAN=function(){return this.getToken(g.LESS_THAN,0)},be.prototype.GREATER_THAN=function(){return this.getToken(g.GREATER_THAN,0)},be.prototype.EQUALS=function(){return this.getToken(g.EQUALS,0)},be.prototype.GT_EQ=function(){return this.getToken(g.GT_EQ,0)},be.prototype.LT_EQ=function(){return this.getToken(g.LT_EQ,0)},be.prototype.NOT_EQ_1=function(){return this.getToken(g.NOT_EQ_1,0)},be.prototype.NOT_EQ_2=function(){return this.getToken(g.NOT_EQ_2,0)},be.prototype.IN=function(){return this.getToken(g.IN,0)},be.prototype.NOT=function(){return this.getToken(g.NOT,0)},be.prototype.IS=function(){return this.getToken(g.IS,0)},be.prototype.enterRule=function(e){e instanceof s&&e.enterComp_op(this)},be.prototype.exitRule=function(e){e instanceof s&&e.exitComp_op(this)},be.prototype.accept=function(e){return e instanceof a?e.visitComp_op(this):e.visitChildren(this)},g.Comp_opContext=be,g.prototype.comp_op=function(){var e=new be(this,this._ctx,this.state);this.enterRule(e,118,g.RULE_comp_op);try{switch(this.state=826,this._errHandler.sync(this),this._interp.adaptivePredict(this._input,106,this._ctx)){case 1:this.enterOuterAlt(e,1),this.state=813,this.match(g.LESS_THAN);break;case 2:this.enterOuterAlt(e,2),this.state=814,this.match(g.GREATER_THAN);break;case 3:this.enterOuterAlt(e,3),this.state=815,this.match(g.EQUALS);break;case 4:this.enterOuterAlt(e,4),this.state=816,this.match(g.GT_EQ);break;case 5:this.enterOuterAlt(e,5),this.state=817,this.match(g.LT_EQ);break;case 6:this.enterOuterAlt(e,6),this.state=818,this.match(g.NOT_EQ_1);break;case 7:this.enterOuterAlt(e,7),this.state=819,this.match(g.NOT_EQ_2);break;case 8:this.enterOuterAlt(e,8),this.state=820,this.match(g.IN);break;case 9:this.enterOuterAlt(e,9),this.state=821,this.match(g.NOT),this.state=822,this.match(g.IN);break;case 10:this.enterOuterAlt(e,10),this.state=823,this.match(g.IS);break;case 11:this.enterOuterAlt(e,11),this.state=824,this.match(g.IS),this.state=825,this.match(g.NOT)}}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},Se.prototype=Object.create(r.ParserRuleContext.prototype),Se.prototype.constructor=Se,Se.prototype.STAR=function(){return this.getToken(g.STAR,0)},Se.prototype.expr=function(){return this.getTypedRuleContext(Ae,0)},Se.prototype.enterRule=function(e){e instanceof s&&e.enterStar_expr(this)},Se.prototype.exitRule=function(e){e instanceof s&&e.exitStar_expr(this)},Se.prototype.accept=function(e){return e instanceof a?e.visitStar_expr(this):e.visitChildren(this)},g.Star_exprContext=Se,g.prototype.star_expr=function(){var e=new Se(this,this._ctx,this.state);this.enterRule(e,120,g.RULE_star_expr);try{this.enterOuterAlt(e,1),this.state=828,this.match(g.STAR),this.state=829,this.expr()}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},Ae.prototype=Object.create(r.ParserRuleContext.prototype),Ae.prototype.constructor=Ae,Ae.prototype.xor_expr=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(Ee):this.getTypedRuleContext(Ee,e)},Ae.prototype.OR_OP=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.OR_OP):this.getToken(g.OR_OP,e)},Ae.prototype.enterRule=function(e){e instanceof s&&e.enterExpr(this)},Ae.prototype.exitRule=function(e){e instanceof s&&e.exitExpr(this)},Ae.prototype.accept=function(e){return e instanceof a?e.visitExpr(this):e.visitChildren(this)},g.ExprContext=Ae,g.prototype.expr=function(){var e=new Ae(this,this._ctx,this.state);this.enterRule(e,122,g.RULE_expr);var t=0;try{for(this.enterOuterAlt(e,1),this.state=831,this.xor_expr(),this.state=836,this._errHandler.sync(this),t=this._input.LA(1);t===g.OR_OP;)this.state=832,this.match(g.OR_OP),this.state=833,this.xor_expr(),this.state=838,this._errHandler.sync(this),t=this._input.LA(1)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},Ee.prototype=Object.create(r.ParserRuleContext.prototype),Ee.prototype.constructor=Ee,Ee.prototype.and_expr=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(_e):this.getTypedRuleContext(_e,e)},Ee.prototype.XOR=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.XOR):this.getToken(g.XOR,e)},Ee.prototype.enterRule=function(e){e instanceof s&&e.enterXor_expr(this)},Ee.prototype.exitRule=function(e){e instanceof s&&e.exitXor_expr(this)},Ee.prototype.accept=function(e){return e instanceof a?e.visitXor_expr(this):e.visitChildren(this)},g.Xor_exprContext=Ee,g.prototype.xor_expr=function(){var e=new Ee(this,this._ctx,this.state);this.enterRule(e,124,g.RULE_xor_expr);var t=0;try{for(this.enterOuterAlt(e,1),this.state=839,this.and_expr(),this.state=844,this._errHandler.sync(this),t=this._input.LA(1);t===g.XOR;)this.state=840,this.match(g.XOR),this.state=841,this.and_expr(),this.state=846,this._errHandler.sync(this),t=this._input.LA(1)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},_e.prototype=Object.create(r.ParserRuleContext.prototype),_e.prototype.constructor=_e,_e.prototype.shift_expr=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(xe):this.getTypedRuleContext(xe,e)},_e.prototype.AND_OP=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.AND_OP):this.getToken(g.AND_OP,e)},_e.prototype.enterRule=function(e){e instanceof s&&e.enterAnd_expr(this)},_e.prototype.exitRule=function(e){e instanceof s&&e.exitAnd_expr(this)},_e.prototype.accept=function(e){return e instanceof a?e.visitAnd_expr(this):e.visitChildren(this)},g.And_exprContext=_e,g.prototype.and_expr=function(){var e=new _e(this,this._ctx,this.state);this.enterRule(e,126,g.RULE_and_expr);var t=0;try{for(this.enterOuterAlt(e,1),this.state=847,this.shift_expr(),this.state=852,this._errHandler.sync(this),t=this._input.LA(1);t===g.AND_OP;)this.state=848,this.match(g.AND_OP),this.state=849,this.shift_expr(),this.state=854,this._errHandler.sync(this),t=this._input.LA(1)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},xe.prototype=Object.create(r.ParserRuleContext.prototype),xe.prototype.constructor=xe,xe.prototype.arith_expr=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(Ie):this.getTypedRuleContext(Ie,e)},xe.prototype.LEFT_SHIFT=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.LEFT_SHIFT):this.getToken(g.LEFT_SHIFT,e)},xe.prototype.RIGHT_SHIFT=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.RIGHT_SHIFT):this.getToken(g.RIGHT_SHIFT,e)},xe.prototype.enterRule=function(e){e instanceof s&&e.enterShift_expr(this)},xe.prototype.exitRule=function(e){e instanceof s&&e.exitShift_expr(this)},xe.prototype.accept=function(e){return e instanceof a?e.visitShift_expr(this):e.visitChildren(this)},g.Shift_exprContext=xe,g.prototype.shift_expr=function(){var e=new xe(this,this._ctx,this.state);this.enterRule(e,128,g.RULE_shift_expr);var t=0;try{for(this.enterOuterAlt(e,1),this.state=855,this.arith_expr(),this.state=860,this._errHandler.sync(this),t=this._input.LA(1);t===g.LEFT_SHIFT||t===g.RIGHT_SHIFT;)this.state=856,(t=this._input.LA(1))!==g.LEFT_SHIFT&&t!==g.RIGHT_SHIFT?this._errHandler.recoverInline(this):(this._errHandler.reportMatch(this),this.consume()),this.state=857,this.arith_expr(),this.state=862,this._errHandler.sync(this),t=this._input.LA(1)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},Ie.prototype=Object.create(r.ParserRuleContext.prototype),Ie.prototype.constructor=Ie,Ie.prototype.term=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(Le):this.getTypedRuleContext(Le,e)},Ie.prototype.ADD=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.ADD):this.getToken(g.ADD,e)},Ie.prototype.MINUS=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.MINUS):this.getToken(g.MINUS,e)},Ie.prototype.enterRule=function(e){e instanceof s&&e.enterArith_expr(this)},Ie.prototype.exitRule=function(e){e instanceof s&&e.exitArith_expr(this)},Ie.prototype.accept=function(e){return e instanceof a?e.visitArith_expr(this):e.visitChildren(this)},g.Arith_exprContext=Ie,g.prototype.arith_expr=function(){var e=new Ie(this,this._ctx,this.state);this.enterRule(e,130,g.RULE_arith_expr);var t=0;try{for(this.enterOuterAlt(e,1),this.state=863,this.term(),this.state=868,this._errHandler.sync(this),t=this._input.LA(1);t===g.ADD||t===g.MINUS;)this.state=864,(t=this._input.LA(1))!==g.ADD&&t!==g.MINUS?this._errHandler.recoverInline(this):(this._errHandler.reportMatch(this),this.consume()),this.state=865,this.term(),this.state=870,this._errHandler.sync(this),t=this._input.LA(1)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},Le.prototype=Object.create(r.ParserRuleContext.prototype),Le.prototype.constructor=Le,Le.prototype.factor=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(ve):this.getTypedRuleContext(ve,e)},Le.prototype.STAR=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.STAR):this.getToken(g.STAR,e)},Le.prototype.AT=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.AT):this.getToken(g.AT,e)},Le.prototype.DIV=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.DIV):this.getToken(g.DIV,e)},Le.prototype.MOD=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.MOD):this.getToken(g.MOD,e)},Le.prototype.IDIV=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.IDIV):this.getToken(g.IDIV,e)},Le.prototype.enterRule=function(e){e instanceof s&&e.enterTerm(this)},Le.prototype.exitRule=function(e){e instanceof s&&e.exitTerm(this)},Le.prototype.accept=function(e){return e instanceof a?e.visitTerm(this):e.visitChildren(this)},g.TermContext=Le,g.prototype.term=function(){var e=new Le(this,this._ctx,this.state);this.enterRule(e,132,g.RULE_term);var t=0;try{for(this.enterOuterAlt(e,1),this.state=871,this.factor(),this.state=876,this._errHandler.sync(this),t=this._input.LA(1);0==(t-48&-32)&&0!=(1<<t-48&(1<<g.STAR-48|1<<g.DIV-48|1<<g.MOD-48|1<<g.IDIV-48|1<<g.AT-48));)this.state=872,0!=((t=this._input.LA(1))-48&-32)||0==(1<<t-48&(1<<g.STAR-48|1<<g.DIV-48|1<<g.MOD-48|1<<g.IDIV-48|1<<g.AT-48))?this._errHandler.recoverInline(this):(this._errHandler.reportMatch(this),this.consume()),this.state=873,this.factor(),this.state=878,this._errHandler.sync(this),t=this._input.LA(1)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},ve.prototype=Object.create(r.ParserRuleContext.prototype),ve.prototype.constructor=ve,ve.prototype.factor=function(){return this.getTypedRuleContext(ve,0)},ve.prototype.ADD=function(){return this.getToken(g.ADD,0)},ve.prototype.MINUS=function(){return this.getToken(g.MINUS,0)},ve.prototype.NOT_OP=function(){return this.getToken(g.NOT_OP,0)},ve.prototype.power=function(){return this.getTypedRuleContext(Ce,0)},ve.prototype.enterRule=function(e){e instanceof s&&e.enterFactor(this)},ve.prototype.exitRule=function(e){e instanceof s&&e.exitFactor(this)},ve.prototype.accept=function(e){return e instanceof a?e.visitFactor(this):e.visitChildren(this)},g.FactorContext=ve,g.prototype.factor=function(){var e=new ve(this,this._ctx,this.state);this.enterRule(e,134,g.RULE_factor);var t=0;try{switch(this.state=882,this._errHandler.sync(this),this._input.LA(1)){case g.ADD:case g.MINUS:case g.NOT_OP:this.enterOuterAlt(e,1),this.state=879,0!=((t=this._input.LA(1))-63&-32)||0==(1<<t-63&(1<<g.ADD-63|1<<g.MINUS-63|1<<g.NOT_OP-63))?this._errHandler.recoverInline(this):(this._errHandler.reportMatch(this),this.consume()),this.state=880,this.factor();break;case g.NONE:case g.TRUE:case g.FALSE:case g.NAME:case g.STRING_LITERAL:case g.BYTES_LITERAL:case g.DECIMAL_INTEGER:case g.OCT_INTEGER:case g.HEX_INTEGER:case g.BIN_INTEGER:case g.FLOAT_NUMBER:case g.IMAG_NUMBER:case g.ELLIPSIS:case g.OPEN_PAREN:case g.OPEN_BRACK:case g.OPEN_BRACE:this.enterOuterAlt(e,2),this.state=881,this.power();break;default:throw new r.error.NoViableAltException(this)}}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},Ce.prototype=Object.create(r.ParserRuleContext.prototype),Ce.prototype.constructor=Ce,Ce.prototype.atom=function(){return this.getTypedRuleContext(Re,0)},Ce.prototype.POWER=function(){return this.getToken(g.POWER,0)},Ce.prototype.factor=function(){return this.getTypedRuleContext(ve,0)},Ce.prototype.enterRule=function(e){e instanceof s&&e.enterPower(this)},Ce.prototype.exitRule=function(e){e instanceof s&&e.exitPower(this)},Ce.prototype.accept=function(e){return e instanceof a?e.visitPower(this):e.visitChildren(this)},g.PowerContext=Ce,g.prototype.power=function(){var e=new Ce(this,this._ctx,this.state);this.enterRule(e,136,g.RULE_power);try{this.enterOuterAlt(e,1),this.state=884,this.atom(0),this.state=887,this._errHandler.sync(this),this._input.LA(1)===g.POWER&&(this.state=885,this.match(g.POWER),this.state=886,this.factor())}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},Re.prototype=Object.create(r.ParserRuleContext.prototype),Re.prototype.constructor=Re,Re.prototype.copyFrom=function(e){r.ParserRuleContext.prototype.copyFrom.call(this,e)},Oe.prototype=Object.create(Re.prototype),Oe.prototype.constructor=Oe,g.ObjectAtomContext=Oe,Oe.prototype.object_literal=function(){return this.getTypedRuleContext(He,0)},Oe.prototype.enterRule=function(e){e instanceof s&&e.enterObjectAtom(this)},Oe.prototype.exitRule=function(e){e instanceof s&&e.exitObjectAtom(this)},Oe.prototype.accept=function(e){return e instanceof a?e.visitObjectAtom(this):e.visitChildren(this)},Ne.prototype=Object.create(Re.prototype),Ne.prototype.constructor=Ne,g.ArrayAtomContext=Ne,Ne.prototype.array_literal=function(){return this.getTypedRuleContext(Ge,0)},Ne.prototype.enterRule=function(e){e instanceof s&&e.enterArrayAtom(this)},Ne.prototype.exitRule=function(e){e instanceof s&&e.exitArrayAtom(this)},Ne.prototype.accept=function(e){return e instanceof a?e.visitArrayAtom(this):e.visitChildren(this)},je.prototype=Object.create(Re.prototype),je.prototype.constructor=je,g.EllipsesAtomContext=je,je.prototype.ELLIPSIS=function(){return this.getToken(g.ELLIPSIS,0)},je.prototype.enterRule=function(e){e instanceof s&&e.enterEllipsesAtom(this)},je.prototype.exitRule=function(e){e instanceof s&&e.exitEllipsesAtom(this)},je.prototype.accept=function(e){return e instanceof a?e.visitEllipsesAtom(this):e.visitChildren(this)},we.prototype=Object.create(Re.prototype),we.prototype.constructor=we,g.SetAtomContext=we,we.prototype.set_literal=function(){return this.getTypedRuleContext(Ve,0)},we.prototype.enterRule=function(e){e instanceof s&&e.enterSetAtom(this)},we.prototype.exitRule=function(e){e instanceof s&&e.exitSetAtom(this)},we.prototype.accept=function(e){return e instanceof a?e.visitSetAtom(this):e.visitChildren(this)},De.prototype=Object.create(Re.prototype),De.prototype.constructor=De,g.NumberAtomContext=De,De.prototype.number_literal=function(){return this.getTypedRuleContext(ct,0)},De.prototype.enterRule=function(e){e instanceof s&&e.enterNumberAtom(this)},De.prototype.exitRule=function(e){e instanceof s&&e.exitNumberAtom(this)},De.prototype.accept=function(e){return e instanceof a?e.visitNumberAtom(this):e.visitChildren(this)},Be.prototype=Object.create(Re.prototype),Be.prototype.constructor=Be,g.StringAtomContext=Be,Be.prototype.string_literal=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(mt):this.getTypedRuleContext(mt,e)},Be.prototype.enterRule=function(e){e instanceof s&&e.enterStringAtom(this)},Be.prototype.exitRule=function(e){e instanceof s&&e.exitStringAtom(this)},Be.prototype.accept=function(e){return e instanceof a?e.visitStringAtom(this):e.visitChildren(this)},Me.prototype=Object.create(Re.prototype),Me.prototype.constructor=Me,g.IndexAccessContext=Me,Me.prototype.atom=function(){return this.getTypedRuleContext(Re,0)},Me.prototype.bracket_trailer=function(){return this.getTypedRuleContext(We,0)},Me.prototype.enterRule=function(e){e instanceof s&&e.enterIndexAccess(this)},Me.prototype.exitRule=function(e){e instanceof s&&e.exitIndexAccess(this)},Me.prototype.accept=function(e){return e instanceof a?e.visitIndexAccess(this):e.visitChildren(this)},$e.prototype=Object.create(Re.prototype),$e.prototype.constructor=$e,g.NoneAtomContext=$e,$e.prototype.none_literal=function(){return this.getTypedRuleContext(It,0)},$e.prototype.enterRule=function(e){e instanceof s&&e.enterNoneAtom(this)},$e.prototype.exitRule=function(e){e instanceof s&&e.exitNoneAtom(this)},$e.prototype.accept=function(e){return e instanceof a?e.visitNoneAtom(this):e.visitChildren(this)},ke.prototype=Object.create(Re.prototype),ke.prototype.constructor=ke,g.BooleanAtomContext=ke,ke.prototype.boolean_literal=function(){return this.getTypedRuleContext(xt,0)},ke.prototype.enterRule=function(e){e instanceof s&&e.enterBooleanAtom(this)},ke.prototype.exitRule=function(e){e instanceof s&&e.exitBooleanAtom(this)},ke.prototype.accept=function(e){return e instanceof a?e.visitBooleanAtom(this):e.visitChildren(this)},Pe.prototype=Object.create(Re.prototype),Pe.prototype.constructor=Pe,g.FunctionCallContext=Pe,Pe.prototype.atom=function(){return this.getTypedRuleContext(Re,0)},Pe.prototype.paren_trailer=function(){return this.getTypedRuleContext(Ke,0)},Pe.prototype.enterRule=function(e){e instanceof s&&e.enterFunctionCall(this)},Pe.prototype.exitRule=function(e){e instanceof s&&e.exitFunctionCall(this)},Pe.prototype.accept=function(e){return e instanceof a?e.visitFunctionCall(this):e.visitChildren(this)},Fe.prototype=Object.create(Re.prototype),Fe.prototype.constructor=Fe,g.AttributeAccessContext=Fe,Fe.prototype.atom=function(){return this.getTypedRuleContext(Re,0)},Fe.prototype.dot_trailer=function(){return this.getTypedRuleContext(Ye,0)},Fe.prototype.enterRule=function(e){e instanceof s&&e.enterAttributeAccess(this)},Fe.prototype.exitRule=function(e){e instanceof s&&e.exitAttributeAccess(this)},Fe.prototype.accept=function(e){return e instanceof a?e.visitAttributeAccess(this):e.visitChildren(this)},Ue.prototype=Object.create(Re.prototype),Ue.prototype.constructor=Ue,g.IdentifierAtomContext=Ue,Ue.prototype.identifier=function(){return this.getTypedRuleContext(Lt,0)},Ue.prototype.enterRule=function(e){e instanceof s&&e.enterIdentifierAtom(this)},Ue.prototype.exitRule=function(e){e instanceof s&&e.exitIdentifierAtom(this)},Ue.prototype.accept=function(e){return e instanceof a?e.visitIdentifierAtom(this):e.visitChildren(this)},g.prototype.atom=function(e){void 0===e&&(e=0);var t=this._ctx,n=this.state,s=new Re(this,this._ctx,n);this.enterRecursionRule(s,138,g.RULE_atom,e);try{switch(this.enterOuterAlt(s,1),this.state=903,this._errHandler.sync(this),this._input.LA(1)){case g.OPEN_PAREN:s=new we(this,s),this._ctx=s,this.state=890,this.set_literal();break;case g.OPEN_BRACE:s=new Oe(this,s),this._ctx=s,this.state=891,this.object_literal();break;case g.OPEN_BRACK:s=new Ne(this,s),this._ctx=s,this.state=892,this.array_literal();break;case g.NAME:s=new Ue(this,s),this._ctx=s,this.state=893,this.identifier();break;case g.DECIMAL_INTEGER:case g.OCT_INTEGER:case g.HEX_INTEGER:case g.BIN_INTEGER:case g.FLOAT_NUMBER:case g.IMAG_NUMBER:s=new De(this,s),this._ctx=s,this.state=894,this.number_literal();break;case g.STRING_LITERAL:case g.BYTES_LITERAL:s=new Be(this,s),this._ctx=s,this.state=896,this._errHandler.sync(this);var a=1;do{if(1!==a)throw new r.error.NoViableAltException(this);this.state=895,this.string_literal(),this.state=898,this._errHandler.sync(this),a=this._interp.adaptivePredict(this._input,115,this._ctx)}while(2!=a&&a!=r.atn.ATN.INVALID_ALT_NUMBER);break;case g.ELLIPSIS:s=new je(this,s),this._ctx=s,this.state=900,this.match(g.ELLIPSIS);break;case g.NONE:s=new $e(this,s),this._ctx=s,this.state=901,this.none_literal();break;case g.TRUE:case g.FALSE:s=new ke(this,s),this._ctx=s,this.state=902,this.boolean_literal();break;default:throw new r.error.NoViableAltException(this)}for(this._ctx.stop=this._input.LT(-1),this.state=913,this._errHandler.sync(this),a=this._interp.adaptivePredict(this._input,118,this._ctx);2!=a&&a!=r.atn.ATN.INVALID_ALT_NUMBER;){if(1===a)switch(null!==this._parseListeners&&this.triggerExitRuleEvent(),this.state=911,this._errHandler.sync(this),this._interp.adaptivePredict(this._input,117,this._ctx)){case 1:if(s=new Pe(this,new Re(this,t,n)),this.pushNewRecursionContext(s,138,g.RULE_atom),this.state=905,!this.precpred(this._ctx,3))throw new r.error.FailedPredicateException(this,"this.precpred(this._ctx, 3)");this.state=906,this.paren_trailer();break;case 2:if(s=new Me(this,new Re(this,t,n)),this.pushNewRecursionContext(s,138,g.RULE_atom),this.state=907,!this.precpred(this._ctx,2))throw new r.error.FailedPredicateException(this,"this.precpred(this._ctx, 2)");this.state=908,this.bracket_trailer();break;case 3:if(s=new Fe(this,new Re(this,t,n)),this.pushNewRecursionContext(s,138,g.RULE_atom),this.state=909,!this.precpred(this._ctx,1))throw new r.error.FailedPredicateException(this,"this.precpred(this._ctx, 1)");this.state=910,this.dot_trailer()}this.state=915,this._errHandler.sync(this),a=this._interp.adaptivePredict(this._input,118,this._ctx)}}catch(e){if(!(e instanceof r.error.RecognitionException))throw e;s.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.unrollRecursionContexts(t)}return s},qe.prototype=Object.create(r.ParserRuleContext.prototype),qe.prototype.constructor=qe,qe.prototype.test=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(me):this.getTypedRuleContext(me,e)},qe.prototype.star_expr=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(Se):this.getTypedRuleContext(Se,e)},qe.prototype.comp_for=function(){return this.getTypedRuleContext(at,0)},qe.prototype.COMMA=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.COMMA):this.getToken(g.COMMA,e)},qe.prototype.enterRule=function(e){e instanceof s&&e.enterTestlist_comp(this)},qe.prototype.exitRule=function(e){e instanceof s&&e.exitTestlist_comp(this)},qe.prototype.accept=function(e){return e instanceof a?e.visitTestlist_comp(this):e.visitChildren(this)},g.Testlist_compContext=qe,g.prototype.testlist_comp=function(){var e=new qe(this,this._ctx,this.state);this.enterRule(e,140,g.RULE_testlist_comp);try{switch(this.enterOuterAlt(e,1),this.state=918,this._errHandler.sync(this),this._input.LA(1)){case g.LAMBDA:case g.NOT:case g.NONE:case g.TRUE:case g.FALSE:case g.NAME:case g.STRING_LITERAL:case g.BYTES_LITERAL:case g.DECIMAL_INTEGER:case g.OCT_INTEGER:case g.HEX_INTEGER:case g.BIN_INTEGER:case g.FLOAT_NUMBER:case g.IMAG_NUMBER:case g.ELLIPSIS:case g.OPEN_PAREN:case g.OPEN_BRACK:case g.ADD:case g.MINUS:case g.NOT_OP:case g.OPEN_BRACE:this.state=916,this.test();break;case g.STAR:this.state=917,this.star_expr();break;default:throw new r.error.NoViableAltException(this)}switch(this.state=934,this._errHandler.sync(this),this._input.LA(1)){case g.FOR:case g.ASYNC:this.state=920,this.comp_for();break;case g.CLOSE_PAREN:case g.COMMA:case g.CLOSE_BRACK:this.state=928,this._errHandler.sync(this);for(var t=this._interp.adaptivePredict(this._input,121,this._ctx);2!=t&&t!=r.atn.ATN.INVALID_ALT_NUMBER;){if(1===t)switch(this.state=921,this.match(g.COMMA),this.state=924,this._errHandler.sync(this),this._input.LA(1)){case g.LAMBDA:case g.NOT:case g.NONE:case g.TRUE:case g.FALSE:case g.NAME:case g.STRING_LITERAL:case g.BYTES_LITERAL:case g.DECIMAL_INTEGER:case g.OCT_INTEGER:case g.HEX_INTEGER:case g.BIN_INTEGER:case g.FLOAT_NUMBER:case g.IMAG_NUMBER:case g.ELLIPSIS:case g.OPEN_PAREN:case g.OPEN_BRACK:case g.ADD:case g.MINUS:case g.NOT_OP:case g.OPEN_BRACE:this.state=922,this.test();break;case g.STAR:this.state=923,this.star_expr();break;default:throw new r.error.NoViableAltException(this)}this.state=930,this._errHandler.sync(this),t=this._interp.adaptivePredict(this._input,121,this._ctx)}this.state=932,this._errHandler.sync(this),this._input.LA(1)===g.COMMA&&(this.state=931,this.match(g.COMMA));break;default:throw new r.error.NoViableAltException(this)}}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},Ge.prototype=Object.create(r.ParserRuleContext.prototype),Ge.prototype.constructor=Ge,Ge.prototype.OPEN_BRACK=function(){return this.getToken(g.OPEN_BRACK,0)},Ge.prototype.CLOSE_BRACK=function(){return this.getToken(g.CLOSE_BRACK,0)},Ge.prototype.testlist_comp=function(){return this.getTypedRuleContext(qe,0)},Ge.prototype.enterRule=function(e){e instanceof s&&e.enterArray_literal(this)},Ge.prototype.exitRule=function(e){e instanceof s&&e.exitArray_literal(this)},Ge.prototype.accept=function(e){return e instanceof a?e.visitArray_literal(this):e.visitChildren(this)},g.Array_literalContext=Ge,g.prototype.array_literal=function(){var e=new Ge(this,this._ctx,this.state);this.enterRule(e,142,g.RULE_array_literal);var t=0;try{this.enterOuterAlt(e,1),this.state=936,this.match(g.OPEN_BRACK),this.state=938,this._errHandler.sync(this),(0==((t=this._input.LA(1))-20&-32)&&0!=(1<<t-20&(1<<g.LAMBDA-20|1<<g.NOT-20|1<<g.NONE-20|1<<g.TRUE-20|1<<g.FALSE-20|1<<g.NAME-20|1<<g.STRING_LITERAL-20|1<<g.BYTES_LITERAL-20|1<<g.DECIMAL_INTEGER-20|1<<g.OCT_INTEGER-20|1<<g.HEX_INTEGER-20|1<<g.BIN_INTEGER-20|1<<g.FLOAT_NUMBER-20|1<<g.IMAG_NUMBER-20|1<<g.ELLIPSIS-20|1<<g.STAR-20|1<<g.OPEN_PAREN-20))||0==(t-56&-32)&&0!=(1<<t-56&(1<<g.OPEN_BRACK-56|1<<g.ADD-56|1<<g.MINUS-56|1<<g.NOT_OP-56|1<<g.OPEN_BRACE-56)))&&(this.state=937,this.testlist_comp()),this.state=940,this.match(g.CLOSE_BRACK)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},He.prototype=Object.create(r.ParserRuleContext.prototype),He.prototype.constructor=He,He.prototype.OPEN_BRACE=function(){return this.getToken(g.OPEN_BRACE,0)},He.prototype.CLOSE_BRACE=function(){return this.getToken(g.CLOSE_BRACE,0)},He.prototype.dictorsetmaker=function(){return this.getTypedRuleContext(et,0)},He.prototype.enterRule=function(e){e instanceof s&&e.enterObject_literal(this)},He.prototype.exitRule=function(e){e instanceof s&&e.exitObject_literal(this)},He.prototype.accept=function(e){return e instanceof a?e.visitObject_literal(this):e.visitChildren(this)},g.Object_literalContext=He,g.prototype.object_literal=function(){var e=new He(this,this._ctx,this.state);this.enterRule(e,144,g.RULE_object_literal);var t=0;try{this.enterOuterAlt(e,1),this.state=942,this.match(g.OPEN_BRACE),this.state=944,this._errHandler.sync(this),(0==((t=this._input.LA(1))-20&-32)&&0!=(1<<t-20&(1<<g.LAMBDA-20|1<<g.NOT-20|1<<g.NONE-20|1<<g.TRUE-20|1<<g.FALSE-20|1<<g.NAME-20|1<<g.STRING_LITERAL-20|1<<g.BYTES_LITERAL-20|1<<g.DECIMAL_INTEGER-20|1<<g.OCT_INTEGER-20|1<<g.HEX_INTEGER-20|1<<g.BIN_INTEGER-20|1<<g.FLOAT_NUMBER-20|1<<g.IMAG_NUMBER-20|1<<g.ELLIPSIS-20|1<<g.STAR-20|1<<g.OPEN_PAREN-20))||0==(t-54&-32)&&0!=(1<<t-54&(1<<g.POWER-54|1<<g.OPEN_BRACK-54|1<<g.ADD-54|1<<g.MINUS-54|1<<g.NOT_OP-54|1<<g.OPEN_BRACE-54)))&&(this.state=943,this.dictorsetmaker()),this.state=946,this.match(g.CLOSE_BRACE)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},Ve.prototype=Object.create(r.ParserRuleContext.prototype),Ve.prototype.constructor=Ve,Ve.prototype.OPEN_PAREN=function(){return this.getToken(g.OPEN_PAREN,0)},Ve.prototype.CLOSE_PAREN=function(){return this.getToken(g.CLOSE_PAREN,0)},Ve.prototype.yield_expr=function(){return this.getTypedRuleContext(lt,0)},Ve.prototype.testlist_comp=function(){return this.getTypedRuleContext(qe,0)},Ve.prototype.enterRule=function(e){e instanceof s&&e.enterSet_literal(this)},Ve.prototype.exitRule=function(e){e instanceof s&&e.exitSet_literal(this)},Ve.prototype.accept=function(e){return e instanceof a?e.visitSet_literal(this):e.visitChildren(this)},g.Set_literalContext=Ve,g.prototype.set_literal=function(){var e=new Ve(this,this._ctx,this.state);this.enterRule(e,146,g.RULE_set_literal);try{switch(this.enterOuterAlt(e,1),this.state=948,this.match(g.OPEN_PAREN),this.state=951,this._errHandler.sync(this),this._input.LA(1)){case g.YIELD:this.state=949,this.yield_expr();break;case g.LAMBDA:case g.NOT:case g.NONE:case g.TRUE:case g.FALSE:case g.NAME:case g.STRING_LITERAL:case g.BYTES_LITERAL:case g.DECIMAL_INTEGER:case g.OCT_INTEGER:case g.HEX_INTEGER:case g.BIN_INTEGER:case g.FLOAT_NUMBER:case g.IMAG_NUMBER:case g.ELLIPSIS:case g.STAR:case g.OPEN_PAREN:case g.OPEN_BRACK:case g.ADD:case g.MINUS:case g.NOT_OP:case g.OPEN_BRACE:this.state=950,this.testlist_comp();case g.CLOSE_PAREN:}this.state=953,this.match(g.CLOSE_PAREN)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},Ke.prototype=Object.create(r.ParserRuleContext.prototype),Ke.prototype.constructor=Ke,Ke.prototype.OPEN_PAREN=function(){return this.getToken(g.OPEN_PAREN,0)},Ke.prototype.CLOSE_PAREN=function(){return this.getToken(g.CLOSE_PAREN,0)},Ke.prototype.arglist=function(){return this.getTypedRuleContext(nt,0)},Ke.prototype.enterRule=function(e){e instanceof s&&e.enterParen_trailer(this)},Ke.prototype.exitRule=function(e){e instanceof s&&e.exitParen_trailer(this)},Ke.prototype.accept=function(e){return e instanceof a?e.visitParen_trailer(this):e.visitChildren(this)},g.Paren_trailerContext=Ke,g.prototype.paren_trailer=function(){var e=new Ke(this,this._ctx,this.state);this.enterRule(e,148,g.RULE_paren_trailer);var t=0;try{this.enterOuterAlt(e,1),this.state=955,this.match(g.OPEN_PAREN),this.state=957,this._errHandler.sync(this),(0==((t=this._input.LA(1))-20&-32)&&0!=(1<<t-20&(1<<g.LAMBDA-20|1<<g.NOT-20|1<<g.NONE-20|1<<g.TRUE-20|1<<g.FALSE-20|1<<g.NAME-20|1<<g.STRING_LITERAL-20|1<<g.BYTES_LITERAL-20|1<<g.DECIMAL_INTEGER-20|1<<g.OCT_INTEGER-20|1<<g.HEX_INTEGER-20|1<<g.BIN_INTEGER-20|1<<g.FLOAT_NUMBER-20|1<<g.IMAG_NUMBER-20|1<<g.ELLIPSIS-20|1<<g.STAR-20|1<<g.OPEN_PAREN-20))||0==(t-54&-32)&&0!=(1<<t-54&(1<<g.POWER-54|1<<g.OPEN_BRACK-54|1<<g.ADD-54|1<<g.MINUS-54|1<<g.NOT_OP-54|1<<g.OPEN_BRACE-54)))&&(this.state=956,this.arglist()),this.state=959,this.match(g.CLOSE_PAREN)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},We.prototype=Object.create(r.ParserRuleContext.prototype),We.prototype.constructor=We,We.prototype.OPEN_BRACK=function(){return this.getToken(g.OPEN_BRACK,0)},We.prototype.subscriptlist=function(){return this.getTypedRuleContext(ze,0)},We.prototype.CLOSE_BRACK=function(){return this.getToken(g.CLOSE_BRACK,0)},We.prototype.enterRule=function(e){e instanceof s&&e.enterBracket_trailer(this)},We.prototype.exitRule=function(e){e instanceof s&&e.exitBracket_trailer(this)},We.prototype.accept=function(e){return e instanceof a?e.visitBracket_trailer(this):e.visitChildren(this)},g.Bracket_trailerContext=We,g.prototype.bracket_trailer=function(){var e=new We(this,this._ctx,this.state);this.enterRule(e,150,g.RULE_bracket_trailer);try{this.enterOuterAlt(e,1),this.state=961,this.match(g.OPEN_BRACK),this.state=962,this.subscriptlist(),this.state=963,this.match(g.CLOSE_BRACK)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},Ye.prototype=Object.create(r.ParserRuleContext.prototype),Ye.prototype.constructor=Ye,Ye.prototype.DOT=function(){return this.getToken(g.DOT,0)},Ye.prototype.identifier=function(){return this.getTypedRuleContext(Lt,0)},Ye.prototype.enterRule=function(e){e instanceof s&&e.enterDot_trailer(this)},Ye.prototype.exitRule=function(e){e instanceof s&&e.exitDot_trailer(this)},Ye.prototype.accept=function(e){return e instanceof a?e.visitDot_trailer(this):e.visitChildren(this)},g.Dot_trailerContext=Ye,g.prototype.dot_trailer=function(){var e=new Ye(this,this._ctx,this.state);this.enterRule(e,152,g.RULE_dot_trailer);try{this.enterOuterAlt(e,1),this.state=965,this.match(g.DOT),this.state=966,this.identifier()}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},ze.prototype=Object.create(r.ParserRuleContext.prototype),ze.prototype.constructor=ze,ze.prototype.subscript=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(Ze):this.getTypedRuleContext(Ze,e)},ze.prototype.COMMA=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.COMMA):this.getToken(g.COMMA,e)},ze.prototype.enterRule=function(e){e instanceof s&&e.enterSubscriptlist(this)},ze.prototype.exitRule=function(e){e instanceof s&&e.exitSubscriptlist(this)},ze.prototype.accept=function(e){return e instanceof a?e.visitSubscriptlist(this):e.visitChildren(this)},g.SubscriptlistContext=ze,g.prototype.subscriptlist=function(){var e=new ze(this,this._ctx,this.state);this.enterRule(e,154,g.RULE_subscriptlist);try{this.enterOuterAlt(e,1),this.state=968,this.subscript(),this.state=973,this._errHandler.sync(this);for(var t=this._interp.adaptivePredict(this._input,128,this._ctx);2!=t&&t!=r.atn.ATN.INVALID_ALT_NUMBER;)1===t&&(this.state=969,this.match(g.COMMA),this.state=970,this.subscript()),this.state=975,this._errHandler.sync(this),t=this._interp.adaptivePredict(this._input,128,this._ctx);this.state=977,this._errHandler.sync(this),this._input.LA(1)===g.COMMA&&(this.state=976,this.match(g.COMMA))}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},Ze.prototype=Object.create(r.ParserRuleContext.prototype),Ze.prototype.constructor=Ze,Ze.prototype.test=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(me):this.getTypedRuleContext(me,e)},Ze.prototype.COLON=function(){return this.getToken(g.COLON,0)},Ze.prototype.sliceop=function(){return this.getTypedRuleContext(Xe,0)},Ze.prototype.enterRule=function(e){e instanceof s&&e.enterSubscript(this)},Ze.prototype.exitRule=function(e){e instanceof s&&e.exitSubscript(this)},Ze.prototype.accept=function(e){return e instanceof a?e.visitSubscript(this):e.visitChildren(this)},g.SubscriptContext=Ze,g.prototype.subscript=function(){var e=new Ze(this,this._ctx,this.state);this.enterRule(e,156,g.RULE_subscript);var t=0;try{switch(this.state=990,this._errHandler.sync(this),this._interp.adaptivePredict(this._input,133,this._ctx)){case 1:this.enterOuterAlt(e,1),this.state=979,this.test();break;case 2:this.enterOuterAlt(e,2),this.state=981,this._errHandler.sync(this),(0==((t=this._input.LA(1))-20&-32)&&0!=(1<<t-20&(1<<g.LAMBDA-20|1<<g.NOT-20|1<<g.NONE-20|1<<g.TRUE-20|1<<g.FALSE-20|1<<g.NAME-20|1<<g.STRING_LITERAL-20|1<<g.BYTES_LITERAL-20|1<<g.DECIMAL_INTEGER-20|1<<g.OCT_INTEGER-20|1<<g.HEX_INTEGER-20|1<<g.BIN_INTEGER-20|1<<g.FLOAT_NUMBER-20|1<<g.IMAG_NUMBER-20|1<<g.ELLIPSIS-20|1<<g.OPEN_PAREN-20))||0==(t-56&-32)&&0!=(1<<t-56&(1<<g.OPEN_BRACK-56|1<<g.ADD-56|1<<g.MINUS-56|1<<g.NOT_OP-56|1<<g.OPEN_BRACE-56)))&&(this.state=980,this.test()),this.state=983,this.match(g.COLON),this.state=985,this._errHandler.sync(this),(0==((t=this._input.LA(1))-20&-32)&&0!=(1<<t-20&(1<<g.LAMBDA-20|1<<g.NOT-20|1<<g.NONE-20|1<<g.TRUE-20|1<<g.FALSE-20|1<<g.NAME-20|1<<g.STRING_LITERAL-20|1<<g.BYTES_LITERAL-20|1<<g.DECIMAL_INTEGER-20|1<<g.OCT_INTEGER-20|1<<g.HEX_INTEGER-20|1<<g.BIN_INTEGER-20|1<<g.FLOAT_NUMBER-20|1<<g.IMAG_NUMBER-20|1<<g.ELLIPSIS-20|1<<g.OPEN_PAREN-20))||0==(t-56&-32)&&0!=(1<<t-56&(1<<g.OPEN_BRACK-56|1<<g.ADD-56|1<<g.MINUS-56|1<<g.NOT_OP-56|1<<g.OPEN_BRACE-56)))&&(this.state=984,this.test()),this.state=988,this._errHandler.sync(this),(t=this._input.LA(1))===g.COLON&&(this.state=987,this.sliceop())}}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},Xe.prototype=Object.create(r.ParserRuleContext.prototype),Xe.prototype.constructor=Xe,Xe.prototype.COLON=function(){return this.getToken(g.COLON,0)},Xe.prototype.test=function(){return this.getTypedRuleContext(me,0)},Xe.prototype.enterRule=function(e){e instanceof s&&e.enterSliceop(this)},Xe.prototype.exitRule=function(e){e instanceof s&&e.exitSliceop(this)},Xe.prototype.accept=function(e){return e instanceof a?e.visitSliceop(this):e.visitChildren(this)},g.SliceopContext=Xe,g.prototype.sliceop=function(){var e=new Xe(this,this._ctx,this.state);this.enterRule(e,158,g.RULE_sliceop);var t=0;try{this.enterOuterAlt(e,1),this.state=992,this.match(g.COLON),this.state=994,this._errHandler.sync(this),(0==((t=this._input.LA(1))-20&-32)&&0!=(1<<t-20&(1<<g.LAMBDA-20|1<<g.NOT-20|1<<g.NONE-20|1<<g.TRUE-20|1<<g.FALSE-20|1<<g.NAME-20|1<<g.STRING_LITERAL-20|1<<g.BYTES_LITERAL-20|1<<g.DECIMAL_INTEGER-20|1<<g.OCT_INTEGER-20|1<<g.HEX_INTEGER-20|1<<g.BIN_INTEGER-20|1<<g.FLOAT_NUMBER-20|1<<g.IMAG_NUMBER-20|1<<g.ELLIPSIS-20|1<<g.OPEN_PAREN-20))||0==(t-56&-32)&&0!=(1<<t-56&(1<<g.OPEN_BRACK-56|1<<g.ADD-56|1<<g.MINUS-56|1<<g.NOT_OP-56|1<<g.OPEN_BRACE-56)))&&(this.state=993,this.test())}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},Je.prototype=Object.create(r.ParserRuleContext.prototype),Je.prototype.constructor=Je,Je.prototype.expr=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(Ae):this.getTypedRuleContext(Ae,e)},Je.prototype.star_expr=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(Se):this.getTypedRuleContext(Se,e)},Je.prototype.COMMA=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.COMMA):this.getToken(g.COMMA,e)},Je.prototype.enterRule=function(e){e instanceof s&&e.enterExprlist(this)},Je.prototype.exitRule=function(e){e instanceof s&&e.exitExprlist(this)},Je.prototype.accept=function(e){return e instanceof a?e.visitExprlist(this):e.visitChildren(this)},g.ExprlistContext=Je,g.prototype.exprlist=function(){var e=new Je(this,this._ctx,this.state);this.enterRule(e,160,g.RULE_exprlist);try{switch(this.enterOuterAlt(e,1),this.state=998,this._errHandler.sync(this),this._input.LA(1)){case g.NONE:case g.TRUE:case g.FALSE:case g.NAME:case g.STRING_LITERAL:case g.BYTES_LITERAL:case g.DECIMAL_INTEGER:case g.OCT_INTEGER:case g.HEX_INTEGER:case g.BIN_INTEGER:case g.FLOAT_NUMBER:case g.IMAG_NUMBER:case g.ELLIPSIS:case g.OPEN_PAREN:case g.OPEN_BRACK:case g.ADD:case g.MINUS:case g.NOT_OP:case g.OPEN_BRACE:this.state=996,this.expr();break;case g.STAR:this.state=997,this.star_expr();break;default:throw new r.error.NoViableAltException(this)}this.state=1007,this._errHandler.sync(this);for(var t=this._interp.adaptivePredict(this._input,137,this._ctx);2!=t&&t!=r.atn.ATN.INVALID_ALT_NUMBER;){if(1===t)switch(this.state=1e3,this.match(g.COMMA),this.state=1003,this._errHandler.sync(this),this._input.LA(1)){case g.NONE:case g.TRUE:case g.FALSE:case g.NAME:case g.STRING_LITERAL:case g.BYTES_LITERAL:case g.DECIMAL_INTEGER:case g.OCT_INTEGER:case g.HEX_INTEGER:case g.BIN_INTEGER:case g.FLOAT_NUMBER:case g.IMAG_NUMBER:case g.ELLIPSIS:case g.OPEN_PAREN:case g.OPEN_BRACK:case g.ADD:case g.MINUS:case g.NOT_OP:case g.OPEN_BRACE:this.state=1001,this.expr();break;case g.STAR:this.state=1002,this.star_expr();break;default:throw new r.error.NoViableAltException(this)}this.state=1009,this._errHandler.sync(this),t=this._interp.adaptivePredict(this._input,137,this._ctx)}this.state=1011,this._errHandler.sync(this),this._input.LA(1)===g.COMMA&&(this.state=1010,this.match(g.COMMA))}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},Qe.prototype=Object.create(r.ParserRuleContext.prototype),Qe.prototype.constructor=Qe,Qe.prototype.test=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(me):this.getTypedRuleContext(me,e)},Qe.prototype.COMMA=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.COMMA):this.getToken(g.COMMA,e)},Qe.prototype.enterRule=function(e){e instanceof s&&e.enterTestlist(this)},Qe.prototype.exitRule=function(e){e instanceof s&&e.exitTestlist(this)},Qe.prototype.accept=function(e){return e instanceof a?e.visitTestlist(this):e.visitChildren(this)},g.TestlistContext=Qe,g.prototype.testlist=function(){var e=new Qe(this,this._ctx,this.state);this.enterRule(e,162,g.RULE_testlist);try{this.enterOuterAlt(e,1),this.state=1013,this.test(),this.state=1018,this._errHandler.sync(this);for(var t=this._interp.adaptivePredict(this._input,139,this._ctx);2!=t&&t!=r.atn.ATN.INVALID_ALT_NUMBER;)1===t&&(this.state=1014,this.match(g.COMMA),this.state=1015,this.test()),this.state=1020,this._errHandler.sync(this),t=this._interp.adaptivePredict(this._input,139,this._ctx);this.state=1022,this._errHandler.sync(this),this._input.LA(1)===g.COMMA&&(this.state=1021,this.match(g.COMMA))}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},et.prototype=Object.create(r.ParserRuleContext.prototype),et.prototype.constructor=et,et.prototype.test=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(me):this.getTypedRuleContext(me,e)},et.prototype.COLON=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.COLON):this.getToken(g.COLON,e)},et.prototype.POWER=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.POWER):this.getToken(g.POWER,e)},et.prototype.expr=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(Ae):this.getTypedRuleContext(Ae,e)},et.prototype.comp_for=function(){return this.getTypedRuleContext(at,0)},et.prototype.star_expr=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(Se):this.getTypedRuleContext(Se,e)},et.prototype.COMMA=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.COMMA):this.getToken(g.COMMA,e)},et.prototype.enterRule=function(e){e instanceof s&&e.enterDictorsetmaker(this)},et.prototype.exitRule=function(e){e instanceof s&&e.exitDictorsetmaker(this)},et.prototype.accept=function(e){return e instanceof a?e.visitDictorsetmaker(this):e.visitChildren(this)},g.DictorsetmakerContext=et,g.prototype.dictorsetmaker=function(){var e=new et(this,this._ctx,this.state);this.enterRule(e,164,g.RULE_dictorsetmaker);try{switch(this.enterOuterAlt(e,1),this.state=1072,this._errHandler.sync(this),this._interp.adaptivePredict(this._input,151,this._ctx)){case 1:switch(this.state=1030,this._errHandler.sync(this),this._input.LA(1)){case g.LAMBDA:case g.NOT:case g.NONE:case g.TRUE:case g.FALSE:case g.NAME:case g.STRING_LITERAL:case g.BYTES_LITERAL:case g.DECIMAL_INTEGER:case g.OCT_INTEGER:case g.HEX_INTEGER:case g.BIN_INTEGER:case g.FLOAT_NUMBER:case g.IMAG_NUMBER:case g.ELLIPSIS:case g.OPEN_PAREN:case g.OPEN_BRACK:case g.ADD:case g.MINUS:case g.NOT_OP:case g.OPEN_BRACE:this.state=1024,this.test(),this.state=1025,this.match(g.COLON),this.state=1026,this.test();break;case g.POWER:this.state=1028,this.match(g.POWER),this.state=1029,this.expr();break;default:throw new r.error.NoViableAltException(this)}switch(this.state=1050,this._errHandler.sync(this),this._input.LA(1)){case g.FOR:case g.ASYNC:this.state=1032,this.comp_for();break;case g.COMMA:case g.CLOSE_BRACE:this.state=1044,this._errHandler.sync(this);for(var t=this._interp.adaptivePredict(this._input,143,this._ctx);2!=t&&t!=r.atn.ATN.INVALID_ALT_NUMBER;){if(1===t)switch(this.state=1033,this.match(g.COMMA),this.state=1040,this._errHandler.sync(this),this._input.LA(1)){case g.LAMBDA:case g.NOT:case g.NONE:case g.TRUE:case g.FALSE:case g.NAME:case g.STRING_LITERAL:case g.BYTES_LITERAL:case g.DECIMAL_INTEGER:case g.OCT_INTEGER:case g.HEX_INTEGER:case g.BIN_INTEGER:case g.FLOAT_NUMBER:case g.IMAG_NUMBER:case g.ELLIPSIS:case g.OPEN_PAREN:case g.OPEN_BRACK:case g.ADD:case g.MINUS:case g.NOT_OP:case g.OPEN_BRACE:this.state=1034,this.test(),this.state=1035,this.match(g.COLON),this.state=1036,this.test();break;case g.POWER:this.state=1038,this.match(g.POWER),this.state=1039,this.expr();break;default:throw new r.error.NoViableAltException(this)}this.state=1046,this._errHandler.sync(this),t=this._interp.adaptivePredict(this._input,143,this._ctx)}this.state=1048,this._errHandler.sync(this),this._input.LA(1)===g.COMMA&&(this.state=1047,this.match(g.COMMA));break;default:throw new r.error.NoViableAltException(this)}break;case 2:switch(this.state=1054,this._errHandler.sync(this),this._input.LA(1)){case g.LAMBDA:case g.NOT:case g.NONE:case g.TRUE:case g.FALSE:case g.NAME:case g.STRING_LITERAL:case g.BYTES_LITERAL:case g.DECIMAL_INTEGER:case g.OCT_INTEGER:case g.HEX_INTEGER:case g.BIN_INTEGER:case g.FLOAT_NUMBER:case g.IMAG_NUMBER:case g.ELLIPSIS:case g.OPEN_PAREN:case g.OPEN_BRACK:case g.ADD:case g.MINUS:case g.NOT_OP:case g.OPEN_BRACE:this.state=1052,this.test();break;case g.STAR:this.state=1053,this.star_expr();break;default:throw new r.error.NoViableAltException(this)}switch(this.state=1070,this._errHandler.sync(this),this._input.LA(1)){case g.FOR:case g.ASYNC:this.state=1056,this.comp_for();break;case g.COMMA:case g.CLOSE_BRACE:for(this.state=1064,this._errHandler.sync(this),t=this._interp.adaptivePredict(this._input,148,this._ctx);2!=t&&t!=r.atn.ATN.INVALID_ALT_NUMBER;){if(1===t)switch(this.state=1057,this.match(g.COMMA),this.state=1060,this._errHandler.sync(this),this._input.LA(1)){case g.LAMBDA:case g.NOT:case g.NONE:case g.TRUE:case g.FALSE:case g.NAME:case g.STRING_LITERAL:case g.BYTES_LITERAL:case g.DECIMAL_INTEGER:case g.OCT_INTEGER:case g.HEX_INTEGER:case g.BIN_INTEGER:case g.FLOAT_NUMBER:case g.IMAG_NUMBER:case g.ELLIPSIS:case g.OPEN_PAREN:case g.OPEN_BRACK:case g.ADD:case g.MINUS:case g.NOT_OP:case g.OPEN_BRACE:this.state=1058,this.test();break;case g.STAR:this.state=1059,this.star_expr();break;default:throw new r.error.NoViableAltException(this)}this.state=1066,this._errHandler.sync(this),t=this._interp.adaptivePredict(this._input,148,this._ctx)}this.state=1068,this._errHandler.sync(this),this._input.LA(1)===g.COMMA&&(this.state=1067,this.match(g.COMMA));break;default:throw new r.error.NoViableAltException(this)}}}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},tt.prototype=Object.create(r.ParserRuleContext.prototype),tt.prototype.constructor=tt,tt.prototype.CLASS=function(){return this.getToken(g.CLASS,0)},tt.prototype.NAME=function(){return this.getToken(g.NAME,0)},tt.prototype.COLON=function(){return this.getToken(g.COLON,0)},tt.prototype.suite=function(){return this.getTypedRuleContext(pe,0)},tt.prototype.OPEN_PAREN=function(){return this.getToken(g.OPEN_PAREN,0)},tt.prototype.CLOSE_PAREN=function(){return this.getToken(g.CLOSE_PAREN,0)},tt.prototype.arglist=function(){return this.getTypedRuleContext(nt,0)},tt.prototype.enterRule=function(e){e instanceof s&&e.enterClassdef(this)},tt.prototype.exitRule=function(e){e instanceof s&&e.exitClassdef(this)},tt.prototype.accept=function(e){return e instanceof a?e.visitClassdef(this):e.visitChildren(this)},g.ClassdefContext=tt,g.prototype.classdef=function(){var e=new tt(this,this._ctx,this.state);this.enterRule(e,166,g.RULE_classdef);var t=0;try{this.enterOuterAlt(e,1),this.state=1074,this.match(g.CLASS),this.state=1075,this.match(g.NAME),this.state=1081,this._errHandler.sync(this),(t=this._input.LA(1))===g.OPEN_PAREN&&(this.state=1076,this.match(g.OPEN_PAREN),this.state=1078,this._errHandler.sync(this),(0==((t=this._input.LA(1))-20&-32)&&0!=(1<<t-20&(1<<g.LAMBDA-20|1<<g.NOT-20|1<<g.NONE-20|1<<g.TRUE-20|1<<g.FALSE-20|1<<g.NAME-20|1<<g.STRING_LITERAL-20|1<<g.BYTES_LITERAL-20|1<<g.DECIMAL_INTEGER-20|1<<g.OCT_INTEGER-20|1<<g.HEX_INTEGER-20|1<<g.BIN_INTEGER-20|1<<g.FLOAT_NUMBER-20|1<<g.IMAG_NUMBER-20|1<<g.ELLIPSIS-20|1<<g.STAR-20|1<<g.OPEN_PAREN-20))||0==(t-54&-32)&&0!=(1<<t-54&(1<<g.POWER-54|1<<g.OPEN_BRACK-54|1<<g.ADD-54|1<<g.MINUS-54|1<<g.NOT_OP-54|1<<g.OPEN_BRACE-54)))&&(this.state=1077,this.arglist()),this.state=1080,this.match(g.CLOSE_PAREN)),this.state=1083,this.match(g.COLON),this.state=1084,this.suite()}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},nt.prototype=Object.create(r.ParserRuleContext.prototype),nt.prototype.constructor=nt,nt.prototype.argument=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(rt):this.getTypedRuleContext(rt,e)},nt.prototype.COMMA=function(e){return void 0===e&&(e=null),null===e?this.getTokens(g.COMMA):this.getToken(g.COMMA,e)},nt.prototype.enterRule=function(e){e instanceof s&&e.enterArglist(this)},nt.prototype.exitRule=function(e){e instanceof s&&e.exitArglist(this)},nt.prototype.accept=function(e){return e instanceof a?e.visitArglist(this):e.visitChildren(this)},g.ArglistContext=nt,g.prototype.arglist=function(){var e=new nt(this,this._ctx,this.state);this.enterRule(e,168,g.RULE_arglist);try{this.enterOuterAlt(e,1),this.state=1086,this.argument(),this.state=1091,this._errHandler.sync(this);for(var t=this._interp.adaptivePredict(this._input,154,this._ctx);2!=t&&t!=r.atn.ATN.INVALID_ALT_NUMBER;)1===t&&(this.state=1087,this.match(g.COMMA),this.state=1088,this.argument()),this.state=1093,this._errHandler.sync(this),t=this._interp.adaptivePredict(this._input,154,this._ctx);this.state=1095,this._errHandler.sync(this),this._input.LA(1)===g.COMMA&&(this.state=1094,this.match(g.COMMA))}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},rt.prototype=Object.create(r.ParserRuleContext.prototype),rt.prototype.constructor=rt,rt.prototype.test=function(e){return void 0===e&&(e=null),null===e?this.getTypedRuleContexts(me):this.getTypedRuleContext(me,e)},rt.prototype.ASSIGN=function(){return this.getToken(g.ASSIGN,0)},rt.prototype.POWER=function(){return this.getToken(g.POWER,0)},rt.prototype.STAR=function(){return this.getToken(g.STAR,0)},rt.prototype.comp_for=function(){return this.getTypedRuleContext(at,0)},rt.prototype.enterRule=function(e){e instanceof s&&e.enterArgument(this)},rt.prototype.exitRule=function(e){e instanceof s&&e.exitArgument(this)},rt.prototype.accept=function(e){return e instanceof a?e.visitArgument(this):e.visitChildren(this)},g.ArgumentContext=rt,g.prototype.argument=function(){var e=new rt(this,this._ctx,this.state);this.enterRule(e,170,g.RULE_argument);var t=0;try{switch(this.enterOuterAlt(e,1),this.state=1109,this._errHandler.sync(this),this._interp.adaptivePredict(this._input,157,this._ctx)){case 1:this.state=1097,this.test(),this.state=1099,this._errHandler.sync(this),(t=this._input.LA(1))!==g.FOR&&t!==g.ASYNC||(this.state=1098,this.comp_for());break;case 2:this.state=1101,this.test(),this.state=1102,this.match(g.ASSIGN),this.state=1103,this.test();break;case 3:this.state=1105,this.match(g.POWER),this.state=1106,this.test();break;case 4:this.state=1107,this.match(g.STAR),this.state=1108,this.test()}}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},st.prototype=Object.create(r.ParserRuleContext.prototype),st.prototype.constructor=st,st.prototype.comp_for=function(){return this.getTypedRuleContext(at,0)},st.prototype.comp_if=function(){return this.getTypedRuleContext(ot,0)},st.prototype.enterRule=function(e){e instanceof s&&e.enterComp_iter(this)},st.prototype.exitRule=function(e){e instanceof s&&e.exitComp_iter(this)},st.prototype.accept=function(e){return e instanceof a?e.visitComp_iter(this):e.visitChildren(this)},g.Comp_iterContext=st,g.prototype.comp_iter=function(){var e=new st(this,this._ctx,this.state);this.enterRule(e,172,g.RULE_comp_iter);try{switch(this.state=1113,this._errHandler.sync(this),this._input.LA(1)){case g.FOR:case g.ASYNC:this.enterOuterAlt(e,1),this.state=1111,this.comp_for();break;case g.IF:this.enterOuterAlt(e,2),this.state=1112,this.comp_if();break;default:throw new r.error.NoViableAltException(this)}}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},at.prototype=Object.create(r.ParserRuleContext.prototype),at.prototype.constructor=at,at.prototype.FOR=function(){return this.getToken(g.FOR,0)},at.prototype.exprlist=function(){return this.getTypedRuleContext(Je,0)},at.prototype.IN=function(){return this.getToken(g.IN,0)},at.prototype.or_test=function(){return this.getTypedRuleContext(he,0)},at.prototype.ASYNC=function(){return this.getToken(g.ASYNC,0)},at.prototype.comp_iter=function(){return this.getTypedRuleContext(st,0)},at.prototype.enterRule=function(e){e instanceof s&&e.enterComp_for(this)},at.prototype.exitRule=function(e){e instanceof s&&e.exitComp_for(this)},at.prototype.accept=function(e){return e instanceof a?e.visitComp_for(this):e.visitChildren(this)},g.Comp_forContext=at,g.prototype.comp_for=function(){var e=new at(this,this._ctx,this.state);this.enterRule(e,174,g.RULE_comp_for);var t=0;try{this.enterOuterAlt(e,1),this.state=1116,this._errHandler.sync(this),(t=this._input.LA(1))===g.ASYNC&&(this.state=1115,this.match(g.ASYNC)),this.state=1118,this.match(g.FOR),this.state=1119,this.exprlist(),this.state=1120,this.match(g.IN),this.state=1121,this.or_test(),this.state=1123,this._errHandler.sync(this),0==((t=this._input.LA(1))-10&-32)&&0!=(1<<t-10&(1<<g.IF-10|1<<g.FOR-10|1<<g.ASYNC-10))&&(this.state=1122,this.comp_iter())}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},ot.prototype=Object.create(r.ParserRuleContext.prototype),ot.prototype.constructor=ot,ot.prototype.IF=function(){return this.getToken(g.IF,0)},ot.prototype.test_nocond=function(){return this.getTypedRuleContext(ue,0)},ot.prototype.comp_iter=function(){return this.getTypedRuleContext(st,0)},ot.prototype.enterRule=function(e){e instanceof s&&e.enterComp_if(this)},ot.prototype.exitRule=function(e){e instanceof s&&e.exitComp_if(this)},ot.prototype.accept=function(e){return e instanceof a?e.visitComp_if(this):e.visitChildren(this)},g.Comp_ifContext=ot,g.prototype.comp_if=function(){var e=new ot(this,this._ctx,this.state);this.enterRule(e,176,g.RULE_comp_if);var t=0;try{this.enterOuterAlt(e,1),this.state=1125,this.match(g.IF),this.state=1126,this.test_nocond(),this.state=1128,this._errHandler.sync(this),0==((t=this._input.LA(1))-10&-32)&&0!=(1<<t-10&(1<<g.IF-10|1<<g.FOR-10|1<<g.ASYNC-10))&&(this.state=1127,this.comp_iter())}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},it.prototype=Object.create(r.ParserRuleContext.prototype),it.prototype.constructor=it,it.prototype.NAME=function(){return this.getToken(g.NAME,0)},it.prototype.enterRule=function(e){e instanceof s&&e.enterEncoding_decl(this)},it.prototype.exitRule=function(e){e instanceof s&&e.exitEncoding_decl(this)},it.prototype.accept=function(e){return e instanceof a?e.visitEncoding_decl(this):e.visitChildren(this)},g.Encoding_declContext=it,g.prototype.encoding_decl=function(){var e=new it(this,this._ctx,this.state);this.enterRule(e,178,g.RULE_encoding_decl);try{this.enterOuterAlt(e,1),this.state=1130,this.match(g.NAME)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},lt.prototype=Object.create(r.ParserRuleContext.prototype),lt.prototype.constructor=lt,lt.prototype.YIELD=function(){return this.getToken(g.YIELD,0)},lt.prototype.yield_arg=function(){return this.getTypedRuleContext(pt,0)},lt.prototype.enterRule=function(e){e instanceof s&&e.enterYield_expr(this)},lt.prototype.exitRule=function(e){e instanceof s&&e.exitYield_expr(this)},lt.prototype.accept=function(e){return e instanceof a?e.visitYield_expr(this):e.visitChildren(this)},g.Yield_exprContext=lt,g.prototype.yield_expr=function(){var e=new lt(this,this._ctx,this.state);this.enterRule(e,180,g.RULE_yield_expr);var t=0;try{this.enterOuterAlt(e,1),this.state=1132,this.match(g.YIELD),this.state=1134,this._errHandler.sync(this),(0==(-32&(t=this._input.LA(1)))&&0!=(1<<t&(1<<g.FROM|1<<g.LAMBDA|1<<g.NOT|1<<g.NONE|1<<g.TRUE|1<<g.FALSE))||0==(t-37&-32)&&0!=(1<<t-37&(1<<g.NAME-37|1<<g.STRING_LITERAL-37|1<<g.BYTES_LITERAL-37|1<<g.DECIMAL_INTEGER-37|1<<g.OCT_INTEGER-37|1<<g.HEX_INTEGER-37|1<<g.BIN_INTEGER-37|1<<g.FLOAT_NUMBER-37|1<<g.IMAG_NUMBER-37|1<<g.ELLIPSIS-37|1<<g.OPEN_PAREN-37|1<<g.OPEN_BRACK-37|1<<g.ADD-37|1<<g.MINUS-37|1<<g.NOT_OP-37))||t===g.OPEN_BRACE)&&(this.state=1133,this.yield_arg())}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},pt.prototype=Object.create(r.ParserRuleContext.prototype),pt.prototype.constructor=pt,pt.prototype.FROM=function(){return this.getToken(g.FROM,0)},pt.prototype.test=function(){return this.getTypedRuleContext(me,0)},pt.prototype.testlist=function(){return this.getTypedRuleContext(Qe,0)},pt.prototype.enterRule=function(e){e instanceof s&&e.enterYield_arg(this)},pt.prototype.exitRule=function(e){e instanceof s&&e.exitYield_arg(this)},pt.prototype.accept=function(e){return e instanceof a?e.visitYield_arg(this):e.visitChildren(this)},g.Yield_argContext=pt,g.prototype.yield_arg=function(){var e=new pt(this,this._ctx,this.state);this.enterRule(e,182,g.RULE_yield_arg);try{switch(this.state=1139,this._errHandler.sync(this),this._input.LA(1)){case g.FROM:this.enterOuterAlt(e,1),this.state=1136,this.match(g.FROM),this.state=1137,this.test();break;case g.LAMBDA:case g.NOT:case g.NONE:case g.TRUE:case g.FALSE:case g.NAME:case g.STRING_LITERAL:case g.BYTES_LITERAL:case g.DECIMAL_INTEGER:case g.OCT_INTEGER:case g.HEX_INTEGER:case g.BIN_INTEGER:case g.FLOAT_NUMBER:case g.IMAG_NUMBER:case g.ELLIPSIS:case g.OPEN_PAREN:case g.OPEN_BRACK:case g.ADD:case g.MINUS:case g.NOT_OP:case g.OPEN_BRACE:this.enterOuterAlt(e,2),this.state=1138,this.testlist();break;default:throw new r.error.NoViableAltException(this)}}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},mt.prototype=Object.create(r.ParserRuleContext.prototype),mt.prototype.constructor=mt,mt.prototype.STRING_LITERAL=function(){return this.getToken(g.STRING_LITERAL,0)},mt.prototype.BYTES_LITERAL=function(){return this.getToken(g.BYTES_LITERAL,0)},mt.prototype.enterRule=function(e){e instanceof s&&e.enterString_literal(this)},mt.prototype.exitRule=function(e){e instanceof s&&e.exitString_literal(this)},mt.prototype.accept=function(e){return e instanceof a?e.visitString_literal(this):e.visitChildren(this)},g.String_literalContext=mt,g.prototype.string_literal=function(){var e=new mt(this,this._ctx,this.state);this.enterRule(e,184,g.RULE_string_literal);var t=0;try{this.enterOuterAlt(e,1),this.state=1141,(t=this._input.LA(1))!==g.STRING_LITERAL&&t!==g.BYTES_LITERAL?this._errHandler.recoverInline(this):(this._errHandler.reportMatch(this),this.consume())}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},ct.prototype=Object.create(r.ParserRuleContext.prototype),ct.prototype.constructor=ct,ct.prototype.copyFrom=function(e){r.ParserRuleContext.prototype.copyFrom.call(this,e)},ut.prototype=Object.create(ct.prototype),ut.prototype.constructor=ut,g.BinLiteralContext=ut,ut.prototype.bin_literal=function(){return this.getTypedRuleContext(At,0)},ut.prototype.enterRule=function(e){e instanceof s&&e.enterBinLiteral(this)},ut.prototype.exitRule=function(e){e instanceof s&&e.exitBinLiteral(this)},ut.prototype.accept=function(e){return e instanceof a?e.visitBinLiteral(this):e.visitChildren(this)},gt.prototype=Object.create(ct.prototype),gt.prototype.constructor=gt,g.FloatLiteralContext=gt,gt.prototype.float_literal=function(){return this.getTypedRuleContext(Et,0)},gt.prototype.enterRule=function(e){e instanceof s&&e.enterFloatLiteral(this)},gt.prototype.exitRule=function(e){e instanceof s&&e.exitFloatLiteral(this)},gt.prototype.accept=function(e){return e instanceof a?e.visitFloatLiteral(this):e.visitChildren(this)},dt.prototype=Object.create(ct.prototype),dt.prototype.constructor=dt,g.HexLiteralContext=dt,dt.prototype.hex_literal=function(){return this.getTypedRuleContext(St,0)},dt.prototype.enterRule=function(e){e instanceof s&&e.enterHexLiteral(this)},dt.prototype.exitRule=function(e){e instanceof s&&e.exitHexLiteral(this)},dt.prototype.accept=function(e){return e instanceof a?e.visitHexLiteral(this):e.visitChildren(this)},ht.prototype=Object.create(ct.prototype),ht.prototype.constructor=ht,g.IntegerLiteralContext=ht,ht.prototype.integer_literal=function(){return this.getTypedRuleContext(ft,0)},ht.prototype.enterRule=function(e){e instanceof s&&e.enterIntegerLiteral(this)},ht.prototype.exitRule=function(e){e instanceof s&&e.exitIntegerLiteral(this)},ht.prototype.accept=function(e){return e instanceof a?e.visitIntegerLiteral(this):e.visitChildren(this)},Tt.prototype=Object.create(ct.prototype),Tt.prototype.constructor=Tt,g.OctLiteralContext=Tt,Tt.prototype.oct_literal=function(){return this.getTypedRuleContext(bt,0)},Tt.prototype.enterRule=function(e){e instanceof s&&e.enterOctLiteral(this)},Tt.prototype.exitRule=function(e){e instanceof s&&e.exitOctLiteral(this)},Tt.prototype.accept=function(e){return e instanceof a?e.visitOctLiteral(this):e.visitChildren(this)},yt.prototype=Object.create(ct.prototype),yt.prototype.constructor=yt,g.ImagLiteralContext=yt,yt.prototype.imag_literal=function(){return this.getTypedRuleContext(_t,0)},yt.prototype.enterRule=function(e){e instanceof s&&e.enterImagLiteral(this)},yt.prototype.exitRule=function(e){e instanceof s&&e.exitImagLiteral(this)},yt.prototype.accept=function(e){return e instanceof a?e.visitImagLiteral(this):e.visitChildren(this)},g.Number_literalContext=ct,g.prototype.number_literal=function(){var e=new ct(this,this._ctx,this.state);this.enterRule(e,186,g.RULE_number_literal);try{switch(this.state=1149,this._errHandler.sync(this),this._input.LA(1)){case g.DECIMAL_INTEGER:e=new ht(this,e),this.enterOuterAlt(e,1),this.state=1143,this.integer_literal();break;case g.OCT_INTEGER:e=new Tt(this,e),this.enterOuterAlt(e,2),this.state=1144,this.oct_literal();break;case g.HEX_INTEGER:e=new dt(this,e),this.enterOuterAlt(e,3),this.state=1145,this.hex_literal();break;case g.BIN_INTEGER:e=new ut(this,e),this.enterOuterAlt(e,4),this.state=1146,this.bin_literal();break;case g.FLOAT_NUMBER:e=new gt(this,e),this.enterOuterAlt(e,5),this.state=1147,this.float_literal();break;case g.IMAG_NUMBER:e=new yt(this,e),this.enterOuterAlt(e,6),this.state=1148,this.imag_literal();break;default:throw new r.error.NoViableAltException(this)}}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},ft.prototype=Object.create(r.ParserRuleContext.prototype),ft.prototype.constructor=ft,ft.prototype.DECIMAL_INTEGER=function(){return this.getToken(g.DECIMAL_INTEGER,0)},ft.prototype.enterRule=function(e){e instanceof s&&e.enterInteger_literal(this)},ft.prototype.exitRule=function(e){e instanceof s&&e.exitInteger_literal(this)},ft.prototype.accept=function(e){return e instanceof a?e.visitInteger_literal(this):e.visitChildren(this)},g.Integer_literalContext=ft,g.prototype.integer_literal=function(){var e=new ft(this,this._ctx,this.state);this.enterRule(e,188,g.RULE_integer_literal);try{this.enterOuterAlt(e,1),this.state=1151,this.match(g.DECIMAL_INTEGER)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},bt.prototype=Object.create(r.ParserRuleContext.prototype),bt.prototype.constructor=bt,bt.prototype.OCT_INTEGER=function(){return this.getToken(g.OCT_INTEGER,0)},bt.prototype.enterRule=function(e){e instanceof s&&e.enterOct_literal(this)},bt.prototype.exitRule=function(e){e instanceof s&&e.exitOct_literal(this)},bt.prototype.accept=function(e){return e instanceof a?e.visitOct_literal(this):e.visitChildren(this)},g.Oct_literalContext=bt,g.prototype.oct_literal=function(){var e=new bt(this,this._ctx,this.state);this.enterRule(e,190,g.RULE_oct_literal);try{this.enterOuterAlt(e,1),this.state=1153,this.match(g.OCT_INTEGER)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},St.prototype=Object.create(r.ParserRuleContext.prototype),St.prototype.constructor=St,St.prototype.HEX_INTEGER=function(){return this.getToken(g.HEX_INTEGER,0)},St.prototype.enterRule=function(e){e instanceof s&&e.enterHex_literal(this)},St.prototype.exitRule=function(e){e instanceof s&&e.exitHex_literal(this)},St.prototype.accept=function(e){return e instanceof a?e.visitHex_literal(this):e.visitChildren(this)},g.Hex_literalContext=St,g.prototype.hex_literal=function(){var e=new St(this,this._ctx,this.state);this.enterRule(e,192,g.RULE_hex_literal);try{this.enterOuterAlt(e,1),this.state=1155,this.match(g.HEX_INTEGER)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},At.prototype=Object.create(r.ParserRuleContext.prototype),At.prototype.constructor=At,At.prototype.BIN_INTEGER=function(){return this.getToken(g.BIN_INTEGER,0)},At.prototype.enterRule=function(e){e instanceof s&&e.enterBin_literal(this)},At.prototype.exitRule=function(e){e instanceof s&&e.exitBin_literal(this)},At.prototype.accept=function(e){return e instanceof a?e.visitBin_literal(this):e.visitChildren(this)},g.Bin_literalContext=At,g.prototype.bin_literal=function(){var e=new At(this,this._ctx,this.state);this.enterRule(e,194,g.RULE_bin_literal);try{this.enterOuterAlt(e,1),this.state=1157,this.match(g.BIN_INTEGER)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},Et.prototype=Object.create(r.ParserRuleContext.prototype),Et.prototype.constructor=Et,Et.prototype.FLOAT_NUMBER=function(){return this.getToken(g.FLOAT_NUMBER,0)},Et.prototype.enterRule=function(e){e instanceof s&&e.enterFloat_literal(this)},Et.prototype.exitRule=function(e){e instanceof s&&e.exitFloat_literal(this)},Et.prototype.accept=function(e){return e instanceof a?e.visitFloat_literal(this):e.visitChildren(this)},g.Float_literalContext=Et,g.prototype.float_literal=function(){var e=new Et(this,this._ctx,this.state);this.enterRule(e,196,g.RULE_float_literal);try{this.enterOuterAlt(e,1),this.state=1159,this.match(g.FLOAT_NUMBER)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},_t.prototype=Object.create(r.ParserRuleContext.prototype),_t.prototype.constructor=_t,_t.prototype.IMAG_NUMBER=function(){return this.getToken(g.IMAG_NUMBER,0)},_t.prototype.enterRule=function(e){e instanceof s&&e.enterImag_literal(this)},_t.prototype.exitRule=function(e){e instanceof s&&e.exitImag_literal(this)},_t.prototype.accept=function(e){return e instanceof a?e.visitImag_literal(this):e.visitChildren(this)},g.Imag_literalContext=_t,g.prototype.imag_literal=function(){var e=new _t(this,this._ctx,this.state);this.enterRule(e,198,g.RULE_imag_literal);try{this.enterOuterAlt(e,1),this.state=1161,this.match(g.IMAG_NUMBER)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},xt.prototype=Object.create(r.ParserRuleContext.prototype),xt.prototype.constructor=xt,xt.prototype.TRUE=function(){return this.getToken(g.TRUE,0)},xt.prototype.FALSE=function(){return this.getToken(g.FALSE,0)},xt.prototype.enterRule=function(e){e instanceof s&&e.enterBoolean_literal(this)},xt.prototype.exitRule=function(e){e instanceof s&&e.exitBoolean_literal(this)},xt.prototype.accept=function(e){return e instanceof a?e.visitBoolean_literal(this):e.visitChildren(this)},g.Boolean_literalContext=xt,g.prototype.boolean_literal=function(){var e=new xt(this,this._ctx,this.state);this.enterRule(e,200,g.RULE_boolean_literal);var t=0;try{this.enterOuterAlt(e,1),this.state=1163,(t=this._input.LA(1))!==g.TRUE&&t!==g.FALSE?this._errHandler.recoverInline(this):(this._errHandler.reportMatch(this),this.consume())}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},It.prototype=Object.create(r.ParserRuleContext.prototype),It.prototype.constructor=It,It.prototype.NONE=function(){return this.getToken(g.NONE,0)},It.prototype.enterRule=function(e){e instanceof s&&e.enterNone_literal(this)},It.prototype.exitRule=function(e){e instanceof s&&e.exitNone_literal(this)},It.prototype.accept=function(e){return e instanceof a?e.visitNone_literal(this):e.visitChildren(this)},g.None_literalContext=It,g.prototype.none_literal=function(){var e=new It(this,this._ctx,this.state);this.enterRule(e,202,g.RULE_none_literal);try{this.enterOuterAlt(e,1),this.state=1165,this.match(g.NONE)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},Lt.prototype=Object.create(r.ParserRuleContext.prototype),Lt.prototype.constructor=Lt,Lt.prototype.NAME=function(){return this.getToken(g.NAME,0)},Lt.prototype.enterRule=function(e){e instanceof s&&e.enterIdentifier(this)},Lt.prototype.exitRule=function(e){e instanceof s&&e.exitIdentifier(this)},Lt.prototype.accept=function(e){return e instanceof a?e.visitIdentifier(this):e.visitChildren(this)},g.IdentifierContext=Lt,g.prototype.identifier=function(){var e=new Lt(this,this._ctx,this.state);this.enterRule(e,204,g.RULE_identifier);try{this.enterOuterAlt(e,1),this.state=1167,this.match(g.NAME)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},vt.prototype=Object.create(r.ParserRuleContext.prototype),vt.prototype.constructor=vt,vt.prototype.EOF=function(){return this.getToken(g.EOF,0)},vt.prototype.enterRule=function(e){e instanceof s&&e.enterEof(this)},vt.prototype.exitRule=function(e){e instanceof s&&e.exitEof(this)},vt.prototype.accept=function(e){return e instanceof a?e.visitEof(this):e.visitChildren(this)},g.EofContext=vt,g.prototype.eof=function(){var e=new vt(this,this._ctx,this.state);this.enterRule(e,206,g.RULE_eof);try{this.enterOuterAlt(e,1),this.state=1169,this.match(g.EOF)}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},Ct.prototype=Object.create(r.ParserRuleContext.prototype),Ct.prototype.constructor=Ct,Ct.prototype.SEMI_COLON=function(){return this.getToken(g.SEMI_COLON,0)},Ct.prototype.NEWLINE=function(){return this.getToken(g.NEWLINE,0)},Ct.prototype.enterRule=function(e){e instanceof s&&e.enterEos(this)},Ct.prototype.exitRule=function(e){e instanceof s&&e.exitEos(this)},Ct.prototype.accept=function(e){return e instanceof a?e.visitEos(this):e.visitChildren(this)},g.EosContext=Ct,g.prototype.eos=function(){var e=new Ct(this,this._ctx,this.state);this.enterRule(e,208,g.RULE_eos);try{switch(this.state=1179,this._errHandler.sync(this),this._interp.adaptivePredict(this._input,167,this._ctx)){case 1:this.enterOuterAlt(e,1),this.state=1172,this._errHandler.sync(this),this._input.LA(1)===g.NEWLINE&&(this.state=1171,this.match(g.NEWLINE)),this.state=1174,this.match(g.SEMI_COLON);break;case 2:this.enterOuterAlt(e,2),this.state=1175,this.match(g.NEWLINE),this.state=1177,this._errHandler.sync(this),1===this._interp.adaptivePredict(this._input,166,this._ctx)&&(this.state=1176,this.match(g.SEMI_COLON))}}catch(t){if(!(t instanceof r.error.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e},g.prototype.sempred=function(e,t,n){if(69===t)return this.atom_sempred(e,n);throw"No predicate with index:"+t},g.prototype.atom_sempred=function(e,t){switch(t){case 0:return this.precpred(this._ctx,3);case 1:return this.precpred(this._ctx,2);case 2:return this.precpred(this._ctx,1);default:throw"No predicate with index:"+t}},t.Python3Parser=g},85185:(e,t,n)=>{var r=n(34764);function s(){return r.tree.ParseTreeVisitor.call(this),this}s.prototype=Object.create(r.tree.ParseTreeVisitor.prototype),s.prototype.constructor=s,s.prototype.visitSingle_input=function(e){return this.visitChildren(e)},s.prototype.visitFile_input=function(e){return this.visitChildren(e)},s.prototype.visitEval_input=function(e){return this.visitChildren(e)},s.prototype.visitDecorator=function(e){return this.visitChildren(e)},s.prototype.visitDecorators=function(e){return this.visitChildren(e)},s.prototype.visitDecorated=function(e){return this.visitChildren(e)},s.prototype.visitAsync_funcdef=function(e){return this.visitChildren(e)},s.prototype.visitFuncdef=function(e){return this.visitChildren(e)},s.prototype.visitParameters=function(e){return this.visitChildren(e)},s.prototype.visitTypedargslist=function(e){return this.visitChildren(e)},s.prototype.visitTfpdef=function(e){return this.visitChildren(e)},s.prototype.visitVarargslist=function(e){return this.visitChildren(e)},s.prototype.visitVfpdef=function(e){return this.visitChildren(e)},s.prototype.visitStmt=function(e){return this.visitChildren(e)},s.prototype.visitSimple_stmt=function(e){return this.visitChildren(e)},s.prototype.visitSmall_stmt=function(e){return this.visitChildren(e)},s.prototype.visitExpr_stmt=function(e){return this.visitChildren(e)},s.prototype.visitAssign_stmt=function(e){return this.visitChildren(e)},s.prototype.visitAnnassign=function(e){return this.visitChildren(e)},s.prototype.visitTestlist_star_expr=function(e){return this.visitChildren(e)},s.prototype.visitAugassign=function(e){return this.visitChildren(e)},s.prototype.visitDel_stmt=function(e){return this.visitChildren(e)},s.prototype.visitPass_stmt=function(e){return this.visitChildren(e)},s.prototype.visitFlow_stmt=function(e){return this.visitChildren(e)},s.prototype.visitBreak_stmt=function(e){return this.visitChildren(e)},s.prototype.visitContinue_stmt=function(e){return this.visitChildren(e)},s.prototype.visitReturn_stmt=function(e){return this.visitChildren(e)},s.prototype.visitYield_stmt=function(e){return this.visitChildren(e)},s.prototype.visitRaise_stmt=function(e){return this.visitChildren(e)},s.prototype.visitImport_stmt=function(e){return this.visitChildren(e)},s.prototype.visitImport_name=function(e){return this.visitChildren(e)},s.prototype.visitImport_from=function(e){return this.visitChildren(e)},s.prototype.visitImport_as_name=function(e){return this.visitChildren(e)},s.prototype.visitDotted_as_name=function(e){return this.visitChildren(e)},s.prototype.visitImport_as_names=function(e){return this.visitChildren(e)},s.prototype.visitDotted_as_names=function(e){return this.visitChildren(e)},s.prototype.visitDotted_name=function(e){return this.visitChildren(e)},s.prototype.visitGlobal_stmt=function(e){return this.visitChildren(e)},s.prototype.visitNonlocal_stmt=function(e){return this.visitChildren(e)},s.prototype.visitAssert_stmt=function(e){return this.visitChildren(e)},s.prototype.visitCompound_stmt=function(e){return this.visitChildren(e)},s.prototype.visitAsync_stmt=function(e){return this.visitChildren(e)},s.prototype.visitIf_stmt=function(e){return this.visitChildren(e)},s.prototype.visitWhile_stmt=function(e){return this.visitChildren(e)},s.prototype.visitFor_stmt=function(e){return this.visitChildren(e)},s.prototype.visitTry_stmt=function(e){return this.visitChildren(e)},s.prototype.visitWith_stmt=function(e){return this.visitChildren(e)},s.prototype.visitWith_item=function(e){return this.visitChildren(e)},s.prototype.visitExcept_clause=function(e){return this.visitChildren(e)},s.prototype.visitSuite=function(e){return this.visitChildren(e)},s.prototype.visitTest=function(e){return this.visitChildren(e)},s.prototype.visitInline_if=function(e){return this.visitChildren(e)},s.prototype.visitTest_nocond=function(e){return this.visitChildren(e)},s.prototype.visitLambdef=function(e){return this.visitChildren(e)},s.prototype.visitLambdef_nocond=function(e){return this.visitChildren(e)},s.prototype.visitOr_test=function(e){return this.visitChildren(e)},s.prototype.visitAnd_test=function(e){return this.visitChildren(e)},s.prototype.visitNot_test=function(e){return this.visitChildren(e)},s.prototype.visitComparison=function(e){return this.visitChildren(e)},s.prototype.visitComp_op=function(e){return this.visitChildren(e)},s.prototype.visitStar_expr=function(e){return this.visitChildren(e)},s.prototype.visitExpr=function(e){return this.visitChildren(e)},s.prototype.visitXor_expr=function(e){return this.visitChildren(e)},s.prototype.visitAnd_expr=function(e){return this.visitChildren(e)},s.prototype.visitShift_expr=function(e){return this.visitChildren(e)},s.prototype.visitArith_expr=function(e){return this.visitChildren(e)},s.prototype.visitTerm=function(e){return this.visitChildren(e)},s.prototype.visitFactor=function(e){return this.visitChildren(e)},s.prototype.visitPower=function(e){return this.visitChildren(e)},s.prototype.visitObjectAtom=function(e){return this.visitChildren(e)},s.prototype.visitArrayAtom=function(e){return this.visitChildren(e)},s.prototype.visitEllipsesAtom=function(e){return this.visitChildren(e)},s.prototype.visitSetAtom=function(e){return this.visitChildren(e)},s.prototype.visitNumberAtom=function(e){return this.visitChildren(e)},s.prototype.visitStringAtom=function(e){return this.visitChildren(e)},s.prototype.visitIndexAccess=function(e){return this.visitChildren(e)},s.prototype.visitNoneAtom=function(e){return this.visitChildren(e)},s.prototype.visitBooleanAtom=function(e){return this.visitChildren(e)},s.prototype.visitFunctionCall=function(e){return this.visitChildren(e)},s.prototype.visitAttributeAccess=function(e){return this.visitChildren(e)},s.prototype.visitIdentifierAtom=function(e){return this.visitChildren(e)},s.prototype.visitTestlist_comp=function(e){return this.visitChildren(e)},s.prototype.visitArray_literal=function(e){return this.visitChildren(e)},s.prototype.visitObject_literal=function(e){return this.visitChildren(e)},s.prototype.visitSet_literal=function(e){return this.visitChildren(e)},s.prototype.visitParen_trailer=function(e){return this.visitChildren(e)},s.prototype.visitBracket_trailer=function(e){return this.visitChildren(e)},s.prototype.visitDot_trailer=function(e){return this.visitChildren(e)},s.prototype.visitSubscriptlist=function(e){return this.visitChildren(e)},s.prototype.visitSubscript=function(e){return this.visitChildren(e)},s.prototype.visitSliceop=function(e){return this.visitChildren(e)},s.prototype.visitExprlist=function(e){return this.visitChildren(e)},s.prototype.visitTestlist=function(e){return this.visitChildren(e)},s.prototype.visitDictorsetmaker=function(e){return this.visitChildren(e)},s.prototype.visitClassdef=function(e){return this.visitChildren(e)},s.prototype.visitArglist=function(e){return this.visitChildren(e)},s.prototype.visitArgument=function(e){return this.visitChildren(e)},s.prototype.visitComp_iter=function(e){return this.visitChildren(e)},s.prototype.visitComp_for=function(e){return this.visitChildren(e)},s.prototype.visitComp_if=function(e){return this.visitChildren(e)},s.prototype.visitEncoding_decl=function(e){return this.visitChildren(e)},s.prototype.visitYield_expr=function(e){return this.visitChildren(e)},s.prototype.visitYield_arg=function(e){return this.visitChildren(e)},s.prototype.visitString_literal=function(e){return this.visitChildren(e)},s.prototype.visitIntegerLiteral=function(e){return this.visitChildren(e)},s.prototype.visitOctLiteral=function(e){return this.visitChildren(e)},s.prototype.visitHexLiteral=function(e){return this.visitChildren(e)},s.prototype.visitBinLiteral=function(e){return this.visitChildren(e)},s.prototype.visitFloatLiteral=function(e){return this.visitChildren(e)},s.prototype.visitImagLiteral=function(e){return this.visitChildren(e)},s.prototype.visitInteger_literal=function(e){return this.visitChildren(e)},s.prototype.visitOct_literal=function(e){return this.visitChildren(e)},s.prototype.visitHex_literal=function(e){return this.visitChildren(e)},s.prototype.visitBin_literal=function(e){return this.visitChildren(e)},s.prototype.visitFloat_literal=function(e){return this.visitChildren(e)},s.prototype.visitImag_literal=function(e){return this.visitChildren(e)},s.prototype.visitBoolean_literal=function(e){return this.visitChildren(e)},s.prototype.visitNone_literal=function(e){return this.visitChildren(e)},s.prototype.visitIdentifier=function(e){return this.visitChildren(e)},s.prototype.visitEof=function(e){return this.visitChildren(e)},s.prototype.visitEos=function(e){return this.visitChildren(e)},t.f=s},49093:e=>{e.exports="SymbolTypes:\n    VAR: &var 0\n    CONSTRUCTOR: &constructor 1\n    FUNC: &func 2\n# Internal patterns to save typing\n__type: &__type\n    id: null\n    callable: *var\n    args: null\n    type: null\n    attr: {}\n    template: null\n    argsTemplate: null\n__func: &__func\n    callable: *func\n    args: []\n    attr: {}\n    template: null\n    argsTemplate: null\n\n# C# Templates\nTemplates:\n    # Misc\n    RegexFlags: &RegexFlags\n        i: 'i'\n        m: 'm'\n        u: ''\n        y: ''\n        g: ''\n    BSONRegexFlags: &BSONRegexFlags\n        i: 'i'\n        m: 'm'\n        x: 'x'\n        s: 's'\n        l: ''\n        u: ''\n    # Syntax\n    DriverTemplate: &DriverTemplate null\n    EqualitySyntaxTemplate: &EqualitySyntaxTemplate !!js/function >\n        (lhs, op, rhs) => {\n            if (op.includes('!') || op.includes('not')) {\n                return `${lhs} != ${rhs}`;\n            }\n            else if (op === '==' || op === '===' || op === 'is') {\n                return `${lhs} == ${rhs}`;\n            }\n            return `${lhs} ${op} ${rhs}`;\n        }\n    InSyntaxTemplate: &InSyntaxTemplate !!js/function >\n        (lhs, op, rhs) => {\n            let str = '!=';\n            if (op.includes('!') || op.includes('not')) {\n                str = '==';\n            }\n            return `${rhs}.indexOf(${lhs}) ${str} -1`\n        }\n    AndSyntaxTemplate: &AndSyntaxTemplate !!js/function >\n        (args) => {\n            return args.join(' && ');\n        }\n    OrSyntaxTemplate: &OrSyntaxTemplate !!js/function >\n        (args) => {\n            return args.join(' || ');\n        }\n    NotSyntaxTemplate: &NotSyntaxTemplate !!js/function >\n        (arg) => {\n            return `!${arg}`;\n        }\n    UnarySyntaxTemplate: &UnarySyntaxTemplate null\n    BinarySyntaxTemplate: &BinarySyntaxTemplate !!js/function >\n        (args) => {\n            return args.reduce((s, op, i, arr) => {\n                if (i % 2 === 0) {\n                    return s;\n                }\n                const rhs = arr[i + 1];\n                switch(op) {\n                    case '//':\n                        return `Math.floor(${s}, ${rhs})`;\n                    case '**':\n                        return `Math.pow(${s}, ${rhs})`;\n                    default:\n                        return `${s} ${op} ${rhs}`;\n                }\n            }, args[0]);\n        }\n    ParensSyntaxTemplate: &ParensSyntaxTemplate null\n    EosSyntaxTemplate: &EosSyntaxTemplate null\n    EofSyntaxTemplate: &EofSyntaxTemplate null\n    NewTemplate: &NewSyntaxTemplate !!js/function >\n        (expr, skip, code) => {\n            // Add classes that don't use \"new\" to array\n            // So far: [Symbol, Decimal128/NumberDecimal, Long/NumberLong, MinKey, MaxKey, Date.now, Double, Int32, Number, Date]\n            noNew = [111, 112, 106, 107, 108, 200.1, 104, 105, 2, 200];\n            if (skip || (code && noNew.indexOf(code) !== -1)) {\n                return expr;\n            }\n            return `new ${expr}`;\n        }\n    # BSON Object Type templates\n    CodeTypeTemplate: &CodeTypeTemplate null\n    StringTypeTemplate: &StringTypeTemplate !!js/function >\n        (str) => {\n            let newStr = str;\n            if (\n              (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n              (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n              newStr = str.substr(1, str.length - 2);\n            }\n            return `\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\"`;\n        }\n    RegexTypeTemplate: &RegexTypeTemplate !!js/function >\n        (pattern, flags) => {\n            flags = flags === '' ? '' : `(?${flags})`;\n            // Double-quote stringify\n            const str = flags + pattern;\n            let newStr = str;\n            if (\n                (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                    newStr = str.substr(1, str.length - 2);\n            }\n            return `Regex(\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\")`;\n        }\n    BoolTypeTemplate: &BoolTypeTemplate !!js/function >\n        (literal) => {\n            return literal.toLowerCase();\n        }\n    IntegerTypeTemplate: &IntegerTypeTemplate null\n    DecimalTypeTemplate: &DecimalTypeTemplate null\n    LongBasicTypeTemplate: &LongBasicTypeTemplate null\n    HexTypeTemplate: &HexTypeTemplate null\n    OctalTypeTemplate: &OctalTypeTemplate !!js/function >\n        (literal) => {\n            literal = literal.replace(/[oO]+/g, '0')\n            return parseInt(literal, 8).toString()\n        }\n    NumericTypeTemplate: &NumericTypeTemplate null\n    ArrayTypeTemplate: &ArrayTypeTemplate !!js/function >\n        (literal, depth) => {\n            depth++;\n            const indent = '\\n' + '    '.repeat(depth);\n            const initialIndent = '\\n' + '    '.repeat(depth-1);\n            if (literal === '') {\n              return 'new BsonArray()'\n            }\n\n            return `new BsonArray${initialIndent}{${literal}${initialIndent}}`;\n        }\n    ArrayTypeArgsTemplate: &ArrayTypeArgsTemplate !!js/function >\n        (arg, depth, last) => {\n            depth++;\n            const indent = '\\n' + '    '.repeat(depth);\n            const arr = arg.split(', new').join(`, ${indent}new`)\n\n            return last ? `${indent}${arr}` : `${indent}${arr},`;\n        }\n    NullTypeTemplate: &NullTypeTemplate !!js/function >\n        () => {\n            return 'BsonNull.Value';\n        }\n    UndefinedTypeTemplate: &UndefinedTypeTemplate !!js/function >\n        () => {\n            return 'BsonUndefined.Value';\n        }\n    ObjectTypeTemplate: &ObjectTypeTemplate !!js/function >\n        (literal) => {\n            if (literal === '') {\n                return `new BsonDocument()`;\n            }\n            return literal;\n        }\n    ObjectTypeArgsTemplate: &ObjectTypeArgsTemplate !!js/function >\n        (args, depth) => {\n            if (args.length === 0) {\n                return 'new BsonDocument()';\n            }\n            depth++;\n            const indent = '\\n' + '    '.repeat(depth);\n            const initialIndent = '\\n' + '    '.repeat(depth-1);\n            const doubleStringify = (str) => {\n                let newStr = str;\n                if (\n                  (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                  (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                    newStr = str.substr(1, str.length - 2);\n                }\n                return `\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\"`;\n            }\n\n            if (args.length === 1) {\n              return `new BsonDocument(${doubleStringify(args[0][0])}, ${args[0][1]})`;\n            }\n\n            const pairs = args.map((pair) => {\n                return `${indent}{ ${doubleStringify(pair[0])}, ${pair[1]} }`;\n            }).join(', ');\n\n            return `new BsonDocument${initialIndent}{${pairs}${initialIndent}}`\n        }\n    # BSON Object Method templates\n    CodeCodeTemplate: &CodeCodeTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.Code`;\n        }\n    CodeCodeArgsTemplate: &CodeCodeArgsTemplate null\n    CodeScopeTemplate: &CodeScopeTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.Scope`;\n        }\n    CodeScopeArgsTemplate: &CodeScopeArgsTemplate null\n    # Since in python, generated from attr access instead of func call, add () in template.\n    ObjectIdToStringTemplate: &ObjectIdToStringTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.ToString()`;\n        }\n    ObjectIdToStringArgsTemplate: &ObjectIdToStringArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    ObjectIdEqualsTemplate: &ObjectIdEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.Equals`;\n        }\n    ObjectIdEqualsArgsTemplate: &ObjectIdEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n            if (arg.indexOf('new') === 0) {\n              arg = arg.replace(/new /g, '')\n            }\n            return `(new ${arg})`;\n        }\n\n    ObjectIdGetTimestampTemplate: &ObjectIdGetTimestampTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.Timestamp`;\n        }\n    ObjectIdGetTimestampArgsTemplate: &ObjectIdGetTimestampArgsTemplate !!js/function >\n        (lhs) => {\n            return '';\n        }\n    BinaryValueTemplate: &BinaryValueTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.ToString`;\n        }\n    BinaryValueArgsTemplate: &BinaryValueArgsTemplate null\n    BinaryLengthTemplate: &BinaryLengthTemplate !!js/function >\n        () => {\n          return '';\n        }\n    BinaryLengthArgsTemplate: &BinaryLengthArgsTemplate !!js/function >\n        (lhs) => {\n          return `${lhs}.Bytes.Length`;\n        }\n    BinaryToStringTemplate: &BinaryToStringTemplate !!js/function >\n        (lhs) => {\n          return `${lhs}.ToString`;\n        }\n    BinaryToStringArgsTemplate: &BinaryToStringArgsTemplate null\n    BinarySubtypeTemplate: &BinarySubtypeTemplate !!js/function >\n        (lhs) => {\n          return `${lhs}.SubType`;\n        }\n    BinarySubtypeArgsTemplate: &BinarySubtypeArgsTemplate !!js/function >\n        () => {\n          return '';\n        }\n    DBRefGetDBTemplate: &DBRefGetDBTemplate !!js/function >\n        (lhs) => {\n          return `${lhs}.DatabaseName`;\n        }\n    DBRefGetDBArgsTemplate: &DBRefGetDBArgsTemplate !!js/function >\n        () => {\n          return '';\n        }\n    DBRefGetCollectionTemplate: &DBRefGetCollectionTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.CollectionName`;\n        }\n    DBRefGetCollectionArgsTemplate: &DBRefGetCollectionArgsTemplate !!js/function >\n        () => {\n          return '';\n        }\n    DBRefGetIdTemplate: &DBRefGetIdTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.Id`;\n        }\n    DBRefGetIdArgsTemplate: &DBRefGetIdArgsTemplate !!js/function >\n        () => {\n          return '';\n        }\n    LongEqualsTemplate: &LongEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} == `;\n        }\n    LongEqualsArgsTemplate: &LongEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n              return `${arg}`;\n        }\n    LongToIntTemplate: &LongToIntTemplate !!js/function >\n        (lhs) => {\n            return `(int) ${lhs}`;\n        }\n    LongToIntArgsTemplate: &LongToIntArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongToStringTemplate: &LongToStringTemplate !!js/function >\n        (lhs) => {\n            return lhs;\n        }\n    LongToStringArgsTemplate: &LongToStringArgsTemplate null\n    LongToNumberTemplate: &LongToNumberTemplate !!js/function >\n        (lhs) => {\n            return `(double) ${lhs}`;\n        }\n    LongToNumberArgsTemplate: &LongToNumberArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongAddTemplate: &LongAddTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} +`;\n        }\n    LongAddArgsTemplate: &LongAddArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongSubtractTemplate: &LongSubtractTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} -`;\n        }\n    LongSubtractArgsTemplate: &LongSubtractArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongMultiplyTemplate: &LongMultiplyTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} *`;\n        }\n    LongMultiplyArgsTemplate: &LongMultiplyArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongDivTemplate: &LongDivTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} /`;\n        }\n    LongDivArgsTemplate: &LongDivArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongModuloTemplate: &LongModuloTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} %`;\n        }\n    LongModuloArgsTemplate: &LongModuloArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongAndTemplate: &LongAndTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} &`;\n        }\n    LongAndArgsTemplate: &LongAndArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongOrTemplate: &LongOrTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} |`;\n        }\n    LongOrArgsTemplate: &LongOrArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongXorTemplate: &LongXorTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} ^`;\n        }\n    LongXorArgsTemplate: &LongXorArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongShiftLeftTemplate: &LongShiftLeftTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <<`;\n        }\n    LongShiftLeftArgsTemplate: &LongShiftLeftArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongShiftRightTemplate: &LongShiftRightTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >>`;\n        }\n    LongShiftRightArgsTemplate: &LongShiftRightArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongCompareTemplate: &LongCompareTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} - `;\n        }\n    LongCompareArgsTemplate: &LongCompareArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return arg;\n        }\n    LongIsOddTemplate: &LongIsOddTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}`;\n        }\n    LongIsOddArgsTemplate: &LongIsOddArgsTemplate !!js/function >\n        () => {\n            return ' % 2 == 1';\n        }\n    LongIsZeroTemplate: &LongIsZeroTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} == 0`;\n        }\n    LongIsZeroArgsTemplate: &LongIsZeroArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongIsNegativeTemplate: &LongIsNegativeTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} < 0`;\n        }\n    LongIsNegativeArgsTemplate: &LongIsNegativeArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongNegateTemplate: &LongNegateTemplate !!js/function >\n        () => {\n            return '-';\n        }\n    LongNegateArgsTemplate: &LongNegateArgsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}`;\n        }\n    LongNotTemplate: &LongNotTemplate !!js/function >\n        () => {\n            return '~';\n        }\n    LongNotArgsTemplate: &LongNotArgsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}`;\n        }\n    LongNotEqualsTemplate: &LongNotEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} !=`;\n        }\n    LongNotEqualsArgsTemplate: &LongNotEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongGreaterThanTemplate: &LongGreaterThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >`;\n        }\n    LongGreaterThanArgsTemplate: &LongGreaterThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongGreaterThanOrEqualTemplate: &LongGreaterThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >=`;\n        }\n    LongGreaterThanOrEqualArgsTemplate: &LongGreaterThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongLessThanTemplate: &LongLessThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <`;\n        }\n    LongLessThanArgsTemplate: &LongLessThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongLessThanOrEqualTemplate: &LongLessThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <=`;\n        }\n    LongLessThanOrEqualArgsTemplate: &LongLessThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongFloatApproxTemplate: &LongFloatApproxTemplate !!js/function >\n        (lhs) => {\n            return `(float) ${lhs}`;\n        }\n    LongTopTemplate: &LongTopTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >> 32`;\n        }\n    LongBottomTemplate: &LongBottomTemplate !!js/function >\n        (lhs) => {\n           return `${lhs} & 0x0000ffff`;\n        }\n    TimestampToStringTemplate: &TimestampToStringTemplate !!js/function >\n        (lhs) => {\n          return `${lhs}.ToString`;\n        }\n    TimestampToStringArgsTemplate: &TimestampToStringArgsTemplate null\n    TimestampEqualsTemplate: &TimestampEqualsTemplate !!js/function >\n        (lhs) => {\n          return `${lhs}.Equals`;\n        }\n    TimestampEqualsArgsTemplate: &TimestampEqualsArgsTemplate null\n    TimestampGetLowBitsTemplate: &TimestampGetLowBitsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.ToUniversalTime`;\n        }\n    TimestampGetLowBitsArgsTemplate: &TimestampGetLowBitsArgsTemplate null\n    TimestampGetHighBitsTemplate: &TimestampGetHighBitsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.Increment`;\n        }\n    TimestampGetHighBitsArgsTemplate: &TimestampGetHighBitsArgsTemplate !!js/function >\n        (lhs) => {\n            return '';\n        }\n    TimestampTTemplate: &TimestampTTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.ToUniversalTime()`;\n        }\n    TimestampITemplate: &TimestampITemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.Increment`;\n        }\n    TimestampAsDateTemplate: &TimestampAsDateTemplate !!js/function >\n        (lhs) => {\n            return `new DateTime(1970, 1, 1).AddSeconds(${lhs}.Timestamp)`;\n        }\n    TimestampAsDateArgsTemplate: &TimestampAsDateArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    TimestampCompareTemplate: &TimestampCompareTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.CompareTo`;\n        }\n    TimestampCompareArgsTemplate: &TimestampCompareArgsTemplate null\n    TimestampNotEqualsTemplate: &TimestampNotEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} != `;\n        }\n    TimestampNotEqualsArgsTemplate: &TimestampNotEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}`;\n        }\n    TimestampGreaterThanTemplate: &TimestampGreaterThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} > `;\n        }\n    TimestampGreaterThanArgsTemplate: &TimestampGreaterThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}`;\n        }\n    TimestampGreaterThanOrEqualTemplate: &TimestampGreaterThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >= `;\n        }\n    TimestampGreaterThanOrEqualArgsTemplate: &TimestampGreaterThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}`;\n        }\n    TimestampLessThanTemplate: &TimestampLessThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} < `;\n        }\n    TimestampLessThanArgsTemplate: &TimestampLessThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}`;\n        }\n    TimestampLessThanOrEqualTemplate: &TimestampLessThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <= `;\n        }\n    TimestampLessThanOrEqualArgsTemplate: &TimestampLessThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}`;\n        }\n    SymbolValueOfTemplate: &SymbolValueOfTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}`;\n        }\n    SymbolValueOfArgsTemplate: &SymbolValueOfArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    SymbolInspectTemplate: &SymbolInspectTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}`;\n        }\n    SymbolInspectArgsTemplate: &SymbolInspectArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    SymbolToStringTemplate: &SymbolToStringTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}`;\n        }\n    SymbolToStringArgsTemplate: &SymbolToStringArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    # Symbol Templates\n    CodeSymbolTemplate: &CodeSymbolTemplate  !!js/function > # Also has process method\n        () => {\n            return 'BsonJavaScript';\n        }\n    CodeSymbolArgsTemplate: &CodeSymbolArgsTemplate !!js/function >\n        (lhs, code, scope) => {\n            // Double quote stringify\n            let newStr = code === undefined ? '' : code;\n            const str = newStr;\n            if (\n                (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                newStr = str.substr(1, str.length - 2);\n            }\n            code = `\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\"`;\n            return (scope === undefined) ? `(${code})` : `WithScope(${code}, ${scope})`;\n        }\n    ObjectIdSymbolTemplate: &ObjectIdSymbolTemplate !!js/function >\n        () => {\n            return 'ObjectId';\n        }\n    ObjectIdSymbolArgsTemplate: &ObjectIdSymbolArgsTemplate !!js/function >\n        (lhs, str) => {\n            if (!str || str.length === 0) {\n                return '()';\n            }\n            let newStr = str;\n            if (\n                (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                newStr = str.substr(1, str.length - 2);\n            }\n            return `(\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\")`;\n        }\n    BinarySymbolTemplate: &BinarySymbolTemplate !!js/function >\n        () => {\n            return 'BsonBinaryData';\n        }\n    BinarySymbolArgsTemplate: &BinarySymbolArgsTemplate !!js/function >\n        (lhs, bytes, type) => {\n            const str = bytes;\n            let newStr = str;\n            if (\n              (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n              (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                newStr = str.substr(1, str.length - 2);\n            }\n            bytes = `\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\"`;\n\n            if (type === null) {\n                return `(System.Text.Encoding.ASCII.GetBytes(${bytes}))`;\n            }\n            return `(System.Text.Encoding.ASCII.GetBytes(${bytes}), ${type})`;\n        }\n    BinarySymbolSubtypeDefaultTemplate: &BinarySymbolSubtypeDefaultTemplate !!js/function >\n        () => {\n            return 'BsonBinarySubType.Binary';\n        }\n    BinarySymbolSubtypeFunctionTemplate: &BinarySymbolSubtypeFunctionTemplate !!js/function >\n        () => {\n            return 'BsonBinarySubType.Function';\n        }\n    BinarySymbolSubtypeByteArrayTemplate: &BinarySymbolSubtypeByteArrayTemplate !!js/function >\n        () => {\n            return 'BsonBinarySubType.OldBinary';\n        }\n    BinarySymbolSubtypeUuidOldTemplate: &BinarySymbolSubtypeUuidOldTemplate !!js/function >\n        () => {\n            return 'BsonBinarySubType.UuidLegacy';\n        }\n    BinarySymbolSubtypeUuidTemplate: &BinarySymbolSubtypeUuidTemplate !!js/function >\n        () => {\n            return 'BsonBinarySubType.UuidStandard';\n        }\n    BinarySymbolSubtypeMd5Template: &BinarySymbolSubtypeMd5Template !!js/function >\n        () => {\n            return 'BsonBinarySubType.MD5';\n        }\n    BinarySymbolSubtypeUserDefinedTemplate: &BinarySymbolSubtypeUserDefinedTemplate !!js/function >\n        () => {\n            return 'BsonBinarySubType.UserDefined';\n        }\n    DBRefSymbolTemplate: &DBRefSymbolTemplate !!js/function >\n        () => {\n            return 'MongoDBRef';\n        }\n    DBRefSymbolArgsTemplate: &DBRefSymbolArgsTemplate null\n    DoubleSymbolTemplate: &DoubleSymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    DoubleSymbolArgsTemplate: &DoubleSymbolArgsTemplate !!js/function >\n        (lhs, arg, type) => {\n            arg = arg === undefined ? 0 : arg;\n\n            if (type === '_hex') {\n              return `Convert.ToDouble(${arg})`;\n            }\n            if (type === '_string') {\n              return `Convert.ToDouble(${arg})`;\n            }\n\n            if (type === '_decimal') {\n              return arg;\n            }\n\n            return `${Math.round(arg).toFixed(1)}`;\n        }\n    Int32SymbolTemplate: &Int32SymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    Int32SymbolArgsTemplate: &Int32SymbolArgsTemplate !!js/function >\n        (lhs, arg, type) => {\n            arg = arg === undefined ? 0 : arg;\n\n            if (type === '_hex' || type === '_decimal' || type === '_string') {\n              return `Convert.ToInt32(${arg})`;\n            }\n\n            return arg;\n        }\n    LongSymbolTemplate: &LongSymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongSymbolArgsTemplate: &LongSymbolArgsTemplate !!js/function >\n        (lhs, arg) => {\n            if (!arg || arg.length === 0) {\n                arg = '0';\n            }\n            if (arg.indexOf('\\'') === 0 || arg.indexOf('\"') === 0) {\n              return `Convert.ToInt64(${arg})`;\n            }\n            return `${arg}L`;\n        }\n    LongSymbolMaxTemplate: &LongSymbolMaxTemplate !!js/function >\n        () => {\n            return 'Int64.MaxValue';\n        }\n    LongSymbolMaxArgsTemplate: &LongSymbolMaxArgsTemplate null\n    LongSymbolMinTemplate: &LongSymbolMinTemplate !!js/function >\n        () => {\n            return 'Int64.MinValue';\n        }\n    LongSymbolMinArgsTemplate: &LongSymbolMinArgsTemplate null\n    LongSymbolZeroTemplate: &LongSymbolZeroTemplate !!js/function >\n        (lhs) => {\n            return '0L';\n        }\n    LongSymbolZeroArgsTemplate: &LongSymbolZeroArgsTemplate null\n    LongSymbolOneTemplate: &LongSymbolOneTemplate !!js/function >\n        (lhs) => {\n            return '1L';\n        }\n    LongSymbolOneArgsTemplate: &LongSymbolOneArgsTemplate null\n    LongSymbolNegOneTemplate: &LongSymbolNegOneTemplate !!js/function >\n        (lhs) => {\n            return '-1L';\n        }\n    LongSymbolNegOneArgsTemplate: &LongSymbolNegOneArgsTemplate null\n    LongSymbolFromBitsTemplate: &LongSymbolFromBitsTemplate !!js/function > # Also has process method\n        () => {\n            return '';\n        }\n    LongSymbolFromBitsArgsTemplate: &LongSymbolFromBitsArgsTemplate null\n    LongSymbolFromIntTemplate: &LongSymbolFromIntTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongSymbolFromIntArgsTemplate: &LongSymbolFromIntArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}L`;\n        }\n    LongSymbolFromNumberTemplate: &LongSymbolFromNumberTemplate null\n    LongSymbolFromNumberArgsTemplate: &LongSymbolFromNumberArgsTemplate null\n    LongSymbolFromStringTemplate: &LongSymbolFromStringTemplate !!js/function >\n        () => {\n            return 'Convert.ToInt64';\n        }\n    LongSymbolFromStringArgsTemplate: &LongSymbolFromStringArgsTemplate !!js/function >\n        (lhs, arg1, arg2) => {\n          if (arg2) {\n            return `(${arg1}, ${arg2})`\n          }\n          return `(${arg1}, 10)`\n        }\n    MinKeySymbolTemplate: &MinKeySymbolTemplate !!js/function >\n        () => {\n            return 'BsonMinKey';\n        }\n    MinKeySymbolArgsTemplate: &MinKeySymbolArgsTemplate !!js/function >\n        () => {\n            return '.Value';\n        }\n    MaxKeySymbolTemplate: &MaxKeySymbolTemplate !!js/function >\n        () => {\n            return 'BsonMaxKey';\n        }\n    MaxKeySymbolArgsTemplate: &MaxKeySymbolArgsTemplate !!js/function >\n        () => {\n            return '.Value';\n        }\n    TimestampSymbolTemplate: &TimestampSymbolTemplate !!js/function >\n        () => {\n            return 'BsonTimestamp';\n        }\n    TimestampSymbolArgsTemplate: &TimestampSymbolArgsTemplate !!js/function >\n        (lhs, arg1, arg2) => {\n            if (typeof arg1 === 'undefined') {\n                return '(0, 0)'\n            }\n            return `(${arg1}, ${arg2})`;\n        }\n    SymbolSymbolTemplate: &SymbolSymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    SymbolSymbolArgsTemplate: &SymbolSymbolArgsTemplate !!js/function >\n        (_, arg) => {\n            return arg; // no parens because generates as a string\n        }\n    BSONRegExpSymbolTemplate: &BSONRegExpSymbolTemplate !!js/function >\n        () => {\n            return 'BsonRegularExpression';\n        }\n    BSONRegExpSymbolArgsTemplate: &BSONRegExpSymbolArgsTemplate !!js/function >\n        (lhs, pattern, flags) => {\n            const doubleStringify = (str) => {\n                let newStr = str;\n                if (\n                  (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                  (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                    newStr = str.substr(1, str.length - 2);\n                }\n                return `\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\"`;\n            }\n            return `(${doubleStringify(pattern)}${flags ? ', ' + doubleStringify(flags) : ''})`;\n        }\n    Decimal128SymbolTemplate: &Decimal128SymbolTemplate !!js/function >\n        () => {\n            return 'Decimal128';\n        }\n    Decimal128SymbolArgsTemplate: &Decimal128SymbolArgsTemplate !!js/function >\n        (_, str) => { // just stringify\n            let newStr = str;\n            if (\n              (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n              (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                newStr = str.substr(1, str.length - 2);\n            }\n            return `.Parse(\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\")`;\n        }\n    Decimal128SymbolFromStringTemplate: &Decimal128SymbolFromStringTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.Parse`;\n        }\n    Decimal128SymbolFromStringArgsTemplate: &Decimal128SymbolFromStringArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `(${arg})`;\n        }\n    Decimal128ToStringTemplate: &Decimal128ToStringTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.ToString`;\n        }\n    Decimal128ToStringArgsTemplate: &Decimal128ToStringArgsTemplate null\n    # BSON Util Templates\n    ObjectIdCreateFromHexStringTemplate: &ObjectIdCreateFromHexStringTemplate !!js/function >\n        (lhs) => {\n            return `new ${lhs}`;\n        }\n    ObjectIdCreateFromHexStringArgsTemplate: &ObjectIdCreateFromHexStringArgsTemplate null\n    ObjectIdCreateFromTimeTemplate: &ObjectIdCreateFromTimeTemplate !!js/function >\n        () => {\n            return `new ObjectId.GenerateNewId`;\n        }\n    ObjectIdCreateFromTimeArgsTemplate: &ObjectIdCreateFromTimeArgsTemplate !!js/function >\n        (lhs, arg, isNumber) => {\n            if (isNumber) {\n              return `(Convert.ToInt32(${arg}))`;\n            }\n            return `(${arg})`;\n        }\n    ObjectIdIsValidTemplate: &ObjectIdIsValidTemplate !!js/function >\n        (lhs) => {\n            return `new ${lhs}`;\n        }\n    ObjectIdIsValidArgsTemplate: &ObjectIdIsValidArgsTemplate null\n    # JS Symbol Templates\n    NumberSymbolTemplate: &NumberSymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    NumberSymbolArgsTemplate: &NumberSymbolArgsTemplate !!js/function >\n        (lhs, arg, type) => {\n            arg = arg === undefined ? 0 : arg;\n\n            if (type === '_string') {\n              if (arg.indexOf('.') !== -1) {\n                return `float.Parse(${arg})`\n              }\n              return `int.Parse(${arg})`;\n            }\n\n            if (arg.indexOf('.') !== -1) {\n              return `(float) ${arg}`\n            }\n            return `(int) ${arg}`;\n        }\n    DateSymbolTemplate: &DateSymbolTemplate !!js/function >\n        () => {\n            return 'DateTime';\n        }\n    DateSymbolArgsTemplate: &DateSymbolArgsTemplate !!js/function >\n        (lhs, date, isString) => {\n            let toStr = isString? '.ToString(\"ddd MMM dd yyyy HH\\':\\'mm\\':\\'ss UTC\")' : '';\n\n            if (date === null) {\n                return `${lhs}.Now${toStr}`;\n            }\n\n            const dateStr = [\n                date.getUTCFullYear(),\n                date.getUTCMonth() + 1,\n                date.getUTCDate(),\n                date.getUTCHours(),\n                date.getUTCMinutes(),\n                date.getUTCSeconds()\n            ].join(', ');\n\n            return `new ${lhs}(${dateStr})${toStr}`;\n        }\n    DateSymbolNowTemplate: &DateSymbolNowTemplate !!js/function >\n        () => {\n            return 'DateTime.Now';\n        }\n    DateSymbolNowArgsTemplate: &DateSymbolNowArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    RegExpSymbolTemplate: &RegExpSymbolTemplate !!js/function > # Also has process method\n        () => {\n            return 'Regex';\n        }\n    RegExpSymbolArgsTemplate: &RegExpSymbolArgsTemplate null\n    ImportTemplate: &ImportTemplate !!js/function >\n        (args) => {\n            const universal = ['using MongoDB.Bson;', 'using MongoDB.Driver;'];\n            const all = universal.concat(Object.values(args));\n            return all.join('\\n');\n        }\n    DriverImportTemplate: &DriverImportTemplate null\n    0ImportTemplate: &0ImportTemplate null\n    1ImportTemplate: &1ImportTemplate null\n    2ImportTemplate: &2ImportTemplate null\n    3ImportTemplate: &3ImportTemplate null\n    4ImportTemplate: &4ImportTemplate null\n    5ImportTemplate: &5ImportTemplate null\n    6ImportTemplate: &6ImportTemplate null\n    7ImportTemplate: &7ImportTemplate null\n    8ImportTemplate: &8ImportTemplate !!js/function >\n        () => {\n            return 'using System.Text.RegularExpressions;';\n        }\n    9ImportTemplate: &9ImportTemplate null\n    10ImportTemplate: &10ImportTemplate null\n    11ImportTemplate: &11ImportTemplate null\n    12ImportTemplate: &12ImportTemplate null\n    100ImportTemplate: &100ImportTemplate null\n    101ImportTemplate: &101ImportTemplate null\n    102ImportTemplate: &102ImportTemplate null\n    103ImportTemplate: &103ImportTemplate null\n    104ImportTemplate: &104ImportTemplate null\n    105ImportTemplate: &105ImportTemplate null\n    106ImportTemplate: &106ImportTemplate null\n    107ImportTemplate: &107ImportTemplate null\n    108ImportTemplate: &108ImportTemplate null\n    109ImportTemplate: &109ImportTemplate null\n    110ImportTemplate: &110ImportTemplate null\n    111ImportTemplate: &111ImportTemplate null\n    112ImportTemplate: &112ImportTemplate null\n    113ImportTemplate: &113ImportTemplate null\n    114ImportTemplate: &114ImportTemplate null\n    200ImportTemplate: &200ImportTemplate !!js/function >\n        () => {\n            return 'using System;';\n        }\n    201ImportTemplate: &201ImportTemplate null\n    300ImportTemplate: &300ImportTemplate null\n    301ImportTemplate: &301ImportTemplate null\n    302ImportTemplate: &302ImportTemplate null\n    303ImportTemplate: &303ImportTemplate null\n    304ImportTemplate: &304ImportTemplate null\n    305ImportTemplate: &305ImportTemplate null\n    306ImportTemplate: &306ImportTemplate null\n# Universal types\n# Everything inherits from StringType because we haven't implemented any of them.\nBasicTypes:\n    # Universal basic types\n    _bool: &BoolType\n        <<: *__type\n        id: \"_bool\"\n        code: 0\n        template: *BoolTypeTemplate\n    _integer: &IntegerType\n        <<: *__type\n        id: \"_integer\"\n        code: 1\n        template: *IntegerTypeTemplate\n    _long: &LongBasicType\n        <<: *__type\n        id: \"_long\"\n        code: 2\n        template: *LongBasicTypeTemplate\n    _decimal: &DecimalType\n        <<: *__type\n        id: \"_decimal\"\n        code: 3\n        template: *DecimalTypeTemplate\n    _hex: &HexType\n        <<: *__type\n        id: \"_hex\"\n        code: 4\n        template: *HexTypeTemplate\n    _octal: &OctalType\n        <<: *__type\n        id: \"_octal\"\n        code: 5\n        template: *OctalTypeTemplate\n    _numeric: &NumericType\n        <<: *__type\n        id: \"_numeric\"\n        code: 6\n        template: *NumericTypeTemplate\n    _string: &StringType\n        <<: *__type\n        id: \"_string\"\n        code: 7\n        template: *StringTypeTemplate\n    _regex: &RegexType\n        <<: *__type\n        id: \"_regex\"\n        code: 8\n        template: *RegexTypeTemplate\n    _array: &ArrayType\n        <<: *__type\n        id: \"_array\"\n        code: 9\n        template: *ArrayTypeTemplate\n        argsTemplate: *ArrayTypeArgsTemplate\n    _object: &ObjectType\n        <<: *__type\n        id: \"_object\"\n        code: 10\n        template: *ObjectTypeTemplate\n        argsTemplate: *ObjectTypeArgsTemplate\n    _null: &NullType\n        <<: *__type\n        id: \"_null\"\n        code: 11\n        template: *NullTypeTemplate\n    _undefined: &UndefinedType\n        <<: *__type\n        id: \"_undefined\"\n        code: 12\n        template: *UndefinedTypeTemplate\n\nSyntax:\n    equality:\n        template: *EqualitySyntaxTemplate\n    in:\n        template: *InSyntaxTemplate\n    and:\n        template: *AndSyntaxTemplate\n    or:\n        template: *OrSyntaxTemplate\n    not:\n        template: *NotSyntaxTemplate\n    unary:\n        template: *UnarySyntaxTemplate\n    binary:\n        template: *BinarySyntaxTemplate\n    parens:\n        template: *ParensSyntaxTemplate\n    eos:\n        template: *EosSyntaxTemplate\n    eof:\n        template: *EofSyntaxTemplate\n    # The new template takes in expr, and an optional skip argument and optional\n    # id argument. The skip argument is a boolean that if true then doesn't add\n    # new. The code argument is the symbol code being called. The template will check\n    # if it is an exception, i.e. a type that is a constructor but may not use new.\n    new:\n        template: *NewSyntaxTemplate\n    # The regex flags that change symbols between languages can be defined here.\n    # Flags that aren't defined can be left blank and will be ignored.\n    regexFlags: *RegexFlags\n    bsonRegexFlags: *BSONRegexFlags\n    driver: *DriverTemplate\nImports:\n    import:\n        template: *ImportTemplate\n    driver:\n        template: *DriverImportTemplate\n    0:\n        template: *0ImportTemplate\n    1:\n        template: *1ImportTemplate\n    2:\n        template: *2ImportTemplate\n    3:\n        template: *3ImportTemplate\n    4:\n        template: *4ImportTemplate\n    5:\n        template: *5ImportTemplate\n    6:\n        template: *6ImportTemplate\n    7:\n        template: *7ImportTemplate\n    8:\n        template: *8ImportTemplate\n    9:\n        template: *9ImportTemplate\n    10:\n        template: *10ImportTemplate\n    11:\n        template: *11ImportTemplate\n    12:\n        template: *12ImportTemplate\n    100:\n        template: *100ImportTemplate\n    101:\n        template: *101ImportTemplate\n    102:\n        template: *102ImportTemplate\n    103:\n        template: *103ImportTemplate\n    104:\n        template: *104ImportTemplate\n    105:\n        template: *105ImportTemplate\n    106:\n        template: *106ImportTemplate\n    107:\n        template: *107ImportTemplate\n    108:\n        template: *108ImportTemplate\n    109:\n        template: *109ImportTemplate\n    110:\n        template: *110ImportTemplate\n    111:\n        template: *111ImportTemplate\n    112:\n        template: *112ImportTemplate\n    113:\n        template: *113ImportTemplate\n    114:\n        template: *114ImportTemplate\n    200:\n        template: *200ImportTemplate\n    201:\n        template: *201ImportTemplate\n    300:\n        template: *300ImportTemplate\n    301:\n        template: *301ImportTemplate\n    302:\n        template: *302ImportTemplate\n    303:\n        template: *303ImportTemplate\n    304:\n        template: *304ImportTemplate\n    305:\n        template: *305ImportTemplate\n    306:\n        template: *306ImportTemplate\nBsonTypes:\n    Code: &CodeType\n        <<: *__type\n        id: \"Code\"\n        code: 100\n        type: *ObjectType\n        attr:\n            code:\n                callable: *var\n                args: null\n                attr: null\n                id: \"code\"\n                type: *StringType\n                template: *CodeCodeTemplate\n                argsTemplate: *CodeCodeArgsTemplate\n            scope:\n                callable: *var\n                args: null\n                attr: null\n                id: \"scope\"\n                type: *StringType\n                template: *CodeScopeTemplate\n                argsTemplate: *CodeScopeArgsTemplate\n    ObjectId: &ObjectIdType\n        <<: *__type\n        id: \"ObjectId\"\n        code: 101\n        type: *ObjectType\n        attr:\n            toHexString:\n                <<: *__func\n                id: \"toHexString\"\n                type: *StringType\n            toString:\n                <<: *__func\n                type: *StringType\n                template: *ObjectIdToStringTemplate\n                argsTemplate: *ObjectIdToStringArgsTemplate\n            equals:\n                <<: *__func\n                args:\n                    - [ \"ObjectId\" ]\n                type: *BoolType\n                template: *ObjectIdEqualsTemplate\n                argsTemplate: *ObjectIdEqualsArgsTemplate\n            getTimestamp:\n                <<: *__func\n                type: *IntegerType\n                template: *ObjectIdGetTimestampTemplate\n                argsTemplate: *ObjectIdGetTimestampArgsTemplate\n    Binary: &BinaryType\n        <<: *__type\n        id: \"Binary\"\n        code: 102\n        type: *ObjectType\n        attr:\n            value:\n                <<: *__func\n                id: \"value\"\n                type: *StringType\n                template: *BinaryValueTemplate\n                argsTemplate: *BinaryValueArgsTemplate\n            length:\n                <<: *__func\n                id: \"length\"\n                type: *IntegerType\n                template: *BinaryLengthTemplate\n                argsTemplate: *BinaryLengthArgsTemplate\n            toString:\n                <<: *__func\n                id: \"toString\"\n                type: *StringType\n                template: *BinaryToStringTemplate\n                argsTemplate: *BinaryToStringArgsTemplate\n            sub_type:\n                callable: *var\n                args: null\n                attr: null\n                id: \"subtype\"\n                type: *IntegerType\n                template: *BinarySubtypeTemplate\n                argsTemplate: *BinarySubtypeArgsTemplate\n    DBRef: &DBRefType\n        <<: *__type\n        id: \"DBRef\"\n        code: 103\n        type: *ObjectType\n        attr:\n            db:\n                callable: *var\n                args: null\n                attr: null\n                id: \"db\"\n                type: *StringType\n                template: *DBRefGetDBTemplate\n                argsTemplate: *DBRefGetDBArgsTemplate\n            namespace:\n                callable: *var\n                args: null\n                attr: null\n                id: \"namespace\"\n                type: *StringType\n                template: *DBRefGetCollectionTemplate\n                argsTemplate: *DBRefGetCollectionArgsTemplate\n            oid:\n                callable: *var\n                args: null\n                attr: null\n                id: \"oid\"\n                type: *StringType\n                template: *DBRefGetIdTemplate\n                argsTemplate: *DBRefGetIdArgsTemplate\n    Double: &DoubleType\n        <<: *__type\n        id: \"Double\"\n        code: 104\n        type: *ObjectType\n        attr: {}\n    Int32: &Int32Type\n        <<: *__type\n        id: \"Int32\"\n        code: 105\n        type: *ObjectType\n        attr: {}\n    Long: &LongType\n        <<: *__type\n        id: \"Long\"\n        code: 106\n        type: *ObjectType\n        attr:\n            toString:\n                <<: *__func\n                id: \"LongtoString\" # Needs process method\n                args:\n                    - [ *IntegerType, null ]\n                type: *StringType\n                template: *LongToStringTemplate\n                argsTemplate: *LongToStringArgsTemplate\n            equals:\n                <<: *__func\n                id: \"equals\"\n                args:\n                    - [ \"Long\" ]\n                type: *BoolType\n                template: *LongEqualsTemplate\n                argsTemplate: *LongEqualsArgsTemplate\n            toInt:\n                <<: *__func\n                id: \"toInt\"\n                type: *IntegerType\n                template: *LongToIntTemplate\n                argsTemplate: *LongToIntArgsTemplate\n            toNumber:\n                <<: *__func\n                id: \"toNumber\"\n                type: *DecimalType\n                template: *LongToNumberTemplate\n                argsTemplate: *LongToNumberArgsTemplate\n            compare:\n                <<: *__func\n                id: \"compare\"\n                args:\n                    - [ \"Long\" ]\n                type: *StringType\n                template: *LongCompareTemplate\n                argsTemplate: *LongCompareArgsTemplate\n            isOdd:\n                <<: *__func\n                id: \"isOdd\"\n                type: *BoolType\n                template: *LongIsOddTemplate\n                argsTemplate: *LongIsOddArgsTemplate\n            isZero:\n                <<: *__func\n                id: \"isZero\"\n                type: *BoolType\n                template: *LongIsZeroTemplate\n                argsTemplate: *LongIsZeroArgsTemplate\n            isNegative:\n                <<: *__func\n                id: \"isNegative\"\n                type: *BoolType\n                template: *LongIsNegativeTemplate\n                argsTemplate: *LongIsNegativeArgsTemplate\n            negate:\n                <<: *__func\n                id: \"negate\"\n                type: \"Long\"\n                template: *LongNegateTemplate\n                argsTemplate: *LongNegateArgsTemplate\n            not:\n                <<: *__func\n                id: \"not\"\n                type: \"Long\"\n                template: *LongNotTemplate\n                argsTemplate: *LongNotArgsTemplate\n            notEquals:\n                <<: *__func\n                id: \"notEquals\"\n                args:\n                    - [ \"Long\" ]\n                type: *BoolType\n                template: *LongNotEqualsTemplate\n                argsTemplate: *LongNotEqualsArgsTemplate\n            greaterThan:\n                <<: *__func\n                id: \"greaterThan\"\n                args:\n                    - [ \"Long\" ]\n                type: *BoolType\n                template: *LongGreaterThanTemplate\n                argsTemplate: *LongGreaterThanArgsTemplate\n            greaterThanOrEqual:\n                <<: *__func\n                id: \"greaterThanOrEqual\"\n                args:\n                    - [ \"Long\" ]\n                type: *BoolType\n                template: *LongGreaterThanOrEqualTemplate\n                argsTemplate: *LongGreaterThanOrEqualArgsTemplate\n            lessThan:\n                <<: *__func\n                id: \"lessThan\"\n                args:\n                    - [ \"Long\" ]\n                type: *BoolType\n                template: *LongLessThanTemplate\n                argsTemplate: *LongLessThanArgsTemplate\n            lessThanOrEqual:\n                <<: *__func\n                id: \"lessThanOrEqual\"\n                args:\n                    - [ \"Long\" ]\n                type: *BoolType\n                template: *LongLessThanOrEqualTemplate\n                argsTemplate: *LongLessThanOrEqualArgsTemplate\n            add:\n                <<: *__func\n                id: \"add\"\n                args:\n                    - [ \"Long\" ]\n                type: \"Long\"\n                template: *LongAddTemplate\n                argsTemplate: *LongAddArgsTemplate\n            subtract:\n                <<: *__func\n                id: \"subtract\"\n                args:\n                    - [ \"Long\" ]\n                type: \"Long\"\n                template: *LongSubtractTemplate\n                argsTemplate: *LongSubtractArgsTemplate\n            multiply:\n                <<: *__func\n                id: \"multiply\"\n                args:\n                    - [ \"Long\" ]\n                type: \"Long\"\n                template: *LongMultiplyTemplate\n                argsTemplate: *LongMultiplyArgsTemplate\n            div:\n                <<: *__func\n                id: \"div\"\n                args:\n                    - [ \"Long\" ]\n                type: \"Long\"\n                template: *LongDivTemplate\n                argsTemplate: *LongDivArgsTemplate\n            modulo:\n                <<: *__func\n                id: \"modulo\"\n                args:\n                    - [ \"Long\" ]\n                type: \"Long\"\n                template: *LongModuloTemplate\n                argsTemplate: *LongModuloArgsTemplate\n            and:\n                <<: *__func\n                id: \"and\"\n                args:\n                    - [ \"Long\" ]\n                type: \"Long\"\n                template: *LongAndTemplate\n                argsTemplate: *LongAndArgsTemplate\n            or:\n                <<: *__func\n                id: \"or\"\n                args:\n                    - [ \"Long\" ]\n                type: \"Long\"\n                template: *LongOrTemplate\n                argsTemplate: *LongOrArgsTemplate\n            xor:\n                <<: *__func\n                id: \"xor\"\n                args:\n                    - [ \"Long\" ]\n                type: \"Long\"\n                template: *LongXorTemplate\n                argsTemplate: *LongXorArgsTemplate\n            shiftLeft:\n                <<: *__func\n                id: \"shiftLeft\"\n                args:\n                    - [ *IntegerType ]\n                type: \"Long\"\n                template: *LongShiftLeftTemplate\n                argsTemplate: *LongShiftLeftArgsTemplate\n            shiftRight:\n                <<: *__func\n                id: \"shiftRight\"\n                args:\n                    - [ *IntegerType ]\n                type: \"Long\"\n                template: *LongShiftRightTemplate\n                argsTemplate: *LongShiftRightArgsTemplate\n    MinKeyType: &MinKeyType\n        <<: *__type\n        id: \"MinKey\"\n        code: 107\n        type: *ObjectType\n    MaxKeyType: &MaxKeyType\n        <<: *__type\n        id: \"MaxKey\"\n        code: 108\n        type: *ObjectType\n    BSONRegExpType: &BSONRegExpType\n        <<: *__type\n        id: \"BSONRegExp\"\n        code: 109\n        type: *ObjectType #TODO: add pattern + options\n    Timestamp: &TimestampType\n        <<: *__type\n        id: \"Timestamp\"\n        code: 110\n        type: *ObjectType\n        attr:\n            toString:\n                <<: *__func\n                id: \"toString\"\n                type: *StringType\n                template: *TimestampToStringTemplate\n                argsTemplate: *TimestampToStringArgsTemplate\n            equals:\n                <<: *__func\n                id: \"equals\"\n                args:\n                    - [ \"Timestamp\" ]\n                type: *BoolType\n                template: *TimestampEqualsTemplate\n                argsTemplate: *TimestampEqualsArgsTemplate\n            getLowBits:\n                <<: *__func\n                id: \"getLowBits\"\n                type: *IntegerType\n                template: *TimestampGetLowBitsTemplate\n                argsTemplate: *TimestampGetLowBitsArgsTemplate\n            getHighBits:\n                <<: *__func\n                id: \"getHighBits\"\n                type: *IntegerType\n                template: *TimestampGetHighBitsTemplate\n                argsTemplate: *TimestampGetHighBitsArgsTemplate\n            compare:\n                <<: *__func\n                id: \"compare\"\n                args:\n                    - [ \"Timestamp\" ]\n                type: *StringType\n                template: *TimestampCompareTemplate\n                argsTemplate: *TimestampCompareArgsTemplate\n            notEquals:\n                <<: *__func\n                id: \"notEquals\"\n                args:\n                    - [ \"Timestamp\" ]\n                type: *BoolType\n                template: *TimestampNotEqualsTemplate\n                argsTemplate: *TimestampNotEqualsArgsTemplate\n            greaterThan:\n                <<: *__func\n                id: \"greaterThan\"\n                args:\n                    - [ \"Timestamp\" ]\n                type: *BoolType\n                template: *TimestampGreaterThanTemplate\n                argsTemplate: *TimestampGreaterThanArgsTemplate\n            greaterThanOrEqual:\n                <<: *__func\n                id: \"greaterThanOrEqual\"\n                args:\n                    - [ \"Timestamp\" ]\n                type: *BoolType\n                template: *TimestampGreaterThanOrEqualTemplate\n                argsTemplate: *TimestampGreaterThanOrEqualArgsTemplate\n            lessThan:\n                <<: *__func\n                id: \"lessThan\"\n                args:\n                    - [ \"Timestamp\" ]\n                type: *BoolType\n                template: *TimestampLessThanTemplate\n                argsTemplate: *TimestampLessThanArgsTemplate\n            lessThanOrEqual:\n                <<: *__func\n                id: \"lessThanOrEqual\"\n                args:\n                    - [ \"Timestamp\" ]\n                type: *BoolType\n                template: *TimestampLessThanOrEqualTemplate\n                argsTemplate: *TimestampLessThanOrEqualArgsTemplate\n    BSONSymbol: &SymbolType\n        <<: *__type\n        id: \"BSONSymbol\"\n        code: 111\n        type: *ObjectType\n        attr:\n            valueOf:\n                <<: *__func\n                id: \"valueOf\"\n                type: *StringType\n                template: *SymbolValueOfTemplate\n                argsTemplate: *SymbolValueOfArgsTemplate\n            toString:\n                <<: *__func\n                id: \"toString\"\n                type: *StringType\n                template: *SymbolToStringTemplate\n                argsTemplate: *SymbolToStringArgsTemplate\n            inspect:\n                <<: *__func\n                id: \"inspect\"\n                type: *StringType\n                template: *SymbolInspectTemplate\n                argsTemplate: *SymbolInspectArgsTemplate\n    Decimal128: &Decimal128Type\n        <<: *__type\n        id: \"Decimal128\"\n        code: 112\n        type: *ObjectType\n        attr:\n            toString:\n                <<: *__func\n                id: \"toString\"\n                type: *StringType\n                template: *Decimal128ToStringTemplate\n                argsTemplate: *Decimal128ToStringArgsTemplate\nNativeTypes:\n    Date: &DateType\n        <<: *__type\n        id: \"Date\"\n        code: 200\n        type: *ObjectType\n        attr: {} # TODO: no built-in date methods added yet\nBsonSymbols:\n    Code: &CodeSymbol\n        id: \"CodeFromJS\"\n        code: 100\n        callable: *constructor\n        args:\n            - [ *StringType ]\n            - [ *ObjectType, null ]\n        type: *CodeType\n        attr: {}\n        template: *CodeSymbolTemplate\n        argsTemplate: *CodeSymbolArgsTemplate\n    ObjectId: &ObjectIdSymbol\n        id: \"ObjectId\"\n        code: 101\n        callable: *constructor\n        args:\n            - [ *StringType, *NumericType, null ]\n        type: *ObjectIdType\n        attr:\n            createFromHexString:\n                <<: *__func\n                id: \"createFromHexString\"\n                args:\n                    - [ *StringType ]\n                type: *ObjectIdType\n                template: *ObjectIdCreateFromHexStringTemplate\n                argsTemplate: *ObjectIdCreateFromHexStringArgsTemplate\n            createFromTime:\n                <<: *__func\n                id: \"ObjectIdCreateFromTime\"\n                args:\n                    - [ *NumericType ]\n                type: *ObjectIdType\n                template: *ObjectIdCreateFromTimeTemplate\n                argsTemplate: *ObjectIdCreateFromTimeArgsTemplate\n            isValid:\n                <<: *__func\n                id: \"isValid\"\n                args:\n                    - [ *StringType ]\n                type: *BoolType\n                template: *ObjectIdIsValidTemplate\n                argsTemplate: *ObjectIdIsValidArgsTemplate\n        template: *ObjectIdSymbolTemplate\n        argsTemplate: *ObjectIdSymbolArgsTemplate\n    Binary: &BinarySymbol\n        id: \"Binary\"\n        code: 102\n        callable: *constructor\n        args:\n            - [ *StringType, *NumericType, *ObjectType ]\n            - [ *NumericType, null ]\n        type: *BinaryType\n        attr:\n            SUBTYPE_DEFAULT:\n                id: \"SUBTYPE_DEFAULT\"\n                callable: *var\n                args: null\n                type: *IntegerType\n                template: *BinarySymbolSubtypeDefaultTemplate\n            SUBTYPE_FUNCTION:\n                id: \"SUBTYPE_FUNCTION\"\n                callable: *var\n                args: null\n                type: *IntegerType\n                template: *BinarySymbolSubtypeFunctionTemplate\n            SUBTYPE_BYTE_ARRAY:\n                id: \"SUBTYPE_BYTE_ARRAY\"\n                callable: *var\n                args: null\n                type: *IntegerType\n                template: *BinarySymbolSubtypeByteArrayTemplate\n            SUBTYPE_UUID_OLD:\n                id: \"SUBTYPE_UUID_OLD\"\n                callable: *var\n                args: null\n                type: *IntegerType\n                template: *BinarySymbolSubtypeUuidOldTemplate\n            SUBTYPE_UUID:\n                id: \"SUBTYPE_UUID\"\n                callable: *var\n                args: null\n                type: *IntegerType\n                template: *BinarySymbolSubtypeUuidTemplate\n            SUBTYPE_MD5:\n                id: \"SUBTYPE_MD5\"\n                callable: *var\n                args: null\n                type: *IntegerType\n                template: *BinarySymbolSubtypeMd5Template\n            SUBTYPE_USER_DEFINED:\n                id: \"SUBTYPE_USER_DEFINED\"\n                callable: *var\n                args: null\n                type: *IntegerType\n                template: *BinarySymbolSubtypeUserDefinedTemplate\n        template: *BinarySymbolTemplate\n        argsTemplate: *BinarySymbolArgsTemplate\n    DBRef:\n        id: \"DBRef\"\n        code: 103\n        callable: *constructor\n        args:\n            - [ *StringType ]\n            - [ *ObjectIdType ]\n            - [ *StringType, null ]\n        type: *DBRefType\n        attr: {}\n        template: *DBRefSymbolTemplate\n        argsTemplate: *DBRefSymbolArgsTemplate\n    Double:\n        id: \"Double\"\n        code: 104\n        callable: *constructor\n        args:\n            - [ *NumericType, *StringType ]\n        type: *DoubleType\n        attr: {}\n        template: *DoubleSymbolTemplate\n        argsTemplate: *DoubleSymbolArgsTemplate\n    Int32:\n        id: \"Int32\"\n        code: 105\n        callable: *constructor\n        args:\n            - [ *NumericType, *StringType ]\n        type: *Int32Type\n        attr: {}\n        template: *Int32SymbolTemplate\n        argsTemplate: *Int32SymbolArgsTemplate\n    Long:\n        id: \"Long\"\n        code: 106\n        callable: *constructor\n        args:\n            - [ *IntegerType ]\n            - [ *IntegerType ]\n        type: *LongType\n        attr:\n            MAX_VALUE:\n                id: \"MAX_VALUE\"\n                callable: *var\n                args: null\n                type: *LongType\n                attr: {}\n                template: *LongSymbolMaxTemplate\n                argsTemplate: *LongSymbolMaxArgsTemplate\n            MIN_VALUE:\n                id: \"MIN_VALUE\"\n                callable: *var\n                args: null\n                type: *LongType\n                attr: {}\n                template: *LongSymbolMinTemplate\n                argsTemplate: *LongSymbolMinArgsTemplate\n            ZERO:\n                id: \"ZERO\"\n                callable: *var\n                args: null\n                type: *LongType\n                attr: {}\n                template: *LongSymbolZeroTemplate\n                argsTemplate: *LongSymbolZeroArgsTemplate\n            ONE:\n                id: \"ONE\"\n                callable: *var\n                args: null\n                type: *LongType\n                attr: {}\n                template: *LongSymbolOneTemplate\n                argsTemplate: *LongSymbolOneArgsTemplate\n            NEG_ONE:\n                id: \"NEG_ONE\"\n                callable: *var\n                args: null\n                type: *LongType\n                attr: {}\n                template: *LongSymbolNegOneTemplate\n                argsTemplate: *LongSymbolNegOneArgsTemplate\n            fromBits:\n                id: \"LongfromBits\" # Needs process method\n                callable: *func\n                args:\n                    - [ *IntegerType ]\n                    - [ *IntegerType ]\n                type: *LongType\n                attr: {}\n                template: *LongSymbolFromBitsTemplate\n                argsTemplate: *LongSymbolFromBitsArgsTemplate\n            fromInt:\n                id: \"fromInt\"\n                callable: *func\n                args:\n                    - [ *IntegerType ]\n                type: *LongType\n                attr: {}\n                template: *LongSymbolFromIntTemplate\n                argsTemplate: *LongSymbolFromIntArgsTemplate\n            fromNumber:\n                id: \"fromNumber\"\n                callable: *func\n                args:\n                    - [ *NumericType ]\n                type: *LongType\n                attr: {}\n                template: *LongSymbolFromNumberTemplate\n                argsTemplate: *LongSymbolFromNumberArgsTemplate\n            fromString:\n                id: \"fromString\"\n                callable: *func\n                args:\n                    - [ *StringType ]\n                    - [ *IntegerType, null ]\n                type: *LongType\n                attr: {}\n                template: *LongSymbolFromStringTemplate\n                argsTemplate: *LongSymbolFromStringArgsTemplate\n        template: *LongSymbolTemplate\n        argsTemplate: *LongSymbolArgsTemplate\n    MinKey:\n        id: \"MinKey\"\n        code: 107\n        callable: *constructor\n        args: []\n        type: *MinKeyType\n        attr: {}\n        template: *MinKeySymbolTemplate\n        argsTemplate: *MinKeySymbolArgsTemplate\n    MaxKey:\n        id: \"MaxKey\"\n        code: 108\n        callable: *constructor\n        args: []\n        type: *MaxKeyType\n        attr: {}\n        template: *MaxKeySymbolTemplate\n        argsTemplate: *MaxKeySymbolArgsTemplate\n    Timestamp:\n        id: \"Timestamp\"\n        code: 110\n        callable: *constructor\n        args:\n            - [ *IntegerType ]\n            - [ *IntegerType ]\n        type: *TimestampType\n        attr: {} #TODO: add fromInt, fromNumber, fromBits, fromString\n        template: *TimestampSymbolTemplate\n        argsTemplate: *TimestampSymbolArgsTemplate\n    BSONSymbol:\n        id: \"BSONSymbol\"\n        code: 111\n        callable: *constructor\n        args:\n            - [ *StringType ]\n        type: *SymbolType\n        attr: {}\n        template: *SymbolSymbolTemplate\n        argsTemplate: *SymbolSymbolArgsTemplate\n    BSONRegExp:\n        id: \"BSONRegExp\"\n        code: 109\n        callable: *constructor\n        args:\n            - [ *StringType ]\n            - [ *StringType, null ]\n        type: *BSONRegExpType\n        attr: {}\n        template: *BSONRegExpSymbolTemplate\n        argsTemplate: *BSONRegExpSymbolArgsTemplate\n    Decimal128:\n        id: \"Decimal128\"\n        code: 112\n        callable: *constructor\n        args:\n            - [ *ObjectType ]\n        type: *Decimal128Type\n        attr:\n            fromString:\n                id: \"fromString\"\n                callable: *func\n                args:\n                    - [ *StringType ]\n                type: *Decimal128Type\n                attr: {}\n                template: *Decimal128SymbolFromStringTemplate\n                argsTemplate: *Decimal128SymbolFromStringArgsTemplate\n        template: *Decimal128SymbolTemplate\n        argsTemplate: *Decimal128SymbolArgsTemplate\n\nNativeSymbols:\n    Number:\n        id: \"Number\"\n        code: 2\n        callable: *constructor\n        args:\n            - [ *IntegerType, *StringType ]\n        type: *NumericType\n        attr: {} # TODO: no built-in number funcs added yet\n        template: *NumberSymbolTemplate\n        argsTemplate: *NumberSymbolArgsTemplate\n    Date: # Needs process method\n        id: \"Date\"\n        code: 200\n        callable: *constructor\n        args:\n            - [ *StringType, *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n        type: *DateType\n        attr: # TODO: add more date funcs?\n            now:\n                id: \"now\"\n                code: 200.1\n                callable: *func\n                args: []\n                type: *DateType\n                attr: {}\n                template: *DateSymbolNowTemplate\n                argsTemplate: *DateSymbolNowArgsTemplate\n        template: *DateSymbolTemplate\n        argsTemplate: *DateSymbolArgsTemplate\n    RegExp: # Needs process method\n        id: \"RegExp\"\n        code: 8\n        callable: *constructor\n        args:\n            - [ *StringType, *RegexType ]\n            - [ *StringType, null ]\n        type: *RegexType\n        attr: {}\n        template: *RegExpSymbolTemplate\n        argsTemplate: *RegExpSymbolArgsTemplate\n"},92650:e=>{e.exports="SymbolTypes:\n    VAR: &var 0\n    CONSTRUCTOR: &constructor 1\n    FUNC: &func 2\n# Internal patterns to save typing\n__type: &__type\n    id: null\n    callable: *var\n    args: null\n    type: null\n    attr: {}\n    template: null\n    argsTemplate: null\n__func: &__func\n    callable: *func\n    args: []\n    attr: {}\n    template: null\n    argsTemplate: null\n\n# Java Templates\nTemplates:\n    # Misc\n    RegexFlags: &RegexFlags\n        i: 'i'\n        m: 'm'\n        u: 'u'\n        y: ''\n        g: ''\n    BSONRegexFlags: &BSONRegexFlags\n        i: 'i'\n        m: 'm'\n        x: 'x'\n        s: 's'\n        l: 'l'\n        u: 'u'\n    # Syntax\n    DriverTemplate: &DriverTemplate !!js/function >\n        (spec) => {\n            const comment = `/*\n         * Requires the MongoDB Java Driver.\n         * https://mongodb.github.io/mongo-java-driver`;\n\n            const str = spec.options.uri;\n            let newStr = str;\n            if (\n                (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                newStr = str.substr(1, str.length - 2);\n            }\n            const uri = `\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\"`;\n\n\n\n            const connection = `MongoClient mongoClient = new MongoClient(\n            new MongoClientURI(\n                ${uri}\n            )\n        );\n\n        MongoDatabase database = mongoClient.getDatabase(\"${spec.options.database}\");\n\n        MongoCollection<Document> collection = database.getCollection(\"${spec.options.collection}\");`;\n\n\n            if ('aggregation' in spec) {\n                return `${comment}\\n */\\n\\n${connection}\n\n        FindIterable<Document> result = collection.aggregate(${spec.aggregation});`;\n            }\n\n            let warning = '';\n            const defs = Object.keys(spec).reduce((s, k) => {\n                if (k === 'options' || k === 'maxTimeMS' || k === 'skip' || k === 'limit' || k === 'collation') return s;\n                if (s === '') return `Bson ${k} = ${spec[k]};`;\n                return `${s}\n        Bson ${k} = ${spec[k]};`;\n            }, '');\n\n            const result = Object.keys(spec).reduce((s, k) => {\n                switch (k) {\n                    case 'options':\n                    case 'filter':\n                        return s;\n                    case 'maxTimeMS':\n                        return `${s}\n            .maxTime(${spec[k]}, TimeUnit.MICROSECONDS)`;\n                    case 'skip':\n                    case 'limit':\n                        return `${s}\n            .${k}((int)${spec[k]})`;\n                    case 'project':\n                        return `${s}\n            .projection(project)`;\n                    case 'collation':\n                        warning = '\\n *\\n * Warning: translating collation to Java not yet supported, so will be ignored';\n                        return s;\n                    default:\n                        return `${s}\n            .${k}(${k})`;\n                }\n            }, 'FindIterable<Document> result = collection.find(filter)');\n\n            return `${comment}${warning}\\n */\\n\\n${defs}\n\n        ${connection}\n\n        ${result};`;\n        }\n    EqualitySyntaxTemplate: &EqualitySyntaxTemplate !!js/function >\n        (lhs, op, rhs) => {\n            if (op.includes('!') || op.includes('not')) {\n                return `${lhs} != ${rhs}`;\n            } else if (op === '==' || op === '===' || op === 'is') {\n                return `${lhs} == ${rhs}`;\n            }\n            return `${lhs} ${op} ${rhs}`;\n        }\n    InSyntaxTemplate: &InSyntaxTemplate !!js/function >\n        (lhs, op, rhs) => {\n            let str = '';\n            if (op.includes('!') || op.includes('not')) {\n                str = '!';\n            }\n            return `${str}${rhs}.contains(${lhs})`\n        }\n    AndSyntaxTemplate: &AndSyntaxTemplate !!js/function >\n        (args) => {\n            return args.join(' && ');\n        }\n    OrSyntaxTemplate: &OrSyntaxTemplate !!js/function >\n        (args) => {\n            return args.join(' || ');\n        }\n    NotSyntaxTemplate: &NotSyntaxTemplate !!js/function >\n        (arg) => {\n            return `!${arg}`;\n        }\n    UnarySyntaxTemplate: &UnarySyntaxTemplate null\n    BinarySyntaxTemplate: &BinarySyntaxTemplate !!js/function >\n        (args) => {\n            return args.reduce((s, op, i, arr) => {\n                if (i % 2 === 0) {\n                    return s;\n                }\n                const rhs = arr[i + 1];\n                switch(op) {\n                    case '//':\n                        return `floor(${s})`;\n                    case '**':\n                        return `pow(${s}, ${rhs})`;\n                    default:\n                        return `${s} ${op} ${rhs}`;\n                }\n            }, args[0]);\n        }\n    ParensSyntaxTemplate: &ParensSyntaxTemplate null\n    EosSyntaxTemplate: &EosSyntaxTemplate null\n    EofSyntaxTemplate: &EofSyntaxTemplate null\n    NewTemplate: &NewSyntaxTemplate !!js/function >\n        (expr, skip, code) => {\n            // Add codes of classes that don't need new.\n            // Currently: Decimal128/NumberDecimal, Long/NumberLong, Double, Int32, Number, regex, Date\n            noNew = [112, 106, 104, 105, 2, 8, 200];\n            if (skip || (code && noNew.indexOf(code) !== -1)) {\n                return expr;\n            }\n            return `new ${expr}`;\n        }\n    # BSON Object Type templates\n    CodeTypeTemplate: &CodeTypeTemplate null\n    StringTypeTemplate: &StringTypeTemplate !!js/function >\n        (str) => {\n          let newStr = str;\n          if (\n            (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n            (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n            newStr = str.substr(1, str.length - 2);\n          }\n          return `\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\"`;\n        }\n    RegexTypeTemplate: &RegexTypeTemplate !!js/function >\n        (pattern, flags) => {\n            flags = flags === '' ? '' : `(?${flags})`;\n            // Double escape characters except for slashes\n            const escaped = pattern.replace(/\\\\/, '\\\\\\\\');\n\n            // Double-quote stringify\n            const str = escaped + flags;\n            let newStr = str;\n            if (\n                (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                    newStr = str.substr(1, str.length - 2);\n            }\n            return `Pattern.compile(\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\")`;\n        }\n    BoolTypeTemplate: &BoolTypeTemplate !!js/function >\n        (literal) => {\n            return literal.toLowerCase();\n        }\n    IntegerTypeTemplate: &IntegerTypeTemplate null\n    DecimalTypeTemplate: &DecimalTypeTemplate !!js/function >\n        (literal, type) => {\n            if (type === '_integer' || type === '_long' || type === '_decimal') {\n                return `${literal}d`;\n            }\n            return `(double) ${literal}`;\n        }\n    LongBasicTypeTemplate: &LongBasicTypeTemplate !!js/function >\n        (literal, type) => {\n            if (type === '_integer' || type === '_long') {\n                return `${literal}L`;\n            }\n            return `new Long(${literal})`;\n        }\n    HexTypeTemplate: &HexTypeTemplate null # TODO\n    OctalTypeTemplate: &OctalTypeTemplate !!js/function >\n        (literal, type) => {\n            if ((literal.charAt(0) === '0' && literal.charAt(1) === '0') ||\n                (literal.charAt(0) === '0' && (literal.charAt(1) === 'o' || literal.charAt(1) === 'O'))) {\n              return `0${literal.substr(2, literal.length - 1)}`;\n            }\n            return literal;\n        }\n    NumericTypeTemplate: &NumericTypeTemplate null\n    ArrayTypeTemplate: &ArrayTypeTemplate !!js/function >\n        (literal, depth) => {\n            depth++;\n            // TODO: figure out how to best do depth in an array and where to\n            // insert and indent\n            const indent = '\\n' + '    '.repeat(depth);\n            // have an indent on every ', new Document' in an array not\n            // entirely perfect, but at least makes this more readable/also\n            // compiles\n            const arr = literal.split(', new').join(`, ${indent}new`)\n\n            return `Arrays.asList(${arr})`;\n        }\n    ArrayTypeArgsTemplate: &ArrayTypeArgsTemplate null\n    NullTypeTemplate: &NullTypeTemplate !!js/function >\n        () => {\n            return 'new BsonNull()';\n        }\n    UndefinedTypeTemplate: &UndefinedTypeTemplate !!js/function >\n        () => {\n            return 'new BsonUndefined()';\n        }\n    ObjectTypeTemplate: &ObjectTypeTemplate !!js/function >\n        (literal, depth) => {\n\n            if (literal === '') {\n                return `new Document()`;\n            }\n            return literal;\n        }\n    ObjectTypeArgsTemplate: &ObjectTypeArgsTemplate !!js/function >\n        (args, depth) => {\n            if (args.length === 0) {\n                return 'new Document()';\n            }\n            depth++;\n            const indent = '\\n' + '    '.repeat(depth);\n            const doubleStringify = (str) => {\n                let newStr = str;\n                if (\n                  (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                  (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                    newStr = str.substr(1, str.length - 2);\n                }\n                return `\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\"`;\n            }\n            const start = `new Document(${doubleStringify(args[0][0])}, ${args[0][1]})`;\n\n            args = args.slice(1);\n            const result = args.reduce((str, pair) => {\n                return `${str}${indent}.append(${doubleStringify(pair[0])}, ${pair[1]})`;\n            }, start);\n\n            return `${result}`;\n        }\n    DoubleTypeTemplate: &DoubleTypeTemplate !!js/function >\n        (literal, type) => {\n            if (type === '_integer' || type === '_long' || type === '_decimal') {\n                return `${literal}d`;\n            }\n            return `(double) ${literal}`;\n        }\n    DoubleTypeArgsTemplate: &DoubleTypeArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongTypeTemplate: &LongTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongTypeArgsTemplate: &LongSymbolArgsTemplate null\n    # BSON Object Method templates\n    ObjectIdToStringTemplate: &ObjectIdToStringTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.toHexString()`;\n        }\n    ObjectIdToStringArgsTemplate: &ObjectIdToStringArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    ObjectIdEqualsTemplate: &ObjectIdEqualsTemplate null\n    ObjectIdEqualsArgsTemplate: &ObjectIdEqualsArgsTemplate null\n    ObjectIdGetTimestampTemplate: &ObjectIdGetTimestampTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getTimestamp()`;\n        }\n    ObjectIdGetTimestampArgsTemplate: &ObjectIdGetTimestampArgsTemplate !!js/function >\n            () => {\n                return '';\n            }\n    CodeCodeTemplate: &CodeCodeTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getCode()`;\n        }\n    CodeCodeArgsTemplate: &CodeCodeArgsTemplate null\n    CodeScopeTemplate: &CodeScopeTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getScope()`;\n        }\n    CodeScopeArgsTemplate: &CodeScopeArgsTemplate null\n    BinaryValueTemplate: &BinaryValueTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getData`;\n        }\n    BinaryValueArgsTemplate: &BinaryValueArgsTemplate null\n    BinaryLengthTemplate: &BinaryLengthTemplate null\n    BinaryLengthArgsTemplate: &BinaryLengthArgsTemplate null\n    BinaryToStringTemplate: &BinaryToStringTemplate null\n    BinaryToStringArgsTemplate: &BinaryToStringArgsTemplate null\n    BinarySubtypeTemplate: &BinarySubtypeTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getType()`;\n        }\n    BinarySubtypeArgsTemplate: &BinarySubtypeArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    DBRefGetDBTemplate: &DBRefGetDBTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getDatabaseName()`;\n        }\n    DBRefGetDBArgsTemplate: &DBRefGetDBArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    DBRefGetCollectionTemplate: &DBRefGetCollectionTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getCollectionName()`;\n        }\n    DBRefGetCollectionArgsTemplate: &DBRefGetCollectionArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    DBRefGetIdTemplate: &DBRefGetIdTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getId()`;\n        }\n    DBRefGetIdArgsTemplate: &DBRefGetIdArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongEqualsTemplate: &LongEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} ==`;\n        }\n    LongEqualsArgsTemplate: &LongEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongToStringTemplate: &LongToStringTemplate !!js/function >\n        (lhs) => {\n            return lhs;\n        }\n    LongToStringArgsTemplate: &LongToStringArgsTemplate null\n    LongToIntTemplate: &LongToIntTemplate !!js/function >\n        (lhs) => {\n            return `(int) ${lhs}`;\n        }\n    LongToIntArgsTemplate: &LongToIntArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongToNumberTemplate: &LongToNumberTemplate !!js/function >\n        (lhs) => {\n            return `(double) ${lhs}`;\n        }\n    LongToNumberArgsTemplate: &LongToNumberArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongAddTemplate: &LongAddTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} +`;\n        }\n    LongAddArgsTemplate: &LongAddArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongSubtractTemplate: &LongSubtractTemplate !!js/function >\n        (arg) => {\n            return `${arg} -`;\n        }\n    LongSubtractArgsTemplate: &LongSubtractArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongMultiplyTemplate: &LongMultiplyTemplate !!js/function >\n        (arg) => {\n            return `${arg} *`;\n        }\n    LongMultiplyArgsTemplate: &LongMultiplyArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongDivTemplate: &LongDivTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} /`;\n        }\n    LongDivArgsTemplate: &LongDivArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongModuloTemplate: &LongModuloTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} %`;\n        }\n    LongModuloArgsTemplate: &LongModuloArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongAndTemplate: &LongAndTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} &`;\n        }\n    LongAndArgsTemplate: &LongAndArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongOrTemplate: &LongOrTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} |`;\n        }\n    LongOrArgsTemplate: &LongOrArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongXorTemplate: &LongXorTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} ^`;\n        }\n    LongXorArgsTemplate: &LongXorArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongShiftLeftTemplate: &LongShiftLeftTemplate !!js/function >\n        () => {\n            return 'Long.rotateLeft';\n        }\n    LongShiftLeftArgsTemplate: &LongShiftLeftArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `(${lhs}, ${arg})`;\n        }\n    LongShiftRightTemplate: &LongShiftRightTemplate !!js/function >\n        () => {\n            return 'Long.rotateRight';\n        }\n    LongShiftRightArgsTemplate: &LongShiftRightArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `(${lhs}, ${arg})`;\n        }\n    LongCompareTemplate: &LongCompareTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} -`;\n        }\n    LongCompareArgsTemplate: &LongCompareArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongIsOddTemplate: &LongIsOddTemplate !!js/function >\n        (lhs) => {\n            return `(${lhs} % 2) == 1`;\n        }\n    LongIsOddArgsTemplate: &LongIsOddArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongIsZeroTemplate: &LongIsZeroTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} == 0`;\n        }\n    LongIsZeroArgsTemplate: &LongIsZeroArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongIsNegativeTemplate: &LongIsNegativeTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} < 0`;\n        }\n    LongIsNegativeArgsTemplate: &LongIsNegativeArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongNegateTemplate: &LongNegateTemplate !!js/function >\n        () => {\n            return '-';\n        }\n    LongNegateArgsTemplate: &LongNegateArgsTemplate !!js/function >\n        (lhs) => {\n            return lhs;\n        }\n    LongNotTemplate: &LongNotTemplate !!js/function >\n        () => {\n            return '~';\n        }\n    LongNotArgsTemplate: &LongNotArgsTemplate !!js/function >\n        (lhs) => {\n            return lhs;\n        }\n    LongNotEqualsTemplate: &LongNotEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} !=`;\n        }\n    LongNotEqualsArgsTemplate: &LongNotEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongGreaterThanTemplate: &LongGreaterThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >`;\n        }\n    LongGreaterThanArgsTemplate: &LongGreaterThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongGreaterThanOrEqualTemplate: &LongGreaterThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >=`;\n        }\n    LongGreaterThanOrEqualArgsTemplate: &LongGreaterThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongLessThanTemplate: &LongLessThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <`;\n        }\n    LongLessThanArgsTemplate: &LongLessThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongLessThanOrEqualTemplate: &LongLessThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <=`;\n        }\n    LongLessThanOrEqualArgsTemplate: &LongLessThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongFloatApproxTemplate: &LongFloatApproxTemplate !!js/function >\n        (lhs) => {\n            return `(float) ${lhs}`;\n        }\n    LongTopTemplate: &LongTopTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >> 32`;\n        }\n    LongBottomTemplate: &LongBottomTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} & 0x0000ffff`;\n        }\n    TimestampToStringTemplate: &TimestampToStringTemplate null\n    TimestampToStringArgsTemplate: &TimestampToStringArgsTemplate null\n    TimestampEqualsTemplate: &TimestampEqualsTemplate null\n    TimestampEqualsArgsTemplate: &TimestampEqualsArgsTemplate null\n    TimestampGetLowBitsTemplate: &TimestampGetLowBitsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getTime`;\n        }\n    TimestampGetLowBitsArgsTemplate: &TimestampGetLowBitsArgsTemplate null\n    TimestampGetHighBitsTemplate: &TimestampGetHighBitsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getInc`;\n        }\n    TimestampGetHighBitsArgsTemplate: &TimestampGetHighBitsArgsTemplate null\n    TimestampTTemplate: &TimestampTTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getTime()`;\n        }\n    TimestampITemplate: &TimestampITemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getInc()`;\n        }\n    TimestampAsDateTemplate: &TimestampAsDateTemplate !!js/function >\n        (lhs) => {\n            return `new java.util.Date(${lhs}.getTime())`;\n        }\n    TimestampAsDateArgsTemplate: &TimestampAsDateArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    TimestampCompareTemplate: &TimestampCompareTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.compareTo`;\n        }\n    TimestampCompareArgsTemplate: &TimestampCompareArgsTemplate null\n    TimestampNotEqualsTemplate: &TimestampNotEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.compareTo`;\n        }\n    TimestampNotEqualsArgsTemplate: &TimestampNotEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `(${arg}) != 0`;\n        }\n    TimestampGreaterThanTemplate: &TimestampGreaterThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.compareTo`;\n        }\n    TimestampGreaterThanArgsTemplate: &TimestampGreaterThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `(${arg}) > 0`;\n        }\n    TimestampGreaterThanOrEqualTemplate: &TimestampGreaterThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.compareTo`;\n        }\n    TimestampGreaterThanOrEqualArgsTemplate: &TimestampGreaterThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `(${arg}) >= 0`;\n        }\n    TimestampLessThanTemplate: &TimestampLessThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.compareTo`;\n        }\n    TimestampLessThanArgsTemplate: &TimestampLessThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `(${arg}) < 0`;\n        }\n    TimestampLessThanOrEqualTemplate: &TimestampLessThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.compareTo`;\n        }\n    TimestampLessThanOrEqualArgsTemplate: &TimestampLessThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `(${arg}) <= 0`;\n        }\n    SymbolValueOfTemplate: &SymbolValueOfTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getSymbol`;\n        }\n    SymbolValueOfArgsTemplate: &SymbolValueOfArgsTemplate null\n    SymbolInspectTemplate: &SymbolInspectTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getSymbol`;\n        }\n    SymbolInspectArgsTemplate: &SymbolInspectArgsTemplate null\n    SymbolToStringTemplate: &SymbolToStringTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.toString`;\n        }\n    SymbolToStringArgsTemplate: &SymbolToStringArgsTemplate null\n    # Symbol Templates\n    CodeSymbolTemplate: &CodeSymbolTemplate  !!js/function > # Also has process method\n        () => {\n            return 'Code';\n        }\n    CodeSymbolArgsTemplate: &CodeSymbolArgsTemplate !!js/function > # Also has process method\n        (lhs, code, scope) => {\n          // Double quote stringify\n          let newStr = code === undefined ? '' : code;\n          const str = newStr;\n          if (\n            (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n            (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n            newStr = str.substr(1, str.length - 2);\n          }\n          code = `\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\"`;\n          return (scope === undefined) ? `(${code})` : `WithScope(${code}, ${scope})`;\n        }\n    ObjectIdSymbolTemplate: &ObjectIdSymbolTemplate null\n    ObjectIdSymbolArgsTemplate: &ObjectIdSymbolArgsTemplate !!js/function >\n        (lhs, str) => {\n          if (!str || str.length === 0) {\n            return '()';\n          }\n          let newStr = str;\n          if (\n            (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n            (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n            newStr = str.substr(1, str.length - 2);\n          }\n          return `(\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\")`;\n        }\n    BinarySymbolTemplate: &BinarySymbolTemplate null\n    BinarySymbolArgsTemplate: &BinarySymbolArgsTemplate !!js/function >\n        (lhs, bytes, type) => {\n            const str = bytes;\n            let newStr = str;\n            if (\n              (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n              (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                newStr = str.substr(1, str.length - 2);\n            }\n            bytes = `\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\"`;\n\n            if (type === null) {\n                return `(${bytes}.getBytes(\"UTF-8\"))`;\n            }\n            return `(${type}, ${bytes}.getBytes(\"UTF-8\"))`;\n        }\n    BinarySymbolSubtypeDefaultTemplate: &BinarySymbolSubtypeDefaultTemplate !!js/function >\n        () => {\n            return 'BsonBinarySubType.BINARY';\n        }\n    BinarySymbolSubtypeFunctionTemplate: &BinarySymbolSubtypeFunctionTemplate !!js/function >\n        () => {\n            return 'BsonBinarySubType.FUNCTION';\n        }\n    BinarySymbolSubtypeByteArrayTemplate: &BinarySymbolSubtypeByteArrayTemplate !!js/function >\n        () => {\n            return 'BsonBinarySubType.BINARY';\n        }\n    BinarySymbolSubtypeUuidOldTemplate: &BinarySymbolSubtypeUuidOldTemplate !!js/function >\n        () => {\n            return 'BsonBinarySubType.UUID_LEGACY';\n        }\n    BinarySymbolSubtypeUuidTemplate: &BinarySymbolSubtypeUuidTemplate !!js/function >\n        () => {\n            return 'BsonBinarySubType.UUID_STANDARD';\n        }\n    BinarySymbolSubtypeMd5Template: &BinarySymbolSubtypeMd5Template !!js/function >\n        () => {\n            return 'BsonBinarySubType.MD5';\n        }\n    BinarySymbolSubtypeUserDefinedTemplate: &BinarySymbolSubtypeUserDefinedTemplate !!js/function >\n        () => {\n            return 'BsonBinarySubType.USER_DEFINED';\n        }\n    DBRefSymbolTemplate: &DBRefSymbolTemplate null\n    DBRefSymbolArgsTemplate: &DBRefSymbolArgsTemplate !!js/function >\n        (lhs, coll, id, db) => {\n            const dbstr = db === undefined ? '' : `${db}, `;\n            return `(${dbstr}${coll}, ${id})`;\n        }\n    DoubleSymbolTemplate: &DoubleSymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    DoubleSymbolArgsTemplate: &DoubleSymbolArgsTemplate !!js/function >\n        (lhs, arg, type) => {\n            arg = arg === undefined ? 0 : arg;\n            if (type === '_string') {\n                return `Double.parseDouble(${arg})`;\n            }\n            if (type === '_integer' || type === '_long' || type === '_double' || type === '_decimal') {\n                if (arg.includes('L') || arg.includes('d')) {\n                    return `${arg.substr(0, arg.length - 1)}d`;\n                }\n                return `${arg}d`;\n            }\n            return `(double) ${arg}`;\n        }\n    Int32SymbolTemplate: &Int32SymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    Int32SymbolArgsTemplate: &Int32SymbolArgsTemplate !!js/function >\n        (lhs, arg, type) => {\n            arg = arg === undefined ? 0 : arg;\n            if (type === '_string') {\n                return `Integer.parseInt(${arg})`;\n            }\n            if (type === '_integer' || type === '_long') {\n                if (arg.includes('L') || arg.includes('d')) {\n                    return arg.substr(0, arg.length - 1);\n                }\n                return arg;\n            }\n            return `(int) ${arg}`;\n        }\n    LongSymbolTemplate: &LongSymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongSymbolArgsTemplate: &LongSymbolArgsTemplate !!js/function >\n        (lhs, arg, type) => {\n            arg = arg === undefined ? 0 : arg;\n            if (type === '_string') {\n                return `Long.parseLong(${arg})`;\n            }\n            if (type === '_integer' || type === '_long') {\n                if (arg.includes('d') || arg.includes('L')) {\n                    return `${arg.substr(0, arg.length - 1)}L`;\n                }\n                return `${arg}L`;\n            }\n            return `new Long(${arg})`;\n        }\n    LongSymbolMaxTemplate: &LongSymbolMaxTemplate !!js/function >\n        () => {\n            return 'Long.MAX_VALUE';\n        }\n    LongSymbolMaxArgsTemplate: &LongSymbolMaxArgsTemplate null\n    LongSymbolMinTemplate: &LongSymbolMinTemplate !!js/function >\n        () => {\n            return 'Long.MIN_VALUE';\n        }\n    LongSymbolMinArgsTemplate: &LongSymbolMinArgsTemplate null\n    LongSymbolZeroTemplate: &LongSymbolZeroTemplate !!js/function >\n        () => {\n            return '0L';\n        }\n    LongSymbolZeroArgsTemplate: &LongSymbolZeroArgsTemplate null\n    LongSymbolOneTemplate: &LongSymbolOneTemplate !!js/function >\n        () => {\n            return '1L';\n        }\n    LongSymbolOneArgsTemplate: &LongSymbolOneArgsTemplate null\n    LongSymbolNegOneTemplate: &LongSymbolNegOneTemplate !!js/function >\n        () => {\n            return '-1L';\n        }\n    LongSymbolNegOneArgsTemplate: &LongSymbolNegOneArgsTemplate null\n    LongSymbolFromBitsTemplate: &LongSymbolFromBitsTemplate !!js/function > # Also has process method\n        () => {\n            return '';\n        }\n    LongSymbolFromBitsArgsTemplate: &LongSymbolFromBitsArgsTemplate null\n    LongSymbolFromIntTemplate: &LongSymbolFromIntTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongSymbolFromIntArgsTemplate: &LongSymbolFromIntArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}L`;\n        }\n    LongSymbolFromNumberTemplate: &LongSymbolFromNumberTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongSymbolFromNumberArgsTemplate: &LongSymbolFromNumberArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}L`;\n        }\n    LongSymbolFromStringTemplate: &LongSymbolFromStringTemplate !!js/function >\n        (lhs) => {\n            return `Long.parseLong`;\n        }\n    LongSymbolFromStringArgsTemplate: &LongSymbolFromStringArgsTemplate null\n    MinKeySymbolTemplate: &MinKeySymbolTemplate null\n    MinKeySymbolArgsTemplate: &MinKeySymbolArgsTemplate null\n    MaxKeySymbolTemplate: &MaxKeySymbolTemplate null\n    MaxKeySymbolArgsTemplate: &MaxKeySymbolArgsTemplate null\n    TimestampSymbolTemplate: &TimestampSymbolTemplate !!js/function >\n        () => {\n            return 'BSONTimestamp';\n        }\n    TimestampSymbolArgsTemplate: &TimestampSymbolArgsTemplate !!js/function >\n        (lhs, arg1, arg2) => {\n            return `(${arg1 === undefined ? 0 : arg1}, ${arg2 === undefined ? 0 : arg2})`;\n        }\n    SymbolSymbolTemplate: &SymbolSymbolTemplate !!js/function >\n        () => {\n            return 'Symbol';\n        }\n    SymbolSymbolArgsTemplate: &SymbolSymbolArgsTemplate null\n    BSONRegExpSymbolTemplate: &BSONRegExpSymbolTemplate !!js/function >\n        () => {\n            return 'BsonRegularExpression';\n        }\n    BSONRegExpSymbolArgsTemplate: &BSONRegExpSymbolArgsTemplate !!js/function >\n        (lhs, pattern, flags) => {\n            const doubleStringify = (str) => {\n                let newStr = str;\n                if (\n                  (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                  (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                    newStr = str.substr(1, str.length - 2);\n                }\n                return `\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\"`;\n            }\n            return `(${doubleStringify(pattern)}${flags ? ', ' + doubleStringify(flags) : ''})`;\n        }\n    Decimal128SymbolTemplate: &Decimal128SymbolTemplate !!js/function >\n        () => {\n            return 'Decimal128';\n        }\n    Decimal128SymbolArgsTemplate: &Decimal128SymbolArgsTemplate !!js/function >\n        (_, str) => { // just stringify\n            let newStr = str;\n            if (\n              (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n              (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                newStr = str.substr(1, str.length - 2);\n            }\n            return `.parse(\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\")`;\n        }\n    Decimal128SymbolFromStringTemplate: &Decimal128SymbolFromStringTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.parse`;\n        }\n    Decimal128SymbolFromStringArgsTemplate: &Decimal128SymbolFromStringArgsTemplate null\n    Decimal128ToStringTemplate: &Decimal128ToStringTemplate null\n    Decimal128ToStringArgsTemplate: &Decimal128ToStringArgsTemplate null\n    # BSON Util Templates\n    ObjectIdCreateFromHexStringTemplate: &ObjectIdCreateFromHexStringTemplate !!js/function >\n        () => {\n            return 'new ObjectId';\n        }\n    ObjectIdCreateFromHexStringArgsTemplate: &ObjectIdCreateFromHexStringArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `(${arg})`;\n        }\n    ObjectIdCreateFromTimeTemplate: &ObjectIdCreateFromTimeTemplate !!js/function >\n        () => {\n            return 'new ObjectId';\n        }\n    ObjectIdCreateFromTimeArgsTemplate: &ObjectIdCreateFromTimeArgsTemplate !!js/function >\n        (lhs, arg, isNumber) => {\n            if (isNumber) {\n                return `(new java.util.Date(${arg.replace(/L$/, '000L')}))`;\n            }\n            return `(${arg})`;\n        }\n    ObjectIdIsValidTemplate: &ObjectIdIsValidTemplate !!js/function >\n        () => {\n            return 'ObjectId.isValid';\n        }\n    ObjectIdIsValidArgsTemplate: &ObjectIdIsValidArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `(${arg})`;\n        }\n    # JS Symbol Templates\n    NumberSymbolTemplate: &NumberSymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    NumberSymbolArgsTemplate: &NumberSymbolArgsTemplate !!js/function >\n        (lhs, arg, type) => {\n            arg = arg === undefined ? 0 : arg;\n            if (type === '_string') {\n                return `Double.parseDouble(${arg})`;\n            }\n            if (type === '_integer' || type === '_long' || type === '_decimal') {\n                if (arg.includes('L') || arg.includes('d')) {\n                    return `${arg.substr(0, arg.length - 1)}d`;\n                }\n                return `${arg}d`;\n            }\n            return `(double) ${arg}`;\n        }\n    DateSymbolTemplate: &DateSymbolTemplate !!js/function >\n        () => {\n            return 'java.util.Date';\n        }\n    DateSymbolArgsTemplate: &DateSymbolArgsTemplate !!js/function >\n        (lhs, date, isString) => {\n            let toStr = (d) => d;\n            if (isString) {\n                toStr = (d) => `new SimpleDateFormat(\"EEE MMMMM dd yyyy HH:mm:ss\").format(${d})`;\n            }\n            if (date === null) {\n                return toStr(`new ${lhs}()`);\n            }\n            return toStr(`new ${lhs}(${date.getTime()}L)`);\n        }\n    DateSymbolNowTemplate: &DateSymbolNowTemplate !!js/function >\n        () => {\n            return '';\n        }\n    DateSymbolNowArgsTemplate: &DateSymbolNowArgsTemplate !!js/function >\n        () => {\n            return 'new java.util.Date().getTime()';\n        }\n    RegExpSymbolTemplate: &RegExpSymbolTemplate !!js/function >\n        () => {\n            return 'Pattern';\n        }\n    RegExpSymbolArgsTemplate: &RegExpSymbolArgsTemplate null\n    ImportTemplate: &ImportTemplate null\n    DriverImportTemplate: &DriverImportTemplate !!js/function >\n        () => {\n        return 'import com.mongodb.MongoClient;\\n' +\n            'import com.mongodb.MongoClientURI;\\n' +\n            'import com.mongodb.client.FindIterable;\\n' +\n            'import com.mongodb.client.MongoCollection;\\n' +\n            'import com.mongodb.client.MongoDatabase;\\n' +\n            'import org.bson.conversions.Bson;\\n' +\n            'import java.util.concurrent.TimeUnit;\\n' +\n            'import org.bson.Document;';\n        }\n    0ImportTemplate: &0ImportTemplate null\n    1ImportTemplate: &1ImportTemplate null\n    2ImportTemplate: &2ImportTemplate null\n    3ImportTemplate: &3ImportTemplate null\n    4ImportTemplate: &4ImportTemplate null\n    5ImportTemplate: &5ImportTemplate null\n    6ImportTemplate: &6ImportTemplate null\n    7ImportTemplate: &7ImportTemplate null\n    8ImportTemplate: &8ImportTemplate !!js/function >\n        () => {\n            return 'import java.util.regex.Pattern;';\n        }\n    9ImportTemplate: &9ImportTemplate !!js/function >\n        () => {\n            return 'import java.util.Arrays;';\n        }\n    10ImportTemplate: &10ImportTemplate !!js/function >\n        () => {\n            return 'import org.bson.Document;';\n        }\n    11ImportTemplate: &11ImportTemplate !!js/function >\n        () => {\n            return 'import org.bson.BsonNull;';\n        }\n    12ImportTemplate: &12ImportTemplate !!js/function >\n        () => {\n            return 'import org.bson.BsonUndefined;';\n        }\n    100ImportTemplate: &100ImportTemplate !!js/function >\n        () => {\n            return 'import org.bson.types.Code;';\n        }\n    113ImportTemplate: &113ImportTemplate !!js/function >\n        () => {\n            return 'import org.bson.types.CodeWithScope;';\n        }\n    101ImportTemplate: &101ImportTemplate !!js/function >\n        () => {\n            return 'import org.bson.types.ObjectId;';\n        }\n    102ImportTemplate: &102ImportTemplate !!js/function >\n        () => {\n            return 'import org.bson.types.Binary;';\n        }\n    103ImportTemplate: &103ImportTemplate !!js/function >\n        () => {\n            return 'import com.mongodb.DBRef;';\n        }\n    104ImportTemplate: &104ImportTemplate null\n    105ImportTemplate: &105ImportTemplate null\n    106ImportTemplate: &106ImportTemplate null\n    107ImportTemplate: &107ImportTemplate !!js/function >\n        () => {\n            return 'import org.bson.types.MinKey;';\n        }\n    108ImportTemplate: &108ImportTemplate !!js/function >\n        () => {\n            return 'import org.bson.types.MaxKey;';\n        }\n    109ImportTemplate: &109ImportTemplate !!js/function >\n        () => {\n            return 'import org.bson.BsonRegularExpression;';\n        }\n    110ImportTemplate: &110ImportTemplate !!js/function >\n        () => {\n            return 'import org.bson.types.BSONTimestamp;';\n        }\n    111ImportTemplate: &111ImportTemplate !!js/function >\n        () => {\n            return 'import org.bson.types.Symbol;';\n        }\n    112ImportTemplate: &112ImportTemplate !!js/function >\n        () => {\n            return 'import org.bson.types.Decimal128;';\n        }\n    114ImportTemplate: &114ImportTemplate !!js/function >\n        () => {\n            return 'import org.bson.BsonBinarySubType;';\n        }\n    200ImportTemplate: &200ImportTemplate null\n    201ImportTemplate: &201ImportTemplate !!js/function >\n        () => {\n            return 'import java.text.SimpleDateFormat;';\n        }\n    300ImportTemplate: &300ImportTemplate !!js/function >\n        (classes) => {\n            return classes\n                .filter((f, i) => (classes.indexOf(f) === i && f !== 'options'))\n                .sort()\n                .map((c) => {\n                    return `import static com.mongodb.client.model.Filters.${c};`;\n                }).join('\\n');\n        }\n    301ImportTemplate: &301ImportTemplate !!js/function >\n        (classes) => {\n            return classes\n                .filter((f, i) => (classes.indexOf(f) === i))\n                .sort()\n                .map((c) => {\n                    return `import static com.mongodb.client.model.Aggregates.${c};`;\n                }).join('\\n');\n        }\n    302ImportTemplate: &302ImportTemplate !!js/function >\n        (classes) => {\n            return classes\n                .filter((f, i) => (classes.indexOf(f) === i))\n                .sort()\n                .map((c) => {\n                    return `import static com.mongodb.client.model.Accumulators.${c};`;\n                }).join('\\n');\n        }\n    303ImportTemplate: &303ImportTemplate !!js/function >\n        (classes) => {\n            return classes\n                .filter((f, i) => (classes.indexOf(f) === i))\n                .sort()\n                .map((c) => {\n                    return `import static com.mongodb.client.model.Projections.${c};`;\n                }).join('\\n');\n        }\n    304ImportTemplate: &304ImportTemplate !!js/function >\n        (classes) => {\n            return classes\n                .filter((f, i) => (classes.indexOf(f) === i))\n                .sort()\n                .map((c) => {\n                    return `import static com.mongodb.client.model.Sorts.${c};`;\n                }).join('\\n');\n        }\n    305ImportTemplate: &305ImportTemplate !!js/function >\n        (classes) => {\n            return classes\n                .filter((f, i) => (classes.indexOf(f) === i))\n                .sort()\n                .map((c) => {\n                    return `import com.mongodb.client.model.geojson.${c};`;\n                }).join('\\n');\n        }\n    306ImportTemplate: &306ImportTemplate !!js/function >\n        (classes) => {\n            return classes\n                .filter((f, i) => (classes.indexOf(f) === i))\n                .sort()\n                .map((c) => {\n                    return `import com.mongodb.client.model.${c};`;\n                }).join('\\n');\n        }\n# Universal types\n# Everything inherits from StringType because we haven't implemented any of them.\nBasicTypes:\n    # Universal basic types\n    _bool: &BoolType\n        <<: *__type\n        id: \"_bool\"\n        code: 0\n        template: *BoolTypeTemplate\n    _integer: &IntegerType\n        <<: *__type\n        id: \"_integer\"\n        code: 1\n        template: *IntegerTypeTemplate\n    _long: &LongBasicType\n        <<: *__type\n        id: \"_long\"\n        code: 2\n        template: *LongBasicTypeTemplate\n    _decimal: &DecimalType\n        <<: *__type\n        id: \"_decimal\"\n        code: 3\n        template: *DecimalTypeTemplate\n    _hex: &HexType\n        <<: *__type\n        id: \"_hex\"\n        code: 4\n        template: *HexTypeTemplate\n    _octal: &OctalType\n        <<: *__type\n        id: \"_octal\"\n        code: 5\n        template: *OctalTypeTemplate\n    _numeric: &NumericType\n        <<: *__type\n        id: \"_numeric\"\n        code: 6\n        template: *NumericTypeTemplate\n    _string: &StringType\n        <<: *__type\n        id: \"_string\"\n        code: 7\n        template: *StringTypeTemplate\n    _regex: &RegexType\n        <<: *__type\n        id: \"_regex\"\n        code: 8\n        template: *RegexTypeTemplate\n    _array: &ArrayType\n        <<: *__type\n        id: \"_array\"\n        code: 9\n        template: *ArrayTypeTemplate\n        argsTemplate: *ArrayTypeArgsTemplate\n    _object: &ObjectType\n        <<: *__type\n        id: \"_object\"\n        code: 10\n        template: *ObjectTypeTemplate\n        argsTemplate: *ObjectTypeArgsTemplate\n    _null: &NullType\n        <<: *__type\n        id: \"_null\"\n        code: 11\n        template: *NullTypeTemplate\n    _undefined: &UndefinedType\n        <<: *__type\n        id: \"_undefined\"\n        code: 12\n        template: *UndefinedTypeTemplate\n\nSyntax:\n    equality:\n        template: *EqualitySyntaxTemplate\n    in:\n        template: *InSyntaxTemplate\n    and:\n        template: *AndSyntaxTemplate\n    or:\n        template: *OrSyntaxTemplate\n    not:\n        template: *NotSyntaxTemplate\n    unary:\n        template: *UnarySyntaxTemplate\n    binary:\n        template: *BinarySyntaxTemplate\n    parens:\n        template: *ParensSyntaxTemplate\n    eos:\n        template: *EosSyntaxTemplate\n    eof:\n        template: *EofSyntaxTemplate\n    # The new template takes in expr, and an optional skip argument and optional\n    # id argument. The skip argument is a boolean that if true then doesn't add\n    # new. The code argument is the symbol code being called. The template will check\n    # if it is an exception, i.e. a type that is a constructor but may not use new.\n    new:\n        template: *NewSyntaxTemplate\n    # The regex flags that change symbols between languages can be defined here.\n    # Flags that aren't defined can be left blank and will be ignored.\n    regexFlags: *RegexFlags\n    bsonRegexFlags: *BSONRegexFlags\n    driver: *DriverTemplate\nImports:\n    import:\n        template: *ImportTemplate\n    driver:\n        template: *DriverImportTemplate\n    0:\n        template: *0ImportTemplate\n    1:\n        template: *1ImportTemplate\n    2:\n        template: *2ImportTemplate\n    3:\n        template: *3ImportTemplate\n    4:\n        template: *4ImportTemplate\n    5:\n        template: *5ImportTemplate\n    6:\n        template: *6ImportTemplate\n    7:\n        template: *7ImportTemplate\n    8:\n        template: *8ImportTemplate\n    9:\n        template: *9ImportTemplate\n    10:\n        template: *10ImportTemplate\n    11:\n        template: *11ImportTemplate\n    12:\n        template: *12ImportTemplate\n    100:\n        template: *100ImportTemplate\n    101:\n        template: *101ImportTemplate\n    102:\n        template: *102ImportTemplate\n    103:\n        template: *103ImportTemplate\n    104:\n        template: *104ImportTemplate\n    105:\n        template: *105ImportTemplate\n    106:\n        template: *106ImportTemplate\n    107:\n        template: *107ImportTemplate\n    108:\n        template: *108ImportTemplate\n    109:\n        template: *109ImportTemplate\n    110:\n        template: *110ImportTemplate\n    111:\n        template: *111ImportTemplate\n    112:\n        template: *112ImportTemplate\n    113:\n        template: *113ImportTemplate\n    114:\n        template: *114ImportTemplate\n    200:\n        template: *200ImportTemplate\n    201:\n        template: *201ImportTemplate\n    300:\n        template: *300ImportTemplate\n    301:\n        template: *301ImportTemplate\n    302:\n        template: *302ImportTemplate\n    303:\n        template: *303ImportTemplate\n    304:\n        template: *304ImportTemplate\n    305:\n        template: *305ImportTemplate\n    306:\n        template: *306ImportTemplate\nBsonTypes:\n    Code: &CodeType\n        <<: *__type\n        id: \"Code\"\n        code: 100\n        type: *ObjectType\n        attr:\n            code:\n                callable: *var\n                args: null\n                attr: null\n                id: \"code\"\n                type: *StringType\n                template: *CodeCodeTemplate\n                argsTemplate: *CodeCodeArgsTemplate\n            scope:\n                callable: *var\n                args: null\n                attr: null\n                id: \"scope\"\n                type: *StringType\n                template: *CodeScopeTemplate\n                argsTemplate: *CodeScopeArgsTemplate\n    ObjectId: &ObjectIdType\n        <<: *__type\n        id: \"ObjectId\"\n        code: 101\n        type: *ObjectType\n        attr:\n            toHexString:\n                <<: *__func\n                id: \"toHexString\"\n                type: *StringType\n            toString:\n                <<: *__func\n                type: *StringType\n                template: *ObjectIdToStringTemplate\n                argsTemplate: *ObjectIdToStringArgsTemplate\n            equals:\n                <<: *__func\n                args:\n                    - [ \"ObjectId\" ]\n                type: *BoolType\n                template: *ObjectIdEqualsTemplate\n                argsTemplate: *ObjectIdEqualsArgsTemplate\n            getTimestamp:\n                <<: *__func\n                type: *IntegerType\n                template: *ObjectIdGetTimestampTemplate\n                argsTemplate: *ObjectIdGetTimestampArgsTemplate\n    Binary: &BinaryType\n        <<: *__type\n        id: \"Binary\"\n        code: 102\n        type: *ObjectType\n        attr:\n            value:\n                <<: *__func\n                id: \"value\"\n                type: *StringType\n                template: *BinaryValueTemplate\n                argsTemplate: *BinaryValueArgsTemplate\n            length:\n                <<: *__func\n                id: \"length\"\n                type: *IntegerType\n                template: *BinaryLengthTemplate\n                argsTemplate: *BinaryLengthArgsTemplate\n            toString:\n                <<: *__func\n                id: \"toString\"\n                type: *StringType\n                template: *BinaryToStringTemplate\n                argsTemplate: *BinaryToStringArgsTemplate\n            sub_type:\n                callable: *var\n                args: null\n                attr: null\n                id: \"subtype\"\n                type: *IntegerType\n                template: *BinarySubtypeTemplate\n                argsTemplate: *BinarySubtypeArgsTemplate\n    DBRef: &DBRefType\n        <<: *__type\n        id: \"DBRef\"\n        code: 103\n        type: *ObjectType\n        attr:\n            db:\n                callable: *var\n                args: null\n                attr: null\n                id: \"db\"\n                type: *StringType\n                template: *DBRefGetDBTemplate\n                argsTemplate: *DBRefGetDBArgsTemplate\n            namespace:\n                callable: *var\n                args: null\n                attr: null\n                id: \"namespace\"\n                type: *StringType\n                template: *DBRefGetCollectionTemplate\n                argsTemplate: *DBRefGetCollectionArgsTemplate\n            oid:\n                callable: *var\n                args: null\n                attr: null\n                id: \"oid\"\n                type: *StringType\n                template: *DBRefGetIdTemplate\n                argsTemplate: *DBRefGetIdArgsTemplate\n    Double: &DoubleType\n        <<: *__type\n        id: \"Double\"\n        code: 104\n        type: *ObjectType\n        attr: {}\n    Int32: &Int32Type\n        <<: *__type\n        id: \"Int32\"\n        code: 105\n        type: *ObjectType\n        attr: {}\n    Long: &LongType\n        <<: *__type\n        id: \"Long\"\n        code: 106\n        type: *ObjectType\n        attr:\n            toString:\n                <<: *__func\n                id: \"LongtoString\" # Needs process method\n                args:\n                    - [ *IntegerType, null ]\n                type: *StringType\n                template: *LongToStringTemplate\n                argsTemplate: *LongToStringArgsTemplate\n            equals:\n                <<: *__func\n                id: \"equals\"\n                args:\n                    - [ \"Long\" ]\n                type: *BoolType\n                template: *LongEqualsTemplate\n                argsTemplate: *LongEqualsArgsTemplate\n            toInt:\n                <<: *__func\n                id: \"toInt\"\n                type: *IntegerType\n                template: *LongToIntTemplate\n                argsTemplate: *LongToIntArgsTemplate\n            toNumber:\n                <<: *__func\n                id: \"toNumber\"\n                type: *DecimalType\n                template: *LongToNumberTemplate\n                argsTemplate: *LongToNumberArgsTemplate\n            compare:\n                <<: *__func\n                id: \"compare\"\n                args:\n                    - [ \"Long\" ]\n                type: *StringType\n                template: *LongCompareTemplate\n                argsTemplate: *LongCompareArgsTemplate\n            isOdd:\n                <<: *__func\n                id: \"isOdd\"\n                type: *BoolType\n                template: *LongIsOddTemplate\n                argsTemplate: *LongIsOddArgsTemplate\n            isZero:\n                <<: *__func\n                id: \"isZero\"\n                type: *BoolType\n                template: *LongIsZeroTemplate\n                argsTemplate: *LongIsZeroArgsTemplate\n            isNegative:\n                <<: *__func\n                id: \"isNegative\"\n                type: *BoolType\n                template: *LongIsNegativeTemplate\n                argsTemplate: *LongIsNegativeArgsTemplate\n            negate:\n                <<: *__func\n                id: \"negate\"\n                type: \"Long\"\n                template: *LongNegateTemplate\n                argsTemplate: *LongNegateArgsTemplate\n            not:\n                <<: *__func\n                id: \"not\"\n                type: \"Long\"\n                template: *LongNotTemplate\n                argsTemplate: *LongNotArgsTemplate\n            notEquals:\n                <<: *__func\n                id: \"notEquals\"\n                args:\n                    - [ \"Long\" ]\n                type: *BoolType\n                template: *LongNotEqualsTemplate\n                argsTemplate: *LongNotEqualsArgsTemplate\n            greaterThan:\n                <<: *__func\n                id: \"greaterThan\"\n                args:\n                    - [ \"Long\" ]\n                type: *BoolType\n                template: *LongGreaterThanTemplate\n                argsTemplate: *LongGreaterThanArgsTemplate\n            greaterThanOrEqual:\n                <<: *__func\n                id: \"greaterThanOrEqual\"\n                args:\n                    - [ \"Long\" ]\n                type: *BoolType\n                template: *LongGreaterThanOrEqualTemplate\n                argsTemplate: *LongGreaterThanOrEqualArgsTemplate\n            lessThan:\n                <<: *__func\n                id: \"lessThan\"\n                args:\n                    - [ \"Long\" ]\n                type: *BoolType\n                template: *LongLessThanTemplate\n                argsTemplate: *LongLessThanArgsTemplate\n            lessThanOrEqual:\n                <<: *__func\n                id: \"lessThanOrEqual\"\n                args:\n                    - [ \"Long\" ]\n                type: *BoolType\n                template: *LongLessThanOrEqualTemplate\n                argsTemplate: *LongLessThanOrEqualArgsTemplate\n            add:\n                <<: *__func\n                id: \"add\"\n                args:\n                    - [ \"Long\" ]\n                type: \"Long\"\n                template: *LongAddTemplate\n                argsTemplate: *LongAddArgsTemplate\n            subtract:\n                <<: *__func\n                id: \"subtract\"\n                args:\n                    - [ \"Long\" ]\n                type: \"Long\"\n                template: *LongSubtractTemplate\n                argsTemplate: *LongSubtractArgsTemplate\n            multiply:\n                <<: *__func\n                id: \"multiply\"\n                args:\n                    - [ \"Long\" ]\n                type: \"Long\"\n                template: *LongMultiplyTemplate\n                argsTemplate: *LongMultiplyArgsTemplate\n            div:\n                <<: *__func\n                id: \"div\"\n                args:\n                    - [ \"Long\" ]\n                type: \"Long\"\n                template: *LongDivTemplate\n                argsTemplate: *LongDivArgsTemplate\n            modulo:\n                <<: *__func\n                id: \"modulo\"\n                args:\n                    - [ \"Long\" ]\n                type: \"Long\"\n                template: *LongModuloTemplate\n                argsTemplate: *LongModuloArgsTemplate\n            and:\n                <<: *__func\n                id: \"and\"\n                args:\n                    - [ \"Long\" ]\n                type: \"Long\"\n                template: *LongAndTemplate\n                argsTemplate: *LongAndArgsTemplate\n            or:\n                <<: *__func\n                id: \"or\"\n                args:\n                    - [ \"Long\" ]\n                type: \"Long\"\n                template: *LongOrTemplate\n                argsTemplate: *LongOrArgsTemplate\n            xor:\n                <<: *__func\n                id: \"xor\"\n                args:\n                    - [ \"Long\" ]\n                type: \"Long\"\n                template: *LongXorTemplate\n                argsTemplate: *LongXorArgsTemplate\n            shiftLeft:\n                <<: *__func\n                id: \"shiftLeft\"\n                args:\n                    - [ *IntegerType ]\n                type: \"Long\"\n                template: *LongShiftLeftTemplate\n                argsTemplate: *LongShiftLeftArgsTemplate\n            shiftRight:\n                <<: *__func\n                id: \"shiftRight\"\n                args:\n                    - [ *IntegerType ]\n                type: \"Long\"\n                template: *LongShiftRightTemplate\n                argsTemplate: *LongShiftRightArgsTemplate\n    MinKeyType: &MinKeyType\n        <<: *__type\n        id: \"MinKey\"\n        code: 107\n        type: *ObjectType\n    MaxKeyType: &MaxKeyType\n        <<: *__type\n        id: \"MaxKey\"\n        code: 108\n        type: *ObjectType\n    BSONRegExpType: &BSONRegExpType\n        <<: *__type\n        id: \"BSONRegExp\"\n        code: 109\n        type: *ObjectType #TODO: add pattern + options\n    Timestamp: &TimestampType\n        <<: *__type\n        id: \"Timestamp\"\n        code: 110\n        type: *ObjectType\n        attr:\n            toString:\n                <<: *__func\n                id: \"toString\"\n                type: *StringType\n                template: *TimestampToStringTemplate\n                argsTemplate: *TimestampToStringArgsTemplate\n            equals:\n                <<: *__func\n                id: \"equals\"\n                args:\n                    - [ \"Timestamp\" ]\n                type: *BoolType\n                template: *TimestampEqualsTemplate\n                argsTemplate: *TimestampEqualsArgsTemplate\n            getLowBits:\n                <<: *__func\n                id: \"getLowBits\"\n                type: *IntegerType\n                template: *TimestampGetLowBitsTemplate\n                argsTemplate: *TimestampGetLowBitsArgsTemplate\n            getHighBits:\n                <<: *__func\n                id: \"getHighBits\"\n                type: *IntegerType\n                template: *TimestampGetHighBitsTemplate\n                argsTemplate: *TimestampGetHighBitsArgsTemplate\n            compare:\n                <<: *__func\n                id: \"compare\"\n                args:\n                    - [ \"Timestamp\" ]\n                type: *StringType\n                template: *TimestampCompareTemplate\n                argsTemplate: *TimestampCompareArgsTemplate\n            notEquals:\n                <<: *__func\n                id: \"notEquals\"\n                args:\n                    - [ \"Timestamp\" ]\n                type: *BoolType\n                template: *TimestampNotEqualsTemplate\n                argsTemplate: *TimestampNotEqualsArgsTemplate\n            greaterThan:\n                <<: *__func\n                id: \"greaterThan\"\n                args:\n                    - [ \"Timestamp\" ]\n                type: *BoolType\n                template: *TimestampGreaterThanTemplate\n                argsTemplate: *TimestampGreaterThanArgsTemplate\n            greaterThanOrEqual:\n                <<: *__func\n                id: \"greaterThanOrEqual\"\n                args:\n                    - [ \"Timestamp\" ]\n                type: *BoolType\n                template: *TimestampGreaterThanOrEqualTemplate\n                argsTemplate: *TimestampGreaterThanOrEqualArgsTemplate\n            lessThan:\n                <<: *__func\n                id: \"lessThan\"\n                args:\n                    - [ \"Timestamp\" ]\n                type: *BoolType\n                template: *TimestampLessThanTemplate\n                argsTemplate: *TimestampLessThanArgsTemplate\n            lessThanOrEqual:\n                <<: *__func\n                id: \"lessThanOrEqual\"\n                args:\n                    - [ \"Timestamp\" ]\n                type: *BoolType\n                template: *TimestampLessThanOrEqualTemplate\n                argsTemplate: *TimestampLessThanOrEqualArgsTemplate\n    BSONSymbol: &SymbolType\n        <<: *__type\n        id: \"BSONSymbol\"\n        code: 111\n        type: *ObjectType\n        attr:\n            valueOf:\n                <<: *__func\n                id: \"valueOf\"\n                type: *StringType\n                template: *SymbolValueOfTemplate\n                argsTemplate: *SymbolValueOfArgsTemplate\n            toString:\n                <<: *__func\n                id: \"toString\"\n                type: *StringType\n                template: *SymbolToStringTemplate\n                argsTemplate: *SymbolToStringArgsTemplate\n            inspect:\n                <<: *__func\n                id: \"inspect\"\n                type: *StringType\n                template: *SymbolInspectTemplate\n                argsTemplate: *SymbolInspectArgsTemplate\n    Decimal128: &Decimal128Type\n        <<: *__type\n        id: \"Decimal128\"\n        code: 112\n        type: *ObjectType\n        attr:\n            toString:\n                <<: *__func\n                id: \"toString\"\n                type: *StringType\n                template: *Decimal128ToStringTemplate\n                argsTemplate: *Decimal128ToStringArgsTemplate\nNativeTypes:\n    Date: &DateType\n        <<: *__type\n        id: \"Date\"\n        code: 200\n        type: *ObjectType\n        attr: {} # TODO: no built-in date methods added yet\nBsonSymbols:\n    Code: &CodeSymbol\n        id: \"CodeFromJS\"\n        code: 100\n        callable: *constructor\n        args:\n            - [ *StringType ]\n            - [ *ObjectType, null ]\n        type: *CodeType\n        attr: {}\n        template: *CodeSymbolTemplate\n        argsTemplate: *CodeSymbolArgsTemplate\n    ObjectId: &ObjectIdSymbol\n        id: \"ObjectId\"\n        code: 101\n        callable: *constructor\n        args:\n            - [ *StringType, *NumericType, null ]\n        type: *ObjectIdType\n        attr:\n            createFromHexString:\n                <<: *__func\n                id: \"createFromHexString\"\n                args:\n                    - [ *StringType ]\n                type: *ObjectIdType\n                template: *ObjectIdCreateFromHexStringTemplate\n                argsTemplate: *ObjectIdCreateFromHexStringArgsTemplate\n            createFromTime:\n                <<: *__func\n                id: \"ObjectIdCreateFromTime\"\n                args:\n                    - [ *NumericType ]\n                type: *ObjectIdType\n                template: *ObjectIdCreateFromTimeTemplate\n                argsTemplate: *ObjectIdCreateFromTimeArgsTemplate\n            isValid:\n                <<: *__func\n                id: \"isValid\"\n                args:\n                    - [ *StringType ]\n                type: *BoolType\n                template: *ObjectIdIsValidTemplate\n                argsTemplate: *ObjectIdIsValidArgsTemplate\n        template: *ObjectIdSymbolTemplate\n        argsTemplate: *ObjectIdSymbolArgsTemplate\n    Binary: &BinarySymbol\n        id: \"Binary\"\n        code: 102\n        callable: *constructor\n        args:\n            - [ *StringType, *NumericType, *ObjectType ]\n            - [ *NumericType, null ]\n        type: *BinaryType\n        attr:\n            SUBTYPE_DEFAULT:\n                id: \"SUBTYPE_DEFAULT\"\n                callable: *var\n                args: null\n                type: *IntegerType\n                template: *BinarySymbolSubtypeDefaultTemplate\n            SUBTYPE_FUNCTION:\n                id: \"SUBTYPE_FUNCTION\"\n                callable: *var\n                args: null\n                type: *IntegerType\n                template: *BinarySymbolSubtypeFunctionTemplate\n            SUBTYPE_BYTE_ARRAY:\n                id: \"SUBTYPE_BYTE_ARRAY\"\n                callable: *var\n                args: null\n                type: *IntegerType\n                template: *BinarySymbolSubtypeByteArrayTemplate\n            SUBTYPE_UUID_OLD:\n                id: \"SUBTYPE_UUID_OLD\"\n                callable: *var\n                args: null\n                type: *IntegerType\n                template: *BinarySymbolSubtypeUuidOldTemplate\n            SUBTYPE_UUID:\n                id: \"SUBTYPE_UUID\"\n                callable: *var\n                args: null\n                type: *IntegerType\n                template: *BinarySymbolSubtypeUuidTemplate\n            SUBTYPE_MD5:\n                id: \"SUBTYPE_MD5\"\n                callable: *var\n                args: null\n                type: *IntegerType\n                template: *BinarySymbolSubtypeMd5Template\n            SUBTYPE_USER_DEFINED:\n                id: \"SUBTYPE_USER_DEFINED\"\n                callable: *var\n                args: null\n                type: *IntegerType\n                template: *BinarySymbolSubtypeUserDefinedTemplate\n        template: *BinarySymbolTemplate\n        argsTemplate: *BinarySymbolArgsTemplate\n    DBRef:\n        id: \"DBRef\"\n        code: 103\n        callable: *constructor\n        args:\n            - [ *StringType ]\n            - [ *ObjectIdType ]\n            - [ *StringType, null ]\n        type: *DBRefType\n        attr: {}\n        template: *DBRefSymbolTemplate\n        argsTemplate: *DBRefSymbolArgsTemplate\n    Double:\n        id: \"Double\"\n        code: 104\n        callable: *constructor\n        args:\n            - [ *NumericType, *StringType ]\n        type: *DoubleType\n        attr: {}\n        template: *DoubleSymbolTemplate\n        argsTemplate: *DoubleSymbolArgsTemplate\n    Int32:\n        id: \"Int32\"\n        code: 105\n        callable: *constructor\n        args:\n            - [ *NumericType, *StringType ]\n        type: *Int32Type\n        attr: {}\n        template: *Int32SymbolTemplate\n        argsTemplate: *Int32SymbolArgsTemplate\n    Long:\n        id: \"Long\"\n        code: 106\n        callable: *constructor\n        args:\n            - [ *IntegerType ]\n            - [ *IntegerType ]\n        type: *LongType\n        attr:\n            MAX_VALUE:\n                id: \"MAX_VALUE\"\n                callable: *var\n                args: null\n                type: *LongType\n                attr: {}\n                template: *LongSymbolMaxTemplate\n                argsTemplate: *LongSymbolMaxArgsTemplate\n            MIN_VALUE:\n                id: \"MIN_VALUE\"\n                callable: *var\n                args: null\n                type: *LongType\n                attr: {}\n                template: *LongSymbolMinTemplate\n                argsTemplate: *LongSymbolMinArgsTemplate\n            ZERO:\n                id: \"ZERO\"\n                callable: *var\n                args: null\n                type: *LongType\n                attr: {}\n                template: *LongSymbolZeroTemplate\n                argsTemplate: *LongSymbolZeroArgsTemplate\n            ONE:\n                id: \"ONE\"\n                callable: *var\n                args: null\n                type: *LongType\n                attr: {}\n                template: *LongSymbolOneTemplate\n                argsTemplate: *LongSymbolOneArgsTemplate\n            NEG_ONE:\n                id: \"NEG_ONE\"\n                callable: *var\n                args: null\n                type: *LongType\n                attr: {}\n                template: *LongSymbolNegOneTemplate\n                argsTemplate: *LongSymbolNegOneArgsTemplate\n            fromBits:\n                id: \"LongfromBits\" # Needs process method\n                callable: *func\n                args:\n                    - [ *IntegerType ]\n                    - [ *IntegerType ]\n                type: *LongType\n                attr: {}\n                template: *LongSymbolFromBitsTemplate\n                argsTemplate: *LongSymbolFromBitsArgsTemplate\n            fromInt:\n                id: \"fromInt\"\n                callable: *func\n                args:\n                    - [ *IntegerType ]\n                type: *LongType\n                attr: {}\n                template: *LongSymbolFromIntTemplate\n                argsTemplate: *LongSymbolFromIntArgsTemplate\n            fromNumber:\n                id: \"fromNumber\"\n                callable: *func\n                args:\n                    - [ *NumericType ]\n                type: *LongType\n                attr: {}\n                template: *LongSymbolFromNumberTemplate\n                argsTemplate: *LongSymbolFromNumberArgsTemplate\n            fromString:\n                id: \"fromString\"\n                callable: *func\n                args:\n                    - [ *StringType ]\n                    - [ *IntegerType, null ]\n                type: *LongType\n                attr: {}\n                template: *LongSymbolFromStringTemplate\n                argsTemplate: *LongSymbolFromStringArgsTemplate\n        template: *LongSymbolTemplate\n        argsTemplate: *LongSymbolArgsTemplate\n    MinKey:\n        id: \"MinKey\"\n        code: 107\n        callable: *constructor\n        args: []\n        type: *MinKeyType\n        attr: {}\n        template: *MinKeySymbolTemplate\n        argsTemplate: *MinKeySymbolArgsTemplate\n    MaxKey:\n        id: \"MaxKey\"\n        code: 108\n        callable: *constructor\n        args: []\n        type: *MaxKeyType\n        attr: {}\n        template: *MaxKeySymbolTemplate\n        argsTemplate: *MaxKeySymbolArgsTemplate\n    Timestamp:\n        id: \"Timestamp\"\n        code: 110\n        callable: *constructor\n        args:\n            - [ *IntegerType ]\n            - [ *IntegerType ]\n        type: *TimestampType\n        attr: {} #TODO: add fromInt, fromNumber, fromBits, fromString\n        template: *TimestampSymbolTemplate\n        argsTemplate: *TimestampSymbolArgsTemplate\n    BSONSymbol:\n        id: \"BSONSymbol\"\n        code: 111\n        callable: *constructor\n        args:\n            - [ *StringType ]\n        type: *SymbolType\n        attr: {}\n        template: *SymbolSymbolTemplate\n        argsTemplate: *SymbolSymbolArgsTemplate\n    BSONRegExp:\n        id: \"BSONRegExp\"\n        code: 109\n        callable: *constructor\n        args:\n            - [ *StringType ]\n            - [ *StringType, null ]\n        type: *BSONRegExpType\n        attr: {}\n        template: *BSONRegExpSymbolTemplate\n        argsTemplate: *BSONRegExpSymbolArgsTemplate\n    Decimal128:\n        id: \"Decimal128\"\n        code: 112\n        callable: *constructor\n        args:\n            - [ *ObjectType ]\n        type: *Decimal128Type\n        attr:\n            fromString:\n                id: \"fromString\"\n                callable: *func\n                args:\n                    - [ *StringType ]\n                type: *Decimal128Type\n                attr: {}\n                template: *Decimal128SymbolFromStringTemplate\n                argsTemplate: *Decimal128SymbolFromStringArgsTemplate\n        template: *Decimal128SymbolTemplate\n        argsTemplate: *Decimal128SymbolArgsTemplate\n\nNativeSymbols:\n    Number:\n        id: \"Number\"\n        code: 2\n        callable: *constructor\n        args:\n            - [ *IntegerType, *StringType ]\n        type: *NumericType\n        attr: {} # TODO: no built-in number funcs added yet\n        template: *NumberSymbolTemplate\n        argsTemplate: *NumberSymbolArgsTemplate\n    Date: # Needs process method\n        id: \"Date\"\n        code: 200\n        callable: *constructor\n        args:\n            - [ *StringType, *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n        type: *DateType\n        attr: # TODO: add more date funcs?\n            now:\n                id: \"now\"\n                code: 200.1\n                callable: *func\n                args: []\n                type: *DateType\n                attr: {}\n                template: *DateSymbolNowTemplate\n                argsTemplate: *DateSymbolNowArgsTemplate\n        template: *DateSymbolTemplate\n        argsTemplate: *DateSymbolArgsTemplate\n    RegExp: # Needs process method\n        id: \"RegExp\"\n        code: 8\n        callable: *constructor\n        args:\n            - [ *StringType, *RegexType ]\n            - [ *StringType, null ]\n        type: *RegexType\n        attr: {}\n        template: *RegExpSymbolTemplate\n        argsTemplate: *RegExpSymbolArgsTemplate\n"},1817:e=>{e.exports='SymbolTypes:\n    VAR: &var 0\n    CONSTRUCTOR: &constructor 1\n    FUNC: &func 2\n# Internal patterns to save typing\n__type: &__type\n    id: null\n    callable: *var\n    args: null\n    type: null\n    attr: {}\n    template: null\n    argsTemplate: null\n__func: &__func\n    callable: *func\n    args: []\n    attr: {}\n    template: null\n    argsTemplate: null\n\n#############################################\n#             Sample Templates              #\n#                                           #\n# The expected arguments are commented next #\n# to the template itself. Currently all are #\n# set to null, but to define a function     #\n# replace \'null\' with \'!!js/function > \\n   #\n# and a function defined below.             #\n#                                           #\n# See the other template files for examples #\n#                                           #\n#               Good to know:               #\n# lhs is left-hand-side of the expression   #\n# rhs is right-hand-side of the expression  #\n# All args are strings unless noted         #\n#    - arg? is boolean                      #\n#    - arg# is number                       #\n#                                           #\n#############################################\nTemplates:\n    ########\n    # Misc #\n    ########\n\n    # Filter out regex flags that have translations or are unsupported.\n    RegexFlags: &RegexFlags\n        i: \'i\'\n        m: \'m\'\n        u: \'u\'\n        y: \'y\'\n        g: \'g\'\n    BSONRegexFlags: &BSONRegexFlags\n        i: \'i\'\n        m: \'m\'\n        x: \'x\'\n        s: \'s\'\n        l: \'l\'\n        u: \'u\'\n\n    #############################################\n    #                  Syntax                   #\n    #                                           #\n    # Templates for language syntax expressions #\n    #                                           #\n    #############################################\n\n    DriverTemplate: &DriverTemplate null\n    EqualitySyntaxTemplate: &EqualitySyntaxTemplate !!js/function >\n        (lhs, op, rhs) => {\n            if (op.includes(\'!\') || op.includes(\'not\')) {\n                return lhs !== rhs;\n            }\n            if (op === \'==\' || op === \'===\' || op === \'is\') {\n                if (typeof(lhs) === \'object\' && \'equals\' in lhs) {\n                    // Use \'.equals\' for objects, if it exists.\n                    return lhs.equals(rhs);\n                }\n                return lhs === rhs;\n            }\n            if (op === \'>\') {\n                return lhs > rhs;\n            }\n            if (op === \'<\') {\n                return lhs < rhs;\n            }\n            if (op === \'>=\') {\n                return lhs >= rhs;\n            }\n            if (op === \'<=\') {\n                return lhs <= rhs;\n            }\n            throw new Error(`unrecognized operation: ${op}`);\n        }\n    InSyntaxTemplate: &InSyntaxTemplate !!js/function >\n        (lhs, op, rhs) => {\n            if (op.includes(\'!\') || op.includes(\'not\')) {\n                if (typeof rhs === \'array\') {\n                    return rhs.indexOf(lhs) === -1;\n                }\n                return !(lhs in rhs);\n            }\n            if (typeof rhs === \'array\') {\n                return rhs.indexOf(lhs) !== -1;\n            }\n            return lhs in rhs;\n        }\n\n    AndSyntaxTemplate: &AndSyntaxTemplate !!js/function >\n        (args) => {\n            return args.reduce((t, k, i) => {\n                return t && k;\n            });\n        }\n    OrSyntaxTemplate: &OrSyntaxTemplate !!js/function >\n        (args) => {\n            return args.reduce((t, k, i) => {\n                return t || k;\n            });\n        }\n    NotSyntaxTemplate: &NotSyntaxTemplate !!js/function >\n        (arg) => {\n            return !arg;\n        }\n    UnarySyntaxTemplate: &UnarySyntaxTemplate !!js/function >\n        (op, arg) => {\n            switch(op) {\n                case \'+\':\n                    return +arg;\n                case \'-\':\n                    return -arg;\n                case \'~\':\n                    return ~arg;\n                default:\n                    throw new Error(`unrecognized operation: ${op}`);\n            }\n        }\n    BinarySyntaxTemplate: &BinarySyntaxTemplate !!js/function >\n        (args) => {\n            return args.reduce((s, op, i, arr) => {\n                if (i % 2 === 0) {\n                    return s;\n                }\n                const rhs = arr[i + 1];\n                switch(op) {\n                    case \'+\':\n                        return s + rhs;\n                    case \'-\':\n                        return s - rhs;\n                    case \'*\':\n                        return s * rhs;\n                    case \'/\':\n                        return s / rhs;\n                    case \'**\':\n                        return Math.pow(s, rhs);\n                    case \'//\':\n                        return Math.floor(s, rhs);\n                    case \'%\':\n                        return s % rhs;\n                    case \'>>\':\n                        return s >> rhs;\n                    case \'<<\':\n                        return s << rhs;\n                    case \'|\':\n                        return s | rhs;\n                    case \'&\':\n                        return s & rhs;\n                    case \'^\':\n                        return s ^ rhs;\n                    default:\n                        throw new Error(`unrecognized operation: ${op}`);\n                }\n            }, args[0]);\n        }\n    ParensSyntaxTemplate: &ParensSyntaxTemplate !!js/function >\n        (arg) => {\n            return arg;\n        }\n    EosSyntaxTemplate: &EosSyntaxTemplate !!js/function >\n        () => {\n            return \'a unique thing\';\n        }\n    EofSyntaxTemplate: &EofSyntaxTemplate !!js/function >\n        () => {\n            return \'a unique thing\';\n        }\n    FloorDivTemplate: &FloorDivSyntaxTemplate null # Args: lhs, rhs\n    PowerTemplate: &PowerSyntaxTemplate null # Args: lhs, rhs\n    NewTemplate: &NewSyntaxTemplate null # Args: expression, skip?, code# [to check if meant to be skipped]\n\n    #############################################\n    #               Literal Types               #\n    #                                           #\n    # Templates for literal type instance. Most #\n    # get passed the literal itself as an arg.  #\n    #                                           #\n    #############################################\n    StringTypeTemplate: &StringTypeTemplate !!js/function >\n        (str) => {\n            let newStr = str.toString();\n            if (\n                (newStr.charAt(0) === \'"\' && newStr.charAt(newStr.length - 1) === \'"\') ||\n                (newStr.charAt(0) === \'\\\'\' && newStr.charAt(newStr.length - 1) === \'\\\'\')\n            ) {\n                newStr = newStr.substr(1, newStr.length - 2);\n            }\n            return newStr;\n        }\n    RegexTypeTemplate: &RegexTypeTemplate !!js/function >\n        (pattern, flags) => {\n            return new RegExp(pattern, flags);\n        }\n    BoolTypeTemplate: &BoolTypeTemplate !!js/function >\n        (str) => {\n            return str.toLowerCase() === \'true\';\n        }\n    IntegerTypeTemplate: &IntegerTypeTemplate !!js/function >\n        (arg) => {\n            return parseInt(arg, 10);\n        }\n    DecimalTypeTemplate: &DecimalTypeTemplate !!js/function >\n        (arg) => {\n            return parseFloat(arg);\n        }\n    LongBasicTypeTemplate: &LongBasicTypeTemplate !!js/function >\n        (arg) => {\n            return parseInt(arg, 10);\n        }\n    HexTypeTemplate: &HexTypeTemplate !!js/function >\n        (arg) => {\n            return parseInt(arg, 16);\n        }\n    OctalTypeTemplate: &OctalTypeTemplate !!js/function >\n        (arg) => {\n            arg = arg.replace(/[oO]/g, \'\')\n            return parseInt(arg, 8);\n        }\n    NumericTypeTemplate: &NumericTypeTemplate !!js/function >\n        (arg) => {\n            if (arg.contains(\'x\')) {\n                return parseInt(arg, 16);\n            }\n            if (arg.contains(\'o\') || arg.startsWith(\'0\')) {\n                arg = arg.replace(/o/g, \'\')\n                return parseInt(arg, 8);\n            }\n            return parseFloat(arg);\n        }\n    ArrayTypeTemplate: &ArrayTypeTemplate null\n    ArrayTypeArgsTemplate: &ArrayTypeArgsTemplate null # Args: single array element, nestedness, lastElement? (note: not being used atm)\n    NullTypeTemplate: &NullTypeTemplate !!js/function >\n        () => {\n            return null;\n        }\n    UndefinedTypeTemplate: &UndefinedTypeTemplate !!js/function >\n        () => {\n            return undefined;\n        }\n    ObjectTypeTemplate: &ObjectTypeTemplate null # Args: literal (for empty array, is empty string. Otherwise all set)\n    ObjectTypeArgsTemplate: &ObjectTypeArgsTemplate null # Args: single object element [2] (i.e. array with [key, value]), nestedness#\n\n    #############################################\n    #               Symbols                     #\n    #                                           #\n    # Templates for symbols, can be either      #\n    # functions or variables.                   #\n    #                                           #\n    # The *SymbolTemplates return names and     #\n    # usually don\'t take any arguments. The     #\n    # *SymbolArgsTemplates are invoked for func #\n    # calls. The first argument is always the   #\n    # lhs, i.e. the symbol returned from the    #\n    # corresponding SymbolTemplate. The rest of #\n    # the arguments are the processed arguments #\n    # passed to the original function.          #\n    #                                           #\n    #############################################\n    CodeSymbolTemplate: &CodeSymbolTemplate null # No args\n    CodeSymbolArgsTemplate: &CodeSymbolArgsTemplate null # Args: code, scope\n    ObjectIdSymbolTemplate: &ObjectIdSymbolTemplate null # No args\n    ObjectIdSymbolArgsTemplate: &ObjectIdSymbolArgsTemplate null # Args: lhs, string (can be empty or null for no arg)\n    BinarySymbolTemplate: &BinarySymbolTemplate null\n    BinarySymbolArgsTemplate: &BinarySymbolArgsTemplate null\n    BinarySymbolSubtypeDefaultTemplate: &BinarySymbolSubtypeDefaultTemplate null\n    BinarySymbolSubtypeFunctionTemplate: &BinarySymbolSubtypeFunctionTemplate null\n    BinarySymbolSubtypeByteArrayTemplate: &BinarySymbolSubtypeByteArrayTemplate null\n    BinarySymbolSubtypeUuidOldTemplate: &BinarySymbolSubtypeUuidOldTemplate null\n    BinarySymbolSubtypeUuidTemplate: &BinarySymbolSubtypeUuidTemplate null\n    BinarySymbolSubtypeMd5Template: &BinarySymbolSubtypeMd5Template null\n    BinarySymbolSubtypeUserDefinedTemplate: &BinarySymbolSubtypeUserDefinedTemplate null\n    DBRefSymbolTemplate: &DBRefSymbolTemplate null # No args\n    DBRefSymbolArgsTemplate: &DBRefSymbolArgsTemplate null # Args: lhs, coll, id, db\n    DoubleSymbolTemplate: &DoubleSymbolTemplate null # No args\n    DoubleSymbolArgsTemplate: &DoubleSymbolArgsTemplate null # Args: lhs, arg, argType (i.e. \'_string\', \'_double\')\n    Int32SymbolTemplate: &Int32SymbolTemplate null # No args\n    Int32SymbolArgsTemplate: &Int32SymbolArgsTemplate null # Args: lhs, arg, argType\n    LongSymbolTemplate: &LongSymbolTemplate null # No args\n    LongSymbolArgsTemplate: &LongSymbolArgsTemplate !!js/function > # Args: lhs, arg, argType\n        (lhs, arg) => {\n            return lhs.fromNumber(arg);\n        }\n    RegExpSymbolTemplate: &RegExpSymbolTemplate null # No args\n    RegExpSymbolArgsTemplate: &RegExpSymbolArgsTemplate null # Args: lhs, pattern, flags\n    SymbolSymbolTemplate: &SymbolSymbolTemplate null # No args\n    SymbolSymbolArgsTemplate: &SymbolSymbolArgsTemplate null # Args: lhs, arg\n    BSONRegExpSymbolTemplate: &BSONRegExpSymbolTemplate null # No args\n    BSONRegExpSymbolArgsTemplate: &BSONRegExpSymbolArgsTemplate null # Args: lhs, pattern, flags\n    Decimal128SymbolTemplate: &Decimal128SymbolTemplate null # No args\n    Decimal128SymbolArgsTemplate: &Decimal128SymbolArgsTemplate null # Args: lhs, arg\n    MinKeySymbolTemplate: &MinKeySymbolTemplate null # No args\n    MinKeySymbolArgsTemplate: &MinKeySymbolArgsTemplate null # No args\n    MaxKeySymbolTemplate: &MaxKeySymbolTemplate null # No args\n    MaxKeySymbolArgsTemplate: &MaxKeySymbolArgsTemplate null # No args\n    TimestampSymbolTemplate: &TimestampSymbolTemplate null # No args\n    TimestampSymbolArgsTemplate: &TimestampSymbolArgsTemplate null # Args: lhs, low, high\n    # non bson-specific\n    NumberSymbolTemplate: &NumberSymbolTemplate !!js/function >\n        () => {\n            return Number;\n        }\n    NumberSymbolArgsTemplate: &NumberSymbolArgsTemplate null # Args: lhs, arg, argType\n    DateSymbolTemplate: &DateSymbolTemplate null # No args\n    DateSymbolArgsTemplate: &DateSymbolArgsTemplate !!js/function >\n        (lhs, date, isString) => {\n            if (isString) {\n                return date.toString();\n            }\n            return date;\n        }\n\n    #############################################\n    #         Object Attributes/Methods         #\n    #                                           #\n    # These\'re variables or functions called on #\n    # instantiated objects. For example,        #\n    # ObjectId().isValid() or Timestamp().t     #\n    #                                           #\n    # They follow the same pattern with the\n    # *Template/*ArgsTemplates: usually no args #\n    # to the Template and lhs plus any original #\n    # arguments to the ArgsTemplate.            #\n    #                                           #\n    #############################################\n    CodeCodeTemplate: &CodeCodeTemplate null\n    CodeCodeArgsTemplate: &CodeCodeArgsTemplate null\n    CodeScopeTemplate: &CodeScopeTemplate null\n    CodeScopeArgsTemplate: &CodeScopeArgsTemplate null\n    ObjectIdToStringTemplate: &ObjectIdToStringTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs.toString();\n        }\n    ObjectIdToStringArgsTemplate: &ObjectIdToStringArgsTemplate !!js/function >\n        (lhs) => {\n            return lhs;\n        }\n    ObjectIdEqualsTemplate: &ObjectIdEqualsTemplate !!js/function >\n        (lhs) => {\n            return lhs;\n        }\n    ObjectIdEqualsArgsTemplate: &ObjectIdEqualsArgsTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs.equals(rhs);\n        }\n    ObjectIdGetTimestampTemplate: &ObjectIdGetTimestampTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs.getTimestamp();\n        }\n    ObjectIdGetTimestampArgsTemplate: &ObjectIdGetTimestampArgsTemplate !!js/function >\n        (lhs) => {\n            return lhs;\n        }\n    ObjectIdIsValidTemplate: &ObjectIdIsValidTemplate !!js/function >\n        (lhs, rhs) => {\n            return  lhs.isValid;\n        }\n    ObjectIdIsValidArgsTemplate: &ObjectIdIsValidArgsTemplate null\n    BinaryValueTemplate: &BinaryValueTemplate null\n    BinaryValueArgsTemplate: &BinaryValueArgsTemplate null\n    BinaryLengthTemplate: &BinaryLengthTemplate null\n    BinaryLengthArgsTemplate: &BinaryLengthArgsTemplate null\n    BinaryToStringTemplate: &BinaryToStringTemplate null\n    BinaryToStringArgsTemplate: &BinaryToStringArgsTemplate null\n    BinarySubtypeTemplate: &BinarySubtypeTemplate null\n    BinarySubtypeArgsTemplate: &BinarySubtypeArgsTemplate null\n    DBRefGetDBTemplate: &DBRefGetDBTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs.db;\n        }\n    DBRefGetCollectionTemplate: &DBRefGetCollectionTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs.collection;\n        }\n    DBRefGetIdTemplate: &DBRefGetIdTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs.oid;\n        }\n    DBRefGetDBArgsTemplate: &DBRefGetDBArgsTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs;\n        }\n    DBRefGetCollectionArgsTemplate: &DBRefGetCollectionArgsTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs;\n        }\n    DBRefGetIdArgsTemplate: &DBRefGetIdArgsTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs;\n        }\n    LongEqualsTemplate: &LongEqualsTemplate null\n    LongEqualsArgsTemplate: &LongEqualsArgsTemplate null\n    LongToStringTemplate: &LongToStringTemplate null\n    LongToStringArgsTemplate: &LongToStringArgsTemplate null\n    LongToIntTemplate: &LongToIntTemplate null\n    LongToIntArgsTemplate: &LongToIntArgsTemplate null\n    LongValueOfTemplate: &LongValueOfTemplate null\n    LongValueOfArgsTemplate: &LongValueOfArgsTemplate null\n    LongToNumberTemplate: &LongToNumberTemplate null\n    LongToNumberArgsTemplate: &LongToNumberArgsTemplate null\n    LongAddTemplate: &LongAddTemplate null\n    LongAddArgsTemplate: &LongAddArgsTemplate null\n    LongSubtractTemplate: &LongSubtractTemplate null\n    LongSubtractArgsTemplate: &LongSubtractArgsTemplate null\n    LongMultiplyTemplate: &LongMultiplyTemplate null\n    LongMultiplyArgsTemplate: &LongMultiplyArgsTemplate null\n    LongDivTemplate: &LongDivTemplate null\n    LongDivArgsTemplate: &LongDivArgsTemplate null\n    LongModuloTemplate: &LongModuloTemplate null\n    LongModuloArgsTemplate: &LongModuloArgsTemplate null\n    LongAndTemplate: &LongAndTemplate null\n    LongAndArgsTemplate: &LongAndArgsTemplate null\n    LongOrTemplate: &LongOrTemplate null\n    LongOrArgsTemplate: &LongOrArgsTemplate null\n    LongXorTemplate: &LongXorTemplate null\n    LongXorArgsTemplate: &LongXorArgsTemplate null\n    LongShiftLeftTemplate: &LongShiftLeftTemplate null\n    LongShiftLeftArgsTemplate: &LongShiftLeftArgsTemplate null\n    LongShiftRightTemplate: &LongShiftRightTemplate null\n    LongShiftRightArgsTemplate: &LongShiftRightArgsTemplate null\n    LongCompareTemplate: &LongCompareTemplate null\n    LongCompareArgsTemplate: &LongCompareArgsTemplate null\n    LongIsOddTemplate: &LongIsOddTemplate null\n    LongIsOddArgsTemplate: &LongIsOddArgsTemplate null\n    LongIsZeroTemplate: &LongIsZeroTemplate null\n    LongIsZeroArgsTemplate: &LongIsZeroArgsTemplate null\n    LongIsNegativeTemplate: &LongIsNegativeTemplate null\n    LongIsNegativeArgsTemplate: &LongIsNegativeArgsTemplate null\n    LongNegateTemplate: &LongNegateTemplate null\n    LongNegateArgsTemplate: &LongNegateArgsTemplate null\n    LongNotTemplate: &LongNotTemplate null\n    LongNotArgsTemplate: &LongNotArgsTemplate null\n    LongNotEqualsTemplate: &LongNotEqualsTemplate null\n    LongNotEqualsArgsTemplate: &LongNotEqualsArgsTemplate null\n    LongGreaterThanTemplate: &LongGreaterThanTemplate null\n    LongGreaterThanArgsTemplate: &LongGreaterThanArgsTemplate null\n    LongGreaterThanOrEqualTemplate: &LongGreaterThanOrEqualTemplate null\n    LongGreaterThanOrEqualArgsTemplate: &LongGreaterThanOrEqualArgsTemplate null\n    LongLessThanTemplate: &LongLessThanTemplate null\n    LongLessThanArgsTemplate: &LongLessThanArgsTemplate null\n    LongLessThanOrEqualTemplate: &LongLessThanOrEqualTemplate null\n    LongLessThanOrEqualArgsTemplate: &LongLessThanOrEqualArgsTemplate null\n    LongFloatApproxTemplate: &LongFloatApproxTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs.toNumber();\n        }\n    LongTopTemplate: &LongTopTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs.high;\n        }\n    LongBottomTemplate: &LongBottomTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs.low;\n        }\n    TimestampToStringTemplate: &TimestampToStringTemplate null\n    TimestampToStringArgsTemplate: &TimestampToStringArgsTemplate null\n    TimestampEqualsTemplate: &TimestampEqualsTemplate null\n    TimestampEqualsArgsTemplate: &TimestampEqualsArgsTemplate null\n    TimestampGetLowBitsTemplate: &TimestampGetLowBitsTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs.getLowBits();\n        }\n    TimestampGetLowBitsArgsTemplate: &TimestampGetLowBitsArgsTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs;\n        }\n    TimestampGetHighBitsTemplate: &TimestampGetHighBitsTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs.getHighBits();\n        }\n    TimestampGetHighBitsArgsTemplate: &TimestampGetHighBitsArgsTemplate  !!js/function >\n        (lhs, rhs) => {\n            return lhs;\n        }\n    TimestampTTemplate: &TimestampTTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs.getLowBits();\n        }\n    TimestampITemplate: &TimestampITemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs.getHighBits();\n        }\n    TimestampAsDateTemplate: &TimestampAsDateTemplate !!js/function >\n        (lhs, rhs) => {\n            return new Date(lhs.getHighBits() * 1000);\n        }\n    TimestampAsDateArgsTemplate: &TimestampAsDateArgsTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs;\n        }\n    TimestampCompareTemplate: &TimestampCompareTemplate null\n    TimestampCompareArgsTemplate: &TimestampCompareArgsTemplate null\n    TimestampNotEqualsTemplate: &TimestampNotEqualsTemplate null\n    TimestampNotEqualsArgsTemplate: &TimestampNotEqualsArgsTemplate null\n    TimestampGreaterThanTemplate: &TimestampGreaterThanTemplate null\n    TimestampGreaterThanArgsTemplate: &TimestampGreaterThanArgsTemplate null\n    TimestampGreaterThanOrEqualTemplate: &TimestampGreaterThanOrEqualTemplate null\n    TimestampGreaterThanOrEqualArgsTemplate: &TimestampGreaterThanOrEqualArgsTemplate null\n    TimestampLessThanTemplate: &TimestampLessThanTemplate null\n    TimestampLessThanArgsTemplate: &TimestampLessThanArgsTemplate null\n    TimestampLessThanOrEqualTemplate: &TimestampLessThanOrEqualTemplate null\n    TimestampLessThanOrEqualArgsTemplate: &TimestampLessThanOrEqualArgsTemplate null\n    SymbolValueOfTemplate: &SymbolValueOfTemplate null\n    SymbolValueOfArgsTemplate: &SymbolValueOfArgsTemplate null\n    SymbolInspectTemplate: &SymbolInspectTemplate null\n    SymbolInspectArgsTemplate: &SymbolInspectArgsTemplate null\n    SymbolToStringTemplate: &SymbolToStringTemplate null\n    SymbolToStringArgsTemplate: &SymbolToStringArgsTemplate null\n    Decimal128ToStringTemplate: &Decimal128ToStringTemplate null\n    Decimal128ToStringArgsTemplate: &Decimal128ToStringArgsTemplate null\n    # non bson-specific\n    DateSymbolNowTemplate: &DateSymbolNowTemplate !!js/function >\n        () => {\n            return Date.now;\n        }\n    DateSymbolNowArgsTemplate: &DateSymbolNowArgsTemplate null\n\n    #############################################\n    #         Symbol Attributes/Methods         #\n    #                                           #\n    # These\'re variables or functions called on #\n    # symbols. Also called bson-utils.          #\n    #                                           #\n    # They are basically the same thing as      #\n    # object attributes/methods, but need to be #\n    # distinguished since they are separate     #\n    # namespaces that happen to have the same   #\n    # name which is v confusing.                #\n    #                                           #\n    # For example, ObjectId().toString() is an  #\n    # object method, while ObjectId.fromString  #\n    # is a symbol attribute. These are two      #\n    # separate ObjectId related namespaces that #\n    # don\'t overlap.                            #\n    #                                           #\n    #############################################\n    LongSymbolMaxTemplate: &LongSymbolMaxTemplate null\n    LongSymbolMaxArgsTemplate: &LongSymbolMaxArgsTemplate null\n    LongSymbolMinTemplate: &LongSymbolMinTemplate null\n    LongSymbolMinArgsTemplate: &LongSymbolMinArgsTemplate null\n    LongSymbolZeroTemplate: &LongSymbolZeroTemplate null\n    LongSymbolZeroArgsTemplate: &LongSymbolZeroArgsTemplate null\n    LongSymbolOneTemplate: &LongSymbolOneTemplate null\n    LongSymbolOneArgsTemplate: &LongSymbolOneArgsTemplate null\n    LongSymbolNegOneTemplate: &LongSymbolNegOneTemplate null\n    LongSymbolNegOneArgsTemplate: &LongSymbolNegOneArgsTemplate null\n    LongSymbolFromBitsTemplate: &LongSymbolFromBitsTemplate null\n    LongSymbolFromBitsArgsTemplate: &LongSymbolFromBitsArgsTemplate null\n    LongSymbolFromIntTemplate: &LongSymbolFromIntTemplate null\n    LongSymbolFromIntArgsTemplate: &LongSymbolFromIntArgsTemplate null\n    LongSymbolFromNumberTemplate: &LongSymbolFromNumberTemplate null\n    LongSymbolFromNumberArgsTemplate: &LongSymbolFromNumberArgsTemplate null\n    LongSymbolFromStringTemplate: &LongSymbolFromStringTemplate null\n    LongSymbolFromStringArgsTemplate: &LongSymbolFromStringArgsTemplate null\n    Decimal128SymbolFromStringTemplate: &Decimal128SymbolFromStringTemplate null\n    Decimal128SymbolFromStringArgsTemplate: &Decimal128SymbolFromStringArgsTemplate null\n    ObjectIdCreateFromHexStringTemplate: &ObjectIdCreateFromHexStringTemplate null\n    ObjectIdCreateFromHexStringArgsTemplate: &ObjectIdCreateFromHexStringArgsTemplate null\n    ObjectIdCreateFromTimeTemplate: &ObjectIdCreateFromTimeTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs.createFromTime;\n        }\n    ObjectIdCreateFromTimeArgsTemplate: &ObjectIdCreateFromTimeArgsTemplate null\n    # non bson-specific would go here, but there aren\'t any atm.\n\n    #############################################\n    #                 Imports                   #\n    #                                           #\n    # Each type has a \'code\' that is consistent #\n    # between languages. The import templates   #\n    # for each code generate the required       #\n    # statement for each type. No args.         #\n    #                                           #\n    # The ImportTemplate collects everything    #\n    # into one statement.                       #\n    #                                           #\n    #############################################\n    ImportTemplate: &ImportTemplate null\n    DriverImportTemplate: &DriverImportTemplate null\n    0ImportTemplate: &0ImportTemplate null\n    1ImportTemplate: &1ImportTemplate null\n    2ImportTemplate: &2ImportTemplate null\n    3ImportTemplate: &3ImportTemplate null\n    4ImportTemplate: &4ImportTemplate null\n    5ImportTemplate: &5ImportTemplate null\n    6ImportTemplate: &6ImportTemplate null\n    7ImportTemplate: &7ImportTemplate null\n    8ImportTemplate: &8ImportTemplate null\n    9ImportTemplate: &9ImportTemplate null\n    10ImportTemplate: &10ImportTemplate null\n    11ImportTemplate: &11ImportTemplate null\n    12ImportTemplate: &12ImportTemplate null\n    100ImportTemplate: &100ImportTemplate null\n    101ImportTemplate: &101ImportTemplate null\n    102ImportTemplate: &102ImportTemplate null\n    103ImportTemplate: &103ImportTemplate null\n    104ImportTemplate: &104ImportTemplate null\n    105ImportTemplate: &105ImportTemplate null\n    106ImportTemplate: &106ImportTemplate null\n    107ImportTemplate: &107ImportTemplate null\n    108ImportTemplate: &108ImportTemplate null\n    109ImportTemplate: &109ImportTemplate null\n    110ImportTemplate: &110ImportTemplate null\n    111ImportTemplate: &111ImportTemplate null\n    112ImportTemplate: &112ImportTemplate null\n    113ImportTemplate: &113ImportTemplate null\n    114ImportTemplate: &114ImportTemplate null\n    200ImportTemplate: &200ImportTemplate null\n    201ImportTemplate: &201ImportTemplate null\n    300ImportTemplate: &300ImportTemplate null\n    301ImportTemplate: &301ImportTemplate null\n    302ImportTemplate: &302ImportTemplate null\n    303ImportTemplate: &303ImportTemplate null\n    304ImportTemplate: &304ImportTemplate null\n    305ImportTemplate: &305ImportTemplate null\n    306ImportTemplate: &306ImportTemplate null\n# Universal types\n# Everything inherits from StringType because we haven\'t implemented any of them.\nBasicTypes:\n    # Universal basic types\n    _bool: &BoolType\n        <<: *__type\n        id: "_bool"\n        code: 0\n        template: *BoolTypeTemplate\n    _integer: &IntegerType\n        <<: *__type\n        id: "_integer"\n        code: 1\n        template: *IntegerTypeTemplate\n    _long: &LongBasicType\n        <<: *__type\n        id: "_long"\n        code: 2\n        template: *LongBasicTypeTemplate\n    _decimal: &DecimalType\n        <<: *__type\n        id: "_decimal"\n        code: 3\n        template: *DecimalTypeTemplate\n    _hex: &HexType\n        <<: *__type\n        id: "_hex"\n        code: 4\n        template: *HexTypeTemplate\n    _octal: &OctalType\n        <<: *__type\n        id: "_octal"\n        code: 5\n        template: *OctalTypeTemplate\n    _numeric: &NumericType\n        <<: *__type\n        id: "_numeric"\n        code: 6\n        template: *NumericTypeTemplate\n    _string: &StringType\n        <<: *__type\n        id: "_string"\n        code: 7\n        template: *StringTypeTemplate\n    _regex: &RegexType\n        <<: *__type\n        id: "_regex"\n        code: 8\n        template: *RegexTypeTemplate\n    _array: &ArrayType\n        <<: *__type\n        id: "_array"\n        code: 9\n        template: *ArrayTypeTemplate\n        argsTemplate: *ArrayTypeArgsTemplate\n    _object: &ObjectType\n        <<: *__type\n        id: "_object"\n        code: 10\n        template: *ObjectTypeTemplate\n        argsTemplate: *ObjectTypeArgsTemplate\n    _null: &NullType\n        <<: *__type\n        id: "_null"\n        code: 11\n        template: *NullTypeTemplate\n    _undefined: &UndefinedType\n        <<: *__type\n        id: "_undefined"\n        code: 12\n        template: *UndefinedTypeTemplate\n\nSyntax:\n    equality:\n        template: *EqualitySyntaxTemplate\n    in:\n        template: *InSyntaxTemplate\n    and:\n        template: *AndSyntaxTemplate\n    or:\n        template: *OrSyntaxTemplate\n    not:\n        template: *NotSyntaxTemplate\n    unary:\n        template: *UnarySyntaxTemplate\n    binary:\n        template: *BinarySyntaxTemplate\n    parens:\n        template: *ParensSyntaxTemplate\n    eos:\n        template: *EosSyntaxTemplate\n    eof:\n        template: *EofSyntaxTemplate\n    # The new template takes in expr, and an optional skip argument and optional\n    # id argument. The skip argument is a boolean that if true then doesn\'t add\n    # new. The code argument is the symbol code being called. The template will check\n    # if it is an exception, i.e. a type that is a constructor but may not use new.\n    new:\n        template: *NewSyntaxTemplate\n    # The regex flags that change symbols between languages can be defined here.\n    # Flags that aren\'t defined can be left blank and will be ignored.\n    regexFlags: *RegexFlags\n    bsonRegexFlags: *BSONRegexFlags\n    driver: *DriverTemplate\nImports:\n    import:\n        template: *ImportTemplate\n    driver:\n        template: *DriverImportTemplate\n    0:\n        template: *0ImportTemplate\n    1:\n        template: *1ImportTemplate\n    2:\n        template: *2ImportTemplate\n    3:\n        template: *3ImportTemplate\n    4:\n        template: *4ImportTemplate\n    5:\n        template: *5ImportTemplate\n    6:\n        template: *6ImportTemplate\n    7:\n        template: *7ImportTemplate\n    8:\n        template: *8ImportTemplate\n    9:\n        template: *9ImportTemplate\n    10:\n        template: *10ImportTemplate\n    11:\n        template: *11ImportTemplate\n    12:\n        template: *12ImportTemplate\n    100:\n        template: *100ImportTemplate\n    101:\n        template: *101ImportTemplate\n    102:\n        template: *102ImportTemplate\n    103:\n        template: *103ImportTemplate\n    104:\n        template: *104ImportTemplate\n    105:\n        template: *105ImportTemplate\n    106:\n        template: *106ImportTemplate\n    107:\n        template: *107ImportTemplate\n    108:\n        template: *108ImportTemplate\n    109:\n        template: *109ImportTemplate\n    110:\n        template: *110ImportTemplate\n    111:\n        template: *111ImportTemplate\n    112:\n        template: *112ImportTemplate\n    113:\n        template: *113ImportTemplate\n    114:\n        template: *114ImportTemplate\n    200:\n        template: *200ImportTemplate\n    201:\n        template: *201ImportTemplate\n    300:\n        template: *300ImportTemplate\n    301:\n        template: *301ImportTemplate\n    302:\n        template: *302ImportTemplate\n    303:\n        template: *303ImportTemplate\n    304:\n        template: *304ImportTemplate\n    305:\n        template: *305ImportTemplate\n    306:\n        template: *306ImportTemplate\nBsonTypes:\n    Code: &CodeType\n        <<: *__type\n        id: "Code"\n        code: 100\n        type: *ObjectType\n        attr:\n            code:\n                callable: *var\n                args: null\n                attr: null\n                id: "code"\n                type: *StringType\n                template: *CodeCodeTemplate\n                argsTemplate: *CodeCodeArgsTemplate\n            scope:\n                callable: *var\n                args: null\n                attr: null\n                id: "scope"\n                type: *StringType\n                template: *CodeScopeTemplate\n                argsTemplate: *CodeScopeArgsTemplate\n    ObjectId: &ObjectIdType\n        <<: *__type\n        id: "ObjectId"\n        code: 101\n        type: *ObjectType\n        attr:\n            toHexString:\n                <<: *__func\n                id: "toHexString"\n                type: *StringType\n            toString:\n                <<: *__func\n                type: *StringType\n                template: *ObjectIdToStringTemplate\n                argsTemplate: *ObjectIdToStringArgsTemplate\n            equals:\n                <<: *__func\n                args:\n                    - [ "ObjectId" ]\n                type: *BoolType\n                template: *ObjectIdEqualsTemplate\n                argsTemplate: *ObjectIdEqualsArgsTemplate\n            getTimestamp:\n                <<: *__func\n                type: *IntegerType\n                template: *ObjectIdGetTimestampTemplate\n                argsTemplate: *ObjectIdGetTimestampArgsTemplate\n    Binary: &BinaryType\n        <<: *__type\n        id: "Binary"\n        code: 102\n        type: *ObjectType\n        attr:\n            value:\n                <<: *__func\n                id: "value"\n                type: *StringType\n                template: *BinaryValueTemplate\n                argsTemplate: *BinaryValueArgsTemplate\n            length:\n                <<: *__func\n                id: "length"\n                type: *IntegerType\n                template: *BinaryLengthTemplate\n                argsTemplate: *BinaryLengthArgsTemplate\n            toString:\n                <<: *__func\n                id: "toString"\n                type: *StringType\n                template: *BinaryToStringTemplate\n                argsTemplate: *BinaryToStringArgsTemplate\n            sub_type:\n                callable: *var\n                args: null\n                attr: null\n                id: "subtype"\n                type: *IntegerType\n                template: *BinarySubtypeTemplate\n                argsTemplate: *BinarySubtypeArgsTemplate\n    DBRef: &DBRefType\n        <<: *__type\n        id: "DBRef"\n        code: 103\n        type: *ObjectType\n        attr:\n            db:\n                callable: *var\n                args: null\n                attr: null\n                id: "db"\n                type: *StringType\n                template: *DBRefGetDBTemplate\n                argsTemplate: *DBRefGetDBArgsTemplate\n            namespace:\n                callable: *var\n                args: null\n                attr: null\n                id: "namespace"\n                type: *StringType\n                template: *DBRefGetCollectionTemplate\n                argsTemplate: *DBRefGetCollectionArgsTemplate\n            oid:\n                callable: *var\n                args: null\n                attr: null\n                id: "oid"\n                type: *StringType\n                template: *DBRefGetIdTemplate\n                argsTemplate: *DBRefGetIdArgsTemplate\n    Double: &DoubleType\n        <<: *__type\n        id: "Double"\n        code: 104\n        type: *ObjectType\n        attr: {}\n    Int32: &Int32Type\n        <<: *__type\n        id: "Int32"\n        code: 105\n        type: *ObjectType\n        attr: {}\n    Long: &LongType\n        <<: *__type\n        id: "Long"\n        code: 106\n        type: *ObjectType\n        attr:\n            toString:\n                <<: *__func\n                id: "LongtoString" # Needs process method\n                args:\n                    - [ *IntegerType, null ]\n                type: *StringType\n                template: *LongToStringTemplate\n                argsTemplate: *LongToStringArgsTemplate\n            equals:\n                <<: *__func\n                id: "equals"\n                args:\n                    - [ "Long" ]\n                type: *BoolType\n                template: *LongEqualsTemplate\n                argsTemplate: *LongEqualsArgsTemplate\n            toInt:\n                <<: *__func\n                id: "toInt"\n                type: *IntegerType\n                template: *LongToIntTemplate\n                argsTemplate: *LongToIntArgsTemplate\n            toNumber:\n                <<: *__func\n                id: "toNumber"\n                type: *DecimalType\n                template: *LongToNumberTemplate\n                argsTemplate: *LongToNumberArgsTemplate\n            compare:\n                <<: *__func\n                id: "compare"\n                args:\n                    - [ "Long" ]\n                type: *StringType\n                template: *LongCompareTemplate\n                argsTemplate: *LongCompareArgsTemplate\n            isOdd:\n                <<: *__func\n                id: "isOdd"\n                type: *BoolType\n                template: *LongIsOddTemplate\n                argsTemplate: *LongIsOddArgsTemplate\n            isZero:\n                <<: *__func\n                id: "isZero"\n                type: *BoolType\n                template: *LongIsZeroTemplate\n                argsTemplate: *LongIsZeroArgsTemplate\n            isNegative:\n                <<: *__func\n                id: "isNegative"\n                type: *BoolType\n                template: *LongIsNegativeTemplate\n                argsTemplate: *LongIsNegativeArgsTemplate\n            negate:\n                <<: *__func\n                id: "negate"\n                type: "Long"\n                template: *LongNegateTemplate\n                argsTemplate: *LongNegateArgsTemplate\n            not:\n                <<: *__func\n                id: "not"\n                type: "Long"\n                template: *LongNotTemplate\n                argsTemplate: *LongNotArgsTemplate\n            notEquals:\n                <<: *__func\n                id: "notEquals"\n                args:\n                    - [ "Long" ]\n                type: *BoolType\n                template: *LongNotEqualsTemplate\n                argsTemplate: *LongNotEqualsArgsTemplate\n            greaterThan:\n                <<: *__func\n                id: "greaterThan"\n                args:\n                    - [ "Long" ]\n                type: *BoolType\n                template: *LongGreaterThanTemplate\n                argsTemplate: *LongGreaterThanArgsTemplate\n            greaterThanOrEqual:\n                <<: *__func\n                id: "greaterThanOrEqual"\n                args:\n                    - [ "Long" ]\n                type: *BoolType\n                template: *LongGreaterThanOrEqualTemplate\n                argsTemplate: *LongGreaterThanOrEqualArgsTemplate\n            lessThan:\n                <<: *__func\n                id: "lessThan"\n                args:\n                    - [ "Long" ]\n                type: *BoolType\n                template: *LongLessThanTemplate\n                argsTemplate: *LongLessThanArgsTemplate\n            lessThanOrEqual:\n                <<: *__func\n                id: "lessThanOrEqual"\n                args:\n                    - [ "Long" ]\n                type: *BoolType\n                template: *LongLessThanOrEqualTemplate\n                argsTemplate: *LongLessThanOrEqualArgsTemplate\n            add:\n                <<: *__func\n                id: "add"\n                args:\n                    - [ "Long" ]\n                type: "Long"\n                template: *LongAddTemplate\n                argsTemplate: *LongAddArgsTemplate\n            subtract:\n                <<: *__func\n                id: "subtract"\n                args:\n                    - [ "Long" ]\n                type: "Long"\n                template: *LongSubtractTemplate\n                argsTemplate: *LongSubtractArgsTemplate\n            multiply:\n                <<: *__func\n                id: "multiply"\n                args:\n                    - [ "Long" ]\n                type: "Long"\n                template: *LongMultiplyTemplate\n                argsTemplate: *LongMultiplyArgsTemplate\n            div:\n                <<: *__func\n                id: "div"\n                args:\n                    - [ "Long" ]\n                type: "Long"\n                template: *LongDivTemplate\n                argsTemplate: *LongDivArgsTemplate\n            modulo:\n                <<: *__func\n                id: "modulo"\n                args:\n                    - [ "Long" ]\n                type: "Long"\n                template: *LongModuloTemplate\n                argsTemplate: *LongModuloArgsTemplate\n            and:\n                <<: *__func\n                id: "and"\n                args:\n                    - [ "Long" ]\n                type: "Long"\n                template: *LongAndTemplate\n                argsTemplate: *LongAndArgsTemplate\n            or:\n                <<: *__func\n                id: "or"\n                args:\n                    - [ "Long" ]\n                type: "Long"\n                template: *LongOrTemplate\n                argsTemplate: *LongOrArgsTemplate\n            xor:\n                <<: *__func\n                id: "xor"\n                args:\n                    - [ "Long" ]\n                type: "Long"\n                template: *LongXorTemplate\n                argsTemplate: *LongXorArgsTemplate\n            shiftLeft:\n                <<: *__func\n                id: "shiftLeft"\n                args:\n                    - [ *IntegerType ]\n                type: "Long"\n                template: *LongShiftLeftTemplate\n                argsTemplate: *LongShiftLeftArgsTemplate\n            shiftRight:\n                <<: *__func\n                id: "shiftRight"\n                args:\n                    - [ *IntegerType ]\n                type: "Long"\n                template: *LongShiftRightTemplate\n                argsTemplate: *LongShiftRightArgsTemplate\n    MinKeyType: &MinKeyType\n        <<: *__type\n        id: "MinKey"\n        code: 107\n        type: *ObjectType\n    MaxKeyType: &MaxKeyType\n        <<: *__type\n        id: "MaxKey"\n        code: 108\n        type: *ObjectType\n    BSONRegExpType: &BSONRegExpType\n        <<: *__type\n        id: "BSONRegExp"\n        code: 109\n        type: *ObjectType #TODO: add pattern + options\n    Timestamp: &TimestampType\n        <<: *__type\n        id: "Timestamp"\n        code: 110\n        type: *ObjectType\n        attr:\n            toString:\n                <<: *__func\n                id: "toString"\n                type: *StringType\n                template: *TimestampToStringTemplate\n                argsTemplate: *TimestampToStringArgsTemplate\n            equals:\n                <<: *__func\n                id: "equals"\n                args:\n                    - [ "Timestamp" ]\n                type: *BoolType\n                template: *TimestampEqualsTemplate\n                argsTemplate: *TimestampEqualsArgsTemplate\n            getLowBits:\n                <<: *__func\n                id: "getLowBits"\n                type: *IntegerType\n                template: *TimestampGetLowBitsTemplate\n                argsTemplate: *TimestampGetLowBitsArgsTemplate\n            getHighBits:\n                <<: *__func\n                id: "getHighBits"\n                type: *IntegerType\n                template: *TimestampGetHighBitsTemplate\n                argsTemplate: *TimestampGetHighBitsArgsTemplate\n            compare:\n                <<: *__func\n                id: "compare"\n                args:\n                    - [ "Timestamp" ]\n                type: *StringType\n                template: *TimestampCompareTemplate\n                argsTemplate: *TimestampCompareArgsTemplate\n            notEquals:\n                <<: *__func\n                id: "notEquals"\n                args:\n                    - [ "Timestamp" ]\n                type: *BoolType\n                template: *TimestampNotEqualsTemplate\n                argsTemplate: *TimestampNotEqualsArgsTemplate\n            greaterThan:\n                <<: *__func\n                id: "greaterThan"\n                args:\n                    - [ "Timestamp" ]\n                type: *BoolType\n                template: *TimestampGreaterThanTemplate\n                argsTemplate: *TimestampGreaterThanArgsTemplate\n            greaterThanOrEqual:\n                <<: *__func\n                id: "greaterThanOrEqual"\n                args:\n                    - [ "Timestamp" ]\n                type: *BoolType\n                template: *TimestampGreaterThanOrEqualTemplate\n                argsTemplate: *TimestampGreaterThanOrEqualArgsTemplate\n            lessThan:\n                <<: *__func\n                id: "lessThan"\n                args:\n                    - [ "Timestamp" ]\n                type: *BoolType\n                template: *TimestampLessThanTemplate\n                argsTemplate: *TimestampLessThanArgsTemplate\n            lessThanOrEqual:\n                <<: *__func\n                id: "lessThanOrEqual"\n                args:\n                    - [ "Timestamp" ]\n                type: *BoolType\n                template: *TimestampLessThanOrEqualTemplate\n                argsTemplate: *TimestampLessThanOrEqualArgsTemplate\n    BSONSymbol: &SymbolType\n        <<: *__type\n        id: "BSONSymbol"\n        code: 111\n        type: *ObjectType\n        attr:\n            valueOf:\n                <<: *__func\n                id: "valueOf"\n                type: *StringType\n                template: *SymbolValueOfTemplate\n                argsTemplate: *SymbolValueOfArgsTemplate\n            toString:\n                <<: *__func\n                id: "toString"\n                type: *StringType\n                template: *SymbolToStringTemplate\n                argsTemplate: *SymbolToStringArgsTemplate\n            inspect:\n                <<: *__func\n                id: "inspect"\n                type: *StringType\n                template: *SymbolInspectTemplate\n                argsTemplate: *SymbolInspectArgsTemplate\n    Decimal128: &Decimal128Type\n        <<: *__type\n        id: "Decimal128"\n        code: 112\n        type: *ObjectType\n        attr:\n            toString:\n                <<: *__func\n                id: "toString"\n                type: *StringType\n                template: *Decimal128ToStringTemplate\n                argsTemplate: *Decimal128ToStringArgsTemplate\nNativeTypes:\n    Date: &DateType\n        <<: *__type\n        id: "Date"\n        code: 200\n        type: *ObjectType\n        attr: {} # TODO: no built-in date methods added yet\nBsonSymbols:\n    Code: &CodeSymbol\n        id: "CodeFromJS"\n        code: 100\n        callable: *constructor\n        args:\n            - [ *StringType ]\n            - [ *ObjectType, null ]\n        type: *CodeType\n        attr: {}\n        template: *CodeSymbolTemplate\n        argsTemplate: *CodeSymbolArgsTemplate\n    ObjectId: &ObjectIdSymbol\n        id: "ObjectId"\n        code: 101\n        callable: *constructor\n        args:\n            - [ *StringType, *NumericType, null ]\n        type: *ObjectIdType\n        attr:\n            createFromHexString:\n                <<: *__func\n                id: "createFromHexString"\n                args:\n                    - [ *StringType ]\n                type: *ObjectIdType\n                template: *ObjectIdCreateFromHexStringTemplate\n                argsTemplate: *ObjectIdCreateFromHexStringArgsTemplate\n            createFromTime:\n                <<: *__func\n                id: "ObjectIdCreateFromTime"\n                args:\n                    - [ *NumericType ]\n                type: *ObjectIdType\n                template: *ObjectIdCreateFromTimeTemplate\n                argsTemplate: *ObjectIdCreateFromTimeArgsTemplate\n            isValid:\n                <<: *__func\n                id: "isValid"\n                args:\n                    - [ *StringType ]\n                type: *BoolType\n                template: *ObjectIdIsValidTemplate\n                argsTemplate: *ObjectIdIsValidArgsTemplate\n        template: *ObjectIdSymbolTemplate\n        argsTemplate: *ObjectIdSymbolArgsTemplate\n    Binary: &BinarySymbol\n        id: "Binary"\n        code: 102\n        callable: *constructor\n        args:\n            - [ *StringType, *NumericType, *ObjectType ]\n            - [ *NumericType, null ]\n        type: *BinaryType\n        attr:\n            SUBTYPE_DEFAULT:\n                id: "SUBTYPE_DEFAULT"\n                callable: *var\n                args: null\n                type: *IntegerType\n                template: *BinarySymbolSubtypeDefaultTemplate\n            SUBTYPE_FUNCTION:\n                id: "SUBTYPE_FUNCTION"\n                callable: *var\n                args: null\n                type: *IntegerType\n                template: *BinarySymbolSubtypeFunctionTemplate\n            SUBTYPE_BYTE_ARRAY:\n                id: "SUBTYPE_BYTE_ARRAY"\n                callable: *var\n                args: null\n                type: *IntegerType\n                template: *BinarySymbolSubtypeByteArrayTemplate\n            SUBTYPE_UUID_OLD:\n                id: "SUBTYPE_UUID_OLD"\n                callable: *var\n                args: null\n                type: *IntegerType\n                template: *BinarySymbolSubtypeUuidOldTemplate\n            SUBTYPE_UUID:\n                id: "SUBTYPE_UUID"\n                callable: *var\n                args: null\n                type: *IntegerType\n                template: *BinarySymbolSubtypeUuidTemplate\n            SUBTYPE_MD5:\n                id: "SUBTYPE_MD5"\n                callable: *var\n                args: null\n                type: *IntegerType\n                template: *BinarySymbolSubtypeMd5Template\n            SUBTYPE_USER_DEFINED:\n                id: "SUBTYPE_USER_DEFINED"\n                callable: *var\n                args: null\n                type: *IntegerType\n                template: *BinarySymbolSubtypeUserDefinedTemplate\n        template: *BinarySymbolTemplate\n        argsTemplate: *BinarySymbolArgsTemplate\n    DBRef:\n        id: "DBRef"\n        code: 103\n        callable: *constructor\n        args:\n            - [ *StringType ]\n            - [ *ObjectIdType ]\n            - [ *StringType, null ]\n        type: *DBRefType\n        attr: {}\n        template: *DBRefSymbolTemplate\n        argsTemplate: *DBRefSymbolArgsTemplate\n    Double:\n        id: "Double"\n        code: 104\n        callable: *constructor\n        args:\n            - [ *NumericType, *StringType ]\n        type: *DoubleType\n        attr: {}\n        template: *DoubleSymbolTemplate\n        argsTemplate: *DoubleSymbolArgsTemplate\n    Int32:\n        id: "Int32"\n        code: 105\n        callable: *constructor\n        args:\n            - [ *NumericType, *StringType ]\n        type: *Int32Type\n        attr: {}\n        template: *Int32SymbolTemplate\n        argsTemplate: *Int32SymbolArgsTemplate\n    Long:\n        id: "Long"\n        code: 106\n        callable: *constructor\n        args:\n            - [ *IntegerType ]\n            - [ *IntegerType ]\n        type: *LongType\n        attr:\n            MAX_VALUE:\n                id: "MAX_VALUE"\n                callable: *var\n                args: null\n                type: *LongType\n                attr: {}\n                template: *LongSymbolMaxTemplate\n                argsTemplate: *LongSymbolMaxArgsTemplate\n            MIN_VALUE:\n                id: "MIN_VALUE"\n                callable: *var\n                args: null\n                type: *LongType\n                attr: {}\n                template: *LongSymbolMinTemplate\n                argsTemplate: *LongSymbolMinArgsTemplate\n            ZERO:\n                id: "ZERO"\n                callable: *var\n                args: null\n                type: *LongType\n                attr: {}\n                template: *LongSymbolZeroTemplate\n                argsTemplate: *LongSymbolZeroArgsTemplate\n            ONE:\n                id: "ONE"\n                callable: *var\n                args: null\n                type: *LongType\n                attr: {}\n                template: *LongSymbolOneTemplate\n                argsTemplate: *LongSymbolOneArgsTemplate\n            NEG_ONE:\n                id: "NEG_ONE"\n                callable: *var\n                args: null\n                type: *LongType\n                attr: {}\n                template: *LongSymbolNegOneTemplate\n                argsTemplate: *LongSymbolNegOneArgsTemplate\n            fromBits:\n                id: "LongfromBits" # Needs process method\n                callable: *func\n                args:\n                    - [ *IntegerType ]\n                    - [ *IntegerType ]\n                type: *LongType\n                attr: {}\n                template: *LongSymbolFromBitsTemplate\n                argsTemplate: *LongSymbolFromBitsArgsTemplate\n            fromInt:\n                id: "fromInt"\n                callable: *func\n                args:\n                    - [ *IntegerType ]\n                type: *LongType\n                attr: {}\n                template: *LongSymbolFromIntTemplate\n                argsTemplate: *LongSymbolFromIntArgsTemplate\n            fromNumber:\n                id: "fromNumber"\n                callable: *func\n                args:\n                    - [ *NumericType ]\n                type: *LongType\n                attr: {}\n                template: *LongSymbolFromNumberTemplate\n                argsTemplate: *LongSymbolFromNumberArgsTemplate\n            fromString:\n                id: "fromString"\n                callable: *func\n                args:\n                    - [ *StringType ]\n                    - [ *IntegerType, null ]\n                type: *LongType\n                attr: {}\n                template: *LongSymbolFromStringTemplate\n                argsTemplate: *LongSymbolFromStringArgsTemplate\n        template: *LongSymbolTemplate\n        argsTemplate: *LongSymbolArgsTemplate\n    MinKey:\n        id: "MinKey"\n        code: 107\n        callable: *constructor\n        args: []\n        type: *MinKeyType\n        attr: {}\n        template: *MinKeySymbolTemplate\n        argsTemplate: *MinKeySymbolArgsTemplate\n    MaxKey:\n        id: "MaxKey"\n        code: 108\n        callable: *constructor\n        args: []\n        type: *MaxKeyType\n        attr: {}\n        template: *MaxKeySymbolTemplate\n        argsTemplate: *MaxKeySymbolArgsTemplate\n    Timestamp:\n        id: "Timestamp"\n        code: 110\n        callable: *constructor\n        args:\n            - [ *IntegerType ]\n            - [ *IntegerType ]\n        type: *TimestampType\n        attr: {} #TODO: add fromInt, fromNumber, fromBits, fromString\n        template: *TimestampSymbolTemplate\n        argsTemplate: *TimestampSymbolArgsTemplate\n    BSONSymbol:\n        id: "BSONSymbol"\n        code: 111\n        callable: *constructor\n        args:\n            - [ *StringType ]\n        type: *SymbolType\n        attr: {}\n        template: *SymbolSymbolTemplate\n        argsTemplate: *SymbolSymbolArgsTemplate\n    BSONRegExp:\n        id: "BSONRegExp"\n        code: 109\n        callable: *constructor\n        args:\n            - [ *StringType ]\n            - [ *StringType, null ]\n        type: *BSONRegExpType\n        attr: {}\n        template: *BSONRegExpSymbolTemplate\n        argsTemplate: *BSONRegExpSymbolArgsTemplate\n    Decimal128:\n        id: "Decimal128"\n        code: 112\n        callable: *constructor\n        args:\n            - [ *ObjectType ]\n        type: *Decimal128Type\n        attr:\n            fromString:\n                id: "fromString"\n                callable: *func\n                args:\n                    - [ *StringType ]\n                type: *Decimal128Type\n                attr: {}\n                template: *Decimal128SymbolFromStringTemplate\n                argsTemplate: *Decimal128SymbolFromStringArgsTemplate\n        template: *Decimal128SymbolTemplate\n        argsTemplate: *Decimal128SymbolArgsTemplate\n\nNativeSymbols:\n    Number:\n        id: "Number"\n        code: 2\n        callable: *constructor\n        args:\n            - [ *IntegerType, *StringType ]\n        type: *NumericType\n        attr: {} # TODO: no built-in number funcs added yet\n        template: *NumberSymbolTemplate\n        argsTemplate: *NumberSymbolArgsTemplate\n    Date: # Needs process method\n        id: "Date"\n        code: 200\n        callable: *constructor\n        args:\n            - [ *StringType, *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n        type: *DateType\n        attr: # TODO: add more date funcs?\n            now:\n                id: "now"\n                code: 200.1\n                callable: *func\n                args: []\n                type: *DateType\n                attr: {}\n                template: *DateSymbolNowTemplate\n                argsTemplate: *DateSymbolNowArgsTemplate\n        template: *DateSymbolTemplate\n        argsTemplate: *DateSymbolArgsTemplate\n    RegExp: # Needs process method\n        id: "RegExp"\n        code: 8\n        callable: *constructor\n        args:\n            - [ *StringType, *RegexType ]\n            - [ *StringType, null ]\n        type: *RegexType\n        attr: {}\n        template: *RegExpSymbolTemplate\n        argsTemplate: *RegExpSymbolArgsTemplate\n'},79666:e=>{e.exports="SymbolTypes:\n    VAR: &var 0\n    CONSTRUCTOR: &constructor 1\n    FUNC: &func 2\n# Internal patterns to save typing\n__type: &__type\n    id: null\n    callable: *var\n    args: null\n    type: null\n    attr: {}\n    template: null\n    argsTemplate: null\n__func: &__func\n    callable: *func\n    args: []\n    attr: {}\n    template: null\n    argsTemplate: null\n\n# Python Templates\nTemplates:\n    # Misc\n    RegexFlags: &RegexFlags\n        i: 'i'\n        m: 'm'\n        u: 'a'\n        y: ''\n        g: 's'\n    BSONRegexFlags: &BSONRegexFlags\n        i: 'i'\n        m: 'm'\n        x: 'x'\n        s: 's'\n        l: 'l'\n        u: 'u'\n    # Syntax\n\n   # filter, project, sort, collation, skip, limit, maxTimeMS\n    DriverTemplate: &DriverTemplate !!js/function >\n        (spec) => {\n            const comment = `# Requires the PyMongo package.\n        # https://api.mongodb.com/python/current`;\n            const translateKey = {\n                filter: 'filter',\n                project: 'projection',\n                sort: 'sort',\n                collation: 'collation',\n                skip: 'skip',\n                limit: 'limit',\n                maxTimeMS: 'max_time_ms'\n            };\n            const options = spec.options;\n            delete spec.options;\n\n            const connect = `client = MongoClient('${options.uri}')`;\n            const coll = `client['${options.database}']['${options.collection}']`;\n\n            if ('aggregation' in spec) {\n                return `${comment}\\n\\n${connect}\\nresult = ${coll}.aggregate(${spec.aggregation})`;\n            }\n\n            const vars = Object.keys(spec).reduce(\n                (result, k) => {\n                    if (k === 'sort') {\n                        return `${result}\\n${k}=list(${spec[k]}.items())`;\n                    }\n                    return `${result}\\n${k}=${spec[k]}`;\n                },\n                connect\n            );\n\n            const args = Object.keys(spec).reduce(\n                (result, k) => {\n                    const divider = result === '' ? '' : ',\\n';\n                    return `${result}${divider}  ${\n                        k in translateKey ? translateKey[k] : k\n                    }=${k}`;\n                },\n                ''\n            );\n            const cmd = `result = ${coll}.find(\\n${args}\\n)`;\n\n            return `${comment}\\n\\n${vars}\\n\\n${cmd}`;\n        }\n    EqualitySyntaxTemplate: &EqualitySyntaxTemplate !!js/function >\n        (lhs, op, rhs) => {\n            if (op.includes('!')) {\n                return `${lhs} != ${rhs}`;\n            }\n            else if (op === '==' || op === '===' || op === 'is') {\n                return `${lhs} == ${rhs}`;\n            }\n            return `${lhs} ${op} ${rhs}`;\n        }\n    InSyntaxTemplate: &InSyntaxTemplate !!js/function >\n        (lhs, op, rhs) => {\n            let str = 'in';\n            if (op.includes('!') || op.includes('not')) {\n                str = 'not in';\n            }\n            return `${lhs} ${str} ${rhs}`\n        }\n    AndSyntaxTemplate: &AndSyntaxTemplate !!js/function >\n        (args) => {\n            return args.join(' and ');\n        }\n    OrSyntaxTemplate: &OrSyntaxTemplate !!js/function >\n        (args) => {\n            return args.join(' or ');\n        }\n    NotSyntaxTemplate: &NotSyntaxTemplate !!js/function >\n        (arg) => {\n            return `not ${arg}`;\n        }\n    UnarySyntaxTemplate: &UnarySyntaxTemplate null\n    BinarySyntaxTemplate: &BinarySyntaxTemplate !!js/function >\n        (args) => {\n            return args.reduce((s, op, i, arr) => {\n                if (i % 2 === 0) {\n                    return s;\n                }\n                const rhs = arr[i + 1];\n                switch(op) {\n                    case '//':\n                        return `${s} // ${rhs}`;\n                    case '**':\n                        return `${s} ** ${rhs}`;\n                    default:\n                        return `${s} ${op} ${rhs}`;\n                }\n            }, args[0]);\n        }\n    ParensSyntaxTemplate: &ParensSyntaxTemplate null\n    EosSyntaxTemplate: &EosSyntaxTemplate null\n    EofSyntaxTemplate: &EofSyntaxTemplate null\n    NewTemplate: &NewSyntaxTemplate null\n    # BSON Object Type templates\n    CodeTypeTemplate: &CodeTypeTemplate null\n    StringTypeTemplate: &StringTypeTemplate !!js/function >\n        (str) => {\n          let newStr = str;\n          if (\n            (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n            (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n            newStr = str.substr(1, str.length - 2);\n          }\n          return `'${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}'`;\n        }\n    RegexTypeTemplate: &RegexTypeTemplate !!js/function >\n        (pattern, flags) => {\n            flags = flags === '' ? '' : `(?${flags})`;\n            const escaped = pattern.replace(/\\\\(?!\\/)/, '\\\\\\\\');\n\n            // Double-quote stringify\n            const str = escaped + flags;\n            let newStr = str;\n            if (\n                (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                    newStr = str.substr(1, str.length - 2);\n            }\n            return `re.compile(r\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\")`;\n        }\n    BoolTypeTemplate: &BoolTypeTemplate !!js/function >\n        (str) => {\n          return `${str.charAt(0).toUpperCase()}${str.slice(1)}`;\n        }\n    IntegerTypeTemplate: &IntegerTypeTemplate null\n    DecimalTypeTemplate: &DecimalTypeTemplate null\n    LongBasicTypeTemplate: &LongBasicTypeTemplate null\n    HexTypeTemplate: &HexTypeTemplate null\n    OctalTypeTemplate: &OctalTypeTemplate !!js/function >\n        (literal) => {\n            let offset = 0;\n\n            if (\n                literal.charAt(0) === '0' &&\n                (literal.charAt(1) === '0' || literal.charAt(1) === 'o' || literal.charAt(1) === 'O')\n            ) {\n                offset = 2;\n            } else if (literal.charAt(0) === '0') {\n                offset = 1;\n            }\n\n            literal = `0o${literal.substr(offset, literal.length - 1)}`;\n\n            return literal;\n        }\n    NumericTypeTemplate: &NumericTypeTemplate null\n    ArrayTypeTemplate: &ArrayTypeTemplate !!js/function >\n        (literal, depth) => {\n            depth++;\n            if (literal === '') {\n                return '[]'\n            }\n            const indent = '\\n' + '    '.repeat(depth);\n            const closingIndent = '\\n' + '    '.repeat(depth - 1);\n\n            return `[${indent}${literal}${closingIndent}]`;\n        }\n    ArrayTypeArgsTemplate: &ArrayTypeArgsTemplate null\n    NullTypeTemplate: &NullTypeTemplate !!js/function >\n        () => {\n            return 'None';\n        }\n    UndefinedTypeTemplate: &UndefinedTypeTemplate !!js/function >\n        () => {\n            return 'None';\n        }\n    ObjectTypeTemplate: &ObjectTypeTemplate !!js/function >\n        (literal, depth) => {\n            if (literal === '') {\n                return '{}';\n            }\n            return literal;\n        }\n    ObjectTypeArgsTemplate: &ObjectTypeArgsTemplate !!js/function >\n        (args, depth) => {\n            if (args.length === 0) {\n                return '{}';\n            }\n            depth++;\n            const indent = '\\n' + '    '.repeat(depth);\n            const closingIndent = '\\n' + '    '.repeat(depth - 1);\n            const singleStringify = (str) => {\n                let newStr = str;\n                if (\n                  (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                  (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                    newStr = str.substr(1, str.length - 2);\n                }\n                return `'${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}'`;\n            }\n\n            const pairs = args.map((arg) => {\n                return `${indent}${singleStringify(arg[0])}: ${arg[1]}`;\n            }).join(', ');\n\n            return `{${pairs}${closingIndent}}`;\n        }\n    # BSON Object Method templates\n    CodeCodeTemplate: &CodeCodeTemplate !!js/function >\n        (lhs) => {\n            return `str(${lhs})`;\n        }\n    CodeCodeArgsTemplate: &CodeCodeArgsTemplate null\n    CodeScopeTemplate: &CodeScopeTemplate null\n    CodeScopeArgsTemplate: &CodeScopeArgsTemplate null\n    ObjectIdToStringTemplate: &ObjectIdToStringTemplate !!js/function >\n        (lhs) => {\n            return `str(${lhs})`;\n        }\n    ObjectIdToStringArgsTemplate: &ObjectIdToStringArgsTemplate !!js/function >\n        (lhs) => {\n            return '';\n        }\n    ObjectIdEqualsTemplate: &ObjectIdEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} ==`;\n        }\n    ObjectIdEqualsArgsTemplate: &ObjectIdEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    ObjectIdGetTimestampTemplate: &ObjectIdGetTimestampTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.generation_time`;\n        }\n    ObjectIdGetTimestampArgsTemplate: &ObjectIdGetTimestampArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    BinaryValueTemplate: &BinaryValueTemplate !!js/function >\n        () => {\n            return '';\n        }\n    BinaryValueArgsTemplate: &BinaryValueArgsTemplate !!js/function >\n        (lhs) => {\n            return `str(${lhs})`;\n        }\n    BinaryLengthTemplate: &BinaryLengthTemplate !!js/function >\n        () => {\n            return '';\n        }\n    BinaryLengthArgsTemplate: &BinaryLengthArgsTemplate !!js/function >\n        (lhs) => {\n            return `len(${lhs})`;\n        }\n    BinaryToStringTemplate: &BinaryToStringTemplate !!js/function >\n        () => {\n            return '';\n        }\n    BinaryToStringArgsTemplate: &BinaryToStringArgsTemplate !!js/function >\n        (lhs) => {\n            return `str(${lhs})`;\n        }\n    BinarySubtypeTemplate: &BinarySubtypeTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.subtype`;\n        }\n    BinarySubtypeArgsTemplate: &BinarySubtypeArgsTemplate null\n    DBRefGetDBTemplate: &DBRefGetDBTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.database`;\n        }\n    DBRefGetCollectionTemplate: &DBRefGetCollectionTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.collection`;\n        }\n    DBRefGetIdTemplate: &DBRefGetIdTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.id`;\n        }\n    DBRefGetIdArgsTemplate: &DBRefGetIdArgsTemplate !!js/function\n        () => {\n            return '';\n        }\n    DBRefGetDBArgsTemplate: &DBRefGetDBArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    DBRefGetCollectionArgsTemplate: &DBRefGetCollectionArgsTemplate !!js/function\n        () => {\n            return '';\n        }\n    LongEqualsTemplate: &LongEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} ==`;\n        }\n    LongEqualsArgsTemplate: &LongEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongToIntTemplate: &LongToIntTemplate !!js/function >\n        (lhs) => {\n            return `int(${lhs})`;\n        }\n    LongToIntArgsTemplate: &LongToIntArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongToStringTemplate: &LongToStringTemplate !!js/function >\n        () => {\n            return 'str';\n        }\n    LongToStringArgsTemplate: &LongToStringArgsTemplate !!js/function >\n        (lhs) => {\n            return `(${lhs})`;\n        }\n    LongToNumberTemplate: &LongToNumberTemplate !!js/function >\n        (lhs) => {\n            return `float(${lhs})`;\n        }\n    LongToNumberArgsTemplate: &LongToNumberArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongAddTemplate: &LongAddTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} +`;\n        }\n    LongAddArgsTemplate: &LongAddArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongSubtractTemplate: &LongSubtractTemplate !!js/function >\n        (arg) => {\n            return `${arg} -`;\n        }\n    LongSubtractArgsTemplate: &LongSubtractArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongMultiplyTemplate: &LongMultiplyTemplate !!js/function >\n        (arg) => {\n            return `${arg} *`;\n        }\n    LongMultiplyArgsTemplate: &LongMultiplyArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongDivTemplate: &LongDivTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} /`;\n        }\n    LongDivArgsTemplate: &LongDivArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongModuloTemplate: &LongModuloTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} %`;\n        }\n    LongModuloArgsTemplate: &LongModuloArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongAndTemplate: &LongAndTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} &`;\n        }\n    LongAndArgsTemplate: &LongAndArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongOrTemplate: &LongOrTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} |`;\n        }\n    LongOrArgsTemplate: &LongOrArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongXorTemplate: &LongXorTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} ^`;\n        }\n    LongXorArgsTemplate: &LongXorArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongShiftLeftTemplate: &LongShiftLeftTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <<`;\n        }\n    LongShiftLeftArgsTemplate: &LongShiftLeftArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongShiftRightTemplate: &LongShiftRightTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >>`;\n        }\n    LongShiftRightArgsTemplate: &LongShiftRightArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongCompareTemplate: &LongCompareTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} -`;\n        }\n    LongCompareArgsTemplate: &LongCompareArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongIsOddTemplate: &LongIsOddTemplate !!js/function >\n        (lhs) => {\n            return `(${lhs} % 2) == 1`;\n        }\n    LongIsOddArgsTemplate: &LongIsOddArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongIsZeroTemplate: &LongIsZeroTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} == 0`;\n        }\n    LongIsZeroArgsTemplate: &LongIsZeroArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongIsNegativeTemplate: &LongIsNegativeTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} < 0`;\n        }\n    LongIsNegativeArgsTemplate: &LongIsNegativeArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongNegateTemplate: &LongNegateTemplate !!js/function >\n        () => {\n            return '-';\n        }\n    LongNegateArgsTemplate: &LongNegateArgsTemplate !!js/function >\n        (lhs) => {\n            return lhs;\n        }\n    LongNotTemplate: &LongNotTemplate !!js/function >\n        () => {\n            return '~';\n        }\n    LongNotArgsTemplate: &LongNotArgsTemplate !!js/function >\n        (lhs) => {\n            return lhs;\n        }\n    LongNotEqualsTemplate: &LongNotEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} !=`;\n        }\n    LongNotEqualsArgsTemplate: &LongNotEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongGreaterThanTemplate: &LongGreaterThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >`;\n        }\n    LongGreaterThanArgsTemplate: &LongGreaterThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongGreaterThanOrEqualTemplate: &LongGreaterThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >=`;\n        }\n    LongGreaterThanOrEqualArgsTemplate: &LongGreaterThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongLessThanTemplate: &LongLessThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <`;\n        }\n    LongLessThanArgsTemplate: &LongLessThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongLessThanOrEqualTemplate: &LongLessThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <=`;\n        }\n    LongLessThanOrEqualArgsTemplate: &LongLessThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongFloatApproxTemplate: &LongFloatApproxTemplate !!js/function >\n        (lhs) => {\n            return `float(${lhs})`;\n        }\n    LongTopTemplate: &LongTopTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >> 32`;\n        }\n    LongBottomTemplate: &LongBottomTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} & 0x0000ffff`;\n        }\n    TimestampToStringTemplate: &TimestampToStringTemplate !!js/function >\n        () => {\n            return 'str';\n        }\n    TimestampToStringArgsTemplate: &TimestampToStringArgsTemplate !!js/function >\n        (lhs) => {\n            return `(${lhs})`;\n        }\n    TimestampEqualsTemplate: &TimestampEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} ==`;\n        }\n    TimestampEqualsArgsTemplate: &TimestampEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    TimestampGetLowBitsTemplate: &TimestampGetLowBitsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.time`;\n        }\n    TimestampGetLowBitsArgsTemplate: &TimestampGetLowBitsArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    TimestampGetHighBitsTemplate: &TimestampGetHighBitsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.inc`;\n        }\n    TimestampGetHighBitsArgsTemplate: &TimestampGetHighBitsArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    TimestampTTemplate: &TimestampTTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.time`;\n        }\n    TimestampITemplate: &TimestampITemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.inc`;\n        }\n    TimestampAsDateTemplate: &TimestampAsDateTemplate null\n    TimestampAsDateArgsTemplate: &TimestampAsDateArgsTemplate !!js/function >\n        () => {\n            return '.as_datetime()';\n        }\n    TimestampCompareTemplate: &TimestampCompareTemplate !!js/function >\n        (lhs) => {\n            return `(${lhs}.as_datetime() - `;\n        }\n    TimestampCompareArgsTemplate: &TimestampCompareArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}.as_datetime()).total_seconds()`;\n        }\n    TimestampNotEqualsTemplate: &TimestampNotEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} !=`;\n        }\n    TimestampNotEqualsArgsTemplate: &TimestampNotEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    TimestampGreaterThanTemplate: &TimestampGreaterThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >`;\n        }\n    TimestampGreaterThanArgsTemplate: &TimestampGreaterThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    TimestampGreaterThanOrEqualTemplate: &TimestampGreaterThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >=`;\n        }\n    TimestampGreaterThanOrEqualArgsTemplate: &TimestampGreaterThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    TimestampLessThanTemplate: &TimestampLessThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <`;\n        }\n    TimestampLessThanArgsTemplate: &TimestampLessThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    TimestampLessThanOrEqualTemplate: &TimestampLessThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <=`;\n        }\n    TimestampLessThanOrEqualArgsTemplate: &TimestampLessThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    SymbolValueOfTemplate: &SymbolValueOfTemplate !!js/function >\n        (lhs) => {\n            return lhs;\n        }\n    SymbolValueOfArgsTemplate: &SymbolValueOfArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    SymbolInspectTemplate: &SymbolInspectTemplate !!js/function >\n        (lhs) => {\n            return lhs;\n        }\n    SymbolInspectArgsTemplate: &SymbolInspectArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    SymbolToStringTemplate: &SymbolToStringTemplate !!js/function >\n        (lhs) => {\n            return lhs;\n        }\n    SymbolToStringArgsTemplate: &SymbolToStringArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    # Symbol Templates\n    CodeSymbolTemplate: &CodeSymbolTemplate !!js/function > # Also has process method\n        () => {\n            return 'Code';\n        }\n    CodeSymbolArgsTemplate: &CodeSymbolArgsTemplate !!js/function > # Also has process method\n        (lhs, code, scope) => {\n          // Single quote stringify\n          const scopestr = scope === undefined ? '' : `, ${scope}`;\n          let newStr = code === undefined ? '' : code;\n          const str = newStr;\n          if (\n            (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n            (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n            newStr = str.substr(1, str.length - 2);\n          }\n          code = `'${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}'`;\n          return `(${code}${scopestr})`;\n        }\n    ObjectIdSymbolTemplate: &ObjectIdSymbolTemplate null\n    ObjectIdSymbolArgsTemplate: &ObjectIdSymbolArgsTemplate !!js/function >\n        (lhs, str) => {\n          if (!str || str.length === 0) {\n            return '()';\n          }\n          let newStr = str;\n          if (\n            (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n            (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n            newStr = str.substr(1, str.length - 2);\n          }\n          return `('${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}')`;\n        }\n    BinarySymbolTemplate: &BinarySymbolTemplate null\n    BinarySymbolArgsTemplate: &BinarySymbolArgsTemplate !!js/function >\n        (lhs, bytes, type) => {\n            const str = bytes;\n            let newStr = str;\n            if (\n              (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n              (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                newStr = str.substr(1, str.length - 2);\n            }\n            bytes = `'${newStr.replace(/\\\\([\\s\\S])|(')/g, '\\\\$1$2')}'`;\n\n            if (type === null) {\n                return `(b${bytes})`;\n            }\n            return `(b${bytes}, ${type})`;\n        }\n    BinarySymbolSubtypeDefaultTemplate: &BinarySymbolSubtypeDefaultTemplate !!js/function >\n        () => {\n            return 'binary.BINARY_SUBTYPE';\n        }\n    BinarySymbolSubtypeFunctionTemplate: &BinarySymbolSubtypeFunctionTemplate !!js/function >\n        () => {\n            return 'binary.FUNCTION_SUBTYPE';\n        }\n    BinarySymbolSubtypeByteArrayTemplate: &BinarySymbolSubtypeByteArrayTemplate !!js/function >\n        () => {\n            return 'binary.BINARY_SUBTYPE';\n        }\n    BinarySymbolSubtypeUuidOldTemplate: &BinarySymbolSubtypeUuidOldTemplate !!js/function >\n        () => {\n            return 'binary.OLD_UUID_SUBTYPE';\n        }\n    BinarySymbolSubtypeUuidTemplate: &BinarySymbolSubtypeUuidTemplate !!js/function >\n        () => {\n            return 'binary.UUID_SUBTYPE';\n        }\n    BinarySymbolSubtypeMd5Template: &BinarySymbolSubtypeMd5Template !!js/function >\n        () => {\n            return 'binary.MD5_SUBTYPE';\n        }\n    BinarySymbolSubtypeUserDefinedTemplate: &BinarySymbolSubtypeUserDefinedTemplate !!js/function >\n        () => {\n            return 'binary.USER_DEFINED_SUBTYPE';\n        }\n    DBRefSymbolTemplate: &DBRefSymbolTemplate null\n    DBRefSymbolArgsTemplate: &DBRefSymbolArgsTemplate null\n    DoubleSymbolTemplate: &DoubleSymbolTemplate !!js/function >\n        () => {\n            return 'float';\n        }\n    DoubleSymbolArgsTemplate: &DoubleSymbolArgsTemplate null\n    Int32SymbolTemplate: &Int32SymbolTemplate !!js/function >\n        () => {\n            return 'int';\n        }\n    Int32SymbolArgsTemplate: &Int32SymbolArgsTemplate !!js/function >\n        (lhs, arg) => {\n            arg = arg === undefined ? 0 : arg;\n            const str = arg.toString();\n            let newStr = str;\n            if (\n                (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                newStr = str.substr(1, str.length - 2);\n                return `('${newStr}')`;\n            } else {\n                return `(${newStr})`;\n            }\n        }\n    LongSymbolTemplate: &LongSymbolTemplate !!js/function >\n        () => {\n            return 'Int64';\n        }\n    LongSymbolArgsTemplate: &LongSymbolArgsTemplate null\n    LongSymbolMaxTemplate: &LongSymbolMaxTemplate !!js/function >\n        () => {\n            return 'sys.maxsize';\n        }\n    LongSymbolMaxArgsTemplate: &LongSymbolMaxArgsTemplate null\n    LongSymbolMinTemplate: &LongSymbolMinTemplate !!js/function >\n        () => {\n            return '-sys.maxsize -1';\n        }\n    LongSymbolMinArgsTemplate: &LongSymbolMinArgsTemplate null\n    LongSymbolZeroTemplate: &LongSymbolZeroTemplate !!js/function >\n        () => {\n            return 'Int64(0)';\n        }\n    LongSymbolZeroArgsTemplate: &LongSymbolZeroArgsTemplate null\n    LongSymbolOneTemplate: &LongSymbolOneTemplate !!js/function >\n        () => {\n            return 'Int64(1)';\n        }\n    LongSymbolOneArgsTemplate: &LongSymbolOneArgsTemplate null\n    LongSymbolNegOneTemplate: &LongSymbolNegOneTemplate !!js/function >\n        () => {\n            return 'Int64(-1)';\n        }\n    LongSymbolNegOneArgsTemplate: &LongSymbolNegOneArgsTemplate null\n    LongSymbolFromBitsTemplate: &LongSymbolFromBitsTemplate !!js/function > # Also has process method\n        () => {\n            return 'Int64';\n        }\n    LongSymbolFromBitsArgsTemplate: &LongSymbolFromBitsArgsTemplate null\n    LongSymbolFromIntTemplate: &LongSymbolFromIntTemplate !!js/function >\n        () => {\n            return 'Int64';\n        }\n    LongSymbolFromIntArgsTemplate: &LongSymbolFromIntArgsTemplate null\n    LongSymbolFromNumberTemplate: &LongSymbolFromNumberTemplate !!js/function >\n        () => {\n            return 'Int64';\n        }\n    LongSymbolFromNumberArgsTemplate: &LongSymbolFromNumberArgsTemplate null\n    LongSymbolFromStringTemplate: &LongSymbolFromStringTemplate !!js/function >\n        (lhs, arg) => {\n            return 'Int64';\n        }\n    LongSymbolFromStringArgsTemplate: &LongSymbolFromStringArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `(int(${arg}))`;\n        }\n    MinKeySymbolTemplate: &MinKeySymbolTemplate null\n    MinKeySymbolArgsTemplate: &MinKeySymbolArgsTemplate null\n    MaxKeySymbolTemplate: &MaxKeySymbolTemplate null\n    MaxKeySymbolArgsTemplate: &MaxKeySymbolArgsTemplate null\n    TimestampSymbolTemplate: &TimestampSymbolTemplate !!js/function >\n        () => {\n            return 'Timestamp';\n        }\n    TimestampSymbolArgsTemplate: &TimestampSymbolArgsTemplate !!js/function >\n        (lhs, arg1, arg2) => {\n            return `(${arg1 === undefined ? 0 : arg1}, ${arg2 === undefined ? 0 : arg2})`;\n        }\n    SymbolSymbolTemplate: &SymbolSymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    SymbolSymbolArgsTemplate: &SymbolSymbolArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return arg;\n        }\n    BSONRegExpSymbolTemplate: &BSONRegExpSymbolTemplate !!js/function >\n        () => {\n            return 'Regex';\n        }\n    BSONRegExpSymbolArgsTemplate: &BSONRegExpSymbolArgsTemplate !!js/function >\n        (lhs, pattern, flags) => {\n            const singleStringify = (str) => {\n                let newStr = str;\n                if (\n                  (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                  (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                    newStr = str.substr(1, str.length - 2);\n                }\n                return `'${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}'`;\n            }\n            return `(${singleStringify(pattern)}${flags ? ', ' + singleStringify(flags) : ''})`;\n        }\n    Decimal128SymbolTemplate: &Decimal128SymbolTemplate !!js/function >\n        () => {\n            return 'Decimal128';\n        }\n    Decimal128SymbolArgsTemplate: &Decimal128SymbolArgsTemplate !!js/function >\n        (lhs, str) => {\n          let newStr = str;\n          if (\n            (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n            (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n            newStr = str.substr(1, str.length - 2);\n          }\n          return `('${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}')`;\n        }\n    Decimal128SymbolFromStringTemplate: &Decimal128SymbolFromStringTemplate !!js/function >\n        () => {\n            return 'Decimal128';\n        }\n    Decimal128SymbolFromStringArgsTemplate: &Decimal128SymbolFromStringArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `(${arg})`;\n        }\n    Decimal128ToStringTemplate: &Decimal128ToStringTemplate !!js/function >\n        () => {\n            return 'str';\n        }\n    Decimal128ToStringArgsTemplate: &Decimal128ToStringArgsTemplate !!js/function >\n        (lhs) => {\n            return `(${lhs})`;\n        }\n    # BSON Util Templates\n    ObjectIdCreateFromHexStringTemplate: &ObjectIdCreateFromHexStringTemplate !!js/function >\n        () => {\n            return 'ObjectId';\n        }\n    ObjectIdCreateFromHexStringArgsTemplate: &ObjectIdCreateFromHexStringArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `(${arg})`;\n        }\n    ObjectIdCreateFromTimeTemplate: &ObjectIdCreateFromTimeTemplate !!js/function >\n        () => {\n            return `ObjectId.from_datetime`;\n        }\n    ObjectIdCreateFromTimeArgsTemplate: &ObjectIdCreateFromTimeArgsTemplate !!js/function >\n        (lhs, arg, isNumber) => {\n            if (isNumber) {\n                return `(datetime.fromtimestamp(${arg}))`;\n            }\n            return `(${arg})`;\n        }\n    ObjectIdIsValidTemplate: &ObjectIdIsValidTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.is_valid`;\n        }\n    ObjectIdIsValidArgsTemplate: &ObjectIdIsValidArgsTemplate null\n    # JS Symbol Templates\n    NumberSymbolTemplate: &NumberSymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    NumberSymbolArgsTemplate: &NumberSymbolArgsTemplate !!js/function >\n        (lhs, arg) => {\n            arg = arg === undefined ? 0 : arg;\n            const str = arg.toString();\n            let newStr = str;\n            if (\n                (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                newStr = str.substr(1, str.length - 2);\n                return `float('${newStr}')`;\n            } else {\n                return `${newStr}`;\n            }\n        }\n    DateSymbolTemplate: &DateSymbolTemplate !!js/function >\n        () => {\n            return 'datetime';\n        }\n    DateSymbolArgsTemplate: &DateSymbolArgsTemplate !!js/function >\n        (lhs, date, isString) => {\n            const toStr = isString ? '.strftime(\\'%a %b %d %Y %H:%M:%S %Z\\')' : '';\n\n            if (date === null) {\n                return `${lhs}.utcnow()${toStr}`;\n            }\n\n            const dateStr = [\n                date.getUTCFullYear(),\n                date.getUTCMonth() + 1,\n                date.getUTCDate(),\n                date.getUTCHours(),\n                date.getUTCMinutes(),\n                date.getUTCSeconds()\n            ].join(', ');\n\n            return `${lhs}(${dateStr}, tzinfo=timezone.utc)${toStr}`;\n        }\n    DateSymbolNowTemplate: &DateSymbolNowTemplate !!js/function >\n        () => {\n            return 'datetime.utcnow';\n        }\n    DateSymbolNowArgsTemplate: &DateSymbolNowArgsTemplate null\n    RegExpSymbolTemplate: &RegExpSymbolTemplate !!js/function > # Also has process method\n        () => {\n            return 're';\n        }\n    RegExpSymbolArgsTemplate: &RegExpSymbolArgsTemplate null\n    ImportTemplate: &ImportTemplate !!js/function >\n        (args) => {\n            const bson = [];\n            const other = [];\n            Object.keys(args).map(\n                (m) => {\n                    if (m > 99 && m < 200) {\n                        bson.push(args[m]);\n                    } else {\n                        other.push(args[m]);\n                    }\n                }\n            );\n            if (bson.length) {\n                other.push(`from bson import ${bson.join(', ')}`);\n            }\n            return other.join('\\n');\n        }\n    DriverImportTemplate: &DriverImportTemplate !!js/function >\n        () => {\n            return 'from pymongo import MongoClient';\n        }\n    0ImportTemplate: &0ImportTemplate null\n    1ImportTemplate: &1ImportTemplate null\n    2ImportTemplate: &2ImportTemplate null\n    3ImportTemplate: &3ImportTemplate null\n    4ImportTemplate: &4ImportTemplate null\n    5ImportTemplate: &5ImportTemplate null\n    6ImportTemplate: &6ImportTemplate null\n    7ImportTemplate: &7ImportTemplate null\n    8ImportTemplate: &8ImportTemplate !!js/function >\n        () => {\n            return 'import re';\n        }\n    9ImportTemplate: &9ImportTemplate null\n    10ImportTemplate: &10ImportTemplate null\n    11ImportTemplate: &11ImportTemplate null\n    12ImportTemplate: &12ImportTemplate null\n    100ImportTemplate: &100ImportTemplate !!js/function >\n        () => {\n            return 'Code';\n        }\n    101ImportTemplate: &101ImportTemplate !!js/function >\n        () => {\n            return 'ObjectId';\n        }\n    102ImportTemplate: &102ImportTemplate !!js/function >\n        () => {\n            return 'Binary';\n        }\n    103ImportTemplate: &103ImportTemplate !!js/function >\n        () => {\n            return 'DBRef';\n        }\n    104ImportTemplate: &104ImportTemplate null\n    105ImportTemplate: &105ImportTemplate null\n    106ImportTemplate: &106ImportTemplate !!js/function >\n        () => {\n            return 'Int64';\n        }\n    107ImportTemplate: &107ImportTemplate !!js/function >\n        () => {\n            return 'MinKey';\n        }\n    108ImportTemplate: &108ImportTemplate !!js/function >\n        () => {\n            return 'MaxKey';\n        }\n    109ImportTemplate: &109ImportTemplate !!js/function >\n        () => {\n            return 'Regex';\n        }\n    110ImportTemplate: &110ImportTemplate !!js/function >\n        () => {\n            return 'Timestamp';\n        }\n    111ImportTemplate: &111ImportTemplate null\n    112ImportTemplate: &112ImportTemplate !!js/function >\n        () => {\n            return 'Decimal128';\n        }\n    113ImportTemplate: &113ImportTemplate null\n    114ImportTemplate: &114ImportTemplate null\n    200ImportTemplate: &200ImportTemplate !!js/function >\n        () => {\n            return 'from datetime import datetime, tzinfo, timezone';\n        }\n    201ImportTemplate: &201ImportTemplate null\n    300ImportTemplate: &300ImportTemplate null\n    301ImportTemplate: &301ImportTemplate null\n    302ImportTemplate: &302ImportTemplate null\n    303ImportTemplate: &303ImportTemplate null\n    304ImportTemplate: &304ImportTemplate null\n    305ImportTemplate: &305ImportTemplate null\n    306ImportTemplate: &306ImportTemplate null\n# Universal types\n# Everything inherits from StringType because we haven't implemented any of them.\nBasicTypes:\n    # Universal basic types\n    _bool: &BoolType\n        <<: *__type\n        id: \"_bool\"\n        code: 0\n        template: *BoolTypeTemplate\n    _integer: &IntegerType\n        <<: *__type\n        id: \"_integer\"\n        code: 1\n        template: *IntegerTypeTemplate\n    _long: &LongBasicType\n        <<: *__type\n        id: \"_long\"\n        code: 2\n        template: *LongBasicTypeTemplate\n    _decimal: &DecimalType\n        <<: *__type\n        id: \"_decimal\"\n        code: 3\n        template: *DecimalTypeTemplate\n    _hex: &HexType\n        <<: *__type\n        id: \"_hex\"\n        code: 4\n        template: *HexTypeTemplate\n    _octal: &OctalType\n        <<: *__type\n        id: \"_octal\"\n        code: 5\n        template: *OctalTypeTemplate\n    _numeric: &NumericType\n        <<: *__type\n        id: \"_numeric\"\n        code: 6\n        template: *NumericTypeTemplate\n    _string: &StringType\n        <<: *__type\n        id: \"_string\"\n        code: 7\n        template: *StringTypeTemplate\n    _regex: &RegexType\n        <<: *__type\n        id: \"_regex\"\n        code: 8\n        template: *RegexTypeTemplate\n    _array: &ArrayType\n        <<: *__type\n        id: \"_array\"\n        code: 9\n        template: *ArrayTypeTemplate\n        argsTemplate: *ArrayTypeArgsTemplate\n    _object: &ObjectType\n        <<: *__type\n        id: \"_object\"\n        code: 10\n        template: *ObjectTypeTemplate\n        argsTemplate: *ObjectTypeArgsTemplate\n    _null: &NullType\n        <<: *__type\n        id: \"_null\"\n        code: 11\n        template: *NullTypeTemplate\n    _undefined: &UndefinedType\n        <<: *__type\n        id: \"_undefined\"\n        code: 12\n        template: *UndefinedTypeTemplate\n\nSyntax:\n    equality:\n        template: *EqualitySyntaxTemplate\n    in:\n        template: *InSyntaxTemplate\n    and:\n        template: *AndSyntaxTemplate\n    or:\n        template: *OrSyntaxTemplate\n    not:\n        template: *NotSyntaxTemplate\n    unary:\n        template: *UnarySyntaxTemplate\n    binary:\n        template: *BinarySyntaxTemplate\n    parens:\n        template: *ParensSyntaxTemplate\n    eos:\n        template: *EosSyntaxTemplate\n    eof:\n        template: *EofSyntaxTemplate\n    # The new template takes in expr, and an optional skip argument and optional\n    # id argument. The skip argument is a boolean that if true then doesn't add\n    # new. The code argument is the symbol code being called. The template will check\n    # if it is an exception, i.e. a type that is a constructor but may not use new.\n    new:\n        template: *NewSyntaxTemplate\n    # The regex flags that change symbols between languages can be defined here.\n    # Flags that aren't defined can be left blank and will be ignored.\n    regexFlags: *RegexFlags\n    bsonRegexFlags: *BSONRegexFlags\n    driver: *DriverTemplate\nImports:\n    import:\n        template: *ImportTemplate\n    driver:\n        template: *DriverImportTemplate\n    0:\n        template: *0ImportTemplate\n    1:\n        template: *1ImportTemplate\n    2:\n        template: *2ImportTemplate\n    3:\n        template: *3ImportTemplate\n    4:\n        template: *4ImportTemplate\n    5:\n        template: *5ImportTemplate\n    6:\n        template: *6ImportTemplate\n    7:\n        template: *7ImportTemplate\n    8:\n        template: *8ImportTemplate\n    9:\n        template: *9ImportTemplate\n    10:\n        template: *10ImportTemplate\n    11:\n        template: *11ImportTemplate\n    12:\n        template: *12ImportTemplate\n    100:\n        template: *100ImportTemplate\n    101:\n        template: *101ImportTemplate\n    102:\n        template: *102ImportTemplate\n    103:\n        template: *103ImportTemplate\n    104:\n        template: *104ImportTemplate\n    105:\n        template: *105ImportTemplate\n    106:\n        template: *106ImportTemplate\n    107:\n        template: *107ImportTemplate\n    108:\n        template: *108ImportTemplate\n    109:\n        template: *109ImportTemplate\n    110:\n        template: *110ImportTemplate\n    111:\n        template: *111ImportTemplate\n    112:\n        template: *112ImportTemplate\n    113:\n        template: *113ImportTemplate\n    114:\n        template: *114ImportTemplate\n    200:\n        template: *200ImportTemplate\n    201:\n        template: *201ImportTemplate\n    300:\n        template: *300ImportTemplate\n    301:\n        template: *301ImportTemplate\n    302:\n        template: *302ImportTemplate\n    303:\n        template: *303ImportTemplate\n    304:\n        template: *304ImportTemplate\n    305:\n        template: *305ImportTemplate\n    306:\n        template: *306ImportTemplate\nBsonTypes:\n    Code: &CodeType\n        <<: *__type\n        id: \"Code\"\n        code: 100\n        type: *ObjectType\n        attr:\n            code:\n                callable: *var\n                args: null\n                attr: null\n                id: \"code\"\n                type: *StringType\n                template: *CodeCodeTemplate\n                argsTemplate: *CodeCodeArgsTemplate\n            scope:\n                callable: *var\n                args: null\n                attr: null\n                id: \"scope\"\n                type: *StringType\n                template: *CodeScopeTemplate\n                argsTemplate: *CodeScopeArgsTemplate\n    ObjectId: &ObjectIdType\n        <<: *__type\n        id: \"ObjectId\"\n        code: 101\n        type: *ObjectType\n        attr:\n            toHexString:\n                <<: *__func\n                id: \"toHexString\"\n                type: *StringType\n            toString:\n                <<: *__func\n                type: *StringType\n                template: *ObjectIdToStringTemplate\n                argsTemplate: *ObjectIdToStringArgsTemplate\n            equals:\n                <<: *__func\n                args:\n                    - [ \"ObjectId\" ]\n                type: *BoolType\n                template: *ObjectIdEqualsTemplate\n                argsTemplate: *ObjectIdEqualsArgsTemplate\n            getTimestamp:\n                <<: *__func\n                type: *IntegerType\n                template: *ObjectIdGetTimestampTemplate\n                argsTemplate: *ObjectIdGetTimestampArgsTemplate\n    Binary: &BinaryType\n        <<: *__type\n        id: \"Binary\"\n        code: 102\n        type: *ObjectType\n        attr:\n            value:\n                <<: *__func\n                id: \"value\"\n                type: *StringType\n                template: *BinaryValueTemplate\n                argsTemplate: *BinaryValueArgsTemplate\n            length:\n                <<: *__func\n                id: \"length\"\n                type: *IntegerType\n                template: *BinaryLengthTemplate\n                argsTemplate: *BinaryLengthArgsTemplate\n            toString:\n                <<: *__func\n                id: \"toString\"\n                type: *StringType\n                template: *BinaryToStringTemplate\n                argsTemplate: *BinaryToStringArgsTemplate\n            sub_type:\n                callable: *var\n                args: null\n                attr: null\n                id: \"subtype\"\n                type: *IntegerType\n                template: *BinarySubtypeTemplate\n                argsTemplate: *BinarySubtypeArgsTemplate\n    DBRef: &DBRefType\n        <<: *__type\n        id: \"DBRef\"\n        code: 103\n        type: *ObjectType\n        attr:\n            db:\n                callable: *var\n                args: null\n                attr: null\n                id: \"db\"\n                type: *StringType\n                template: *DBRefGetDBTemplate\n                argsTemplate: *DBRefGetDBArgsTemplate\n            namespace:\n                callable: *var\n                args: null\n                attr: null\n                id: \"namespace\"\n                type: *StringType\n                template: *DBRefGetCollectionTemplate\n                argsTemplate: *DBRefGetCollectionArgsTemplate\n            oid:\n                callable: *var\n                args: null\n                attr: null\n                id: \"oid\"\n                type: *StringType\n                template: *DBRefGetIdTemplate\n                argsTemplate: *DBRefGetIdArgsTemplate\n    Double: &DoubleType\n        <<: *__type\n        id: \"Double\"\n        code: 104\n        type: *ObjectType\n        attr: {}\n    Int32: &Int32Type\n        <<: *__type\n        id: \"Int32\"\n        code: 105\n        type: *ObjectType\n        attr: {}\n    Long: &LongType\n        <<: *__type\n        id: \"Long\"\n        code: 106\n        type: *ObjectType\n        attr:\n            toString:\n                <<: *__func\n                id: \"LongtoString\" # Needs process method\n                args:\n                    - [ *IntegerType, null ]\n                type: *StringType\n                template: *LongToStringTemplate\n                argsTemplate: *LongToStringArgsTemplate\n            equals:\n                <<: *__func\n                id: \"equals\"\n                args:\n                    - [ \"Long\" ]\n                type: *BoolType\n                template: *LongEqualsTemplate\n                argsTemplate: *LongEqualsArgsTemplate\n            toInt:\n                <<: *__func\n                id: \"toInt\"\n                type: *IntegerType\n                template: *LongToIntTemplate\n                argsTemplate: *LongToIntArgsTemplate\n            toNumber:\n                <<: *__func\n                id: \"toNumber\"\n                type: *DecimalType\n                template: *LongToNumberTemplate\n                argsTemplate: *LongToNumberArgsTemplate\n            compare:\n                <<: *__func\n                id: \"compare\"\n                args:\n                    - [ \"Long\" ]\n                type: *StringType\n                template: *LongCompareTemplate\n                argsTemplate: *LongCompareArgsTemplate\n            isOdd:\n                <<: *__func\n                id: \"isOdd\"\n                type: *BoolType\n                template: *LongIsOddTemplate\n                argsTemplate: *LongIsOddArgsTemplate\n            isZero:\n                <<: *__func\n                id: \"isZero\"\n                type: *BoolType\n                template: *LongIsZeroTemplate\n                argsTemplate: *LongIsZeroArgsTemplate\n            isNegative:\n                <<: *__func\n                id: \"isNegative\"\n                type: *BoolType\n                template: *LongIsNegativeTemplate\n                argsTemplate: *LongIsNegativeArgsTemplate\n            negate:\n                <<: *__func\n                id: \"negate\"\n                type: \"Long\"\n                template: *LongNegateTemplate\n                argsTemplate: *LongNegateArgsTemplate\n            not:\n                <<: *__func\n                id: \"not\"\n                type: \"Long\"\n                template: *LongNotTemplate\n                argsTemplate: *LongNotArgsTemplate\n            notEquals:\n                <<: *__func\n                id: \"notEquals\"\n                args:\n                    - [ \"Long\" ]\n                type: *BoolType\n                template: *LongNotEqualsTemplate\n                argsTemplate: *LongNotEqualsArgsTemplate\n            greaterThan:\n                <<: *__func\n                id: \"greaterThan\"\n                args:\n                    - [ \"Long\" ]\n                type: *BoolType\n                template: *LongGreaterThanTemplate\n                argsTemplate: *LongGreaterThanArgsTemplate\n            greaterThanOrEqual:\n                <<: *__func\n                id: \"greaterThanOrEqual\"\n                args:\n                    - [ \"Long\" ]\n                type: *BoolType\n                template: *LongGreaterThanOrEqualTemplate\n                argsTemplate: *LongGreaterThanOrEqualArgsTemplate\n            lessThan:\n                <<: *__func\n                id: \"lessThan\"\n                args:\n                    - [ \"Long\" ]\n                type: *BoolType\n                template: *LongLessThanTemplate\n                argsTemplate: *LongLessThanArgsTemplate\n            lessThanOrEqual:\n                <<: *__func\n                id: \"lessThanOrEqual\"\n                args:\n                    - [ \"Long\" ]\n                type: *BoolType\n                template: *LongLessThanOrEqualTemplate\n                argsTemplate: *LongLessThanOrEqualArgsTemplate\n            add:\n                <<: *__func\n                id: \"add\"\n                args:\n                    - [ \"Long\" ]\n                type: \"Long\"\n                template: *LongAddTemplate\n                argsTemplate: *LongAddArgsTemplate\n            subtract:\n                <<: *__func\n                id: \"subtract\"\n                args:\n                    - [ \"Long\" ]\n                type: \"Long\"\n                template: *LongSubtractTemplate\n                argsTemplate: *LongSubtractArgsTemplate\n            multiply:\n                <<: *__func\n                id: \"multiply\"\n                args:\n                    - [ \"Long\" ]\n                type: \"Long\"\n                template: *LongMultiplyTemplate\n                argsTemplate: *LongMultiplyArgsTemplate\n            div:\n                <<: *__func\n                id: \"div\"\n                args:\n                    - [ \"Long\" ]\n                type: \"Long\"\n                template: *LongDivTemplate\n                argsTemplate: *LongDivArgsTemplate\n            modulo:\n                <<: *__func\n                id: \"modulo\"\n                args:\n                    - [ \"Long\" ]\n                type: \"Long\"\n                template: *LongModuloTemplate\n                argsTemplate: *LongModuloArgsTemplate\n            and:\n                <<: *__func\n                id: \"and\"\n                args:\n                    - [ \"Long\" ]\n                type: \"Long\"\n                template: *LongAndTemplate\n                argsTemplate: *LongAndArgsTemplate\n            or:\n                <<: *__func\n                id: \"or\"\n                args:\n                    - [ \"Long\" ]\n                type: \"Long\"\n                template: *LongOrTemplate\n                argsTemplate: *LongOrArgsTemplate\n            xor:\n                <<: *__func\n                id: \"xor\"\n                args:\n                    - [ \"Long\" ]\n                type: \"Long\"\n                template: *LongXorTemplate\n                argsTemplate: *LongXorArgsTemplate\n            shiftLeft:\n                <<: *__func\n                id: \"shiftLeft\"\n                args:\n                    - [ *IntegerType ]\n                type: \"Long\"\n                template: *LongShiftLeftTemplate\n                argsTemplate: *LongShiftLeftArgsTemplate\n            shiftRight:\n                <<: *__func\n                id: \"shiftRight\"\n                args:\n                    - [ *IntegerType ]\n                type: \"Long\"\n                template: *LongShiftRightTemplate\n                argsTemplate: *LongShiftRightArgsTemplate\n    MinKeyType: &MinKeyType\n        <<: *__type\n        id: \"MinKey\"\n        code: 107\n        type: *ObjectType\n    MaxKeyType: &MaxKeyType\n        <<: *__type\n        id: \"MaxKey\"\n        code: 108\n        type: *ObjectType\n    BSONRegExpType: &BSONRegExpType\n        <<: *__type\n        id: \"BSONRegExp\"\n        code: 109\n        type: *ObjectType #TODO: add pattern + options\n    Timestamp: &TimestampType\n        <<: *__type\n        id: \"Timestamp\"\n        code: 110\n        type: *ObjectType\n        attr:\n            toString:\n                <<: *__func\n                id: \"toString\"\n                type: *StringType\n                template: *TimestampToStringTemplate\n                argsTemplate: *TimestampToStringArgsTemplate\n            equals:\n                <<: *__func\n                id: \"equals\"\n                args:\n                    - [ \"Timestamp\" ]\n                type: *BoolType\n                template: *TimestampEqualsTemplate\n                argsTemplate: *TimestampEqualsArgsTemplate\n            getLowBits:\n                <<: *__func\n                id: \"getLowBits\"\n                type: *IntegerType\n                template: *TimestampGetLowBitsTemplate\n                argsTemplate: *TimestampGetLowBitsArgsTemplate\n            getHighBits:\n                <<: *__func\n                id: \"getHighBits\"\n                type: *IntegerType\n                template: *TimestampGetHighBitsTemplate\n                argsTemplate: *TimestampGetHighBitsArgsTemplate\n            compare:\n                <<: *__func\n                id: \"compare\"\n                args:\n                    - [ \"Timestamp\" ]\n                type: *StringType\n                template: *TimestampCompareTemplate\n                argsTemplate: *TimestampCompareArgsTemplate\n            notEquals:\n                <<: *__func\n                id: \"notEquals\"\n                args:\n                    - [ \"Timestamp\" ]\n                type: *BoolType\n                template: *TimestampNotEqualsTemplate\n                argsTemplate: *TimestampNotEqualsArgsTemplate\n            greaterThan:\n                <<: *__func\n                id: \"greaterThan\"\n                args:\n                    - [ \"Timestamp\" ]\n                type: *BoolType\n                template: *TimestampGreaterThanTemplate\n                argsTemplate: *TimestampGreaterThanArgsTemplate\n            greaterThanOrEqual:\n                <<: *__func\n                id: \"greaterThanOrEqual\"\n                args:\n                    - [ \"Timestamp\" ]\n                type: *BoolType\n                template: *TimestampGreaterThanOrEqualTemplate\n                argsTemplate: *TimestampGreaterThanOrEqualArgsTemplate\n            lessThan:\n                <<: *__func\n                id: \"lessThan\"\n                args:\n                    - [ \"Timestamp\" ]\n                type: *BoolType\n                template: *TimestampLessThanTemplate\n                argsTemplate: *TimestampLessThanArgsTemplate\n            lessThanOrEqual:\n                <<: *__func\n                id: \"lessThanOrEqual\"\n                args:\n                    - [ \"Timestamp\" ]\n                type: *BoolType\n                template: *TimestampLessThanOrEqualTemplate\n                argsTemplate: *TimestampLessThanOrEqualArgsTemplate\n    BSONSymbol: &SymbolType\n        <<: *__type\n        id: \"BSONSymbol\"\n        code: 111\n        type: *ObjectType\n        attr:\n            valueOf:\n                <<: *__func\n                id: \"valueOf\"\n                type: *StringType\n                template: *SymbolValueOfTemplate\n                argsTemplate: *SymbolValueOfArgsTemplate\n            toString:\n                <<: *__func\n                id: \"toString\"\n                type: *StringType\n                template: *SymbolToStringTemplate\n                argsTemplate: *SymbolToStringArgsTemplate\n            inspect:\n                <<: *__func\n                id: \"inspect\"\n                type: *StringType\n                template: *SymbolInspectTemplate\n                argsTemplate: *SymbolInspectArgsTemplate\n    Decimal128: &Decimal128Type\n        <<: *__type\n        id: \"Decimal128\"\n        code: 112\n        type: *ObjectType\n        attr:\n            toString:\n                <<: *__func\n                id: \"toString\"\n                type: *StringType\n                template: *Decimal128ToStringTemplate\n                argsTemplate: *Decimal128ToStringArgsTemplate\nNativeTypes:\n    Date: &DateType\n        <<: *__type\n        id: \"Date\"\n        code: 200\n        type: *ObjectType\n        attr: {} # TODO: no built-in date methods added yet\nBsonSymbols:\n    Code: &CodeSymbol\n        id: \"CodeFromJS\"\n        code: 100\n        callable: *constructor\n        args:\n            - [ *StringType ]\n            - [ *ObjectType, null ]\n        type: *CodeType\n        attr: {}\n        template: *CodeSymbolTemplate\n        argsTemplate: *CodeSymbolArgsTemplate\n    ObjectId: &ObjectIdSymbol\n        id: \"ObjectId\"\n        code: 101\n        callable: *constructor\n        args:\n            - [ *StringType, *NumericType, null ]\n        type: *ObjectIdType\n        attr:\n            createFromHexString:\n                <<: *__func\n                id: \"createFromHexString\"\n                args:\n                    - [ *StringType ]\n                type: *ObjectIdType\n                template: *ObjectIdCreateFromHexStringTemplate\n                argsTemplate: *ObjectIdCreateFromHexStringArgsTemplate\n            createFromTime:\n                <<: *__func\n                id: \"ObjectIdCreateFromTime\"\n                args:\n                    - [ *NumericType ]\n                type: *ObjectIdType\n                template: *ObjectIdCreateFromTimeTemplate\n                argsTemplate: *ObjectIdCreateFromTimeArgsTemplate\n            isValid:\n                <<: *__func\n                id: \"isValid\"\n                args:\n                    - [ *StringType ]\n                type: *BoolType\n                template: *ObjectIdIsValidTemplate\n                argsTemplate: *ObjectIdIsValidArgsTemplate\n        template: *ObjectIdSymbolTemplate\n        argsTemplate: *ObjectIdSymbolArgsTemplate\n    Binary: &BinarySymbol\n        id: \"Binary\"\n        code: 102\n        callable: *constructor\n        args:\n            - [ *StringType, *NumericType, *ObjectType ]\n            - [ *NumericType, null ]\n        type: *BinaryType\n        attr:\n            SUBTYPE_DEFAULT:\n                id: \"SUBTYPE_DEFAULT\"\n                callable: *var\n                args: null\n                type: *IntegerType\n                template: *BinarySymbolSubtypeDefaultTemplate\n            SUBTYPE_FUNCTION:\n                id: \"SUBTYPE_FUNCTION\"\n                callable: *var\n                args: null\n                type: *IntegerType\n                template: *BinarySymbolSubtypeFunctionTemplate\n            SUBTYPE_BYTE_ARRAY:\n                id: \"SUBTYPE_BYTE_ARRAY\"\n                callable: *var\n                args: null\n                type: *IntegerType\n                template: *BinarySymbolSubtypeByteArrayTemplate\n            SUBTYPE_UUID_OLD:\n                id: \"SUBTYPE_UUID_OLD\"\n                callable: *var\n                args: null\n                type: *IntegerType\n                template: *BinarySymbolSubtypeUuidOldTemplate\n            SUBTYPE_UUID:\n                id: \"SUBTYPE_UUID\"\n                callable: *var\n                args: null\n                type: *IntegerType\n                template: *BinarySymbolSubtypeUuidTemplate\n            SUBTYPE_MD5:\n                id: \"SUBTYPE_MD5\"\n                callable: *var\n                args: null\n                type: *IntegerType\n                template: *BinarySymbolSubtypeMd5Template\n            SUBTYPE_USER_DEFINED:\n                id: \"SUBTYPE_USER_DEFINED\"\n                callable: *var\n                args: null\n                type: *IntegerType\n                template: *BinarySymbolSubtypeUserDefinedTemplate\n        template: *BinarySymbolTemplate\n        argsTemplate: *BinarySymbolArgsTemplate\n    DBRef:\n        id: \"DBRef\"\n        code: 103\n        callable: *constructor\n        args:\n            - [ *StringType ]\n            - [ *ObjectIdType ]\n            - [ *StringType, null ]\n        type: *DBRefType\n        attr: {}\n        template: *DBRefSymbolTemplate\n        argsTemplate: *DBRefSymbolArgsTemplate\n    Double:\n        id: \"Double\"\n        code: 104\n        callable: *constructor\n        args:\n            - [ *NumericType, *StringType ]\n        type: *DoubleType\n        attr: {}\n        template: *DoubleSymbolTemplate\n        argsTemplate: *DoubleSymbolArgsTemplate\n    Int32:\n        id: \"Int32\"\n        code: 105\n        callable: *constructor\n        args:\n            - [ *NumericType, *StringType ]\n        type: *Int32Type\n        attr: {}\n        template: *Int32SymbolTemplate\n        argsTemplate: *Int32SymbolArgsTemplate\n    Long:\n        id: \"Long\"\n        code: 106\n        callable: *constructor\n        args:\n            - [ *IntegerType ]\n            - [ *IntegerType ]\n        type: *LongType\n        attr:\n            MAX_VALUE:\n                id: \"MAX_VALUE\"\n                callable: *var\n                args: null\n                type: *LongType\n                attr: {}\n                template: *LongSymbolMaxTemplate\n                argsTemplate: *LongSymbolMaxArgsTemplate\n            MIN_VALUE:\n                id: \"MIN_VALUE\"\n                callable: *var\n                args: null\n                type: *LongType\n                attr: {}\n                template: *LongSymbolMinTemplate\n                argsTemplate: *LongSymbolMinArgsTemplate\n            ZERO:\n                id: \"ZERO\"\n                callable: *var\n                args: null\n                type: *LongType\n                attr: {}\n                template: *LongSymbolZeroTemplate\n                argsTemplate: *LongSymbolZeroArgsTemplate\n            ONE:\n                id: \"ONE\"\n                callable: *var\n                args: null\n                type: *LongType\n                attr: {}\n                template: *LongSymbolOneTemplate\n                argsTemplate: *LongSymbolOneArgsTemplate\n            NEG_ONE:\n                id: \"NEG_ONE\"\n                callable: *var\n                args: null\n                type: *LongType\n                attr: {}\n                template: *LongSymbolNegOneTemplate\n                argsTemplate: *LongSymbolNegOneArgsTemplate\n            fromBits:\n                id: \"LongfromBits\" # Needs process method\n                callable: *func\n                args:\n                    - [ *IntegerType ]\n                    - [ *IntegerType ]\n                type: *LongType\n                attr: {}\n                template: *LongSymbolFromBitsTemplate\n                argsTemplate: *LongSymbolFromBitsArgsTemplate\n            fromInt:\n                id: \"fromInt\"\n                callable: *func\n                args:\n                    - [ *IntegerType ]\n                type: *LongType\n                attr: {}\n                template: *LongSymbolFromIntTemplate\n                argsTemplate: *LongSymbolFromIntArgsTemplate\n            fromNumber:\n                id: \"fromNumber\"\n                callable: *func\n                args:\n                    - [ *NumericType ]\n                type: *LongType\n                attr: {}\n                template: *LongSymbolFromNumberTemplate\n                argsTemplate: *LongSymbolFromNumberArgsTemplate\n            fromString:\n                id: \"fromString\"\n                callable: *func\n                args:\n                    - [ *StringType ]\n                    - [ *IntegerType, null ]\n                type: *LongType\n                attr: {}\n                template: *LongSymbolFromStringTemplate\n                argsTemplate: *LongSymbolFromStringArgsTemplate\n        template: *LongSymbolTemplate\n        argsTemplate: *LongSymbolArgsTemplate\n    MinKey:\n        id: \"MinKey\"\n        code: 107\n        callable: *constructor\n        args: []\n        type: *MinKeyType\n        attr: {}\n        template: *MinKeySymbolTemplate\n        argsTemplate: *MinKeySymbolArgsTemplate\n    MaxKey:\n        id: \"MaxKey\"\n        code: 108\n        callable: *constructor\n        args: []\n        type: *MaxKeyType\n        attr: {}\n        template: *MaxKeySymbolTemplate\n        argsTemplate: *MaxKeySymbolArgsTemplate\n    Timestamp:\n        id: \"Timestamp\"\n        code: 110\n        callable: *constructor\n        args:\n            - [ *IntegerType ]\n            - [ *IntegerType ]\n        type: *TimestampType\n        attr: {} #TODO: add fromInt, fromNumber, fromBits, fromString\n        template: *TimestampSymbolTemplate\n        argsTemplate: *TimestampSymbolArgsTemplate\n    BSONSymbol:\n        id: \"BSONSymbol\"\n        code: 111\n        callable: *constructor\n        args:\n            - [ *StringType ]\n        type: *SymbolType\n        attr: {}\n        template: *SymbolSymbolTemplate\n        argsTemplate: *SymbolSymbolArgsTemplate\n    BSONRegExp:\n        id: \"BSONRegExp\"\n        code: 109\n        callable: *constructor\n        args:\n            - [ *StringType ]\n            - [ *StringType, null ]\n        type: *BSONRegExpType\n        attr: {}\n        template: *BSONRegExpSymbolTemplate\n        argsTemplate: *BSONRegExpSymbolArgsTemplate\n    Decimal128:\n        id: \"Decimal128\"\n        code: 112\n        callable: *constructor\n        args:\n            - [ *ObjectType ]\n        type: *Decimal128Type\n        attr:\n            fromString:\n                id: \"fromString\"\n                callable: *func\n                args:\n                    - [ *StringType ]\n                type: *Decimal128Type\n                attr: {}\n                template: *Decimal128SymbolFromStringTemplate\n                argsTemplate: *Decimal128SymbolFromStringArgsTemplate\n        template: *Decimal128SymbolTemplate\n        argsTemplate: *Decimal128SymbolArgsTemplate\n\nNativeSymbols:\n    Number:\n        id: \"Number\"\n        code: 2\n        callable: *constructor\n        args:\n            - [ *IntegerType, *StringType ]\n        type: *NumericType\n        attr: {} # TODO: no built-in number funcs added yet\n        template: *NumberSymbolTemplate\n        argsTemplate: *NumberSymbolArgsTemplate\n    Date: # Needs process method\n        id: \"Date\"\n        code: 200\n        callable: *constructor\n        args:\n            - [ *StringType, *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n        type: *DateType\n        attr: # TODO: add more date funcs?\n            now:\n                id: \"now\"\n                code: 200.1\n                callable: *func\n                args: []\n                type: *DateType\n                attr: {}\n                template: *DateSymbolNowTemplate\n                argsTemplate: *DateSymbolNowArgsTemplate\n        template: *DateSymbolTemplate\n        argsTemplate: *DateSymbolArgsTemplate\n    RegExp: # Needs process method\n        id: \"RegExp\"\n        code: 8\n        callable: *constructor\n        args:\n            - [ *StringType, *RegexType ]\n            - [ *StringType, null ]\n        type: *RegexType\n        attr: {}\n        template: *RegExpSymbolTemplate\n        argsTemplate: *RegExpSymbolArgsTemplate\n"},26780:e=>{e.exports="SymbolTypes:\n    VAR: &var 0\n    CONSTRUCTOR: &constructor 1\n    FUNC: &func 2\n# Internal patterns to save typing\n__type: &__type\n    id: null\n    callable: *var\n    args: null\n    type: null\n    attr: {}\n    template: null\n    argsTemplate: null\n__func: &__func\n    callable: *func\n    args: []\n    attr: {}\n    template: null\n    argsTemplate: null\n\n#############################################\n#             Sample Templates              #\n#                                           #\n# The expected arguments are commented next #\n# to the template itself. Currently all are #\n# set to null, but to define a function     #\n# replace 'null' with '!!js/function > \\n   #\n# and a function defined below.             #\n#                                           #\n# See the other template files for examples #\n#                                           #\n#               Good to know:               #\n# lhs is left-hand-side of the expression   #\n# rhs is right-hand-side of the expression  #\n# All args are strings unless noted         #\n#    - arg? is boolean                      #\n#    - arg# is number                       #\n#                                           #\n#############################################\nTemplates:\n    ########\n    # Misc #\n    ########\n\n    # Filter out regex flags that have translations or are unsupported.\n    RegexFlags: &RegexFlags\n        i: 'i'\n        m: 'm'\n        u: ''\n        y: ''\n        g: ''\n    BSONRegexFlags: &BSONRegexFlags\n        i: 'i'\n        m: 'm'\n        x: 'x'\n        s: ''\n        l: ''\n        u: ''\n\n    #############################################\n    #                  Syntax                   #\n    #                                           #\n    # Templates for language syntax expressions #\n    #                                           #\n    #############################################\n\n    DriverTemplate: &DriverTemplate !!js/function >\n        (spec) => {\n            comment = '# Requires the MongoDB Ruby Driver\\n# https://docs.mongodb.com/ruby-driver/master/';\n\n            const getKey = k => {\n                let translateKey = {\n                    project: 'projection',\n                    maxTimeMS: 'max_time_ms'\n                }\n                return k in translateKey ? translateKey[k] : k\n            };\n            const options = spec.options;\n            const filter = spec.filter || {}\n            delete spec.options;\n            delete spec.filter\n\n            const connect = `client = Mongo::Client.new('${options.uri}', :database => '${options.database}')`;\n            const coll = `client.database['${options.collection}']`;\n\n            if ('aggregation' in spec) {\n                return `${comment}\\n\\n${connect}\\nresult = ${coll}.aggregate(${spec.aggregation})`;\n            }\n\n            const vars = Object.keys(spec).reduce(\n                (result, k) => {\n                    return `${result}\\n${getKey(k)} = ${spec[k]}`;\n                },\n                connect\n            );\n\n            const args = Object.keys(spec).reduce(\n                (result, k) => {\n                    const divider = result === '' ? '' : ',\\n';\n                    return `${result}${divider}  ${getKey(k)}: ${getKey(k)}`;\n                },\n                ''\n            );\n\n            const cmd = `result = ${coll}.find(${filter}${args ? `, {\\n${args}\\n}` : ''})`;\n\n            return `${comment}\\n\\n${vars}\\n\\n${cmd}`;\n        }\n    EqualitySyntaxTemplate: &EqualitySyntaxTemplate !!js/function >\n        (lhs, op, rhs) => {\n            if (op.includes('is')) {\n                let not = op.includes('not') ? '!' : ''\n                return `${not}${lhs}.equal?(${rhs})`\n            } else if (op.includes('!') || op.includes('not')) {\n                return `${lhs} != ${rhs}`;\n            } else if (op === '==' || op === '===') {\n                return `${lhs} == ${rhs}`;\n            }\n            return `${lhs} ${op} ${rhs}`;\n        }\n    InSyntaxTemplate: &InSyntaxTemplate !!js/function >\n        (lhs, op, rhs) => {\n            let str = '';\n            if (op.includes('!') || op.includes('not')) {\n                str = '!';\n            }\n            return `${str}${rhs}.include?(${lhs})`\n        }\n    AndSyntaxTemplate: &AndSyntaxTemplate !!js/function >\n        (args) => {\n            return args.join(' && ');\n        }\n    OrSyntaxTemplate: &OrSyntaxTemplate !!js/function >\n        (args) => {\n            return args.join(' || ');\n        }\n    NotSyntaxTemplate: &NotSyntaxTemplate !!js/function >\n        (arg) => {\n            return `!${arg}`;\n        }\n    UnarySyntaxTemplate: &UnarySyntaxTemplate null\n    BinarySyntaxTemplate: &BinarySyntaxTemplate !!js/function >\n        (args) => {\n            return args.reduce((s, op, i, arr) => {\n                if (i % 2 === 0) {\n                    return s;\n                }\n                const rhs = arr[i + 1];\n                switch(op) {\n                    case '//':\n                        return `${s}.div(${rhs})`;\n                    case '**':\n                        return `${s} ** ${rhs}`;\n                    default:\n                        return `${s} ${op} ${rhs}`;\n                }\n            }, args[0]);\n        }\n    ParensSyntaxTemplate: &ParensSyntaxTemplate null\n    EosTemplate: &EosSyntaxTemplate null # No args. End-of-line\n    EofTemplate: &EofSyntaxTemplate null # No args. End-of-file\n    FloorDivTemplate: &FloorDivSyntaxTemplate null # Args: lhs, rhs\n    PowerTemplate: &PowerSyntaxTemplate null # Args: lhs, rhs\n    NewTemplate: &NewSyntaxTemplate null # Args: expression, skip?, code# [to check if meant to be skipped]\n\n    #############################################\n    #               Literal Types               #\n    #                                           #\n    # Templates for literal type instance. Most #\n    # get passed the literal itself as an arg.  #\n    #                                           #\n    #############################################\n    StringTypeTemplate: &StringTypeTemplate  !!js/function >\n        (str) => {\n          let newStr = str;\n          if (\n            (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n            (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n            newStr = str.substr(1, str.length - 2);\n          }\n          return `'${newStr.replace(/\\\\([\\s\\S])|(')/g, '\\\\$1$2')}'`;\n        }\n    RegexTypeTemplate: &RegexTypeTemplate !!js/function >\n        (pattern, flags) => {\n            const str = pattern;\n            let newStr = str;\n            if (\n                (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                newStr = str.substr(1, str.length - 2);\n            }\n            pattern = `${newStr.replace(/\\\\([\\s\\S])/g, '\\\\$1')}`;\n            return `/${pattern}/${flags ? flags : ''}`;\n        }\n    BoolTypeTemplate: &BoolTypeTemplate !!js/function >\n        (literal) => {\n            return literal.toLowerCase();\n        }\n    IntegerTypeTemplate: &IntegerTypeTemplate null # args: literal, argType (i.e. '_string', '_decimal' etc)\n    DecimalTypeTemplate: &DecimalTypeTemplate null # args: literal, argType\n    LongBasicTypeTemplate: &LongBasicTypeTemplate null # args: literal, argType\n    HexTypeTemplate: &HexTypeTemplate null # args: literal, argType\n    OctalTypeTemplate: &OctalTypeTemplate !!js/function >\n        (literal) => {\n            let offset = 0;\n\n            if (\n                literal.charAt(0) === '0' &&\n                (literal.charAt(1) === '0' || literal.charAt(1) === 'o' || literal.charAt(1) === 'O')\n            ) {\n                offset = 2;\n            } else if (literal.charAt(0) === '0') {\n                offset = 1;\n            }\n\n            literal = `0o${literal.substr(offset, literal.length - 1)}`;\n\n            return literal;\n        }\n    NumericTypeTemplate: &NumericTypeTemplate null # args: literal, argType\n    ArrayTypeTemplate: &ArrayTypeTemplate !!js/function >\n        (literal, depth) => {\n            depth++;\n            if (literal === '') {\n                return '[]'\n            }\n            const indent = '\\n' + '  '.repeat(depth);\n            const closingIndent = '\\n' + '  '.repeat(depth - 1);\n\n            return `[${indent}${literal}${closingIndent}]`;\n        }\n    ArrayTypeArgsTemplate: &ArrayTypeArgsTemplate null # Args: single array element, nestedness, lastElement? (note: not being used atm)\n    NullTypeTemplate: &NullTypeTemplate !!js/function >\n        () => {\n            return 'nil';\n        }\n    UndefinedTypeTemplate: &UndefinedTypeTemplate !!js/function >\n        () => {\n            return 'nil';\n        }\n    ObjectTypeTemplate: &ObjectTypeTemplate !!js/function >\n        (literal) => {\n            if (literal === '') {\n                return '{}';\n            }\n            return literal;\n        }\n    ObjectTypeArgsTemplate: &ObjectTypeArgsTemplate !!js/function >\n        (args, depth) => {\n            if (args.length === 0) {\n                return '{}';\n            }\n            depth++;\n            const indent = '\\n' + '  '.repeat(depth);\n            const closingIndent = '\\n' + '  '.repeat(depth - 1);\n            const singleStringify = (str) => {\n                let newStr = str;\n                if (\n                  (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                  (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                    newStr = str.substr(1, str.length - 2);\n                }\n                return `'${newStr.replace(/\\\\([\\s\\S])|(')/g, '\\\\$1$2')}'`;\n            }\n            const pairs = args.map((arg) => {\n                return `${indent}${singleStringify(arg[0])} => ${arg[1]}`;\n            }).join(',');\n\n            return `{${pairs}${closingIndent}}`\n        }\n\n    #############################################\n    #               Symbols                     #\n    #                                           #\n    # Templates for symbols, can be either      #\n    # functions or variables.                   #\n    #                                           #\n    # The *SymbolTemplates return names and     #\n    # usually don't take any arguments. The     #\n    # *SymbolArgsTemplates are invoked for func #\n    # calls. The first argument is always the   #\n    # lhs, i.e. the symbol returned from the    #\n    # corresponding SymbolTemplate. The rest of #\n    # the arguments are the processed arguments #\n    # passed to the original function.          #\n    #                                           #\n    #############################################\n    CodeSymbolTemplate: &CodeSymbolTemplate !!js/function >\n        () => {\n            return 'BSON::Code'\n        }\n    CodeSymbolArgsTemplate: &CodeSymbolArgsTemplate !!js/function >\n        (lhs, code, scope) => {\n            const singleStringify = (str) => {\n                let newStr = str;\n                if (\n                    (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                    (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                    newStr = str.substr(1, str.length - 2);\n                }\n                return `'${newStr.replace(/\\\\([\\s\\S])|(')/g, '\\\\$1$2')}'`;\n            }\n            if (code === undefined) {\n                return '.new'\n            }\n            return !scope ? `.new(${singleStringify(code)})` : `WithScope.new(${singleStringify(code)}, ${scope})`\n        }\n    ObjectIdSymbolTemplate: &ObjectIdSymbolTemplate !!js/function >\n        () => {\n            return 'BSON::ObjectId';\n        }\n    ObjectIdSymbolArgsTemplate: &ObjectIdSymbolArgsTemplate !!js/function >\n        (lhs, id) => {\n            const singleStringify = (str) => {\n                let newStr = str;\n                if (\n                    (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                    (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                    newStr = str.substr(1, str.length - 2);\n                }\n                return `'${newStr.replace(/\\\\([\\s\\S])|(')/g, '\\\\$1$2')}'`;\n            }\n            return !id ? '.new' : `(${singleStringify(id)})`;\n        }\n    BinarySymbolTemplate: &BinarySymbolTemplate null\n    BinarySymbolArgsTemplate: &BinarySymbolArgsTemplate null\n    BinarySymbolSubtypeDefaultTemplate: &BinarySymbolSubtypeDefaultTemplate null\n    BinarySymbolSubtypeFunctionTemplate: &BinarySymbolSubtypeFunctionTemplate null\n    BinarySymbolSubtypeByteArrayTemplate: &BinarySymbolSubtypeByteArrayTemplate null\n    BinarySymbolSubtypeUuidOldTemplate: &BinarySymbolSubtypeUuidOldTemplate null\n    BinarySymbolSubtypeUuidTemplate: &BinarySymbolSubtypeUuidTemplate null\n    BinarySymbolSubtypeMd5Template: &BinarySymbolSubtypeMd5Template null\n    BinarySymbolSubtypeUserDefinedTemplate: &BinarySymbolSubtypeUserDefinedTemplate null\n    DBRefSymbolTemplate: &DBRefSymbolTemplate !!js/function >\n        () => {\n            return 'BSON::DBRef'\n        }\n    DBRefSymbolArgsTemplate: &DBRefSymbolArgsTemplate !!js/function >\n        (lhs, coll, id, db) => {\n            const singleStringify = (str) => {\n                let newStr = str;\n                if (\n                    (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                    (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                    newStr = str.substr(1, str.length - 2);\n                }\n                return `'${newStr.replace(/\\\\([\\s\\S])|(')/g, '\\\\$1$2')}'`;\n            }\n\n            let db_string = db ? `,\\n  '$db' => ${singleStringify(db)}` : ''\n            return `.new(\\n  '$ref' => ${singleStringify(coll)},\\n  '$id' => ${id}${db_string}\\n)`\n        }\n\n    DoubleSymbolTemplate: &DoubleSymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    DoubleSymbolArgsTemplate: &DoubleSymbolArgsTemplate !!js/function >\n        (lhs, arg, type) => {\n            arg = arg === undefined ? 0 : arg;\n            if (type === '_decimal' || type === '_double') {\n                return arg;\n            }\n            return `${arg}.to_f`;\n        }\n    Int32SymbolTemplate: &Int32SymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    Int32SymbolArgsTemplate: &Int32SymbolArgsTemplate !!js/function >\n        (lhs, arg, type) => {\n            arg = arg === undefined ? 0 : arg;\n            if (type === '_integer' || type === '_long') {\n                return arg;\n            }\n            return `${arg}.to_i`;\n        }\n    LongSymbolTemplate: &LongSymbolTemplate !!js/function >\n        () => {\n            return ''\n        }\n    LongSymbolArgsTemplate: &LongSymbolArgsTemplate !!js/function >\n        (lhs, arg, type) => {\n            arg = arg === undefined ? 0 : arg;\n            if (type === '_integer' || type === '_long') {\n                return arg;\n            }\n            return `${arg}.to_i`;\n        }\n    RegExpSymbolTemplate: &RegExpSymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    RegExpSymbolArgsTemplate: &RegExpSymbolArgsTemplate null # Args: lhs, pattern, flags\n    SymbolSymbolTemplate: &SymbolSymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    SymbolSymbolArgsTemplate: &SymbolSymbolArgsTemplate !!js/function >\n        (lhs, arg) => {\n            arg = arg === undefined ? '' : arg;\n            const str = arg.toString();\n            let newStr = str;\n            if (\n                (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                newStr = str.substr(1, str.length - 2);\n                return `:'${newStr}'`;\n            } else {\n                return `${newStr}.to_sym`;\n            }\n        }\n    BSONRegExpSymbolTemplate: &BSONRegExpSymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    BSONRegExpSymbolArgsTemplate: &BSONRegExpSymbolArgsTemplate !!js/function >\n        (lhs, pattern, flags) => {\n            const singleStringify = (str) => {\n                let newStr = str;\n                if (\n                    (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                    (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                    newStr = str.substr(1, str.length - 2);\n                }\n                return `${newStr.replace(/\\\\([\\s\\S])/g, '\\\\$1')}`;\n            }\n            return `/${singleStringify(pattern)}/${flags ? singleStringify(flags) : ''}`;\n        }\n    Decimal128SymbolTemplate: &Decimal128SymbolTemplate !!js/function >\n        () => {\n            return 'BSON::Decimal128';\n        }\n    Decimal128SymbolArgsTemplate: &Decimal128SymbolArgsTemplate !!js/function >\n        (lhs, arg) => {\n            arg = arg === undefined ? '0' : arg.toString();\n            if (arg.charAt(0) === '\\'' && arg.charAt(arg.length - 1) === '\\'') {\n                return `.new(${arg})`;\n            }\n            return `.new('${arg}')`;\n        }\n    MinKeySymbolTemplate: &MinKeySymbolTemplate !!js/function >\n        () => {\n            return 'BSON::MinKey';\n        }\n    MinKeySymbolArgsTemplate: &MinKeySymbolArgsTemplate !!js/function >\n        () => {\n            return '.new';\n        }\n    MaxKeySymbolTemplate: &MaxKeySymbolTemplate !!js/function >\n        () => {\n            return 'BSON::MaxKey';\n        }\n    MaxKeySymbolArgsTemplate: &MaxKeySymbolArgsTemplate !!js/function >\n        () => {\n            return '.new';\n        }\n    TimestampSymbolTemplate: &TimestampSymbolTemplate !!js/function >\n        () => {\n            return 'BSON::Timestamp';\n        }\n    TimestampSymbolArgsTemplate: &TimestampSymbolArgsTemplate !!js/function >\n        (lhs, arg1, arg2) => {\n            return `.new(${arg1 === undefined ? 0 : arg1}, ${arg2 === undefined ? 0 : arg2})`;\n        }\n    # non bson-specific\n    NumberSymbolTemplate: &NumberSymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    NumberSymbolArgsTemplate: &NumberSymbolArgsTemplate !!js/function >\n        (lhs, arg, type) => {\n            arg = arg === undefined ? 0 : arg;\n            const str = arg.toString();\n            let newStr = str;\n            if (\n                (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                newStr = str.substr(1, str.length - 2);\n                return `'${newStr}'.to_f`;\n            } else if (type === '_decimal' || type === '_double') {\n                return newStr;\n            } else {\n                return `${newStr}.to_f`;\n            }\n        }\n    DateSymbolTemplate: &DateSymbolTemplate !!js/function >\n        () => {\n            return 'Time';\n        }\n    DateSymbolArgsTemplate: &DateSymbolArgsTemplate !!js/function >\n        (lhs, date, isString) => {\n            const toStr = isString ? '.strftime(\\'%a %b %d %Y %H:%M:%S %Z\\')' : '';\n\n            if (date === null) {\n                return `${lhs}.new.utc${toStr}`;\n            }\n\n            const dateStr = [\n                date.getUTCFullYear(),\n                date.getUTCMonth() + 1,\n                date.getUTCDate(),\n                date.getUTCHours(),\n                date.getUTCMinutes(),\n                date.getUTCSeconds()\n            ].join(', ');\n\n            return `${lhs}.utc(${dateStr})${toStr}`;\n        }\n\n    DateSymbolNowTemplate: &DateSymbolNowTemplate !!js/function >\n        () => {\n            return 'Time.now.utc';\n        }\n    DateSymbolNowArgsTemplate: &DateSymbolNowArgsTemplate !!js/function >\n        (args) => {\n            return '';\n        }\n\n    #############################################\n    #         Object Attributes/Methods         #\n    #                                           #\n    # These're variables or functions called on #\n    # instantiated objects. For example,        #\n    # ObjectId().isValid() or Timestamp().t     #\n    #                                           #\n    # They follow the same pattern with the\n    # *Template/*ArgsTemplates: usually no args #\n    # to the Template and lhs plus any original #\n    # arguments to the ArgsTemplate.            #\n    #                                           #\n    #############################################\n    CodeCodeTemplate: &CodeCodeTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.javascript`;\n        }\n    CodeCodeArgsTemplate: &CodeCodeArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    CodeScopeTemplate: &CodeScopeTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.scope`;\n        }\n    CodeScopeArgsTemplate: &CodeScopeArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    ObjectIdToStringTemplate: &ObjectIdToStringTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.to_s`;\n        }\n    ObjectIdToStringArgsTemplate: &ObjectIdToStringArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    ObjectIdEqualsTemplate: &ObjectIdEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} == `;\n        }\n    ObjectIdEqualsArgsTemplate: &ObjectIdEqualsArgsTemplate !!js/function >\n        (arg) => {\n            return `${arg}`;\n        }\n    ObjectIdGetTimestampTemplate: &ObjectIdGetTimestampTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.to_time`;\n        }\n    ObjectIdGetTimestampArgsTemplate: &ObjectIdGetTimestampArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    ObjectIdIsValidTemplate: &ObjectIdIsValidTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.legal?`\n        }\n    ObjectIdIsValidArgsTemplate: &ObjectIdIsValidArgsTemplate null\n    BinaryValueTemplate: &BinaryValueTemplate null\n    BinaryValueArgsTemplate: &BinaryValueArgsTemplate null\n    BinaryLengthTemplate: &BinaryLengthTemplate null\n    BinaryLengthArgsTemplate: &BinaryLengthArgsTemplate null\n    BinaryToStringTemplate: &BinaryToStringTemplate null\n    BinaryToStringArgsTemplate: &BinaryToStringArgsTemplate null\n    BinarySubtypeTemplate: &BinarySubtypeTemplate null\n    BinarySubtypeArgsTemplate: &BinarySubtypeArgsTemplate null\n    DBRefGetDBTemplate: &DBRefGetDBTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.database`;\n        }\n    DBRefGetCollectionTemplate: &DBRefGetCollectionTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.collection`;\n        }\n    DBRefGetIdTemplate: &DBRefGetIdTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.id`;\n        }\n    DBRefGetDBArgsTemplate: &DBRefGetDBArgsTemplate !!js/function >\n        (lhs) => {\n            return '';\n        }\n    DBRefGetCollectionArgsTemplate: &DBRefGetCollectionArgsTemplate !!js/function >\n        (lhs) => {\n            return '';\n        }\n    DBRefGetIdArgsTemplate: &DBRefGetIdArgsTemplate !!js/function >\n        (lhs) => {\n            return '';\n        }\n    DBRefToStringTemplate: &DBRefToStringTemplate !!js/function >\n        (lhs) => {\n            return '${lhs}.to_s';\n        }\n    DBRefToStringArgsTemplate: &DBRefToStringArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    DoubleValueOfTemplate: &DoubleValueOfTemplate null\n    DoubleValueOfArgsTemplate: &DoubleValueOfArgsTemplate null\n    Int32ValueOfTemplate: &Int32ValueOfTemplate null\n    Int32ValueOfArgsTemplate: &Int32ValueOfArgsTemplate null\n    Int32ToStringTemplate: &Int32ToStringTemplate null\n    Int32ToStringArgsTemplate: &Int32ToStringArgsTemplate null\n    LongEqualsTemplate: &LongEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} ==`;\n        }\n    LongEqualsArgsTemplate: &LongEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongToIntTemplate: &LongToIntTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}`;\n        }\n    LongToIntArgsTemplate: &LongToIntArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongToStringTemplate: &LongToStringTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.to_s`;\n        }\n    LongToStringArgsTemplate: &LongToStringArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongToNumberTemplate: &LongToNumberTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.to_f`;\n        }\n    LongToNumberArgsTemplate: &LongToNumberArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongAddTemplate: &LongAddTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} +`;\n        }\n    LongAddArgsTemplate: &LongAddArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongSubtractTemplate: &LongSubtractTemplate !!js/function >\n        (arg) => {\n            return `${arg} -`;\n        }\n    LongSubtractArgsTemplate: &LongSubtractArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongMultiplyTemplate: &LongMultiplyTemplate !!js/function >\n        (arg) => {\n            return `${arg} *`;\n        }\n    LongMultiplyArgsTemplate: &LongMultiplyArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongDivTemplate: &LongDivTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} /`;\n        }\n    LongDivArgsTemplate: &LongDivArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongModuloTemplate: &LongModuloTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} %`;\n        }\n    LongModuloArgsTemplate: &LongModuloArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongAndTemplate: &LongAndTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} &`;\n        }\n    LongAndArgsTemplate: &LongAndArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongOrTemplate: &LongOrTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} |`;\n        }\n    LongOrArgsTemplate: &LongOrArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongXorTemplate: &LongXorTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} ^`;\n        }\n    LongXorArgsTemplate: &LongXorArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongShiftLeftTemplate: &LongShiftLeftTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <<`;\n        }\n    LongShiftLeftArgsTemplate: &LongShiftLeftArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongShiftRightTemplate: &LongShiftRightTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >>`;\n        }\n    LongShiftRightArgsTemplate: &LongShiftRightArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongCompareTemplate: &LongCompareTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} -`;\n        }\n    LongCompareArgsTemplate: &LongCompareArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongIsOddTemplate: &LongIsOddTemplate !!js/function >\n        (lhs) => {\n            return `(${lhs} % 2) == 1`;\n        }\n    LongIsOddArgsTemplate: &LongIsOddArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongIsZeroTemplate: &LongIsZeroTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} == 0`;\n        }\n    LongIsZeroArgsTemplate: &LongIsZeroArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongIsNegativeTemplate: &LongIsNegativeTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} < 0`;\n        }\n    LongIsNegativeArgsTemplate: &LongIsNegativeArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongNegateTemplate: &LongNegateTemplate !!js/function >\n        () => {\n            return '-';\n        }\n    LongNegateArgsTemplate: &LongNegateArgsTemplate !!js/function >\n        (lhs) => {\n            return lhs;\n        }\n    LongNotTemplate: &LongNotTemplate !!js/function >\n        () => {\n            return '~';\n        }\n    LongNotArgsTemplate: &LongNotArgsTemplate !!js/function >\n        (lhs) => {\n            return lhs;\n        }\n    LongNotEqualsTemplate: &LongNotEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} !=`;\n        }\n    LongNotEqualsArgsTemplate: &LongNotEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongGreaterThanTemplate: &LongGreaterThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >`;\n        }\n    LongGreaterThanArgsTemplate: &LongGreaterThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongGreaterThanOrEqualTemplate: &LongGreaterThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >=`;\n        }\n    LongGreaterThanOrEqualArgsTemplate: &LongGreaterThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongLessThanTemplate: &LongLessThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <`;\n        }\n    LongLessThanArgsTemplate: &LongLessThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongLessThanOrEqualTemplate: &LongLessThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <=`;\n        }\n    LongLessThanOrEqualArgsTemplate: &LongLessThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongFloatApproxTemplate: &LongFloatApproxTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.to_f`;\n        }\n    LongTopTemplate: &LongTopTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >> 32`;\n        }\n    LongBottomTemplate: &LongBottomTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} & 0x0000ffff`;\n        }\n    TimestampToStringTemplate: &TimestampToStringTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.to_s`;\n        }\n    TimestampToStringArgsTemplate: &TimestampToStringArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    TimestampEqualsTemplate: &TimestampEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} == `;\n        }\n    TimestampEqualsArgsTemplate: &TimestampEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}`;\n        }\n    TimestampGetLowBitsTemplate: &TimestampGetLowBitsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.seconds`;\n        }\n    TimestampGetLowBitsArgsTemplate: &TimestampGetLowBitsArgsTemplate !!js/function >\n        () => {\n            return ''\n        }\n    TimestampGetHighBitsTemplate: &TimestampGetHighBitsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.increment`;\n        }\n    TimestampGetHighBitsArgsTemplate: &TimestampGetHighBitsArgsTemplate !!js/function >\n        () => {\n            return ''\n        }\n    TimestampTTemplate: &TimestampTTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.seconds`;\n        }\n    TimestampITemplate: &TimestampITemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.increment`;\n        }\n    TimestampAsDateTemplate: &TimestampAsDateTemplate !!js/function >\n        (lhs) => {\n            return `Time.at(${lhs}.increment).utc`;\n        }\n    TimestampAsDateArgsTemplate: &TimestampAsDateArgsTemplate null\n    TimestampCompareTemplate: &TimestampCompareTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <=> `;\n        }\n    TimestampCompareArgsTemplate: &TimestampCompareArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}`;\n        }\n    TimestampNotEqualsTemplate: &TimestampNotEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} != `;\n        }\n    TimestampNotEqualsArgsTemplate: &TimestampNotEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}`;\n        }\n    TimestampGreaterThanTemplate: &TimestampGreaterThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} > `;\n        }\n    TimestampGreaterThanArgsTemplate: &TimestampGreaterThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}`;\n        }\n    TimestampGreaterThanOrEqualTemplate: &TimestampGreaterThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >= `;\n        }\n    TimestampGreaterThanOrEqualArgsTemplate: &TimestampGreaterThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}`;\n        }\n    TimestampLessThanTemplate: &TimestampLessThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} < `;\n        }\n    TimestampLessThanArgsTemplate: &TimestampLessThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}`;\n        }\n    TimestampLessThanOrEqualTemplate: &TimestampLessThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <= `;\n        }\n    TimestampLessThanOrEqualArgsTemplate: &TimestampLessThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}`;\n        }\n    SymbolValueOfTemplate: &SymbolValueOfTemplate !!js/function >\n        (lhs) => {\n            return lhs;\n        }\n    SymbolValueOfArgsTemplate: &SymbolValueOfArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    SymbolInspectTemplate: &SymbolInspectTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.inspect`;\n        }\n    SymbolInspectArgsTemplate: &SymbolInspectArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    SymbolToStringTemplate: &SymbolToStringTemplate !!js/function >\n        (lhs) => {\n            let extractRegex = (lhs) => {\n                let r = /^:'(.*)'$/;\n                let arr = r.exec(lhs);\n                return arr ? arr[1] : ''\n\n            }\n            let res = extractRegex(lhs)\n            return res ? `'${res}'` : `${lhs}.to_s`;\n        }\n    SymbolToStringArgsTemplate: &SymbolToStringArgsTemplate !!js/function >\n        (lhs) => {\n            return '';\n        }\n    Decimal128ToStringTemplate: &Decimal128ToStringTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.to_s`;\n        }\n    Decimal128ToStringArgsTemplate: &Decimal128ToStringArgsTemplate !!js/function >\n        (lhs) => {\n            return '';\n        }\n\n    #############################################\n    #         Symbol Attributes/Methods         #\n    #                                           #\n    # These're variables or functions called on #\n    # symbols. Also called bson-utils.          #\n    #                                           #\n    # They are basically the same thing as      #\n    # object attributes/methods, but need to be #\n    # distinguished since they are separate     #\n    # namespaces that happen to have the same   #\n    # name which is v confusing.                #\n    #                                           #\n    # For example, ObjectId().toString() is an  #\n    # object method, while ObjectId.fromString  #\n    # is a symbol attribute. These are two      #\n    # separate ObjectId related namespaces that #\n    # don't overlap.                            #\n    #                                           #\n    #############################################\n    LongSymbolMaxTemplate: &LongSymbolMaxTemplate !!js/function >\n        () => {\n            return '9223372036854775807';\n        }\n    LongSymbolMaxArgsTemplate: &LongSymbolMaxArgsTemplate null\n    LongSymbolMinTemplate: &LongSymbolMinTemplate !!js/function >\n        () => {\n            return '-9223372036854775808';\n        }\n    LongSymbolMinArgsTemplate: &LongSymbolMinArgsTemplate null\n    LongSymbolZeroTemplate: &LongSymbolZeroTemplate !!js/function >\n        () => {\n            return '0';\n        }\n    LongSymbolZeroArgsTemplate: &LongSymbolZeroArgsTemplate null\n    LongSymbolOneTemplate: &LongSymbolOneTemplate !!js/function >\n        () => {\n            return '1';\n        }\n    LongSymbolOneArgsTemplate: &LongSymbolOneArgsTemplate null\n    LongSymbolNegOneTemplate: &LongSymbolNegOneTemplate !!js/function >\n        () => {\n            return '-1';\n        }\n    LongSymbolNegOneArgsTemplate: &LongSymbolNegOneArgsTemplate null\n    LongSymbolFromBitsTemplate: &LongSymbolFromBitsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongSymbolFromBitsArgsTemplate: &LongSymbolFromBitsArgsTemplate null\n    LongSymbolFromIntTemplate: &LongSymbolFromIntTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongSymbolFromIntArgsTemplate: &LongSymbolFromIntArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return arg;\n        }\n    LongSymbolFromNumberTemplate: &LongSymbolFromNumberTemplate null\n    LongSymbolFromNumberArgsTemplate: &LongSymbolFromNumberArgsTemplate null\n    LongSymbolFromStringTemplate: &LongSymbolFromStringTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongSymbolFromStringArgsTemplate: &LongSymbolFromStringArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}.to_i`;\n        }\n    Decimal128SymbolFromStringTemplate: &Decimal128SymbolFromStringTemplate !!js/function >\n        () => {\n            return 'BSON::Decimal128';\n        }\n    Decimal128SymbolFromStringArgsTemplate: &Decimal128SymbolFromStringArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `.new(${arg})`;\n        }\n    ObjectIdCreateFromHexStringTemplate: &ObjectIdCreateFromHexStringTemplate !!js/function >\n        () => {\n            return 'BSON::ObjectId';\n        }\n    ObjectIdCreateFromHexStringArgsTemplate: &ObjectIdCreateFromHexStringArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `(${arg})`;\n        }\n    ObjectIdCreateFromTimeTemplate: &ObjectIdCreateFromTimeTemplate !!js/function >\n        () => {\n            return 'BSON::ObjectId.from_time';\n        }\n    ObjectIdCreateFromTimeArgsTemplate: &ObjectIdCreateFromTimeArgsTemplate !!js/function >\n        (lhs, arg, isNumber) => {\n            if (!isNumber) {\n                return `(${arg})`;\n            }\n            return `(Time.at(${arg}))`;\n        }\n    # non bson-specific would go here, but there aren't any atm.\n\n    #############################################\n    #                 Imports                   #\n    #                                           #\n    # Each type has a 'code' that is consistent #\n    # between languages. The import templates   #\n    # for each code generate the required       #\n    # statement for each type. No args.         #\n    #                                           #\n    # The ImportTemplate collects everything    #\n    # into one statement.                       #\n    #                                           #\n    #############################################\n    ImportTemplate: &ImportTemplate !!js/function >\n        (args) => {\n            let set = new Set(Object.values(args))\n            if (set.has(`require 'mongo'`)) return `require 'mongo'`\n            return [...set].sort().join('\\n');\n        }\n    DriverImportTemplate: &DriverImportTemplate !!js/function >\n        () => {\n            return `require 'mongo'`\n        }\n    0ImportTemplate: &0ImportTemplate null\n    1ImportTemplate: &1ImportTemplate null\n    2ImportTemplate: &2ImportTemplate null\n    3ImportTemplate: &3ImportTemplate null\n    4ImportTemplate: &4ImportTemplate null\n    5ImportTemplate: &5ImportTemplate null\n    6ImportTemplate: &6ImportTemplate null\n    7ImportTemplate: &7ImportTemplate null\n    8ImportTemplate: &8ImportTemplate null\n    9ImportTemplate: &9ImportTemplate null\n    10ImportTemplate: &10ImportTemplate null\n    11ImportTemplate: &11ImportTemplate null\n    12ImportTemplate: &12ImportTemplate null\n    100ImportTemplate: &100ImportTemplate !!js/function >\n        () => {\n            return `require 'bson'`\n        }\n    101ImportTemplate: &101ImportTemplate !!js/function >\n        () => {\n            return `require 'bson'`\n        }\n    102ImportTemplate: &102ImportTemplate !!js/function >\n        () => {\n            return `require 'bson'`\n        }\n    103ImportTemplate: &103ImportTemplate !!js/function >\n        () => {\n            return `require 'bson'`\n        }\n    104ImportTemplate: &104ImportTemplate null\n    105ImportTemplate: &105ImportTemplate null\n    106ImportTemplate: &106ImportTemplate null\n    107ImportTemplate: &107ImportTemplate !!js/function >\n        () => {\n            return `require 'bson'`\n        }\n    108ImportTemplate: &108ImportTemplate !!js/function >\n        () => {\n            return `require 'bson'`\n        }\n    109ImportTemplate: &109ImportTemplate null\n    110ImportTemplate: &110ImportTemplate !!js/function >\n        () => {\n            return `require 'bson'`\n        }\n    111ImportTemplate: &111ImportTemplate null\n    112ImportTemplate: &112ImportTemplate !!js/function >\n        () => {\n            return `require 'bson'`\n        }\n    113ImportTemplate: &113ImportTemplate null\n    114ImportTemplate: &114ImportTemplate null\n    200ImportTemplate: &200ImportTemplate null\n    201ImportTemplate: &201ImportTemplate null\n    300ImportTemplate: &300ImportTemplate null\n    301ImportTemplate: &301ImportTemplate null\n    302ImportTemplate: &302ImportTemplate null\n    303ImportTemplate: &303ImportTemplate null\n    304ImportTemplate: &304ImportTemplate null\n    305ImportTemplate: &305ImportTemplate null\n    306ImportTemplate: &306ImportTemplate null\n# Universal types\n# Everything inherits from StringType because we haven't implemented any of them.\nBasicTypes:\n    # Universal basic types\n    _bool: &BoolType\n        <<: *__type\n        id: \"_bool\"\n        code: 0\n        template: *BoolTypeTemplate\n    _integer: &IntegerType\n        <<: *__type\n        id: \"_integer\"\n        code: 1\n        template: *IntegerTypeTemplate\n    _long: &LongBasicType\n        <<: *__type\n        id: \"_long\"\n        code: 2\n        template: *LongBasicTypeTemplate\n    _decimal: &DecimalType\n        <<: *__type\n        id: \"_decimal\"\n        code: 3\n        template: *DecimalTypeTemplate\n    _hex: &HexType\n        <<: *__type\n        id: \"_hex\"\n        code: 4\n        template: *HexTypeTemplate\n    _octal: &OctalType\n        <<: *__type\n        id: \"_octal\"\n        code: 5\n        template: *OctalTypeTemplate\n    _numeric: &NumericType\n        <<: *__type\n        id: \"_numeric\"\n        code: 6\n        template: *NumericTypeTemplate\n    _string: &StringType\n        <<: *__type\n        id: \"_string\"\n        code: 7\n        template: *StringTypeTemplate\n    _regex: &RegexType\n        <<: *__type\n        id: \"_regex\"\n        code: 8\n        template: *RegexTypeTemplate\n    _array: &ArrayType\n        <<: *__type\n        id: \"_array\"\n        code: 9\n        template: *ArrayTypeTemplate\n        argsTemplate: *ArrayTypeArgsTemplate\n    _object: &ObjectType\n        <<: *__type\n        id: \"_object\"\n        code: 10\n        template: *ObjectTypeTemplate\n        argsTemplate: *ObjectTypeArgsTemplate\n    _null: &NullType\n        <<: *__type\n        id: \"_null\"\n        code: 11\n        template: *NullTypeTemplate\n    _undefined: &UndefinedType\n        <<: *__type\n        id: \"_undefined\"\n        code: 12\n        template: *UndefinedTypeTemplate\n\nSyntax:\n    equality:\n        template: *EqualitySyntaxTemplate\n    in:\n        template: *InSyntaxTemplate\n    and:\n        template: *AndSyntaxTemplate\n    or:\n        template: *OrSyntaxTemplate\n    not:\n        template: *NotSyntaxTemplate\n    unary:\n        template: *UnarySyntaxTemplate\n    binary:\n        template: *BinarySyntaxTemplate\n    parens:\n        template: *ParensSyntaxTemplate\n    eos:\n        template: *EosSyntaxTemplate\n    eof:\n        template: *EofSyntaxTemplate\n    # The new template takes in expr, and an optional skip argument and optional\n    # id argument. The skip argument is a boolean that if true then doesn't add\n    # new. The code argument is the symbol code being called. The template will check\n    # if it is an exception, i.e. a type that is a constructor but may not use new.\n    new:\n        template: *NewSyntaxTemplate\n    # The regex flags that change symbols between languages can be defined here.\n    # Flags that aren't defined can be left blank and will be ignored.\n    regexFlags: *RegexFlags\n    bsonRegexFlags: *BSONRegexFlags\n    driver: *DriverTemplate\nImports:\n    import:\n        template: *ImportTemplate\n    driver:\n        template: *DriverImportTemplate\n    0:\n        template: *0ImportTemplate\n    1:\n        template: *1ImportTemplate\n    2:\n        template: *2ImportTemplate\n    3:\n        template: *3ImportTemplate\n    4:\n        template: *4ImportTemplate\n    5:\n        template: *5ImportTemplate\n    6:\n        template: *6ImportTemplate\n    7:\n        template: *7ImportTemplate\n    8:\n        template: *8ImportTemplate\n    9:\n        template: *9ImportTemplate\n    10:\n        template: *10ImportTemplate\n    11:\n        template: *11ImportTemplate\n    12:\n        template: *12ImportTemplate\n    100:\n        template: *100ImportTemplate\n    101:\n        template: *101ImportTemplate\n    102:\n        template: *102ImportTemplate\n    103:\n        template: *103ImportTemplate\n    104:\n        template: *104ImportTemplate\n    105:\n        template: *105ImportTemplate\n    106:\n        template: *106ImportTemplate\n    107:\n        template: *107ImportTemplate\n    108:\n        template: *108ImportTemplate\n    109:\n        template: *109ImportTemplate\n    110:\n        template: *110ImportTemplate\n    111:\n        template: *111ImportTemplate\n    112:\n        template: *112ImportTemplate\n    113:\n        template: *113ImportTemplate\n    114:\n        template: *114ImportTemplate\n    200:\n        template: *200ImportTemplate\n    201:\n        template: *201ImportTemplate\n    300:\n        template: *300ImportTemplate\n    301:\n        template: *301ImportTemplate\n    302:\n        template: *302ImportTemplate\n    303:\n        template: *303ImportTemplate\n    304:\n        template: *304ImportTemplate\n    305:\n        template: *305ImportTemplate\n    306:\n        template: *306ImportTemplate\nBsonTypes:\n    Code: &CodeType\n        <<: *__type\n        id: \"Code\"\n        code: 100\n        type: *ObjectType\n        attr:\n            code:\n                callable: *var\n                args: null\n                attr: null\n                id: \"code\"\n                type: *StringType\n                template: *CodeCodeTemplate\n                argsTemplate: *CodeCodeArgsTemplate\n            scope:\n                callable: *var\n                args: null\n                attr: null\n                id: \"scope\"\n                type: *StringType\n                template: *CodeScopeTemplate\n                argsTemplate: *CodeScopeArgsTemplate\n    ObjectId: &ObjectIdType\n        <<: *__type\n        id: \"ObjectId\"\n        code: 101\n        type: *ObjectType\n        attr:\n            toHexString:\n                <<: *__func\n                id: \"toHexString\"\n                type: *StringType\n            toString:\n                <<: *__func\n                type: *StringType\n                template: *ObjectIdToStringTemplate\n                argsTemplate: *ObjectIdToStringArgsTemplate\n            equals:\n                <<: *__func\n                args:\n                    - [ \"ObjectId\" ]\n                type: *BoolType\n                template: *ObjectIdEqualsTemplate\n                argsTemplate: *ObjectIdEqualsArgsTemplate\n            getTimestamp:\n                <<: *__func\n                type: *IntegerType\n                template: *ObjectIdGetTimestampTemplate\n                argsTemplate: *ObjectIdGetTimestampArgsTemplate\n    Binary: &BinaryType\n        <<: *__type\n        id: \"Binary\"\n        code: 102\n        type: *ObjectType\n        attr:\n            value:\n                <<: *__func\n                id: \"value\"\n                type: *StringType\n                template: *BinaryValueTemplate\n                argsTemplate: *BinaryValueArgsTemplate\n            length:\n                <<: *__func\n                id: \"length\"\n                type: *IntegerType\n                template: *BinaryLengthTemplate\n                argsTemplate: *BinaryLengthArgsTemplate\n            toString:\n                <<: *__func\n                id: \"toString\"\n                type: *StringType\n                template: *BinaryToStringTemplate\n                argsTemplate: *BinaryToStringArgsTemplate\n            sub_type:\n                callable: *var\n                args: null\n                attr: null\n                id: \"subtype\"\n                type: *IntegerType\n                template: *BinarySubtypeTemplate\n                argsTemplate: *BinarySubtypeArgsTemplate\n    DBRef: &DBRefType\n        <<: *__type\n        id: \"DBRef\"\n        code: 103\n        type: *ObjectType\n        attr:\n            db:\n                callable: *var\n                args: null\n                attr: null\n                id: \"db\"\n                type: *StringType\n                template: *DBRefGetDBTemplate\n                argsTemplate: *DBRefGetDBArgsTemplate\n            namespace:\n                callable: *var\n                args: null\n                attr: null\n                id: \"namespace\"\n                type: *StringType\n                template: *DBRefGetCollectionTemplate\n                argsTemplate: *DBRefGetCollectionArgsTemplate\n            oid:\n                callable: *var\n                args: null\n                attr: null\n                id: \"oid\"\n                type: *StringType\n                template: *DBRefGetIdTemplate\n                argsTemplate: *DBRefGetIdArgsTemplate\n    Double: &DoubleType\n        <<: *__type\n        id: \"Double\"\n        code: 104\n        type: *ObjectType\n        attr: {}\n    Int32: &Int32Type\n        <<: *__type\n        id: \"Int32\"\n        code: 105\n        type: *ObjectType\n        attr: {}\n    Long: &LongType\n        <<: *__type\n        id: \"Long\"\n        code: 106\n        type: *ObjectType\n        attr:\n            toString:\n                <<: *__func\n                id: \"LongtoString\" # Needs process method\n                args:\n                    - [ *IntegerType, null ]\n                type: *StringType\n                template: *LongToStringTemplate\n                argsTemplate: *LongToStringArgsTemplate\n            equals:\n                <<: *__func\n                id: \"equals\"\n                args:\n                    - [ \"Long\" ]\n                type: *BoolType\n                template: *LongEqualsTemplate\n                argsTemplate: *LongEqualsArgsTemplate\n            toInt:\n                <<: *__func\n                id: \"toInt\"\n                type: *IntegerType\n                template: *LongToIntTemplate\n                argsTemplate: *LongToIntArgsTemplate\n            toNumber:\n                <<: *__func\n                id: \"toNumber\"\n                type: *DecimalType\n                template: *LongToNumberTemplate\n                argsTemplate: *LongToNumberArgsTemplate\n            compare:\n                <<: *__func\n                id: \"compare\"\n                args:\n                    - [ \"Long\" ]\n                type: *StringType\n                template: *LongCompareTemplate\n                argsTemplate: *LongCompareArgsTemplate\n            isOdd:\n                <<: *__func\n                id: \"isOdd\"\n                type: *BoolType\n                template: *LongIsOddTemplate\n                argsTemplate: *LongIsOddArgsTemplate\n            isZero:\n                <<: *__func\n                id: \"isZero\"\n                type: *BoolType\n                template: *LongIsZeroTemplate\n                argsTemplate: *LongIsZeroArgsTemplate\n            isNegative:\n                <<: *__func\n                id: \"isNegative\"\n                type: *BoolType\n                template: *LongIsNegativeTemplate\n                argsTemplate: *LongIsNegativeArgsTemplate\n            negate:\n                <<: *__func\n                id: \"negate\"\n                type: \"Long\"\n                template: *LongNegateTemplate\n                argsTemplate: *LongNegateArgsTemplate\n            not:\n                <<: *__func\n                id: \"not\"\n                type: \"Long\"\n                template: *LongNotTemplate\n                argsTemplate: *LongNotArgsTemplate\n            notEquals:\n                <<: *__func\n                id: \"notEquals\"\n                args:\n                    - [ \"Long\" ]\n                type: *BoolType\n                template: *LongNotEqualsTemplate\n                argsTemplate: *LongNotEqualsArgsTemplate\n            greaterThan:\n                <<: *__func\n                id: \"greaterThan\"\n                args:\n                    - [ \"Long\" ]\n                type: *BoolType\n                template: *LongGreaterThanTemplate\n                argsTemplate: *LongGreaterThanArgsTemplate\n            greaterThanOrEqual:\n                <<: *__func\n                id: \"greaterThanOrEqual\"\n                args:\n                    - [ \"Long\" ]\n                type: *BoolType\n                template: *LongGreaterThanOrEqualTemplate\n                argsTemplate: *LongGreaterThanOrEqualArgsTemplate\n            lessThan:\n                <<: *__func\n                id: \"lessThan\"\n                args:\n                    - [ \"Long\" ]\n                type: *BoolType\n                template: *LongLessThanTemplate\n                argsTemplate: *LongLessThanArgsTemplate\n            lessThanOrEqual:\n                <<: *__func\n                id: \"lessThanOrEqual\"\n                args:\n                    - [ \"Long\" ]\n                type: *BoolType\n                template: *LongLessThanOrEqualTemplate\n                argsTemplate: *LongLessThanOrEqualArgsTemplate\n            add:\n                <<: *__func\n                id: \"add\"\n                args:\n                    - [ \"Long\" ]\n                type: \"Long\"\n                template: *LongAddTemplate\n                argsTemplate: *LongAddArgsTemplate\n            subtract:\n                <<: *__func\n                id: \"subtract\"\n                args:\n                    - [ \"Long\" ]\n                type: \"Long\"\n                template: *LongSubtractTemplate\n                argsTemplate: *LongSubtractArgsTemplate\n            multiply:\n                <<: *__func\n                id: \"multiply\"\n                args:\n                    - [ \"Long\" ]\n                type: \"Long\"\n                template: *LongMultiplyTemplate\n                argsTemplate: *LongMultiplyArgsTemplate\n            div:\n                <<: *__func\n                id: \"div\"\n                args:\n                    - [ \"Long\" ]\n                type: \"Long\"\n                template: *LongDivTemplate\n                argsTemplate: *LongDivArgsTemplate\n            modulo:\n                <<: *__func\n                id: \"modulo\"\n                args:\n                    - [ \"Long\" ]\n                type: \"Long\"\n                template: *LongModuloTemplate\n                argsTemplate: *LongModuloArgsTemplate\n            and:\n                <<: *__func\n                id: \"and\"\n                args:\n                    - [ \"Long\" ]\n                type: \"Long\"\n                template: *LongAndTemplate\n                argsTemplate: *LongAndArgsTemplate\n            or:\n                <<: *__func\n                id: \"or\"\n                args:\n                    - [ \"Long\" ]\n                type: \"Long\"\n                template: *LongOrTemplate\n                argsTemplate: *LongOrArgsTemplate\n            xor:\n                <<: *__func\n                id: \"xor\"\n                args:\n                    - [ \"Long\" ]\n                type: \"Long\"\n                template: *LongXorTemplate\n                argsTemplate: *LongXorArgsTemplate\n            shiftLeft:\n                <<: *__func\n                id: \"shiftLeft\"\n                args:\n                    - [ *IntegerType ]\n                type: \"Long\"\n                template: *LongShiftLeftTemplate\n                argsTemplate: *LongShiftLeftArgsTemplate\n            shiftRight:\n                <<: *__func\n                id: \"shiftRight\"\n                args:\n                    - [ *IntegerType ]\n                type: \"Long\"\n                template: *LongShiftRightTemplate\n                argsTemplate: *LongShiftRightArgsTemplate\n    MinKeyType: &MinKeyType\n        <<: *__type\n        id: \"MinKey\"\n        code: 107\n        type: *ObjectType\n    MaxKeyType: &MaxKeyType\n        <<: *__type\n        id: \"MaxKey\"\n        code: 108\n        type: *ObjectType\n    BSONRegExpType: &BSONRegExpType\n        <<: *__type\n        id: \"BSONRegExp\"\n        code: 109\n        type: *ObjectType #TODO: add pattern + options\n    Timestamp: &TimestampType\n        <<: *__type\n        id: \"Timestamp\"\n        code: 110\n        type: *ObjectType\n        attr:\n            toString:\n                <<: *__func\n                id: \"toString\"\n                type: *StringType\n                template: *TimestampToStringTemplate\n                argsTemplate: *TimestampToStringArgsTemplate\n            equals:\n                <<: *__func\n                id: \"equals\"\n                args:\n                    - [ \"Timestamp\" ]\n                type: *BoolType\n                template: *TimestampEqualsTemplate\n                argsTemplate: *TimestampEqualsArgsTemplate\n            getLowBits:\n                <<: *__func\n                id: \"getLowBits\"\n                type: *IntegerType\n                template: *TimestampGetLowBitsTemplate\n                argsTemplate: *TimestampGetLowBitsArgsTemplate\n            getHighBits:\n                <<: *__func\n                id: \"getHighBits\"\n                type: *IntegerType\n                template: *TimestampGetHighBitsTemplate\n                argsTemplate: *TimestampGetHighBitsArgsTemplate\n            compare:\n                <<: *__func\n                id: \"compare\"\n                args:\n                    - [ \"Timestamp\" ]\n                type: *StringType\n                template: *TimestampCompareTemplate\n                argsTemplate: *TimestampCompareArgsTemplate\n            notEquals:\n                <<: *__func\n                id: \"notEquals\"\n                args:\n                    - [ \"Timestamp\" ]\n                type: *BoolType\n                template: *TimestampNotEqualsTemplate\n                argsTemplate: *TimestampNotEqualsArgsTemplate\n            greaterThan:\n                <<: *__func\n                id: \"greaterThan\"\n                args:\n                    - [ \"Timestamp\" ]\n                type: *BoolType\n                template: *TimestampGreaterThanTemplate\n                argsTemplate: *TimestampGreaterThanArgsTemplate\n            greaterThanOrEqual:\n                <<: *__func\n                id: \"greaterThanOrEqual\"\n                args:\n                    - [ \"Timestamp\" ]\n                type: *BoolType\n                template: *TimestampGreaterThanOrEqualTemplate\n                argsTemplate: *TimestampGreaterThanOrEqualArgsTemplate\n            lessThan:\n                <<: *__func\n                id: \"lessThan\"\n                args:\n                    - [ \"Timestamp\" ]\n                type: *BoolType\n                template: *TimestampLessThanTemplate\n                argsTemplate: *TimestampLessThanArgsTemplate\n            lessThanOrEqual:\n                <<: *__func\n                id: \"lessThanOrEqual\"\n                args:\n                    - [ \"Timestamp\" ]\n                type: *BoolType\n                template: *TimestampLessThanOrEqualTemplate\n                argsTemplate: *TimestampLessThanOrEqualArgsTemplate\n    BSONSymbol: &SymbolType\n        <<: *__type\n        id: \"BSONSymbol\"\n        code: 111\n        type: *ObjectType\n        attr:\n            valueOf:\n                <<: *__func\n                id: \"valueOf\"\n                type: *StringType\n                template: *SymbolValueOfTemplate\n                argsTemplate: *SymbolValueOfArgsTemplate\n            toString:\n                <<: *__func\n                id: \"toString\"\n                type: *StringType\n                template: *SymbolToStringTemplate\n                argsTemplate: *SymbolToStringArgsTemplate\n            inspect:\n                <<: *__func\n                id: \"inspect\"\n                type: *StringType\n                template: *SymbolInspectTemplate\n                argsTemplate: *SymbolInspectArgsTemplate\n    Decimal128: &Decimal128Type\n        <<: *__type\n        id: \"Decimal128\"\n        code: 112\n        type: *ObjectType\n        attr:\n            toString:\n                <<: *__func\n                id: \"toString\"\n                type: *StringType\n                template: *Decimal128ToStringTemplate\n                argsTemplate: *Decimal128ToStringArgsTemplate\nNativeTypes:\n    Date: &DateType\n        <<: *__type\n        id: \"Date\"\n        code: 200\n        type: *ObjectType\n        attr: {} # TODO: no built-in date methods added yet\nBsonSymbols:\n    Code: &CodeSymbol\n        id: \"CodeFromJS\"\n        code: 100\n        callable: *constructor\n        args:\n            - [ *StringType ]\n            - [ *ObjectType, null ]\n        type: *CodeType\n        attr: {}\n        template: *CodeSymbolTemplate\n        argsTemplate: *CodeSymbolArgsTemplate\n    ObjectId: &ObjectIdSymbol\n        id: \"ObjectId\"\n        code: 101\n        callable: *constructor\n        args:\n            - [ *StringType, *NumericType, null ]\n        type: *ObjectIdType\n        attr:\n            createFromHexString:\n                <<: *__func\n                id: \"createFromHexString\"\n                args:\n                    - [ *StringType ]\n                type: *ObjectIdType\n                template: *ObjectIdCreateFromHexStringTemplate\n                argsTemplate: *ObjectIdCreateFromHexStringArgsTemplate\n            createFromTime:\n                <<: *__func\n                id: \"ObjectIdCreateFromTime\"\n                args:\n                    - [ *NumericType ]\n                type: *ObjectIdType\n                template: *ObjectIdCreateFromTimeTemplate\n                argsTemplate: *ObjectIdCreateFromTimeArgsTemplate\n            isValid:\n                <<: *__func\n                id: \"isValid\"\n                args:\n                    - [ *StringType ]\n                type: *BoolType\n                template: *ObjectIdIsValidTemplate\n                argsTemplate: *ObjectIdIsValidArgsTemplate\n        template: *ObjectIdSymbolTemplate\n        argsTemplate: *ObjectIdSymbolArgsTemplate\n    Binary: &BinarySymbol\n        id: \"Binary\"\n        code: 102\n        callable: *constructor\n        args:\n            - [ *StringType, *NumericType, *ObjectType ]\n            - [ *NumericType, null ]\n        type: *BinaryType\n        attr:\n            SUBTYPE_DEFAULT:\n                id: \"SUBTYPE_DEFAULT\"\n                callable: *var\n                args: null\n                type: *IntegerType\n                template: *BinarySymbolSubtypeDefaultTemplate\n            SUBTYPE_FUNCTION:\n                id: \"SUBTYPE_FUNCTION\"\n                callable: *var\n                args: null\n                type: *IntegerType\n                template: *BinarySymbolSubtypeFunctionTemplate\n            SUBTYPE_BYTE_ARRAY:\n                id: \"SUBTYPE_BYTE_ARRAY\"\n                callable: *var\n                args: null\n                type: *IntegerType\n                template: *BinarySymbolSubtypeByteArrayTemplate\n            SUBTYPE_UUID_OLD:\n                id: \"SUBTYPE_UUID_OLD\"\n                callable: *var\n                args: null\n                type: *IntegerType\n                template: *BinarySymbolSubtypeUuidOldTemplate\n            SUBTYPE_UUID:\n                id: \"SUBTYPE_UUID\"\n                callable: *var\n                args: null\n                type: *IntegerType\n                template: *BinarySymbolSubtypeUuidTemplate\n            SUBTYPE_MD5:\n                id: \"SUBTYPE_MD5\"\n                callable: *var\n                args: null\n                type: *IntegerType\n                template: *BinarySymbolSubtypeMd5Template\n            SUBTYPE_USER_DEFINED:\n                id: \"SUBTYPE_USER_DEFINED\"\n                callable: *var\n                args: null\n                type: *IntegerType\n                template: *BinarySymbolSubtypeUserDefinedTemplate\n        template: *BinarySymbolTemplate\n        argsTemplate: *BinarySymbolArgsTemplate\n    DBRef:\n        id: \"DBRef\"\n        code: 103\n        callable: *constructor\n        args:\n            - [ *StringType ]\n            - [ *ObjectIdType ]\n            - [ *StringType, null ]\n        type: *DBRefType\n        attr: {}\n        template: *DBRefSymbolTemplate\n        argsTemplate: *DBRefSymbolArgsTemplate\n    Double:\n        id: \"Double\"\n        code: 104\n        callable: *constructor\n        args:\n            - [ *NumericType, *StringType ]\n        type: *DoubleType\n        attr: {}\n        template: *DoubleSymbolTemplate\n        argsTemplate: *DoubleSymbolArgsTemplate\n    Int32:\n        id: \"Int32\"\n        code: 105\n        callable: *constructor\n        args:\n            - [ *NumericType, *StringType ]\n        type: *Int32Type\n        attr: {}\n        template: *Int32SymbolTemplate\n        argsTemplate: *Int32SymbolArgsTemplate\n    Long:\n        id: \"Long\"\n        code: 106\n        callable: *constructor\n        args:\n            - [ *IntegerType ]\n            - [ *IntegerType ]\n        type: *LongType\n        attr:\n            MAX_VALUE:\n                id: \"MAX_VALUE\"\n                callable: *var\n                args: null\n                type: *LongType\n                attr: {}\n                template: *LongSymbolMaxTemplate\n                argsTemplate: *LongSymbolMaxArgsTemplate\n            MIN_VALUE:\n                id: \"MIN_VALUE\"\n                callable: *var\n                args: null\n                type: *LongType\n                attr: {}\n                template: *LongSymbolMinTemplate\n                argsTemplate: *LongSymbolMinArgsTemplate\n            ZERO:\n                id: \"ZERO\"\n                callable: *var\n                args: null\n                type: *LongType\n                attr: {}\n                template: *LongSymbolZeroTemplate\n                argsTemplate: *LongSymbolZeroArgsTemplate\n            ONE:\n                id: \"ONE\"\n                callable: *var\n                args: null\n                type: *LongType\n                attr: {}\n                template: *LongSymbolOneTemplate\n                argsTemplate: *LongSymbolOneArgsTemplate\n            NEG_ONE:\n                id: \"NEG_ONE\"\n                callable: *var\n                args: null\n                type: *LongType\n                attr: {}\n                template: *LongSymbolNegOneTemplate\n                argsTemplate: *LongSymbolNegOneArgsTemplate\n            fromBits:\n                id: \"LongfromBits\" # Needs process method\n                callable: *func\n                args:\n                    - [ *IntegerType ]\n                    - [ *IntegerType ]\n                type: *LongType\n                attr: {}\n                template: *LongSymbolFromBitsTemplate\n                argsTemplate: *LongSymbolFromBitsArgsTemplate\n            fromInt:\n                id: \"fromInt\"\n                callable: *func\n                args:\n                    - [ *IntegerType ]\n                type: *LongType\n                attr: {}\n                template: *LongSymbolFromIntTemplate\n                argsTemplate: *LongSymbolFromIntArgsTemplate\n            fromNumber:\n                id: \"fromNumber\"\n                callable: *func\n                args:\n                    - [ *NumericType ]\n                type: *LongType\n                attr: {}\n                template: *LongSymbolFromNumberTemplate\n                argsTemplate: *LongSymbolFromNumberArgsTemplate\n            fromString:\n                id: \"fromString\"\n                callable: *func\n                args:\n                    - [ *StringType ]\n                    - [ *IntegerType, null ]\n                type: *LongType\n                attr: {}\n                template: *LongSymbolFromStringTemplate\n                argsTemplate: *LongSymbolFromStringArgsTemplate\n        template: *LongSymbolTemplate\n        argsTemplate: *LongSymbolArgsTemplate\n    MinKey:\n        id: \"MinKey\"\n        code: 107\n        callable: *constructor\n        args: []\n        type: *MinKeyType\n        attr: {}\n        template: *MinKeySymbolTemplate\n        argsTemplate: *MinKeySymbolArgsTemplate\n    MaxKey:\n        id: \"MaxKey\"\n        code: 108\n        callable: *constructor\n        args: []\n        type: *MaxKeyType\n        attr: {}\n        template: *MaxKeySymbolTemplate\n        argsTemplate: *MaxKeySymbolArgsTemplate\n    Timestamp:\n        id: \"Timestamp\"\n        code: 110\n        callable: *constructor\n        args:\n            - [ *IntegerType ]\n            - [ *IntegerType ]\n        type: *TimestampType\n        attr: {} #TODO: add fromInt, fromNumber, fromBits, fromString\n        template: *TimestampSymbolTemplate\n        argsTemplate: *TimestampSymbolArgsTemplate\n    BSONSymbol:\n        id: \"BSONSymbol\"\n        code: 111\n        callable: *constructor\n        args:\n            - [ *StringType ]\n        type: *SymbolType\n        attr: {}\n        template: *SymbolSymbolTemplate\n        argsTemplate: *SymbolSymbolArgsTemplate\n    BSONRegExp:\n        id: \"BSONRegExp\"\n        code: 109\n        callable: *constructor\n        args:\n            - [ *StringType ]\n            - [ *StringType, null ]\n        type: *BSONRegExpType\n        attr: {}\n        template: *BSONRegExpSymbolTemplate\n        argsTemplate: *BSONRegExpSymbolArgsTemplate\n    Decimal128:\n        id: \"Decimal128\"\n        code: 112\n        callable: *constructor\n        args:\n            - [ *ObjectType ]\n        type: *Decimal128Type\n        attr:\n            fromString:\n                id: \"fromString\"\n                callable: *func\n                args:\n                    - [ *StringType ]\n                type: *Decimal128Type\n                attr: {}\n                template: *Decimal128SymbolFromStringTemplate\n                argsTemplate: *Decimal128SymbolFromStringArgsTemplate\n        template: *Decimal128SymbolTemplate\n        argsTemplate: *Decimal128SymbolArgsTemplate\n\nNativeSymbols:\n    Number:\n        id: \"Number\"\n        code: 2\n        callable: *constructor\n        args:\n            - [ *IntegerType, *StringType ]\n        type: *NumericType\n        attr: {} # TODO: no built-in number funcs added yet\n        template: *NumberSymbolTemplate\n        argsTemplate: *NumberSymbolArgsTemplate\n    Date: # Needs process method\n        id: \"Date\"\n        code: 200\n        callable: *constructor\n        args:\n            - [ *StringType, *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n        type: *DateType\n        attr: # TODO: add more date funcs?\n            now:\n                id: \"now\"\n                code: 200.1\n                callable: *func\n                args: []\n                type: *DateType\n                attr: {}\n                template: *DateSymbolNowTemplate\n                argsTemplate: *DateSymbolNowArgsTemplate\n        template: *DateSymbolTemplate\n        argsTemplate: *DateSymbolArgsTemplate\n    RegExp: # Needs process method\n        id: \"RegExp\"\n        code: 8\n        callable: *constructor\n        args:\n            - [ *StringType, *RegexType ]\n            - [ *StringType, null ]\n        type: *RegexType\n        attr: {}\n        template: *RegExpSymbolTemplate\n        argsTemplate: *RegExpSymbolArgsTemplate\n"},87858:e=>{e.exports='SymbolTypes:\n    VAR: &var 0\n    CONSTRUCTOR: &constructor 1\n    FUNC: &func 2\n# Internal patterns to save typing\n__type: &__type\n    id: null\n    callable: *var\n    args: null\n    type: null\n    attr: {}\n    template: null\n    argsTemplate: null\n__func: &__func\n    callable: *func\n    args: []\n    attr: {}\n    template: null\n    argsTemplate: null\n\n# Java Templates\nTemplates:\n    # Misc\n    RegexFlags: &RegexFlags\n        i: \'i\'\n        m: \'m\'\n        u: \'u\'\n        y: \'y\'\n        g: \'g\'\n    BSONRegexFlags: &BSONRegexFlags\n        i: \'i\'\n        m: \'m\'\n        x: \'x\'\n        s: \'s\'\n        l: \'l\'\n        u: \'u\'\n    # Syntax\n    DriverTemplate: &DriverTemplate !!js/function >\n        (spec) => {\n            let cmd;\n            if (\'aggregation\' in spec) {\n                cmd = `aggregate(${spec.aggregation})`;\n            } else {\n                const project = \'project\' in spec ? `, ${spec.project}` : \'\';\n                cmd = Object.keys(spec).reduce((s, k) => {\n                    if (k !== \'options\' && k !== \'project\' && k !== \'filter\') {\n                        s = `${s}.${k}(${spec[k]})`;\n                    }\n                return s;\n                }, `find(${spec.filter}${project})`);\n            }\n            return `mongo \'${spec.options.uri}\' --eval "db = db.getSiblingDB(\'${spec.options.database}\');\n        db.${spec.options.collection}.${cmd};"`;\n        }\n    EqualitySyntaxTemplate: &EqualitySyntaxTemplate !!js/function >\n        (lhs, op, rhs) => {\n            if (op.includes(\'!\') || op.includes(\'not\')) {\n                return `${lhs} !== ${rhs}`;\n            } else if (op === \'==\' || op === \'===\' || op === \'is\') {\n                return `${lhs} === ${rhs}`;\n            }\n            return `${lhs} ${op} ${rhs}`;\n        }\n    InSyntaxTemplate: &InSyntaxTemplate !!js/function >\n        (lhs, op, rhs) => {\n            let str = \'!==\';\n            if (op.includes(\'!\') || op.includes(\'not\')) {\n                str = \'===\';\n            }\n            return `${rhs}.indexOf(${lhs}) ${str} -1`\n        }\n    AndSyntaxTemplate: &AndSyntaxTemplate !!js/function >\n        (args) => {\n            return args.join(\' && \');\n        }\n    OrSyntaxTemplate: &OrSyntaxTemplate !!js/function >\n        (args) => {\n            return args.join(\' || \');\n        }\n    NotSyntaxTemplate: &NotSyntaxTemplate !!js/function >\n        (arg) => {\n            return `!${arg}`;\n        }\n    UnarySyntaxTemplate: &UnarySyntaxTemplate null\n    BinarySyntaxTemplate: &BinarySyntaxTemplate !!js/function >\n        (args) => {\n            return args.reduce((s, op, i, arr) => {\n                if (i % 2 === 0) {\n                    return s;\n                }\n                const rhs = arr[i + 1];\n                switch(op) {\n                    case \'//\':\n                        return `Math.floor(${s}, ${rhs})`;\n                    case \'**\':\n                        return `Math.pow(${s}, ${rhs})`;\n                    default:\n                        return `${s} ${op} ${rhs}`;\n                }\n            }, args[0]);\n        }\n    ParensSyntaxTemplate: &ParensSyntaxTemplate null\n    EosSyntaxTemplate: &EosSyntaxTemplate null\n    EofSyntaxTemplate: &EofSyntaxTemplate null\n    NewTemplate: &NewSyntaxTemplate !!js/function >\n        (expr, skip, code) => {\n            // Add classes that don\'t use "new" to array.\n            // So far: [Symbol, Double, Date.now]\n            noNew = [111, 104, 200.1];\n            if (skip || (code && noNew.indexOf(code) !== -1)) {\n                return expr;\n            }\n            return `new ${expr}`;\n        }\n    # BSON Object Type templates\n    CodeTypeTemplate: &CodeTypeTemplate null\n    StringTypeTemplate: &StringTypeTemplate !!js/function >\n        (str) => {\n          let newStr = str;\n          if (\n            (str.charAt(0) === \'\\\'\' && str.charAt(str.length - 1) === \'\\\'\') ||\n            (str.charAt(0) === \'"\' && str.charAt(str.length - 1) === \'"\')) {\n            newStr = str.substr(1, str.length - 2);\n          }\n          return `\'${newStr.replace(/\\\\([\\s\\S])|(")/g, \'\\\\$1$2\')}\'`;\n        }\n    RegexTypeTemplate: &RegexTypeTemplate !!js/function >\n        (pattern, flags) => {\n            const str = pattern;\n            let newStr = str;\n            if (\n              (str.charAt(0) === \'\\\'\' && str.charAt(str.length - 1) === \'\\\'\') ||\n              (str.charAt(0) === \'"\' && str.charAt(str.length - 1) === \'"\')) {\n                newStr = str.substr(1, str.length - 2);\n            }\n            pattern = `\'${newStr.replace(/\\\\([\\s\\S])|(\')/g, \'\\\\$1$2\')}\'`;\n            return `RegExp(${pattern}${flags ? \', \' + \'\\\'\' + flags + \'\\\'\': \'\'})`;\n        }\n    BoolTypeTemplate: &BoolTypeTemplate !!js/function >\n        (literal) => {\n            return literal.toLowerCase();\n        }\n    IntegerTypeTemplate: &IntegerTypeTemplate null\n    DecimalTypeTemplate: &DecimalTypeTemplate null\n    LongBasicTypeTemplate: &LongBasicTypeTemplate null\n    HexTypeTemplate: &HexTypeTemplate null\n    OctalTypeTemplate: &OctalTypeTemplate null\n    NumericTypeTemplate: &NumericTypeTemplate null\n    ArrayTypeTemplate: &ArrayTypeTemplate !!js/function >\n        (literal, depth) => {\n            depth++;\n            if (literal === \'\') {\n                return \'[]\'\n            }\n            const indent = \'\\n\' + \'  \'.repeat(depth);\n            const closingIndent = \'\\n\' + \'  \'.repeat(depth - 1);\n\n            return `[${indent}${literal}${closingIndent}]`;\n        }\n    ArrayTypeArgsTemplate: &ArrayTypeArgsTemplate null\n    NullTypeTemplate: &NullTypeTemplate !!js/function >\n        () => {\n            return \'null\';\n        }\n    UndefinedTypeTemplate: &UndefinedTypeTemplate !!js/function >\n        () => {\n            return \'undefined\';\n        }\n    ObjectTypeTemplate: &ObjectTypeTemplate !!js/function >\n        (literal) => {\n            if (literal === \'\') {\n                return \'{}\';\n            }\n            return literal;\n        }\n    ObjectTypeArgsTemplate: &ObjectTypeArgsTemplate !!js/function >\n        (args, depth) => {\n            if (args.length === 0) {\n                return \'{}\';\n            }\n            depth++;\n            const stringify = (str) => {\n                let newStr = str;\n                if (\n                  (str.charAt(0) === \'\\\'\' && str.charAt(str.length - 1) === \'\\\'\') ||\n                  (str.charAt(0) === \'"\' && str.charAt(str.length - 1) === \'"\')) {\n                    newStr = str.substr(1, str.length - 2);\n                }\n                return `\'${newStr.replace(/\\\\([\\s\\S])|(\')/g, \'\\\\$1$2\')}\'`;\n            }\n            const indent = \'\\n\' + \'  \'.repeat(depth);\n            const closingIndent = \'\\n\' + \'  \'.repeat(depth - 1);\n            const pairs = args.map((arg) => {\n                return `${indent}${stringify(arg[0])}: ${arg[1]}`;\n            }).join(\', \');\n\n            return `{${pairs}${closingIndent}}`\n        }\n    # BSON Object Method templates\n    CodeCodeTemplate: &CodeCodeTemplate null\n    CodeCodeArgsTemplate: &CodeCodeArgsTemplate null\n    CodeScopeTemplate: &CodeScopeTemplate null\n    CodeScopeArgsTemplate: &CodeScopeArgsTemplate null\n    ObjectIdToStringTemplate: &ObjectIdToStringTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.toString()`;\n        }\n    ObjectIdToStringArgsTemplate: &ObjectIdToStringArgsTemplate !!js/function >\n        () => {\n            return \'\';\n        }\n    ObjectIdEqualsTemplate: &ObjectIdEqualsTemplate null\n    ObjectIdEqualsArgsTemplate: &ObjectIdEqualsArgsTemplate null\n    ObjectIdGetTimestampTemplate: &ObjectIdGetTimestampTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getTimestamp()`;\n        }\n    ObjectIdGetTimestampArgsTemplate: &ObjectIdGetTimestampArgsTemplate !!js/function >\n        () => {\n            return \'\';\n        }\n    BinaryValueTemplate: &BinaryValueTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.hex`;\n        }\n    BinaryValueArgsTemplate: &BinaryValueArgsTemplate null\n    BinaryLengthTemplate: &BinaryLengthTemplate null\n    BinaryLengthArgsTemplate: &BinaryLengthArgsTemplate null\n    BinaryToStringTemplate: &BinaryToStringTemplate null\n    BinaryToStringArgsTemplate: &BinaryToStringArgsTemplate null\n    BinarySubtypeTemplate: &BinarySubtypeTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.subtype()`;\n        }\n    BinarySubtypeArgsTemplate: &BinarySubtypeArgsTemplate !!js/function >\n        () => {\n            return \'\';\n        }\n    DBRefGetDBTemplate: &DBRefGetDBTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getDb()`;\n        }\n    DBRefGetDBArgsTemplate: &DBRefGetDBArgsTemplate !!js/function >\n        () => {\n            return \'\';\n        }\n    DBRefGetCollectionTemplate: &DBRefGetCollectionTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getCollection()`;\n        }\n    DBRefGetCollectionArgsTemplate: &DBRefGetCollectionArgsTemplate !!js/function >\n        () => {\n            return \'\';\n        }\n    DBRefGetIdTemplate: &DBRefGetIdTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getId()`;\n        }\n    DBRefGetIdArgsTemplate: &DBRefGetIdArgsTemplate !!js/function >\n        () => {\n            \'\';\n        }\n    LongEqualsTemplate: &LongEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} ===`;\n        }\n    LongEqualsArgsTemplate: &LongEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongToStringTemplate: &LongToStringTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.toString`;\n        }\n    LongToStringArgsTemplate: &LongToStringArgsTemplate null\n    LongToIntTemplate: &LongToIntTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.valueOf`;\n        }\n    LongToIntArgsTemplate: &LongToIntArgsTemplate null\n    LongToNumberTemplate: &LongToNumberTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.floatApprox`;\n        }\n    LongToNumberArgsTemplate: &LongToNumberArgsTemplate !!js/function >\n        () => {\n            return \'\';\n        }\n    LongAddTemplate: &LongAddTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} +`;\n        }\n    LongAddArgsTemplate: &LongAddArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongSubtractTemplate: &LongSubtractTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} -`;\n        }\n    LongSubtractArgsTemplate: &LongSubtractArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongMultiplyTemplate: &LongMultiplyTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} *`;\n        }\n    LongMultiplyArgsTemplate: &LongMultiplyArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongDivTemplate: &LongDivTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} /`;\n        }\n    LongDivArgsTemplate: &LongDivArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongModuloTemplate: &LongModuloTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} %`;\n        }\n    LongModuloArgsTemplate: &LongModuloArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongAndTemplate: &LongAndTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} &`;\n        }\n    LongAndArgsTemplate: &LongAndArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongOrTemplate: &LongOrTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} |`;\n        }\n    LongOrArgsTemplate: &LongOrArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongXorTemplate: &LongXorTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} ^`;\n        }\n    LongXorArgsTemplate: &LongXorArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongShiftLeftTemplate: &LongShiftLeftTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <<`;\n        }\n    LongShiftLeftArgsTemplate: &LongShiftLeftArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongShiftRightTemplate: &LongShiftRightTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >>`;\n        }\n    LongShiftRightArgsTemplate: &LongShiftRightArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongCompareTemplate: &LongCompareTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} -`;\n        }\n    LongCompareArgsTemplate: &LongCompareArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongIsOddTemplate: &LongIsOddTemplate !!js/function >\n        (lhs) => {\n            return `(${lhs} % 2) === 1`;\n        }\n    LongIsOddArgsTemplate: &LongIsOddArgsTemplate !!js/function >\n        () => {\n            return \'\';\n        }\n    LongIsZeroTemplate: &LongIsZeroTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} === 0`;\n        }\n    LongIsZeroArgsTemplate: &LongIsZeroArgsTemplate !!js/function >\n        () => {\n            return \'\';\n        }\n    LongIsNegativeTemplate: &LongIsNegativeTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} < 0`;\n        }\n    LongIsNegativeArgsTemplate: &LongIsNegativeArgsTemplate !!js/function >\n        () => {\n            return \'\';\n        }\n    LongNegateTemplate: &LongNegateTemplate !!js/function >\n        () => {\n            return \'-\';\n        }\n    LongNegateArgsTemplate: &LongNegateArgsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}`;\n        }\n    LongNotTemplate: &LongNotTemplate !!js/function >\n        () => {\n            return \'~\';\n        }\n    LongNotArgsTemplate: &LongNotArgsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}`;\n        }\n    LongNotEqualsTemplate: &LongNotEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} !==`;\n        }\n    LongNotEqualsArgsTemplate: &LongNotEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongGreaterThanTemplate: &LongGreaterThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >`;\n        }\n    LongGreaterThanArgsTemplate: &LongGreaterThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongGreaterThanOrEqualTemplate: &LongGreaterThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >=`;\n        }\n    LongGreaterThanOrEqualArgsTemplate: &LongGreaterThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongLessThanTemplate: &LongLessThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <`;\n        }\n    LongLessThanArgsTemplate: &LongLessThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongLessThanOrEqualTemplate: &LongLessThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <=`;\n        }\n    LongLessThanOrEqualArgsTemplate: &LongLessThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongFloatApproxTemplate: &LongFloatApproxTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.floatValue()`;\n        }\n    LongTopTemplate: &LongTopTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >> 32`;\n        }\n    LongBottomTemplate: &LongBottomTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} & 0x0000ffff`;\n        }\n    TimestampToStringTemplate: &TimestampToStringTemplate null\n    TimestampToStringArgsTemplate: &TimestampToStringArgsTemplate null\n    TimestampEqualsTemplate: &TimestampEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} ===`;\n        }\n    TimestampEqualsArgsTemplate: &TimestampEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    TimestampGetLowBitsTemplate: &TimestampGetLowBitsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getTime`;\n        }\n    TimestampGetLowBitsArgsTemplate: &TimestampGetLowBitsArgsTemplate null\n    TimestampGetHighBitsTemplate: &TimestampGetHighBitsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getInc`;\n        }\n    TimestampGetHighBitsArgsTemplate: &TimestampGetHighBitsArgsTemplate null\n    TimestampTTemplate: &TimestampTTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getTime()`;\n        }\n    TimestampITemplate: &TimestampITemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getInc()`;\n        }\n    TimestampAsDateTemplate: &TimestampAsDateTemplate !!js/function >\n        (lhs) => {\n            return `new Date(${lhs}.getHighBits() * 1000)`;\n        }\n    TimestampAsDateArgsTemplate: &TimestampAsDateArgsTemplate !!js/function >\n        () => {\n            return \'\';\n        }\n    TimestampCompareTemplate: &TimestampCompareTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} -`;\n        }\n    TimestampCompareArgsTemplate: &TimestampCompareArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    TimestampNotEqualsTemplate: &TimestampNotEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} !==`;\n        }\n    TimestampNotEqualsArgsTemplate: &TimestampNotEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    TimestampGreaterThanTemplate: &TimestampGreaterThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >`;\n        }\n    TimestampGreaterThanArgsTemplate: &TimestampGreaterThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    TimestampGreaterThanOrEqualTemplate: &TimestampGreaterThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >=`;\n        }\n    TimestampGreaterThanOrEqualArgsTemplate: &TimestampGreaterThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    TimestampLessThanTemplate: &TimestampLessThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <`;\n        }\n    TimestampLessThanArgsTemplate: &TimestampLessThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    TimestampLessThanOrEqualTemplate: &TimestampLessThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <=`;\n        }\n    TimestampLessThanOrEqualArgsTemplate: &TimestampLessThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    SymbolValueOfTemplate: &SymbolValueOfTemplate !!js/function >\n        (lhs) => {\n            return lhs;\n        }\n    SymbolValueOfArgsTemplate: &SymbolValueOfArgsTemplate !!js/function >\n        () => {\n            return \'\';\n        }\n    SymbolInspectTemplate: &SymbolInspectTemplate !!js/function >\n        (lhs) => {\n            return lhs;\n        }\n    SymbolInspectArgsTemplate: &SymbolInspectArgsTemplate !!js/function >\n        () => {\n            return \'\';\n        }\n    SymbolToStringTemplate: &SymbolToStringTemplate !!js/function >\n        (lhs) => {\n            return lhs;\n        }\n    SymbolToStringArgsTemplate: &SymbolToStringArgsTemplate !!js/function >\n        () => {\n            return \'\';\n        }\n    # Symbol Templates\n    CodeSymbolTemplate: &CodeSymbolTemplate null\n    CodeSymbolArgsTemplate: &CodeSymbolArgsTemplate !!js/function >\n        (lhs, code, scope) => {\n            scope = scope === undefined ? \'\' : `, ${scope}`;\n            // Single quote stringify\n            let newStr = code === undefined ? \'\' : code;\n            const str = newStr;\n            if (\n              (str.charAt(0) === \'\\\'\' && str.charAt(str.length - 1) === \'\\\'\') ||\n              (str.charAt(0) === \'"\' && str.charAt(str.length - 1) === \'"\')) {\n                newStr = str.substr(1, str.length - 2);\n            }\n            code = `\'${newStr.replace(/\\\\([\\s\\S])|(\')/g, \'\\\\$1$2\')}\'`;\n            return `(${code}${scope})`;\n        }\n    ObjectIdSymbolTemplate: &ObjectIdSymbolTemplate null\n    ObjectIdSymbolArgsTemplate: &ObjectIdSymbolArgsTemplate !!js/function >\n        (lhs, str) => {\n          if (!str || str.length === 0) {\n            return \'()\';\n          }\n          let newStr = str;\n          if (\n            (str.charAt(0) === \'\\\'\' && str.charAt(str.length - 1) === \'\\\'\') ||\n            (str.charAt(0) === \'"\' && str.charAt(str.length - 1) === \'"\')) {\n            newStr = str.substr(1, str.length - 2);\n          }\n          return `(\'${newStr.replace(/\\\\([\\s\\S])|(")/g, \'\\\\$1$2\')}\')`;\n        }\n    BinarySymbolTemplate: &BinarySymbolTemplate !!js/function >\n        () => {\n            return \'BinData\';\n        }\n    BinarySymbolArgsTemplate: &BinarySymbolArgsTemplate !!js/function >\n        (lhs, bytes, type) => {\n            const str = bytes;\n            let newStr = str;\n            if (\n              (str.charAt(0) === \'\\\'\' && str.charAt(str.length - 1) === \'\\\'\') ||\n              (str.charAt(0) === \'"\' && str.charAt(str.length - 1) === \'"\')) {\n                newStr = str.substr(1, str.length - 2);\n            }\n            bytes = `\'${newStr.replace(/\\\\([\\s\\S])|(\')/g, \'\\\\$1$2\')}\'`;\n\n            if (type === null) {\n                type = \'0\';\n            }\n            return `(${type}, ${bytes})`;\n        }\n    BinarySymbolSubtypeDefaultTemplate: &BinarySymbolSubtypeDefaultTemplate !!js/function >\n        () => {\n            return \'0\';\n        }\n    BinarySymbolSubtypeFunctionTemplate: &BinarySymbolSubtypeFunctionTemplate !!js/function >\n        () => {\n            return \'1\';\n        }\n    BinarySymbolSubtypeByteArrayTemplate: &BinarySymbolSubtypeByteArrayTemplate !!js/function >\n        () => {\n            return \'2\';\n        }\n    BinarySymbolSubtypeUuidOldTemplate: &BinarySymbolSubtypeUuidOldTemplate !!js/function >\n        () => {\n            return \'3\';\n        }\n    BinarySymbolSubtypeUuidTemplate: &BinarySymbolSubtypeUuidTemplate !!js/function >\n        () => {\n            return \'4\';\n        }\n    BinarySymbolSubtypeMd5Template: &BinarySymbolSubtypeMd5Template !!js/function >\n        () => {\n            return \'5\';\n        }\n    BinarySymbolSubtypeUserDefinedTemplate: &BinarySymbolSubtypeUserDefinedTemplate !!js/function >\n        () => {\n            return \'80\';\n        }\n    DBRefSymbolTemplate: &DBRefSymbolTemplate null\n    DBRefSymbolArgsTemplate: &DBRefSymbolArgsTemplate null\n    DoubleSymbolTemplate: &DoubleSymbolTemplate !!js/function >\n        () => {\n            return \'\';\n        }\n    DoubleSymbolArgsTemplate: &DoubleSymbolArgsTemplate !!js/function >\n        (_, str) => {\n            // Remove quotes\n            let newStr = str;\n            if (\n              (str.charAt(0) === \'\\\'\' && str.charAt(str.length - 1) === \'\\\'\') ||\n              (str.charAt(0) === \'"\' && str.charAt(str.length - 1) === \'"\')) {\n                newStr = str.substr(1, str.length - 2);\n            }\n            return newStr;\n        }\n    Int32SymbolTemplate: &Int32SymbolTemplate !!js/function >\n        () => {\n            return \'NumberInt\';\n        }\n    Int32SymbolArgsTemplate: &Int32SymbolArgsTemplate !!js/function >\n        (lhs, arg) => {\n            arg = arg === undefined ? 0 : arg;\n            return `(${arg})`;\n        }\n    LongSymbolTemplate: &LongSymbolTemplate !!js/function >\n        () => {\n            return \'NumberLong\';\n        }\n    LongSymbolArgsTemplate: &LongSymbolArgsTemplate !!js/function >\n        (lhs, arg) => {\n            arg = arg === undefined ? 0 : arg;\n            return `(${arg})`;\n        }\n    LongSymbolMaxTemplate: &LongSymbolMaxTemplate !!js/function >\n        () => {\n            return \'Math.max()\';\n        }\n    LongSymbolMaxArgsTemplate: &LongSymbolMaxArgsTemplate null\n    LongSymbolMinTemplate: &LongSymbolMinTemplate !!js/function >\n        () => {\n            return \'Math.min()\';\n        }\n    LongSymbolMinArgsTemplate: &LongSymbolMinArgsTemplate null\n    LongSymbolZeroTemplate: &LongSymbolZeroTemplate !!js/function >\n        () => {\n            return 0;\n        }\n    LongSymbolZeroArgsTemplate: &LongSymbolZeroArgsTemplate null\n    LongSymbolOneTemplate: &LongSymbolOneTemplate !!js/function\n        () => {\n            return 1;\n        }\n    LongSymbolOneArgsTemplate: &LongSymbolOneArgsTemplate null\n    LongSymbolNegOneTemplate: &LongSymbolNegOneTemplate !!js/function\n        () => {\n            return -1;\n        }\n    LongSymbolNegOneArgsTemplate: &LongSymbolNegOneArgsTemplate null\n    LongSymbolFromBitsTemplate: &LongSymbolFromBitsTemplate !!js/function > # Also has process method\n        (lhs) => {\n            return lhs;\n        }\n    LongSymbolFromBitsArgsTemplate: &LongSymbolFromBitsArgsTemplate null # Also has process method\n    LongSymbolFromIntTemplate: &LongSymbolFromIntTemplate !!js/function >\n        (lhs) => {\n            return `new ${lhs}`;\n        }\n    LongSymbolFromIntArgsTemplate: &LongSymbolFromIntArgsTemplate null\n    LongSymbolFromNumberTemplate: &LongSymbolFromNumberTemplate !!js/function >\n        (lhs) => {\n            return `new ${lhs}`;\n        }\n    LongSymbolFromNumberArgsTemplate: &LongSymbolFromNumberArgsTemplate null\n    LongSymbolFromStringTemplate: &LongSymbolFromStringTemplate !!js/function >\n        (lhs) => {\n            return `new ${lhs}`;\n        }\n    LongSymbolFromStringArgsTemplate: &LongSymbolFromStringArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `(${arg})`;\n        }\n    MinKeySymbolTemplate: &MinKeySymbolTemplate null\n    MinKeySymbolArgsTemplate: &MinKeySymbolArgsTemplate null\n    MaxKeySymbolTemplate: &MaxKeySymbolTemplate null\n    MaxKeySymbolArgsTemplate: &MaxKeySymbolArgsTemplate null\n    TimestampSymbolTemplate: &TimestampSymbolTemplate null\n    TimestampSymbolArgsTemplate: &TimestampSymbolArgsTemplate null\n    SymbolSymbolTemplate: &SymbolSymbolTemplate !!js/function >\n        () => {\n            return \'\';\n        }\n    SymbolSymbolArgsTemplate: &SymbolSymbolArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return arg;\n        }\n    BSONRegExpSymbolTemplate: &BSONRegExpSymbolTemplate !!js/function >\n        () => {\n            return \'RegExp\';\n        }\n    BSONRegExpSymbolArgsTemplate: &BSONRegExpSymbolArgsTemplate !!js/function >\n        (lhs, pattern, flags) => {\n            const singleStringify = (str) => {\n                let newStr = str;\n                if (\n                  (str.charAt(0) === \'\\\'\' && str.charAt(str.length - 1) === \'\\\'\') ||\n                  (str.charAt(0) === \'"\' && str.charAt(str.length - 1) === \'"\')) {\n                    newStr = str.substr(1, str.length - 2);\n                }\n                return `\'${newStr.replace(/\\\\([\\s\\S])|(")/g, \'\\\\$1$2\')}\'`;\n            }\n\n            return `(${singleStringify(pattern)}${flags ? \', \' + singleStringify(flags) : \'\'})`;\n        }\n    Decimal128SymbolTemplate: &Decimal128SymbolTemplate !!js/function >\n        () => {\n            return \'NumberDecimal\';\n        }\n    Decimal128SymbolArgsTemplate: &Decimal128SymbolArgsTemplate null\n    Decimal128SymbolFromStringTemplate: &Decimal128SymbolFromStringTemplate !!js/function >\n        (lhs) => {\n            return `new ${lhs}`;\n        }\n    Decimal128SymbolFromStringArgsTemplate: &Decimal128SymbolFromStringArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `(${arg})`;\n        }\n    Decimal128ToStringTemplate: &Decimal128ToStringTemplate null\n    Decimal128ToStringArgsTemplate: &Decimal128ToStringArgsTemplate null\n    # BSON Util Templates\n    ObjectIdCreateFromHexStringTemplate: &ObjectIdCreateFromHexStringTemplate !!js/function >\n        () => {\n            return \'new ObjectId\';\n        }\n    ObjectIdCreateFromHexStringArgsTemplate: &ObjectIdCreateFromHexStringArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `(${arg})`;\n        }\n    ObjectIdCreateFromTimeTemplate: &ObjectIdCreateFromTimeTemplate !!js/function >\n        () => {\n            return `ObjectId.fromDate`;\n        }\n    ObjectIdCreateFromTimeArgsTemplate: &ObjectIdCreateFromTimeArgsTemplate !!js/function >\n        (lhs, arg, isNumber) => {\n            if (isNumber) {\n                return `(new Date(${arg * 1000}))`;\n            }\n            return `(${arg})`;\n        }\n    ObjectIdIsValidTemplate: &ObjectIdIsValidTemplate !!js/function >\n        (lhs) => {\n            return \'new ObjectId\';\n        }\n    ObjectIdIsValidArgsTemplate: &ObjectIdIsValidArgsTemplate null\n    # JS Symbol Templates\n    NumberSymbolTemplate: &NumberSymbolTemplate !!js/function >\n        () => {\n            return \'Number\';\n        }\n    NumberSymbolArgsTemplate: &NumberSymbolArgsTemplate null\n    DateSymbolTemplate: &DateSymbolTemplate !!js/function >\n        () => {\n            return \'Date\';\n        }\n    DateSymbolArgsTemplate: &DateSymbolArgsTemplate null\n    DateSymbolNowTemplate: &DateSymbolNowTemplate !!js/function >\n        () => {\n            return \'Date.now\';\n        }\n    DateSymbolNowArgsTemplate: &DateSymbolNowArgsTemplate null\n    RegExpSymbolTemplate: &RegExpSymbolTemplate !!js/function >\n        () => {\n            return \'RegExp\';\n        }\n    RegExpSymbolArgsTemplate: &RegExpSymbolArgsTemplate null\n    ImportTemplate: &ImportTemplate null\n    DriverImportTemplate: &DriverImportTemplate null\n    0ImportTemplate: &0ImportTemplate null\n    1ImportTemplate: &1ImportTemplate null\n    2ImportTemplate: &2ImportTemplate null\n    3ImportTemplate: &3ImportTemplate null\n    4ImportTemplate: &4ImportTemplate null\n    5ImportTemplate: &5ImportTemplate null\n    6ImportTemplate: &6ImportTemplate null\n    7ImportTemplate: &7ImportTemplate null\n    8ImportTemplate: &8ImportTemplate null\n    9ImportTemplate: &9ImportTemplate null\n    10ImportTemplate: &10ImportTemplate null\n    11ImportTemplate: &11ImportTemplate null\n    12ImportTemplate: &12ImportTemplate null\n    100ImportTemplate: &100ImportTemplate null\n    101ImportTemplate: &101ImportTemplate null\n    102ImportTemplate: &102ImportTemplate null\n    103ImportTemplate: &103ImportTemplate null\n    104ImportTemplate: &104ImportTemplate null\n    105ImportTemplate: &105ImportTemplate null\n    106ImportTemplate: &106ImportTemplate null\n    107ImportTemplate: &107ImportTemplate null\n    108ImportTemplate: &108ImportTemplate null\n    109ImportTemplate: &109ImportTemplate null\n    110ImportTemplate: &110ImportTemplate null\n    111ImportTemplate: &111ImportTemplate null\n    112ImportTemplate: &112ImportTemplate null\n    113ImportTemplate: &113ImportTemplate null\n    114ImportTemplate: &114ImportTemplate null\n    200ImportTemplate: &200ImportTemplate null\n    201ImportTemplate: &201ImportTemplate null\n    300ImportTemplate: &300ImportTemplate null\n    301ImportTemplate: &301ImportTemplate null\n    302ImportTemplate: &302ImportTemplate null\n    303ImportTemplate: &303ImportTemplate null\n    304ImportTemplate: &304ImportTemplate null\n    305ImportTemplate: &305ImportTemplate null\n    306ImportTemplate: &306ImportTemplate null\n# Universal types\n# Everything inherits from StringType because we haven\'t implemented any of them.\nBasicTypes:\n    # Universal basic types\n    _bool: &BoolType\n        <<: *__type\n        id: "_bool"\n        code: 0\n        template: *BoolTypeTemplate\n    _integer: &IntegerType\n        <<: *__type\n        id: "_integer"\n        code: 1\n        template: *IntegerTypeTemplate\n    _long: &LongBasicType\n        <<: *__type\n        id: "_long"\n        code: 2\n        template: *LongBasicTypeTemplate\n    _decimal: &DecimalType\n        <<: *__type\n        id: "_decimal"\n        code: 3\n        template: *DecimalTypeTemplate\n    _hex: &HexType\n        <<: *__type\n        id: "_hex"\n        code: 4\n        template: *HexTypeTemplate\n    _octal: &OctalType\n        <<: *__type\n        id: "_octal"\n        code: 5\n        template: *OctalTypeTemplate\n    _numeric: &NumericType\n        <<: *__type\n        id: "_numeric"\n        code: 6\n        template: *NumericTypeTemplate\n    _string: &StringType\n        <<: *__type\n        id: "_string"\n        code: 7\n        template: *StringTypeTemplate\n    _regex: &RegexType\n        <<: *__type\n        id: "_regex"\n        code: 8\n        template: *RegexTypeTemplate\n    _array: &ArrayType\n        <<: *__type\n        id: "_array"\n        code: 9\n        template: *ArrayTypeTemplate\n        argsTemplate: *ArrayTypeArgsTemplate\n    _object: &ObjectType\n        <<: *__type\n        id: "_object"\n        code: 10\n        template: *ObjectTypeTemplate\n        argsTemplate: *ObjectTypeArgsTemplate\n    _null: &NullType\n        <<: *__type\n        id: "_null"\n        code: 11\n        template: *NullTypeTemplate\n    _undefined: &UndefinedType\n        <<: *__type\n        id: "_undefined"\n        code: 12\n        template: *UndefinedTypeTemplate\n\nSyntax:\n    equality:\n        template: *EqualitySyntaxTemplate\n    in:\n        template: *InSyntaxTemplate\n    and:\n        template: *AndSyntaxTemplate\n    or:\n        template: *OrSyntaxTemplate\n    not:\n        template: *NotSyntaxTemplate\n    unary:\n        template: *UnarySyntaxTemplate\n    binary:\n        template: *BinarySyntaxTemplate\n    parens:\n        template: *ParensSyntaxTemplate\n    eos:\n        template: *EosSyntaxTemplate\n    eof:\n        template: *EofSyntaxTemplate\n    # The new template takes in expr, and an optional skip argument and optional\n    # id argument. The skip argument is a boolean that if true then doesn\'t add\n    # new. The code argument is the symbol code being called. The template will check\n    # if it is an exception, i.e. a type that is a constructor but may not use new.\n    new:\n        template: *NewSyntaxTemplate\n    # The regex flags that change symbols between languages can be defined here.\n    # Flags that aren\'t defined can be left blank and will be ignored.\n    regexFlags: *RegexFlags\n    bsonRegexFlags: *BSONRegexFlags\n    driver: *DriverTemplate\nImports:\n    import:\n        template: *ImportTemplate\n    driver:\n        template: *DriverImportTemplate\n    0:\n        template: *0ImportTemplate\n    1:\n        template: *1ImportTemplate\n    2:\n        template: *2ImportTemplate\n    3:\n        template: *3ImportTemplate\n    4:\n        template: *4ImportTemplate\n    5:\n        template: *5ImportTemplate\n    6:\n        template: *6ImportTemplate\n    7:\n        template: *7ImportTemplate\n    8:\n        template: *8ImportTemplate\n    9:\n        template: *9ImportTemplate\n    10:\n        template: *10ImportTemplate\n    11:\n        template: *11ImportTemplate\n    12:\n        template: *12ImportTemplate\n    100:\n        template: *100ImportTemplate\n    101:\n        template: *101ImportTemplate\n    102:\n        template: *102ImportTemplate\n    103:\n        template: *103ImportTemplate\n    104:\n        template: *104ImportTemplate\n    105:\n        template: *105ImportTemplate\n    106:\n        template: *106ImportTemplate\n    107:\n        template: *107ImportTemplate\n    108:\n        template: *108ImportTemplate\n    109:\n        template: *109ImportTemplate\n    110:\n        template: *110ImportTemplate\n    111:\n        template: *111ImportTemplate\n    112:\n        template: *112ImportTemplate\n    113:\n        template: *113ImportTemplate\n    114:\n        template: *114ImportTemplate\n    200:\n        template: *200ImportTemplate\n    201:\n        template: *201ImportTemplate\n    300:\n        template: *300ImportTemplate\n    301:\n        template: *301ImportTemplate\n    302:\n        template: *302ImportTemplate\n    303:\n        template: *303ImportTemplate\n    304:\n        template: *304ImportTemplate\n    305:\n        template: *305ImportTemplate\n    306:\n        template: *306ImportTemplate\nBsonTypes:\n    Code: &CodeType\n        <<: *__type\n        id: "Code"\n        code: 100\n        type: *ObjectType\n        attr:\n            code:\n                callable: *var\n                args: null\n                attr: null\n                id: "code"\n                type: *StringType\n                template: *CodeCodeTemplate\n                argsTemplate: *CodeCodeArgsTemplate\n            scope:\n                callable: *var\n                args: null\n                attr: null\n                id: "scope"\n                type: *StringType\n                template: *CodeScopeTemplate\n                argsTemplate: *CodeScopeArgsTemplate\n    ObjectId: &ObjectIdType\n        <<: *__type\n        id: "ObjectId"\n        code: 101\n        type: *ObjectType\n        attr:\n            toHexString:\n                <<: *__func\n                id: "toHexString"\n                type: *StringType\n            toString:\n                <<: *__func\n                type: *StringType\n                template: *ObjectIdToStringTemplate\n                argsTemplate: *ObjectIdToStringArgsTemplate\n            equals:\n                <<: *__func\n                args:\n                    - [ "ObjectId" ]\n                type: *BoolType\n                template: *ObjectIdEqualsTemplate\n                argsTemplate: *ObjectIdEqualsArgsTemplate\n            getTimestamp:\n                <<: *__func\n                type: *IntegerType\n                template: *ObjectIdGetTimestampTemplate\n                argsTemplate: *ObjectIdGetTimestampArgsTemplate\n    Binary: &BinaryType\n        <<: *__type\n        id: "Binary"\n        code: 102\n        type: *ObjectType\n        attr:\n            value:\n                <<: *__func\n                id: "value"\n                type: *StringType\n                template: *BinaryValueTemplate\n                argsTemplate: *BinaryValueArgsTemplate\n            length:\n                <<: *__func\n                id: "length"\n                type: *IntegerType\n                template: *BinaryLengthTemplate\n                argsTemplate: *BinaryLengthArgsTemplate\n            toString:\n                <<: *__func\n                id: "toString"\n                type: *StringType\n                template: *BinaryToStringTemplate\n                argsTemplate: *BinaryToStringArgsTemplate\n            sub_type:\n                callable: *var\n                args: null\n                attr: null\n                id: "subtype"\n                type: *IntegerType\n                template: *BinarySubtypeTemplate\n                argsTemplate: *BinarySubtypeArgsTemplate\n    DBRef: &DBRefType\n        <<: *__type\n        id: "DBRef"\n        code: 103\n        type: *ObjectType\n        attr:\n            db:\n                callable: *var\n                args: null\n                attr: null\n                id: "db"\n                type: *StringType\n                template: *DBRefGetDBTemplate\n                argsTemplate: *DBRefGetDBArgsTemplate\n            namespace:\n                callable: *var\n                args: null\n                attr: null\n                id: "namespace"\n                type: *StringType\n                template: *DBRefGetCollectionTemplate\n                argsTemplate: *DBRefGetCollectionArgsTemplate\n            oid:\n                callable: *var\n                args: null\n                attr: null\n                id: "oid"\n                type: *StringType\n                template: *DBRefGetIdTemplate\n                argsTemplate: *DBRefGetIdArgsTemplate\n    Double: &DoubleType\n        <<: *__type\n        id: "Double"\n        code: 104\n        type: *ObjectType\n        attr: {}\n    Int32: &Int32Type\n        <<: *__type\n        id: "Int32"\n        code: 105\n        type: *ObjectType\n        attr: {}\n    Long: &LongType\n        <<: *__type\n        id: "Long"\n        code: 106\n        type: *ObjectType\n        attr:\n            toString:\n                <<: *__func\n                id: "LongtoString" # Needs process method\n                args:\n                    - [ *IntegerType, null ]\n                type: *StringType\n                template: *LongToStringTemplate\n                argsTemplate: *LongToStringArgsTemplate\n            equals:\n                <<: *__func\n                id: "equals"\n                args:\n                    - [ "Long" ]\n                type: *BoolType\n                template: *LongEqualsTemplate\n                argsTemplate: *LongEqualsArgsTemplate\n            toInt:\n                <<: *__func\n                id: "toInt"\n                type: *IntegerType\n                template: *LongToIntTemplate\n                argsTemplate: *LongToIntArgsTemplate\n            toNumber:\n                <<: *__func\n                id: "toNumber"\n                type: *DecimalType\n                template: *LongToNumberTemplate\n                argsTemplate: *LongToNumberArgsTemplate\n            compare:\n                <<: *__func\n                id: "compare"\n                args:\n                    - [ "Long" ]\n                type: *StringType\n                template: *LongCompareTemplate\n                argsTemplate: *LongCompareArgsTemplate\n            isOdd:\n                <<: *__func\n                id: "isOdd"\n                type: *BoolType\n                template: *LongIsOddTemplate\n                argsTemplate: *LongIsOddArgsTemplate\n            isZero:\n                <<: *__func\n                id: "isZero"\n                type: *BoolType\n                template: *LongIsZeroTemplate\n                argsTemplate: *LongIsZeroArgsTemplate\n            isNegative:\n                <<: *__func\n                id: "isNegative"\n                type: *BoolType\n                template: *LongIsNegativeTemplate\n                argsTemplate: *LongIsNegativeArgsTemplate\n            negate:\n                <<: *__func\n                id: "negate"\n                type: "Long"\n                template: *LongNegateTemplate\n                argsTemplate: *LongNegateArgsTemplate\n            not:\n                <<: *__func\n                id: "not"\n                type: "Long"\n                template: *LongNotTemplate\n                argsTemplate: *LongNotArgsTemplate\n            notEquals:\n                <<: *__func\n                id: "notEquals"\n                args:\n                    - [ "Long" ]\n                type: *BoolType\n                template: *LongNotEqualsTemplate\n                argsTemplate: *LongNotEqualsArgsTemplate\n            greaterThan:\n                <<: *__func\n                id: "greaterThan"\n                args:\n                    - [ "Long" ]\n                type: *BoolType\n                template: *LongGreaterThanTemplate\n                argsTemplate: *LongGreaterThanArgsTemplate\n            greaterThanOrEqual:\n                <<: *__func\n                id: "greaterThanOrEqual"\n                args:\n                    - [ "Long" ]\n                type: *BoolType\n                template: *LongGreaterThanOrEqualTemplate\n                argsTemplate: *LongGreaterThanOrEqualArgsTemplate\n            lessThan:\n                <<: *__func\n                id: "lessThan"\n                args:\n                    - [ "Long" ]\n                type: *BoolType\n                template: *LongLessThanTemplate\n                argsTemplate: *LongLessThanArgsTemplate\n            lessThanOrEqual:\n                <<: *__func\n                id: "lessThanOrEqual"\n                args:\n                    - [ "Long" ]\n                type: *BoolType\n                template: *LongLessThanOrEqualTemplate\n                argsTemplate: *LongLessThanOrEqualArgsTemplate\n            add:\n                <<: *__func\n                id: "add"\n                args:\n                    - [ "Long" ]\n                type: "Long"\n                template: *LongAddTemplate\n                argsTemplate: *LongAddArgsTemplate\n            subtract:\n                <<: *__func\n                id: "subtract"\n                args:\n                    - [ "Long" ]\n                type: "Long"\n                template: *LongSubtractTemplate\n                argsTemplate: *LongSubtractArgsTemplate\n            multiply:\n                <<: *__func\n                id: "multiply"\n                args:\n                    - [ "Long" ]\n                type: "Long"\n                template: *LongMultiplyTemplate\n                argsTemplate: *LongMultiplyArgsTemplate\n            div:\n                <<: *__func\n                id: "div"\n                args:\n                    - [ "Long" ]\n                type: "Long"\n                template: *LongDivTemplate\n                argsTemplate: *LongDivArgsTemplate\n            modulo:\n                <<: *__func\n                id: "modulo"\n                args:\n                    - [ "Long" ]\n                type: "Long"\n                template: *LongModuloTemplate\n                argsTemplate: *LongModuloArgsTemplate\n            and:\n                <<: *__func\n                id: "and"\n                args:\n                    - [ "Long" ]\n                type: "Long"\n                template: *LongAndTemplate\n                argsTemplate: *LongAndArgsTemplate\n            or:\n                <<: *__func\n                id: "or"\n                args:\n                    - [ "Long" ]\n                type: "Long"\n                template: *LongOrTemplate\n                argsTemplate: *LongOrArgsTemplate\n            xor:\n                <<: *__func\n                id: "xor"\n                args:\n                    - [ "Long" ]\n                type: "Long"\n                template: *LongXorTemplate\n                argsTemplate: *LongXorArgsTemplate\n            shiftLeft:\n                <<: *__func\n                id: "shiftLeft"\n                args:\n                    - [ *IntegerType ]\n                type: "Long"\n                template: *LongShiftLeftTemplate\n                argsTemplate: *LongShiftLeftArgsTemplate\n            shiftRight:\n                <<: *__func\n                id: "shiftRight"\n                args:\n                    - [ *IntegerType ]\n                type: "Long"\n                template: *LongShiftRightTemplate\n                argsTemplate: *LongShiftRightArgsTemplate\n    MinKeyType: &MinKeyType\n        <<: *__type\n        id: "MinKey"\n        code: 107\n        type: *ObjectType\n    MaxKeyType: &MaxKeyType\n        <<: *__type\n        id: "MaxKey"\n        code: 108\n        type: *ObjectType\n    BSONRegExpType: &BSONRegExpType\n        <<: *__type\n        id: "BSONRegExp"\n        code: 109\n        type: *ObjectType #TODO: add pattern + options\n    Timestamp: &TimestampType\n        <<: *__type\n        id: "Timestamp"\n        code: 110\n        type: *ObjectType\n        attr:\n            toString:\n                <<: *__func\n                id: "toString"\n                type: *StringType\n                template: *TimestampToStringTemplate\n                argsTemplate: *TimestampToStringArgsTemplate\n            equals:\n                <<: *__func\n                id: "equals"\n                args:\n                    - [ "Timestamp" ]\n                type: *BoolType\n                template: *TimestampEqualsTemplate\n                argsTemplate: *TimestampEqualsArgsTemplate\n            getLowBits:\n                <<: *__func\n                id: "getLowBits"\n                type: *IntegerType\n                template: *TimestampGetLowBitsTemplate\n                argsTemplate: *TimestampGetLowBitsArgsTemplate\n            getHighBits:\n                <<: *__func\n                id: "getHighBits"\n                type: *IntegerType\n                template: *TimestampGetHighBitsTemplate\n                argsTemplate: *TimestampGetHighBitsArgsTemplate\n            compare:\n                <<: *__func\n                id: "compare"\n                args:\n                    - [ "Timestamp" ]\n                type: *StringType\n                template: *TimestampCompareTemplate\n                argsTemplate: *TimestampCompareArgsTemplate\n            notEquals:\n                <<: *__func\n                id: "notEquals"\n                args:\n                    - [ "Timestamp" ]\n                type: *BoolType\n                template: *TimestampNotEqualsTemplate\n                argsTemplate: *TimestampNotEqualsArgsTemplate\n            greaterThan:\n                <<: *__func\n                id: "greaterThan"\n                args:\n                    - [ "Timestamp" ]\n                type: *BoolType\n                template: *TimestampGreaterThanTemplate\n                argsTemplate: *TimestampGreaterThanArgsTemplate\n            greaterThanOrEqual:\n                <<: *__func\n                id: "greaterThanOrEqual"\n                args:\n                    - [ "Timestamp" ]\n                type: *BoolType\n                template: *TimestampGreaterThanOrEqualTemplate\n                argsTemplate: *TimestampGreaterThanOrEqualArgsTemplate\n            lessThan:\n                <<: *__func\n                id: "lessThan"\n                args:\n                    - [ "Timestamp" ]\n                type: *BoolType\n                template: *TimestampLessThanTemplate\n                argsTemplate: *TimestampLessThanArgsTemplate\n            lessThanOrEqual:\n                <<: *__func\n                id: "lessThanOrEqual"\n                args:\n                    - [ "Timestamp" ]\n                type: *BoolType\n                template: *TimestampLessThanOrEqualTemplate\n                argsTemplate: *TimestampLessThanOrEqualArgsTemplate\n    BSONSymbol: &SymbolType\n        <<: *__type\n        id: "BSONSymbol"\n        code: 111\n        type: *ObjectType\n        attr:\n            valueOf:\n                <<: *__func\n                id: "valueOf"\n                type: *StringType\n                template: *SymbolValueOfTemplate\n                argsTemplate: *SymbolValueOfArgsTemplate\n            toString:\n                <<: *__func\n                id: "toString"\n                type: *StringType\n                template: *SymbolToStringTemplate\n                argsTemplate: *SymbolToStringArgsTemplate\n            inspect:\n                <<: *__func\n                id: "inspect"\n                type: *StringType\n                template: *SymbolInspectTemplate\n                argsTemplate: *SymbolInspectArgsTemplate\n    Decimal128: &Decimal128Type\n        <<: *__type\n        id: "Decimal128"\n        code: 112\n        type: *ObjectType\n        attr:\n            toString:\n                <<: *__func\n                id: "toString"\n                type: *StringType\n                template: *Decimal128ToStringTemplate\n                argsTemplate: *Decimal128ToStringArgsTemplate\nNativeTypes:\n    Date: &DateType\n        <<: *__type\n        id: "Date"\n        code: 200\n        type: *ObjectType\n        attr: {} # TODO: no built-in date methods added yet\nBsonSymbols:\n    Code: &CodeSymbol\n        id: "CodeFromJS"\n        code: 100\n        callable: *constructor\n        args:\n            - [ *StringType ]\n            - [ *ObjectType, null ]\n        type: *CodeType\n        attr: {}\n        template: *CodeSymbolTemplate\n        argsTemplate: *CodeSymbolArgsTemplate\n    ObjectId: &ObjectIdSymbol\n        id: "ObjectId"\n        code: 101\n        callable: *constructor\n        args:\n            - [ *StringType, *NumericType, null ]\n        type: *ObjectIdType\n        attr:\n            createFromHexString:\n                <<: *__func\n                id: "createFromHexString"\n                args:\n                    - [ *StringType ]\n                type: *ObjectIdType\n                template: *ObjectIdCreateFromHexStringTemplate\n                argsTemplate: *ObjectIdCreateFromHexStringArgsTemplate\n            createFromTime:\n                <<: *__func\n                id: "ObjectIdCreateFromTime"\n                args:\n                    - [ *NumericType ]\n                type: *ObjectIdType\n                template: *ObjectIdCreateFromTimeTemplate\n                argsTemplate: *ObjectIdCreateFromTimeArgsTemplate\n            isValid:\n                <<: *__func\n                id: "isValid"\n                args:\n                    - [ *StringType ]\n                type: *BoolType\n                template: *ObjectIdIsValidTemplate\n                argsTemplate: *ObjectIdIsValidArgsTemplate\n        template: *ObjectIdSymbolTemplate\n        argsTemplate: *ObjectIdSymbolArgsTemplate\n    Binary: &BinarySymbol\n        id: "Binary"\n        code: 102\n        callable: *constructor\n        args:\n            - [ *StringType, *NumericType, *ObjectType ]\n            - [ *NumericType, null ]\n        type: *BinaryType\n        attr:\n            SUBTYPE_DEFAULT:\n                id: "SUBTYPE_DEFAULT"\n                callable: *var\n                args: null\n                type: *IntegerType\n                template: *BinarySymbolSubtypeDefaultTemplate\n            SUBTYPE_FUNCTION:\n                id: "SUBTYPE_FUNCTION"\n                callable: *var\n                args: null\n                type: *IntegerType\n                template: *BinarySymbolSubtypeFunctionTemplate\n            SUBTYPE_BYTE_ARRAY:\n                id: "SUBTYPE_BYTE_ARRAY"\n                callable: *var\n                args: null\n                type: *IntegerType\n                template: *BinarySymbolSubtypeByteArrayTemplate\n            SUBTYPE_UUID_OLD:\n                id: "SUBTYPE_UUID_OLD"\n                callable: *var\n                args: null\n                type: *IntegerType\n                template: *BinarySymbolSubtypeUuidOldTemplate\n            SUBTYPE_UUID:\n                id: "SUBTYPE_UUID"\n                callable: *var\n                args: null\n                type: *IntegerType\n                template: *BinarySymbolSubtypeUuidTemplate\n            SUBTYPE_MD5:\n                id: "SUBTYPE_MD5"\n                callable: *var\n                args: null\n                type: *IntegerType\n                template: *BinarySymbolSubtypeMd5Template\n            SUBTYPE_USER_DEFINED:\n                id: "SUBTYPE_USER_DEFINED"\n                callable: *var\n                args: null\n                type: *IntegerType\n                template: *BinarySymbolSubtypeUserDefinedTemplate\n        template: *BinarySymbolTemplate\n        argsTemplate: *BinarySymbolArgsTemplate\n    DBRef:\n        id: "DBRef"\n        code: 103\n        callable: *constructor\n        args:\n            - [ *StringType ]\n            - [ *ObjectIdType ]\n            - [ *StringType, null ]\n        type: *DBRefType\n        attr: {}\n        template: *DBRefSymbolTemplate\n        argsTemplate: *DBRefSymbolArgsTemplate\n    Double:\n        id: "Double"\n        code: 104\n        callable: *constructor\n        args:\n            - [ *NumericType, *StringType ]\n        type: *DoubleType\n        attr: {}\n        template: *DoubleSymbolTemplate\n        argsTemplate: *DoubleSymbolArgsTemplate\n    Int32:\n        id: "Int32"\n        code: 105\n        callable: *constructor\n        args:\n            - [ *NumericType, *StringType ]\n        type: *Int32Type\n        attr: {}\n        template: *Int32SymbolTemplate\n        argsTemplate: *Int32SymbolArgsTemplate\n    Long:\n        id: "Long"\n        code: 106\n        callable: *constructor\n        args:\n            - [ *IntegerType ]\n            - [ *IntegerType ]\n        type: *LongType\n        attr:\n            MAX_VALUE:\n                id: "MAX_VALUE"\n                callable: *var\n                args: null\n                type: *LongType\n                attr: {}\n                template: *LongSymbolMaxTemplate\n                argsTemplate: *LongSymbolMaxArgsTemplate\n            MIN_VALUE:\n                id: "MIN_VALUE"\n                callable: *var\n                args: null\n                type: *LongType\n                attr: {}\n                template: *LongSymbolMinTemplate\n                argsTemplate: *LongSymbolMinArgsTemplate\n            ZERO:\n                id: "ZERO"\n                callable: *var\n                args: null\n                type: *LongType\n                attr: {}\n                template: *LongSymbolZeroTemplate\n                argsTemplate: *LongSymbolZeroArgsTemplate\n            ONE:\n                id: "ONE"\n                callable: *var\n                args: null\n                type: *LongType\n                attr: {}\n                template: *LongSymbolOneTemplate\n                argsTemplate: *LongSymbolOneArgsTemplate\n            NEG_ONE:\n                id: "NEG_ONE"\n                callable: *var\n                args: null\n                type: *LongType\n                attr: {}\n                template: *LongSymbolNegOneTemplate\n                argsTemplate: *LongSymbolNegOneArgsTemplate\n            fromBits:\n                id: "LongfromBits" # Needs process method\n                callable: *func\n                args:\n                    - [ *IntegerType ]\n                    - [ *IntegerType ]\n                type: *LongType\n                attr: {}\n                template: *LongSymbolFromBitsTemplate\n                argsTemplate: *LongSymbolFromBitsArgsTemplate\n            fromInt:\n                id: "fromInt"\n                callable: *func\n                args:\n                    - [ *IntegerType ]\n                type: *LongType\n                attr: {}\n                template: *LongSymbolFromIntTemplate\n                argsTemplate: *LongSymbolFromIntArgsTemplate\n            fromNumber:\n                id: "fromNumber"\n                callable: *func\n                args:\n                    - [ *NumericType ]\n                type: *LongType\n                attr: {}\n                template: *LongSymbolFromNumberTemplate\n                argsTemplate: *LongSymbolFromNumberArgsTemplate\n            fromString:\n                id: "fromString"\n                callable: *func\n                args:\n                    - [ *StringType ]\n                    - [ *IntegerType, null ]\n                type: *LongType\n                attr: {}\n                template: *LongSymbolFromStringTemplate\n                argsTemplate: *LongSymbolFromStringArgsTemplate\n        template: *LongSymbolTemplate\n        argsTemplate: *LongSymbolArgsTemplate\n    MinKey:\n        id: "MinKey"\n        code: 107\n        callable: *constructor\n        args: []\n        type: *MinKeyType\n        attr: {}\n        template: *MinKeySymbolTemplate\n        argsTemplate: *MinKeySymbolArgsTemplate\n    MaxKey:\n        id: "MaxKey"\n        code: 108\n        callable: *constructor\n        args: []\n        type: *MaxKeyType\n        attr: {}\n        template: *MaxKeySymbolTemplate\n        argsTemplate: *MaxKeySymbolArgsTemplate\n    Timestamp:\n        id: "Timestamp"\n        code: 110\n        callable: *constructor\n        args:\n            - [ *IntegerType ]\n            - [ *IntegerType ]\n        type: *TimestampType\n        attr: {} #TODO: add fromInt, fromNumber, fromBits, fromString\n        template: *TimestampSymbolTemplate\n        argsTemplate: *TimestampSymbolArgsTemplate\n    BSONSymbol:\n        id: "BSONSymbol"\n        code: 111\n        callable: *constructor\n        args:\n            - [ *StringType ]\n        type: *SymbolType\n        attr: {}\n        template: *SymbolSymbolTemplate\n        argsTemplate: *SymbolSymbolArgsTemplate\n    BSONRegExp:\n        id: "BSONRegExp"\n        code: 109\n        callable: *constructor\n        args:\n            - [ *StringType ]\n            - [ *StringType, null ]\n        type: *BSONRegExpType\n        attr: {}\n        template: *BSONRegExpSymbolTemplate\n        argsTemplate: *BSONRegExpSymbolArgsTemplate\n    Decimal128:\n        id: "Decimal128"\n        code: 112\n        callable: *constructor\n        args:\n            - [ *ObjectType ]\n        type: *Decimal128Type\n        attr:\n            fromString:\n                id: "fromString"\n                callable: *func\n                args:\n                    - [ *StringType ]\n                type: *Decimal128Type\n                attr: {}\n                template: *Decimal128SymbolFromStringTemplate\n                argsTemplate: *Decimal128SymbolFromStringArgsTemplate\n        template: *Decimal128SymbolTemplate\n        argsTemplate: *Decimal128SymbolArgsTemplate\n\nNativeSymbols:\n    Number:\n        id: "Number"\n        code: 2\n        callable: *constructor\n        args:\n            - [ *IntegerType, *StringType ]\n        type: *NumericType\n        attr: {} # TODO: no built-in number funcs added yet\n        template: *NumberSymbolTemplate\n        argsTemplate: *NumberSymbolArgsTemplate\n    Date: # Needs process method\n        id: "Date"\n        code: 200\n        callable: *constructor\n        args:\n            - [ *StringType, *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n        type: *DateType\n        attr: # TODO: add more date funcs?\n            now:\n                id: "now"\n                code: 200.1\n                callable: *func\n                args: []\n                type: *DateType\n                attr: {}\n                template: *DateSymbolNowTemplate\n                argsTemplate: *DateSymbolNowArgsTemplate\n        template: *DateSymbolTemplate\n        argsTemplate: *DateSymbolArgsTemplate\n    RegExp: # Needs process method\n        id: "RegExp"\n        code: 8\n        callable: *constructor\n        args:\n            - [ *StringType, *RegexType ]\n            - [ *StringType, null ]\n        type: *RegexType\n        attr: {}\n        template: *RegExpSymbolTemplate\n        argsTemplate: *RegExpSymbolArgsTemplate\n'},46149:e=>{e.exports="SymbolTypes:\n    VAR: &var 0\n    CONSTRUCTOR: &constructor 1\n    FUNC: &func 2\n# Internal patterns to save typing\n__type: &__type\n    id: null\n    callable: *var\n    args: null\n    type: null\n    attr: {}\n    template: null\n    argsTemplate: null\n__func: &__func\n    callable: *func\n    args: []\n    attr: {}\n    template: null\n    argsTemplate: null\n\n# C# Templates\nTemplates:\n    # Misc\n    RegexFlags: &RegexFlags\n        i: 'i'\n        m: 'm'\n        u: ''\n        y: ''\n        g: ''\n    BSONRegexFlags: &BSONRegexFlags\n        i: 'i'\n        m: 'm'\n        x: 'x'\n        s: 's'\n        l: ''\n        u: ''\n    # Syntax\n    DriverTemplate: &DriverTemplate null\n    EqualitySyntaxTemplate: &EqualitySyntaxTemplate !!js/function >\n        (lhs, op, rhs) => {\n            if (op.includes('!') || op.includes('not')) {\n                return `${lhs} != ${rhs}`;\n            }\n            else if (op === '==' || op === '===' || op === 'is') {\n                return `${lhs} == ${rhs}`;\n            }\n            return `${lhs} ${op} ${rhs}`;\n        }\n    InSyntaxTemplate: &InSyntaxTemplate !!js/function >\n        (lhs, op, rhs) => {\n            let str = '!=';\n            if (op.includes('!') || op.includes('not')) {\n                str = '==';\n            }\n            return `${rhs}.indexOf(${lhs}) ${str} -1`\n        }\n    AndSyntaxTemplate: &AndSyntaxTemplate !!js/function >\n        (args) => {\n            return args.join(' && ');\n        }\n    OrSyntaxTemplate: &OrSyntaxTemplate !!js/function >\n        (args) => {\n            return args.join(' || ');\n        }\n    NotSyntaxTemplate: &NotSyntaxTemplate !!js/function >\n        (arg) => {\n            return `!${arg}`;\n        }\n    UnarySyntaxTemplate: &UnarySyntaxTemplate null\n    BinarySyntaxTemplate: &BinarySyntaxTemplate !!js/function >\n        (args) => {\n            return args.reduce((s, op, i, arr) => {\n                if (i % 2 === 0) {\n                    return s;\n                }\n                const rhs = arr[i + 1];\n                switch(op) {\n                    case '//':\n                        return `Math.floor(${s}, ${rhs})`;\n                    case '**':\n                        return `Math.pow(${s}, ${rhs})`;\n                    default:\n                        return `${s} ${op} ${rhs}`;\n                }\n            }, args[0]);\n        }\n    ParensSyntaxTemplate: &ParensSyntaxTemplate null\n    EosSyntaxTemplate: &EosSyntaxTemplate null\n    EofSyntaxTemplate: &EofSyntaxTemplate null\n    NewTemplate: &NewSyntaxTemplate !!js/function >\n        (expr, skip, code) => {\n            // Add classes that don't use \"new\" to array\n            // So far: [Symbol, Decimal128/NumberDecimal, Long/NumberLong, MinKey, MaxKey, Date.now, Double, Int32, Number, Date]\n            noNew = [111, 112, 106, 107, 108, 200.1, 104, 105, 2, 200];\n            if (skip || (code && noNew.indexOf(code) !== -1)) {\n                return expr;\n            }\n            return `new ${expr}`;\n        }\n    # BSON Object Type templates\n    CodeTypeTemplate: &CodeTypeTemplate null\n    StringTypeTemplate: &StringTypeTemplate !!js/function >\n        (str) => {\n            let newStr = str;\n            if (\n              (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n              (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n              newStr = str.substr(1, str.length - 2);\n            }\n            return `\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\"`;\n        }\n    RegexTypeTemplate: &RegexTypeTemplate !!js/function >\n        (pattern, flags) => {\n            flags = flags === '' ? '' : `(?${flags})`;\n            // Double-quote stringify\n            const str = flags + pattern;\n            let newStr = str;\n            if (\n                (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                    newStr = str.substr(1, str.length - 2);\n            }\n            return `Regex(\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\")`;\n        }\n    BoolTypeTemplate: &BoolTypeTemplate !!js/function >\n        (literal) => {\n            return literal.toLowerCase();\n        }\n    IntegerTypeTemplate: &IntegerTypeTemplate null\n    DecimalTypeTemplate: &DecimalTypeTemplate null\n    LongBasicTypeTemplate: &LongBasicTypeTemplate null\n    HexTypeTemplate: &HexTypeTemplate null\n    OctalTypeTemplate: &OctalTypeTemplate !!js/function >\n        (literal) => {\n            literal = literal.replace(/[oO]+/g, '0')\n            return parseInt(literal, 8).toString()\n        }\n    NumericTypeTemplate: &NumericTypeTemplate null\n    ArrayTypeTemplate: &ArrayTypeTemplate !!js/function >\n        (literal, depth) => {\n            depth++;\n            const indent = '\\n' + '    '.repeat(depth);\n            const initialIndent = '\\n' + '    '.repeat(depth-1);\n            if (literal === '') {\n              return 'new BsonArray()'\n            }\n\n            return `new BsonArray${initialIndent}{${literal}${initialIndent}}`;\n        }\n    ArrayTypeArgsTemplate: &ArrayTypeArgsTemplate !!js/function >\n        (arg, depth, last) => {\n            depth++;\n            const indent = '\\n' + '    '.repeat(depth);\n            const arr = arg.split(', new').join(`, ${indent}new`)\n\n            return last ? `${indent}${arr}` : `${indent}${arr},`;\n        }\n    NullTypeTemplate: &NullTypeTemplate !!js/function >\n        () => {\n            return 'BsonNull.Value';\n        }\n    UndefinedTypeTemplate: &UndefinedTypeTemplate !!js/function >\n        () => {\n            return 'BsonUndefined.Value';\n        }\n    ObjectTypeTemplate: &ObjectTypeTemplate !!js/function >\n        (literal) => {\n            if (literal === '') {\n                return `new BsonDocument()`;\n            }\n            return literal;\n        }\n    ObjectTypeArgsTemplate: &ObjectTypeArgsTemplate !!js/function >\n        (args, depth) => {\n            if (args.length === 0) {\n                return 'new BsonDocument()';\n            }\n            depth++;\n            const indent = '\\n' + '    '.repeat(depth);\n            const initialIndent = '\\n' + '    '.repeat(depth-1);\n            const doubleStringify = (str) => {\n                let newStr = str;\n                if (\n                  (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                  (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                    newStr = str.substr(1, str.length - 2);\n                }\n                return `\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\"`;\n            }\n\n            if (args.length === 1) {\n              return `new BsonDocument(${doubleStringify(args[0][0])}, ${args[0][1]})`;\n            }\n\n            const pairs = args.map((pair) => {\n                return `${indent}{ ${doubleStringify(pair[0])}, ${pair[1]} }`;\n            }).join(', ');\n\n            return `new BsonDocument${initialIndent}{${pairs}${initialIndent}}`\n        }\n    # BSON Object Method templates\n    CodeCodeTemplate: &CodeCodeTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.Code`;\n        }\n    CodeCodeArgsTemplate: &CodeCodeArgsTemplate null\n    CodeScopeTemplate: &CodeScopeTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.Scope`;\n        }\n    CodeScopeArgsTemplate: &CodeScopeArgsTemplate null\n    # Since in python, generated from attr access instead of func call, add () in template.\n    ObjectIdToStringTemplate: &ObjectIdToStringTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.ToString()`;\n        }\n    ObjectIdToStringArgsTemplate: &ObjectIdToStringArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    ObjectIdEqualsTemplate: &ObjectIdEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.Equals`;\n        }\n    ObjectIdEqualsArgsTemplate: &ObjectIdEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n            if (arg.indexOf('new') === 0) {\n              arg = arg.replace(/new /g, '')\n            }\n            return `(new ${arg})`;\n        }\n\n    ObjectIdGetTimestampTemplate: &ObjectIdGetTimestampTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.Timestamp`;\n        }\n    ObjectIdGetTimestampArgsTemplate: &ObjectIdGetTimestampArgsTemplate !!js/function >\n        (lhs) => {\n            return '';\n        }\n    BinaryValueTemplate: &BinaryValueTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.ToString`;\n        }\n    BinaryValueArgsTemplate: &BinaryValueArgsTemplate null\n    BinaryLengthTemplate: &BinaryLengthTemplate !!js/function >\n        () => {\n          return '';\n        }\n    BinaryLengthArgsTemplate: &BinaryLengthArgsTemplate !!js/function >\n        (lhs) => {\n          return `${lhs}.Bytes.Length`;\n        }\n    BinaryToStringTemplate: &BinaryToStringTemplate !!js/function >\n        (lhs) => {\n          return `${lhs}.ToString`;\n        }\n    BinaryToStringArgsTemplate: &BinaryToStringArgsTemplate null\n    BinarySubtypeTemplate: &BinarySubtypeTemplate !!js/function >\n        (lhs) => {\n          return `${lhs}.SubType`;\n        }\n    BinarySubtypeArgsTemplate: &BinarySubtypeArgsTemplate !!js/function >\n        () => {\n          return '';\n        }\n    DBRefGetDBTemplate: &DBRefGetDBTemplate !!js/function >\n        (lhs) => {\n          return `${lhs}.DatabaseName`;\n        }\n    DBRefGetDBArgsTemplate: &DBRefGetDBArgsTemplate !!js/function >\n        () => {\n          return '';\n        }\n    DBRefGetCollectionTemplate: &DBRefGetCollectionTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.CollectionName`;\n        }\n    DBRefGetCollectionArgsTemplate: &DBRefGetCollectionArgsTemplate !!js/function >\n        () => {\n          return '';\n        }\n    DBRefGetIdTemplate: &DBRefGetIdTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.Id`;\n        }\n    DBRefGetIdArgsTemplate: &DBRefGetIdArgsTemplate !!js/function >\n        () => {\n          return '';\n        }\n    LongEqualsTemplate: &LongEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} == `;\n        }\n    LongEqualsArgsTemplate: &LongEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n              return `${arg}`;\n        }\n    LongToIntTemplate: &LongToIntTemplate !!js/function >\n        (lhs) => {\n            return `(int) ${lhs}`;\n        }\n    LongToIntArgsTemplate: &LongToIntArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongToStringTemplate: &LongToStringTemplate !!js/function >\n        (lhs) => {\n            return lhs;\n        }\n    LongToStringArgsTemplate: &LongToStringArgsTemplate null\n    LongToNumberTemplate: &LongToNumberTemplate !!js/function >\n        (lhs) => {\n            return `(double) ${lhs}`;\n        }\n    LongToNumberArgsTemplate: &LongToNumberArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongAddTemplate: &LongAddTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} +`;\n        }\n    LongAddArgsTemplate: &LongAddArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongSubtractTemplate: &LongSubtractTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} -`;\n        }\n    LongSubtractArgsTemplate: &LongSubtractArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongMultiplyTemplate: &LongMultiplyTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} *`;\n        }\n    LongMultiplyArgsTemplate: &LongMultiplyArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongDivTemplate: &LongDivTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} /`;\n        }\n    LongDivArgsTemplate: &LongDivArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongModuloTemplate: &LongModuloTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} %`;\n        }\n    LongModuloArgsTemplate: &LongModuloArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongAndTemplate: &LongAndTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} &`;\n        }\n    LongAndArgsTemplate: &LongAndArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongOrTemplate: &LongOrTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} |`;\n        }\n    LongOrArgsTemplate: &LongOrArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongXorTemplate: &LongXorTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} ^`;\n        }\n    LongXorArgsTemplate: &LongXorArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongShiftLeftTemplate: &LongShiftLeftTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <<`;\n        }\n    LongShiftLeftArgsTemplate: &LongShiftLeftArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongShiftRightTemplate: &LongShiftRightTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >>`;\n        }\n    LongShiftRightArgsTemplate: &LongShiftRightArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongCompareTemplate: &LongCompareTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} - `;\n        }\n    LongCompareArgsTemplate: &LongCompareArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return arg;\n        }\n    LongIsOddTemplate: &LongIsOddTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}`;\n        }\n    LongIsOddArgsTemplate: &LongIsOddArgsTemplate !!js/function >\n        () => {\n            return ' % 2 == 1';\n        }\n    LongIsZeroTemplate: &LongIsZeroTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} == 0`;\n        }\n    LongIsZeroArgsTemplate: &LongIsZeroArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongIsNegativeTemplate: &LongIsNegativeTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} < 0`;\n        }\n    LongIsNegativeArgsTemplate: &LongIsNegativeArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongNegateTemplate: &LongNegateTemplate !!js/function >\n        () => {\n            return '-';\n        }\n    LongNegateArgsTemplate: &LongNegateArgsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}`;\n        }\n    LongNotTemplate: &LongNotTemplate !!js/function >\n        () => {\n            return '~';\n        }\n    LongNotArgsTemplate: &LongNotArgsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}`;\n        }\n    LongNotEqualsTemplate: &LongNotEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} !=`;\n        }\n    LongNotEqualsArgsTemplate: &LongNotEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongGreaterThanTemplate: &LongGreaterThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >`;\n        }\n    LongGreaterThanArgsTemplate: &LongGreaterThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongGreaterThanOrEqualTemplate: &LongGreaterThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >=`;\n        }\n    LongGreaterThanOrEqualArgsTemplate: &LongGreaterThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongLessThanTemplate: &LongLessThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <`;\n        }\n    LongLessThanArgsTemplate: &LongLessThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongLessThanOrEqualTemplate: &LongLessThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <=`;\n        }\n    LongLessThanOrEqualArgsTemplate: &LongLessThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongFloatApproxTemplate: &LongFloatApproxTemplate !!js/function >\n        (lhs) => {\n            return `(float) ${lhs}`;\n        }\n    LongTopTemplate: &LongTopTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >> 32`;\n        }\n    LongBottomTemplate: &LongBottomTemplate !!js/function >\n        (lhs) => {\n           return `${lhs} & 0x0000ffff`;\n        }\n    TimestampToStringTemplate: &TimestampToStringTemplate !!js/function >\n        (lhs) => {\n          return `${lhs}.ToString`;\n        }\n    TimestampToStringArgsTemplate: &TimestampToStringArgsTemplate null\n    TimestampEqualsTemplate: &TimestampEqualsTemplate !!js/function >\n        (lhs) => {\n          return `${lhs}.Equals`;\n        }\n    TimestampEqualsArgsTemplate: &TimestampEqualsArgsTemplate null\n    TimestampGetLowBitsTemplate: &TimestampGetLowBitsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.ToUniversalTime`;\n        }\n    TimestampGetLowBitsArgsTemplate: &TimestampGetLowBitsArgsTemplate null\n    TimestampGetHighBitsTemplate: &TimestampGetHighBitsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.Increment`;\n        }\n    TimestampGetHighBitsArgsTemplate: &TimestampGetHighBitsArgsTemplate !!js/function >\n        (lhs) => {\n            return '';\n        }\n    TimestampTTemplate: &TimestampTTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.ToUniversalTime()`;\n        }\n    TimestampITemplate: &TimestampITemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.Increment`;\n        }\n    TimestampAsDateTemplate: &TimestampAsDateTemplate !!js/function >\n        (lhs) => {\n            return `new DateTime(1970, 1, 1).AddSeconds(${lhs}.Timestamp)`;\n        }\n    TimestampAsDateArgsTemplate: &TimestampAsDateArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    TimestampCompareTemplate: &TimestampCompareTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.CompareTo`;\n        }\n    TimestampCompareArgsTemplate: &TimestampCompareArgsTemplate null\n    TimestampNotEqualsTemplate: &TimestampNotEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} != `;\n        }\n    TimestampNotEqualsArgsTemplate: &TimestampNotEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}`;\n        }\n    TimestampGreaterThanTemplate: &TimestampGreaterThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} > `;\n        }\n    TimestampGreaterThanArgsTemplate: &TimestampGreaterThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}`;\n        }\n    TimestampGreaterThanOrEqualTemplate: &TimestampGreaterThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >= `;\n        }\n    TimestampGreaterThanOrEqualArgsTemplate: &TimestampGreaterThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}`;\n        }\n    TimestampLessThanTemplate: &TimestampLessThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} < `;\n        }\n    TimestampLessThanArgsTemplate: &TimestampLessThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}`;\n        }\n    TimestampLessThanOrEqualTemplate: &TimestampLessThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <= `;\n        }\n    TimestampLessThanOrEqualArgsTemplate: &TimestampLessThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}`;\n        }\n    SymbolValueOfTemplate: &SymbolValueOfTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}`;\n        }\n    SymbolValueOfArgsTemplate: &SymbolValueOfArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    SymbolInspectTemplate: &SymbolInspectTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}`;\n        }\n    SymbolInspectArgsTemplate: &SymbolInspectArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    SymbolToStringTemplate: &SymbolToStringTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}`;\n        }\n    SymbolToStringArgsTemplate: &SymbolToStringArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    # Symbol Templates\n    CodeSymbolTemplate: &CodeSymbolTemplate  !!js/function > # Also has process method\n        () => {\n            return 'BsonJavaScript';\n        }\n    CodeSymbolArgsTemplate: &CodeSymbolArgsTemplate !!js/function >\n        (lhs, code, scope) => {\n            // Double quote stringify\n            let newStr = code === undefined ? '' : code;\n            const str = newStr;\n            if (\n                (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                newStr = str.substr(1, str.length - 2);\n            }\n            code = `\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\"`;\n            return (scope === undefined) ? `(${code})` : `WithScope(${code}, ${scope})`;\n        }\n    ObjectIdSymbolTemplate: &ObjectIdSymbolTemplate !!js/function >\n        () => {\n            return 'ObjectId';\n        }\n    ObjectIdSymbolArgsTemplate: &ObjectIdSymbolArgsTemplate !!js/function >\n        (lhs, str) => {\n            if (!str || str.length === 0) {\n                return '()';\n            }\n            let newStr = str;\n            if (\n                (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                newStr = str.substr(1, str.length - 2);\n            }\n            return `(\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\")`;\n        }\n    BinarySymbolTemplate: &BinarySymbolTemplate !!js/function >\n        () => {\n            return 'BsonBinaryData';\n        }\n    BinarySymbolArgsTemplate: &BinarySymbolArgsTemplate !!js/function >\n        (lhs, bytes, type) => {\n            const str = bytes;\n            let newStr = str;\n            if (\n              (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n              (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                newStr = str.substr(1, str.length - 2);\n            }\n            bytes = `\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\"`;\n\n            if (type === null) {\n                return `(System.Text.Encoding.ASCII.GetBytes(${bytes}))`;\n            }\n            return `(System.Text.Encoding.ASCII.GetBytes(${bytes}), ${type})`;\n        }\n    BinarySymbolSubtypeDefaultTemplate: &BinarySymbolSubtypeDefaultTemplate !!js/function >\n        () => {\n            return 'BsonBinarySubType.Binary';\n        }\n    BinarySymbolSubtypeFunctionTemplate: &BinarySymbolSubtypeFunctionTemplate !!js/function >\n        () => {\n            return 'BsonBinarySubType.Function';\n        }\n    BinarySymbolSubtypeByteArrayTemplate: &BinarySymbolSubtypeByteArrayTemplate !!js/function >\n        () => {\n            return 'BsonBinarySubType.OldBinary';\n        }\n    BinarySymbolSubtypeUuidOldTemplate: &BinarySymbolSubtypeUuidOldTemplate !!js/function >\n        () => {\n            return 'BsonBinarySubType.UuidLegacy';\n        }\n    BinarySymbolSubtypeUuidTemplate: &BinarySymbolSubtypeUuidTemplate !!js/function >\n        () => {\n            return 'BsonBinarySubType.UuidStandard';\n        }\n    BinarySymbolSubtypeMd5Template: &BinarySymbolSubtypeMd5Template !!js/function >\n        () => {\n            return 'BsonBinarySubType.MD5';\n        }\n    BinarySymbolSubtypeUserDefinedTemplate: &BinarySymbolSubtypeUserDefinedTemplate !!js/function >\n        () => {\n            return 'BsonBinarySubType.UserDefined';\n        }\n    DBRefSymbolTemplate: &DBRefSymbolTemplate !!js/function >\n        () => {\n            return 'MongoDBRef';\n        }\n    DBRefSymbolArgsTemplate: &DBRefSymbolArgsTemplate null\n    DoubleSymbolTemplate: &DoubleSymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    DoubleSymbolArgsTemplate: &DoubleSymbolArgsTemplate !!js/function >\n        (lhs, arg, type) => {\n            arg = arg === undefined ? 0 : arg;\n\n            if (type === '_hex') {\n              return `Convert.ToDouble(${arg})`;\n            }\n            if (type === '_string') {\n              return `Convert.ToDouble(${arg})`;\n            }\n\n            if (type === '_decimal') {\n              return arg;\n            }\n\n            return `${Math.round(arg).toFixed(1)}`;\n        }\n    Int32SymbolTemplate: &Int32SymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    Int32SymbolArgsTemplate: &Int32SymbolArgsTemplate !!js/function >\n        (lhs, arg, type) => {\n            arg = arg === undefined ? 0 : arg;\n\n            if (type === '_hex' || type === '_decimal' || type === '_string') {\n              return `Convert.ToInt32(${arg})`;\n            }\n\n            return arg;\n        }\n    LongSymbolTemplate: &LongSymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongSymbolArgsTemplate: &LongSymbolArgsTemplate !!js/function >\n        (lhs, arg) => {\n            if (!arg || arg.length === 0) {\n                arg = '0';\n            }\n            if (arg.indexOf('\\'') === 0 || arg.indexOf('\"') === 0) {\n              return `Convert.ToInt64(${arg})`;\n            }\n            return `${arg}L`;\n        }\n    LongSymbolMaxTemplate: &LongSymbolMaxTemplate !!js/function >\n        () => {\n            return 'Int64.MaxValue';\n        }\n    LongSymbolMaxArgsTemplate: &LongSymbolMaxArgsTemplate null\n    LongSymbolMinTemplate: &LongSymbolMinTemplate !!js/function >\n        () => {\n            return 'Int64.MinValue';\n        }\n    LongSymbolMinArgsTemplate: &LongSymbolMinArgsTemplate null\n    LongSymbolZeroTemplate: &LongSymbolZeroTemplate !!js/function >\n        (lhs) => {\n            return '0L';\n        }\n    LongSymbolZeroArgsTemplate: &LongSymbolZeroArgsTemplate null\n    LongSymbolOneTemplate: &LongSymbolOneTemplate !!js/function >\n        (lhs) => {\n            return '1L';\n        }\n    LongSymbolOneArgsTemplate: &LongSymbolOneArgsTemplate null\n    LongSymbolNegOneTemplate: &LongSymbolNegOneTemplate !!js/function >\n        (lhs) => {\n            return '-1L';\n        }\n    LongSymbolNegOneArgsTemplate: &LongSymbolNegOneArgsTemplate null\n    LongSymbolFromBitsTemplate: &LongSymbolFromBitsTemplate !!js/function > # Also has process method\n        () => {\n            return '';\n        }\n    LongSymbolFromBitsArgsTemplate: &LongSymbolFromBitsArgsTemplate null\n    LongSymbolFromIntTemplate: &LongSymbolFromIntTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongSymbolFromIntArgsTemplate: &LongSymbolFromIntArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}L`;\n        }\n    LongSymbolFromNumberTemplate: &LongSymbolFromNumberTemplate null\n    LongSymbolFromNumberArgsTemplate: &LongSymbolFromNumberArgsTemplate null\n    LongSymbolFromStringTemplate: &LongSymbolFromStringTemplate !!js/function >\n        () => {\n            return 'Convert.ToInt64';\n        }\n    LongSymbolFromStringArgsTemplate: &LongSymbolFromStringArgsTemplate !!js/function >\n        (lhs, arg1, arg2) => {\n          if (arg2) {\n            return `(${arg1}, ${arg2})`\n          }\n          return `(${arg1}, 10)`\n        }\n    MinKeySymbolTemplate: &MinKeySymbolTemplate !!js/function >\n        () => {\n            return 'BsonMinKey';\n        }\n    MinKeySymbolArgsTemplate: &MinKeySymbolArgsTemplate !!js/function >\n        () => {\n            return '.Value';\n        }\n    MaxKeySymbolTemplate: &MaxKeySymbolTemplate !!js/function >\n        () => {\n            return 'BsonMaxKey';\n        }\n    MaxKeySymbolArgsTemplate: &MaxKeySymbolArgsTemplate !!js/function >\n        () => {\n            return '.Value';\n        }\n    TimestampSymbolTemplate: &TimestampSymbolTemplate !!js/function >\n        () => {\n            return 'BsonTimestamp';\n        }\n    TimestampSymbolArgsTemplate: &TimestampSymbolArgsTemplate !!js/function >\n        (lhs, arg1, arg2) => {\n            if (typeof arg1 === 'undefined') {\n                return '(0, 0)'\n            }\n            return `(${arg1}, ${arg2})`;\n        }\n    SymbolSymbolTemplate: &SymbolSymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    SymbolSymbolArgsTemplate: &SymbolSymbolArgsTemplate !!js/function >\n        (_, arg) => {\n            return arg; // no parens because generates as a string\n        }\n    BSONRegExpSymbolTemplate: &BSONRegExpSymbolTemplate !!js/function >\n        () => {\n            return 'BsonRegularExpression';\n        }\n    BSONRegExpSymbolArgsTemplate: &BSONRegExpSymbolArgsTemplate !!js/function >\n        (lhs, pattern, flags) => {\n            const doubleStringify = (str) => {\n                let newStr = str;\n                if (\n                  (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                  (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                    newStr = str.substr(1, str.length - 2);\n                }\n                return `\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\"`;\n            }\n            return `(${doubleStringify(pattern)}${flags ? ', ' + doubleStringify(flags) : ''})`;\n        }\n    Decimal128SymbolTemplate: &Decimal128SymbolTemplate !!js/function >\n        () => {\n            return 'Decimal128';\n        }\n    Decimal128SymbolArgsTemplate: &Decimal128SymbolArgsTemplate !!js/function >\n        (_, str) => { // just stringify\n            let newStr = str;\n            if (\n              (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n              (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                newStr = str.substr(1, str.length - 2);\n            }\n            return `.Parse(\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\")`;\n        }\n    Decimal128SymbolFromStringTemplate: &Decimal128SymbolFromStringTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.Parse`;\n        }\n    Decimal128SymbolFromStringArgsTemplate: &Decimal128SymbolFromStringArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `(${arg})`;\n        }\n    Decimal128ToStringTemplate: &Decimal128ToStringTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.ToString`;\n        }\n    Decimal128ToStringArgsTemplate: &Decimal128ToStringArgsTemplate null\n    # BSON Util Templates\n    ObjectIdCreateFromHexStringTemplate: &ObjectIdCreateFromHexStringTemplate !!js/function >\n        (lhs) => {\n            return `new ${lhs}`;\n        }\n    ObjectIdCreateFromHexStringArgsTemplate: &ObjectIdCreateFromHexStringArgsTemplate null\n    ObjectIdCreateFromTimeTemplate: &ObjectIdCreateFromTimeTemplate !!js/function >\n        () => {\n            return `new ObjectId.GenerateNewId`;\n        }\n    ObjectIdCreateFromTimeArgsTemplate: &ObjectIdCreateFromTimeArgsTemplate !!js/function >\n        (lhs, arg, isNumber) => {\n            if (isNumber) {\n              return `(Convert.ToInt32(${arg}))`;\n            }\n            return `(${arg})`;\n        }\n    ObjectIdIsValidTemplate: &ObjectIdIsValidTemplate !!js/function >\n        (lhs) => {\n            return `new ${lhs}`;\n        }\n    ObjectIdIsValidArgsTemplate: &ObjectIdIsValidArgsTemplate null\n    # JS Symbol Templates\n    NumberSymbolTemplate: &NumberSymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    NumberSymbolArgsTemplate: &NumberSymbolArgsTemplate !!js/function >\n        (lhs, arg, type) => {\n            arg = arg === undefined ? 0 : arg;\n\n            if (type === '_string') {\n              if (arg.indexOf('.') !== -1) {\n                return `float.Parse(${arg})`\n              }\n              return `int.Parse(${arg})`;\n            }\n\n            if (arg.indexOf('.') !== -1) {\n              return `(float) ${arg}`\n            }\n            return `(int) ${arg}`;\n        }\n    DateSymbolTemplate: &DateSymbolTemplate !!js/function >\n        () => {\n            return 'DateTime';\n        }\n    DateSymbolArgsTemplate: &DateSymbolArgsTemplate !!js/function >\n        (lhs, date, isString) => {\n            let toStr = isString? '.ToString(\"ddd MMM dd yyyy HH\\':\\'mm\\':\\'ss UTC\")' : '';\n\n            if (date === null) {\n                return `${lhs}.Now${toStr}`;\n            }\n\n            const dateStr = [\n                date.getUTCFullYear(),\n                date.getUTCMonth() + 1,\n                date.getUTCDate(),\n                date.getUTCHours(),\n                date.getUTCMinutes(),\n                date.getUTCSeconds()\n            ].join(', ');\n\n            return `new ${lhs}(${dateStr})${toStr}`;\n        }\n    DateSymbolNowTemplate: &DateSymbolNowTemplate !!js/function >\n        () => {\n            return 'DateTime.Now';\n        }\n    DateSymbolNowArgsTemplate: &DateSymbolNowArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    RegExpSymbolTemplate: &RegExpSymbolTemplate !!js/function > # Also has process method\n        () => {\n            return 'Regex';\n        }\n    RegExpSymbolArgsTemplate: &RegExpSymbolArgsTemplate null\n    ImportTemplate: &ImportTemplate !!js/function >\n        (args) => {\n            const universal = ['using MongoDB.Bson;', 'using MongoDB.Driver;'];\n            const all = universal.concat(Object.values(args));\n            return all.join('\\n');\n        }\n    DriverImportTemplate: &DriverImportTemplate null\n    0ImportTemplate: &0ImportTemplate null\n    1ImportTemplate: &1ImportTemplate null\n    2ImportTemplate: &2ImportTemplate null\n    3ImportTemplate: &3ImportTemplate null\n    4ImportTemplate: &4ImportTemplate null\n    5ImportTemplate: &5ImportTemplate null\n    6ImportTemplate: &6ImportTemplate null\n    7ImportTemplate: &7ImportTemplate null\n    8ImportTemplate: &8ImportTemplate !!js/function >\n        () => {\n            return 'using System.Text.RegularExpressions;';\n        }\n    9ImportTemplate: &9ImportTemplate null\n    10ImportTemplate: &10ImportTemplate null\n    11ImportTemplate: &11ImportTemplate null\n    12ImportTemplate: &12ImportTemplate null\n    100ImportTemplate: &100ImportTemplate null\n    101ImportTemplate: &101ImportTemplate null\n    102ImportTemplate: &102ImportTemplate null\n    103ImportTemplate: &103ImportTemplate null\n    104ImportTemplate: &104ImportTemplate null\n    105ImportTemplate: &105ImportTemplate null\n    106ImportTemplate: &106ImportTemplate null\n    107ImportTemplate: &107ImportTemplate null\n    108ImportTemplate: &108ImportTemplate null\n    109ImportTemplate: &109ImportTemplate null\n    110ImportTemplate: &110ImportTemplate null\n    111ImportTemplate: &111ImportTemplate null\n    112ImportTemplate: &112ImportTemplate null\n    113ImportTemplate: &113ImportTemplate null\n    114ImportTemplate: &114ImportTemplate null\n    200ImportTemplate: &200ImportTemplate !!js/function >\n        () => {\n            return 'using System;';\n        }\n    201ImportTemplate: &201ImportTemplate null\n    300ImportTemplate: &300ImportTemplate null\n    301ImportTemplate: &301ImportTemplate null\n    302ImportTemplate: &302ImportTemplate null\n    303ImportTemplate: &303ImportTemplate null\n    304ImportTemplate: &304ImportTemplate null\n    305ImportTemplate: &305ImportTemplate null\n    306ImportTemplate: &306ImportTemplate null\n# Universal types\n# Everything inherits from StringType because we haven't implemented any of them.\nBasicTypes:\n    # Universal basic types\n    _bool: &BoolType\n        <<: *__type\n        id: \"_bool\"\n        code: 0\n        template: *BoolTypeTemplate\n    _integer: &IntegerType\n        <<: *__type\n        id: \"_integer\"\n        code: 1\n        template: *IntegerTypeTemplate\n    _long: &LongBasicType\n        <<: *__type\n        id: \"_long\"\n        code: 2\n        template: *LongBasicTypeTemplate\n    _decimal: &DecimalType\n        <<: *__type\n        id: \"_decimal\"\n        code: 3\n        template: *DecimalTypeTemplate\n    _hex: &HexType\n        <<: *__type\n        id: \"_hex\"\n        code: 4\n        template: *HexTypeTemplate\n    _octal: &OctalType\n        <<: *__type\n        id: \"_octal\"\n        code: 5\n        template: *OctalTypeTemplate\n    _numeric: &NumericType\n        <<: *__type\n        id: \"_numeric\"\n        code: 6\n        template: *NumericTypeTemplate\n    _string: &StringType\n        <<: *__type\n        id: \"_string\"\n        code: 7\n        template: *StringTypeTemplate\n    _regex: &RegexType\n        <<: *__type\n        id: \"_regex\"\n        code: 8\n        template: *RegexTypeTemplate\n    _array: &ArrayType\n        <<: *__type\n        id: \"_array\"\n        code: 9\n        template: *ArrayTypeTemplate\n        argsTemplate: *ArrayTypeArgsTemplate\n    _object: &ObjectType\n        <<: *__type\n        id: \"_object\"\n        code: 10\n        template: *ObjectTypeTemplate\n        argsTemplate: *ObjectTypeArgsTemplate\n    _null: &NullType\n        <<: *__type\n        id: \"_null\"\n        code: 11\n        template: *NullTypeTemplate\n    _undefined: &UndefinedType\n        <<: *__type\n        id: \"_undefined\"\n        code: 12\n        template: *UndefinedTypeTemplate\n\nSyntax:\n    equality:\n        template: *EqualitySyntaxTemplate\n    in:\n        template: *InSyntaxTemplate\n    and:\n        template: *AndSyntaxTemplate\n    or:\n        template: *OrSyntaxTemplate\n    not:\n        template: *NotSyntaxTemplate\n    unary:\n        template: *UnarySyntaxTemplate\n    binary:\n        template: *BinarySyntaxTemplate\n    parens:\n        template: *ParensSyntaxTemplate\n    eos:\n        template: *EosSyntaxTemplate\n    eof:\n        template: *EofSyntaxTemplate\n    # The new template takes in expr, and an optional skip argument and optional\n    # id argument. The skip argument is a boolean that if true then doesn't add\n    # new. The code argument is the symbol code being called. The template will check\n    # if it is an exception, i.e. a type that is a constructor but may not use new.\n    new:\n        template: *NewSyntaxTemplate\n    # The regex flags that change symbols between languages can be defined here.\n    # Flags that aren't defined can be left blank and will be ignored.\n    regexFlags: *RegexFlags\n    bsonRegexFlags: *BSONRegexFlags\n    driver: *DriverTemplate\nImports:\n    import:\n        template: *ImportTemplate\n    driver:\n        template: *DriverImportTemplate\n    0:\n        template: *0ImportTemplate\n    1:\n        template: *1ImportTemplate\n    2:\n        template: *2ImportTemplate\n    3:\n        template: *3ImportTemplate\n    4:\n        template: *4ImportTemplate\n    5:\n        template: *5ImportTemplate\n    6:\n        template: *6ImportTemplate\n    7:\n        template: *7ImportTemplate\n    8:\n        template: *8ImportTemplate\n    9:\n        template: *9ImportTemplate\n    10:\n        template: *10ImportTemplate\n    11:\n        template: *11ImportTemplate\n    12:\n        template: *12ImportTemplate\n    100:\n        template: *100ImportTemplate\n    101:\n        template: *101ImportTemplate\n    102:\n        template: *102ImportTemplate\n    103:\n        template: *103ImportTemplate\n    104:\n        template: *104ImportTemplate\n    105:\n        template: *105ImportTemplate\n    106:\n        template: *106ImportTemplate\n    107:\n        template: *107ImportTemplate\n    108:\n        template: *108ImportTemplate\n    109:\n        template: *109ImportTemplate\n    110:\n        template: *110ImportTemplate\n    111:\n        template: *111ImportTemplate\n    112:\n        template: *112ImportTemplate\n    113:\n        template: *113ImportTemplate\n    114:\n        template: *114ImportTemplate\n    200:\n        template: *200ImportTemplate\n    201:\n        template: *201ImportTemplate\n    300:\n        template: *300ImportTemplate\n    301:\n        template: *301ImportTemplate\n    302:\n        template: *302ImportTemplate\n    303:\n        template: *303ImportTemplate\n    304:\n        template: *304ImportTemplate\n    305:\n        template: *305ImportTemplate\n    306:\n        template: *306ImportTemplate\nNativeTypes:\n    Date: &DateType\n        <<: *__type\n        id: \"Date\"\n        code: 200\n        type: *ObjectType\n        attr: {} # TODO: no built-in date methods added yet\n    int: &intType\n        <<: *__type\n        id: \"int\"\n        code: 105\n        type: *IntegerType\n        attr: {}\n    float: &floatType\n        <<: *__type\n        id: \"float\"\n        code: 104\n        type: *IntegerType\n        attr: {}\nBsonTypes:\n    Code: &CodeType\n        <<: *__type\n        id: \"Code\"\n        code: 100\n        type: *ObjectType\n        attr:\n            scope:\n                callable: *var\n                args: null\n                attr: null\n                id: \"scope\"\n                type: *ObjectType\n                template: *CodeScopeTemplate\n                argsTemplate: *CodeScopeArgsTemplate\n    ObjectId: &ObjectIdType\n        <<: *__type\n        id: \"ObjectId\"\n        code: 101\n        type: *ObjectType\n        attr:\n            binary:\n                callable: *var\n                args: null\n                attr: null\n                type: *StringType\n                template: *ObjectIdToStringTemplate\n                argsTemplate: *ObjectIdToStringArgsTemplate\n            generation_time:\n                callable: *var\n                args: null\n                attr: null\n                id: \"db\"\n                type: *DateType\n                template: *ObjectIdGetTimestampTemplate\n                argsTemplate: *ObjectIdGetTimestampArgsTemplate\n    Binary: &BinaryType # Not currently supported\n        <<: *__type\n        id: \"Binary\"\n        code: 102\n        type: *ObjectType\n    DBRef: &DBRefType\n        <<: *__type\n        id: \"DBRef\"\n        code: 103\n        type: *ObjectType\n        attr:\n            database:\n                callable: *var\n                args: null\n                attr: null\n                id: \"db\"\n                type: *StringType\n                template: *DBRefGetDBTemplate\n                argsTemplate: *DBRefGetDBArgsTemplate\n            collection:\n                callable: *var\n                args: null\n                attr: null\n                id: \"collection\"\n                type: *StringType\n                template: *DBRefGetCollectionTemplate\n                argsTemplate: *DBRefGetCollectionArgsTemplate\n            id:\n                callable: *var\n                args: null\n                attr: null\n                id: \"id\"\n                type: *StringType\n                template: *DBRefGetIdTemplate\n                argsTemplate: *DBRefGetIdArgsTemplate\n    Int64: &LongType\n        <<: *__type\n        id: \"Int64\"\n        code: 106\n        type: *ObjectType\n        attr: {}\n    MinKey: &MinKeyType\n        <<: *__type\n        id: \"MinKey\"\n        code: 107\n        type: *ObjectType\n    MaxKey: &MaxKeyType\n        <<: *__type\n        id: \"MaxKey\"\n        code: 108\n        type: *ObjectType\n    Regex: &BSONRegExpType\n        <<: *__type\n        id: \"BSONRegExp\"\n        code: 109\n        type: *ObjectType\n    Timestamp: &TimestampType\n        <<: *__type\n        id: \"Timestamp\"\n        code: 110\n        type: *ObjectType\n        attr:\n            time:\n                callable: *var\n                args: null\n                attr: null\n                id: \"time\"\n                type: *IntegerType\n                template: *TimestampTTemplate\n                argsTemplate: null\n            inc:\n                callable: *var\n                args: null\n                attr: null\n                id: \"inc\"\n                type: *IntegerType\n                template: *TimestampITemplate\n                argsTemplate: null\n            as_datetime:\n                <<: *__func\n                id: \"inc\"\n                type: *DateType\n                template: *TimestampAsDateTemplate\n                argsTemplate: *TimestampAsDateArgsTemplate\n    Decimal128: &Decimal128Type\n        <<: *__type\n        id: \"Decimal128\"\n        code: 112\n        type: *ObjectType\n        attr: {}\nBsonSymbols:\n    Code: &CodeSymbol\n        id: \"Code\"\n        code: 100\n        callable: *constructor\n        args:\n            - [ *StringType ]\n            - [ *ObjectType, null ]\n        namedArgs:\n            scope:\n                default: {}\n                type: [ *ObjectType ]\n        type: *CodeType\n        attr: {}\n        template: *CodeSymbolTemplate\n        argsTemplate: *CodeSymbolArgsTemplate\n    ObjectId: &ObjectIdSymbol\n        id: \"ObjectId\"\n        code: 101\n        callable: *constructor\n        args:\n            - [ *StringType, null ]\n        namedArgs:\n            oid:\n                default: null\n                type: [ *StringType, *ObjectIdType ]\n        type: *ObjectIdType\n        attr:\n            from_datetime:\n                <<: *__func\n                id: \"ObjectIdfrom_datetime\"\n                args:\n                    - [ \"Date\" ]\n                type: *ObjectIdType\n                template: *ObjectIdCreateFromTimeTemplate\n                argsTemplate: *ObjectIdCreateFromTimeArgsTemplate\n            is_valid:\n                <<: *__func\n                id: \"is_valid\"\n                args:\n                    - [ *StringType,  ]\n                type: *BoolType\n                template: *ObjectIdIsValidTemplate\n                argsTemplate: *ObjectIdIsValidArgsTemplate\n        template: *ObjectIdSymbolTemplate\n        argsTemplate: *ObjectIdSymbolArgsTemplate\n    Binary: &BinarySymbol # Not currently supported\n        id: \"Binary\"\n        code: 102\n        callable: *constructor\n        args: null\n        type: *BinaryType\n        attr: {}\n        template: *BinarySymbolTemplate\n        argsTemplate: *BinarySymbolArgsTemplate\n    DBRef:\n        id: \"DBRef\"\n        code: 103\n        callable: *constructor\n        args:\n            - [ *StringType ]\n            - [ *ObjectIdType, *StringType ]\n            - [ *StringType, null ]\n        namedArgs:\n            database:\n                default: null\n                type: [ *StringType ]\n        type: *DBRefType\n        attr: {}\n        template: *DBRefSymbolTemplate\n        argsTemplate: *DBRefSymbolArgsTemplate\n    Int64:\n        id: \"Int64\"\n        code: 106\n        callable: *constructor\n        args:\n            - [ *IntegerType, *StringType, null ]\n        type: *LongType\n        attr: {}\n        template: *LongSymbolTemplate\n        argsTemplate: *LongSymbolArgsTemplate\n    MinKey:\n        id: \"MinKey\"\n        code: 107\n        callable: *constructor\n        args: []\n        type: *MinKeyType\n        attr: {}\n        template: *MinKeySymbolTemplate\n        argsTemplate: *MinKeySymbolArgsTemplate\n    MaxKey:\n        id: \"MaxKey\"\n        code: 108\n        callable: *constructor\n        args: []\n        type: *MaxKeyType\n        attr: {}\n        template: *MaxKeySymbolTemplate\n        argsTemplate: *MaxKeySymbolArgsTemplate\n    Regex:\n        id: \"Regex\"\n        code: 109\n        callable: *constructor\n        args:\n            - [ *StringType ]\n            - [ *StringType, *IntegerType, null ]\n        namedArgs:\n            flags:\n                default: 0\n                type: [ *StringType, *IntegerType ]\n        type: *BSONRegExpType\n        attr:\n            from_native:\n                <<: *__func\n                id: \"from_native\"\n                args:\n                - [ *RegexType ]\n                type: *BSONRegExpType\n                template: null\n                argsTemplate: null\n        template: *BSONRegExpSymbolTemplate\n        argsTemplate: *BSONRegExpSymbolArgsTemplate\n    Timestamp:\n        id: \"Timestamp\"\n        code: 110\n        callable: *constructor\n        args:\n            - [ *IntegerType ]\n            - [ *IntegerType ]\n        type: *TimestampType\n        attr: {}\n        template: *TimestampSymbolTemplate\n        argsTemplate: *TimestampSymbolArgsTemplate\n    Decimal128:\n        id: \"Decimal128\"\n        code: 112\n        callable: *constructor\n        args:\n            - [ *StringType ]\n        type: *Decimal128Type\n        attr: {}\n        template: *Decimal128SymbolTemplate\n        argsTemplate: *Decimal128SymbolArgsTemplate\n\nNativeSymbols:\n    datetime: # Needs process method\n        id: \"datetime\"\n        code: 200\n        callable: *constructor\n        args:\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n        type: *DateType\n        attr: {} # TODO: add more date funcs?\n        template: *DateSymbolTemplate\n        argsTemplate: *DateSymbolArgsTemplate\n    re:\n        id: \"re\"\n        code: 8\n        callable: *var\n        args: null\n        type: null\n        attr:\n            compile:\n                id: \"compile\"\n                code: 8\n                callable: *constructor\n                args:\n                    - [ *StringType ]\n                    - [ *IntegerType, null ]\n                namedArgs:\n                    flags:\n                        default: 0\n                        type: [ *IntegerType ]\n                type: *RegexType\n                attr: {}\n                template: *RegExpSymbolTemplate\n                argsTemplate: *RegExpSymbolArgsTemplate\n            A:\n                <<: *__type\n                id: 're.A'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '256';\n                    }\n            ASCII:\n                <<: *__type\n                id: 're.ASCII'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '256';\n                    }\n            I:\n                <<: *__type\n                id: 're.I'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '2';\n                    }\n            IGNORECASE:\n                <<: *__type\n                id: 're.IGNORECASE'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '2';\n                    }\n            DEBUG:\n                <<: *__type\n                id: 're.DEBUG'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '128';\n                    }\n            L:\n                <<: *__type\n                id: 're.L'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '4';\n                    }\n            LOCAL:\n                <<: *__type\n                id: 're.LOCAL'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '4';\n                    }\n            M:\n                <<: *__type\n                id: 're.M'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '8';\n                    }\n            MULTILINE:\n                <<: *__type\n                id: 're.MULTILINE'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '8';\n                    }\n            S:\n                <<: *__type\n                id: 're.S'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '16';\n                    }\n            DOTALL:\n                <<: *__type\n                id: 're.DOTALL'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '16';\n                    }\n            X:\n                <<: *__type\n                id: 're.X'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '64';\n                    }\n            VERBOSE:\n                <<: *__type\n                id: 're.VERBOSE'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '64';\n                    }\n        template: !!js/function >\n            () => {\n                return '';\n            }\n        argsTemplate: null\n    float:\n        id: \"float\"\n        code: 104\n        callable: *constructor\n        args:\n        - [ *NumericType, *StringType, null ]\n        type: *floatType\n        attr: {}\n        template: *DoubleSymbolTemplate\n        argsTemplate: *DoubleSymbolArgsTemplate\n    int:\n        id: \"int\"\n        code: 105\n        callable: *constructor\n        args:\n        - [ *NumericType, *StringType, null ]\n        type: *intType\n        attr: {}\n        template: *Int32SymbolTemplate\n        argsTemplate: *Int32SymbolArgsTemplate\n"},1841:e=>{e.exports="SymbolTypes:\n    VAR: &var 0\n    CONSTRUCTOR: &constructor 1\n    FUNC: &func 2\n# Internal patterns to save typing\n__type: &__type\n    id: null\n    callable: *var\n    args: null\n    type: null\n    attr: {}\n    template: null\n    argsTemplate: null\n__func: &__func\n    callable: *func\n    args: []\n    attr: {}\n    template: null\n    argsTemplate: null\n\n# Java Templates\nTemplates:\n    # Misc\n    RegexFlags: &RegexFlags\n        i: 'i'\n        m: 'm'\n        u: 'u'\n        y: ''\n        g: ''\n    BSONRegexFlags: &BSONRegexFlags\n        i: 'i'\n        m: 'm'\n        x: 'x'\n        s: 's'\n        l: 'l'\n        u: 'u'\n    # Syntax\n    DriverTemplate: &DriverTemplate !!js/function >\n        (spec) => {\n            const comment = `/*\n         * Requires the MongoDB Java Driver.\n         * https://mongodb.github.io/mongo-java-driver`;\n\n            const str = spec.options.uri;\n            let newStr = str;\n            if (\n                (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                newStr = str.substr(1, str.length - 2);\n            }\n            const uri = `\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\"`;\n\n\n\n            const connection = `MongoClient mongoClient = new MongoClient(\n            new MongoClientURI(\n                ${uri}\n            )\n        );\n\n        MongoDatabase database = mongoClient.getDatabase(\"${spec.options.database}\");\n\n        MongoCollection<Document> collection = database.getCollection(\"${spec.options.collection}\");`;\n\n\n            if ('aggregation' in spec) {\n                return `${comment}\\n */\\n\\n${connection}\n\n        FindIterable<Document> result = collection.aggregate(${spec.aggregation});`;\n            }\n\n            let warning = '';\n            const defs = Object.keys(spec).reduce((s, k) => {\n                if (k === 'options' || k === 'maxTimeMS' || k === 'skip' || k === 'limit' || k === 'collation') return s;\n                if (s === '') return `Bson ${k} = ${spec[k]};`;\n                return `${s}\n        Bson ${k} = ${spec[k]};`;\n            }, '');\n\n            const result = Object.keys(spec).reduce((s, k) => {\n                switch (k) {\n                    case 'options':\n                    case 'filter':\n                        return s;\n                    case 'maxTimeMS':\n                        return `${s}\n            .maxTime(${spec[k]}, TimeUnit.MICROSECONDS)`;\n                    case 'skip':\n                    case 'limit':\n                        return `${s}\n            .${k}((int)${spec[k]})`;\n                    case 'project':\n                        return `${s}\n            .projection(project)`;\n                    case 'collation':\n                        warning = '\\n *\\n * Warning: translating collation to Java not yet supported, so will be ignored';\n                        return s;\n                    default:\n                        return `${s}\n            .${k}(${k})`;\n                }\n            }, 'FindIterable<Document> result = collection.find(filter)');\n\n            return `${comment}${warning}\\n */\\n\\n${defs}\n\n        ${connection}\n\n        ${result};`;\n        }\n    EqualitySyntaxTemplate: &EqualitySyntaxTemplate !!js/function >\n        (lhs, op, rhs) => {\n            if (op.includes('!') || op.includes('not')) {\n                return `${lhs} != ${rhs}`;\n            } else if (op === '==' || op === '===' || op === 'is') {\n                return `${lhs} == ${rhs}`;\n            }\n            return `${lhs} ${op} ${rhs}`;\n        }\n    InSyntaxTemplate: &InSyntaxTemplate !!js/function >\n        (lhs, op, rhs) => {\n            let str = '';\n            if (op.includes('!') || op.includes('not')) {\n                str = '!';\n            }\n            return `${str}${rhs}.contains(${lhs})`\n        }\n    AndSyntaxTemplate: &AndSyntaxTemplate !!js/function >\n        (args) => {\n            return args.join(' && ');\n        }\n    OrSyntaxTemplate: &OrSyntaxTemplate !!js/function >\n        (args) => {\n            return args.join(' || ');\n        }\n    NotSyntaxTemplate: &NotSyntaxTemplate !!js/function >\n        (arg) => {\n            return `!${arg}`;\n        }\n    UnarySyntaxTemplate: &UnarySyntaxTemplate null\n    BinarySyntaxTemplate: &BinarySyntaxTemplate !!js/function >\n        (args) => {\n            return args.reduce((s, op, i, arr) => {\n                if (i % 2 === 0) {\n                    return s;\n                }\n                const rhs = arr[i + 1];\n                switch(op) {\n                    case '//':\n                        return `floor(${s})`;\n                    case '**':\n                        return `pow(${s}, ${rhs})`;\n                    default:\n                        return `${s} ${op} ${rhs}`;\n                }\n            }, args[0]);\n        }\n    ParensSyntaxTemplate: &ParensSyntaxTemplate null\n    EosSyntaxTemplate: &EosSyntaxTemplate null\n    EofSyntaxTemplate: &EofSyntaxTemplate null\n    NewTemplate: &NewSyntaxTemplate !!js/function >\n        (expr, skip, code) => {\n            // Add codes of classes that don't need new.\n            // Currently: Decimal128/NumberDecimal, Long/NumberLong, Double, Int32, Number, regex, Date\n            noNew = [112, 106, 104, 105, 2, 8, 200];\n            if (skip || (code && noNew.indexOf(code) !== -1)) {\n                return expr;\n            }\n            return `new ${expr}`;\n        }\n    # BSON Object Type templates\n    CodeTypeTemplate: &CodeTypeTemplate null\n    StringTypeTemplate: &StringTypeTemplate !!js/function >\n        (str) => {\n          let newStr = str;\n          if (\n            (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n            (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n            newStr = str.substr(1, str.length - 2);\n          }\n          return `\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\"`;\n        }\n    RegexTypeTemplate: &RegexTypeTemplate !!js/function >\n        (pattern, flags) => {\n            flags = flags === '' ? '' : `(?${flags})`;\n            // Double escape characters except for slashes\n            const escaped = pattern.replace(/\\\\/, '\\\\\\\\');\n\n            // Double-quote stringify\n            const str = escaped + flags;\n            let newStr = str;\n            if (\n                (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                    newStr = str.substr(1, str.length - 2);\n            }\n            return `Pattern.compile(\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\")`;\n        }\n    BoolTypeTemplate: &BoolTypeTemplate !!js/function >\n        (literal) => {\n            return literal.toLowerCase();\n        }\n    IntegerTypeTemplate: &IntegerTypeTemplate null\n    DecimalTypeTemplate: &DecimalTypeTemplate !!js/function >\n        (literal, type) => {\n            if (type === '_integer' || type === '_long' || type === '_decimal') {\n                return `${literal}d`;\n            }\n            return `(double) ${literal}`;\n        }\n    LongBasicTypeTemplate: &LongBasicTypeTemplate !!js/function >\n        (literal, type) => {\n            if (type === '_integer' || type === '_long') {\n                return `${literal}L`;\n            }\n            return `new Long(${literal})`;\n        }\n    HexTypeTemplate: &HexTypeTemplate null # TODO\n    OctalTypeTemplate: &OctalTypeTemplate !!js/function >\n        (literal, type) => {\n            if ((literal.charAt(0) === '0' && literal.charAt(1) === '0') ||\n                (literal.charAt(0) === '0' && (literal.charAt(1) === 'o' || literal.charAt(1) === 'O'))) {\n              return `0${literal.substr(2, literal.length - 1)}`;\n            }\n            return literal;\n        }\n    NumericTypeTemplate: &NumericTypeTemplate null\n    ArrayTypeTemplate: &ArrayTypeTemplate !!js/function >\n        (literal, depth) => {\n            depth++;\n            // TODO: figure out how to best do depth in an array and where to\n            // insert and indent\n            const indent = '\\n' + '    '.repeat(depth);\n            // have an indent on every ', new Document' in an array not\n            // entirely perfect, but at least makes this more readable/also\n            // compiles\n            const arr = literal.split(', new').join(`, ${indent}new`)\n\n            return `Arrays.asList(${arr})`;\n        }\n    ArrayTypeArgsTemplate: &ArrayTypeArgsTemplate null\n    NullTypeTemplate: &NullTypeTemplate !!js/function >\n        () => {\n            return 'new BsonNull()';\n        }\n    UndefinedTypeTemplate: &UndefinedTypeTemplate !!js/function >\n        () => {\n            return 'new BsonUndefined()';\n        }\n    ObjectTypeTemplate: &ObjectTypeTemplate !!js/function >\n        (literal, depth) => {\n\n            if (literal === '') {\n                return `new Document()`;\n            }\n            return literal;\n        }\n    ObjectTypeArgsTemplate: &ObjectTypeArgsTemplate !!js/function >\n        (args, depth) => {\n            if (args.length === 0) {\n                return 'new Document()';\n            }\n            depth++;\n            const indent = '\\n' + '    '.repeat(depth);\n            const doubleStringify = (str) => {\n                let newStr = str;\n                if (\n                  (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                  (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                    newStr = str.substr(1, str.length - 2);\n                }\n                return `\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\"`;\n            }\n            const start = `new Document(${doubleStringify(args[0][0])}, ${args[0][1]})`;\n\n            args = args.slice(1);\n            const result = args.reduce((str, pair) => {\n                return `${str}${indent}.append(${doubleStringify(pair[0])}, ${pair[1]})`;\n            }, start);\n\n            return `${result}`;\n        }\n    DoubleTypeTemplate: &DoubleTypeTemplate !!js/function >\n        (literal, type) => {\n            if (type === '_integer' || type === '_long' || type === '_decimal') {\n                return `${literal}d`;\n            }\n            return `(double) ${literal}`;\n        }\n    DoubleTypeArgsTemplate: &DoubleTypeArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongTypeTemplate: &LongTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongTypeArgsTemplate: &LongSymbolArgsTemplate null\n    # BSON Object Method templates\n    ObjectIdToStringTemplate: &ObjectIdToStringTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.toHexString()`;\n        }\n    ObjectIdToStringArgsTemplate: &ObjectIdToStringArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    ObjectIdEqualsTemplate: &ObjectIdEqualsTemplate null\n    ObjectIdEqualsArgsTemplate: &ObjectIdEqualsArgsTemplate null\n    ObjectIdGetTimestampTemplate: &ObjectIdGetTimestampTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getTimestamp()`;\n        }\n    ObjectIdGetTimestampArgsTemplate: &ObjectIdGetTimestampArgsTemplate !!js/function >\n            () => {\n                return '';\n            }\n    CodeCodeTemplate: &CodeCodeTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getCode()`;\n        }\n    CodeCodeArgsTemplate: &CodeCodeArgsTemplate null\n    CodeScopeTemplate: &CodeScopeTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getScope()`;\n        }\n    CodeScopeArgsTemplate: &CodeScopeArgsTemplate null\n    BinaryValueTemplate: &BinaryValueTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getData`;\n        }\n    BinaryValueArgsTemplate: &BinaryValueArgsTemplate null\n    BinaryLengthTemplate: &BinaryLengthTemplate null\n    BinaryLengthArgsTemplate: &BinaryLengthArgsTemplate null\n    BinaryToStringTemplate: &BinaryToStringTemplate null\n    BinaryToStringArgsTemplate: &BinaryToStringArgsTemplate null\n    BinarySubtypeTemplate: &BinarySubtypeTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getType()`;\n        }\n    BinarySubtypeArgsTemplate: &BinarySubtypeArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    DBRefGetDBTemplate: &DBRefGetDBTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getDatabaseName()`;\n        }\n    DBRefGetDBArgsTemplate: &DBRefGetDBArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    DBRefGetCollectionTemplate: &DBRefGetCollectionTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getCollectionName()`;\n        }\n    DBRefGetCollectionArgsTemplate: &DBRefGetCollectionArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    DBRefGetIdTemplate: &DBRefGetIdTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getId()`;\n        }\n    DBRefGetIdArgsTemplate: &DBRefGetIdArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongEqualsTemplate: &LongEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} ==`;\n        }\n    LongEqualsArgsTemplate: &LongEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongToStringTemplate: &LongToStringTemplate !!js/function >\n        (lhs) => {\n            return lhs;\n        }\n    LongToStringArgsTemplate: &LongToStringArgsTemplate null\n    LongToIntTemplate: &LongToIntTemplate !!js/function >\n        (lhs) => {\n            return `(int) ${lhs}`;\n        }\n    LongToIntArgsTemplate: &LongToIntArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongToNumberTemplate: &LongToNumberTemplate !!js/function >\n        (lhs) => {\n            return `(double) ${lhs}`;\n        }\n    LongToNumberArgsTemplate: &LongToNumberArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongAddTemplate: &LongAddTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} +`;\n        }\n    LongAddArgsTemplate: &LongAddArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongSubtractTemplate: &LongSubtractTemplate !!js/function >\n        (arg) => {\n            return `${arg} -`;\n        }\n    LongSubtractArgsTemplate: &LongSubtractArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongMultiplyTemplate: &LongMultiplyTemplate !!js/function >\n        (arg) => {\n            return `${arg} *`;\n        }\n    LongMultiplyArgsTemplate: &LongMultiplyArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongDivTemplate: &LongDivTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} /`;\n        }\n    LongDivArgsTemplate: &LongDivArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongModuloTemplate: &LongModuloTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} %`;\n        }\n    LongModuloArgsTemplate: &LongModuloArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongAndTemplate: &LongAndTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} &`;\n        }\n    LongAndArgsTemplate: &LongAndArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongOrTemplate: &LongOrTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} |`;\n        }\n    LongOrArgsTemplate: &LongOrArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongXorTemplate: &LongXorTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} ^`;\n        }\n    LongXorArgsTemplate: &LongXorArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongShiftLeftTemplate: &LongShiftLeftTemplate !!js/function >\n        () => {\n            return 'Long.rotateLeft';\n        }\n    LongShiftLeftArgsTemplate: &LongShiftLeftArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `(${lhs}, ${arg})`;\n        }\n    LongShiftRightTemplate: &LongShiftRightTemplate !!js/function >\n        () => {\n            return 'Long.rotateRight';\n        }\n    LongShiftRightArgsTemplate: &LongShiftRightArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `(${lhs}, ${arg})`;\n        }\n    LongCompareTemplate: &LongCompareTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} -`;\n        }\n    LongCompareArgsTemplate: &LongCompareArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongIsOddTemplate: &LongIsOddTemplate !!js/function >\n        (lhs) => {\n            return `(${lhs} % 2) == 1`;\n        }\n    LongIsOddArgsTemplate: &LongIsOddArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongIsZeroTemplate: &LongIsZeroTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} == 0`;\n        }\n    LongIsZeroArgsTemplate: &LongIsZeroArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongIsNegativeTemplate: &LongIsNegativeTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} < 0`;\n        }\n    LongIsNegativeArgsTemplate: &LongIsNegativeArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongNegateTemplate: &LongNegateTemplate !!js/function >\n        () => {\n            return '-';\n        }\n    LongNegateArgsTemplate: &LongNegateArgsTemplate !!js/function >\n        (lhs) => {\n            return lhs;\n        }\n    LongNotTemplate: &LongNotTemplate !!js/function >\n        () => {\n            return '~';\n        }\n    LongNotArgsTemplate: &LongNotArgsTemplate !!js/function >\n        (lhs) => {\n            return lhs;\n        }\n    LongNotEqualsTemplate: &LongNotEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} !=`;\n        }\n    LongNotEqualsArgsTemplate: &LongNotEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongGreaterThanTemplate: &LongGreaterThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >`;\n        }\n    LongGreaterThanArgsTemplate: &LongGreaterThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongGreaterThanOrEqualTemplate: &LongGreaterThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >=`;\n        }\n    LongGreaterThanOrEqualArgsTemplate: &LongGreaterThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongLessThanTemplate: &LongLessThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <`;\n        }\n    LongLessThanArgsTemplate: &LongLessThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongLessThanOrEqualTemplate: &LongLessThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <=`;\n        }\n    LongLessThanOrEqualArgsTemplate: &LongLessThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongFloatApproxTemplate: &LongFloatApproxTemplate !!js/function >\n        (lhs) => {\n            return `(float) ${lhs}`;\n        }\n    LongTopTemplate: &LongTopTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >> 32`;\n        }\n    LongBottomTemplate: &LongBottomTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} & 0x0000ffff`;\n        }\n    TimestampToStringTemplate: &TimestampToStringTemplate null\n    TimestampToStringArgsTemplate: &TimestampToStringArgsTemplate null\n    TimestampEqualsTemplate: &TimestampEqualsTemplate null\n    TimestampEqualsArgsTemplate: &TimestampEqualsArgsTemplate null\n    TimestampGetLowBitsTemplate: &TimestampGetLowBitsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getTime`;\n        }\n    TimestampGetLowBitsArgsTemplate: &TimestampGetLowBitsArgsTemplate null\n    TimestampGetHighBitsTemplate: &TimestampGetHighBitsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getInc`;\n        }\n    TimestampGetHighBitsArgsTemplate: &TimestampGetHighBitsArgsTemplate null\n    TimestampTTemplate: &TimestampTTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getTime()`;\n        }\n    TimestampITemplate: &TimestampITemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getInc()`;\n        }\n    TimestampAsDateTemplate: &TimestampAsDateTemplate !!js/function >\n        (lhs) => {\n            return `new java.util.Date(${lhs}.getTime())`;\n        }\n    TimestampAsDateArgsTemplate: &TimestampAsDateArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    TimestampCompareTemplate: &TimestampCompareTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.compareTo`;\n        }\n    TimestampCompareArgsTemplate: &TimestampCompareArgsTemplate null\n    TimestampNotEqualsTemplate: &TimestampNotEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.compareTo`;\n        }\n    TimestampNotEqualsArgsTemplate: &TimestampNotEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `(${arg}) != 0`;\n        }\n    TimestampGreaterThanTemplate: &TimestampGreaterThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.compareTo`;\n        }\n    TimestampGreaterThanArgsTemplate: &TimestampGreaterThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `(${arg}) > 0`;\n        }\n    TimestampGreaterThanOrEqualTemplate: &TimestampGreaterThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.compareTo`;\n        }\n    TimestampGreaterThanOrEqualArgsTemplate: &TimestampGreaterThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `(${arg}) >= 0`;\n        }\n    TimestampLessThanTemplate: &TimestampLessThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.compareTo`;\n        }\n    TimestampLessThanArgsTemplate: &TimestampLessThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `(${arg}) < 0`;\n        }\n    TimestampLessThanOrEqualTemplate: &TimestampLessThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.compareTo`;\n        }\n    TimestampLessThanOrEqualArgsTemplate: &TimestampLessThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `(${arg}) <= 0`;\n        }\n    SymbolValueOfTemplate: &SymbolValueOfTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getSymbol`;\n        }\n    SymbolValueOfArgsTemplate: &SymbolValueOfArgsTemplate null\n    SymbolInspectTemplate: &SymbolInspectTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getSymbol`;\n        }\n    SymbolInspectArgsTemplate: &SymbolInspectArgsTemplate null\n    SymbolToStringTemplate: &SymbolToStringTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.toString`;\n        }\n    SymbolToStringArgsTemplate: &SymbolToStringArgsTemplate null\n    # Symbol Templates\n    CodeSymbolTemplate: &CodeSymbolTemplate  !!js/function > # Also has process method\n        () => {\n            return 'Code';\n        }\n    CodeSymbolArgsTemplate: &CodeSymbolArgsTemplate !!js/function > # Also has process method\n        (lhs, code, scope) => {\n          // Double quote stringify\n          let newStr = code === undefined ? '' : code;\n          const str = newStr;\n          if (\n            (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n            (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n            newStr = str.substr(1, str.length - 2);\n          }\n          code = `\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\"`;\n          return (scope === undefined) ? `(${code})` : `WithScope(${code}, ${scope})`;\n        }\n    ObjectIdSymbolTemplate: &ObjectIdSymbolTemplate null\n    ObjectIdSymbolArgsTemplate: &ObjectIdSymbolArgsTemplate !!js/function >\n        (lhs, str) => {\n          if (!str || str.length === 0) {\n            return '()';\n          }\n          let newStr = str;\n          if (\n            (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n            (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n            newStr = str.substr(1, str.length - 2);\n          }\n          return `(\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\")`;\n        }\n    BinarySymbolTemplate: &BinarySymbolTemplate null\n    BinarySymbolArgsTemplate: &BinarySymbolArgsTemplate !!js/function >\n        (lhs, bytes, type) => {\n            const str = bytes;\n            let newStr = str;\n            if (\n              (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n              (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                newStr = str.substr(1, str.length - 2);\n            }\n            bytes = `\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\"`;\n\n            if (type === null) {\n                return `(${bytes}.getBytes(\"UTF-8\"))`;\n            }\n            return `(${type}, ${bytes}.getBytes(\"UTF-8\"))`;\n        }\n    BinarySymbolSubtypeDefaultTemplate: &BinarySymbolSubtypeDefaultTemplate !!js/function >\n        () => {\n            return 'BsonBinarySubType.BINARY';\n        }\n    BinarySymbolSubtypeFunctionTemplate: &BinarySymbolSubtypeFunctionTemplate !!js/function >\n        () => {\n            return 'BsonBinarySubType.FUNCTION';\n        }\n    BinarySymbolSubtypeByteArrayTemplate: &BinarySymbolSubtypeByteArrayTemplate !!js/function >\n        () => {\n            return 'BsonBinarySubType.BINARY';\n        }\n    BinarySymbolSubtypeUuidOldTemplate: &BinarySymbolSubtypeUuidOldTemplate !!js/function >\n        () => {\n            return 'BsonBinarySubType.UUID_LEGACY';\n        }\n    BinarySymbolSubtypeUuidTemplate: &BinarySymbolSubtypeUuidTemplate !!js/function >\n        () => {\n            return 'BsonBinarySubType.UUID_STANDARD';\n        }\n    BinarySymbolSubtypeMd5Template: &BinarySymbolSubtypeMd5Template !!js/function >\n        () => {\n            return 'BsonBinarySubType.MD5';\n        }\n    BinarySymbolSubtypeUserDefinedTemplate: &BinarySymbolSubtypeUserDefinedTemplate !!js/function >\n        () => {\n            return 'BsonBinarySubType.USER_DEFINED';\n        }\n    DBRefSymbolTemplate: &DBRefSymbolTemplate null\n    DBRefSymbolArgsTemplate: &DBRefSymbolArgsTemplate !!js/function >\n        (lhs, coll, id, db) => {\n            const dbstr = db === undefined ? '' : `${db}, `;\n            return `(${dbstr}${coll}, ${id})`;\n        }\n    DoubleSymbolTemplate: &DoubleSymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    DoubleSymbolArgsTemplate: &DoubleSymbolArgsTemplate !!js/function >\n        (lhs, arg, type) => {\n            arg = arg === undefined ? 0 : arg;\n            if (type === '_string') {\n                return `Double.parseDouble(${arg})`;\n            }\n            if (type === '_integer' || type === '_long' || type === '_double' || type === '_decimal') {\n                if (arg.includes('L') || arg.includes('d')) {\n                    return `${arg.substr(0, arg.length - 1)}d`;\n                }\n                return `${arg}d`;\n            }\n            return `(double) ${arg}`;\n        }\n    Int32SymbolTemplate: &Int32SymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    Int32SymbolArgsTemplate: &Int32SymbolArgsTemplate !!js/function >\n        (lhs, arg, type) => {\n            arg = arg === undefined ? 0 : arg;\n            if (type === '_string') {\n                return `Integer.parseInt(${arg})`;\n            }\n            if (type === '_integer' || type === '_long') {\n                if (arg.includes('L') || arg.includes('d')) {\n                    return arg.substr(0, arg.length - 1);\n                }\n                return arg;\n            }\n            return `(int) ${arg}`;\n        }\n    LongSymbolTemplate: &LongSymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongSymbolArgsTemplate: &LongSymbolArgsTemplate !!js/function >\n        (lhs, arg, type) => {\n            arg = arg === undefined ? 0 : arg;\n            if (type === '_string') {\n                return `Long.parseLong(${arg})`;\n            }\n            if (type === '_integer' || type === '_long') {\n                if (arg.includes('d') || arg.includes('L')) {\n                    return `${arg.substr(0, arg.length - 1)}L`;\n                }\n                return `${arg}L`;\n            }\n            return `new Long(${arg})`;\n        }\n    LongSymbolMaxTemplate: &LongSymbolMaxTemplate !!js/function >\n        () => {\n            return 'Long.MAX_VALUE';\n        }\n    LongSymbolMaxArgsTemplate: &LongSymbolMaxArgsTemplate null\n    LongSymbolMinTemplate: &LongSymbolMinTemplate !!js/function >\n        () => {\n            return 'Long.MIN_VALUE';\n        }\n    LongSymbolMinArgsTemplate: &LongSymbolMinArgsTemplate null\n    LongSymbolZeroTemplate: &LongSymbolZeroTemplate !!js/function >\n        () => {\n            return '0L';\n        }\n    LongSymbolZeroArgsTemplate: &LongSymbolZeroArgsTemplate null\n    LongSymbolOneTemplate: &LongSymbolOneTemplate !!js/function >\n        () => {\n            return '1L';\n        }\n    LongSymbolOneArgsTemplate: &LongSymbolOneArgsTemplate null\n    LongSymbolNegOneTemplate: &LongSymbolNegOneTemplate !!js/function >\n        () => {\n            return '-1L';\n        }\n    LongSymbolNegOneArgsTemplate: &LongSymbolNegOneArgsTemplate null\n    LongSymbolFromBitsTemplate: &LongSymbolFromBitsTemplate !!js/function > # Also has process method\n        () => {\n            return '';\n        }\n    LongSymbolFromBitsArgsTemplate: &LongSymbolFromBitsArgsTemplate null\n    LongSymbolFromIntTemplate: &LongSymbolFromIntTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongSymbolFromIntArgsTemplate: &LongSymbolFromIntArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}L`;\n        }\n    LongSymbolFromNumberTemplate: &LongSymbolFromNumberTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongSymbolFromNumberArgsTemplate: &LongSymbolFromNumberArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}L`;\n        }\n    LongSymbolFromStringTemplate: &LongSymbolFromStringTemplate !!js/function >\n        (lhs) => {\n            return `Long.parseLong`;\n        }\n    LongSymbolFromStringArgsTemplate: &LongSymbolFromStringArgsTemplate null\n    MinKeySymbolTemplate: &MinKeySymbolTemplate null\n    MinKeySymbolArgsTemplate: &MinKeySymbolArgsTemplate null\n    MaxKeySymbolTemplate: &MaxKeySymbolTemplate null\n    MaxKeySymbolArgsTemplate: &MaxKeySymbolArgsTemplate null\n    TimestampSymbolTemplate: &TimestampSymbolTemplate !!js/function >\n        () => {\n            return 'BSONTimestamp';\n        }\n    TimestampSymbolArgsTemplate: &TimestampSymbolArgsTemplate !!js/function >\n        (lhs, arg1, arg2) => {\n            return `(${arg1 === undefined ? 0 : arg1}, ${arg2 === undefined ? 0 : arg2})`;\n        }\n    SymbolSymbolTemplate: &SymbolSymbolTemplate !!js/function >\n        () => {\n            return 'Symbol';\n        }\n    SymbolSymbolArgsTemplate: &SymbolSymbolArgsTemplate null\n    BSONRegExpSymbolTemplate: &BSONRegExpSymbolTemplate !!js/function >\n        () => {\n            return 'BsonRegularExpression';\n        }\n    BSONRegExpSymbolArgsTemplate: &BSONRegExpSymbolArgsTemplate !!js/function >\n        (lhs, pattern, flags) => {\n            const doubleStringify = (str) => {\n                let newStr = str;\n                if (\n                  (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                  (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                    newStr = str.substr(1, str.length - 2);\n                }\n                return `\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\"`;\n            }\n            return `(${doubleStringify(pattern)}${flags ? ', ' + doubleStringify(flags) : ''})`;\n        }\n    Decimal128SymbolTemplate: &Decimal128SymbolTemplate !!js/function >\n        () => {\n            return 'Decimal128';\n        }\n    Decimal128SymbolArgsTemplate: &Decimal128SymbolArgsTemplate !!js/function >\n        (_, str) => { // just stringify\n            let newStr = str;\n            if (\n              (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n              (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                newStr = str.substr(1, str.length - 2);\n            }\n            return `.parse(\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\")`;\n        }\n    Decimal128SymbolFromStringTemplate: &Decimal128SymbolFromStringTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.parse`;\n        }\n    Decimal128SymbolFromStringArgsTemplate: &Decimal128SymbolFromStringArgsTemplate null\n    Decimal128ToStringTemplate: &Decimal128ToStringTemplate null\n    Decimal128ToStringArgsTemplate: &Decimal128ToStringArgsTemplate null\n    # BSON Util Templates\n    ObjectIdCreateFromHexStringTemplate: &ObjectIdCreateFromHexStringTemplate !!js/function >\n        () => {\n            return 'new ObjectId';\n        }\n    ObjectIdCreateFromHexStringArgsTemplate: &ObjectIdCreateFromHexStringArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `(${arg})`;\n        }\n    ObjectIdCreateFromTimeTemplate: &ObjectIdCreateFromTimeTemplate !!js/function >\n        () => {\n            return 'new ObjectId';\n        }\n    ObjectIdCreateFromTimeArgsTemplate: &ObjectIdCreateFromTimeArgsTemplate !!js/function >\n        (lhs, arg, isNumber) => {\n            if (isNumber) {\n                return `(new java.util.Date(${arg.replace(/L$/, '000L')}))`;\n            }\n            return `(${arg})`;\n        }\n    ObjectIdIsValidTemplate: &ObjectIdIsValidTemplate !!js/function >\n        () => {\n            return 'ObjectId.isValid';\n        }\n    ObjectIdIsValidArgsTemplate: &ObjectIdIsValidArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `(${arg})`;\n        }\n    # JS Symbol Templates\n    NumberSymbolTemplate: &NumberSymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    NumberSymbolArgsTemplate: &NumberSymbolArgsTemplate !!js/function >\n        (lhs, arg, type) => {\n            arg = arg === undefined ? 0 : arg;\n            if (type === '_string') {\n                return `Double.parseDouble(${arg})`;\n            }\n            if (type === '_integer' || type === '_long' || type === '_decimal') {\n                if (arg.includes('L') || arg.includes('d')) {\n                    return `${arg.substr(0, arg.length - 1)}d`;\n                }\n                return `${arg}d`;\n            }\n            return `(double) ${arg}`;\n        }\n    DateSymbolTemplate: &DateSymbolTemplate !!js/function >\n        () => {\n            return 'java.util.Date';\n        }\n    DateSymbolArgsTemplate: &DateSymbolArgsTemplate !!js/function >\n        (lhs, date, isString) => {\n            let toStr = (d) => d;\n            if (isString) {\n                toStr = (d) => `new SimpleDateFormat(\"EEE MMMMM dd yyyy HH:mm:ss\").format(${d})`;\n            }\n            if (date === null) {\n                return toStr(`new ${lhs}()`);\n            }\n            return toStr(`new ${lhs}(${date.getTime()}L)`);\n        }\n    DateSymbolNowTemplate: &DateSymbolNowTemplate !!js/function >\n        () => {\n            return '';\n        }\n    DateSymbolNowArgsTemplate: &DateSymbolNowArgsTemplate !!js/function >\n        () => {\n            return 'new java.util.Date().getTime()';\n        }\n    RegExpSymbolTemplate: &RegExpSymbolTemplate !!js/function >\n        () => {\n            return 'Pattern';\n        }\n    RegExpSymbolArgsTemplate: &RegExpSymbolArgsTemplate null\n    ImportTemplate: &ImportTemplate null\n    DriverImportTemplate: &DriverImportTemplate !!js/function >\n        () => {\n        return 'import com.mongodb.MongoClient;\\n' +\n            'import com.mongodb.MongoClientURI;\\n' +\n            'import com.mongodb.client.FindIterable;\\n' +\n            'import com.mongodb.client.MongoCollection;\\n' +\n            'import com.mongodb.client.MongoDatabase;\\n' +\n            'import org.bson.conversions.Bson;\\n' +\n            'import java.util.concurrent.TimeUnit;\\n' +\n            'import org.bson.Document;';\n        }\n    0ImportTemplate: &0ImportTemplate null\n    1ImportTemplate: &1ImportTemplate null\n    2ImportTemplate: &2ImportTemplate null\n    3ImportTemplate: &3ImportTemplate null\n    4ImportTemplate: &4ImportTemplate null\n    5ImportTemplate: &5ImportTemplate null\n    6ImportTemplate: &6ImportTemplate null\n    7ImportTemplate: &7ImportTemplate null\n    8ImportTemplate: &8ImportTemplate !!js/function >\n        () => {\n            return 'import java.util.regex.Pattern;';\n        }\n    9ImportTemplate: &9ImportTemplate !!js/function >\n        () => {\n            return 'import java.util.Arrays;';\n        }\n    10ImportTemplate: &10ImportTemplate !!js/function >\n        () => {\n            return 'import org.bson.Document;';\n        }\n    11ImportTemplate: &11ImportTemplate !!js/function >\n        () => {\n            return 'import org.bson.BsonNull;';\n        }\n    12ImportTemplate: &12ImportTemplate !!js/function >\n        () => {\n            return 'import org.bson.BsonUndefined;';\n        }\n    100ImportTemplate: &100ImportTemplate !!js/function >\n        () => {\n            return 'import org.bson.types.Code;';\n        }\n    113ImportTemplate: &113ImportTemplate !!js/function >\n        () => {\n            return 'import org.bson.types.CodeWithScope;';\n        }\n    101ImportTemplate: &101ImportTemplate !!js/function >\n        () => {\n            return 'import org.bson.types.ObjectId;';\n        }\n    102ImportTemplate: &102ImportTemplate !!js/function >\n        () => {\n            return 'import org.bson.types.Binary;';\n        }\n    103ImportTemplate: &103ImportTemplate !!js/function >\n        () => {\n            return 'import com.mongodb.DBRef;';\n        }\n    104ImportTemplate: &104ImportTemplate null\n    105ImportTemplate: &105ImportTemplate null\n    106ImportTemplate: &106ImportTemplate null\n    107ImportTemplate: &107ImportTemplate !!js/function >\n        () => {\n            return 'import org.bson.types.MinKey;';\n        }\n    108ImportTemplate: &108ImportTemplate !!js/function >\n        () => {\n            return 'import org.bson.types.MaxKey;';\n        }\n    109ImportTemplate: &109ImportTemplate !!js/function >\n        () => {\n            return 'import org.bson.BsonRegularExpression;';\n        }\n    110ImportTemplate: &110ImportTemplate !!js/function >\n        () => {\n            return 'import org.bson.types.BSONTimestamp;';\n        }\n    111ImportTemplate: &111ImportTemplate !!js/function >\n        () => {\n            return 'import org.bson.types.Symbol;';\n        }\n    112ImportTemplate: &112ImportTemplate !!js/function >\n        () => {\n            return 'import org.bson.types.Decimal128;';\n        }\n    114ImportTemplate: &114ImportTemplate !!js/function >\n        () => {\n            return 'import org.bson.BsonBinarySubType;';\n        }\n    200ImportTemplate: &200ImportTemplate null\n    201ImportTemplate: &201ImportTemplate !!js/function >\n        () => {\n            return 'import java.text.SimpleDateFormat;';\n        }\n    300ImportTemplate: &300ImportTemplate !!js/function >\n        (classes) => {\n            return classes\n                .filter((f, i) => (classes.indexOf(f) === i && f !== 'options'))\n                .sort()\n                .map((c) => {\n                    return `import static com.mongodb.client.model.Filters.${c};`;\n                }).join('\\n');\n        }\n    301ImportTemplate: &301ImportTemplate !!js/function >\n        (classes) => {\n            return classes\n                .filter((f, i) => (classes.indexOf(f) === i))\n                .sort()\n                .map((c) => {\n                    return `import static com.mongodb.client.model.Aggregates.${c};`;\n                }).join('\\n');\n        }\n    302ImportTemplate: &302ImportTemplate !!js/function >\n        (classes) => {\n            return classes\n                .filter((f, i) => (classes.indexOf(f) === i))\n                .sort()\n                .map((c) => {\n                    return `import static com.mongodb.client.model.Accumulators.${c};`;\n                }).join('\\n');\n        }\n    303ImportTemplate: &303ImportTemplate !!js/function >\n        (classes) => {\n            return classes\n                .filter((f, i) => (classes.indexOf(f) === i))\n                .sort()\n                .map((c) => {\n                    return `import static com.mongodb.client.model.Projections.${c};`;\n                }).join('\\n');\n        }\n    304ImportTemplate: &304ImportTemplate !!js/function >\n        (classes) => {\n            return classes\n                .filter((f, i) => (classes.indexOf(f) === i))\n                .sort()\n                .map((c) => {\n                    return `import static com.mongodb.client.model.Sorts.${c};`;\n                }).join('\\n');\n        }\n    305ImportTemplate: &305ImportTemplate !!js/function >\n        (classes) => {\n            return classes\n                .filter((f, i) => (classes.indexOf(f) === i))\n                .sort()\n                .map((c) => {\n                    return `import com.mongodb.client.model.geojson.${c};`;\n                }).join('\\n');\n        }\n    306ImportTemplate: &306ImportTemplate !!js/function >\n        (classes) => {\n            return classes\n                .filter((f, i) => (classes.indexOf(f) === i))\n                .sort()\n                .map((c) => {\n                    return `import com.mongodb.client.model.${c};`;\n                }).join('\\n');\n        }\n# Universal types\n# Everything inherits from StringType because we haven't implemented any of them.\nBasicTypes:\n    # Universal basic types\n    _bool: &BoolType\n        <<: *__type\n        id: \"_bool\"\n        code: 0\n        template: *BoolTypeTemplate\n    _integer: &IntegerType\n        <<: *__type\n        id: \"_integer\"\n        code: 1\n        template: *IntegerTypeTemplate\n    _long: &LongBasicType\n        <<: *__type\n        id: \"_long\"\n        code: 2\n        template: *LongBasicTypeTemplate\n    _decimal: &DecimalType\n        <<: *__type\n        id: \"_decimal\"\n        code: 3\n        template: *DecimalTypeTemplate\n    _hex: &HexType\n        <<: *__type\n        id: \"_hex\"\n        code: 4\n        template: *HexTypeTemplate\n    _octal: &OctalType\n        <<: *__type\n        id: \"_octal\"\n        code: 5\n        template: *OctalTypeTemplate\n    _numeric: &NumericType\n        <<: *__type\n        id: \"_numeric\"\n        code: 6\n        template: *NumericTypeTemplate\n    _string: &StringType\n        <<: *__type\n        id: \"_string\"\n        code: 7\n        template: *StringTypeTemplate\n    _regex: &RegexType\n        <<: *__type\n        id: \"_regex\"\n        code: 8\n        template: *RegexTypeTemplate\n    _array: &ArrayType\n        <<: *__type\n        id: \"_array\"\n        code: 9\n        template: *ArrayTypeTemplate\n        argsTemplate: *ArrayTypeArgsTemplate\n    _object: &ObjectType\n        <<: *__type\n        id: \"_object\"\n        code: 10\n        template: *ObjectTypeTemplate\n        argsTemplate: *ObjectTypeArgsTemplate\n    _null: &NullType\n        <<: *__type\n        id: \"_null\"\n        code: 11\n        template: *NullTypeTemplate\n    _undefined: &UndefinedType\n        <<: *__type\n        id: \"_undefined\"\n        code: 12\n        template: *UndefinedTypeTemplate\n\nSyntax:\n    equality:\n        template: *EqualitySyntaxTemplate\n    in:\n        template: *InSyntaxTemplate\n    and:\n        template: *AndSyntaxTemplate\n    or:\n        template: *OrSyntaxTemplate\n    not:\n        template: *NotSyntaxTemplate\n    unary:\n        template: *UnarySyntaxTemplate\n    binary:\n        template: *BinarySyntaxTemplate\n    parens:\n        template: *ParensSyntaxTemplate\n    eos:\n        template: *EosSyntaxTemplate\n    eof:\n        template: *EofSyntaxTemplate\n    # The new template takes in expr, and an optional skip argument and optional\n    # id argument. The skip argument is a boolean that if true then doesn't add\n    # new. The code argument is the symbol code being called. The template will check\n    # if it is an exception, i.e. a type that is a constructor but may not use new.\n    new:\n        template: *NewSyntaxTemplate\n    # The regex flags that change symbols between languages can be defined here.\n    # Flags that aren't defined can be left blank and will be ignored.\n    regexFlags: *RegexFlags\n    bsonRegexFlags: *BSONRegexFlags\n    driver: *DriverTemplate\nImports:\n    import:\n        template: *ImportTemplate\n    driver:\n        template: *DriverImportTemplate\n    0:\n        template: *0ImportTemplate\n    1:\n        template: *1ImportTemplate\n    2:\n        template: *2ImportTemplate\n    3:\n        template: *3ImportTemplate\n    4:\n        template: *4ImportTemplate\n    5:\n        template: *5ImportTemplate\n    6:\n        template: *6ImportTemplate\n    7:\n        template: *7ImportTemplate\n    8:\n        template: *8ImportTemplate\n    9:\n        template: *9ImportTemplate\n    10:\n        template: *10ImportTemplate\n    11:\n        template: *11ImportTemplate\n    12:\n        template: *12ImportTemplate\n    100:\n        template: *100ImportTemplate\n    101:\n        template: *101ImportTemplate\n    102:\n        template: *102ImportTemplate\n    103:\n        template: *103ImportTemplate\n    104:\n        template: *104ImportTemplate\n    105:\n        template: *105ImportTemplate\n    106:\n        template: *106ImportTemplate\n    107:\n        template: *107ImportTemplate\n    108:\n        template: *108ImportTemplate\n    109:\n        template: *109ImportTemplate\n    110:\n        template: *110ImportTemplate\n    111:\n        template: *111ImportTemplate\n    112:\n        template: *112ImportTemplate\n    113:\n        template: *113ImportTemplate\n    114:\n        template: *114ImportTemplate\n    200:\n        template: *200ImportTemplate\n    201:\n        template: *201ImportTemplate\n    300:\n        template: *300ImportTemplate\n    301:\n        template: *301ImportTemplate\n    302:\n        template: *302ImportTemplate\n    303:\n        template: *303ImportTemplate\n    304:\n        template: *304ImportTemplate\n    305:\n        template: *305ImportTemplate\n    306:\n        template: *306ImportTemplate\nNativeTypes:\n    Date: &DateType\n        <<: *__type\n        id: \"Date\"\n        code: 200\n        type: *ObjectType\n        attr: {} # TODO: no built-in date methods added yet\n    int: &intType\n        <<: *__type\n        id: \"int\"\n        code: 105\n        type: *IntegerType\n        attr: {}\n    float: &floatType\n        <<: *__type\n        id: \"float\"\n        code: 104\n        type: *IntegerType\n        attr: {}\nBsonTypes:\n    Code: &CodeType\n        <<: *__type\n        id: \"Code\"\n        code: 100\n        type: *ObjectType\n        attr:\n            scope:\n                callable: *var\n                args: null\n                attr: null\n                id: \"scope\"\n                type: *ObjectType\n                template: *CodeScopeTemplate\n                argsTemplate: *CodeScopeArgsTemplate\n    ObjectId: &ObjectIdType\n        <<: *__type\n        id: \"ObjectId\"\n        code: 101\n        type: *ObjectType\n        attr:\n            binary:\n                callable: *var\n                args: null\n                attr: null\n                type: *StringType\n                template: *ObjectIdToStringTemplate\n                argsTemplate: *ObjectIdToStringArgsTemplate\n            generation_time:\n                callable: *var\n                args: null\n                attr: null\n                id: \"db\"\n                type: *DateType\n                template: *ObjectIdGetTimestampTemplate\n                argsTemplate: *ObjectIdGetTimestampArgsTemplate\n    Binary: &BinaryType # Not currently supported\n        <<: *__type\n        id: \"Binary\"\n        code: 102\n        type: *ObjectType\n    DBRef: &DBRefType\n        <<: *__type\n        id: \"DBRef\"\n        code: 103\n        type: *ObjectType\n        attr:\n            database:\n                callable: *var\n                args: null\n                attr: null\n                id: \"db\"\n                type: *StringType\n                template: *DBRefGetDBTemplate\n                argsTemplate: *DBRefGetDBArgsTemplate\n            collection:\n                callable: *var\n                args: null\n                attr: null\n                id: \"collection\"\n                type: *StringType\n                template: *DBRefGetCollectionTemplate\n                argsTemplate: *DBRefGetCollectionArgsTemplate\n            id:\n                callable: *var\n                args: null\n                attr: null\n                id: \"id\"\n                type: *StringType\n                template: *DBRefGetIdTemplate\n                argsTemplate: *DBRefGetIdArgsTemplate\n    Int64: &LongType\n        <<: *__type\n        id: \"Int64\"\n        code: 106\n        type: *ObjectType\n        attr: {}\n    MinKey: &MinKeyType\n        <<: *__type\n        id: \"MinKey\"\n        code: 107\n        type: *ObjectType\n    MaxKey: &MaxKeyType\n        <<: *__type\n        id: \"MaxKey\"\n        code: 108\n        type: *ObjectType\n    Regex: &BSONRegExpType\n        <<: *__type\n        id: \"BSONRegExp\"\n        code: 109\n        type: *ObjectType\n    Timestamp: &TimestampType\n        <<: *__type\n        id: \"Timestamp\"\n        code: 110\n        type: *ObjectType\n        attr:\n            time:\n                callable: *var\n                args: null\n                attr: null\n                id: \"time\"\n                type: *IntegerType\n                template: *TimestampTTemplate\n                argsTemplate: null\n            inc:\n                callable: *var\n                args: null\n                attr: null\n                id: \"inc\"\n                type: *IntegerType\n                template: *TimestampITemplate\n                argsTemplate: null\n            as_datetime:\n                <<: *__func\n                id: \"inc\"\n                type: *DateType\n                template: *TimestampAsDateTemplate\n                argsTemplate: *TimestampAsDateArgsTemplate\n    Decimal128: &Decimal128Type\n        <<: *__type\n        id: \"Decimal128\"\n        code: 112\n        type: *ObjectType\n        attr: {}\nBsonSymbols:\n    Code: &CodeSymbol\n        id: \"Code\"\n        code: 100\n        callable: *constructor\n        args:\n            - [ *StringType ]\n            - [ *ObjectType, null ]\n        namedArgs:\n            scope:\n                default: {}\n                type: [ *ObjectType ]\n        type: *CodeType\n        attr: {}\n        template: *CodeSymbolTemplate\n        argsTemplate: *CodeSymbolArgsTemplate\n    ObjectId: &ObjectIdSymbol\n        id: \"ObjectId\"\n        code: 101\n        callable: *constructor\n        args:\n            - [ *StringType, null ]\n        namedArgs:\n            oid:\n                default: null\n                type: [ *StringType, *ObjectIdType ]\n        type: *ObjectIdType\n        attr:\n            from_datetime:\n                <<: *__func\n                id: \"ObjectIdfrom_datetime\"\n                args:\n                    - [ \"Date\" ]\n                type: *ObjectIdType\n                template: *ObjectIdCreateFromTimeTemplate\n                argsTemplate: *ObjectIdCreateFromTimeArgsTemplate\n            is_valid:\n                <<: *__func\n                id: \"is_valid\"\n                args:\n                    - [ *StringType,  ]\n                type: *BoolType\n                template: *ObjectIdIsValidTemplate\n                argsTemplate: *ObjectIdIsValidArgsTemplate\n        template: *ObjectIdSymbolTemplate\n        argsTemplate: *ObjectIdSymbolArgsTemplate\n    Binary: &BinarySymbol # Not currently supported\n        id: \"Binary\"\n        code: 102\n        callable: *constructor\n        args: null\n        type: *BinaryType\n        attr: {}\n        template: *BinarySymbolTemplate\n        argsTemplate: *BinarySymbolArgsTemplate\n    DBRef:\n        id: \"DBRef\"\n        code: 103\n        callable: *constructor\n        args:\n            - [ *StringType ]\n            - [ *ObjectIdType, *StringType ]\n            - [ *StringType, null ]\n        namedArgs:\n            database:\n                default: null\n                type: [ *StringType ]\n        type: *DBRefType\n        attr: {}\n        template: *DBRefSymbolTemplate\n        argsTemplate: *DBRefSymbolArgsTemplate\n    Int64:\n        id: \"Int64\"\n        code: 106\n        callable: *constructor\n        args:\n            - [ *IntegerType, *StringType, null ]\n        type: *LongType\n        attr: {}\n        template: *LongSymbolTemplate\n        argsTemplate: *LongSymbolArgsTemplate\n    MinKey:\n        id: \"MinKey\"\n        code: 107\n        callable: *constructor\n        args: []\n        type: *MinKeyType\n        attr: {}\n        template: *MinKeySymbolTemplate\n        argsTemplate: *MinKeySymbolArgsTemplate\n    MaxKey:\n        id: \"MaxKey\"\n        code: 108\n        callable: *constructor\n        args: []\n        type: *MaxKeyType\n        attr: {}\n        template: *MaxKeySymbolTemplate\n        argsTemplate: *MaxKeySymbolArgsTemplate\n    Regex:\n        id: \"Regex\"\n        code: 109\n        callable: *constructor\n        args:\n            - [ *StringType ]\n            - [ *StringType, *IntegerType, null ]\n        namedArgs:\n            flags:\n                default: 0\n                type: [ *StringType, *IntegerType ]\n        type: *BSONRegExpType\n        attr:\n            from_native:\n                <<: *__func\n                id: \"from_native\"\n                args:\n                - [ *RegexType ]\n                type: *BSONRegExpType\n                template: null\n                argsTemplate: null\n        template: *BSONRegExpSymbolTemplate\n        argsTemplate: *BSONRegExpSymbolArgsTemplate\n    Timestamp:\n        id: \"Timestamp\"\n        code: 110\n        callable: *constructor\n        args:\n            - [ *IntegerType ]\n            - [ *IntegerType ]\n        type: *TimestampType\n        attr: {}\n        template: *TimestampSymbolTemplate\n        argsTemplate: *TimestampSymbolArgsTemplate\n    Decimal128:\n        id: \"Decimal128\"\n        code: 112\n        callable: *constructor\n        args:\n            - [ *StringType ]\n        type: *Decimal128Type\n        attr: {}\n        template: *Decimal128SymbolTemplate\n        argsTemplate: *Decimal128SymbolArgsTemplate\n\nNativeSymbols:\n    datetime: # Needs process method\n        id: \"datetime\"\n        code: 200\n        callable: *constructor\n        args:\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n        type: *DateType\n        attr: {} # TODO: add more date funcs?\n        template: *DateSymbolTemplate\n        argsTemplate: *DateSymbolArgsTemplate\n    re:\n        id: \"re\"\n        code: 8\n        callable: *var\n        args: null\n        type: null\n        attr:\n            compile:\n                id: \"compile\"\n                code: 8\n                callable: *constructor\n                args:\n                    - [ *StringType ]\n                    - [ *IntegerType, null ]\n                namedArgs:\n                    flags:\n                        default: 0\n                        type: [ *IntegerType ]\n                type: *RegexType\n                attr: {}\n                template: *RegExpSymbolTemplate\n                argsTemplate: *RegExpSymbolArgsTemplate\n            A:\n                <<: *__type\n                id: 're.A'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '256';\n                    }\n            ASCII:\n                <<: *__type\n                id: 're.ASCII'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '256';\n                    }\n            I:\n                <<: *__type\n                id: 're.I'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '2';\n                    }\n            IGNORECASE:\n                <<: *__type\n                id: 're.IGNORECASE'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '2';\n                    }\n            DEBUG:\n                <<: *__type\n                id: 're.DEBUG'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '128';\n                    }\n            L:\n                <<: *__type\n                id: 're.L'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '4';\n                    }\n            LOCAL:\n                <<: *__type\n                id: 're.LOCAL'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '4';\n                    }\n            M:\n                <<: *__type\n                id: 're.M'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '8';\n                    }\n            MULTILINE:\n                <<: *__type\n                id: 're.MULTILINE'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '8';\n                    }\n            S:\n                <<: *__type\n                id: 're.S'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '16';\n                    }\n            DOTALL:\n                <<: *__type\n                id: 're.DOTALL'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '16';\n                    }\n            X:\n                <<: *__type\n                id: 're.X'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '64';\n                    }\n            VERBOSE:\n                <<: *__type\n                id: 're.VERBOSE'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '64';\n                    }\n        template: !!js/function >\n            () => {\n                return '';\n            }\n        argsTemplate: null\n    float:\n        id: \"float\"\n        code: 104\n        callable: *constructor\n        args:\n        - [ *NumericType, *StringType, null ]\n        type: *floatType\n        attr: {}\n        template: *DoubleSymbolTemplate\n        argsTemplate: *DoubleSymbolArgsTemplate\n    int:\n        id: \"int\"\n        code: 105\n        callable: *constructor\n        args:\n        - [ *NumericType, *StringType, null ]\n        type: *intType\n        attr: {}\n        template: *Int32SymbolTemplate\n        argsTemplate: *Int32SymbolArgsTemplate\n"},5879:e=>{e.exports="SymbolTypes:\n    VAR: &var 0\n    CONSTRUCTOR: &constructor 1\n    FUNC: &func 2\n# Internal patterns to save typing\n__type: &__type\n    id: null\n    callable: *var\n    args: null\n    type: null\n    attr: {}\n    template: null\n    argsTemplate: null\n__func: &__func\n    callable: *func\n    args: []\n    attr: {}\n    template: null\n    argsTemplate: null\n\n# Javascript Templates\nTemplates:\n    # Misc\n    RegexFlags: &RegexFlags\n        i: 'i'\n        m: 'm'\n        u: 'u'\n        y: 'y'\n        g: 'g'\n    BSONRegexFlags: &BSONRegexFlags\n        i: 'i'\n        m: 'm'\n        x: 'x'\n        s: 's'\n        l: 'l'\n        u: 'u'\n    # Syntax\n    DriverTemplate: &DriverTemplate !!js/function >\n        (spec) => {\n            const comment = `/*\n         * Requires the MongoDB Node.js Driver\n         * https://mongodb.github.io/node-mongodb-native\n         */`;\n            const translateKey = {\n                project: 'projection'\n            };\n\n            let cmd;\n            let defs;\n            if ('aggregation' in spec) {\n                const agg = spec.aggregation;\n                cmd = `coll.aggregate(agg, (cmdErr, result) => {`;\n                defs = `const agg = ${agg};\\n`;\n            } else {\n                let opts = '';\n                const args = {};\n                Object.keys(spec).forEach((k) => {\n                    if (k !== 'options') {\n                        args[k in translateKey ? translateKey[k] : k] = spec[k];\n                    }\n                });\n\n                if (Object.keys(args).length > 0) {\n                    defs = Object.keys(args).reduce((s, k) => {\n                        if (k !== 'filter') {\n                            if (opts === '') {\n                                opts = `${k}: ${k}`;\n                            } else {\n                                opts = `${opts}, ${k}: ${k}`;\n                            }\n                        }\n                        return `${s}const ${k} = ${args[k]};\\n`;\n                    }, '');\n                    opts = opts === '' ? '' : `, { ${opts} }`;\n                }\n                cmd = `coll.find(filter${opts}, (cmdErr, result) => {`;\n            }\n            return `${comment}\\n\\n${defs}\n        MongoClient.connect(\n          '${spec.options.uri}',\n          { useNewUrlParser: true, useUnifiedTopology: true },\n          function(connectErr, client) {\n            assert.equal(null, connectErr);\n            const coll = client.db('${spec.options.database}').collection('${spec.options.collection}');\n            ${cmd}\n              assert.equal(null, cmdErr);\n            });\n            client.close();\n          });`;\n        }\n    EqualitySyntaxTemplate: &EqualitySyntaxTemplate !!js/function >\n        (lhs, op, rhs) => {\n            if (op.includes('!') || op.includes('not')) {\n                return `${lhs} !== ${rhs}`;\n            } else if (op === '==' || op === '===' || op === 'is') {\n                return `${lhs} === ${rhs}`;\n            }\n            return `${lhs} ${op} ${rhs}`;\n        }\n    InSyntaxTemplate: &InSyntaxTemplate !!js/function >\n        (lhs, op, rhs) => {\n            let str = '!==';\n            if (op.includes('!') || op.includes('not')) {\n                str = '===';\n            }\n            return `${rhs}.indexOf(${lhs}) ${str} -1`\n        }\n    AndSyntaxTemplate: &AndSyntaxTemplate !!js/function >\n        (args) => {\n            return args.join(' && ');\n        }\n    OrSyntaxTemplate: &OrSyntaxTemplate !!js/function >\n        (args) => {\n            return args.join(' || ');\n        }\n    NotSyntaxTemplate: &NotSyntaxTemplate !!js/function >\n        (arg) => {\n            return `!${arg}`;\n        }\n    UnarySyntaxTemplate: &UnarySyntaxTemplate null\n    BinarySyntaxTemplate: &BinarySyntaxTemplate !!js/function >\n        (args) => {\n            return args.reduce((s, op, i, arr) => {\n                if (i % 2 === 0) {\n                    return s;\n                }\n                const rhs = arr[i + 1];\n                switch(op) {\n                    case '//':\n                        return `Math.floor(${s}, ${rhs})`;\n                    case '**':\n                        return `Math.pow(${s}, ${rhs})`;\n                    default:\n                        return `${s} ${op} ${rhs}`;\n                }\n            }, args[0]);\n        }\n    ParensSyntaxTemplate: &ParensSyntaxTemplate null\n    EosSyntaxTemplate: &EosSyntaxTemplate null\n    EofSyntaxTemplate: &EofSyntaxTemplate null\n    NewTemplate: &NewSyntaxTemplate !!js/function >\n        (expr, skip, code) => {\n            // Add classes that don't use \"new\" to array.\n            // So far: [Date.now, Decimal128/NumberDecimal, Long/NumberLong]\n            noNew = [200.1, 112, 106];\n            if (skip || (code && noNew.indexOf(code) !== -1)) {\n                return expr;\n            }\n            return `new ${expr}`;\n        }\n    # BSON Object Type templates\n    CodeTypeTemplate: &CodeTypeTemplate null\n    StringTypeTemplate: &StringTypeTemplate !!js/function >\n        (str) => {\n          let newStr = str;\n          if (\n            (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n            (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n            newStr = str.substr(1, str.length - 2);\n          }\n          return `'${newStr.replace(/\\\\([\\s\\S])|(')/g, '\\\\$1$2')}'`;\n        }\n    RegexTypeTemplate: &RegexTypeTemplate !!js/function >\n        (pattern, flags) => {\n            const str = pattern;\n            let newStr = str;\n            if (\n              (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n              (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                newStr = str.substr(1, str.length - 2);\n            }\n            pattern = `'${newStr.replace(/\\\\([\\s\\S])|(')/g, '\\\\$1$2')}'`;\n            return `RegExp(${pattern}${flags ? ', ' + '\\'' + flags + '\\'': ''})`;\n        }\n    BoolTypeTemplate: &BoolTypeTemplate !!js/function >\n        (literal) => {\n            return literal.toLowerCase();\n        }\n    IntegerTypeTemplate: &IntegerTypeTemplate null\n    DecimalTypeTemplate: &DecimalTypeTemplate null\n    LongBasicTypeTemplate: &LongBasicTypeTemplate null\n    HexTypeTemplate: &HexTypeTemplate null\n    OctalTypeTemplate: &OctalTypeTemplate null\n    NumericTypeTemplate: &NumericTypeTemplate null\n    ArrayTypeTemplate: &ArrayTypeTemplate !!js/function >\n        (literal, depth) => {\n            depth++;\n            if (literal === '') {\n                return '[]'\n            }\n            const indent = '\\n' + '  '.repeat(depth);\n            const closingIndent = '\\n' + '  '.repeat(depth - 1);\n\n            return `[${indent}${literal}${closingIndent}]`;\n        }\n    ArrayTypeArgsTemplate: &ArrayTypeArgsTemplate null\n    NullTypeTemplate: &NullTypeTemplate !!js/function >\n        () => {\n            return 'null';\n        }\n    UndefinedTypeTemplate: &UndefinedTypeTemplate !!js/function >\n        () => {\n            return 'undefined';\n        }\n    ObjectTypeTemplate: &ObjectTypeTemplate !!js/function >\n        (literal) => {\n            if (literal === '') {\n                return '{}';\n            }\n            return literal;\n        }\n    ObjectTypeArgsTemplate: &ObjectTypeArgsTemplate !!js/function >\n        (args, depth) => {\n            if (args.length === 0) {\n                return '{}';\n            }\n            depth++;\n            const indent = '\\n' + '  '.repeat(depth);\n            const closingIndent = '\\n' + '  '.repeat(depth - 1);\n            const singleStringify = (str) => {\n                let newStr = str;\n                if (\n                  (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                  (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                    newStr = str.substr(1, str.length - 2);\n                }\n                return `'${newStr.replace(/\\\\([\\s\\S])|(')/g, '\\\\$1$2')}'`;\n            }\n            const pairs = args.map((arg) => {\n                return `${indent}${singleStringify(arg[0])}: ${arg[1]}`;\n            }).join(', ');\n\n            return `{${pairs}${closingIndent}}`\n        }\n    # BSON Object Method templates\n    CodeCodeTemplate: &CodeCodeTemplate null\n    CodeCodeArgsTemplate: &CodeCodeArgsTemplate null\n    CodeScopeTemplate: &CodeScopeTemplate null\n    CodeScopeArgsTemplate: &CodeScopeArgsTemplate null\n    ObjectIdToStringTemplate: &ObjectIdToStringTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.toString()`;\n        }\n    ObjectIdToStringArgsTemplate: &ObjectIdToStringArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    ObjectIdEqualsTemplate: &ObjectIdEqualsTemplate null\n    ObjectIdEqualsArgsTemplate: &ObjectIdEqualsArgsTemplate null\n    ObjectIdGetTimestampTemplate: &ObjectIdGetTimestampTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getTimestamp()`;\n        }\n    ObjectIdGetTimestampArgsTemplate: &ObjectIdGetTimestampArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    BinaryValueTemplate: &BinaryValueTemplate null\n    BinaryValueArgsTemplate: &BinaryValueArgsTemplate null\n    BinaryLengthTemplate: &BinaryLengthTemplate null\n    BinaryLengthArgsTemplate: &BinaryLengthArgsTemplate null\n    BinaryToStringTemplate: &BinaryToStringTemplate null\n    BinaryToStringArgsTemplate: &BinaryToStringArgsTemplate null\n    BinarySubtypeTemplate: &BinarySubtypeTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.sub_type`;\n        }\n    BinarySubtypeArgsTemplate: &BinarySubtypeArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    DBRefGetDBTemplate: &DBRefGetDBTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.db`;\n        }\n    DBRefGetCollectionTemplate: &DBRefGetCollectionTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.namespace`;\n        }\n    DBRefGetIdTemplate: &DBRefGetIdTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.oid`;\n        }\n    DBRefGetDBArgsTemplate: &DBRefGetDBArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    DBRefGetCollectionArgsTemplate: &DBRefGetCollectionArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    DBRefGetIdArgsTemplate: &DBRefGetIdArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongEqualsTemplate: &LongEqualsTemplate null\n    LongEqualsArgsTemplate: &LongEqualsArgsTemplate null\n    LongToStringTemplate: &LongToStringTemplate null\n    LongToStringArgsTemplate: &LongToStringArgsTemplate null\n    LongToIntTemplate: &LongToIntTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.toInt`;\n        }\n    LongToIntArgsTemplate: &LongToIntArgsTemplate null\n    LongToNumberTemplate: &LongToNumberTemplate null\n    LongToNumberArgsTemplate: &LongToNumberArgsTemplate null\n    LongAddTemplate: &LongAddTemplate null\n    LongAddArgsTemplate: &LongAddArgsTemplate null\n    LongSubtractTemplate: &LongSubtractTemplate null\n    LongSubtractArgsTemplate: &LongSubtractArgsTemplate null\n    LongMultiplyTemplate: &LongMultiplyTemplate null\n    LongMultiplyArgsTemplate: &LongMultiplyArgsTemplate null\n    LongDivTemplate: &LongDivTemplate null\n    LongDivArgsTemplate: &LongDivArgsTemplate null\n    LongModuloTemplate: &LongModuloTemplate null\n    LongModuloArgsTemplate: &LongModuloArgsTemplate null\n    LongAndTemplate: &LongAndTemplate null\n    LongAndArgsTemplate: &LongAndArgsTemplate null\n    LongOrTemplate: &LongOrTemplate null\n    LongOrArgsTemplate: &LongOrArgsTemplate null\n    LongXorTemplate: &LongXorTemplate null\n    LongXorArgsTemplate: &LongXorArgsTemplate null\n    LongShiftLeftTemplate: &LongShiftLeftTemplate null\n    LongShiftLeftArgsTemplate: &LongShiftLeftArgsTemplate null\n    LongShiftRightTemplate: &LongShiftRightTemplate null\n    LongShiftRightArgsTemplate: &LongShiftRightArgsTemplate null\n    LongCompareTemplate: &LongCompareTemplate null\n    LongCompareArgsTemplate: &LongCompareArgsTemplate null\n    LongIsOddTemplate: &LongIsOddTemplate null\n    LongIsOddArgsTemplate: &LongIsOddArgsTemplate null\n    LongIsZeroTemplate: &LongIsZeroTemplate null\n    LongIsZeroArgsTemplate: &LongIsZeroArgsTemplate null\n    LongIsNegativeTemplate: &LongIsNegativeTemplate null\n    LongIsNegativeArgsTemplate: &LongIsNegativeArgsTemplate null\n    LongNegateTemplate: &LongNegateTemplate null\n    LongNegateArgsTemplate: &LongNegateArgsTemplate null\n    LongNotTemplate: &LongNotTemplate null\n    LongNotArgsTemplate: &LongNotArgsTemplate null\n    LongNotEqualsTemplate: &LongNotEqualsTemplate null\n    LongNotEqualsArgsTemplate: &LongNotEqualsArgsTemplate null\n    LongGreaterThanTemplate: &LongGreaterThanTemplate null\n    LongGreaterThanArgsTemplate: &LongGreaterThanArgsTemplate null\n    LongGreaterThanOrEqualTemplate: &LongGreaterThanOrEqualTemplate null\n    LongGreaterThanOrEqualArgsTemplate: &LongGreaterThanOrEqualArgsTemplate null\n    LongLessThanTemplate: &LongLessThanTemplate null\n    LongLessThanArgsTemplate: &LongLessThanArgsTemplate null\n    LongLessThanOrEqualTemplate: &LongLessThanOrEqualTemplate null\n    LongLessThanOrEqualArgsTemplate: &LongLessThanOrEqualArgsTemplate null\n    LongFloatApproxTemplate: &LongFloatApproxTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.toNumber()`;\n        }\n    LongTopTemplate: &LongTopTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getHighBits()`;\n        }\n    LongBottomTemplate: &LongBottomTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getLowBits()`;\n        }\n    TimestampToStringTemplate: &TimestampToStringTemplate null\n    TimestampToStringArgsTemplate: &TimestampToStringArgsTemplate null\n    TimestampEqualsTemplate: &TimestampEqualsTemplate null\n    TimestampEqualsArgsTemplate: &TimestampEqualsArgsTemplate null\n    TimestampGetLowBitsTemplate: &TimestampGetLowBitsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getLowBits`;\n        }\n    TimestampGetLowBitsArgsTemplate: &TimestampGetLowBitsArgsTemplate null\n    TimestampGetHighBitsTemplate: &TimestampGetHighBitsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getHighBits`;\n        }\n    TimestampGetHighBitsArgsTemplate: &TimestampGetHighBitsArgsTemplate null\n    TimestampTTemplate: &TimestampTTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getLowBits()`;\n        }\n    TimestampITemplate: &TimestampITemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getHighBits()`;\n        }\n    TimestampAsDateTemplate: &TimestampAsDateTemplate !!js/function >\n        (lhs) => {\n            return `new Date(${lhs}.getHighBits() * 1000)`;\n        }\n    TimestampAsDateArgsTemplate: &TimestampAsDateArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    TimestampCompareTemplate: &TimestampCompareTemplate null\n    TimestampCompareArgsTemplate: &TimestampCompareArgsTemplate null\n    TimestampNotEqualsTemplate: &TimestampNotEqualsTemplate null\n    TimestampNotEqualsArgsTemplate: &TimestampNotEqualsArgsTemplate null\n    TimestampGreaterThanTemplate: &TimestampGreaterThanTemplate null\n    TimestampGreaterThanArgsTemplate: &TimestampGreaterThanArgsTemplate null\n    TimestampGreaterThanOrEqualTemplate: &TimestampGreaterThanOrEqualTemplate null\n    TimestampGreaterThanOrEqualArgsTemplate: &TimestampGreaterThanOrEqualArgsTemplate null\n    TimestampLessThanTemplate: &TimestampLessThanTemplate null\n    TimestampLessThanArgsTemplate: &TimestampLessThanArgsTemplate null\n    TimestampLessThanOrEqualTemplate: &TimestampLessThanOrEqualTemplate null\n    TimestampLessThanOrEqualArgsTemplate: &TimestampLessThanOrEqualArgsTemplate null\n    SymbolValueOfTemplate: &SymbolValueOfTemplate null\n    SymbolValueOfArgsTemplate: &SymbolValueOfArgsTemplate null\n    SymbolInspectTemplate: &SymbolInspectTemplate null\n    SymbolInspectArgsTemplate: &SymbolInspectArgsTemplate null\n    SymbolToStringTemplate: &SymbolToStringTemplate null\n    SymbolToStringArgsTemplate: &SymbolToStringArgsTemplate null\n    # Symbol Templates\n    CodeSymbolTemplate: &CodeSymbolTemplate null\n    CodeSymbolArgsTemplate: &CodeSymbolArgsTemplate !!js/function >\n        (lhs, code, scope) => {\n            code = code === undefined ? '\\'\\'' : code;\n            scope = scope === undefined ? '' : `, ${scope}`;\n            return `(${code}${scope})`;\n        }\n    ObjectIdSymbolTemplate: &ObjectIdSymbolTemplate null\n    ObjectIdSymbolArgsTemplate: &ObjectIdSymbolArgsTemplate !!js/function >\n        (lhs, str) => {\n          if (!str || str.length === 0) {\n            return '()';\n          }\n          let newStr = str;\n          if (\n            (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n            (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n            newStr = str.substr(1, str.length - 2);\n          }\n          return `('${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}')`;\n        }\n    BinarySymbolTemplate: &BinarySymbolTemplate !!js/function >\n        () => {\n            return 'Binary';\n        }\n    BinarySymbolArgsTemplate: &BinarySymbolArgsTemplate !!js/function >\n        (lhs, buffer, subtype) => {\n            return `(${buffer.toString('base64')}, '${subtype}')`;\n        }\n    BinarySymbolSubtypeDefaultTemplate: &BinarySymbolSubtypeDefaultTemplate null\n    BinarySymbolSubtypeFunctionTemplate: &BinarySymbolSubtypeFunctionTemplate null\n    BinarySymbolSubtypeByteArrayTemplate: &BinarySymbolSubtypeByteArrayTemplate null\n    BinarySymbolSubtypeUuidOldTemplate: &BinarySymbolSubtypeUuidOldTemplate null\n    BinarySymbolSubtypeUuidTemplate: &BinarySymbolSubtypeUuidTemplate null\n    BinarySymbolSubtypeMd5Template: &BinarySymbolSubtypeMd5Template null\n    BinarySymbolSubtypeUserDefinedTemplate: &BinarySymbolSubtypeUserDefinedTemplate null\n    DBRefSymbolTemplate: &DBRefSymbolTemplate null\n    DBRefSymbolArgsTemplate: &DBRefSymbolArgsTemplate null\n    DoubleSymbolTemplate: &DoubleSymbolTemplate !!js/function >\n        () => {\n            return 'Double';\n        }\n    DoubleSymbolArgsTemplate: &DoubleSymbolArgsTemplate null\n    Int32SymbolTemplate: &Int32SymbolTemplate !!js/function >\n        () => {\n            return 'Int32';\n        }\n    Int32SymbolArgsTemplate: &Int32SymbolArgsTemplate !!js/function >\n        (lhs, arg) => {\n            arg = arg === undefined ? 0 : arg;\n            return `(${arg})`;\n        }\n    LongSymbolTemplate: &LongSymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongSymbolArgsTemplate: &LongSymbolArgsTemplate !!js/function >\n        (lhs, arg, type) => {\n            arg = arg === undefined ? 0 : arg;\n            if (type === '_string') {\n                return `Long.fromString(${arg})`;\n            }\n            return `Long.fromNumber(${arg})`;\n        }\n    LongSymbolMaxTemplate: &LongSymbolMaxTemplate null\n    LongSymbolMaxArgsTemplate: &LongSymbolMaxArgsTemplate null\n    LongSymbolMinTemplate: &LongSymbolMinTemplate null\n    LongSymbolMinArgsTemplate: &LongSymbolMinArgsTemplate null\n    LongSymbolZeroTemplate: &LongSymbolZeroTemplate null\n    LongSymbolZeroArgsTemplate: &LongSymbolZeroArgsTemplate null\n    LongSymbolOneTemplate: &LongSymbolOneTemplate null\n    LongSymbolOneArgsTemplate: &LongSymbolOneArgsTemplate null\n    LongSymbolNegOneTemplate: &LongSymbolNegOneTemplate null\n    LongSymbolNegOneArgsTemplate: &LongSymbolNegOneArgsTemplate null\n    LongSymbolFromBitsTemplate: &LongSymbolFromBitsTemplate null\n    LongSymbolFromBitsArgsTemplate: &LongSymbolFromBitsArgsTemplate null\n    LongSymbolFromIntTemplate: &LongSymbolFromIntTemplate null\n    LongSymbolFromIntArgsTemplate: &LongSymbolFromIntArgsTemplate null\n    LongSymbolFromNumberTemplate: &LongSymbolFromNumberTemplate null\n    LongSymbolFromNumberArgsTemplate: &LongSymbolFromNumberArgsTemplate null\n    LongSymbolFromStringTemplate: &LongSymbolFromStringTemplate null\n    LongSymbolFromStringArgsTemplate: &LongSymbolFromStringArgsTemplate null\n    MinKeySymbolTemplate: &MinKeySymbolTemplate null\n    MinKeySymbolArgsTemplate: &MinKeySymbolArgsTemplate null\n    MaxKeySymbolTemplate: &MaxKeySymbolTemplate null\n    MaxKeySymbolArgsTemplate: &MaxKeySymbolArgsTemplate null\n    TimestampSymbolTemplate: &TimestampSymbolTemplate null\n    TimestampSymbolArgsTemplate: &TimestampSymbolArgsTemplate !!js/function >\n        (lhs, arg1, arg2) => {\n            return `(${arg1 === undefined ? 0 : arg1}, ${arg2 === undefined ? 0 : arg2})`;\n        }\n    SymbolSymbolTemplate: &SymbolSymbolTemplate !!js/function >\n        () => {\n            return 'BSONSymbol';\n        }\n    SymbolSymbolArgsTemplate: &SymbolSymbolArgsTemplate null\n    BSONRegExpSymbolTemplate: &BSONRegExpSymbolTemplate !!js/function >\n        () => {\n            return 'BSONRegExp';\n        }\n    BSONRegExpSymbolArgsTemplate: &BSONRegExpSymbolArgsTemplate !!js/function >\n        (lhs, pattern, flags) => {\n            const singleStringify = (str) => {\n                let newStr = str;\n                if (\n                    (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                    (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                    newStr = str.substr(1, str.length - 2);\n                }\n                return `'${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}'`;\n            }\n            return `(${singleStringify(pattern)}${flags ? ', ' + singleStringify(flags) : ''})`;\n        }\n    Decimal128SymbolTemplate: &Decimal128SymbolTemplate !!js/function >\n        () => {\n            return 'Decimal128';\n        }\n    Decimal128SymbolArgsTemplate: &Decimal128SymbolArgsTemplate !!js/function >\n        (lhs, arg) => {\n            arg = arg === undefined ? '0' : arg.toString();\n            if (arg.charAt(0) === '\\'' && arg.charAt(arg.length - 1) === '\\'') {\n                return `.fromString(${arg})`;\n            }\n            return `.fromString('${arg}')`;\n        }\n    Decimal128SymbolFromStringTemplate: &Decimal128SymbolFromStringTemplate null\n    Decimal128SymbolFromStringArgsTemplate: &Decimal128SymbolFromStringArgsTemplate null\n    Decimal128ToStringTemplate: &Decimal128ToStringTemplate null\n    Decimal128ToStringArgsTemplate: &Decimal128ToStringArgsTemplate null\n    # BSON Util Templates\n    ObjectIdCreateFromHexStringTemplate: &ObjectIdCreateFromHexStringTemplate null\n    ObjectIdCreateFromHexStringArgsTemplate: &ObjectIdCreateFromHexStringArgsTemplate null\n    ObjectIdCreateFromTimeTemplate: &ObjectIdCreateFromTimeTemplate !!js/function >\n        () => {\n            return `ObjectId.createFromTime`;\n        }\n    ObjectIdCreateFromTimeArgsTemplate: &ObjectIdCreateFromTimeArgsTemplate !!js/function >\n        (lhs, arg, isNumber) => {\n            if (!isNumber) {\n                return `(${arg}.getTime() / 1000)`;\n            }\n            return `(${arg})`;\n        }\n    ObjectIdIsValidTemplate: &ObjectIdIsValidTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.isValid`;\n        }\n    ObjectIdIsValidArgsTemplate: &ObjectIdIsValidArgsTemplate null\n    # JS Symbol Templates\n    NumberSymbolTemplate: &NumberSymbolTemplate !!js/function >\n        () => {\n            return 'Number';\n        }\n    NumberSymbolArgsTemplate: &NumberSymbolArgsTemplate !!js/function >\n        (lhs, arg) => {\n            arg = arg === undefined ? '0' : arg;\n            return `(${arg})`;\n        }\n    DateSymbolTemplate: &DateSymbolTemplate !!js/function >\n        () => {\n            return 'Date';\n        }\n    DateSymbolArgsTemplate: &DateSymbolArgsTemplate null\n    DateSymbolNowTemplate: &DateSymbolNowTemplate !!js/function >\n        () => {\n            return 'Date.now';\n        }\n    DateSymbolNowArgsTemplate: &DateSymbolNowArgsTemplate null\n    RegExpSymbolTemplate: &RegExpSymbolTemplate !!js/function >\n        () => {\n            return 'RegExp';\n        }\n    RegExpSymbolArgsTemplate: &RegExpSymbolArgsTemplate null\n    ImportTemplate: &ImportTemplate !!js/function >\n        (args) => {\n            const bson = [];\n            const other = [];\n            Object.keys(args).map(\n                (m) => {\n                    if (m > 99 && m < 200) {\n                        bson.push(args[m]);\n                    } else {\n                        other.push(args[m]);\n                    }\n                }\n            );\n            if (bson.length) {\n                other.push(`const {\\n  ${bson.join(',\\n  ')}\\n} = require('mongodb');`);\n            }\n            return other.join('\\n');\n        }\n    DriverImportTemplate: &DriverImportTemplate !!js/function >\n        () => {\n            return `const MongoClient = require('mongodb').MongoClient;\n        const assert = require('assert');`;\n        }\n    0ImportTemplate: &0ImportTemplate null\n    1ImportTemplate: &1ImportTemplate null\n    2ImportTemplate: &2ImportTemplate null\n    3ImportTemplate: &3ImportTemplate null\n    4ImportTemplate: &4ImportTemplate null\n    5ImportTemplate: &5ImportTemplate null\n    6ImportTemplate: &6ImportTemplate null\n    7ImportTemplate: &7ImportTemplate null\n    8ImportTemplate: &8ImportTemplate null\n    9ImportTemplate: &9ImportTemplate null\n    10ImportTemplate: &10ImportTemplate null\n    11ImportTemplate: &11ImportTemplate null\n    12ImportTemplate: &12ImportTemplate null\n    100ImportTemplate: &100ImportTemplate !!js/function >\n        () => {\n            return 'Code';\n        }\n    101ImportTemplate: &101ImportTemplate !!js/function >\n        () => {\n            return 'ObjectId';\n        }\n    102ImportTemplate: &102ImportTemplate !!js/function >\n        () => {\n            return 'Binary';\n        }\n    103ImportTemplate: &103ImportTemplate !!js/function >\n        () => {\n            return 'DBRef';\n        }\n    104ImportTemplate: &104ImportTemplate !!js/function >\n        () => {\n            return 'Double';\n        }\n    105ImportTemplate: &105ImportTemplate !!js/function >\n        () => {\n            return 'Int32';\n        }\n    106ImportTemplate: &106ImportTemplate !!js/function >\n        () => {\n            return 'Long';\n        }\n    107ImportTemplate: &107ImportTemplate !!js/function >\n        () => {\n            return 'MinKey';\n        }\n    108ImportTemplate: &108ImportTemplate !!js/function >\n        () => {\n            return 'MaxKey';\n        }\n    109ImportTemplate: &109ImportTemplate !!js/function >\n        () => {\n            return 'BSONRegExp';\n        }\n    110ImportTemplate: &110ImportTemplate !!js/function >\n        () => {\n            return 'Timestamp';\n        }\n    111ImportTemplate: &111ImportTemplate !!js/function >\n        () => {\n            return 'BSONSymbol';\n        }\n    112ImportTemplate: &112ImportTemplate !!js/function >\n        () => {\n            return 'Decimal128';\n        }\n    113ImportTemplate: &113ImportTemplate null\n    114ImportTemplate: &114ImportTemplate null\n    200ImportTemplate: &200ImportTemplate null\n    201ImportTemplate: &201ImportTemplate null\n    300ImportTemplate: &300ImportTemplate null\n    301ImportTemplate: &301ImportTemplate null\n    302ImportTemplate: &302ImportTemplate null\n    303ImportTemplate: &303ImportTemplate null\n    304ImportTemplate: &304ImportTemplate null\n    305ImportTemplate: &305ImportTemplate null\n    306ImportTemplate: &306ImportTemplate null\n# Universal types\n# Everything inherits from StringType because we haven't implemented any of them.\nBasicTypes:\n    # Universal basic types\n    _bool: &BoolType\n        <<: *__type\n        id: \"_bool\"\n        code: 0\n        template: *BoolTypeTemplate\n    _integer: &IntegerType\n        <<: *__type\n        id: \"_integer\"\n        code: 1\n        template: *IntegerTypeTemplate\n    _long: &LongBasicType\n        <<: *__type\n        id: \"_long\"\n        code: 2\n        template: *LongBasicTypeTemplate\n    _decimal: &DecimalType\n        <<: *__type\n        id: \"_decimal\"\n        code: 3\n        template: *DecimalTypeTemplate\n    _hex: &HexType\n        <<: *__type\n        id: \"_hex\"\n        code: 4\n        template: *HexTypeTemplate\n    _octal: &OctalType\n        <<: *__type\n        id: \"_octal\"\n        code: 5\n        template: *OctalTypeTemplate\n    _numeric: &NumericType\n        <<: *__type\n        id: \"_numeric\"\n        code: 6\n        template: *NumericTypeTemplate\n    _string: &StringType\n        <<: *__type\n        id: \"_string\"\n        code: 7\n        template: *StringTypeTemplate\n    _regex: &RegexType\n        <<: *__type\n        id: \"_regex\"\n        code: 8\n        template: *RegexTypeTemplate\n    _array: &ArrayType\n        <<: *__type\n        id: \"_array\"\n        code: 9\n        template: *ArrayTypeTemplate\n        argsTemplate: *ArrayTypeArgsTemplate\n    _object: &ObjectType\n        <<: *__type\n        id: \"_object\"\n        code: 10\n        template: *ObjectTypeTemplate\n        argsTemplate: *ObjectTypeArgsTemplate\n    _null: &NullType\n        <<: *__type\n        id: \"_null\"\n        code: 11\n        template: *NullTypeTemplate\n    _undefined: &UndefinedType\n        <<: *__type\n        id: \"_undefined\"\n        code: 12\n        template: *UndefinedTypeTemplate\n\nSyntax:\n    equality:\n        template: *EqualitySyntaxTemplate\n    in:\n        template: *InSyntaxTemplate\n    and:\n        template: *AndSyntaxTemplate\n    or:\n        template: *OrSyntaxTemplate\n    not:\n        template: *NotSyntaxTemplate\n    unary:\n        template: *UnarySyntaxTemplate\n    binary:\n        template: *BinarySyntaxTemplate\n    parens:\n        template: *ParensSyntaxTemplate\n    eos:\n        template: *EosSyntaxTemplate\n    eof:\n        template: *EofSyntaxTemplate\n    # The new template takes in expr, and an optional skip argument and optional\n    # id argument. The skip argument is a boolean that if true then doesn't add\n    # new. The code argument is the symbol code being called. The template will check\n    # if it is an exception, i.e. a type that is a constructor but may not use new.\n    new:\n        template: *NewSyntaxTemplate\n    # The regex flags that change symbols between languages can be defined here.\n    # Flags that aren't defined can be left blank and will be ignored.\n    regexFlags: *RegexFlags\n    bsonRegexFlags: *BSONRegexFlags\n    driver: *DriverTemplate\nImports:\n    import:\n        template: *ImportTemplate\n    driver:\n        template: *DriverImportTemplate\n    0:\n        template: *0ImportTemplate\n    1:\n        template: *1ImportTemplate\n    2:\n        template: *2ImportTemplate\n    3:\n        template: *3ImportTemplate\n    4:\n        template: *4ImportTemplate\n    5:\n        template: *5ImportTemplate\n    6:\n        template: *6ImportTemplate\n    7:\n        template: *7ImportTemplate\n    8:\n        template: *8ImportTemplate\n    9:\n        template: *9ImportTemplate\n    10:\n        template: *10ImportTemplate\n    11:\n        template: *11ImportTemplate\n    12:\n        template: *12ImportTemplate\n    100:\n        template: *100ImportTemplate\n    101:\n        template: *101ImportTemplate\n    102:\n        template: *102ImportTemplate\n    103:\n        template: *103ImportTemplate\n    104:\n        template: *104ImportTemplate\n    105:\n        template: *105ImportTemplate\n    106:\n        template: *106ImportTemplate\n    107:\n        template: *107ImportTemplate\n    108:\n        template: *108ImportTemplate\n    109:\n        template: *109ImportTemplate\n    110:\n        template: *110ImportTemplate\n    111:\n        template: *111ImportTemplate\n    112:\n        template: *112ImportTemplate\n    113:\n        template: *113ImportTemplate\n    114:\n        template: *114ImportTemplate\n    200:\n        template: *200ImportTemplate\n    201:\n        template: *201ImportTemplate\n    300:\n        template: *300ImportTemplate\n    301:\n        template: *301ImportTemplate\n    302:\n        template: *302ImportTemplate\n    303:\n        template: *303ImportTemplate\n    304:\n        template: *304ImportTemplate\n    305:\n        template: *305ImportTemplate\n    306:\n        template: *306ImportTemplate\nNativeTypes:\n    Date: &DateType\n        <<: *__type\n        id: \"Date\"\n        code: 200\n        type: *ObjectType\n        attr: {} # TODO: no built-in date methods added yet\n    int: &intType\n        <<: *__type\n        id: \"int\"\n        code: 105\n        type: *IntegerType\n        attr: {}\n    float: &floatType\n        <<: *__type\n        id: \"float\"\n        code: 104\n        type: *IntegerType\n        attr: {}\nBsonTypes:\n    Code: &CodeType\n        <<: *__type\n        id: \"Code\"\n        code: 100\n        type: *ObjectType\n        attr:\n            scope:\n                callable: *var\n                args: null\n                attr: null\n                id: \"scope\"\n                type: *ObjectType\n                template: *CodeScopeTemplate\n                argsTemplate: *CodeScopeArgsTemplate\n    ObjectId: &ObjectIdType\n        <<: *__type\n        id: \"ObjectId\"\n        code: 101\n        type: *ObjectType\n        attr:\n            binary:\n                callable: *var\n                args: null\n                attr: null\n                type: *StringType\n                template: *ObjectIdToStringTemplate\n                argsTemplate: *ObjectIdToStringArgsTemplate\n            generation_time:\n                callable: *var\n                args: null\n                attr: null\n                id: \"db\"\n                type: *DateType\n                template: *ObjectIdGetTimestampTemplate\n                argsTemplate: *ObjectIdGetTimestampArgsTemplate\n    Binary: &BinaryType # Not currently supported\n        <<: *__type\n        id: \"Binary\"\n        code: 102\n        type: *ObjectType\n    DBRef: &DBRefType\n        <<: *__type\n        id: \"DBRef\"\n        code: 103\n        type: *ObjectType\n        attr:\n            database:\n                callable: *var\n                args: null\n                attr: null\n                id: \"db\"\n                type: *StringType\n                template: *DBRefGetDBTemplate\n                argsTemplate: *DBRefGetDBArgsTemplate\n            collection:\n                callable: *var\n                args: null\n                attr: null\n                id: \"collection\"\n                type: *StringType\n                template: *DBRefGetCollectionTemplate\n                argsTemplate: *DBRefGetCollectionArgsTemplate\n            id:\n                callable: *var\n                args: null\n                attr: null\n                id: \"id\"\n                type: *StringType\n                template: *DBRefGetIdTemplate\n                argsTemplate: *DBRefGetIdArgsTemplate\n    Int64: &LongType\n        <<: *__type\n        id: \"Int64\"\n        code: 106\n        type: *ObjectType\n        attr: {}\n    MinKey: &MinKeyType\n        <<: *__type\n        id: \"MinKey\"\n        code: 107\n        type: *ObjectType\n    MaxKey: &MaxKeyType\n        <<: *__type\n        id: \"MaxKey\"\n        code: 108\n        type: *ObjectType\n    Regex: &BSONRegExpType\n        <<: *__type\n        id: \"BSONRegExp\"\n        code: 109\n        type: *ObjectType\n    Timestamp: &TimestampType\n        <<: *__type\n        id: \"Timestamp\"\n        code: 110\n        type: *ObjectType\n        attr:\n            time:\n                callable: *var\n                args: null\n                attr: null\n                id: \"time\"\n                type: *IntegerType\n                template: *TimestampTTemplate\n                argsTemplate: null\n            inc:\n                callable: *var\n                args: null\n                attr: null\n                id: \"inc\"\n                type: *IntegerType\n                template: *TimestampITemplate\n                argsTemplate: null\n            as_datetime:\n                <<: *__func\n                id: \"inc\"\n                type: *DateType\n                template: *TimestampAsDateTemplate\n                argsTemplate: *TimestampAsDateArgsTemplate\n    Decimal128: &Decimal128Type\n        <<: *__type\n        id: \"Decimal128\"\n        code: 112\n        type: *ObjectType\n        attr: {}\nBsonSymbols:\n    Code: &CodeSymbol\n        id: \"Code\"\n        code: 100\n        callable: *constructor\n        args:\n            - [ *StringType ]\n            - [ *ObjectType, null ]\n        namedArgs:\n            scope:\n                default: {}\n                type: [ *ObjectType ]\n        type: *CodeType\n        attr: {}\n        template: *CodeSymbolTemplate\n        argsTemplate: *CodeSymbolArgsTemplate\n    ObjectId: &ObjectIdSymbol\n        id: \"ObjectId\"\n        code: 101\n        callable: *constructor\n        args:\n            - [ *StringType, null ]\n        namedArgs:\n            oid:\n                default: null\n                type: [ *StringType, *ObjectIdType ]\n        type: *ObjectIdType\n        attr:\n            from_datetime:\n                <<: *__func\n                id: \"ObjectIdfrom_datetime\"\n                args:\n                    - [ \"Date\" ]\n                type: *ObjectIdType\n                template: *ObjectIdCreateFromTimeTemplate\n                argsTemplate: *ObjectIdCreateFromTimeArgsTemplate\n            is_valid:\n                <<: *__func\n                id: \"is_valid\"\n                args:\n                    - [ *StringType,  ]\n                type: *BoolType\n                template: *ObjectIdIsValidTemplate\n                argsTemplate: *ObjectIdIsValidArgsTemplate\n        template: *ObjectIdSymbolTemplate\n        argsTemplate: *ObjectIdSymbolArgsTemplate\n    Binary: &BinarySymbol # Not currently supported\n        id: \"Binary\"\n        code: 102\n        callable: *constructor\n        args: null\n        type: *BinaryType\n        attr: {}\n        template: *BinarySymbolTemplate\n        argsTemplate: *BinarySymbolArgsTemplate\n    DBRef:\n        id: \"DBRef\"\n        code: 103\n        callable: *constructor\n        args:\n            - [ *StringType ]\n            - [ *ObjectIdType, *StringType ]\n            - [ *StringType, null ]\n        namedArgs:\n            database:\n                default: null\n                type: [ *StringType ]\n        type: *DBRefType\n        attr: {}\n        template: *DBRefSymbolTemplate\n        argsTemplate: *DBRefSymbolArgsTemplate\n    Int64:\n        id: \"Int64\"\n        code: 106\n        callable: *constructor\n        args:\n            - [ *IntegerType, *StringType, null ]\n        type: *LongType\n        attr: {}\n        template: *LongSymbolTemplate\n        argsTemplate: *LongSymbolArgsTemplate\n    MinKey:\n        id: \"MinKey\"\n        code: 107\n        callable: *constructor\n        args: []\n        type: *MinKeyType\n        attr: {}\n        template: *MinKeySymbolTemplate\n        argsTemplate: *MinKeySymbolArgsTemplate\n    MaxKey:\n        id: \"MaxKey\"\n        code: 108\n        callable: *constructor\n        args: []\n        type: *MaxKeyType\n        attr: {}\n        template: *MaxKeySymbolTemplate\n        argsTemplate: *MaxKeySymbolArgsTemplate\n    Regex:\n        id: \"Regex\"\n        code: 109\n        callable: *constructor\n        args:\n            - [ *StringType ]\n            - [ *StringType, *IntegerType, null ]\n        namedArgs:\n            flags:\n                default: 0\n                type: [ *StringType, *IntegerType ]\n        type: *BSONRegExpType\n        attr:\n            from_native:\n                <<: *__func\n                id: \"from_native\"\n                args:\n                - [ *RegexType ]\n                type: *BSONRegExpType\n                template: null\n                argsTemplate: null\n        template: *BSONRegExpSymbolTemplate\n        argsTemplate: *BSONRegExpSymbolArgsTemplate\n    Timestamp:\n        id: \"Timestamp\"\n        code: 110\n        callable: *constructor\n        args:\n            - [ *IntegerType ]\n            - [ *IntegerType ]\n        type: *TimestampType\n        attr: {}\n        template: *TimestampSymbolTemplate\n        argsTemplate: *TimestampSymbolArgsTemplate\n    Decimal128:\n        id: \"Decimal128\"\n        code: 112\n        callable: *constructor\n        args:\n            - [ *StringType ]\n        type: *Decimal128Type\n        attr: {}\n        template: *Decimal128SymbolTemplate\n        argsTemplate: *Decimal128SymbolArgsTemplate\n\nNativeSymbols:\n    datetime: # Needs process method\n        id: \"datetime\"\n        code: 200\n        callable: *constructor\n        args:\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n        type: *DateType\n        attr: {} # TODO: add more date funcs?\n        template: *DateSymbolTemplate\n        argsTemplate: *DateSymbolArgsTemplate\n    re:\n        id: \"re\"\n        code: 8\n        callable: *var\n        args: null\n        type: null\n        attr:\n            compile:\n                id: \"compile\"\n                code: 8\n                callable: *constructor\n                args:\n                    - [ *StringType ]\n                    - [ *IntegerType, null ]\n                namedArgs:\n                    flags:\n                        default: 0\n                        type: [ *IntegerType ]\n                type: *RegexType\n                attr: {}\n                template: *RegExpSymbolTemplate\n                argsTemplate: *RegExpSymbolArgsTemplate\n            A:\n                <<: *__type\n                id: 're.A'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '256';\n                    }\n            ASCII:\n                <<: *__type\n                id: 're.ASCII'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '256';\n                    }\n            I:\n                <<: *__type\n                id: 're.I'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '2';\n                    }\n            IGNORECASE:\n                <<: *__type\n                id: 're.IGNORECASE'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '2';\n                    }\n            DEBUG:\n                <<: *__type\n                id: 're.DEBUG'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '128';\n                    }\n            L:\n                <<: *__type\n                id: 're.L'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '4';\n                    }\n            LOCAL:\n                <<: *__type\n                id: 're.LOCAL'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '4';\n                    }\n            M:\n                <<: *__type\n                id: 're.M'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '8';\n                    }\n            MULTILINE:\n                <<: *__type\n                id: 're.MULTILINE'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '8';\n                    }\n            S:\n                <<: *__type\n                id: 're.S'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '16';\n                    }\n            DOTALL:\n                <<: *__type\n                id: 're.DOTALL'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '16';\n                    }\n            X:\n                <<: *__type\n                id: 're.X'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '64';\n                    }\n            VERBOSE:\n                <<: *__type\n                id: 're.VERBOSE'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '64';\n                    }\n        template: !!js/function >\n            () => {\n                return '';\n            }\n        argsTemplate: null\n    float:\n        id: \"float\"\n        code: 104\n        callable: *constructor\n        args:\n        - [ *NumericType, *StringType, null ]\n        type: *floatType\n        attr: {}\n        template: *DoubleSymbolTemplate\n        argsTemplate: *DoubleSymbolArgsTemplate\n    int:\n        id: \"int\"\n        code: 105\n        callable: *constructor\n        args:\n        - [ *NumericType, *StringType, null ]\n        type: *intType\n        attr: {}\n        template: *Int32SymbolTemplate\n        argsTemplate: *Int32SymbolArgsTemplate\n"},73127:e=>{e.exports="SymbolTypes:\n    VAR: &var 0\n    CONSTRUCTOR: &constructor 1\n    FUNC: &func 2\n# Internal patterns to save typing\n__type: &__type\n    id: null\n    callable: *var\n    args: null\n    type: null\n    attr: {}\n    template: null\n    argsTemplate: null\n__func: &__func\n    callable: *func\n    args: []\n    attr: {}\n    template: null\n    argsTemplate: null\n\n#############################################\n#             Sample Templates              #\n#                                           #\n# The expected arguments are commented next #\n# to the template itself. Currently all are #\n# set to null, but to define a function     #\n# replace 'null' with '!!js/function > \\n   #\n# and a function defined below.             #\n#                                           #\n# See the other template files for examples #\n#                                           #\n#               Good to know:               #\n# lhs is left-hand-side of the expression   #\n# rhs is right-hand-side of the expression  #\n# All args are strings unless noted         #\n#    - arg? is boolean                      #\n#    - arg# is number                       #\n#                                           #\n#############################################\nTemplates:\n    ########\n    # Misc #\n    ########\n\n    # Filter out regex flags that have translations or are unsupported.\n    RegexFlags: &RegexFlags\n        i: 'i'\n        m: 'm'\n        u: 'u'\n        y: 'y'\n        g: 'g'\n    BSONRegexFlags: &BSONRegexFlags\n        i: 'i'\n        m: 'm'\n        x: 'x'\n        s: 's'\n        l: 'l'\n        u: 'u'\n\n    #############################################\n    #                  Syntax                   #\n    #                                           #\n    # Templates for language syntax expressions #\n    #                                           #\n    #############################################\n\n    DriverTemplate: &DriverTemplate null\n    EqualitySyntaxTemplate: &EqualitySyntaxTemplate !!js/function >\n        (lhs, op, rhs) => {\n            if (op.includes('!') || op.includes('not')) {\n                return lhs !== rhs;\n            }\n            if (op === '==' || op === '===' || op === 'is') {\n                if (typeof(lhs) === 'object' && 'equals' in lhs) {\n                    // Use '.equals' for objects, if it exists.\n                    return lhs.equals(rhs);\n                }\n                return lhs === rhs;\n            }\n            if (op === '>') {\n                return lhs > rhs;\n            }\n            if (op === '<') {\n                return lhs < rhs;\n            }\n            if (op === '>=') {\n                return lhs >= rhs;\n            }\n            if (op === '<=') {\n                return lhs <= rhs;\n            }\n            throw new Error(`unrecognized operation: ${op}`);\n        }\n    InSyntaxTemplate: &InSyntaxTemplate !!js/function >\n        (lhs, op, rhs) => {\n            if (op.includes('!') || op.includes('not')) {\n                if (typeof rhs === 'array') {\n                    return rhs.indexOf(lhs) === -1;\n                }\n                return !(lhs in rhs);\n            }\n            if (typeof rhs === 'array') {\n                return rhs.indexOf(lhs) !== -1;\n            }\n            return lhs in rhs;\n        }\n\n    AndSyntaxTemplate: &AndSyntaxTemplate !!js/function >\n        (args) => {\n            return args.reduce((t, k, i) => {\n                return t && k;\n            });\n        }\n    OrSyntaxTemplate: &OrSyntaxTemplate !!js/function >\n        (args) => {\n            return args.reduce((t, k, i) => {\n                return t || k;\n            });\n        }\n    NotSyntaxTemplate: &NotSyntaxTemplate !!js/function >\n        (arg) => {\n            return !arg;\n        }\n    UnarySyntaxTemplate: &UnarySyntaxTemplate !!js/function >\n        (op, arg) => {\n            switch(op) {\n                case '+':\n                    return +arg;\n                case '-':\n                    return -arg;\n                case '~':\n                    return ~arg;\n                default:\n                    throw new Error(`unrecognized operation: ${op}`);\n            }\n        }\n    BinarySyntaxTemplate: &BinarySyntaxTemplate !!js/function >\n        (args) => {\n            return args.reduce((s, op, i, arr) => {\n                if (i % 2 === 0) {\n                    return s;\n                }\n                const rhs = arr[i + 1];\n                switch(op) {\n                    case '+':\n                        return s + rhs;\n                    case '-':\n                        return s - rhs;\n                    case '*':\n                        return s * rhs;\n                    case '/':\n                        return s / rhs;\n                    case '**':\n                        return Math.pow(s, rhs);\n                    case '//':\n                        return Math.floor(s, rhs);\n                    case '%':\n                        return s % rhs;\n                    case '>>':\n                        return s >> rhs;\n                    case '<<':\n                        return s << rhs;\n                    case '|':\n                        return s | rhs;\n                    case '&':\n                        return s & rhs;\n                    case '^':\n                        return s ^ rhs;\n                    default:\n                        throw new Error(`unrecognized operation: ${op}`);\n                }\n            }, args[0]);\n        }\n    ParensSyntaxTemplate: &ParensSyntaxTemplate !!js/function >\n        (arg) => {\n            return arg;\n        }\n    EosSyntaxTemplate: &EosSyntaxTemplate !!js/function >\n        () => {\n            return 'a unique thing';\n        }\n    EofSyntaxTemplate: &EofSyntaxTemplate !!js/function >\n        () => {\n            return 'a unique thing';\n        }\n    FloorDivTemplate: &FloorDivSyntaxTemplate null # Args: lhs, rhs\n    PowerTemplate: &PowerSyntaxTemplate null # Args: lhs, rhs\n    NewTemplate: &NewSyntaxTemplate null # Args: expression, skip?, code# [to check if meant to be skipped]\n\n    #############################################\n    #               Literal Types               #\n    #                                           #\n    # Templates for literal type instance. Most #\n    # get passed the literal itself as an arg.  #\n    #                                           #\n    #############################################\n    StringTypeTemplate: &StringTypeTemplate !!js/function >\n        (str) => {\n            let newStr = str.toString();\n            if (\n                (newStr.charAt(0) === '\"' && newStr.charAt(newStr.length - 1) === '\"') ||\n                (newStr.charAt(0) === '\\'' && newStr.charAt(newStr.length - 1) === '\\'')\n            ) {\n                newStr = newStr.substr(1, newStr.length - 2);\n            }\n            return newStr;\n        }\n    RegexTypeTemplate: &RegexTypeTemplate !!js/function >\n        (pattern, flags) => {\n            return new RegExp(pattern, flags);\n        }\n    BoolTypeTemplate: &BoolTypeTemplate !!js/function >\n        (str) => {\n            return str.toLowerCase() === 'true';\n        }\n    IntegerTypeTemplate: &IntegerTypeTemplate !!js/function >\n        (arg) => {\n            return parseInt(arg, 10);\n        }\n    DecimalTypeTemplate: &DecimalTypeTemplate !!js/function >\n        (arg) => {\n            return parseFloat(arg);\n        }\n    LongBasicTypeTemplate: &LongBasicTypeTemplate !!js/function >\n        (arg) => {\n            return parseInt(arg, 10);\n        }\n    HexTypeTemplate: &HexTypeTemplate !!js/function >\n        (arg) => {\n            return parseInt(arg, 16);\n        }\n    OctalTypeTemplate: &OctalTypeTemplate !!js/function >\n        (arg) => {\n            arg = arg.replace(/[oO]/g, '')\n            return parseInt(arg, 8);\n        }\n    NumericTypeTemplate: &NumericTypeTemplate !!js/function >\n        (arg) => {\n            if (arg.contains('x')) {\n                return parseInt(arg, 16);\n            }\n            if (arg.contains('o') || arg.startsWith('0')) {\n                arg = arg.replace(/o/g, '')\n                return parseInt(arg, 8);\n            }\n            return parseFloat(arg);\n        }\n    ArrayTypeTemplate: &ArrayTypeTemplate null\n    ArrayTypeArgsTemplate: &ArrayTypeArgsTemplate null # Args: single array element, nestedness, lastElement? (note: not being used atm)\n    NullTypeTemplate: &NullTypeTemplate !!js/function >\n        () => {\n            return null;\n        }\n    UndefinedTypeTemplate: &UndefinedTypeTemplate !!js/function >\n        () => {\n            return undefined;\n        }\n    ObjectTypeTemplate: &ObjectTypeTemplate null # Args: literal (for empty array, is empty string. Otherwise all set)\n    ObjectTypeArgsTemplate: &ObjectTypeArgsTemplate null # Args: single object element [2] (i.e. array with [key, value]), nestedness#\n\n    #############################################\n    #               Symbols                     #\n    #                                           #\n    # Templates for symbols, can be either      #\n    # functions or variables.                   #\n    #                                           #\n    # The *SymbolTemplates return names and     #\n    # usually don't take any arguments. The     #\n    # *SymbolArgsTemplates are invoked for func #\n    # calls. The first argument is always the   #\n    # lhs, i.e. the symbol returned from the    #\n    # corresponding SymbolTemplate. The rest of #\n    # the arguments are the processed arguments #\n    # passed to the original function.          #\n    #                                           #\n    #############################################\n    CodeSymbolTemplate: &CodeSymbolTemplate null # No args\n    CodeSymbolArgsTemplate: &CodeSymbolArgsTemplate null # Args: code, scope\n    ObjectIdSymbolTemplate: &ObjectIdSymbolTemplate null # No args\n    ObjectIdSymbolArgsTemplate: &ObjectIdSymbolArgsTemplate null # Args: lhs, string (can be empty or null for no arg)\n    BinarySymbolTemplate: &BinarySymbolTemplate null\n    BinarySymbolArgsTemplate: &BinarySymbolArgsTemplate null\n    BinarySymbolSubtypeDefaultTemplate: &BinarySymbolSubtypeDefaultTemplate null\n    BinarySymbolSubtypeFunctionTemplate: &BinarySymbolSubtypeFunctionTemplate null\n    BinarySymbolSubtypeByteArrayTemplate: &BinarySymbolSubtypeByteArrayTemplate null\n    BinarySymbolSubtypeUuidOldTemplate: &BinarySymbolSubtypeUuidOldTemplate null\n    BinarySymbolSubtypeUuidTemplate: &BinarySymbolSubtypeUuidTemplate null\n    BinarySymbolSubtypeMd5Template: &BinarySymbolSubtypeMd5Template null\n    BinarySymbolSubtypeUserDefinedTemplate: &BinarySymbolSubtypeUserDefinedTemplate null\n    DBRefSymbolTemplate: &DBRefSymbolTemplate null # No args\n    DBRefSymbolArgsTemplate: &DBRefSymbolArgsTemplate null # Args: lhs, coll, id, db\n    DoubleSymbolTemplate: &DoubleSymbolTemplate null # No args\n    DoubleSymbolArgsTemplate: &DoubleSymbolArgsTemplate null # Args: lhs, arg, argType (i.e. '_string', '_double')\n    Int32SymbolTemplate: &Int32SymbolTemplate null # No args\n    Int32SymbolArgsTemplate: &Int32SymbolArgsTemplate null # Args: lhs, arg, argType\n    LongSymbolTemplate: &LongSymbolTemplate null # No args\n    LongSymbolArgsTemplate: &LongSymbolArgsTemplate !!js/function > # Args: lhs, arg, argType\n        (lhs, arg) => {\n            return lhs.fromNumber(arg);\n        }\n    RegExpSymbolTemplate: &RegExpSymbolTemplate null # No args\n    RegExpSymbolArgsTemplate: &RegExpSymbolArgsTemplate null # Args: lhs, pattern, flags\n    SymbolSymbolTemplate: &SymbolSymbolTemplate null # No args\n    SymbolSymbolArgsTemplate: &SymbolSymbolArgsTemplate null # Args: lhs, arg\n    BSONRegExpSymbolTemplate: &BSONRegExpSymbolTemplate null # No args\n    BSONRegExpSymbolArgsTemplate: &BSONRegExpSymbolArgsTemplate null # Args: lhs, pattern, flags\n    Decimal128SymbolTemplate: &Decimal128SymbolTemplate null # No args\n    Decimal128SymbolArgsTemplate: &Decimal128SymbolArgsTemplate null # Args: lhs, arg\n    MinKeySymbolTemplate: &MinKeySymbolTemplate null # No args\n    MinKeySymbolArgsTemplate: &MinKeySymbolArgsTemplate null # No args\n    MaxKeySymbolTemplate: &MaxKeySymbolTemplate null # No args\n    MaxKeySymbolArgsTemplate: &MaxKeySymbolArgsTemplate null # No args\n    TimestampSymbolTemplate: &TimestampSymbolTemplate null # No args\n    TimestampSymbolArgsTemplate: &TimestampSymbolArgsTemplate null # Args: lhs, low, high\n    # non bson-specific\n    NumberSymbolTemplate: &NumberSymbolTemplate !!js/function >\n        () => {\n            return Number;\n        }\n    NumberSymbolArgsTemplate: &NumberSymbolArgsTemplate null # Args: lhs, arg, argType\n    DateSymbolTemplate: &DateSymbolTemplate null # No args\n    DateSymbolArgsTemplate: &DateSymbolArgsTemplate !!js/function >\n        (lhs, date, isString) => {\n            if (isString) {\n                return date.toString();\n            }\n            return date;\n        }\n\n    #############################################\n    #         Object Attributes/Methods         #\n    #                                           #\n    # These're variables or functions called on #\n    # instantiated objects. For example,        #\n    # ObjectId().isValid() or Timestamp().t     #\n    #                                           #\n    # They follow the same pattern with the\n    # *Template/*ArgsTemplates: usually no args #\n    # to the Template and lhs plus any original #\n    # arguments to the ArgsTemplate.            #\n    #                                           #\n    #############################################\n    CodeCodeTemplate: &CodeCodeTemplate null\n    CodeCodeArgsTemplate: &CodeCodeArgsTemplate null\n    CodeScopeTemplate: &CodeScopeTemplate null\n    CodeScopeArgsTemplate: &CodeScopeArgsTemplate null\n    ObjectIdToStringTemplate: &ObjectIdToStringTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs.toString();\n        }\n    ObjectIdToStringArgsTemplate: &ObjectIdToStringArgsTemplate !!js/function >\n        (lhs) => {\n            return lhs;\n        }\n    ObjectIdEqualsTemplate: &ObjectIdEqualsTemplate !!js/function >\n        (lhs) => {\n            return lhs;\n        }\n    ObjectIdEqualsArgsTemplate: &ObjectIdEqualsArgsTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs.equals(rhs);\n        }\n    ObjectIdGetTimestampTemplate: &ObjectIdGetTimestampTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs.getTimestamp();\n        }\n    ObjectIdGetTimestampArgsTemplate: &ObjectIdGetTimestampArgsTemplate !!js/function >\n        (lhs) => {\n            return lhs;\n        }\n    ObjectIdIsValidTemplate: &ObjectIdIsValidTemplate !!js/function >\n        (lhs, rhs) => {\n            return  lhs.isValid;\n        }\n    ObjectIdIsValidArgsTemplate: &ObjectIdIsValidArgsTemplate null\n    BinaryValueTemplate: &BinaryValueTemplate null\n    BinaryValueArgsTemplate: &BinaryValueArgsTemplate null\n    BinaryLengthTemplate: &BinaryLengthTemplate null\n    BinaryLengthArgsTemplate: &BinaryLengthArgsTemplate null\n    BinaryToStringTemplate: &BinaryToStringTemplate null\n    BinaryToStringArgsTemplate: &BinaryToStringArgsTemplate null\n    BinarySubtypeTemplate: &BinarySubtypeTemplate null\n    BinarySubtypeArgsTemplate: &BinarySubtypeArgsTemplate null\n    DBRefGetDBTemplate: &DBRefGetDBTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs.db;\n        }\n    DBRefGetCollectionTemplate: &DBRefGetCollectionTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs.collection;\n        }\n    DBRefGetIdTemplate: &DBRefGetIdTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs.oid;\n        }\n    DBRefGetDBArgsTemplate: &DBRefGetDBArgsTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs;\n        }\n    DBRefGetCollectionArgsTemplate: &DBRefGetCollectionArgsTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs;\n        }\n    DBRefGetIdArgsTemplate: &DBRefGetIdArgsTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs;\n        }\n    LongEqualsTemplate: &LongEqualsTemplate null\n    LongEqualsArgsTemplate: &LongEqualsArgsTemplate null\n    LongToStringTemplate: &LongToStringTemplate null\n    LongToStringArgsTemplate: &LongToStringArgsTemplate null\n    LongToIntTemplate: &LongToIntTemplate null\n    LongToIntArgsTemplate: &LongToIntArgsTemplate null\n    LongValueOfTemplate: &LongValueOfTemplate null\n    LongValueOfArgsTemplate: &LongValueOfArgsTemplate null\n    LongToNumberTemplate: &LongToNumberTemplate null\n    LongToNumberArgsTemplate: &LongToNumberArgsTemplate null\n    LongAddTemplate: &LongAddTemplate null\n    LongAddArgsTemplate: &LongAddArgsTemplate null\n    LongSubtractTemplate: &LongSubtractTemplate null\n    LongSubtractArgsTemplate: &LongSubtractArgsTemplate null\n    LongMultiplyTemplate: &LongMultiplyTemplate null\n    LongMultiplyArgsTemplate: &LongMultiplyArgsTemplate null\n    LongDivTemplate: &LongDivTemplate null\n    LongDivArgsTemplate: &LongDivArgsTemplate null\n    LongModuloTemplate: &LongModuloTemplate null\n    LongModuloArgsTemplate: &LongModuloArgsTemplate null\n    LongAndTemplate: &LongAndTemplate null\n    LongAndArgsTemplate: &LongAndArgsTemplate null\n    LongOrTemplate: &LongOrTemplate null\n    LongOrArgsTemplate: &LongOrArgsTemplate null\n    LongXorTemplate: &LongXorTemplate null\n    LongXorArgsTemplate: &LongXorArgsTemplate null\n    LongShiftLeftTemplate: &LongShiftLeftTemplate null\n    LongShiftLeftArgsTemplate: &LongShiftLeftArgsTemplate null\n    LongShiftRightTemplate: &LongShiftRightTemplate null\n    LongShiftRightArgsTemplate: &LongShiftRightArgsTemplate null\n    LongCompareTemplate: &LongCompareTemplate null\n    LongCompareArgsTemplate: &LongCompareArgsTemplate null\n    LongIsOddTemplate: &LongIsOddTemplate null\n    LongIsOddArgsTemplate: &LongIsOddArgsTemplate null\n    LongIsZeroTemplate: &LongIsZeroTemplate null\n    LongIsZeroArgsTemplate: &LongIsZeroArgsTemplate null\n    LongIsNegativeTemplate: &LongIsNegativeTemplate null\n    LongIsNegativeArgsTemplate: &LongIsNegativeArgsTemplate null\n    LongNegateTemplate: &LongNegateTemplate null\n    LongNegateArgsTemplate: &LongNegateArgsTemplate null\n    LongNotTemplate: &LongNotTemplate null\n    LongNotArgsTemplate: &LongNotArgsTemplate null\n    LongNotEqualsTemplate: &LongNotEqualsTemplate null\n    LongNotEqualsArgsTemplate: &LongNotEqualsArgsTemplate null\n    LongGreaterThanTemplate: &LongGreaterThanTemplate null\n    LongGreaterThanArgsTemplate: &LongGreaterThanArgsTemplate null\n    LongGreaterThanOrEqualTemplate: &LongGreaterThanOrEqualTemplate null\n    LongGreaterThanOrEqualArgsTemplate: &LongGreaterThanOrEqualArgsTemplate null\n    LongLessThanTemplate: &LongLessThanTemplate null\n    LongLessThanArgsTemplate: &LongLessThanArgsTemplate null\n    LongLessThanOrEqualTemplate: &LongLessThanOrEqualTemplate null\n    LongLessThanOrEqualArgsTemplate: &LongLessThanOrEqualArgsTemplate null\n    LongFloatApproxTemplate: &LongFloatApproxTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs.toNumber();\n        }\n    LongTopTemplate: &LongTopTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs.high;\n        }\n    LongBottomTemplate: &LongBottomTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs.low;\n        }\n    TimestampToStringTemplate: &TimestampToStringTemplate null\n    TimestampToStringArgsTemplate: &TimestampToStringArgsTemplate null\n    TimestampEqualsTemplate: &TimestampEqualsTemplate null\n    TimestampEqualsArgsTemplate: &TimestampEqualsArgsTemplate null\n    TimestampGetLowBitsTemplate: &TimestampGetLowBitsTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs.getLowBits();\n        }\n    TimestampGetLowBitsArgsTemplate: &TimestampGetLowBitsArgsTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs;\n        }\n    TimestampGetHighBitsTemplate: &TimestampGetHighBitsTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs.getHighBits();\n        }\n    TimestampGetHighBitsArgsTemplate: &TimestampGetHighBitsArgsTemplate  !!js/function >\n        (lhs, rhs) => {\n            return lhs;\n        }\n    TimestampTTemplate: &TimestampTTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs.getLowBits();\n        }\n    TimestampITemplate: &TimestampITemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs.getHighBits();\n        }\n    TimestampAsDateTemplate: &TimestampAsDateTemplate !!js/function >\n        (lhs, rhs) => {\n            return new Date(lhs.getHighBits() * 1000);\n        }\n    TimestampAsDateArgsTemplate: &TimestampAsDateArgsTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs;\n        }\n    TimestampCompareTemplate: &TimestampCompareTemplate null\n    TimestampCompareArgsTemplate: &TimestampCompareArgsTemplate null\n    TimestampNotEqualsTemplate: &TimestampNotEqualsTemplate null\n    TimestampNotEqualsArgsTemplate: &TimestampNotEqualsArgsTemplate null\n    TimestampGreaterThanTemplate: &TimestampGreaterThanTemplate null\n    TimestampGreaterThanArgsTemplate: &TimestampGreaterThanArgsTemplate null\n    TimestampGreaterThanOrEqualTemplate: &TimestampGreaterThanOrEqualTemplate null\n    TimestampGreaterThanOrEqualArgsTemplate: &TimestampGreaterThanOrEqualArgsTemplate null\n    TimestampLessThanTemplate: &TimestampLessThanTemplate null\n    TimestampLessThanArgsTemplate: &TimestampLessThanArgsTemplate null\n    TimestampLessThanOrEqualTemplate: &TimestampLessThanOrEqualTemplate null\n    TimestampLessThanOrEqualArgsTemplate: &TimestampLessThanOrEqualArgsTemplate null\n    SymbolValueOfTemplate: &SymbolValueOfTemplate null\n    SymbolValueOfArgsTemplate: &SymbolValueOfArgsTemplate null\n    SymbolInspectTemplate: &SymbolInspectTemplate null\n    SymbolInspectArgsTemplate: &SymbolInspectArgsTemplate null\n    SymbolToStringTemplate: &SymbolToStringTemplate null\n    SymbolToStringArgsTemplate: &SymbolToStringArgsTemplate null\n    Decimal128ToStringTemplate: &Decimal128ToStringTemplate null\n    Decimal128ToStringArgsTemplate: &Decimal128ToStringArgsTemplate null\n    # non bson-specific\n    DateSymbolNowTemplate: &DateSymbolNowTemplate !!js/function >\n        () => {\n            return Date.now;\n        }\n    DateSymbolNowArgsTemplate: &DateSymbolNowArgsTemplate null\n\n    #############################################\n    #         Symbol Attributes/Methods         #\n    #                                           #\n    # These're variables or functions called on #\n    # symbols. Also called bson-utils.          #\n    #                                           #\n    # They are basically the same thing as      #\n    # object attributes/methods, but need to be #\n    # distinguished since they are separate     #\n    # namespaces that happen to have the same   #\n    # name which is v confusing.                #\n    #                                           #\n    # For example, ObjectId().toString() is an  #\n    # object method, while ObjectId.fromString  #\n    # is a symbol attribute. These are two      #\n    # separate ObjectId related namespaces that #\n    # don't overlap.                            #\n    #                                           #\n    #############################################\n    LongSymbolMaxTemplate: &LongSymbolMaxTemplate null\n    LongSymbolMaxArgsTemplate: &LongSymbolMaxArgsTemplate null\n    LongSymbolMinTemplate: &LongSymbolMinTemplate null\n    LongSymbolMinArgsTemplate: &LongSymbolMinArgsTemplate null\n    LongSymbolZeroTemplate: &LongSymbolZeroTemplate null\n    LongSymbolZeroArgsTemplate: &LongSymbolZeroArgsTemplate null\n    LongSymbolOneTemplate: &LongSymbolOneTemplate null\n    LongSymbolOneArgsTemplate: &LongSymbolOneArgsTemplate null\n    LongSymbolNegOneTemplate: &LongSymbolNegOneTemplate null\n    LongSymbolNegOneArgsTemplate: &LongSymbolNegOneArgsTemplate null\n    LongSymbolFromBitsTemplate: &LongSymbolFromBitsTemplate null\n    LongSymbolFromBitsArgsTemplate: &LongSymbolFromBitsArgsTemplate null\n    LongSymbolFromIntTemplate: &LongSymbolFromIntTemplate null\n    LongSymbolFromIntArgsTemplate: &LongSymbolFromIntArgsTemplate null\n    LongSymbolFromNumberTemplate: &LongSymbolFromNumberTemplate null\n    LongSymbolFromNumberArgsTemplate: &LongSymbolFromNumberArgsTemplate null\n    LongSymbolFromStringTemplate: &LongSymbolFromStringTemplate null\n    LongSymbolFromStringArgsTemplate: &LongSymbolFromStringArgsTemplate null\n    Decimal128SymbolFromStringTemplate: &Decimal128SymbolFromStringTemplate null\n    Decimal128SymbolFromStringArgsTemplate: &Decimal128SymbolFromStringArgsTemplate null\n    ObjectIdCreateFromHexStringTemplate: &ObjectIdCreateFromHexStringTemplate null\n    ObjectIdCreateFromHexStringArgsTemplate: &ObjectIdCreateFromHexStringArgsTemplate null\n    ObjectIdCreateFromTimeTemplate: &ObjectIdCreateFromTimeTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs.createFromTime;\n        }\n    ObjectIdCreateFromTimeArgsTemplate: &ObjectIdCreateFromTimeArgsTemplate null\n    # non bson-specific would go here, but there aren't any atm.\n\n    #############################################\n    #                 Imports                   #\n    #                                           #\n    # Each type has a 'code' that is consistent #\n    # between languages. The import templates   #\n    # for each code generate the required       #\n    # statement for each type. No args.         #\n    #                                           #\n    # The ImportTemplate collects everything    #\n    # into one statement.                       #\n    #                                           #\n    #############################################\n    ImportTemplate: &ImportTemplate null\n    DriverImportTemplate: &DriverImportTemplate null\n    0ImportTemplate: &0ImportTemplate null\n    1ImportTemplate: &1ImportTemplate null\n    2ImportTemplate: &2ImportTemplate null\n    3ImportTemplate: &3ImportTemplate null\n    4ImportTemplate: &4ImportTemplate null\n    5ImportTemplate: &5ImportTemplate null\n    6ImportTemplate: &6ImportTemplate null\n    7ImportTemplate: &7ImportTemplate null\n    8ImportTemplate: &8ImportTemplate null\n    9ImportTemplate: &9ImportTemplate null\n    10ImportTemplate: &10ImportTemplate null\n    11ImportTemplate: &11ImportTemplate null\n    12ImportTemplate: &12ImportTemplate null\n    100ImportTemplate: &100ImportTemplate null\n    101ImportTemplate: &101ImportTemplate null\n    102ImportTemplate: &102ImportTemplate null\n    103ImportTemplate: &103ImportTemplate null\n    104ImportTemplate: &104ImportTemplate null\n    105ImportTemplate: &105ImportTemplate null\n    106ImportTemplate: &106ImportTemplate null\n    107ImportTemplate: &107ImportTemplate null\n    108ImportTemplate: &108ImportTemplate null\n    109ImportTemplate: &109ImportTemplate null\n    110ImportTemplate: &110ImportTemplate null\n    111ImportTemplate: &111ImportTemplate null\n    112ImportTemplate: &112ImportTemplate null\n    113ImportTemplate: &113ImportTemplate null\n    114ImportTemplate: &114ImportTemplate null\n    200ImportTemplate: &200ImportTemplate null\n    201ImportTemplate: &201ImportTemplate null\n    300ImportTemplate: &300ImportTemplate null\n    301ImportTemplate: &301ImportTemplate null\n    302ImportTemplate: &302ImportTemplate null\n    303ImportTemplate: &303ImportTemplate null\n    304ImportTemplate: &304ImportTemplate null\n    305ImportTemplate: &305ImportTemplate null\n    306ImportTemplate: &306ImportTemplate null\n# Universal types\n# Everything inherits from StringType because we haven't implemented any of them.\nBasicTypes:\n    # Universal basic types\n    _bool: &BoolType\n        <<: *__type\n        id: \"_bool\"\n        code: 0\n        template: *BoolTypeTemplate\n    _integer: &IntegerType\n        <<: *__type\n        id: \"_integer\"\n        code: 1\n        template: *IntegerTypeTemplate\n    _long: &LongBasicType\n        <<: *__type\n        id: \"_long\"\n        code: 2\n        template: *LongBasicTypeTemplate\n    _decimal: &DecimalType\n        <<: *__type\n        id: \"_decimal\"\n        code: 3\n        template: *DecimalTypeTemplate\n    _hex: &HexType\n        <<: *__type\n        id: \"_hex\"\n        code: 4\n        template: *HexTypeTemplate\n    _octal: &OctalType\n        <<: *__type\n        id: \"_octal\"\n        code: 5\n        template: *OctalTypeTemplate\n    _numeric: &NumericType\n        <<: *__type\n        id: \"_numeric\"\n        code: 6\n        template: *NumericTypeTemplate\n    _string: &StringType\n        <<: *__type\n        id: \"_string\"\n        code: 7\n        template: *StringTypeTemplate\n    _regex: &RegexType\n        <<: *__type\n        id: \"_regex\"\n        code: 8\n        template: *RegexTypeTemplate\n    _array: &ArrayType\n        <<: *__type\n        id: \"_array\"\n        code: 9\n        template: *ArrayTypeTemplate\n        argsTemplate: *ArrayTypeArgsTemplate\n    _object: &ObjectType\n        <<: *__type\n        id: \"_object\"\n        code: 10\n        template: *ObjectTypeTemplate\n        argsTemplate: *ObjectTypeArgsTemplate\n    _null: &NullType\n        <<: *__type\n        id: \"_null\"\n        code: 11\n        template: *NullTypeTemplate\n    _undefined: &UndefinedType\n        <<: *__type\n        id: \"_undefined\"\n        code: 12\n        template: *UndefinedTypeTemplate\n\nSyntax:\n    equality:\n        template: *EqualitySyntaxTemplate\n    in:\n        template: *InSyntaxTemplate\n    and:\n        template: *AndSyntaxTemplate\n    or:\n        template: *OrSyntaxTemplate\n    not:\n        template: *NotSyntaxTemplate\n    unary:\n        template: *UnarySyntaxTemplate\n    binary:\n        template: *BinarySyntaxTemplate\n    parens:\n        template: *ParensSyntaxTemplate\n    eos:\n        template: *EosSyntaxTemplate\n    eof:\n        template: *EofSyntaxTemplate\n    # The new template takes in expr, and an optional skip argument and optional\n    # id argument. The skip argument is a boolean that if true then doesn't add\n    # new. The code argument is the symbol code being called. The template will check\n    # if it is an exception, i.e. a type that is a constructor but may not use new.\n    new:\n        template: *NewSyntaxTemplate\n    # The regex flags that change symbols between languages can be defined here.\n    # Flags that aren't defined can be left blank and will be ignored.\n    regexFlags: *RegexFlags\n    bsonRegexFlags: *BSONRegexFlags\n    driver: *DriverTemplate\nImports:\n    import:\n        template: *ImportTemplate\n    driver:\n        template: *DriverImportTemplate\n    0:\n        template: *0ImportTemplate\n    1:\n        template: *1ImportTemplate\n    2:\n        template: *2ImportTemplate\n    3:\n        template: *3ImportTemplate\n    4:\n        template: *4ImportTemplate\n    5:\n        template: *5ImportTemplate\n    6:\n        template: *6ImportTemplate\n    7:\n        template: *7ImportTemplate\n    8:\n        template: *8ImportTemplate\n    9:\n        template: *9ImportTemplate\n    10:\n        template: *10ImportTemplate\n    11:\n        template: *11ImportTemplate\n    12:\n        template: *12ImportTemplate\n    100:\n        template: *100ImportTemplate\n    101:\n        template: *101ImportTemplate\n    102:\n        template: *102ImportTemplate\n    103:\n        template: *103ImportTemplate\n    104:\n        template: *104ImportTemplate\n    105:\n        template: *105ImportTemplate\n    106:\n        template: *106ImportTemplate\n    107:\n        template: *107ImportTemplate\n    108:\n        template: *108ImportTemplate\n    109:\n        template: *109ImportTemplate\n    110:\n        template: *110ImportTemplate\n    111:\n        template: *111ImportTemplate\n    112:\n        template: *112ImportTemplate\n    113:\n        template: *113ImportTemplate\n    114:\n        template: *114ImportTemplate\n    200:\n        template: *200ImportTemplate\n    201:\n        template: *201ImportTemplate\n    300:\n        template: *300ImportTemplate\n    301:\n        template: *301ImportTemplate\n    302:\n        template: *302ImportTemplate\n    303:\n        template: *303ImportTemplate\n    304:\n        template: *304ImportTemplate\n    305:\n        template: *305ImportTemplate\n    306:\n        template: *306ImportTemplate\nNativeTypes:\n    Date: &DateType\n        <<: *__type\n        id: \"Date\"\n        code: 200\n        type: *ObjectType\n        attr: {} # TODO: no built-in date methods added yet\n    int: &intType\n        <<: *__type\n        id: \"int\"\n        code: 105\n        type: *IntegerType\n        attr: {}\n    float: &floatType\n        <<: *__type\n        id: \"float\"\n        code: 104\n        type: *IntegerType\n        attr: {}\nBsonTypes:\n    Code: &CodeType\n        <<: *__type\n        id: \"Code\"\n        code: 100\n        type: *ObjectType\n        attr:\n            scope:\n                callable: *var\n                args: null\n                attr: null\n                id: \"scope\"\n                type: *ObjectType\n                template: *CodeScopeTemplate\n                argsTemplate: *CodeScopeArgsTemplate\n    ObjectId: &ObjectIdType\n        <<: *__type\n        id: \"ObjectId\"\n        code: 101\n        type: *ObjectType\n        attr:\n            binary:\n                callable: *var\n                args: null\n                attr: null\n                type: *StringType\n                template: *ObjectIdToStringTemplate\n                argsTemplate: *ObjectIdToStringArgsTemplate\n            generation_time:\n                callable: *var\n                args: null\n                attr: null\n                id: \"db\"\n                type: *DateType\n                template: *ObjectIdGetTimestampTemplate\n                argsTemplate: *ObjectIdGetTimestampArgsTemplate\n    Binary: &BinaryType # Not currently supported\n        <<: *__type\n        id: \"Binary\"\n        code: 102\n        type: *ObjectType\n    DBRef: &DBRefType\n        <<: *__type\n        id: \"DBRef\"\n        code: 103\n        type: *ObjectType\n        attr:\n            database:\n                callable: *var\n                args: null\n                attr: null\n                id: \"db\"\n                type: *StringType\n                template: *DBRefGetDBTemplate\n                argsTemplate: *DBRefGetDBArgsTemplate\n            collection:\n                callable: *var\n                args: null\n                attr: null\n                id: \"collection\"\n                type: *StringType\n                template: *DBRefGetCollectionTemplate\n                argsTemplate: *DBRefGetCollectionArgsTemplate\n            id:\n                callable: *var\n                args: null\n                attr: null\n                id: \"id\"\n                type: *StringType\n                template: *DBRefGetIdTemplate\n                argsTemplate: *DBRefGetIdArgsTemplate\n    Int64: &LongType\n        <<: *__type\n        id: \"Int64\"\n        code: 106\n        type: *ObjectType\n        attr: {}\n    MinKey: &MinKeyType\n        <<: *__type\n        id: \"MinKey\"\n        code: 107\n        type: *ObjectType\n    MaxKey: &MaxKeyType\n        <<: *__type\n        id: \"MaxKey\"\n        code: 108\n        type: *ObjectType\n    Regex: &BSONRegExpType\n        <<: *__type\n        id: \"BSONRegExp\"\n        code: 109\n        type: *ObjectType\n    Timestamp: &TimestampType\n        <<: *__type\n        id: \"Timestamp\"\n        code: 110\n        type: *ObjectType\n        attr:\n            time:\n                callable: *var\n                args: null\n                attr: null\n                id: \"time\"\n                type: *IntegerType\n                template: *TimestampTTemplate\n                argsTemplate: null\n            inc:\n                callable: *var\n                args: null\n                attr: null\n                id: \"inc\"\n                type: *IntegerType\n                template: *TimestampITemplate\n                argsTemplate: null\n            as_datetime:\n                <<: *__func\n                id: \"inc\"\n                type: *DateType\n                template: *TimestampAsDateTemplate\n                argsTemplate: *TimestampAsDateArgsTemplate\n    Decimal128: &Decimal128Type\n        <<: *__type\n        id: \"Decimal128\"\n        code: 112\n        type: *ObjectType\n        attr: {}\nBsonSymbols:\n    Code: &CodeSymbol\n        id: \"Code\"\n        code: 100\n        callable: *constructor\n        args:\n            - [ *StringType ]\n            - [ *ObjectType, null ]\n        namedArgs:\n            scope:\n                default: {}\n                type: [ *ObjectType ]\n        type: *CodeType\n        attr: {}\n        template: *CodeSymbolTemplate\n        argsTemplate: *CodeSymbolArgsTemplate\n    ObjectId: &ObjectIdSymbol\n        id: \"ObjectId\"\n        code: 101\n        callable: *constructor\n        args:\n            - [ *StringType, null ]\n        namedArgs:\n            oid:\n                default: null\n                type: [ *StringType, *ObjectIdType ]\n        type: *ObjectIdType\n        attr:\n            from_datetime:\n                <<: *__func\n                id: \"ObjectIdfrom_datetime\"\n                args:\n                    - [ \"Date\" ]\n                type: *ObjectIdType\n                template: *ObjectIdCreateFromTimeTemplate\n                argsTemplate: *ObjectIdCreateFromTimeArgsTemplate\n            is_valid:\n                <<: *__func\n                id: \"is_valid\"\n                args:\n                    - [ *StringType,  ]\n                type: *BoolType\n                template: *ObjectIdIsValidTemplate\n                argsTemplate: *ObjectIdIsValidArgsTemplate\n        template: *ObjectIdSymbolTemplate\n        argsTemplate: *ObjectIdSymbolArgsTemplate\n    Binary: &BinarySymbol # Not currently supported\n        id: \"Binary\"\n        code: 102\n        callable: *constructor\n        args: null\n        type: *BinaryType\n        attr: {}\n        template: *BinarySymbolTemplate\n        argsTemplate: *BinarySymbolArgsTemplate\n    DBRef:\n        id: \"DBRef\"\n        code: 103\n        callable: *constructor\n        args:\n            - [ *StringType ]\n            - [ *ObjectIdType, *StringType ]\n            - [ *StringType, null ]\n        namedArgs:\n            database:\n                default: null\n                type: [ *StringType ]\n        type: *DBRefType\n        attr: {}\n        template: *DBRefSymbolTemplate\n        argsTemplate: *DBRefSymbolArgsTemplate\n    Int64:\n        id: \"Int64\"\n        code: 106\n        callable: *constructor\n        args:\n            - [ *IntegerType, *StringType, null ]\n        type: *LongType\n        attr: {}\n        template: *LongSymbolTemplate\n        argsTemplate: *LongSymbolArgsTemplate\n    MinKey:\n        id: \"MinKey\"\n        code: 107\n        callable: *constructor\n        args: []\n        type: *MinKeyType\n        attr: {}\n        template: *MinKeySymbolTemplate\n        argsTemplate: *MinKeySymbolArgsTemplate\n    MaxKey:\n        id: \"MaxKey\"\n        code: 108\n        callable: *constructor\n        args: []\n        type: *MaxKeyType\n        attr: {}\n        template: *MaxKeySymbolTemplate\n        argsTemplate: *MaxKeySymbolArgsTemplate\n    Regex:\n        id: \"Regex\"\n        code: 109\n        callable: *constructor\n        args:\n            - [ *StringType ]\n            - [ *StringType, *IntegerType, null ]\n        namedArgs:\n            flags:\n                default: 0\n                type: [ *StringType, *IntegerType ]\n        type: *BSONRegExpType\n        attr:\n            from_native:\n                <<: *__func\n                id: \"from_native\"\n                args:\n                - [ *RegexType ]\n                type: *BSONRegExpType\n                template: null\n                argsTemplate: null\n        template: *BSONRegExpSymbolTemplate\n        argsTemplate: *BSONRegExpSymbolArgsTemplate\n    Timestamp:\n        id: \"Timestamp\"\n        code: 110\n        callable: *constructor\n        args:\n            - [ *IntegerType ]\n            - [ *IntegerType ]\n        type: *TimestampType\n        attr: {}\n        template: *TimestampSymbolTemplate\n        argsTemplate: *TimestampSymbolArgsTemplate\n    Decimal128:\n        id: \"Decimal128\"\n        code: 112\n        callable: *constructor\n        args:\n            - [ *StringType ]\n        type: *Decimal128Type\n        attr: {}\n        template: *Decimal128SymbolTemplate\n        argsTemplate: *Decimal128SymbolArgsTemplate\n\nNativeSymbols:\n    datetime: # Needs process method\n        id: \"datetime\"\n        code: 200\n        callable: *constructor\n        args:\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n        type: *DateType\n        attr: {} # TODO: add more date funcs?\n        template: *DateSymbolTemplate\n        argsTemplate: *DateSymbolArgsTemplate\n    re:\n        id: \"re\"\n        code: 8\n        callable: *var\n        args: null\n        type: null\n        attr:\n            compile:\n                id: \"compile\"\n                code: 8\n                callable: *constructor\n                args:\n                    - [ *StringType ]\n                    - [ *IntegerType, null ]\n                namedArgs:\n                    flags:\n                        default: 0\n                        type: [ *IntegerType ]\n                type: *RegexType\n                attr: {}\n                template: *RegExpSymbolTemplate\n                argsTemplate: *RegExpSymbolArgsTemplate\n            A:\n                <<: *__type\n                id: 're.A'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '256';\n                    }\n            ASCII:\n                <<: *__type\n                id: 're.ASCII'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '256';\n                    }\n            I:\n                <<: *__type\n                id: 're.I'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '2';\n                    }\n            IGNORECASE:\n                <<: *__type\n                id: 're.IGNORECASE'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '2';\n                    }\n            DEBUG:\n                <<: *__type\n                id: 're.DEBUG'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '128';\n                    }\n            L:\n                <<: *__type\n                id: 're.L'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '4';\n                    }\n            LOCAL:\n                <<: *__type\n                id: 're.LOCAL'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '4';\n                    }\n            M:\n                <<: *__type\n                id: 're.M'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '8';\n                    }\n            MULTILINE:\n                <<: *__type\n                id: 're.MULTILINE'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '8';\n                    }\n            S:\n                <<: *__type\n                id: 're.S'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '16';\n                    }\n            DOTALL:\n                <<: *__type\n                id: 're.DOTALL'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '16';\n                    }\n            X:\n                <<: *__type\n                id: 're.X'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '64';\n                    }\n            VERBOSE:\n                <<: *__type\n                id: 're.VERBOSE'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '64';\n                    }\n        template: !!js/function >\n            () => {\n                return '';\n            }\n        argsTemplate: null\n    float:\n        id: \"float\"\n        code: 104\n        callable: *constructor\n        args:\n        - [ *NumericType, *StringType, null ]\n        type: *floatType\n        attr: {}\n        template: *DoubleSymbolTemplate\n        argsTemplate: *DoubleSymbolArgsTemplate\n    int:\n        id: \"int\"\n        code: 105\n        callable: *constructor\n        args:\n        - [ *NumericType, *StringType, null ]\n        type: *intType\n        attr: {}\n        template: *Int32SymbolTemplate\n        argsTemplate: *Int32SymbolArgsTemplate\n"},44002:e=>{e.exports="SymbolTypes:\n    VAR: &var 0\n    CONSTRUCTOR: &constructor 1\n    FUNC: &func 2\n# Internal patterns to save typing\n__type: &__type\n    id: null\n    callable: *var\n    args: null\n    type: null\n    attr: {}\n    template: null\n    argsTemplate: null\n__func: &__func\n    callable: *func\n    args: []\n    attr: {}\n    template: null\n    argsTemplate: null\n\n#############################################\n#             Sample Templates              #\n#                                           #\n# The expected arguments are commented next #\n# to the template itself. Currently all are #\n# set to null, but to define a function     #\n# replace 'null' with '!!js/function > \\n   #\n# and a function defined below.             #\n#                                           #\n# See the other template files for examples #\n#                                           #\n#               Good to know:               #\n# lhs is left-hand-side of the expression   #\n# rhs is right-hand-side of the expression  #\n# All args are strings unless noted         #\n#    - arg? is boolean                      #\n#    - arg# is number                       #\n#                                           #\n#############################################\nTemplates:\n    ########\n    # Misc #\n    ########\n\n    # Filter out regex flags that have translations or are unsupported.\n    RegexFlags: &RegexFlags\n        i: 'i'\n        m: 'm'\n        u: ''\n        y: ''\n        g: ''\n    BSONRegexFlags: &BSONRegexFlags\n        i: 'i'\n        m: 'm'\n        x: 'x'\n        s: ''\n        l: ''\n        u: ''\n\n    #############################################\n    #                  Syntax                   #\n    #                                           #\n    # Templates for language syntax expressions #\n    #                                           #\n    #############################################\n\n    DriverTemplate: &DriverTemplate !!js/function >\n        (spec) => {\n            comment = '# Requires the MongoDB Ruby Driver\\n# https://docs.mongodb.com/ruby-driver/master/';\n\n            const getKey = k => {\n                let translateKey = {\n                    project: 'projection',\n                    maxTimeMS: 'max_time_ms'\n                }\n                return k in translateKey ? translateKey[k] : k\n            };\n            const options = spec.options;\n            const filter = spec.filter || {}\n            delete spec.options;\n            delete spec.filter\n\n            const connect = `client = Mongo::Client.new('${options.uri}', :database => '${options.database}')`;\n            const coll = `client.database['${options.collection}']`;\n\n            if ('aggregation' in spec) {\n                return `${comment}\\n\\n${connect}\\nresult = ${coll}.aggregate(${spec.aggregation})`;\n            }\n\n            const vars = Object.keys(spec).reduce(\n                (result, k) => {\n                    return `${result}\\n${getKey(k)} = ${spec[k]}`;\n                },\n                connect\n            );\n\n            const args = Object.keys(spec).reduce(\n                (result, k) => {\n                    const divider = result === '' ? '' : ',\\n';\n                    return `${result}${divider}  ${getKey(k)}: ${getKey(k)}`;\n                },\n                ''\n            );\n\n            const cmd = `result = ${coll}.find(${filter}${args ? `, {\\n${args}\\n}` : ''})`;\n\n            return `${comment}\\n\\n${vars}\\n\\n${cmd}`;\n        }\n    EqualitySyntaxTemplate: &EqualitySyntaxTemplate !!js/function >\n        (lhs, op, rhs) => {\n            if (op.includes('is')) {\n                let not = op.includes('not') ? '!' : ''\n                return `${not}${lhs}.equal?(${rhs})`\n            } else if (op.includes('!') || op.includes('not')) {\n                return `${lhs} != ${rhs}`;\n            } else if (op === '==' || op === '===') {\n                return `${lhs} == ${rhs}`;\n            }\n            return `${lhs} ${op} ${rhs}`;\n        }\n    InSyntaxTemplate: &InSyntaxTemplate !!js/function >\n        (lhs, op, rhs) => {\n            let str = '';\n            if (op.includes('!') || op.includes('not')) {\n                str = '!';\n            }\n            return `${str}${rhs}.include?(${lhs})`\n        }\n    AndSyntaxTemplate: &AndSyntaxTemplate !!js/function >\n        (args) => {\n            return args.join(' && ');\n        }\n    OrSyntaxTemplate: &OrSyntaxTemplate !!js/function >\n        (args) => {\n            return args.join(' || ');\n        }\n    NotSyntaxTemplate: &NotSyntaxTemplate !!js/function >\n        (arg) => {\n            return `!${arg}`;\n        }\n    UnarySyntaxTemplate: &UnarySyntaxTemplate null\n    BinarySyntaxTemplate: &BinarySyntaxTemplate !!js/function >\n        (args) => {\n            return args.reduce((s, op, i, arr) => {\n                if (i % 2 === 0) {\n                    return s;\n                }\n                const rhs = arr[i + 1];\n                switch(op) {\n                    case '//':\n                        return `${s}.div(${rhs})`;\n                    case '**':\n                        return `${s} ** ${rhs}`;\n                    default:\n                        return `${s} ${op} ${rhs}`;\n                }\n            }, args[0]);\n        }\n    ParensSyntaxTemplate: &ParensSyntaxTemplate null\n    EosTemplate: &EosSyntaxTemplate null # No args. End-of-line\n    EofTemplate: &EofSyntaxTemplate null # No args. End-of-file\n    FloorDivTemplate: &FloorDivSyntaxTemplate null # Args: lhs, rhs\n    PowerTemplate: &PowerSyntaxTemplate null # Args: lhs, rhs\n    NewTemplate: &NewSyntaxTemplate null # Args: expression, skip?, code# [to check if meant to be skipped]\n\n    #############################################\n    #               Literal Types               #\n    #                                           #\n    # Templates for literal type instance. Most #\n    # get passed the literal itself as an arg.  #\n    #                                           #\n    #############################################\n    StringTypeTemplate: &StringTypeTemplate  !!js/function >\n        (str) => {\n          let newStr = str;\n          if (\n            (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n            (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n            newStr = str.substr(1, str.length - 2);\n          }\n          return `'${newStr.replace(/\\\\([\\s\\S])|(')/g, '\\\\$1$2')}'`;\n        }\n    RegexTypeTemplate: &RegexTypeTemplate !!js/function >\n        (pattern, flags) => {\n            const str = pattern;\n            let newStr = str;\n            if (\n                (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                newStr = str.substr(1, str.length - 2);\n            }\n            pattern = `${newStr.replace(/\\\\([\\s\\S])/g, '\\\\$1')}`;\n            return `/${pattern}/${flags ? flags : ''}`;\n        }\n    BoolTypeTemplate: &BoolTypeTemplate !!js/function >\n        (literal) => {\n            return literal.toLowerCase();\n        }\n    IntegerTypeTemplate: &IntegerTypeTemplate null # args: literal, argType (i.e. '_string', '_decimal' etc)\n    DecimalTypeTemplate: &DecimalTypeTemplate null # args: literal, argType\n    LongBasicTypeTemplate: &LongBasicTypeTemplate null # args: literal, argType\n    HexTypeTemplate: &HexTypeTemplate null # args: literal, argType\n    OctalTypeTemplate: &OctalTypeTemplate !!js/function >\n        (literal) => {\n            let offset = 0;\n\n            if (\n                literal.charAt(0) === '0' &&\n                (literal.charAt(1) === '0' || literal.charAt(1) === 'o' || literal.charAt(1) === 'O')\n            ) {\n                offset = 2;\n            } else if (literal.charAt(0) === '0') {\n                offset = 1;\n            }\n\n            literal = `0o${literal.substr(offset, literal.length - 1)}`;\n\n            return literal;\n        }\n    NumericTypeTemplate: &NumericTypeTemplate null # args: literal, argType\n    ArrayTypeTemplate: &ArrayTypeTemplate !!js/function >\n        (literal, depth) => {\n            depth++;\n            if (literal === '') {\n                return '[]'\n            }\n            const indent = '\\n' + '  '.repeat(depth);\n            const closingIndent = '\\n' + '  '.repeat(depth - 1);\n\n            return `[${indent}${literal}${closingIndent}]`;\n        }\n    ArrayTypeArgsTemplate: &ArrayTypeArgsTemplate null # Args: single array element, nestedness, lastElement? (note: not being used atm)\n    NullTypeTemplate: &NullTypeTemplate !!js/function >\n        () => {\n            return 'nil';\n        }\n    UndefinedTypeTemplate: &UndefinedTypeTemplate !!js/function >\n        () => {\n            return 'nil';\n        }\n    ObjectTypeTemplate: &ObjectTypeTemplate !!js/function >\n        (literal) => {\n            if (literal === '') {\n                return '{}';\n            }\n            return literal;\n        }\n    ObjectTypeArgsTemplate: &ObjectTypeArgsTemplate !!js/function >\n        (args, depth) => {\n            if (args.length === 0) {\n                return '{}';\n            }\n            depth++;\n            const indent = '\\n' + '  '.repeat(depth);\n            const closingIndent = '\\n' + '  '.repeat(depth - 1);\n            const singleStringify = (str) => {\n                let newStr = str;\n                if (\n                  (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                  (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                    newStr = str.substr(1, str.length - 2);\n                }\n                return `'${newStr.replace(/\\\\([\\s\\S])|(')/g, '\\\\$1$2')}'`;\n            }\n            const pairs = args.map((arg) => {\n                return `${indent}${singleStringify(arg[0])} => ${arg[1]}`;\n            }).join(',');\n\n            return `{${pairs}${closingIndent}}`\n        }\n\n    #############################################\n    #               Symbols                     #\n    #                                           #\n    # Templates for symbols, can be either      #\n    # functions or variables.                   #\n    #                                           #\n    # The *SymbolTemplates return names and     #\n    # usually don't take any arguments. The     #\n    # *SymbolArgsTemplates are invoked for func #\n    # calls. The first argument is always the   #\n    # lhs, i.e. the symbol returned from the    #\n    # corresponding SymbolTemplate. The rest of #\n    # the arguments are the processed arguments #\n    # passed to the original function.          #\n    #                                           #\n    #############################################\n    CodeSymbolTemplate: &CodeSymbolTemplate !!js/function >\n        () => {\n            return 'BSON::Code'\n        }\n    CodeSymbolArgsTemplate: &CodeSymbolArgsTemplate !!js/function >\n        (lhs, code, scope) => {\n            const singleStringify = (str) => {\n                let newStr = str;\n                if (\n                    (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                    (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                    newStr = str.substr(1, str.length - 2);\n                }\n                return `'${newStr.replace(/\\\\([\\s\\S])|(')/g, '\\\\$1$2')}'`;\n            }\n            if (code === undefined) {\n                return '.new'\n            }\n            return !scope ? `.new(${singleStringify(code)})` : `WithScope.new(${singleStringify(code)}, ${scope})`\n        }\n    ObjectIdSymbolTemplate: &ObjectIdSymbolTemplate !!js/function >\n        () => {\n            return 'BSON::ObjectId';\n        }\n    ObjectIdSymbolArgsTemplate: &ObjectIdSymbolArgsTemplate !!js/function >\n        (lhs, id) => {\n            const singleStringify = (str) => {\n                let newStr = str;\n                if (\n                    (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                    (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                    newStr = str.substr(1, str.length - 2);\n                }\n                return `'${newStr.replace(/\\\\([\\s\\S])|(')/g, '\\\\$1$2')}'`;\n            }\n            return !id ? '.new' : `(${singleStringify(id)})`;\n        }\n    BinarySymbolTemplate: &BinarySymbolTemplate null\n    BinarySymbolArgsTemplate: &BinarySymbolArgsTemplate null\n    BinarySymbolSubtypeDefaultTemplate: &BinarySymbolSubtypeDefaultTemplate null\n    BinarySymbolSubtypeFunctionTemplate: &BinarySymbolSubtypeFunctionTemplate null\n    BinarySymbolSubtypeByteArrayTemplate: &BinarySymbolSubtypeByteArrayTemplate null\n    BinarySymbolSubtypeUuidOldTemplate: &BinarySymbolSubtypeUuidOldTemplate null\n    BinarySymbolSubtypeUuidTemplate: &BinarySymbolSubtypeUuidTemplate null\n    BinarySymbolSubtypeMd5Template: &BinarySymbolSubtypeMd5Template null\n    BinarySymbolSubtypeUserDefinedTemplate: &BinarySymbolSubtypeUserDefinedTemplate null\n    DBRefSymbolTemplate: &DBRefSymbolTemplate !!js/function >\n        () => {\n            return 'BSON::DBRef'\n        }\n    DBRefSymbolArgsTemplate: &DBRefSymbolArgsTemplate !!js/function >\n        (lhs, coll, id, db) => {\n            const singleStringify = (str) => {\n                let newStr = str;\n                if (\n                    (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                    (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                    newStr = str.substr(1, str.length - 2);\n                }\n                return `'${newStr.replace(/\\\\([\\s\\S])|(')/g, '\\\\$1$2')}'`;\n            }\n\n            let db_string = db ? `,\\n  '$db' => ${singleStringify(db)}` : ''\n            return `.new(\\n  '$ref' => ${singleStringify(coll)},\\n  '$id' => ${id}${db_string}\\n)`\n        }\n\n    DoubleSymbolTemplate: &DoubleSymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    DoubleSymbolArgsTemplate: &DoubleSymbolArgsTemplate !!js/function >\n        (lhs, arg, type) => {\n            arg = arg === undefined ? 0 : arg;\n            if (type === '_decimal' || type === '_double') {\n                return arg;\n            }\n            return `${arg}.to_f`;\n        }\n    Int32SymbolTemplate: &Int32SymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    Int32SymbolArgsTemplate: &Int32SymbolArgsTemplate !!js/function >\n        (lhs, arg, type) => {\n            arg = arg === undefined ? 0 : arg;\n            if (type === '_integer' || type === '_long') {\n                return arg;\n            }\n            return `${arg}.to_i`;\n        }\n    LongSymbolTemplate: &LongSymbolTemplate !!js/function >\n        () => {\n            return ''\n        }\n    LongSymbolArgsTemplate: &LongSymbolArgsTemplate !!js/function >\n        (lhs, arg, type) => {\n            arg = arg === undefined ? 0 : arg;\n            if (type === '_integer' || type === '_long') {\n                return arg;\n            }\n            return `${arg}.to_i`;\n        }\n    RegExpSymbolTemplate: &RegExpSymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    RegExpSymbolArgsTemplate: &RegExpSymbolArgsTemplate null # Args: lhs, pattern, flags\n    SymbolSymbolTemplate: &SymbolSymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    SymbolSymbolArgsTemplate: &SymbolSymbolArgsTemplate !!js/function >\n        (lhs, arg) => {\n            arg = arg === undefined ? '' : arg;\n            const str = arg.toString();\n            let newStr = str;\n            if (\n                (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                newStr = str.substr(1, str.length - 2);\n                return `:'${newStr}'`;\n            } else {\n                return `${newStr}.to_sym`;\n            }\n        }\n    BSONRegExpSymbolTemplate: &BSONRegExpSymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    BSONRegExpSymbolArgsTemplate: &BSONRegExpSymbolArgsTemplate !!js/function >\n        (lhs, pattern, flags) => {\n            const singleStringify = (str) => {\n                let newStr = str;\n                if (\n                    (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                    (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                    newStr = str.substr(1, str.length - 2);\n                }\n                return `${newStr.replace(/\\\\([\\s\\S])/g, '\\\\$1')}`;\n            }\n            return `/${singleStringify(pattern)}/${flags ? singleStringify(flags) : ''}`;\n        }\n    Decimal128SymbolTemplate: &Decimal128SymbolTemplate !!js/function >\n        () => {\n            return 'BSON::Decimal128';\n        }\n    Decimal128SymbolArgsTemplate: &Decimal128SymbolArgsTemplate !!js/function >\n        (lhs, arg) => {\n            arg = arg === undefined ? '0' : arg.toString();\n            if (arg.charAt(0) === '\\'' && arg.charAt(arg.length - 1) === '\\'') {\n                return `.new(${arg})`;\n            }\n            return `.new('${arg}')`;\n        }\n    MinKeySymbolTemplate: &MinKeySymbolTemplate !!js/function >\n        () => {\n            return 'BSON::MinKey';\n        }\n    MinKeySymbolArgsTemplate: &MinKeySymbolArgsTemplate !!js/function >\n        () => {\n            return '.new';\n        }\n    MaxKeySymbolTemplate: &MaxKeySymbolTemplate !!js/function >\n        () => {\n            return 'BSON::MaxKey';\n        }\n    MaxKeySymbolArgsTemplate: &MaxKeySymbolArgsTemplate !!js/function >\n        () => {\n            return '.new';\n        }\n    TimestampSymbolTemplate: &TimestampSymbolTemplate !!js/function >\n        () => {\n            return 'BSON::Timestamp';\n        }\n    TimestampSymbolArgsTemplate: &TimestampSymbolArgsTemplate !!js/function >\n        (lhs, arg1, arg2) => {\n            return `.new(${arg1 === undefined ? 0 : arg1}, ${arg2 === undefined ? 0 : arg2})`;\n        }\n    # non bson-specific\n    NumberSymbolTemplate: &NumberSymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    NumberSymbolArgsTemplate: &NumberSymbolArgsTemplate !!js/function >\n        (lhs, arg, type) => {\n            arg = arg === undefined ? 0 : arg;\n            const str = arg.toString();\n            let newStr = str;\n            if (\n                (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                newStr = str.substr(1, str.length - 2);\n                return `'${newStr}'.to_f`;\n            } else if (type === '_decimal' || type === '_double') {\n                return newStr;\n            } else {\n                return `${newStr}.to_f`;\n            }\n        }\n    DateSymbolTemplate: &DateSymbolTemplate !!js/function >\n        () => {\n            return 'Time';\n        }\n    DateSymbolArgsTemplate: &DateSymbolArgsTemplate !!js/function >\n        (lhs, date, isString) => {\n            const toStr = isString ? '.strftime(\\'%a %b %d %Y %H:%M:%S %Z\\')' : '';\n\n            if (date === null) {\n                return `${lhs}.new.utc${toStr}`;\n            }\n\n            const dateStr = [\n                date.getUTCFullYear(),\n                date.getUTCMonth() + 1,\n                date.getUTCDate(),\n                date.getUTCHours(),\n                date.getUTCMinutes(),\n                date.getUTCSeconds()\n            ].join(', ');\n\n            return `${lhs}.utc(${dateStr})${toStr}`;\n        }\n\n    DateSymbolNowTemplate: &DateSymbolNowTemplate !!js/function >\n        () => {\n            return 'Time.now.utc';\n        }\n    DateSymbolNowArgsTemplate: &DateSymbolNowArgsTemplate !!js/function >\n        (args) => {\n            return '';\n        }\n\n    #############################################\n    #         Object Attributes/Methods         #\n    #                                           #\n    # These're variables or functions called on #\n    # instantiated objects. For example,        #\n    # ObjectId().isValid() or Timestamp().t     #\n    #                                           #\n    # They follow the same pattern with the\n    # *Template/*ArgsTemplates: usually no args #\n    # to the Template and lhs plus any original #\n    # arguments to the ArgsTemplate.            #\n    #                                           #\n    #############################################\n    CodeCodeTemplate: &CodeCodeTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.javascript`;\n        }\n    CodeCodeArgsTemplate: &CodeCodeArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    CodeScopeTemplate: &CodeScopeTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.scope`;\n        }\n    CodeScopeArgsTemplate: &CodeScopeArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    ObjectIdToStringTemplate: &ObjectIdToStringTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.to_s`;\n        }\n    ObjectIdToStringArgsTemplate: &ObjectIdToStringArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    ObjectIdEqualsTemplate: &ObjectIdEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} == `;\n        }\n    ObjectIdEqualsArgsTemplate: &ObjectIdEqualsArgsTemplate !!js/function >\n        (arg) => {\n            return `${arg}`;\n        }\n    ObjectIdGetTimestampTemplate: &ObjectIdGetTimestampTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.to_time`;\n        }\n    ObjectIdGetTimestampArgsTemplate: &ObjectIdGetTimestampArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    ObjectIdIsValidTemplate: &ObjectIdIsValidTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.legal?`\n        }\n    ObjectIdIsValidArgsTemplate: &ObjectIdIsValidArgsTemplate null\n    BinaryValueTemplate: &BinaryValueTemplate null\n    BinaryValueArgsTemplate: &BinaryValueArgsTemplate null\n    BinaryLengthTemplate: &BinaryLengthTemplate null\n    BinaryLengthArgsTemplate: &BinaryLengthArgsTemplate null\n    BinaryToStringTemplate: &BinaryToStringTemplate null\n    BinaryToStringArgsTemplate: &BinaryToStringArgsTemplate null\n    BinarySubtypeTemplate: &BinarySubtypeTemplate null\n    BinarySubtypeArgsTemplate: &BinarySubtypeArgsTemplate null\n    DBRefGetDBTemplate: &DBRefGetDBTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.database`;\n        }\n    DBRefGetCollectionTemplate: &DBRefGetCollectionTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.collection`;\n        }\n    DBRefGetIdTemplate: &DBRefGetIdTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.id`;\n        }\n    DBRefGetDBArgsTemplate: &DBRefGetDBArgsTemplate !!js/function >\n        (lhs) => {\n            return '';\n        }\n    DBRefGetCollectionArgsTemplate: &DBRefGetCollectionArgsTemplate !!js/function >\n        (lhs) => {\n            return '';\n        }\n    DBRefGetIdArgsTemplate: &DBRefGetIdArgsTemplate !!js/function >\n        (lhs) => {\n            return '';\n        }\n    DBRefToStringTemplate: &DBRefToStringTemplate !!js/function >\n        (lhs) => {\n            return '${lhs}.to_s';\n        }\n    DBRefToStringArgsTemplate: &DBRefToStringArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    DoubleValueOfTemplate: &DoubleValueOfTemplate null\n    DoubleValueOfArgsTemplate: &DoubleValueOfArgsTemplate null\n    Int32ValueOfTemplate: &Int32ValueOfTemplate null\n    Int32ValueOfArgsTemplate: &Int32ValueOfArgsTemplate null\n    Int32ToStringTemplate: &Int32ToStringTemplate null\n    Int32ToStringArgsTemplate: &Int32ToStringArgsTemplate null\n    LongEqualsTemplate: &LongEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} ==`;\n        }\n    LongEqualsArgsTemplate: &LongEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongToIntTemplate: &LongToIntTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}`;\n        }\n    LongToIntArgsTemplate: &LongToIntArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongToStringTemplate: &LongToStringTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.to_s`;\n        }\n    LongToStringArgsTemplate: &LongToStringArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongToNumberTemplate: &LongToNumberTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.to_f`;\n        }\n    LongToNumberArgsTemplate: &LongToNumberArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongAddTemplate: &LongAddTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} +`;\n        }\n    LongAddArgsTemplate: &LongAddArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongSubtractTemplate: &LongSubtractTemplate !!js/function >\n        (arg) => {\n            return `${arg} -`;\n        }\n    LongSubtractArgsTemplate: &LongSubtractArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongMultiplyTemplate: &LongMultiplyTemplate !!js/function >\n        (arg) => {\n            return `${arg} *`;\n        }\n    LongMultiplyArgsTemplate: &LongMultiplyArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongDivTemplate: &LongDivTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} /`;\n        }\n    LongDivArgsTemplate: &LongDivArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongModuloTemplate: &LongModuloTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} %`;\n        }\n    LongModuloArgsTemplate: &LongModuloArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongAndTemplate: &LongAndTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} &`;\n        }\n    LongAndArgsTemplate: &LongAndArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongOrTemplate: &LongOrTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} |`;\n        }\n    LongOrArgsTemplate: &LongOrArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongXorTemplate: &LongXorTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} ^`;\n        }\n    LongXorArgsTemplate: &LongXorArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongShiftLeftTemplate: &LongShiftLeftTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <<`;\n        }\n    LongShiftLeftArgsTemplate: &LongShiftLeftArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongShiftRightTemplate: &LongShiftRightTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >>`;\n        }\n    LongShiftRightArgsTemplate: &LongShiftRightArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongCompareTemplate: &LongCompareTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} -`;\n        }\n    LongCompareArgsTemplate: &LongCompareArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongIsOddTemplate: &LongIsOddTemplate !!js/function >\n        (lhs) => {\n            return `(${lhs} % 2) == 1`;\n        }\n    LongIsOddArgsTemplate: &LongIsOddArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongIsZeroTemplate: &LongIsZeroTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} == 0`;\n        }\n    LongIsZeroArgsTemplate: &LongIsZeroArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongIsNegativeTemplate: &LongIsNegativeTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} < 0`;\n        }\n    LongIsNegativeArgsTemplate: &LongIsNegativeArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongNegateTemplate: &LongNegateTemplate !!js/function >\n        () => {\n            return '-';\n        }\n    LongNegateArgsTemplate: &LongNegateArgsTemplate !!js/function >\n        (lhs) => {\n            return lhs;\n        }\n    LongNotTemplate: &LongNotTemplate !!js/function >\n        () => {\n            return '~';\n        }\n    LongNotArgsTemplate: &LongNotArgsTemplate !!js/function >\n        (lhs) => {\n            return lhs;\n        }\n    LongNotEqualsTemplate: &LongNotEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} !=`;\n        }\n    LongNotEqualsArgsTemplate: &LongNotEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongGreaterThanTemplate: &LongGreaterThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >`;\n        }\n    LongGreaterThanArgsTemplate: &LongGreaterThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongGreaterThanOrEqualTemplate: &LongGreaterThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >=`;\n        }\n    LongGreaterThanOrEqualArgsTemplate: &LongGreaterThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongLessThanTemplate: &LongLessThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <`;\n        }\n    LongLessThanArgsTemplate: &LongLessThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongLessThanOrEqualTemplate: &LongLessThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <=`;\n        }\n    LongLessThanOrEqualArgsTemplate: &LongLessThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongFloatApproxTemplate: &LongFloatApproxTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.to_f`;\n        }\n    LongTopTemplate: &LongTopTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >> 32`;\n        }\n    LongBottomTemplate: &LongBottomTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} & 0x0000ffff`;\n        }\n    TimestampToStringTemplate: &TimestampToStringTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.to_s`;\n        }\n    TimestampToStringArgsTemplate: &TimestampToStringArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    TimestampEqualsTemplate: &TimestampEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} == `;\n        }\n    TimestampEqualsArgsTemplate: &TimestampEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}`;\n        }\n    TimestampGetLowBitsTemplate: &TimestampGetLowBitsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.seconds`;\n        }\n    TimestampGetLowBitsArgsTemplate: &TimestampGetLowBitsArgsTemplate !!js/function >\n        () => {\n            return ''\n        }\n    TimestampGetHighBitsTemplate: &TimestampGetHighBitsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.increment`;\n        }\n    TimestampGetHighBitsArgsTemplate: &TimestampGetHighBitsArgsTemplate !!js/function >\n        () => {\n            return ''\n        }\n    TimestampTTemplate: &TimestampTTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.seconds`;\n        }\n    TimestampITemplate: &TimestampITemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.increment`;\n        }\n    TimestampAsDateTemplate: &TimestampAsDateTemplate !!js/function >\n        (lhs) => {\n            return `Time.at(${lhs}.increment).utc`;\n        }\n    TimestampAsDateArgsTemplate: &TimestampAsDateArgsTemplate null\n    TimestampCompareTemplate: &TimestampCompareTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <=> `;\n        }\n    TimestampCompareArgsTemplate: &TimestampCompareArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}`;\n        }\n    TimestampNotEqualsTemplate: &TimestampNotEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} != `;\n        }\n    TimestampNotEqualsArgsTemplate: &TimestampNotEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}`;\n        }\n    TimestampGreaterThanTemplate: &TimestampGreaterThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} > `;\n        }\n    TimestampGreaterThanArgsTemplate: &TimestampGreaterThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}`;\n        }\n    TimestampGreaterThanOrEqualTemplate: &TimestampGreaterThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >= `;\n        }\n    TimestampGreaterThanOrEqualArgsTemplate: &TimestampGreaterThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}`;\n        }\n    TimestampLessThanTemplate: &TimestampLessThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} < `;\n        }\n    TimestampLessThanArgsTemplate: &TimestampLessThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}`;\n        }\n    TimestampLessThanOrEqualTemplate: &TimestampLessThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <= `;\n        }\n    TimestampLessThanOrEqualArgsTemplate: &TimestampLessThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}`;\n        }\n    SymbolValueOfTemplate: &SymbolValueOfTemplate !!js/function >\n        (lhs) => {\n            return lhs;\n        }\n    SymbolValueOfArgsTemplate: &SymbolValueOfArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    SymbolInspectTemplate: &SymbolInspectTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.inspect`;\n        }\n    SymbolInspectArgsTemplate: &SymbolInspectArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    SymbolToStringTemplate: &SymbolToStringTemplate !!js/function >\n        (lhs) => {\n            let extractRegex = (lhs) => {\n                let r = /^:'(.*)'$/;\n                let arr = r.exec(lhs);\n                return arr ? arr[1] : ''\n\n            }\n            let res = extractRegex(lhs)\n            return res ? `'${res}'` : `${lhs}.to_s`;\n        }\n    SymbolToStringArgsTemplate: &SymbolToStringArgsTemplate !!js/function >\n        (lhs) => {\n            return '';\n        }\n    Decimal128ToStringTemplate: &Decimal128ToStringTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.to_s`;\n        }\n    Decimal128ToStringArgsTemplate: &Decimal128ToStringArgsTemplate !!js/function >\n        (lhs) => {\n            return '';\n        }\n\n    #############################################\n    #         Symbol Attributes/Methods         #\n    #                                           #\n    # These're variables or functions called on #\n    # symbols. Also called bson-utils.          #\n    #                                           #\n    # They are basically the same thing as      #\n    # object attributes/methods, but need to be #\n    # distinguished since they are separate     #\n    # namespaces that happen to have the same   #\n    # name which is v confusing.                #\n    #                                           #\n    # For example, ObjectId().toString() is an  #\n    # object method, while ObjectId.fromString  #\n    # is a symbol attribute. These are two      #\n    # separate ObjectId related namespaces that #\n    # don't overlap.                            #\n    #                                           #\n    #############################################\n    LongSymbolMaxTemplate: &LongSymbolMaxTemplate !!js/function >\n        () => {\n            return '9223372036854775807';\n        }\n    LongSymbolMaxArgsTemplate: &LongSymbolMaxArgsTemplate null\n    LongSymbolMinTemplate: &LongSymbolMinTemplate !!js/function >\n        () => {\n            return '-9223372036854775808';\n        }\n    LongSymbolMinArgsTemplate: &LongSymbolMinArgsTemplate null\n    LongSymbolZeroTemplate: &LongSymbolZeroTemplate !!js/function >\n        () => {\n            return '0';\n        }\n    LongSymbolZeroArgsTemplate: &LongSymbolZeroArgsTemplate null\n    LongSymbolOneTemplate: &LongSymbolOneTemplate !!js/function >\n        () => {\n            return '1';\n        }\n    LongSymbolOneArgsTemplate: &LongSymbolOneArgsTemplate null\n    LongSymbolNegOneTemplate: &LongSymbolNegOneTemplate !!js/function >\n        () => {\n            return '-1';\n        }\n    LongSymbolNegOneArgsTemplate: &LongSymbolNegOneArgsTemplate null\n    LongSymbolFromBitsTemplate: &LongSymbolFromBitsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongSymbolFromBitsArgsTemplate: &LongSymbolFromBitsArgsTemplate null\n    LongSymbolFromIntTemplate: &LongSymbolFromIntTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongSymbolFromIntArgsTemplate: &LongSymbolFromIntArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return arg;\n        }\n    LongSymbolFromNumberTemplate: &LongSymbolFromNumberTemplate null\n    LongSymbolFromNumberArgsTemplate: &LongSymbolFromNumberArgsTemplate null\n    LongSymbolFromStringTemplate: &LongSymbolFromStringTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongSymbolFromStringArgsTemplate: &LongSymbolFromStringArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}.to_i`;\n        }\n    Decimal128SymbolFromStringTemplate: &Decimal128SymbolFromStringTemplate !!js/function >\n        () => {\n            return 'BSON::Decimal128';\n        }\n    Decimal128SymbolFromStringArgsTemplate: &Decimal128SymbolFromStringArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `.new(${arg})`;\n        }\n    ObjectIdCreateFromHexStringTemplate: &ObjectIdCreateFromHexStringTemplate !!js/function >\n        () => {\n            return 'BSON::ObjectId';\n        }\n    ObjectIdCreateFromHexStringArgsTemplate: &ObjectIdCreateFromHexStringArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `(${arg})`;\n        }\n    ObjectIdCreateFromTimeTemplate: &ObjectIdCreateFromTimeTemplate !!js/function >\n        () => {\n            return 'BSON::ObjectId.from_time';\n        }\n    ObjectIdCreateFromTimeArgsTemplate: &ObjectIdCreateFromTimeArgsTemplate !!js/function >\n        (lhs, arg, isNumber) => {\n            if (!isNumber) {\n                return `(${arg})`;\n            }\n            return `(Time.at(${arg}))`;\n        }\n    # non bson-specific would go here, but there aren't any atm.\n\n    #############################################\n    #                 Imports                   #\n    #                                           #\n    # Each type has a 'code' that is consistent #\n    # between languages. The import templates   #\n    # for each code generate the required       #\n    # statement for each type. No args.         #\n    #                                           #\n    # The ImportTemplate collects everything    #\n    # into one statement.                       #\n    #                                           #\n    #############################################\n    ImportTemplate: &ImportTemplate !!js/function >\n        (args) => {\n            let set = new Set(Object.values(args))\n            if (set.has(`require 'mongo'`)) return `require 'mongo'`\n            return [...set].sort().join('\\n');\n        }\n    DriverImportTemplate: &DriverImportTemplate !!js/function >\n        () => {\n            return `require 'mongo'`\n        }\n    0ImportTemplate: &0ImportTemplate null\n    1ImportTemplate: &1ImportTemplate null\n    2ImportTemplate: &2ImportTemplate null\n    3ImportTemplate: &3ImportTemplate null\n    4ImportTemplate: &4ImportTemplate null\n    5ImportTemplate: &5ImportTemplate null\n    6ImportTemplate: &6ImportTemplate null\n    7ImportTemplate: &7ImportTemplate null\n    8ImportTemplate: &8ImportTemplate null\n    9ImportTemplate: &9ImportTemplate null\n    10ImportTemplate: &10ImportTemplate null\n    11ImportTemplate: &11ImportTemplate null\n    12ImportTemplate: &12ImportTemplate null\n    100ImportTemplate: &100ImportTemplate !!js/function >\n        () => {\n            return `require 'bson'`\n        }\n    101ImportTemplate: &101ImportTemplate !!js/function >\n        () => {\n            return `require 'bson'`\n        }\n    102ImportTemplate: &102ImportTemplate !!js/function >\n        () => {\n            return `require 'bson'`\n        }\n    103ImportTemplate: &103ImportTemplate !!js/function >\n        () => {\n            return `require 'bson'`\n        }\n    104ImportTemplate: &104ImportTemplate null\n    105ImportTemplate: &105ImportTemplate null\n    106ImportTemplate: &106ImportTemplate null\n    107ImportTemplate: &107ImportTemplate !!js/function >\n        () => {\n            return `require 'bson'`\n        }\n    108ImportTemplate: &108ImportTemplate !!js/function >\n        () => {\n            return `require 'bson'`\n        }\n    109ImportTemplate: &109ImportTemplate null\n    110ImportTemplate: &110ImportTemplate !!js/function >\n        () => {\n            return `require 'bson'`\n        }\n    111ImportTemplate: &111ImportTemplate null\n    112ImportTemplate: &112ImportTemplate !!js/function >\n        () => {\n            return `require 'bson'`\n        }\n    113ImportTemplate: &113ImportTemplate null\n    114ImportTemplate: &114ImportTemplate null\n    200ImportTemplate: &200ImportTemplate null\n    201ImportTemplate: &201ImportTemplate null\n    300ImportTemplate: &300ImportTemplate null\n    301ImportTemplate: &301ImportTemplate null\n    302ImportTemplate: &302ImportTemplate null\n    303ImportTemplate: &303ImportTemplate null\n    304ImportTemplate: &304ImportTemplate null\n    305ImportTemplate: &305ImportTemplate null\n    306ImportTemplate: &306ImportTemplate null\n# Universal types\n# Everything inherits from StringType because we haven't implemented any of them.\nBasicTypes:\n    # Universal basic types\n    _bool: &BoolType\n        <<: *__type\n        id: \"_bool\"\n        code: 0\n        template: *BoolTypeTemplate\n    _integer: &IntegerType\n        <<: *__type\n        id: \"_integer\"\n        code: 1\n        template: *IntegerTypeTemplate\n    _long: &LongBasicType\n        <<: *__type\n        id: \"_long\"\n        code: 2\n        template: *LongBasicTypeTemplate\n    _decimal: &DecimalType\n        <<: *__type\n        id: \"_decimal\"\n        code: 3\n        template: *DecimalTypeTemplate\n    _hex: &HexType\n        <<: *__type\n        id: \"_hex\"\n        code: 4\n        template: *HexTypeTemplate\n    _octal: &OctalType\n        <<: *__type\n        id: \"_octal\"\n        code: 5\n        template: *OctalTypeTemplate\n    _numeric: &NumericType\n        <<: *__type\n        id: \"_numeric\"\n        code: 6\n        template: *NumericTypeTemplate\n    _string: &StringType\n        <<: *__type\n        id: \"_string\"\n        code: 7\n        template: *StringTypeTemplate\n    _regex: &RegexType\n        <<: *__type\n        id: \"_regex\"\n        code: 8\n        template: *RegexTypeTemplate\n    _array: &ArrayType\n        <<: *__type\n        id: \"_array\"\n        code: 9\n        template: *ArrayTypeTemplate\n        argsTemplate: *ArrayTypeArgsTemplate\n    _object: &ObjectType\n        <<: *__type\n        id: \"_object\"\n        code: 10\n        template: *ObjectTypeTemplate\n        argsTemplate: *ObjectTypeArgsTemplate\n    _null: &NullType\n        <<: *__type\n        id: \"_null\"\n        code: 11\n        template: *NullTypeTemplate\n    _undefined: &UndefinedType\n        <<: *__type\n        id: \"_undefined\"\n        code: 12\n        template: *UndefinedTypeTemplate\n\nSyntax:\n    equality:\n        template: *EqualitySyntaxTemplate\n    in:\n        template: *InSyntaxTemplate\n    and:\n        template: *AndSyntaxTemplate\n    or:\n        template: *OrSyntaxTemplate\n    not:\n        template: *NotSyntaxTemplate\n    unary:\n        template: *UnarySyntaxTemplate\n    binary:\n        template: *BinarySyntaxTemplate\n    parens:\n        template: *ParensSyntaxTemplate\n    eos:\n        template: *EosSyntaxTemplate\n    eof:\n        template: *EofSyntaxTemplate\n    # The new template takes in expr, and an optional skip argument and optional\n    # id argument. The skip argument is a boolean that if true then doesn't add\n    # new. The code argument is the symbol code being called. The template will check\n    # if it is an exception, i.e. a type that is a constructor but may not use new.\n    new:\n        template: *NewSyntaxTemplate\n    # The regex flags that change symbols between languages can be defined here.\n    # Flags that aren't defined can be left blank and will be ignored.\n    regexFlags: *RegexFlags\n    bsonRegexFlags: *BSONRegexFlags\n    driver: *DriverTemplate\nImports:\n    import:\n        template: *ImportTemplate\n    driver:\n        template: *DriverImportTemplate\n    0:\n        template: *0ImportTemplate\n    1:\n        template: *1ImportTemplate\n    2:\n        template: *2ImportTemplate\n    3:\n        template: *3ImportTemplate\n    4:\n        template: *4ImportTemplate\n    5:\n        template: *5ImportTemplate\n    6:\n        template: *6ImportTemplate\n    7:\n        template: *7ImportTemplate\n    8:\n        template: *8ImportTemplate\n    9:\n        template: *9ImportTemplate\n    10:\n        template: *10ImportTemplate\n    11:\n        template: *11ImportTemplate\n    12:\n        template: *12ImportTemplate\n    100:\n        template: *100ImportTemplate\n    101:\n        template: *101ImportTemplate\n    102:\n        template: *102ImportTemplate\n    103:\n        template: *103ImportTemplate\n    104:\n        template: *104ImportTemplate\n    105:\n        template: *105ImportTemplate\n    106:\n        template: *106ImportTemplate\n    107:\n        template: *107ImportTemplate\n    108:\n        template: *108ImportTemplate\n    109:\n        template: *109ImportTemplate\n    110:\n        template: *110ImportTemplate\n    111:\n        template: *111ImportTemplate\n    112:\n        template: *112ImportTemplate\n    113:\n        template: *113ImportTemplate\n    114:\n        template: *114ImportTemplate\n    200:\n        template: *200ImportTemplate\n    201:\n        template: *201ImportTemplate\n    300:\n        template: *300ImportTemplate\n    301:\n        template: *301ImportTemplate\n    302:\n        template: *302ImportTemplate\n    303:\n        template: *303ImportTemplate\n    304:\n        template: *304ImportTemplate\n    305:\n        template: *305ImportTemplate\n    306:\n        template: *306ImportTemplate\nNativeTypes:\n    Date: &DateType\n        <<: *__type\n        id: \"Date\"\n        code: 200\n        type: *ObjectType\n        attr: {} # TODO: no built-in date methods added yet\n    int: &intType\n        <<: *__type\n        id: \"int\"\n        code: 105\n        type: *IntegerType\n        attr: {}\n    float: &floatType\n        <<: *__type\n        id: \"float\"\n        code: 104\n        type: *IntegerType\n        attr: {}\nBsonTypes:\n    Code: &CodeType\n        <<: *__type\n        id: \"Code\"\n        code: 100\n        type: *ObjectType\n        attr:\n            scope:\n                callable: *var\n                args: null\n                attr: null\n                id: \"scope\"\n                type: *ObjectType\n                template: *CodeScopeTemplate\n                argsTemplate: *CodeScopeArgsTemplate\n    ObjectId: &ObjectIdType\n        <<: *__type\n        id: \"ObjectId\"\n        code: 101\n        type: *ObjectType\n        attr:\n            binary:\n                callable: *var\n                args: null\n                attr: null\n                type: *StringType\n                template: *ObjectIdToStringTemplate\n                argsTemplate: *ObjectIdToStringArgsTemplate\n            generation_time:\n                callable: *var\n                args: null\n                attr: null\n                id: \"db\"\n                type: *DateType\n                template: *ObjectIdGetTimestampTemplate\n                argsTemplate: *ObjectIdGetTimestampArgsTemplate\n    Binary: &BinaryType # Not currently supported\n        <<: *__type\n        id: \"Binary\"\n        code: 102\n        type: *ObjectType\n    DBRef: &DBRefType\n        <<: *__type\n        id: \"DBRef\"\n        code: 103\n        type: *ObjectType\n        attr:\n            database:\n                callable: *var\n                args: null\n                attr: null\n                id: \"db\"\n                type: *StringType\n                template: *DBRefGetDBTemplate\n                argsTemplate: *DBRefGetDBArgsTemplate\n            collection:\n                callable: *var\n                args: null\n                attr: null\n                id: \"collection\"\n                type: *StringType\n                template: *DBRefGetCollectionTemplate\n                argsTemplate: *DBRefGetCollectionArgsTemplate\n            id:\n                callable: *var\n                args: null\n                attr: null\n                id: \"id\"\n                type: *StringType\n                template: *DBRefGetIdTemplate\n                argsTemplate: *DBRefGetIdArgsTemplate\n    Int64: &LongType\n        <<: *__type\n        id: \"Int64\"\n        code: 106\n        type: *ObjectType\n        attr: {}\n    MinKey: &MinKeyType\n        <<: *__type\n        id: \"MinKey\"\n        code: 107\n        type: *ObjectType\n    MaxKey: &MaxKeyType\n        <<: *__type\n        id: \"MaxKey\"\n        code: 108\n        type: *ObjectType\n    Regex: &BSONRegExpType\n        <<: *__type\n        id: \"BSONRegExp\"\n        code: 109\n        type: *ObjectType\n    Timestamp: &TimestampType\n        <<: *__type\n        id: \"Timestamp\"\n        code: 110\n        type: *ObjectType\n        attr:\n            time:\n                callable: *var\n                args: null\n                attr: null\n                id: \"time\"\n                type: *IntegerType\n                template: *TimestampTTemplate\n                argsTemplate: null\n            inc:\n                callable: *var\n                args: null\n                attr: null\n                id: \"inc\"\n                type: *IntegerType\n                template: *TimestampITemplate\n                argsTemplate: null\n            as_datetime:\n                <<: *__func\n                id: \"inc\"\n                type: *DateType\n                template: *TimestampAsDateTemplate\n                argsTemplate: *TimestampAsDateArgsTemplate\n    Decimal128: &Decimal128Type\n        <<: *__type\n        id: \"Decimal128\"\n        code: 112\n        type: *ObjectType\n        attr: {}\nBsonSymbols:\n    Code: &CodeSymbol\n        id: \"Code\"\n        code: 100\n        callable: *constructor\n        args:\n            - [ *StringType ]\n            - [ *ObjectType, null ]\n        namedArgs:\n            scope:\n                default: {}\n                type: [ *ObjectType ]\n        type: *CodeType\n        attr: {}\n        template: *CodeSymbolTemplate\n        argsTemplate: *CodeSymbolArgsTemplate\n    ObjectId: &ObjectIdSymbol\n        id: \"ObjectId\"\n        code: 101\n        callable: *constructor\n        args:\n            - [ *StringType, null ]\n        namedArgs:\n            oid:\n                default: null\n                type: [ *StringType, *ObjectIdType ]\n        type: *ObjectIdType\n        attr:\n            from_datetime:\n                <<: *__func\n                id: \"ObjectIdfrom_datetime\"\n                args:\n                    - [ \"Date\" ]\n                type: *ObjectIdType\n                template: *ObjectIdCreateFromTimeTemplate\n                argsTemplate: *ObjectIdCreateFromTimeArgsTemplate\n            is_valid:\n                <<: *__func\n                id: \"is_valid\"\n                args:\n                    - [ *StringType,  ]\n                type: *BoolType\n                template: *ObjectIdIsValidTemplate\n                argsTemplate: *ObjectIdIsValidArgsTemplate\n        template: *ObjectIdSymbolTemplate\n        argsTemplate: *ObjectIdSymbolArgsTemplate\n    Binary: &BinarySymbol # Not currently supported\n        id: \"Binary\"\n        code: 102\n        callable: *constructor\n        args: null\n        type: *BinaryType\n        attr: {}\n        template: *BinarySymbolTemplate\n        argsTemplate: *BinarySymbolArgsTemplate\n    DBRef:\n        id: \"DBRef\"\n        code: 103\n        callable: *constructor\n        args:\n            - [ *StringType ]\n            - [ *ObjectIdType, *StringType ]\n            - [ *StringType, null ]\n        namedArgs:\n            database:\n                default: null\n                type: [ *StringType ]\n        type: *DBRefType\n        attr: {}\n        template: *DBRefSymbolTemplate\n        argsTemplate: *DBRefSymbolArgsTemplate\n    Int64:\n        id: \"Int64\"\n        code: 106\n        callable: *constructor\n        args:\n            - [ *IntegerType, *StringType, null ]\n        type: *LongType\n        attr: {}\n        template: *LongSymbolTemplate\n        argsTemplate: *LongSymbolArgsTemplate\n    MinKey:\n        id: \"MinKey\"\n        code: 107\n        callable: *constructor\n        args: []\n        type: *MinKeyType\n        attr: {}\n        template: *MinKeySymbolTemplate\n        argsTemplate: *MinKeySymbolArgsTemplate\n    MaxKey:\n        id: \"MaxKey\"\n        code: 108\n        callable: *constructor\n        args: []\n        type: *MaxKeyType\n        attr: {}\n        template: *MaxKeySymbolTemplate\n        argsTemplate: *MaxKeySymbolArgsTemplate\n    Regex:\n        id: \"Regex\"\n        code: 109\n        callable: *constructor\n        args:\n            - [ *StringType ]\n            - [ *StringType, *IntegerType, null ]\n        namedArgs:\n            flags:\n                default: 0\n                type: [ *StringType, *IntegerType ]\n        type: *BSONRegExpType\n        attr:\n            from_native:\n                <<: *__func\n                id: \"from_native\"\n                args:\n                - [ *RegexType ]\n                type: *BSONRegExpType\n                template: null\n                argsTemplate: null\n        template: *BSONRegExpSymbolTemplate\n        argsTemplate: *BSONRegExpSymbolArgsTemplate\n    Timestamp:\n        id: \"Timestamp\"\n        code: 110\n        callable: *constructor\n        args:\n            - [ *IntegerType ]\n            - [ *IntegerType ]\n        type: *TimestampType\n        attr: {}\n        template: *TimestampSymbolTemplate\n        argsTemplate: *TimestampSymbolArgsTemplate\n    Decimal128:\n        id: \"Decimal128\"\n        code: 112\n        callable: *constructor\n        args:\n            - [ *StringType ]\n        type: *Decimal128Type\n        attr: {}\n        template: *Decimal128SymbolTemplate\n        argsTemplate: *Decimal128SymbolArgsTemplate\n\nNativeSymbols:\n    datetime: # Needs process method\n        id: \"datetime\"\n        code: 200\n        callable: *constructor\n        args:\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n        type: *DateType\n        attr: {} # TODO: add more date funcs?\n        template: *DateSymbolTemplate\n        argsTemplate: *DateSymbolArgsTemplate\n    re:\n        id: \"re\"\n        code: 8\n        callable: *var\n        args: null\n        type: null\n        attr:\n            compile:\n                id: \"compile\"\n                code: 8\n                callable: *constructor\n                args:\n                    - [ *StringType ]\n                    - [ *IntegerType, null ]\n                namedArgs:\n                    flags:\n                        default: 0\n                        type: [ *IntegerType ]\n                type: *RegexType\n                attr: {}\n                template: *RegExpSymbolTemplate\n                argsTemplate: *RegExpSymbolArgsTemplate\n            A:\n                <<: *__type\n                id: 're.A'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '256';\n                    }\n            ASCII:\n                <<: *__type\n                id: 're.ASCII'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '256';\n                    }\n            I:\n                <<: *__type\n                id: 're.I'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '2';\n                    }\n            IGNORECASE:\n                <<: *__type\n                id: 're.IGNORECASE'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '2';\n                    }\n            DEBUG:\n                <<: *__type\n                id: 're.DEBUG'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '128';\n                    }\n            L:\n                <<: *__type\n                id: 're.L'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '4';\n                    }\n            LOCAL:\n                <<: *__type\n                id: 're.LOCAL'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '4';\n                    }\n            M:\n                <<: *__type\n                id: 're.M'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '8';\n                    }\n            MULTILINE:\n                <<: *__type\n                id: 're.MULTILINE'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '8';\n                    }\n            S:\n                <<: *__type\n                id: 're.S'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '16';\n                    }\n            DOTALL:\n                <<: *__type\n                id: 're.DOTALL'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '16';\n                    }\n            X:\n                <<: *__type\n                id: 're.X'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '64';\n                    }\n            VERBOSE:\n                <<: *__type\n                id: 're.VERBOSE'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '64';\n                    }\n        template: !!js/function >\n            () => {\n                return '';\n            }\n        argsTemplate: null\n    float:\n        id: \"float\"\n        code: 104\n        callable: *constructor\n        args:\n        - [ *NumericType, *StringType, null ]\n        type: *floatType\n        attr: {}\n        template: *DoubleSymbolTemplate\n        argsTemplate: *DoubleSymbolArgsTemplate\n    int:\n        id: \"int\"\n        code: 105\n        callable: *constructor\n        args:\n        - [ *NumericType, *StringType, null ]\n        type: *intType\n        attr: {}\n        template: *Int32SymbolTemplate\n        argsTemplate: *Int32SymbolArgsTemplate\n"},59151:e=>{e.exports="SymbolTypes:\n    VAR: &var 0\n    CONSTRUCTOR: &constructor 1\n    FUNC: &func 2\n# Internal patterns to save typing\n__type: &__type\n    id: null\n    callable: *var\n    args: null\n    type: null\n    attr: {}\n    template: null\n    argsTemplate: null\n__func: &__func\n    callable: *func\n    args: []\n    attr: {}\n    template: null\n    argsTemplate: null\n\n# Java Templates\nTemplates:\n    # Misc\n    RegexFlags: &RegexFlags\n        i: 'i'\n        m: 'm'\n        u: 'u'\n        y: 'y'\n        g: 'g'\n    BSONRegexFlags: &BSONRegexFlags\n        i: 'i'\n        m: 'm'\n        x: 'x'\n        s: 's'\n        l: 'l'\n        u: 'u'\n    # Syntax\n    DriverTemplate: &DriverTemplate !!js/function >\n        (spec) => {\n            let cmd;\n            if ('aggregation' in spec) {\n                cmd = `aggregate(${spec.aggregation})`;\n            } else {\n                const project = 'project' in spec ? `, ${spec.project}` : '';\n                cmd = Object.keys(spec).reduce((s, k) => {\n                    if (k !== 'options' && k !== 'project' && k !== 'filter') {\n                        s = `${s}.${k}(${spec[k]})`;\n                    }\n                return s;\n                }, `find(${spec.filter}${project})`);\n            }\n            return `mongo '${spec.options.uri}' --eval \"db = db.getSiblingDB('${spec.options.database}');\n        db.${spec.options.collection}.${cmd};\"`;\n        }\n    EqualitySyntaxTemplate: &EqualitySyntaxTemplate !!js/function >\n        (lhs, op, rhs) => {\n            if (op.includes('!') || op.includes('not')) {\n                return `${lhs} !== ${rhs}`;\n            } else if (op === '==' || op === '===' || op === 'is') {\n                return `${lhs} === ${rhs}`;\n            }\n            return `${lhs} ${op} ${rhs}`;\n        }\n    InSyntaxTemplate: &InSyntaxTemplate !!js/function >\n        (lhs, op, rhs) => {\n            let str = '!==';\n            if (op.includes('!') || op.includes('not')) {\n                str = '===';\n            }\n            return `${rhs}.indexOf(${lhs}) ${str} -1`\n        }\n    AndSyntaxTemplate: &AndSyntaxTemplate !!js/function >\n        (args) => {\n            return args.join(' && ');\n        }\n    OrSyntaxTemplate: &OrSyntaxTemplate !!js/function >\n        (args) => {\n            return args.join(' || ');\n        }\n    NotSyntaxTemplate: &NotSyntaxTemplate !!js/function >\n        (arg) => {\n            return `!${arg}`;\n        }\n    UnarySyntaxTemplate: &UnarySyntaxTemplate null\n    BinarySyntaxTemplate: &BinarySyntaxTemplate !!js/function >\n        (args) => {\n            return args.reduce((s, op, i, arr) => {\n                if (i % 2 === 0) {\n                    return s;\n                }\n                const rhs = arr[i + 1];\n                switch(op) {\n                    case '//':\n                        return `Math.floor(${s}, ${rhs})`;\n                    case '**':\n                        return `Math.pow(${s}, ${rhs})`;\n                    default:\n                        return `${s} ${op} ${rhs}`;\n                }\n            }, args[0]);\n        }\n    ParensSyntaxTemplate: &ParensSyntaxTemplate null\n    EosSyntaxTemplate: &EosSyntaxTemplate null\n    EofSyntaxTemplate: &EofSyntaxTemplate null\n    NewTemplate: &NewSyntaxTemplate !!js/function >\n        (expr, skip, code) => {\n            // Add classes that don't use \"new\" to array.\n            // So far: [Symbol, Double, Date.now]\n            noNew = [111, 104, 200.1];\n            if (skip || (code && noNew.indexOf(code) !== -1)) {\n                return expr;\n            }\n            return `new ${expr}`;\n        }\n    # BSON Object Type templates\n    CodeTypeTemplate: &CodeTypeTemplate null\n    StringTypeTemplate: &StringTypeTemplate !!js/function >\n        (str) => {\n          let newStr = str;\n          if (\n            (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n            (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n            newStr = str.substr(1, str.length - 2);\n          }\n          return `'${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}'`;\n        }\n    RegexTypeTemplate: &RegexTypeTemplate !!js/function >\n        (pattern, flags) => {\n            const str = pattern;\n            let newStr = str;\n            if (\n              (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n              (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                newStr = str.substr(1, str.length - 2);\n            }\n            pattern = `'${newStr.replace(/\\\\([\\s\\S])|(')/g, '\\\\$1$2')}'`;\n            return `RegExp(${pattern}${flags ? ', ' + '\\'' + flags + '\\'': ''})`;\n        }\n    BoolTypeTemplate: &BoolTypeTemplate !!js/function >\n        (literal) => {\n            return literal.toLowerCase();\n        }\n    IntegerTypeTemplate: &IntegerTypeTemplate null\n    DecimalTypeTemplate: &DecimalTypeTemplate null\n    LongBasicTypeTemplate: &LongBasicTypeTemplate null\n    HexTypeTemplate: &HexTypeTemplate null\n    OctalTypeTemplate: &OctalTypeTemplate null\n    NumericTypeTemplate: &NumericTypeTemplate null\n    ArrayTypeTemplate: &ArrayTypeTemplate !!js/function >\n        (literal, depth) => {\n            depth++;\n            if (literal === '') {\n                return '[]'\n            }\n            const indent = '\\n' + '  '.repeat(depth);\n            const closingIndent = '\\n' + '  '.repeat(depth - 1);\n\n            return `[${indent}${literal}${closingIndent}]`;\n        }\n    ArrayTypeArgsTemplate: &ArrayTypeArgsTemplate null\n    NullTypeTemplate: &NullTypeTemplate !!js/function >\n        () => {\n            return 'null';\n        }\n    UndefinedTypeTemplate: &UndefinedTypeTemplate !!js/function >\n        () => {\n            return 'undefined';\n        }\n    ObjectTypeTemplate: &ObjectTypeTemplate !!js/function >\n        (literal) => {\n            if (literal === '') {\n                return '{}';\n            }\n            return literal;\n        }\n    ObjectTypeArgsTemplate: &ObjectTypeArgsTemplate !!js/function >\n        (args, depth) => {\n            if (args.length === 0) {\n                return '{}';\n            }\n            depth++;\n            const stringify = (str) => {\n                let newStr = str;\n                if (\n                  (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                  (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                    newStr = str.substr(1, str.length - 2);\n                }\n                return `'${newStr.replace(/\\\\([\\s\\S])|(')/g, '\\\\$1$2')}'`;\n            }\n            const indent = '\\n' + '  '.repeat(depth);\n            const closingIndent = '\\n' + '  '.repeat(depth - 1);\n            const pairs = args.map((arg) => {\n                return `${indent}${stringify(arg[0])}: ${arg[1]}`;\n            }).join(', ');\n\n            return `{${pairs}${closingIndent}}`\n        }\n    # BSON Object Method templates\n    CodeCodeTemplate: &CodeCodeTemplate null\n    CodeCodeArgsTemplate: &CodeCodeArgsTemplate null\n    CodeScopeTemplate: &CodeScopeTemplate null\n    CodeScopeArgsTemplate: &CodeScopeArgsTemplate null\n    ObjectIdToStringTemplate: &ObjectIdToStringTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.toString()`;\n        }\n    ObjectIdToStringArgsTemplate: &ObjectIdToStringArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    ObjectIdEqualsTemplate: &ObjectIdEqualsTemplate null\n    ObjectIdEqualsArgsTemplate: &ObjectIdEqualsArgsTemplate null\n    ObjectIdGetTimestampTemplate: &ObjectIdGetTimestampTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getTimestamp()`;\n        }\n    ObjectIdGetTimestampArgsTemplate: &ObjectIdGetTimestampArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    BinaryValueTemplate: &BinaryValueTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.hex`;\n        }\n    BinaryValueArgsTemplate: &BinaryValueArgsTemplate null\n    BinaryLengthTemplate: &BinaryLengthTemplate null\n    BinaryLengthArgsTemplate: &BinaryLengthArgsTemplate null\n    BinaryToStringTemplate: &BinaryToStringTemplate null\n    BinaryToStringArgsTemplate: &BinaryToStringArgsTemplate null\n    BinarySubtypeTemplate: &BinarySubtypeTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.subtype()`;\n        }\n    BinarySubtypeArgsTemplate: &BinarySubtypeArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    DBRefGetDBTemplate: &DBRefGetDBTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getDb()`;\n        }\n    DBRefGetDBArgsTemplate: &DBRefGetDBArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    DBRefGetCollectionTemplate: &DBRefGetCollectionTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getCollection()`;\n        }\n    DBRefGetCollectionArgsTemplate: &DBRefGetCollectionArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    DBRefGetIdTemplate: &DBRefGetIdTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getId()`;\n        }\n    DBRefGetIdArgsTemplate: &DBRefGetIdArgsTemplate !!js/function >\n        () => {\n            '';\n        }\n    LongEqualsTemplate: &LongEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} ===`;\n        }\n    LongEqualsArgsTemplate: &LongEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongToStringTemplate: &LongToStringTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.toString`;\n        }\n    LongToStringArgsTemplate: &LongToStringArgsTemplate null\n    LongToIntTemplate: &LongToIntTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.valueOf`;\n        }\n    LongToIntArgsTemplate: &LongToIntArgsTemplate null\n    LongToNumberTemplate: &LongToNumberTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.floatApprox`;\n        }\n    LongToNumberArgsTemplate: &LongToNumberArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongAddTemplate: &LongAddTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} +`;\n        }\n    LongAddArgsTemplate: &LongAddArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongSubtractTemplate: &LongSubtractTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} -`;\n        }\n    LongSubtractArgsTemplate: &LongSubtractArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongMultiplyTemplate: &LongMultiplyTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} *`;\n        }\n    LongMultiplyArgsTemplate: &LongMultiplyArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongDivTemplate: &LongDivTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} /`;\n        }\n    LongDivArgsTemplate: &LongDivArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongModuloTemplate: &LongModuloTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} %`;\n        }\n    LongModuloArgsTemplate: &LongModuloArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongAndTemplate: &LongAndTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} &`;\n        }\n    LongAndArgsTemplate: &LongAndArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongOrTemplate: &LongOrTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} |`;\n        }\n    LongOrArgsTemplate: &LongOrArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongXorTemplate: &LongXorTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} ^`;\n        }\n    LongXorArgsTemplate: &LongXorArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongShiftLeftTemplate: &LongShiftLeftTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <<`;\n        }\n    LongShiftLeftArgsTemplate: &LongShiftLeftArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongShiftRightTemplate: &LongShiftRightTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >>`;\n        }\n    LongShiftRightArgsTemplate: &LongShiftRightArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongCompareTemplate: &LongCompareTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} -`;\n        }\n    LongCompareArgsTemplate: &LongCompareArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongIsOddTemplate: &LongIsOddTemplate !!js/function >\n        (lhs) => {\n            return `(${lhs} % 2) === 1`;\n        }\n    LongIsOddArgsTemplate: &LongIsOddArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongIsZeroTemplate: &LongIsZeroTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} === 0`;\n        }\n    LongIsZeroArgsTemplate: &LongIsZeroArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongIsNegativeTemplate: &LongIsNegativeTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} < 0`;\n        }\n    LongIsNegativeArgsTemplate: &LongIsNegativeArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongNegateTemplate: &LongNegateTemplate !!js/function >\n        () => {\n            return '-';\n        }\n    LongNegateArgsTemplate: &LongNegateArgsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}`;\n        }\n    LongNotTemplate: &LongNotTemplate !!js/function >\n        () => {\n            return '~';\n        }\n    LongNotArgsTemplate: &LongNotArgsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}`;\n        }\n    LongNotEqualsTemplate: &LongNotEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} !==`;\n        }\n    LongNotEqualsArgsTemplate: &LongNotEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongGreaterThanTemplate: &LongGreaterThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >`;\n        }\n    LongGreaterThanArgsTemplate: &LongGreaterThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongGreaterThanOrEqualTemplate: &LongGreaterThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >=`;\n        }\n    LongGreaterThanOrEqualArgsTemplate: &LongGreaterThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongLessThanTemplate: &LongLessThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <`;\n        }\n    LongLessThanArgsTemplate: &LongLessThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongLessThanOrEqualTemplate: &LongLessThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <=`;\n        }\n    LongLessThanOrEqualArgsTemplate: &LongLessThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongFloatApproxTemplate: &LongFloatApproxTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.floatValue()`;\n        }\n    LongTopTemplate: &LongTopTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >> 32`;\n        }\n    LongBottomTemplate: &LongBottomTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} & 0x0000ffff`;\n        }\n    TimestampToStringTemplate: &TimestampToStringTemplate null\n    TimestampToStringArgsTemplate: &TimestampToStringArgsTemplate null\n    TimestampEqualsTemplate: &TimestampEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} ===`;\n        }\n    TimestampEqualsArgsTemplate: &TimestampEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    TimestampGetLowBitsTemplate: &TimestampGetLowBitsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getTime`;\n        }\n    TimestampGetLowBitsArgsTemplate: &TimestampGetLowBitsArgsTemplate null\n    TimestampGetHighBitsTemplate: &TimestampGetHighBitsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getInc`;\n        }\n    TimestampGetHighBitsArgsTemplate: &TimestampGetHighBitsArgsTemplate null\n    TimestampTTemplate: &TimestampTTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getTime()`;\n        }\n    TimestampITemplate: &TimestampITemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getInc()`;\n        }\n    TimestampAsDateTemplate: &TimestampAsDateTemplate !!js/function >\n        (lhs) => {\n            return `new Date(${lhs}.getHighBits() * 1000)`;\n        }\n    TimestampAsDateArgsTemplate: &TimestampAsDateArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    TimestampCompareTemplate: &TimestampCompareTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} -`;\n        }\n    TimestampCompareArgsTemplate: &TimestampCompareArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    TimestampNotEqualsTemplate: &TimestampNotEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} !==`;\n        }\n    TimestampNotEqualsArgsTemplate: &TimestampNotEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    TimestampGreaterThanTemplate: &TimestampGreaterThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >`;\n        }\n    TimestampGreaterThanArgsTemplate: &TimestampGreaterThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    TimestampGreaterThanOrEqualTemplate: &TimestampGreaterThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >=`;\n        }\n    TimestampGreaterThanOrEqualArgsTemplate: &TimestampGreaterThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    TimestampLessThanTemplate: &TimestampLessThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <`;\n        }\n    TimestampLessThanArgsTemplate: &TimestampLessThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    TimestampLessThanOrEqualTemplate: &TimestampLessThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <=`;\n        }\n    TimestampLessThanOrEqualArgsTemplate: &TimestampLessThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    SymbolValueOfTemplate: &SymbolValueOfTemplate !!js/function >\n        (lhs) => {\n            return lhs;\n        }\n    SymbolValueOfArgsTemplate: &SymbolValueOfArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    SymbolInspectTemplate: &SymbolInspectTemplate !!js/function >\n        (lhs) => {\n            return lhs;\n        }\n    SymbolInspectArgsTemplate: &SymbolInspectArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    SymbolToStringTemplate: &SymbolToStringTemplate !!js/function >\n        (lhs) => {\n            return lhs;\n        }\n    SymbolToStringArgsTemplate: &SymbolToStringArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    # Symbol Templates\n    CodeSymbolTemplate: &CodeSymbolTemplate null\n    CodeSymbolArgsTemplate: &CodeSymbolArgsTemplate !!js/function >\n        (lhs, code, scope) => {\n            scope = scope === undefined ? '' : `, ${scope}`;\n            // Single quote stringify\n            let newStr = code === undefined ? '' : code;\n            const str = newStr;\n            if (\n              (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n              (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                newStr = str.substr(1, str.length - 2);\n            }\n            code = `'${newStr.replace(/\\\\([\\s\\S])|(')/g, '\\\\$1$2')}'`;\n            return `(${code}${scope})`;\n        }\n    ObjectIdSymbolTemplate: &ObjectIdSymbolTemplate null\n    ObjectIdSymbolArgsTemplate: &ObjectIdSymbolArgsTemplate !!js/function >\n        (lhs, str) => {\n          if (!str || str.length === 0) {\n            return '()';\n          }\n          let newStr = str;\n          if (\n            (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n            (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n            newStr = str.substr(1, str.length - 2);\n          }\n          return `('${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}')`;\n        }\n    BinarySymbolTemplate: &BinarySymbolTemplate !!js/function >\n        () => {\n            return 'BinData';\n        }\n    BinarySymbolArgsTemplate: &BinarySymbolArgsTemplate !!js/function >\n        (lhs, bytes, type) => {\n            const str = bytes;\n            let newStr = str;\n            if (\n              (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n              (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                newStr = str.substr(1, str.length - 2);\n            }\n            bytes = `'${newStr.replace(/\\\\([\\s\\S])|(')/g, '\\\\$1$2')}'`;\n\n            if (type === null) {\n                type = '0';\n            }\n            return `(${type}, ${bytes})`;\n        }\n    BinarySymbolSubtypeDefaultTemplate: &BinarySymbolSubtypeDefaultTemplate !!js/function >\n        () => {\n            return '0';\n        }\n    BinarySymbolSubtypeFunctionTemplate: &BinarySymbolSubtypeFunctionTemplate !!js/function >\n        () => {\n            return '1';\n        }\n    BinarySymbolSubtypeByteArrayTemplate: &BinarySymbolSubtypeByteArrayTemplate !!js/function >\n        () => {\n            return '2';\n        }\n    BinarySymbolSubtypeUuidOldTemplate: &BinarySymbolSubtypeUuidOldTemplate !!js/function >\n        () => {\n            return '3';\n        }\n    BinarySymbolSubtypeUuidTemplate: &BinarySymbolSubtypeUuidTemplate !!js/function >\n        () => {\n            return '4';\n        }\n    BinarySymbolSubtypeMd5Template: &BinarySymbolSubtypeMd5Template !!js/function >\n        () => {\n            return '5';\n        }\n    BinarySymbolSubtypeUserDefinedTemplate: &BinarySymbolSubtypeUserDefinedTemplate !!js/function >\n        () => {\n            return '80';\n        }\n    DBRefSymbolTemplate: &DBRefSymbolTemplate null\n    DBRefSymbolArgsTemplate: &DBRefSymbolArgsTemplate null\n    DoubleSymbolTemplate: &DoubleSymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    DoubleSymbolArgsTemplate: &DoubleSymbolArgsTemplate !!js/function >\n        (_, str) => {\n            // Remove quotes\n            let newStr = str;\n            if (\n              (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n              (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                newStr = str.substr(1, str.length - 2);\n            }\n            return newStr;\n        }\n    Int32SymbolTemplate: &Int32SymbolTemplate !!js/function >\n        () => {\n            return 'NumberInt';\n        }\n    Int32SymbolArgsTemplate: &Int32SymbolArgsTemplate !!js/function >\n        (lhs, arg) => {\n            arg = arg === undefined ? 0 : arg;\n            return `(${arg})`;\n        }\n    LongSymbolTemplate: &LongSymbolTemplate !!js/function >\n        () => {\n            return 'NumberLong';\n        }\n    LongSymbolArgsTemplate: &LongSymbolArgsTemplate !!js/function >\n        (lhs, arg) => {\n            arg = arg === undefined ? 0 : arg;\n            return `(${arg})`;\n        }\n    LongSymbolMaxTemplate: &LongSymbolMaxTemplate !!js/function >\n        () => {\n            return 'Math.max()';\n        }\n    LongSymbolMaxArgsTemplate: &LongSymbolMaxArgsTemplate null\n    LongSymbolMinTemplate: &LongSymbolMinTemplate !!js/function >\n        () => {\n            return 'Math.min()';\n        }\n    LongSymbolMinArgsTemplate: &LongSymbolMinArgsTemplate null\n    LongSymbolZeroTemplate: &LongSymbolZeroTemplate !!js/function >\n        () => {\n            return 0;\n        }\n    LongSymbolZeroArgsTemplate: &LongSymbolZeroArgsTemplate null\n    LongSymbolOneTemplate: &LongSymbolOneTemplate !!js/function\n        () => {\n            return 1;\n        }\n    LongSymbolOneArgsTemplate: &LongSymbolOneArgsTemplate null\n    LongSymbolNegOneTemplate: &LongSymbolNegOneTemplate !!js/function\n        () => {\n            return -1;\n        }\n    LongSymbolNegOneArgsTemplate: &LongSymbolNegOneArgsTemplate null\n    LongSymbolFromBitsTemplate: &LongSymbolFromBitsTemplate !!js/function > # Also has process method\n        (lhs) => {\n            return lhs;\n        }\n    LongSymbolFromBitsArgsTemplate: &LongSymbolFromBitsArgsTemplate null # Also has process method\n    LongSymbolFromIntTemplate: &LongSymbolFromIntTemplate !!js/function >\n        (lhs) => {\n            return `new ${lhs}`;\n        }\n    LongSymbolFromIntArgsTemplate: &LongSymbolFromIntArgsTemplate null\n    LongSymbolFromNumberTemplate: &LongSymbolFromNumberTemplate !!js/function >\n        (lhs) => {\n            return `new ${lhs}`;\n        }\n    LongSymbolFromNumberArgsTemplate: &LongSymbolFromNumberArgsTemplate null\n    LongSymbolFromStringTemplate: &LongSymbolFromStringTemplate !!js/function >\n        (lhs) => {\n            return `new ${lhs}`;\n        }\n    LongSymbolFromStringArgsTemplate: &LongSymbolFromStringArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `(${arg})`;\n        }\n    MinKeySymbolTemplate: &MinKeySymbolTemplate null\n    MinKeySymbolArgsTemplate: &MinKeySymbolArgsTemplate null\n    MaxKeySymbolTemplate: &MaxKeySymbolTemplate null\n    MaxKeySymbolArgsTemplate: &MaxKeySymbolArgsTemplate null\n    TimestampSymbolTemplate: &TimestampSymbolTemplate null\n    TimestampSymbolArgsTemplate: &TimestampSymbolArgsTemplate null\n    SymbolSymbolTemplate: &SymbolSymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    SymbolSymbolArgsTemplate: &SymbolSymbolArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return arg;\n        }\n    BSONRegExpSymbolTemplate: &BSONRegExpSymbolTemplate !!js/function >\n        () => {\n            return 'RegExp';\n        }\n    BSONRegExpSymbolArgsTemplate: &BSONRegExpSymbolArgsTemplate !!js/function >\n        (lhs, pattern, flags) => {\n            const singleStringify = (str) => {\n                let newStr = str;\n                if (\n                  (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                  (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                    newStr = str.substr(1, str.length - 2);\n                }\n                return `'${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}'`;\n            }\n\n            return `(${singleStringify(pattern)}${flags ? ', ' + singleStringify(flags) : ''})`;\n        }\n    Decimal128SymbolTemplate: &Decimal128SymbolTemplate !!js/function >\n        () => {\n            return 'NumberDecimal';\n        }\n    Decimal128SymbolArgsTemplate: &Decimal128SymbolArgsTemplate null\n    Decimal128SymbolFromStringTemplate: &Decimal128SymbolFromStringTemplate !!js/function >\n        (lhs) => {\n            return `new ${lhs}`;\n        }\n    Decimal128SymbolFromStringArgsTemplate: &Decimal128SymbolFromStringArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `(${arg})`;\n        }\n    Decimal128ToStringTemplate: &Decimal128ToStringTemplate null\n    Decimal128ToStringArgsTemplate: &Decimal128ToStringArgsTemplate null\n    # BSON Util Templates\n    ObjectIdCreateFromHexStringTemplate: &ObjectIdCreateFromHexStringTemplate !!js/function >\n        () => {\n            return 'new ObjectId';\n        }\n    ObjectIdCreateFromHexStringArgsTemplate: &ObjectIdCreateFromHexStringArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `(${arg})`;\n        }\n    ObjectIdCreateFromTimeTemplate: &ObjectIdCreateFromTimeTemplate !!js/function >\n        () => {\n            return `ObjectId.fromDate`;\n        }\n    ObjectIdCreateFromTimeArgsTemplate: &ObjectIdCreateFromTimeArgsTemplate !!js/function >\n        (lhs, arg, isNumber) => {\n            if (isNumber) {\n                return `(new Date(${arg * 1000}))`;\n            }\n            return `(${arg})`;\n        }\n    ObjectIdIsValidTemplate: &ObjectIdIsValidTemplate !!js/function >\n        (lhs) => {\n            return 'new ObjectId';\n        }\n    ObjectIdIsValidArgsTemplate: &ObjectIdIsValidArgsTemplate null\n    # JS Symbol Templates\n    NumberSymbolTemplate: &NumberSymbolTemplate !!js/function >\n        () => {\n            return 'Number';\n        }\n    NumberSymbolArgsTemplate: &NumberSymbolArgsTemplate null\n    DateSymbolTemplate: &DateSymbolTemplate !!js/function >\n        () => {\n            return 'Date';\n        }\n    DateSymbolArgsTemplate: &DateSymbolArgsTemplate null\n    DateSymbolNowTemplate: &DateSymbolNowTemplate !!js/function >\n        () => {\n            return 'Date.now';\n        }\n    DateSymbolNowArgsTemplate: &DateSymbolNowArgsTemplate null\n    RegExpSymbolTemplate: &RegExpSymbolTemplate !!js/function >\n        () => {\n            return 'RegExp';\n        }\n    RegExpSymbolArgsTemplate: &RegExpSymbolArgsTemplate null\n    ImportTemplate: &ImportTemplate null\n    DriverImportTemplate: &DriverImportTemplate null\n    0ImportTemplate: &0ImportTemplate null\n    1ImportTemplate: &1ImportTemplate null\n    2ImportTemplate: &2ImportTemplate null\n    3ImportTemplate: &3ImportTemplate null\n    4ImportTemplate: &4ImportTemplate null\n    5ImportTemplate: &5ImportTemplate null\n    6ImportTemplate: &6ImportTemplate null\n    7ImportTemplate: &7ImportTemplate null\n    8ImportTemplate: &8ImportTemplate null\n    9ImportTemplate: &9ImportTemplate null\n    10ImportTemplate: &10ImportTemplate null\n    11ImportTemplate: &11ImportTemplate null\n    12ImportTemplate: &12ImportTemplate null\n    100ImportTemplate: &100ImportTemplate null\n    101ImportTemplate: &101ImportTemplate null\n    102ImportTemplate: &102ImportTemplate null\n    103ImportTemplate: &103ImportTemplate null\n    104ImportTemplate: &104ImportTemplate null\n    105ImportTemplate: &105ImportTemplate null\n    106ImportTemplate: &106ImportTemplate null\n    107ImportTemplate: &107ImportTemplate null\n    108ImportTemplate: &108ImportTemplate null\n    109ImportTemplate: &109ImportTemplate null\n    110ImportTemplate: &110ImportTemplate null\n    111ImportTemplate: &111ImportTemplate null\n    112ImportTemplate: &112ImportTemplate null\n    113ImportTemplate: &113ImportTemplate null\n    114ImportTemplate: &114ImportTemplate null\n    200ImportTemplate: &200ImportTemplate null\n    201ImportTemplate: &201ImportTemplate null\n    300ImportTemplate: &300ImportTemplate null\n    301ImportTemplate: &301ImportTemplate null\n    302ImportTemplate: &302ImportTemplate null\n    303ImportTemplate: &303ImportTemplate null\n    304ImportTemplate: &304ImportTemplate null\n    305ImportTemplate: &305ImportTemplate null\n    306ImportTemplate: &306ImportTemplate null\n# Universal types\n# Everything inherits from StringType because we haven't implemented any of them.\nBasicTypes:\n    # Universal basic types\n    _bool: &BoolType\n        <<: *__type\n        id: \"_bool\"\n        code: 0\n        template: *BoolTypeTemplate\n    _integer: &IntegerType\n        <<: *__type\n        id: \"_integer\"\n        code: 1\n        template: *IntegerTypeTemplate\n    _long: &LongBasicType\n        <<: *__type\n        id: \"_long\"\n        code: 2\n        template: *LongBasicTypeTemplate\n    _decimal: &DecimalType\n        <<: *__type\n        id: \"_decimal\"\n        code: 3\n        template: *DecimalTypeTemplate\n    _hex: &HexType\n        <<: *__type\n        id: \"_hex\"\n        code: 4\n        template: *HexTypeTemplate\n    _octal: &OctalType\n        <<: *__type\n        id: \"_octal\"\n        code: 5\n        template: *OctalTypeTemplate\n    _numeric: &NumericType\n        <<: *__type\n        id: \"_numeric\"\n        code: 6\n        template: *NumericTypeTemplate\n    _string: &StringType\n        <<: *__type\n        id: \"_string\"\n        code: 7\n        template: *StringTypeTemplate\n    _regex: &RegexType\n        <<: *__type\n        id: \"_regex\"\n        code: 8\n        template: *RegexTypeTemplate\n    _array: &ArrayType\n        <<: *__type\n        id: \"_array\"\n        code: 9\n        template: *ArrayTypeTemplate\n        argsTemplate: *ArrayTypeArgsTemplate\n    _object: &ObjectType\n        <<: *__type\n        id: \"_object\"\n        code: 10\n        template: *ObjectTypeTemplate\n        argsTemplate: *ObjectTypeArgsTemplate\n    _null: &NullType\n        <<: *__type\n        id: \"_null\"\n        code: 11\n        template: *NullTypeTemplate\n    _undefined: &UndefinedType\n        <<: *__type\n        id: \"_undefined\"\n        code: 12\n        template: *UndefinedTypeTemplate\n\nSyntax:\n    equality:\n        template: *EqualitySyntaxTemplate\n    in:\n        template: *InSyntaxTemplate\n    and:\n        template: *AndSyntaxTemplate\n    or:\n        template: *OrSyntaxTemplate\n    not:\n        template: *NotSyntaxTemplate\n    unary:\n        template: *UnarySyntaxTemplate\n    binary:\n        template: *BinarySyntaxTemplate\n    parens:\n        template: *ParensSyntaxTemplate\n    eos:\n        template: *EosSyntaxTemplate\n    eof:\n        template: *EofSyntaxTemplate\n    # The new template takes in expr, and an optional skip argument and optional\n    # id argument. The skip argument is a boolean that if true then doesn't add\n    # new. The code argument is the symbol code being called. The template will check\n    # if it is an exception, i.e. a type that is a constructor but may not use new.\n    new:\n        template: *NewSyntaxTemplate\n    # The regex flags that change symbols between languages can be defined here.\n    # Flags that aren't defined can be left blank and will be ignored.\n    regexFlags: *RegexFlags\n    bsonRegexFlags: *BSONRegexFlags\n    driver: *DriverTemplate\nImports:\n    import:\n        template: *ImportTemplate\n    driver:\n        template: *DriverImportTemplate\n    0:\n        template: *0ImportTemplate\n    1:\n        template: *1ImportTemplate\n    2:\n        template: *2ImportTemplate\n    3:\n        template: *3ImportTemplate\n    4:\n        template: *4ImportTemplate\n    5:\n        template: *5ImportTemplate\n    6:\n        template: *6ImportTemplate\n    7:\n        template: *7ImportTemplate\n    8:\n        template: *8ImportTemplate\n    9:\n        template: *9ImportTemplate\n    10:\n        template: *10ImportTemplate\n    11:\n        template: *11ImportTemplate\n    12:\n        template: *12ImportTemplate\n    100:\n        template: *100ImportTemplate\n    101:\n        template: *101ImportTemplate\n    102:\n        template: *102ImportTemplate\n    103:\n        template: *103ImportTemplate\n    104:\n        template: *104ImportTemplate\n    105:\n        template: *105ImportTemplate\n    106:\n        template: *106ImportTemplate\n    107:\n        template: *107ImportTemplate\n    108:\n        template: *108ImportTemplate\n    109:\n        template: *109ImportTemplate\n    110:\n        template: *110ImportTemplate\n    111:\n        template: *111ImportTemplate\n    112:\n        template: *112ImportTemplate\n    113:\n        template: *113ImportTemplate\n    114:\n        template: *114ImportTemplate\n    200:\n        template: *200ImportTemplate\n    201:\n        template: *201ImportTemplate\n    300:\n        template: *300ImportTemplate\n    301:\n        template: *301ImportTemplate\n    302:\n        template: *302ImportTemplate\n    303:\n        template: *303ImportTemplate\n    304:\n        template: *304ImportTemplate\n    305:\n        template: *305ImportTemplate\n    306:\n        template: *306ImportTemplate\nNativeTypes:\n    Date: &DateType\n        <<: *__type\n        id: \"Date\"\n        code: 200\n        type: *ObjectType\n        attr: {} # TODO: no built-in date methods added yet\n    int: &intType\n        <<: *__type\n        id: \"int\"\n        code: 105\n        type: *IntegerType\n        attr: {}\n    float: &floatType\n        <<: *__type\n        id: \"float\"\n        code: 104\n        type: *IntegerType\n        attr: {}\nBsonTypes:\n    Code: &CodeType\n        <<: *__type\n        id: \"Code\"\n        code: 100\n        type: *ObjectType\n        attr:\n            scope:\n                callable: *var\n                args: null\n                attr: null\n                id: \"scope\"\n                type: *ObjectType\n                template: *CodeScopeTemplate\n                argsTemplate: *CodeScopeArgsTemplate\n    ObjectId: &ObjectIdType\n        <<: *__type\n        id: \"ObjectId\"\n        code: 101\n        type: *ObjectType\n        attr:\n            binary:\n                callable: *var\n                args: null\n                attr: null\n                type: *StringType\n                template: *ObjectIdToStringTemplate\n                argsTemplate: *ObjectIdToStringArgsTemplate\n            generation_time:\n                callable: *var\n                args: null\n                attr: null\n                id: \"db\"\n                type: *DateType\n                template: *ObjectIdGetTimestampTemplate\n                argsTemplate: *ObjectIdGetTimestampArgsTemplate\n    Binary: &BinaryType # Not currently supported\n        <<: *__type\n        id: \"Binary\"\n        code: 102\n        type: *ObjectType\n    DBRef: &DBRefType\n        <<: *__type\n        id: \"DBRef\"\n        code: 103\n        type: *ObjectType\n        attr:\n            database:\n                callable: *var\n                args: null\n                attr: null\n                id: \"db\"\n                type: *StringType\n                template: *DBRefGetDBTemplate\n                argsTemplate: *DBRefGetDBArgsTemplate\n            collection:\n                callable: *var\n                args: null\n                attr: null\n                id: \"collection\"\n                type: *StringType\n                template: *DBRefGetCollectionTemplate\n                argsTemplate: *DBRefGetCollectionArgsTemplate\n            id:\n                callable: *var\n                args: null\n                attr: null\n                id: \"id\"\n                type: *StringType\n                template: *DBRefGetIdTemplate\n                argsTemplate: *DBRefGetIdArgsTemplate\n    Int64: &LongType\n        <<: *__type\n        id: \"Int64\"\n        code: 106\n        type: *ObjectType\n        attr: {}\n    MinKey: &MinKeyType\n        <<: *__type\n        id: \"MinKey\"\n        code: 107\n        type: *ObjectType\n    MaxKey: &MaxKeyType\n        <<: *__type\n        id: \"MaxKey\"\n        code: 108\n        type: *ObjectType\n    Regex: &BSONRegExpType\n        <<: *__type\n        id: \"BSONRegExp\"\n        code: 109\n        type: *ObjectType\n    Timestamp: &TimestampType\n        <<: *__type\n        id: \"Timestamp\"\n        code: 110\n        type: *ObjectType\n        attr:\n            time:\n                callable: *var\n                args: null\n                attr: null\n                id: \"time\"\n                type: *IntegerType\n                template: *TimestampTTemplate\n                argsTemplate: null\n            inc:\n                callable: *var\n                args: null\n                attr: null\n                id: \"inc\"\n                type: *IntegerType\n                template: *TimestampITemplate\n                argsTemplate: null\n            as_datetime:\n                <<: *__func\n                id: \"inc\"\n                type: *DateType\n                template: *TimestampAsDateTemplate\n                argsTemplate: *TimestampAsDateArgsTemplate\n    Decimal128: &Decimal128Type\n        <<: *__type\n        id: \"Decimal128\"\n        code: 112\n        type: *ObjectType\n        attr: {}\nBsonSymbols:\n    Code: &CodeSymbol\n        id: \"Code\"\n        code: 100\n        callable: *constructor\n        args:\n            - [ *StringType ]\n            - [ *ObjectType, null ]\n        namedArgs:\n            scope:\n                default: {}\n                type: [ *ObjectType ]\n        type: *CodeType\n        attr: {}\n        template: *CodeSymbolTemplate\n        argsTemplate: *CodeSymbolArgsTemplate\n    ObjectId: &ObjectIdSymbol\n        id: \"ObjectId\"\n        code: 101\n        callable: *constructor\n        args:\n            - [ *StringType, null ]\n        namedArgs:\n            oid:\n                default: null\n                type: [ *StringType, *ObjectIdType ]\n        type: *ObjectIdType\n        attr:\n            from_datetime:\n                <<: *__func\n                id: \"ObjectIdfrom_datetime\"\n                args:\n                    - [ \"Date\" ]\n                type: *ObjectIdType\n                template: *ObjectIdCreateFromTimeTemplate\n                argsTemplate: *ObjectIdCreateFromTimeArgsTemplate\n            is_valid:\n                <<: *__func\n                id: \"is_valid\"\n                args:\n                    - [ *StringType,  ]\n                type: *BoolType\n                template: *ObjectIdIsValidTemplate\n                argsTemplate: *ObjectIdIsValidArgsTemplate\n        template: *ObjectIdSymbolTemplate\n        argsTemplate: *ObjectIdSymbolArgsTemplate\n    Binary: &BinarySymbol # Not currently supported\n        id: \"Binary\"\n        code: 102\n        callable: *constructor\n        args: null\n        type: *BinaryType\n        attr: {}\n        template: *BinarySymbolTemplate\n        argsTemplate: *BinarySymbolArgsTemplate\n    DBRef:\n        id: \"DBRef\"\n        code: 103\n        callable: *constructor\n        args:\n            - [ *StringType ]\n            - [ *ObjectIdType, *StringType ]\n            - [ *StringType, null ]\n        namedArgs:\n            database:\n                default: null\n                type: [ *StringType ]\n        type: *DBRefType\n        attr: {}\n        template: *DBRefSymbolTemplate\n        argsTemplate: *DBRefSymbolArgsTemplate\n    Int64:\n        id: \"Int64\"\n        code: 106\n        callable: *constructor\n        args:\n            - [ *IntegerType, *StringType, null ]\n        type: *LongType\n        attr: {}\n        template: *LongSymbolTemplate\n        argsTemplate: *LongSymbolArgsTemplate\n    MinKey:\n        id: \"MinKey\"\n        code: 107\n        callable: *constructor\n        args: []\n        type: *MinKeyType\n        attr: {}\n        template: *MinKeySymbolTemplate\n        argsTemplate: *MinKeySymbolArgsTemplate\n    MaxKey:\n        id: \"MaxKey\"\n        code: 108\n        callable: *constructor\n        args: []\n        type: *MaxKeyType\n        attr: {}\n        template: *MaxKeySymbolTemplate\n        argsTemplate: *MaxKeySymbolArgsTemplate\n    Regex:\n        id: \"Regex\"\n        code: 109\n        callable: *constructor\n        args:\n            - [ *StringType ]\n            - [ *StringType, *IntegerType, null ]\n        namedArgs:\n            flags:\n                default: 0\n                type: [ *StringType, *IntegerType ]\n        type: *BSONRegExpType\n        attr:\n            from_native:\n                <<: *__func\n                id: \"from_native\"\n                args:\n                - [ *RegexType ]\n                type: *BSONRegExpType\n                template: null\n                argsTemplate: null\n        template: *BSONRegExpSymbolTemplate\n        argsTemplate: *BSONRegExpSymbolArgsTemplate\n    Timestamp:\n        id: \"Timestamp\"\n        code: 110\n        callable: *constructor\n        args:\n            - [ *IntegerType ]\n            - [ *IntegerType ]\n        type: *TimestampType\n        attr: {}\n        template: *TimestampSymbolTemplate\n        argsTemplate: *TimestampSymbolArgsTemplate\n    Decimal128:\n        id: \"Decimal128\"\n        code: 112\n        callable: *constructor\n        args:\n            - [ *StringType ]\n        type: *Decimal128Type\n        attr: {}\n        template: *Decimal128SymbolTemplate\n        argsTemplate: *Decimal128SymbolArgsTemplate\n\nNativeSymbols:\n    datetime: # Needs process method\n        id: \"datetime\"\n        code: 200\n        callable: *constructor\n        args:\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n        type: *DateType\n        attr: {} # TODO: add more date funcs?\n        template: *DateSymbolTemplate\n        argsTemplate: *DateSymbolArgsTemplate\n    re:\n        id: \"re\"\n        code: 8\n        callable: *var\n        args: null\n        type: null\n        attr:\n            compile:\n                id: \"compile\"\n                code: 8\n                callable: *constructor\n                args:\n                    - [ *StringType ]\n                    - [ *IntegerType, null ]\n                namedArgs:\n                    flags:\n                        default: 0\n                        type: [ *IntegerType ]\n                type: *RegexType\n                attr: {}\n                template: *RegExpSymbolTemplate\n                argsTemplate: *RegExpSymbolArgsTemplate\n            A:\n                <<: *__type\n                id: 're.A'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '256';\n                    }\n            ASCII:\n                <<: *__type\n                id: 're.ASCII'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '256';\n                    }\n            I:\n                <<: *__type\n                id: 're.I'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '2';\n                    }\n            IGNORECASE:\n                <<: *__type\n                id: 're.IGNORECASE'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '2';\n                    }\n            DEBUG:\n                <<: *__type\n                id: 're.DEBUG'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '128';\n                    }\n            L:\n                <<: *__type\n                id: 're.L'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '4';\n                    }\n            LOCAL:\n                <<: *__type\n                id: 're.LOCAL'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '4';\n                    }\n            M:\n                <<: *__type\n                id: 're.M'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '8';\n                    }\n            MULTILINE:\n                <<: *__type\n                id: 're.MULTILINE'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '8';\n                    }\n            S:\n                <<: *__type\n                id: 're.S'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '16';\n                    }\n            DOTALL:\n                <<: *__type\n                id: 're.DOTALL'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '16';\n                    }\n            X:\n                <<: *__type\n                id: 're.X'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '64';\n                    }\n            VERBOSE:\n                <<: *__type\n                id: 're.VERBOSE'\n                type: *IntegerType\n                template: !!js/function >\n                    () => {\n                        return '64';\n                    }\n        template: !!js/function >\n            () => {\n                return '';\n            }\n        argsTemplate: null\n    float:\n        id: \"float\"\n        code: 104\n        callable: *constructor\n        args:\n        - [ *NumericType, *StringType, null ]\n        type: *floatType\n        attr: {}\n        template: *DoubleSymbolTemplate\n        argsTemplate: *DoubleSymbolArgsTemplate\n    int:\n        id: \"int\"\n        code: 105\n        callable: *constructor\n        args:\n        - [ *NumericType, *StringType, null ]\n        type: *intType\n        attr: {}\n        template: *Int32SymbolTemplate\n        argsTemplate: *Int32SymbolArgsTemplate\n"},40681:e=>{e.exports="SymbolTypes:\n    VAR: &var 0\n    CONSTRUCTOR: &constructor 1\n    FUNC: &func 2\n# Internal patterns to save typing\n__type: &__type\n    id: null\n    callable: *var\n    args: null\n    type: null\n    attr: {}\n    template: null\n    argsTemplate: null\n__func: &__func\n    callable: *func\n    args: []\n    attr: {}\n    template: null\n    argsTemplate: null\n\n# C# Templates\nTemplates:\n    # Misc\n    RegexFlags: &RegexFlags\n        i: 'i'\n        m: 'm'\n        u: ''\n        y: ''\n        g: ''\n    BSONRegexFlags: &BSONRegexFlags\n        i: 'i'\n        m: 'm'\n        x: 'x'\n        s: 's'\n        l: ''\n        u: ''\n    # Syntax\n    DriverTemplate: &DriverTemplate null\n    EqualitySyntaxTemplate: &EqualitySyntaxTemplate !!js/function >\n        (lhs, op, rhs) => {\n            if (op.includes('!') || op.includes('not')) {\n                return `${lhs} != ${rhs}`;\n            }\n            else if (op === '==' || op === '===' || op === 'is') {\n                return `${lhs} == ${rhs}`;\n            }\n            return `${lhs} ${op} ${rhs}`;\n        }\n    InSyntaxTemplate: &InSyntaxTemplate !!js/function >\n        (lhs, op, rhs) => {\n            let str = '!=';\n            if (op.includes('!') || op.includes('not')) {\n                str = '==';\n            }\n            return `${rhs}.indexOf(${lhs}) ${str} -1`\n        }\n    AndSyntaxTemplate: &AndSyntaxTemplate !!js/function >\n        (args) => {\n            return args.join(' && ');\n        }\n    OrSyntaxTemplate: &OrSyntaxTemplate !!js/function >\n        (args) => {\n            return args.join(' || ');\n        }\n    NotSyntaxTemplate: &NotSyntaxTemplate !!js/function >\n        (arg) => {\n            return `!${arg}`;\n        }\n    UnarySyntaxTemplate: &UnarySyntaxTemplate null\n    BinarySyntaxTemplate: &BinarySyntaxTemplate !!js/function >\n        (args) => {\n            return args.reduce((s, op, i, arr) => {\n                if (i % 2 === 0) {\n                    return s;\n                }\n                const rhs = arr[i + 1];\n                switch(op) {\n                    case '//':\n                        return `Math.floor(${s}, ${rhs})`;\n                    case '**':\n                        return `Math.pow(${s}, ${rhs})`;\n                    default:\n                        return `${s} ${op} ${rhs}`;\n                }\n            }, args[0]);\n        }\n    ParensSyntaxTemplate: &ParensSyntaxTemplate null\n    EosSyntaxTemplate: &EosSyntaxTemplate null\n    EofSyntaxTemplate: &EofSyntaxTemplate null\n    NewTemplate: &NewSyntaxTemplate !!js/function >\n        (expr, skip, code) => {\n            // Add classes that don't use \"new\" to array\n            // So far: [Symbol, Decimal128/NumberDecimal, Long/NumberLong, MinKey, MaxKey, Date.now, Double, Int32, Number, Date]\n            noNew = [111, 112, 106, 107, 108, 200.1, 104, 105, 2, 200];\n            if (skip || (code && noNew.indexOf(code) !== -1)) {\n                return expr;\n            }\n            return `new ${expr}`;\n        }\n    # BSON Object Type templates\n    CodeTypeTemplate: &CodeTypeTemplate null\n    StringTypeTemplate: &StringTypeTemplate !!js/function >\n        (str) => {\n            let newStr = str;\n            if (\n              (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n              (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n              newStr = str.substr(1, str.length - 2);\n            }\n            return `\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\"`;\n        }\n    RegexTypeTemplate: &RegexTypeTemplate !!js/function >\n        (pattern, flags) => {\n            flags = flags === '' ? '' : `(?${flags})`;\n            // Double-quote stringify\n            const str = flags + pattern;\n            let newStr = str;\n            if (\n                (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                    newStr = str.substr(1, str.length - 2);\n            }\n            return `Regex(\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\")`;\n        }\n    BoolTypeTemplate: &BoolTypeTemplate !!js/function >\n        (literal) => {\n            return literal.toLowerCase();\n        }\n    IntegerTypeTemplate: &IntegerTypeTemplate null\n    DecimalTypeTemplate: &DecimalTypeTemplate null\n    LongBasicTypeTemplate: &LongBasicTypeTemplate null\n    HexTypeTemplate: &HexTypeTemplate null\n    OctalTypeTemplate: &OctalTypeTemplate !!js/function >\n        (literal) => {\n            literal = literal.replace(/[oO]+/g, '0')\n            return parseInt(literal, 8).toString()\n        }\n    NumericTypeTemplate: &NumericTypeTemplate null\n    ArrayTypeTemplate: &ArrayTypeTemplate !!js/function >\n        (literal, depth) => {\n            depth++;\n            const indent = '\\n' + '    '.repeat(depth);\n            const initialIndent = '\\n' + '    '.repeat(depth-1);\n            if (literal === '') {\n              return 'new BsonArray()'\n            }\n\n            return `new BsonArray${initialIndent}{${literal}${initialIndent}}`;\n        }\n    ArrayTypeArgsTemplate: &ArrayTypeArgsTemplate !!js/function >\n        (arg, depth, last) => {\n            depth++;\n            const indent = '\\n' + '    '.repeat(depth);\n            const arr = arg.split(', new').join(`, ${indent}new`)\n\n            return last ? `${indent}${arr}` : `${indent}${arr},`;\n        }\n    NullTypeTemplate: &NullTypeTemplate !!js/function >\n        () => {\n            return 'BsonNull.Value';\n        }\n    UndefinedTypeTemplate: &UndefinedTypeTemplate !!js/function >\n        () => {\n            return 'BsonUndefined.Value';\n        }\n    ObjectTypeTemplate: &ObjectTypeTemplate !!js/function >\n        (literal) => {\n            if (literal === '') {\n                return `new BsonDocument()`;\n            }\n            return literal;\n        }\n    ObjectTypeArgsTemplate: &ObjectTypeArgsTemplate !!js/function >\n        (args, depth) => {\n            if (args.length === 0) {\n                return 'new BsonDocument()';\n            }\n            depth++;\n            const indent = '\\n' + '    '.repeat(depth);\n            const initialIndent = '\\n' + '    '.repeat(depth-1);\n            const doubleStringify = (str) => {\n                let newStr = str;\n                if (\n                  (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                  (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                    newStr = str.substr(1, str.length - 2);\n                }\n                return `\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\"`;\n            }\n\n            if (args.length === 1) {\n              return `new BsonDocument(${doubleStringify(args[0][0])}, ${args[0][1]})`;\n            }\n\n            const pairs = args.map((pair) => {\n                return `${indent}{ ${doubleStringify(pair[0])}, ${pair[1]} }`;\n            }).join(', ');\n\n            return `new BsonDocument${initialIndent}{${pairs}${initialIndent}}`\n        }\n    # BSON Object Method templates\n    CodeCodeTemplate: &CodeCodeTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.Code`;\n        }\n    CodeCodeArgsTemplate: &CodeCodeArgsTemplate null\n    CodeScopeTemplate: &CodeScopeTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.Scope`;\n        }\n    CodeScopeArgsTemplate: &CodeScopeArgsTemplate null\n    # Since in python, generated from attr access instead of func call, add () in template.\n    ObjectIdToStringTemplate: &ObjectIdToStringTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.ToString()`;\n        }\n    ObjectIdToStringArgsTemplate: &ObjectIdToStringArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    ObjectIdEqualsTemplate: &ObjectIdEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.Equals`;\n        }\n    ObjectIdEqualsArgsTemplate: &ObjectIdEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n            if (arg.indexOf('new') === 0) {\n              arg = arg.replace(/new /g, '')\n            }\n            return `(new ${arg})`;\n        }\n\n    ObjectIdGetTimestampTemplate: &ObjectIdGetTimestampTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.Timestamp`;\n        }\n    ObjectIdGetTimestampArgsTemplate: &ObjectIdGetTimestampArgsTemplate !!js/function >\n        (lhs) => {\n            return '';\n        }\n    BinaryValueTemplate: &BinaryValueTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.ToString`;\n        }\n    BinaryValueArgsTemplate: &BinaryValueArgsTemplate null\n    BinaryLengthTemplate: &BinaryLengthTemplate !!js/function >\n        () => {\n          return '';\n        }\n    BinaryLengthArgsTemplate: &BinaryLengthArgsTemplate !!js/function >\n        (lhs) => {\n          return `${lhs}.Bytes.Length`;\n        }\n    BinaryToStringTemplate: &BinaryToStringTemplate !!js/function >\n        (lhs) => {\n          return `${lhs}.ToString`;\n        }\n    BinaryToStringArgsTemplate: &BinaryToStringArgsTemplate null\n    BinarySubtypeTemplate: &BinarySubtypeTemplate !!js/function >\n        (lhs) => {\n          return `${lhs}.SubType`;\n        }\n    BinarySubtypeArgsTemplate: &BinarySubtypeArgsTemplate !!js/function >\n        () => {\n          return '';\n        }\n    DBRefGetDBTemplate: &DBRefGetDBTemplate !!js/function >\n        (lhs) => {\n          return `${lhs}.DatabaseName`;\n        }\n    DBRefGetDBArgsTemplate: &DBRefGetDBArgsTemplate !!js/function >\n        () => {\n          return '';\n        }\n    DBRefGetCollectionTemplate: &DBRefGetCollectionTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.CollectionName`;\n        }\n    DBRefGetCollectionArgsTemplate: &DBRefGetCollectionArgsTemplate !!js/function >\n        () => {\n          return '';\n        }\n    DBRefGetIdTemplate: &DBRefGetIdTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.Id`;\n        }\n    DBRefGetIdArgsTemplate: &DBRefGetIdArgsTemplate !!js/function >\n        () => {\n          return '';\n        }\n    LongEqualsTemplate: &LongEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} == `;\n        }\n    LongEqualsArgsTemplate: &LongEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n              return `${arg}`;\n        }\n    LongToIntTemplate: &LongToIntTemplate !!js/function >\n        (lhs) => {\n            return `(int) ${lhs}`;\n        }\n    LongToIntArgsTemplate: &LongToIntArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongToStringTemplate: &LongToStringTemplate !!js/function >\n        (lhs) => {\n            return lhs;\n        }\n    LongToStringArgsTemplate: &LongToStringArgsTemplate null\n    LongToNumberTemplate: &LongToNumberTemplate !!js/function >\n        (lhs) => {\n            return `(double) ${lhs}`;\n        }\n    LongToNumberArgsTemplate: &LongToNumberArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongAddTemplate: &LongAddTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} +`;\n        }\n    LongAddArgsTemplate: &LongAddArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongSubtractTemplate: &LongSubtractTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} -`;\n        }\n    LongSubtractArgsTemplate: &LongSubtractArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongMultiplyTemplate: &LongMultiplyTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} *`;\n        }\n    LongMultiplyArgsTemplate: &LongMultiplyArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongDivTemplate: &LongDivTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} /`;\n        }\n    LongDivArgsTemplate: &LongDivArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongModuloTemplate: &LongModuloTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} %`;\n        }\n    LongModuloArgsTemplate: &LongModuloArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongAndTemplate: &LongAndTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} &`;\n        }\n    LongAndArgsTemplate: &LongAndArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongOrTemplate: &LongOrTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} |`;\n        }\n    LongOrArgsTemplate: &LongOrArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongXorTemplate: &LongXorTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} ^`;\n        }\n    LongXorArgsTemplate: &LongXorArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongShiftLeftTemplate: &LongShiftLeftTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <<`;\n        }\n    LongShiftLeftArgsTemplate: &LongShiftLeftArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongShiftRightTemplate: &LongShiftRightTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >>`;\n        }\n    LongShiftRightArgsTemplate: &LongShiftRightArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongCompareTemplate: &LongCompareTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} - `;\n        }\n    LongCompareArgsTemplate: &LongCompareArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return arg;\n        }\n    LongIsOddTemplate: &LongIsOddTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}`;\n        }\n    LongIsOddArgsTemplate: &LongIsOddArgsTemplate !!js/function >\n        () => {\n            return ' % 2 == 1';\n        }\n    LongIsZeroTemplate: &LongIsZeroTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} == 0`;\n        }\n    LongIsZeroArgsTemplate: &LongIsZeroArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongIsNegativeTemplate: &LongIsNegativeTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} < 0`;\n        }\n    LongIsNegativeArgsTemplate: &LongIsNegativeArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongNegateTemplate: &LongNegateTemplate !!js/function >\n        () => {\n            return '-';\n        }\n    LongNegateArgsTemplate: &LongNegateArgsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}`;\n        }\n    LongNotTemplate: &LongNotTemplate !!js/function >\n        () => {\n            return '~';\n        }\n    LongNotArgsTemplate: &LongNotArgsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}`;\n        }\n    LongNotEqualsTemplate: &LongNotEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} !=`;\n        }\n    LongNotEqualsArgsTemplate: &LongNotEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongGreaterThanTemplate: &LongGreaterThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >`;\n        }\n    LongGreaterThanArgsTemplate: &LongGreaterThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongGreaterThanOrEqualTemplate: &LongGreaterThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >=`;\n        }\n    LongGreaterThanOrEqualArgsTemplate: &LongGreaterThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongLessThanTemplate: &LongLessThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <`;\n        }\n    LongLessThanArgsTemplate: &LongLessThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongLessThanOrEqualTemplate: &LongLessThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <=`;\n        }\n    LongLessThanOrEqualArgsTemplate: &LongLessThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongFloatApproxTemplate: &LongFloatApproxTemplate !!js/function >\n        (lhs) => {\n            return `(float) ${lhs}`;\n        }\n    LongTopTemplate: &LongTopTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >> 32`;\n        }\n    LongBottomTemplate: &LongBottomTemplate !!js/function >\n        (lhs) => {\n           return `${lhs} & 0x0000ffff`;\n        }\n    TimestampToStringTemplate: &TimestampToStringTemplate !!js/function >\n        (lhs) => {\n          return `${lhs}.ToString`;\n        }\n    TimestampToStringArgsTemplate: &TimestampToStringArgsTemplate null\n    TimestampEqualsTemplate: &TimestampEqualsTemplate !!js/function >\n        (lhs) => {\n          return `${lhs}.Equals`;\n        }\n    TimestampEqualsArgsTemplate: &TimestampEqualsArgsTemplate null\n    TimestampGetLowBitsTemplate: &TimestampGetLowBitsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.ToUniversalTime`;\n        }\n    TimestampGetLowBitsArgsTemplate: &TimestampGetLowBitsArgsTemplate null\n    TimestampGetHighBitsTemplate: &TimestampGetHighBitsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.Increment`;\n        }\n    TimestampGetHighBitsArgsTemplate: &TimestampGetHighBitsArgsTemplate !!js/function >\n        (lhs) => {\n            return '';\n        }\n    TimestampTTemplate: &TimestampTTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.ToUniversalTime()`;\n        }\n    TimestampITemplate: &TimestampITemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.Increment`;\n        }\n    TimestampAsDateTemplate: &TimestampAsDateTemplate !!js/function >\n        (lhs) => {\n            return `new DateTime(1970, 1, 1).AddSeconds(${lhs}.Timestamp)`;\n        }\n    TimestampAsDateArgsTemplate: &TimestampAsDateArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    TimestampCompareTemplate: &TimestampCompareTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.CompareTo`;\n        }\n    TimestampCompareArgsTemplate: &TimestampCompareArgsTemplate null\n    TimestampNotEqualsTemplate: &TimestampNotEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} != `;\n        }\n    TimestampNotEqualsArgsTemplate: &TimestampNotEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}`;\n        }\n    TimestampGreaterThanTemplate: &TimestampGreaterThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} > `;\n        }\n    TimestampGreaterThanArgsTemplate: &TimestampGreaterThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}`;\n        }\n    TimestampGreaterThanOrEqualTemplate: &TimestampGreaterThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >= `;\n        }\n    TimestampGreaterThanOrEqualArgsTemplate: &TimestampGreaterThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}`;\n        }\n    TimestampLessThanTemplate: &TimestampLessThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} < `;\n        }\n    TimestampLessThanArgsTemplate: &TimestampLessThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}`;\n        }\n    TimestampLessThanOrEqualTemplate: &TimestampLessThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <= `;\n        }\n    TimestampLessThanOrEqualArgsTemplate: &TimestampLessThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}`;\n        }\n    SymbolValueOfTemplate: &SymbolValueOfTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}`;\n        }\n    SymbolValueOfArgsTemplate: &SymbolValueOfArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    SymbolInspectTemplate: &SymbolInspectTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}`;\n        }\n    SymbolInspectArgsTemplate: &SymbolInspectArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    SymbolToStringTemplate: &SymbolToStringTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}`;\n        }\n    SymbolToStringArgsTemplate: &SymbolToStringArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    # Symbol Templates\n    CodeSymbolTemplate: &CodeSymbolTemplate  !!js/function > # Also has process method\n        () => {\n            return 'BsonJavaScript';\n        }\n    CodeSymbolArgsTemplate: &CodeSymbolArgsTemplate !!js/function >\n        (lhs, code, scope) => {\n            // Double quote stringify\n            let newStr = code === undefined ? '' : code;\n            const str = newStr;\n            if (\n                (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                newStr = str.substr(1, str.length - 2);\n            }\n            code = `\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\"`;\n            return (scope === undefined) ? `(${code})` : `WithScope(${code}, ${scope})`;\n        }\n    ObjectIdSymbolTemplate: &ObjectIdSymbolTemplate !!js/function >\n        () => {\n            return 'ObjectId';\n        }\n    ObjectIdSymbolArgsTemplate: &ObjectIdSymbolArgsTemplate !!js/function >\n        (lhs, str) => {\n            if (!str || str.length === 0) {\n                return '()';\n            }\n            let newStr = str;\n            if (\n                (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                newStr = str.substr(1, str.length - 2);\n            }\n            return `(\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\")`;\n        }\n    BinarySymbolTemplate: &BinarySymbolTemplate !!js/function >\n        () => {\n            return 'BsonBinaryData';\n        }\n    BinarySymbolArgsTemplate: &BinarySymbolArgsTemplate !!js/function >\n        (lhs, bytes, type) => {\n            const str = bytes;\n            let newStr = str;\n            if (\n              (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n              (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                newStr = str.substr(1, str.length - 2);\n            }\n            bytes = `\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\"`;\n\n            if (type === null) {\n                return `(System.Text.Encoding.ASCII.GetBytes(${bytes}))`;\n            }\n            return `(System.Text.Encoding.ASCII.GetBytes(${bytes}), ${type})`;\n        }\n    BinarySymbolSubtypeDefaultTemplate: &BinarySymbolSubtypeDefaultTemplate !!js/function >\n        () => {\n            return 'BsonBinarySubType.Binary';\n        }\n    BinarySymbolSubtypeFunctionTemplate: &BinarySymbolSubtypeFunctionTemplate !!js/function >\n        () => {\n            return 'BsonBinarySubType.Function';\n        }\n    BinarySymbolSubtypeByteArrayTemplate: &BinarySymbolSubtypeByteArrayTemplate !!js/function >\n        () => {\n            return 'BsonBinarySubType.OldBinary';\n        }\n    BinarySymbolSubtypeUuidOldTemplate: &BinarySymbolSubtypeUuidOldTemplate !!js/function >\n        () => {\n            return 'BsonBinarySubType.UuidLegacy';\n        }\n    BinarySymbolSubtypeUuidTemplate: &BinarySymbolSubtypeUuidTemplate !!js/function >\n        () => {\n            return 'BsonBinarySubType.UuidStandard';\n        }\n    BinarySymbolSubtypeMd5Template: &BinarySymbolSubtypeMd5Template !!js/function >\n        () => {\n            return 'BsonBinarySubType.MD5';\n        }\n    BinarySymbolSubtypeUserDefinedTemplate: &BinarySymbolSubtypeUserDefinedTemplate !!js/function >\n        () => {\n            return 'BsonBinarySubType.UserDefined';\n        }\n    DBRefSymbolTemplate: &DBRefSymbolTemplate !!js/function >\n        () => {\n            return 'MongoDBRef';\n        }\n    DBRefSymbolArgsTemplate: &DBRefSymbolArgsTemplate null\n    DoubleSymbolTemplate: &DoubleSymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    DoubleSymbolArgsTemplate: &DoubleSymbolArgsTemplate !!js/function >\n        (lhs, arg, type) => {\n            arg = arg === undefined ? 0 : arg;\n\n            if (type === '_hex') {\n              return `Convert.ToDouble(${arg})`;\n            }\n            if (type === '_string') {\n              return `Convert.ToDouble(${arg})`;\n            }\n\n            if (type === '_decimal') {\n              return arg;\n            }\n\n            return `${Math.round(arg).toFixed(1)}`;\n        }\n    Int32SymbolTemplate: &Int32SymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    Int32SymbolArgsTemplate: &Int32SymbolArgsTemplate !!js/function >\n        (lhs, arg, type) => {\n            arg = arg === undefined ? 0 : arg;\n\n            if (type === '_hex' || type === '_decimal' || type === '_string') {\n              return `Convert.ToInt32(${arg})`;\n            }\n\n            return arg;\n        }\n    LongSymbolTemplate: &LongSymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongSymbolArgsTemplate: &LongSymbolArgsTemplate !!js/function >\n        (lhs, arg) => {\n            if (!arg || arg.length === 0) {\n                arg = '0';\n            }\n            if (arg.indexOf('\\'') === 0 || arg.indexOf('\"') === 0) {\n              return `Convert.ToInt64(${arg})`;\n            }\n            return `${arg}L`;\n        }\n    LongSymbolMaxTemplate: &LongSymbolMaxTemplate !!js/function >\n        () => {\n            return 'Int64.MaxValue';\n        }\n    LongSymbolMaxArgsTemplate: &LongSymbolMaxArgsTemplate null\n    LongSymbolMinTemplate: &LongSymbolMinTemplate !!js/function >\n        () => {\n            return 'Int64.MinValue';\n        }\n    LongSymbolMinArgsTemplate: &LongSymbolMinArgsTemplate null\n    LongSymbolZeroTemplate: &LongSymbolZeroTemplate !!js/function >\n        (lhs) => {\n            return '0L';\n        }\n    LongSymbolZeroArgsTemplate: &LongSymbolZeroArgsTemplate null\n    LongSymbolOneTemplate: &LongSymbolOneTemplate !!js/function >\n        (lhs) => {\n            return '1L';\n        }\n    LongSymbolOneArgsTemplate: &LongSymbolOneArgsTemplate null\n    LongSymbolNegOneTemplate: &LongSymbolNegOneTemplate !!js/function >\n        (lhs) => {\n            return '-1L';\n        }\n    LongSymbolNegOneArgsTemplate: &LongSymbolNegOneArgsTemplate null\n    LongSymbolFromBitsTemplate: &LongSymbolFromBitsTemplate !!js/function > # Also has process method\n        () => {\n            return '';\n        }\n    LongSymbolFromBitsArgsTemplate: &LongSymbolFromBitsArgsTemplate null\n    LongSymbolFromIntTemplate: &LongSymbolFromIntTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongSymbolFromIntArgsTemplate: &LongSymbolFromIntArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}L`;\n        }\n    LongSymbolFromNumberTemplate: &LongSymbolFromNumberTemplate null\n    LongSymbolFromNumberArgsTemplate: &LongSymbolFromNumberArgsTemplate null\n    LongSymbolFromStringTemplate: &LongSymbolFromStringTemplate !!js/function >\n        () => {\n            return 'Convert.ToInt64';\n        }\n    LongSymbolFromStringArgsTemplate: &LongSymbolFromStringArgsTemplate !!js/function >\n        (lhs, arg1, arg2) => {\n          if (arg2) {\n            return `(${arg1}, ${arg2})`\n          }\n          return `(${arg1}, 10)`\n        }\n    MinKeySymbolTemplate: &MinKeySymbolTemplate !!js/function >\n        () => {\n            return 'BsonMinKey';\n        }\n    MinKeySymbolArgsTemplate: &MinKeySymbolArgsTemplate !!js/function >\n        () => {\n            return '.Value';\n        }\n    MaxKeySymbolTemplate: &MaxKeySymbolTemplate !!js/function >\n        () => {\n            return 'BsonMaxKey';\n        }\n    MaxKeySymbolArgsTemplate: &MaxKeySymbolArgsTemplate !!js/function >\n        () => {\n            return '.Value';\n        }\n    TimestampSymbolTemplate: &TimestampSymbolTemplate !!js/function >\n        () => {\n            return 'BsonTimestamp';\n        }\n    TimestampSymbolArgsTemplate: &TimestampSymbolArgsTemplate !!js/function >\n        (lhs, arg1, arg2) => {\n            if (typeof arg1 === 'undefined') {\n                return '(0, 0)'\n            }\n            return `(${arg1}, ${arg2})`;\n        }\n    SymbolSymbolTemplate: &SymbolSymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    SymbolSymbolArgsTemplate: &SymbolSymbolArgsTemplate !!js/function >\n        (_, arg) => {\n            return arg; // no parens because generates as a string\n        }\n    BSONRegExpSymbolTemplate: &BSONRegExpSymbolTemplate !!js/function >\n        () => {\n            return 'BsonRegularExpression';\n        }\n    BSONRegExpSymbolArgsTemplate: &BSONRegExpSymbolArgsTemplate !!js/function >\n        (lhs, pattern, flags) => {\n            const doubleStringify = (str) => {\n                let newStr = str;\n                if (\n                  (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                  (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                    newStr = str.substr(1, str.length - 2);\n                }\n                return `\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\"`;\n            }\n            return `(${doubleStringify(pattern)}${flags ? ', ' + doubleStringify(flags) : ''})`;\n        }\n    Decimal128SymbolTemplate: &Decimal128SymbolTemplate !!js/function >\n        () => {\n            return 'Decimal128';\n        }\n    Decimal128SymbolArgsTemplate: &Decimal128SymbolArgsTemplate !!js/function >\n        (_, str) => { // just stringify\n            let newStr = str;\n            if (\n              (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n              (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                newStr = str.substr(1, str.length - 2);\n            }\n            return `.Parse(\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\")`;\n        }\n    Decimal128SymbolFromStringTemplate: &Decimal128SymbolFromStringTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.Parse`;\n        }\n    Decimal128SymbolFromStringArgsTemplate: &Decimal128SymbolFromStringArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `(${arg})`;\n        }\n    Decimal128ToStringTemplate: &Decimal128ToStringTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.ToString`;\n        }\n    Decimal128ToStringArgsTemplate: &Decimal128ToStringArgsTemplate null\n    # BSON Util Templates\n    ObjectIdCreateFromHexStringTemplate: &ObjectIdCreateFromHexStringTemplate !!js/function >\n        (lhs) => {\n            return `new ${lhs}`;\n        }\n    ObjectIdCreateFromHexStringArgsTemplate: &ObjectIdCreateFromHexStringArgsTemplate null\n    ObjectIdCreateFromTimeTemplate: &ObjectIdCreateFromTimeTemplate !!js/function >\n        () => {\n            return `new ObjectId.GenerateNewId`;\n        }\n    ObjectIdCreateFromTimeArgsTemplate: &ObjectIdCreateFromTimeArgsTemplate !!js/function >\n        (lhs, arg, isNumber) => {\n            if (isNumber) {\n              return `(Convert.ToInt32(${arg}))`;\n            }\n            return `(${arg})`;\n        }\n    ObjectIdIsValidTemplate: &ObjectIdIsValidTemplate !!js/function >\n        (lhs) => {\n            return `new ${lhs}`;\n        }\n    ObjectIdIsValidArgsTemplate: &ObjectIdIsValidArgsTemplate null\n    # JS Symbol Templates\n    NumberSymbolTemplate: &NumberSymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    NumberSymbolArgsTemplate: &NumberSymbolArgsTemplate !!js/function >\n        (lhs, arg, type) => {\n            arg = arg === undefined ? 0 : arg;\n\n            if (type === '_string') {\n              if (arg.indexOf('.') !== -1) {\n                return `float.Parse(${arg})`\n              }\n              return `int.Parse(${arg})`;\n            }\n\n            if (arg.indexOf('.') !== -1) {\n              return `(float) ${arg}`\n            }\n            return `(int) ${arg}`;\n        }\n    DateSymbolTemplate: &DateSymbolTemplate !!js/function >\n        () => {\n            return 'DateTime';\n        }\n    DateSymbolArgsTemplate: &DateSymbolArgsTemplate !!js/function >\n        (lhs, date, isString) => {\n            let toStr = isString? '.ToString(\"ddd MMM dd yyyy HH\\':\\'mm\\':\\'ss UTC\")' : '';\n\n            if (date === null) {\n                return `${lhs}.Now${toStr}`;\n            }\n\n            const dateStr = [\n                date.getUTCFullYear(),\n                date.getUTCMonth() + 1,\n                date.getUTCDate(),\n                date.getUTCHours(),\n                date.getUTCMinutes(),\n                date.getUTCSeconds()\n            ].join(', ');\n\n            return `new ${lhs}(${dateStr})${toStr}`;\n        }\n    DateSymbolNowTemplate: &DateSymbolNowTemplate !!js/function >\n        () => {\n            return 'DateTime.Now';\n        }\n    DateSymbolNowArgsTemplate: &DateSymbolNowArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    RegExpSymbolTemplate: &RegExpSymbolTemplate !!js/function > # Also has process method\n        () => {\n            return 'Regex';\n        }\n    RegExpSymbolArgsTemplate: &RegExpSymbolArgsTemplate null\n    ImportTemplate: &ImportTemplate !!js/function >\n        (args) => {\n            const universal = ['using MongoDB.Bson;', 'using MongoDB.Driver;'];\n            const all = universal.concat(Object.values(args));\n            return all.join('\\n');\n        }\n    DriverImportTemplate: &DriverImportTemplate null\n    0ImportTemplate: &0ImportTemplate null\n    1ImportTemplate: &1ImportTemplate null\n    2ImportTemplate: &2ImportTemplate null\n    3ImportTemplate: &3ImportTemplate null\n    4ImportTemplate: &4ImportTemplate null\n    5ImportTemplate: &5ImportTemplate null\n    6ImportTemplate: &6ImportTemplate null\n    7ImportTemplate: &7ImportTemplate null\n    8ImportTemplate: &8ImportTemplate !!js/function >\n        () => {\n            return 'using System.Text.RegularExpressions;';\n        }\n    9ImportTemplate: &9ImportTemplate null\n    10ImportTemplate: &10ImportTemplate null\n    11ImportTemplate: &11ImportTemplate null\n    12ImportTemplate: &12ImportTemplate null\n    100ImportTemplate: &100ImportTemplate null\n    101ImportTemplate: &101ImportTemplate null\n    102ImportTemplate: &102ImportTemplate null\n    103ImportTemplate: &103ImportTemplate null\n    104ImportTemplate: &104ImportTemplate null\n    105ImportTemplate: &105ImportTemplate null\n    106ImportTemplate: &106ImportTemplate null\n    107ImportTemplate: &107ImportTemplate null\n    108ImportTemplate: &108ImportTemplate null\n    109ImportTemplate: &109ImportTemplate null\n    110ImportTemplate: &110ImportTemplate null\n    111ImportTemplate: &111ImportTemplate null\n    112ImportTemplate: &112ImportTemplate null\n    113ImportTemplate: &113ImportTemplate null\n    114ImportTemplate: &114ImportTemplate null\n    200ImportTemplate: &200ImportTemplate !!js/function >\n        () => {\n            return 'using System;';\n        }\n    201ImportTemplate: &201ImportTemplate null\n    300ImportTemplate: &300ImportTemplate null\n    301ImportTemplate: &301ImportTemplate null\n    302ImportTemplate: &302ImportTemplate null\n    303ImportTemplate: &303ImportTemplate null\n    304ImportTemplate: &304ImportTemplate null\n    305ImportTemplate: &305ImportTemplate null\n    306ImportTemplate: &306ImportTemplate null\n# Universal types\n# Everything inherits from StringType because we haven't implemented any of them.\nBasicTypes:\n    # Universal basic types\n    _bool: &BoolType\n        <<: *__type\n        id: \"_bool\"\n        code: 0\n        template: *BoolTypeTemplate\n    _integer: &IntegerType\n        <<: *__type\n        id: \"_integer\"\n        code: 1\n        template: *IntegerTypeTemplate\n    _long: &LongBasicType\n        <<: *__type\n        id: \"_long\"\n        code: 2\n        template: *LongBasicTypeTemplate\n    _decimal: &DecimalType\n        <<: *__type\n        id: \"_decimal\"\n        code: 3\n        template: *DecimalTypeTemplate\n    _hex: &HexType\n        <<: *__type\n        id: \"_hex\"\n        code: 4\n        template: *HexTypeTemplate\n    _octal: &OctalType\n        <<: *__type\n        id: \"_octal\"\n        code: 5\n        template: *OctalTypeTemplate\n    _numeric: &NumericType\n        <<: *__type\n        id: \"_numeric\"\n        code: 6\n        template: *NumericTypeTemplate\n    _string: &StringType\n        <<: *__type\n        id: \"_string\"\n        code: 7\n        template: *StringTypeTemplate\n    _regex: &RegexType\n        <<: *__type\n        id: \"_regex\"\n        code: 8\n        template: *RegexTypeTemplate\n    _array: &ArrayType\n        <<: *__type\n        id: \"_array\"\n        code: 9\n        template: *ArrayTypeTemplate\n        argsTemplate: *ArrayTypeArgsTemplate\n    _object: &ObjectType\n        <<: *__type\n        id: \"_object\"\n        code: 10\n        template: *ObjectTypeTemplate\n        argsTemplate: *ObjectTypeArgsTemplate\n    _null: &NullType\n        <<: *__type\n        id: \"_null\"\n        code: 11\n        template: *NullTypeTemplate\n    _undefined: &UndefinedType\n        <<: *__type\n        id: \"_undefined\"\n        code: 12\n        template: *UndefinedTypeTemplate\n\nSyntax:\n    equality:\n        template: *EqualitySyntaxTemplate\n    in:\n        template: *InSyntaxTemplate\n    and:\n        template: *AndSyntaxTemplate\n    or:\n        template: *OrSyntaxTemplate\n    not:\n        template: *NotSyntaxTemplate\n    unary:\n        template: *UnarySyntaxTemplate\n    binary:\n        template: *BinarySyntaxTemplate\n    parens:\n        template: *ParensSyntaxTemplate\n    eos:\n        template: *EosSyntaxTemplate\n    eof:\n        template: *EofSyntaxTemplate\n    # The new template takes in expr, and an optional skip argument and optional\n    # id argument. The skip argument is a boolean that if true then doesn't add\n    # new. The code argument is the symbol code being called. The template will check\n    # if it is an exception, i.e. a type that is a constructor but may not use new.\n    new:\n        template: *NewSyntaxTemplate\n    # The regex flags that change symbols between languages can be defined here.\n    # Flags that aren't defined can be left blank and will be ignored.\n    regexFlags: *RegexFlags\n    bsonRegexFlags: *BSONRegexFlags\n    driver: *DriverTemplate\nImports:\n    import:\n        template: *ImportTemplate\n    driver:\n        template: *DriverImportTemplate\n    0:\n        template: *0ImportTemplate\n    1:\n        template: *1ImportTemplate\n    2:\n        template: *2ImportTemplate\n    3:\n        template: *3ImportTemplate\n    4:\n        template: *4ImportTemplate\n    5:\n        template: *5ImportTemplate\n    6:\n        template: *6ImportTemplate\n    7:\n        template: *7ImportTemplate\n    8:\n        template: *8ImportTemplate\n    9:\n        template: *9ImportTemplate\n    10:\n        template: *10ImportTemplate\n    11:\n        template: *11ImportTemplate\n    12:\n        template: *12ImportTemplate\n    100:\n        template: *100ImportTemplate\n    101:\n        template: *101ImportTemplate\n    102:\n        template: *102ImportTemplate\n    103:\n        template: *103ImportTemplate\n    104:\n        template: *104ImportTemplate\n    105:\n        template: *105ImportTemplate\n    106:\n        template: *106ImportTemplate\n    107:\n        template: *107ImportTemplate\n    108:\n        template: *108ImportTemplate\n    109:\n        template: *109ImportTemplate\n    110:\n        template: *110ImportTemplate\n    111:\n        template: *111ImportTemplate\n    112:\n        template: *112ImportTemplate\n    113:\n        template: *113ImportTemplate\n    114:\n        template: *114ImportTemplate\n    200:\n        template: *200ImportTemplate\n    201:\n        template: *201ImportTemplate\n    300:\n        template: *300ImportTemplate\n    301:\n        template: *301ImportTemplate\n    302:\n        template: *302ImportTemplate\n    303:\n        template: *303ImportTemplate\n    304:\n        template: *304ImportTemplate\n    305:\n        template: *305ImportTemplate\n    306:\n        template: *306ImportTemplate\nBsonTypes:\n    Code: &CodeType\n        <<: *__type\n        id: \"Code\"\n        code: 100\n        type: *ObjectType\n        attr:\n            code:\n                callable: *var\n                args: null\n                attr: null\n                id: \"code\"\n                type: *StringType\n                template: *CodeCodeTemplate\n                argsTemplate: *CodeCodeArgsTemplate\n            scope:\n                callable: *var\n                args: null\n                attr: null\n                id: \"scope\"\n                type: *StringType\n                template: *CodeScopeTemplate\n                argsTemplate: *CodeScopeArgsTemplate\n    ObjectId: &ObjectIdType\n        <<: *__type\n        id: \"ObjectId\"\n        code: 101\n        type: *ObjectType\n        attr:\n            toString:\n                <<: *__func\n                id: \"toString\"\n                type: *StringType\n                template: *ObjectIdToStringTemplate\n                argsTemplate: *ObjectIdToStringArgsTemplate\n            equals:\n                <<: *__func\n                id: \"equals\"\n                args:\n                    - [ \"ObjectId\" ]\n                type: *BoolType\n                template: *ObjectIdEqualsTemplate\n                argsTemplate: *ObjectIdEqualsArgsTemplate\n            getTimestamp:\n                <<: *__func\n                id: \"getTimestamp\"\n                type: *IntegerType\n                template: *ObjectIdGetTimestampTemplate\n                argsTemplate: *ObjectIdGetTimestampArgsTemplate\n    BinData: &BinaryType\n        <<: *__type\n        id: \"BinData\"\n        code: 102\n        type: *ObjectType\n        attr:\n            toString:\n                <<: *__func\n                id: \"toString\"\n                type: *StringType\n                template: *BinaryToStringTemplate\n                argsTemplate: *BinaryToStringArgsTemplate\n            base64:\n                <<: *__func\n                id: \"base64\"\n                type: *StringType\n                template: *BinaryValueTemplate\n                argsTemplate: *BinaryValueArgsTemplate\n            length:\n                <<: *__func\n                id: \"length\"\n                type: *IntegerType\n                template: *BinaryLengthTemplate\n                argsTemplate: *BinaryLengthArgsTemplate\n            subtype:\n                <<: *__func\n                id: \"subtype\"\n                type: *IntegerType\n                template: *BinarySubtypeTemplate\n                argsTemplate: *BinarySubtypeArgsTemplate\n    DBRef: &DBRefType\n        <<: *__type\n        id: \"DBRef\"\n        code: 103\n        type: *ObjectType\n        attr:\n            getDb:\n                <<: *__func\n                id: \"getDb\"\n                type: *StringType\n                template: *DBRefGetDBTemplate\n                argsTemplate: *DBRefGetDBArgsTemplate\n            $db:\n                callable: *var\n                args: null\n                attr: null\n                id: \"$db\"\n                type: *StringType\n                template: *DBRefGetDBTemplate\n                argsTemplate: *DBRefGetDBArgsTemplate\n            getCollection:\n                <<: *__func\n                id: \"getCollection\"\n                type: *StringType\n                template: *DBRefGetCollectionTemplate\n                argsTemplate: *DBRefGetCollectionArgsTemplate\n            getRef:\n                <<: *__func\n                id: \"getRef\"\n                type: *StringType\n                template: *DBRefGetCollectionTemplate\n                argsTemplate: *DBRefGetCollectionArgsTemplate\n            $ref:\n                callable: *var\n                args: null\n                attr: null\n                id: \"$ref\"\n                type: *StringType\n                template: *DBRefGetCollectionTemplate\n                argsTemplate: *DBRefGetCollectionArgsTemplate\n            getId:\n                <<: *__func\n                id: \"getId\"\n                type: *StringType\n                template: *DBRefGetIdTemplate\n                argsTemplate: *DBRefGetIdArgsTemplate\n            $id:\n                callable: *var\n                args: null\n                attr: null\n                id: \"$id\"\n                type: *StringType\n                template: *DBRefGetIdTemplate\n                argsTemplate: *DBRefGetIdArgsTemplate\n    NumberInt: &Int32Type\n        <<: *__type\n        id: \"NumberInt\"\n        code: 105\n        type: *ObjectType\n        attr: {}\n    NumberLong: &LongType\n        <<: *__type\n        id: \"NumberLong\"\n        code: 106\n        type: *ObjectType\n        attr:\n            toString:\n                <<: *__func\n                id: \"LongtoString\" # Needs process method\n                type: *StringType\n            top:\n                callable: *var\n                args: null\n                attr: null\n                id: \"top\"\n                type: *IntegerType\n                template: *LongTopTemplate\n                argsTemplate: null\n            bottom:\n                callable: *var\n                args: null\n                attr: null\n                id: \"bottom\"\n                type: *IntegerType\n                template: *LongBottomTemplate\n                argsTemplate: null\n            floatApprox:\n                callable: *var\n                args: null\n                attr: null\n                id: \"floatApprox\"\n                type: *IntegerType\n                template: *LongFloatApproxTemplate\n                argsTemplate: null\n    MinKeyType: &MinKeyType\n        <<: *__type\n        id: \"MinKey\"\n        code: 107\n        type: *ObjectType\n    MaxKeyType: &MaxKeyType\n        <<: *__type\n        id: \"MaxKey\"\n        code: 108\n        type: *ObjectType\n    Timestamp: &TimestampType\n        <<: *__type\n        id: \"TimestampFromShell\"\n        code: 110\n        type: *ObjectType\n        attr:\n            toString:\n                <<: *__func\n                id: \"toString\"\n                type: *StringType\n                template: *TimestampToStringTemplate\n                argsTemplate: *TimestampToStringArgsTemplate\n            getTime:\n                <<: *__func\n                id: \"getTime\"\n                type: *IntegerType\n                template: *TimestampGetLowBitsTemplate\n                argsTemplate: *TimestampGetLowBitsArgsTemplate\n            getInc:\n                <<: *__func\n                id: \"getInc\"\n                type: *IntegerType\n                template: *TimestampGetHighBitsTemplate\n                argsTemplate: *TimestampGetHighBitsArgsTemplate\n            t:\n                callable: *var\n                args: null\n                attr: null\n                id: \"getTime\"\n                type: *IntegerType\n                template: *TimestampTTemplate\n                argsTemplate: null\n            i:\n                callable: *var\n                args: null\n                attr: null\n                id: \"getInc\"\n                type: *IntegerType\n                template: *TimestampITemplate\n                argsTemplate: null\n    Symbol: &SymbolType\n        <<: *__type\n        id: \"Symbol\"\n        code: 111\n        type: *ObjectType\n    NumberDecimal: &Decimal128Type\n        <<: *__type\n        id: \"NumberDecimal\"\n        code: 112\n        type: *ObjectType\n        attr: {}\n    SUBTYPE_DEFAULT:\n        id: \"SUBTYPE_DEFAULT\"\n        callable: *var\n        args: null\n        code: 113\n        type: *IntegerType\n        template: *BinarySymbolSubtypeDefaultTemplate\n    SUBTYPE_FUNCTION:\n        id: \"SUBTYPE_FUNCTION\"\n        callable: *var\n        args: null\n        code: 113\n        type: *IntegerType\n        template: *BinarySymbolSubtypeFunctionTemplate\n    SUBTYPE_BYTE_ARRAY:\n        id: \"SUBTYPE_BYTE_ARRAY\"\n        callable: *var\n        args: null\n        code: 113\n        type: *IntegerType\n        template: *BinarySymbolSubtypeByteArrayTemplate\n    SUBTYPE_UUID_OLD:\n        id: \"SUBTYPE_UUID_OLD\"\n        callable: *var\n        args: null\n        code: 113\n        type: *IntegerType\n        template: *BinarySymbolSubtypeUuidOldTemplate\n    SUBTYPE_UUID:\n        id: \"SUBTYPE_UUID\"\n        callable: *var\n        args: null\n        code: 113\n        type: *IntegerType\n        template: *BinarySymbolSubtypeUuidTemplate\n    SUBTYPE_MD5:\n        id: \"SUBTYPE_MD5\"\n        callable: *var\n        args: null\n        code: 113\n        type: *IntegerType\n        template: *BinarySymbolSubtypeMd5Template\n    SUBTYPE_USER_DEFINED:\n        id: \"SUBTYPE_USER_DEFINED\"\n        callable: *var\n        args: null\n        code: 113\n        type: *IntegerType\n        template: *BinarySymbolSubtypeUserDefinedTemplate\nNativeTypes:\n    Date: &DateType\n        <<: *__type\n        id: \"Date\"\n        code: 200\n        type: *ObjectType\n        attr: {} # TODO: no built-in date methods added yet\n    RegExp: &RegExpType\n        <<: *__type\n        id: \"RegExp\"\n        code: 8\n        type: *ObjectType\n        attr: {}\n\n\n\n\nBsonSymbols:\n    Code: &CodeSymbol\n        id: \"Code\"\n        code: 100\n        callable: *constructor\n        args:\n            - [ *StringType, null ]\n            - [ *ObjectType, null ]\n        type: *CodeType\n        attr: {}\n        template: *CodeSymbolTemplate\n        argsTemplate: *CodeSymbolArgsTemplate\n    ObjectId: &ObjectIdSymbol\n        id: \"ObjectId\"\n        code: 101\n        callable: *constructor\n        args:\n            - [ *StringType, null ]\n        type: *ObjectIdType\n        attr:\n            fromDate:\n                <<: *__func\n                id: \"ObjectIdCreateFromTime\"\n                args:\n                    - [ *DateType ]\n                type: *ObjectIdType\n                template: *ObjectIdCreateFromTimeTemplate\n                argsTemplate: *ObjectIdCreateFromTimeArgsTemplate\n        template: *ObjectIdSymbolTemplate\n        argsTemplate: *ObjectIdSymbolArgsTemplate\n    BinData: &BinarySymbol\n        id: \"BinData\"\n        code: 102\n        callable: *constructor\n        args:\n            - [ *IntegerType ]\n            - [ *StringType ]\n        type: *BinaryType\n        attr: {}\n        template: *BinarySymbolTemplate\n        argsTemplate: *BinarySymbolArgsTemplate\n    DBRef:\n        id: \"DBRef\"\n        code: 103\n        callable: *constructor\n        args:\n            - [ *StringType ]\n            - [ *ObjectIdType ]\n            - [ *StringType, null ]\n        type: *DBRefType\n        attr: {}\n        template: *DBRefSymbolTemplate\n        argsTemplate: *DBRefSymbolArgsTemplate\n    NumberInt:\n        id: \"Int32\"\n        code: 105\n        callable: *constructor\n        args:\n            - [ *NumericType, *StringType, null ]\n        type: *Int32Type\n        attr: {}\n        template: *Int32SymbolTemplate\n        argsTemplate: *Int32SymbolArgsTemplate\n    NumberLong:\n        id: \"NumberLong\"\n        code: 106\n        callable: *constructor\n        args:\n            - [ *IntegerType, *StringType, null ]\n        type: *LongType\n        attr: {}\n        template: *LongSymbolTemplate\n        argsTemplate: *LongSymbolArgsTemplate\n    MinKey:\n        id: \"MinKey\"\n        code: 107\n        callable: *constructor\n        args: []\n        type: *MinKeyType\n        attr: {}\n        template: *MinKeySymbolTemplate\n        argsTemplate: *MinKeySymbolArgsTemplate\n    MaxKey:\n        id: \"MaxKey\"\n        code: 108\n        callable: *constructor\n        args: []\n        type: *MaxKeyType\n        attr: {}\n        template: *MaxKeySymbolTemplate\n        argsTemplate: *MaxKeySymbolArgsTemplate\n    Timestamp:\n        id: \"Timestamp\"\n        code: 110\n        callable: *constructor\n        args:\n            - [ *IntegerType, null ]\n            - [ *IntegerType, null ]\n        type: *TimestampType\n        attr: {}\n        template: *TimestampSymbolTemplate\n        argsTemplate: *TimestampSymbolArgsTemplate\n    Symbol:\n        id: \"Symbol\"\n        code: 111\n        callable: *constructor\n        args:\n            - [ *StringType ]\n        type: *SymbolType\n        attr: {}\n        template: *SymbolSymbolTemplate\n        argsTemplate: *SymbolSymbolArgsTemplate\n    NumberDecimal:\n        id: \"NumberDecimal\"\n        code: 112\n        callable: *constructor\n        args:\n            - [ *StringType, *NumericType, null ]\n        type: *Decimal128Type\n        attr: {}\n        template: *Decimal128SymbolTemplate\n        argsTemplate: *Decimal128SymbolArgsTemplate\n\nNativeSymbols:\n    Number:\n        id: \"Number\"\n        code: 2\n        callable: *constructor\n        args:\n            - [ *IntegerType, *StringType, null ]\n        type: *NumericType\n        attr: {} # TODO: no built-in number funcs added yet\n        template: *NumberSymbolTemplate\n        argsTemplate: *NumberSymbolArgsTemplate\n    Date: # Needs emit method\n        id: \"Date\"\n        code: 200\n        callable: *constructor\n        args:\n            - [ *StringType, *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n        type: *DateType\n        attr: # TODO: add more date funcs?\n            now:\n                id: \"now\"\n                code: 200.1\n                callable: *func\n                args: []\n                type: *DateType\n                attr: {}\n                template: *DateSymbolNowTemplate\n                argsTemplate: *DateSymbolNowArgsTemplate\n        template: *DateSymbolTemplate\n        argsTemplate: *DateSymbolArgsTemplate\n    ISODate: # Needs emit method\n        id: \"ISODate\"\n        code: 200\n        callable: *constructor\n        args:\n            - [ *StringType, null ]\n        type: *DateType\n        attr:\n            now:\n                id: \"now\"\n                callable: *constructor\n                args: []\n                type: *DateType\n                attr: {}\n                template: *DateSymbolNowTemplate\n                argsTemplate: *DateSymbolNowArgsTemplate\n        template: *DateSymbolTemplate\n        argsTemplate: *DateSymbolArgsTemplate\n    RegExp: # Needs process method\n        id: \"RegExp\"\n        code: 8\n        callable: *constructor\n        args:\n            - [ *StringType, *RegexType ]\n            - [ *StringType, null ]\n        type: *RegExpType\n        attr: {} # TODO: no built-in regex funcs added yet\n        template: *RegExpSymbolTemplate\n        argsTemplate: *RegExpSymbolArgsTemplate\n\n"},24083:e=>{e.exports="SymbolTypes:\n    VAR: &var 0\n    CONSTRUCTOR: &constructor 1\n    FUNC: &func 2\n# Internal patterns to save typing\n__type: &__type\n    id: null\n    callable: *var\n    args: null\n    type: null\n    attr: {}\n    template: null\n    argsTemplate: null\n__func: &__func\n    callable: *func\n    args: []\n    attr: {}\n    template: null\n    argsTemplate: null\n\n# Java Templates\nTemplates:\n    # Misc\n    RegexFlags: &RegexFlags\n        i: 'i'\n        m: 'm'\n        u: 'u'\n        y: ''\n        g: ''\n    BSONRegexFlags: &BSONRegexFlags\n        i: 'i'\n        m: 'm'\n        x: 'x'\n        s: 's'\n        l: 'l'\n        u: 'u'\n    # Syntax\n    DriverTemplate: &DriverTemplate !!js/function >\n        (spec) => {\n            const comment = `/*\n         * Requires the MongoDB Java Driver.\n         * https://mongodb.github.io/mongo-java-driver`;\n\n            const str = spec.options.uri;\n            let newStr = str;\n            if (\n                (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                newStr = str.substr(1, str.length - 2);\n            }\n            const uri = `\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\"`;\n\n\n\n            const connection = `MongoClient mongoClient = new MongoClient(\n            new MongoClientURI(\n                ${uri}\n            )\n        );\n\n        MongoDatabase database = mongoClient.getDatabase(\"${spec.options.database}\");\n\n        MongoCollection<Document> collection = database.getCollection(\"${spec.options.collection}\");`;\n\n\n            if ('aggregation' in spec) {\n                return `${comment}\\n */\\n\\n${connection}\n\n        FindIterable<Document> result = collection.aggregate(${spec.aggregation});`;\n            }\n\n            let warning = '';\n            const defs = Object.keys(spec).reduce((s, k) => {\n                if (k === 'options' || k === 'maxTimeMS' || k === 'skip' || k === 'limit' || k === 'collation') return s;\n                if (s === '') return `Bson ${k} = ${spec[k]};`;\n                return `${s}\n        Bson ${k} = ${spec[k]};`;\n            }, '');\n\n            const result = Object.keys(spec).reduce((s, k) => {\n                switch (k) {\n                    case 'options':\n                    case 'filter':\n                        return s;\n                    case 'maxTimeMS':\n                        return `${s}\n            .maxTime(${spec[k]}, TimeUnit.MICROSECONDS)`;\n                    case 'skip':\n                    case 'limit':\n                        return `${s}\n            .${k}((int)${spec[k]})`;\n                    case 'project':\n                        return `${s}\n            .projection(project)`;\n                    case 'collation':\n                        warning = '\\n *\\n * Warning: translating collation to Java not yet supported, so will be ignored';\n                        return s;\n                    default:\n                        return `${s}\n            .${k}(${k})`;\n                }\n            }, 'FindIterable<Document> result = collection.find(filter)');\n\n            return `${comment}${warning}\\n */\\n\\n${defs}\n\n        ${connection}\n\n        ${result};`;\n        }\n    EqualitySyntaxTemplate: &EqualitySyntaxTemplate !!js/function >\n        (lhs, op, rhs) => {\n            if (op.includes('!') || op.includes('not')) {\n                return `${lhs} != ${rhs}`;\n            } else if (op === '==' || op === '===' || op === 'is') {\n                return `${lhs} == ${rhs}`;\n            }\n            return `${lhs} ${op} ${rhs}`;\n        }\n    InSyntaxTemplate: &InSyntaxTemplate !!js/function >\n        (lhs, op, rhs) => {\n            let str = '';\n            if (op.includes('!') || op.includes('not')) {\n                str = '!';\n            }\n            return `${str}${rhs}.contains(${lhs})`\n        }\n    AndSyntaxTemplate: &AndSyntaxTemplate !!js/function >\n        (args) => {\n            return args.join(' && ');\n        }\n    OrSyntaxTemplate: &OrSyntaxTemplate !!js/function >\n        (args) => {\n            return args.join(' || ');\n        }\n    NotSyntaxTemplate: &NotSyntaxTemplate !!js/function >\n        (arg) => {\n            return `!${arg}`;\n        }\n    UnarySyntaxTemplate: &UnarySyntaxTemplate null\n    BinarySyntaxTemplate: &BinarySyntaxTemplate !!js/function >\n        (args) => {\n            return args.reduce((s, op, i, arr) => {\n                if (i % 2 === 0) {\n                    return s;\n                }\n                const rhs = arr[i + 1];\n                switch(op) {\n                    case '//':\n                        return `floor(${s})`;\n                    case '**':\n                        return `pow(${s}, ${rhs})`;\n                    default:\n                        return `${s} ${op} ${rhs}`;\n                }\n            }, args[0]);\n        }\n    ParensSyntaxTemplate: &ParensSyntaxTemplate null\n    EosSyntaxTemplate: &EosSyntaxTemplate null\n    EofSyntaxTemplate: &EofSyntaxTemplate null\n    NewTemplate: &NewSyntaxTemplate !!js/function >\n        (expr, skip, code) => {\n            // Add codes of classes that don't need new.\n            // Currently: Decimal128/NumberDecimal, Long/NumberLong, Double, Int32, Number, regex, Date\n            noNew = [112, 106, 104, 105, 2, 8, 200];\n            if (skip || (code && noNew.indexOf(code) !== -1)) {\n                return expr;\n            }\n            return `new ${expr}`;\n        }\n    # BSON Object Type templates\n    CodeTypeTemplate: &CodeTypeTemplate null\n    StringTypeTemplate: &StringTypeTemplate !!js/function >\n        (str) => {\n          let newStr = str;\n          if (\n            (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n            (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n            newStr = str.substr(1, str.length - 2);\n          }\n          return `\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\"`;\n        }\n    RegexTypeTemplate: &RegexTypeTemplate !!js/function >\n        (pattern, flags) => {\n            flags = flags === '' ? '' : `(?${flags})`;\n            // Double escape characters except for slashes\n            const escaped = pattern.replace(/\\\\/, '\\\\\\\\');\n\n            // Double-quote stringify\n            const str = escaped + flags;\n            let newStr = str;\n            if (\n                (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                    newStr = str.substr(1, str.length - 2);\n            }\n            return `Pattern.compile(\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\")`;\n        }\n    BoolTypeTemplate: &BoolTypeTemplate !!js/function >\n        (literal) => {\n            return literal.toLowerCase();\n        }\n    IntegerTypeTemplate: &IntegerTypeTemplate null\n    DecimalTypeTemplate: &DecimalTypeTemplate !!js/function >\n        (literal, type) => {\n            if (type === '_integer' || type === '_long' || type === '_decimal') {\n                return `${literal}d`;\n            }\n            return `(double) ${literal}`;\n        }\n    LongBasicTypeTemplate: &LongBasicTypeTemplate !!js/function >\n        (literal, type) => {\n            if (type === '_integer' || type === '_long') {\n                return `${literal}L`;\n            }\n            return `new Long(${literal})`;\n        }\n    HexTypeTemplate: &HexTypeTemplate null # TODO\n    OctalTypeTemplate: &OctalTypeTemplate !!js/function >\n        (literal, type) => {\n            if ((literal.charAt(0) === '0' && literal.charAt(1) === '0') ||\n                (literal.charAt(0) === '0' && (literal.charAt(1) === 'o' || literal.charAt(1) === 'O'))) {\n              return `0${literal.substr(2, literal.length - 1)}`;\n            }\n            return literal;\n        }\n    NumericTypeTemplate: &NumericTypeTemplate null\n    ArrayTypeTemplate: &ArrayTypeTemplate !!js/function >\n        (literal, depth) => {\n            depth++;\n            // TODO: figure out how to best do depth in an array and where to\n            // insert and indent\n            const indent = '\\n' + '    '.repeat(depth);\n            // have an indent on every ', new Document' in an array not\n            // entirely perfect, but at least makes this more readable/also\n            // compiles\n            const arr = literal.split(', new').join(`, ${indent}new`)\n\n            return `Arrays.asList(${arr})`;\n        }\n    ArrayTypeArgsTemplate: &ArrayTypeArgsTemplate null\n    NullTypeTemplate: &NullTypeTemplate !!js/function >\n        () => {\n            return 'new BsonNull()';\n        }\n    UndefinedTypeTemplate: &UndefinedTypeTemplate !!js/function >\n        () => {\n            return 'new BsonUndefined()';\n        }\n    ObjectTypeTemplate: &ObjectTypeTemplate !!js/function >\n        (literal, depth) => {\n\n            if (literal === '') {\n                return `new Document()`;\n            }\n            return literal;\n        }\n    ObjectTypeArgsTemplate: &ObjectTypeArgsTemplate !!js/function >\n        (args, depth) => {\n            if (args.length === 0) {\n                return 'new Document()';\n            }\n            depth++;\n            const indent = '\\n' + '    '.repeat(depth);\n            const doubleStringify = (str) => {\n                let newStr = str;\n                if (\n                  (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                  (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                    newStr = str.substr(1, str.length - 2);\n                }\n                return `\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\"`;\n            }\n            const start = `new Document(${doubleStringify(args[0][0])}, ${args[0][1]})`;\n\n            args = args.slice(1);\n            const result = args.reduce((str, pair) => {\n                return `${str}${indent}.append(${doubleStringify(pair[0])}, ${pair[1]})`;\n            }, start);\n\n            return `${result}`;\n        }\n    DoubleTypeTemplate: &DoubleTypeTemplate !!js/function >\n        (literal, type) => {\n            if (type === '_integer' || type === '_long' || type === '_decimal') {\n                return `${literal}d`;\n            }\n            return `(double) ${literal}`;\n        }\n    DoubleTypeArgsTemplate: &DoubleTypeArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongTypeTemplate: &LongTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongTypeArgsTemplate: &LongSymbolArgsTemplate null\n    # BSON Object Method templates\n    ObjectIdToStringTemplate: &ObjectIdToStringTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.toHexString()`;\n        }\n    ObjectIdToStringArgsTemplate: &ObjectIdToStringArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    ObjectIdEqualsTemplate: &ObjectIdEqualsTemplate null\n    ObjectIdEqualsArgsTemplate: &ObjectIdEqualsArgsTemplate null\n    ObjectIdGetTimestampTemplate: &ObjectIdGetTimestampTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getTimestamp()`;\n        }\n    ObjectIdGetTimestampArgsTemplate: &ObjectIdGetTimestampArgsTemplate !!js/function >\n            () => {\n                return '';\n            }\n    CodeCodeTemplate: &CodeCodeTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getCode()`;\n        }\n    CodeCodeArgsTemplate: &CodeCodeArgsTemplate null\n    CodeScopeTemplate: &CodeScopeTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getScope()`;\n        }\n    CodeScopeArgsTemplate: &CodeScopeArgsTemplate null\n    BinaryValueTemplate: &BinaryValueTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getData`;\n        }\n    BinaryValueArgsTemplate: &BinaryValueArgsTemplate null\n    BinaryLengthTemplate: &BinaryLengthTemplate null\n    BinaryLengthArgsTemplate: &BinaryLengthArgsTemplate null\n    BinaryToStringTemplate: &BinaryToStringTemplate null\n    BinaryToStringArgsTemplate: &BinaryToStringArgsTemplate null\n    BinarySubtypeTemplate: &BinarySubtypeTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getType()`;\n        }\n    BinarySubtypeArgsTemplate: &BinarySubtypeArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    DBRefGetDBTemplate: &DBRefGetDBTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getDatabaseName()`;\n        }\n    DBRefGetDBArgsTemplate: &DBRefGetDBArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    DBRefGetCollectionTemplate: &DBRefGetCollectionTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getCollectionName()`;\n        }\n    DBRefGetCollectionArgsTemplate: &DBRefGetCollectionArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    DBRefGetIdTemplate: &DBRefGetIdTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getId()`;\n        }\n    DBRefGetIdArgsTemplate: &DBRefGetIdArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongEqualsTemplate: &LongEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} ==`;\n        }\n    LongEqualsArgsTemplate: &LongEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongToStringTemplate: &LongToStringTemplate !!js/function >\n        (lhs) => {\n            return lhs;\n        }\n    LongToStringArgsTemplate: &LongToStringArgsTemplate null\n    LongToIntTemplate: &LongToIntTemplate !!js/function >\n        (lhs) => {\n            return `(int) ${lhs}`;\n        }\n    LongToIntArgsTemplate: &LongToIntArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongToNumberTemplate: &LongToNumberTemplate !!js/function >\n        (lhs) => {\n            return `(double) ${lhs}`;\n        }\n    LongToNumberArgsTemplate: &LongToNumberArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongAddTemplate: &LongAddTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} +`;\n        }\n    LongAddArgsTemplate: &LongAddArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongSubtractTemplate: &LongSubtractTemplate !!js/function >\n        (arg) => {\n            return `${arg} -`;\n        }\n    LongSubtractArgsTemplate: &LongSubtractArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongMultiplyTemplate: &LongMultiplyTemplate !!js/function >\n        (arg) => {\n            return `${arg} *`;\n        }\n    LongMultiplyArgsTemplate: &LongMultiplyArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongDivTemplate: &LongDivTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} /`;\n        }\n    LongDivArgsTemplate: &LongDivArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongModuloTemplate: &LongModuloTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} %`;\n        }\n    LongModuloArgsTemplate: &LongModuloArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongAndTemplate: &LongAndTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} &`;\n        }\n    LongAndArgsTemplate: &LongAndArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongOrTemplate: &LongOrTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} |`;\n        }\n    LongOrArgsTemplate: &LongOrArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongXorTemplate: &LongXorTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} ^`;\n        }\n    LongXorArgsTemplate: &LongXorArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongShiftLeftTemplate: &LongShiftLeftTemplate !!js/function >\n        () => {\n            return 'Long.rotateLeft';\n        }\n    LongShiftLeftArgsTemplate: &LongShiftLeftArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `(${lhs}, ${arg})`;\n        }\n    LongShiftRightTemplate: &LongShiftRightTemplate !!js/function >\n        () => {\n            return 'Long.rotateRight';\n        }\n    LongShiftRightArgsTemplate: &LongShiftRightArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `(${lhs}, ${arg})`;\n        }\n    LongCompareTemplate: &LongCompareTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} -`;\n        }\n    LongCompareArgsTemplate: &LongCompareArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongIsOddTemplate: &LongIsOddTemplate !!js/function >\n        (lhs) => {\n            return `(${lhs} % 2) == 1`;\n        }\n    LongIsOddArgsTemplate: &LongIsOddArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongIsZeroTemplate: &LongIsZeroTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} == 0`;\n        }\n    LongIsZeroArgsTemplate: &LongIsZeroArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongIsNegativeTemplate: &LongIsNegativeTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} < 0`;\n        }\n    LongIsNegativeArgsTemplate: &LongIsNegativeArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongNegateTemplate: &LongNegateTemplate !!js/function >\n        () => {\n            return '-';\n        }\n    LongNegateArgsTemplate: &LongNegateArgsTemplate !!js/function >\n        (lhs) => {\n            return lhs;\n        }\n    LongNotTemplate: &LongNotTemplate !!js/function >\n        () => {\n            return '~';\n        }\n    LongNotArgsTemplate: &LongNotArgsTemplate !!js/function >\n        (lhs) => {\n            return lhs;\n        }\n    LongNotEqualsTemplate: &LongNotEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} !=`;\n        }\n    LongNotEqualsArgsTemplate: &LongNotEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongGreaterThanTemplate: &LongGreaterThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >`;\n        }\n    LongGreaterThanArgsTemplate: &LongGreaterThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongGreaterThanOrEqualTemplate: &LongGreaterThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >=`;\n        }\n    LongGreaterThanOrEqualArgsTemplate: &LongGreaterThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongLessThanTemplate: &LongLessThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <`;\n        }\n    LongLessThanArgsTemplate: &LongLessThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongLessThanOrEqualTemplate: &LongLessThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <=`;\n        }\n    LongLessThanOrEqualArgsTemplate: &LongLessThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongFloatApproxTemplate: &LongFloatApproxTemplate !!js/function >\n        (lhs) => {\n            return `(float) ${lhs}`;\n        }\n    LongTopTemplate: &LongTopTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >> 32`;\n        }\n    LongBottomTemplate: &LongBottomTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} & 0x0000ffff`;\n        }\n    TimestampToStringTemplate: &TimestampToStringTemplate null\n    TimestampToStringArgsTemplate: &TimestampToStringArgsTemplate null\n    TimestampEqualsTemplate: &TimestampEqualsTemplate null\n    TimestampEqualsArgsTemplate: &TimestampEqualsArgsTemplate null\n    TimestampGetLowBitsTemplate: &TimestampGetLowBitsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getTime`;\n        }\n    TimestampGetLowBitsArgsTemplate: &TimestampGetLowBitsArgsTemplate null\n    TimestampGetHighBitsTemplate: &TimestampGetHighBitsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getInc`;\n        }\n    TimestampGetHighBitsArgsTemplate: &TimestampGetHighBitsArgsTemplate null\n    TimestampTTemplate: &TimestampTTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getTime()`;\n        }\n    TimestampITemplate: &TimestampITemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getInc()`;\n        }\n    TimestampAsDateTemplate: &TimestampAsDateTemplate !!js/function >\n        (lhs) => {\n            return `new java.util.Date(${lhs}.getTime())`;\n        }\n    TimestampAsDateArgsTemplate: &TimestampAsDateArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    TimestampCompareTemplate: &TimestampCompareTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.compareTo`;\n        }\n    TimestampCompareArgsTemplate: &TimestampCompareArgsTemplate null\n    TimestampNotEqualsTemplate: &TimestampNotEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.compareTo`;\n        }\n    TimestampNotEqualsArgsTemplate: &TimestampNotEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `(${arg}) != 0`;\n        }\n    TimestampGreaterThanTemplate: &TimestampGreaterThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.compareTo`;\n        }\n    TimestampGreaterThanArgsTemplate: &TimestampGreaterThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `(${arg}) > 0`;\n        }\n    TimestampGreaterThanOrEqualTemplate: &TimestampGreaterThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.compareTo`;\n        }\n    TimestampGreaterThanOrEqualArgsTemplate: &TimestampGreaterThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `(${arg}) >= 0`;\n        }\n    TimestampLessThanTemplate: &TimestampLessThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.compareTo`;\n        }\n    TimestampLessThanArgsTemplate: &TimestampLessThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `(${arg}) < 0`;\n        }\n    TimestampLessThanOrEqualTemplate: &TimestampLessThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.compareTo`;\n        }\n    TimestampLessThanOrEqualArgsTemplate: &TimestampLessThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `(${arg}) <= 0`;\n        }\n    SymbolValueOfTemplate: &SymbolValueOfTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getSymbol`;\n        }\n    SymbolValueOfArgsTemplate: &SymbolValueOfArgsTemplate null\n    SymbolInspectTemplate: &SymbolInspectTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getSymbol`;\n        }\n    SymbolInspectArgsTemplate: &SymbolInspectArgsTemplate null\n    SymbolToStringTemplate: &SymbolToStringTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.toString`;\n        }\n    SymbolToStringArgsTemplate: &SymbolToStringArgsTemplate null\n    # Symbol Templates\n    CodeSymbolTemplate: &CodeSymbolTemplate  !!js/function > # Also has process method\n        () => {\n            return 'Code';\n        }\n    CodeSymbolArgsTemplate: &CodeSymbolArgsTemplate !!js/function > # Also has process method\n        (lhs, code, scope) => {\n          // Double quote stringify\n          let newStr = code === undefined ? '' : code;\n          const str = newStr;\n          if (\n            (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n            (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n            newStr = str.substr(1, str.length - 2);\n          }\n          code = `\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\"`;\n          return (scope === undefined) ? `(${code})` : `WithScope(${code}, ${scope})`;\n        }\n    ObjectIdSymbolTemplate: &ObjectIdSymbolTemplate null\n    ObjectIdSymbolArgsTemplate: &ObjectIdSymbolArgsTemplate !!js/function >\n        (lhs, str) => {\n          if (!str || str.length === 0) {\n            return '()';\n          }\n          let newStr = str;\n          if (\n            (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n            (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n            newStr = str.substr(1, str.length - 2);\n          }\n          return `(\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\")`;\n        }\n    BinarySymbolTemplate: &BinarySymbolTemplate null\n    BinarySymbolArgsTemplate: &BinarySymbolArgsTemplate !!js/function >\n        (lhs, bytes, type) => {\n            const str = bytes;\n            let newStr = str;\n            if (\n              (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n              (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                newStr = str.substr(1, str.length - 2);\n            }\n            bytes = `\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\"`;\n\n            if (type === null) {\n                return `(${bytes}.getBytes(\"UTF-8\"))`;\n            }\n            return `(${type}, ${bytes}.getBytes(\"UTF-8\"))`;\n        }\n    BinarySymbolSubtypeDefaultTemplate: &BinarySymbolSubtypeDefaultTemplate !!js/function >\n        () => {\n            return 'BsonBinarySubType.BINARY';\n        }\n    BinarySymbolSubtypeFunctionTemplate: &BinarySymbolSubtypeFunctionTemplate !!js/function >\n        () => {\n            return 'BsonBinarySubType.FUNCTION';\n        }\n    BinarySymbolSubtypeByteArrayTemplate: &BinarySymbolSubtypeByteArrayTemplate !!js/function >\n        () => {\n            return 'BsonBinarySubType.BINARY';\n        }\n    BinarySymbolSubtypeUuidOldTemplate: &BinarySymbolSubtypeUuidOldTemplate !!js/function >\n        () => {\n            return 'BsonBinarySubType.UUID_LEGACY';\n        }\n    BinarySymbolSubtypeUuidTemplate: &BinarySymbolSubtypeUuidTemplate !!js/function >\n        () => {\n            return 'BsonBinarySubType.UUID_STANDARD';\n        }\n    BinarySymbolSubtypeMd5Template: &BinarySymbolSubtypeMd5Template !!js/function >\n        () => {\n            return 'BsonBinarySubType.MD5';\n        }\n    BinarySymbolSubtypeUserDefinedTemplate: &BinarySymbolSubtypeUserDefinedTemplate !!js/function >\n        () => {\n            return 'BsonBinarySubType.USER_DEFINED';\n        }\n    DBRefSymbolTemplate: &DBRefSymbolTemplate null\n    DBRefSymbolArgsTemplate: &DBRefSymbolArgsTemplate !!js/function >\n        (lhs, coll, id, db) => {\n            const dbstr = db === undefined ? '' : `${db}, `;\n            return `(${dbstr}${coll}, ${id})`;\n        }\n    DoubleSymbolTemplate: &DoubleSymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    DoubleSymbolArgsTemplate: &DoubleSymbolArgsTemplate !!js/function >\n        (lhs, arg, type) => {\n            arg = arg === undefined ? 0 : arg;\n            if (type === '_string') {\n                return `Double.parseDouble(${arg})`;\n            }\n            if (type === '_integer' || type === '_long' || type === '_double' || type === '_decimal') {\n                if (arg.includes('L') || arg.includes('d')) {\n                    return `${arg.substr(0, arg.length - 1)}d`;\n                }\n                return `${arg}d`;\n            }\n            return `(double) ${arg}`;\n        }\n    Int32SymbolTemplate: &Int32SymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    Int32SymbolArgsTemplate: &Int32SymbolArgsTemplate !!js/function >\n        (lhs, arg, type) => {\n            arg = arg === undefined ? 0 : arg;\n            if (type === '_string') {\n                return `Integer.parseInt(${arg})`;\n            }\n            if (type === '_integer' || type === '_long') {\n                if (arg.includes('L') || arg.includes('d')) {\n                    return arg.substr(0, arg.length - 1);\n                }\n                return arg;\n            }\n            return `(int) ${arg}`;\n        }\n    LongSymbolTemplate: &LongSymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongSymbolArgsTemplate: &LongSymbolArgsTemplate !!js/function >\n        (lhs, arg, type) => {\n            arg = arg === undefined ? 0 : arg;\n            if (type === '_string') {\n                return `Long.parseLong(${arg})`;\n            }\n            if (type === '_integer' || type === '_long') {\n                if (arg.includes('d') || arg.includes('L')) {\n                    return `${arg.substr(0, arg.length - 1)}L`;\n                }\n                return `${arg}L`;\n            }\n            return `new Long(${arg})`;\n        }\n    LongSymbolMaxTemplate: &LongSymbolMaxTemplate !!js/function >\n        () => {\n            return 'Long.MAX_VALUE';\n        }\n    LongSymbolMaxArgsTemplate: &LongSymbolMaxArgsTemplate null\n    LongSymbolMinTemplate: &LongSymbolMinTemplate !!js/function >\n        () => {\n            return 'Long.MIN_VALUE';\n        }\n    LongSymbolMinArgsTemplate: &LongSymbolMinArgsTemplate null\n    LongSymbolZeroTemplate: &LongSymbolZeroTemplate !!js/function >\n        () => {\n            return '0L';\n        }\n    LongSymbolZeroArgsTemplate: &LongSymbolZeroArgsTemplate null\n    LongSymbolOneTemplate: &LongSymbolOneTemplate !!js/function >\n        () => {\n            return '1L';\n        }\n    LongSymbolOneArgsTemplate: &LongSymbolOneArgsTemplate null\n    LongSymbolNegOneTemplate: &LongSymbolNegOneTemplate !!js/function >\n        () => {\n            return '-1L';\n        }\n    LongSymbolNegOneArgsTemplate: &LongSymbolNegOneArgsTemplate null\n    LongSymbolFromBitsTemplate: &LongSymbolFromBitsTemplate !!js/function > # Also has process method\n        () => {\n            return '';\n        }\n    LongSymbolFromBitsArgsTemplate: &LongSymbolFromBitsArgsTemplate null\n    LongSymbolFromIntTemplate: &LongSymbolFromIntTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongSymbolFromIntArgsTemplate: &LongSymbolFromIntArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}L`;\n        }\n    LongSymbolFromNumberTemplate: &LongSymbolFromNumberTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongSymbolFromNumberArgsTemplate: &LongSymbolFromNumberArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}L`;\n        }\n    LongSymbolFromStringTemplate: &LongSymbolFromStringTemplate !!js/function >\n        (lhs) => {\n            return `Long.parseLong`;\n        }\n    LongSymbolFromStringArgsTemplate: &LongSymbolFromStringArgsTemplate null\n    MinKeySymbolTemplate: &MinKeySymbolTemplate null\n    MinKeySymbolArgsTemplate: &MinKeySymbolArgsTemplate null\n    MaxKeySymbolTemplate: &MaxKeySymbolTemplate null\n    MaxKeySymbolArgsTemplate: &MaxKeySymbolArgsTemplate null\n    TimestampSymbolTemplate: &TimestampSymbolTemplate !!js/function >\n        () => {\n            return 'BSONTimestamp';\n        }\n    TimestampSymbolArgsTemplate: &TimestampSymbolArgsTemplate !!js/function >\n        (lhs, arg1, arg2) => {\n            return `(${arg1 === undefined ? 0 : arg1}, ${arg2 === undefined ? 0 : arg2})`;\n        }\n    SymbolSymbolTemplate: &SymbolSymbolTemplate !!js/function >\n        () => {\n            return 'Symbol';\n        }\n    SymbolSymbolArgsTemplate: &SymbolSymbolArgsTemplate null\n    BSONRegExpSymbolTemplate: &BSONRegExpSymbolTemplate !!js/function >\n        () => {\n            return 'BsonRegularExpression';\n        }\n    BSONRegExpSymbolArgsTemplate: &BSONRegExpSymbolArgsTemplate !!js/function >\n        (lhs, pattern, flags) => {\n            const doubleStringify = (str) => {\n                let newStr = str;\n                if (\n                  (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                  (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                    newStr = str.substr(1, str.length - 2);\n                }\n                return `\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\"`;\n            }\n            return `(${doubleStringify(pattern)}${flags ? ', ' + doubleStringify(flags) : ''})`;\n        }\n    Decimal128SymbolTemplate: &Decimal128SymbolTemplate !!js/function >\n        () => {\n            return 'Decimal128';\n        }\n    Decimal128SymbolArgsTemplate: &Decimal128SymbolArgsTemplate !!js/function >\n        (_, str) => { // just stringify\n            let newStr = str;\n            if (\n              (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n              (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                newStr = str.substr(1, str.length - 2);\n            }\n            return `.parse(\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\")`;\n        }\n    Decimal128SymbolFromStringTemplate: &Decimal128SymbolFromStringTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.parse`;\n        }\n    Decimal128SymbolFromStringArgsTemplate: &Decimal128SymbolFromStringArgsTemplate null\n    Decimal128ToStringTemplate: &Decimal128ToStringTemplate null\n    Decimal128ToStringArgsTemplate: &Decimal128ToStringArgsTemplate null\n    # BSON Util Templates\n    ObjectIdCreateFromHexStringTemplate: &ObjectIdCreateFromHexStringTemplate !!js/function >\n        () => {\n            return 'new ObjectId';\n        }\n    ObjectIdCreateFromHexStringArgsTemplate: &ObjectIdCreateFromHexStringArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `(${arg})`;\n        }\n    ObjectIdCreateFromTimeTemplate: &ObjectIdCreateFromTimeTemplate !!js/function >\n        () => {\n            return 'new ObjectId';\n        }\n    ObjectIdCreateFromTimeArgsTemplate: &ObjectIdCreateFromTimeArgsTemplate !!js/function >\n        (lhs, arg, isNumber) => {\n            if (isNumber) {\n                return `(new java.util.Date(${arg.replace(/L$/, '000L')}))`;\n            }\n            return `(${arg})`;\n        }\n    ObjectIdIsValidTemplate: &ObjectIdIsValidTemplate !!js/function >\n        () => {\n            return 'ObjectId.isValid';\n        }\n    ObjectIdIsValidArgsTemplate: &ObjectIdIsValidArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `(${arg})`;\n        }\n    # JS Symbol Templates\n    NumberSymbolTemplate: &NumberSymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    NumberSymbolArgsTemplate: &NumberSymbolArgsTemplate !!js/function >\n        (lhs, arg, type) => {\n            arg = arg === undefined ? 0 : arg;\n            if (type === '_string') {\n                return `Double.parseDouble(${arg})`;\n            }\n            if (type === '_integer' || type === '_long' || type === '_decimal') {\n                if (arg.includes('L') || arg.includes('d')) {\n                    return `${arg.substr(0, arg.length - 1)}d`;\n                }\n                return `${arg}d`;\n            }\n            return `(double) ${arg}`;\n        }\n    DateSymbolTemplate: &DateSymbolTemplate !!js/function >\n        () => {\n            return 'java.util.Date';\n        }\n    DateSymbolArgsTemplate: &DateSymbolArgsTemplate !!js/function >\n        (lhs, date, isString) => {\n            let toStr = (d) => d;\n            if (isString) {\n                toStr = (d) => `new SimpleDateFormat(\"EEE MMMMM dd yyyy HH:mm:ss\").format(${d})`;\n            }\n            if (date === null) {\n                return toStr(`new ${lhs}()`);\n            }\n            return toStr(`new ${lhs}(${date.getTime()}L)`);\n        }\n    DateSymbolNowTemplate: &DateSymbolNowTemplate !!js/function >\n        () => {\n            return '';\n        }\n    DateSymbolNowArgsTemplate: &DateSymbolNowArgsTemplate !!js/function >\n        () => {\n            return 'new java.util.Date().getTime()';\n        }\n    RegExpSymbolTemplate: &RegExpSymbolTemplate !!js/function >\n        () => {\n            return 'Pattern';\n        }\n    RegExpSymbolArgsTemplate: &RegExpSymbolArgsTemplate null\n    ImportTemplate: &ImportTemplate null\n    DriverImportTemplate: &DriverImportTemplate !!js/function >\n        () => {\n        return 'import com.mongodb.MongoClient;\\n' +\n            'import com.mongodb.MongoClientURI;\\n' +\n            'import com.mongodb.client.FindIterable;\\n' +\n            'import com.mongodb.client.MongoCollection;\\n' +\n            'import com.mongodb.client.MongoDatabase;\\n' +\n            'import org.bson.conversions.Bson;\\n' +\n            'import java.util.concurrent.TimeUnit;\\n' +\n            'import org.bson.Document;';\n        }\n    0ImportTemplate: &0ImportTemplate null\n    1ImportTemplate: &1ImportTemplate null\n    2ImportTemplate: &2ImportTemplate null\n    3ImportTemplate: &3ImportTemplate null\n    4ImportTemplate: &4ImportTemplate null\n    5ImportTemplate: &5ImportTemplate null\n    6ImportTemplate: &6ImportTemplate null\n    7ImportTemplate: &7ImportTemplate null\n    8ImportTemplate: &8ImportTemplate !!js/function >\n        () => {\n            return 'import java.util.regex.Pattern;';\n        }\n    9ImportTemplate: &9ImportTemplate !!js/function >\n        () => {\n            return 'import java.util.Arrays;';\n        }\n    10ImportTemplate: &10ImportTemplate !!js/function >\n        () => {\n            return 'import org.bson.Document;';\n        }\n    11ImportTemplate: &11ImportTemplate !!js/function >\n        () => {\n            return 'import org.bson.BsonNull;';\n        }\n    12ImportTemplate: &12ImportTemplate !!js/function >\n        () => {\n            return 'import org.bson.BsonUndefined;';\n        }\n    100ImportTemplate: &100ImportTemplate !!js/function >\n        () => {\n            return 'import org.bson.types.Code;';\n        }\n    113ImportTemplate: &113ImportTemplate !!js/function >\n        () => {\n            return 'import org.bson.types.CodeWithScope;';\n        }\n    101ImportTemplate: &101ImportTemplate !!js/function >\n        () => {\n            return 'import org.bson.types.ObjectId;';\n        }\n    102ImportTemplate: &102ImportTemplate !!js/function >\n        () => {\n            return 'import org.bson.types.Binary;';\n        }\n    103ImportTemplate: &103ImportTemplate !!js/function >\n        () => {\n            return 'import com.mongodb.DBRef;';\n        }\n    104ImportTemplate: &104ImportTemplate null\n    105ImportTemplate: &105ImportTemplate null\n    106ImportTemplate: &106ImportTemplate null\n    107ImportTemplate: &107ImportTemplate !!js/function >\n        () => {\n            return 'import org.bson.types.MinKey;';\n        }\n    108ImportTemplate: &108ImportTemplate !!js/function >\n        () => {\n            return 'import org.bson.types.MaxKey;';\n        }\n    109ImportTemplate: &109ImportTemplate !!js/function >\n        () => {\n            return 'import org.bson.BsonRegularExpression;';\n        }\n    110ImportTemplate: &110ImportTemplate !!js/function >\n        () => {\n            return 'import org.bson.types.BSONTimestamp;';\n        }\n    111ImportTemplate: &111ImportTemplate !!js/function >\n        () => {\n            return 'import org.bson.types.Symbol;';\n        }\n    112ImportTemplate: &112ImportTemplate !!js/function >\n        () => {\n            return 'import org.bson.types.Decimal128;';\n        }\n    114ImportTemplate: &114ImportTemplate !!js/function >\n        () => {\n            return 'import org.bson.BsonBinarySubType;';\n        }\n    200ImportTemplate: &200ImportTemplate null\n    201ImportTemplate: &201ImportTemplate !!js/function >\n        () => {\n            return 'import java.text.SimpleDateFormat;';\n        }\n    300ImportTemplate: &300ImportTemplate !!js/function >\n        (classes) => {\n            return classes\n                .filter((f, i) => (classes.indexOf(f) === i && f !== 'options'))\n                .sort()\n                .map((c) => {\n                    return `import static com.mongodb.client.model.Filters.${c};`;\n                }).join('\\n');\n        }\n    301ImportTemplate: &301ImportTemplate !!js/function >\n        (classes) => {\n            return classes\n                .filter((f, i) => (classes.indexOf(f) === i))\n                .sort()\n                .map((c) => {\n                    return `import static com.mongodb.client.model.Aggregates.${c};`;\n                }).join('\\n');\n        }\n    302ImportTemplate: &302ImportTemplate !!js/function >\n        (classes) => {\n            return classes\n                .filter((f, i) => (classes.indexOf(f) === i))\n                .sort()\n                .map((c) => {\n                    return `import static com.mongodb.client.model.Accumulators.${c};`;\n                }).join('\\n');\n        }\n    303ImportTemplate: &303ImportTemplate !!js/function >\n        (classes) => {\n            return classes\n                .filter((f, i) => (classes.indexOf(f) === i))\n                .sort()\n                .map((c) => {\n                    return `import static com.mongodb.client.model.Projections.${c};`;\n                }).join('\\n');\n        }\n    304ImportTemplate: &304ImportTemplate !!js/function >\n        (classes) => {\n            return classes\n                .filter((f, i) => (classes.indexOf(f) === i))\n                .sort()\n                .map((c) => {\n                    return `import static com.mongodb.client.model.Sorts.${c};`;\n                }).join('\\n');\n        }\n    305ImportTemplate: &305ImportTemplate !!js/function >\n        (classes) => {\n            return classes\n                .filter((f, i) => (classes.indexOf(f) === i))\n                .sort()\n                .map((c) => {\n                    return `import com.mongodb.client.model.geojson.${c};`;\n                }).join('\\n');\n        }\n    306ImportTemplate: &306ImportTemplate !!js/function >\n        (classes) => {\n            return classes\n                .filter((f, i) => (classes.indexOf(f) === i))\n                .sort()\n                .map((c) => {\n                    return `import com.mongodb.client.model.${c};`;\n                }).join('\\n');\n        }\n# Universal types\n# Everything inherits from StringType because we haven't implemented any of them.\nBasicTypes:\n    # Universal basic types\n    _bool: &BoolType\n        <<: *__type\n        id: \"_bool\"\n        code: 0\n        template: *BoolTypeTemplate\n    _integer: &IntegerType\n        <<: *__type\n        id: \"_integer\"\n        code: 1\n        template: *IntegerTypeTemplate\n    _long: &LongBasicType\n        <<: *__type\n        id: \"_long\"\n        code: 2\n        template: *LongBasicTypeTemplate\n    _decimal: &DecimalType\n        <<: *__type\n        id: \"_decimal\"\n        code: 3\n        template: *DecimalTypeTemplate\n    _hex: &HexType\n        <<: *__type\n        id: \"_hex\"\n        code: 4\n        template: *HexTypeTemplate\n    _octal: &OctalType\n        <<: *__type\n        id: \"_octal\"\n        code: 5\n        template: *OctalTypeTemplate\n    _numeric: &NumericType\n        <<: *__type\n        id: \"_numeric\"\n        code: 6\n        template: *NumericTypeTemplate\n    _string: &StringType\n        <<: *__type\n        id: \"_string\"\n        code: 7\n        template: *StringTypeTemplate\n    _regex: &RegexType\n        <<: *__type\n        id: \"_regex\"\n        code: 8\n        template: *RegexTypeTemplate\n    _array: &ArrayType\n        <<: *__type\n        id: \"_array\"\n        code: 9\n        template: *ArrayTypeTemplate\n        argsTemplate: *ArrayTypeArgsTemplate\n    _object: &ObjectType\n        <<: *__type\n        id: \"_object\"\n        code: 10\n        template: *ObjectTypeTemplate\n        argsTemplate: *ObjectTypeArgsTemplate\n    _null: &NullType\n        <<: *__type\n        id: \"_null\"\n        code: 11\n        template: *NullTypeTemplate\n    _undefined: &UndefinedType\n        <<: *__type\n        id: \"_undefined\"\n        code: 12\n        template: *UndefinedTypeTemplate\n\nSyntax:\n    equality:\n        template: *EqualitySyntaxTemplate\n    in:\n        template: *InSyntaxTemplate\n    and:\n        template: *AndSyntaxTemplate\n    or:\n        template: *OrSyntaxTemplate\n    not:\n        template: *NotSyntaxTemplate\n    unary:\n        template: *UnarySyntaxTemplate\n    binary:\n        template: *BinarySyntaxTemplate\n    parens:\n        template: *ParensSyntaxTemplate\n    eos:\n        template: *EosSyntaxTemplate\n    eof:\n        template: *EofSyntaxTemplate\n    # The new template takes in expr, and an optional skip argument and optional\n    # id argument. The skip argument is a boolean that if true then doesn't add\n    # new. The code argument is the symbol code being called. The template will check\n    # if it is an exception, i.e. a type that is a constructor but may not use new.\n    new:\n        template: *NewSyntaxTemplate\n    # The regex flags that change symbols between languages can be defined here.\n    # Flags that aren't defined can be left blank and will be ignored.\n    regexFlags: *RegexFlags\n    bsonRegexFlags: *BSONRegexFlags\n    driver: *DriverTemplate\nImports:\n    import:\n        template: *ImportTemplate\n    driver:\n        template: *DriverImportTemplate\n    0:\n        template: *0ImportTemplate\n    1:\n        template: *1ImportTemplate\n    2:\n        template: *2ImportTemplate\n    3:\n        template: *3ImportTemplate\n    4:\n        template: *4ImportTemplate\n    5:\n        template: *5ImportTemplate\n    6:\n        template: *6ImportTemplate\n    7:\n        template: *7ImportTemplate\n    8:\n        template: *8ImportTemplate\n    9:\n        template: *9ImportTemplate\n    10:\n        template: *10ImportTemplate\n    11:\n        template: *11ImportTemplate\n    12:\n        template: *12ImportTemplate\n    100:\n        template: *100ImportTemplate\n    101:\n        template: *101ImportTemplate\n    102:\n        template: *102ImportTemplate\n    103:\n        template: *103ImportTemplate\n    104:\n        template: *104ImportTemplate\n    105:\n        template: *105ImportTemplate\n    106:\n        template: *106ImportTemplate\n    107:\n        template: *107ImportTemplate\n    108:\n        template: *108ImportTemplate\n    109:\n        template: *109ImportTemplate\n    110:\n        template: *110ImportTemplate\n    111:\n        template: *111ImportTemplate\n    112:\n        template: *112ImportTemplate\n    113:\n        template: *113ImportTemplate\n    114:\n        template: *114ImportTemplate\n    200:\n        template: *200ImportTemplate\n    201:\n        template: *201ImportTemplate\n    300:\n        template: *300ImportTemplate\n    301:\n        template: *301ImportTemplate\n    302:\n        template: *302ImportTemplate\n    303:\n        template: *303ImportTemplate\n    304:\n        template: *304ImportTemplate\n    305:\n        template: *305ImportTemplate\n    306:\n        template: *306ImportTemplate\nBsonTypes:\n    Code: &CodeType\n        <<: *__type\n        id: \"Code\"\n        code: 100\n        type: *ObjectType\n        attr:\n            code:\n                callable: *var\n                args: null\n                attr: null\n                id: \"code\"\n                type: *StringType\n                template: *CodeCodeTemplate\n                argsTemplate: *CodeCodeArgsTemplate\n            scope:\n                callable: *var\n                args: null\n                attr: null\n                id: \"scope\"\n                type: *StringType\n                template: *CodeScopeTemplate\n                argsTemplate: *CodeScopeArgsTemplate\n    ObjectId: &ObjectIdType\n        <<: *__type\n        id: \"ObjectId\"\n        code: 101\n        type: *ObjectType\n        attr:\n            toString:\n                <<: *__func\n                id: \"toString\"\n                type: *StringType\n                template: *ObjectIdToStringTemplate\n                argsTemplate: *ObjectIdToStringArgsTemplate\n            equals:\n                <<: *__func\n                id: \"equals\"\n                args:\n                    - [ \"ObjectId\" ]\n                type: *BoolType\n                template: *ObjectIdEqualsTemplate\n                argsTemplate: *ObjectIdEqualsArgsTemplate\n            getTimestamp:\n                <<: *__func\n                id: \"getTimestamp\"\n                type: *IntegerType\n                template: *ObjectIdGetTimestampTemplate\n                argsTemplate: *ObjectIdGetTimestampArgsTemplate\n    BinData: &BinaryType\n        <<: *__type\n        id: \"BinData\"\n        code: 102\n        type: *ObjectType\n        attr:\n            toString:\n                <<: *__func\n                id: \"toString\"\n                type: *StringType\n                template: *BinaryToStringTemplate\n                argsTemplate: *BinaryToStringArgsTemplate\n            base64:\n                <<: *__func\n                id: \"base64\"\n                type: *StringType\n                template: *BinaryValueTemplate\n                argsTemplate: *BinaryValueArgsTemplate\n            length:\n                <<: *__func\n                id: \"length\"\n                type: *IntegerType\n                template: *BinaryLengthTemplate\n                argsTemplate: *BinaryLengthArgsTemplate\n            subtype:\n                <<: *__func\n                id: \"subtype\"\n                type: *IntegerType\n                template: *BinarySubtypeTemplate\n                argsTemplate: *BinarySubtypeArgsTemplate\n    DBRef: &DBRefType\n        <<: *__type\n        id: \"DBRef\"\n        code: 103\n        type: *ObjectType\n        attr:\n            getDb:\n                <<: *__func\n                id: \"getDb\"\n                type: *StringType\n                template: *DBRefGetDBTemplate\n                argsTemplate: *DBRefGetDBArgsTemplate\n            $db:\n                callable: *var\n                args: null\n                attr: null\n                id: \"$db\"\n                type: *StringType\n                template: *DBRefGetDBTemplate\n                argsTemplate: *DBRefGetDBArgsTemplate\n            getCollection:\n                <<: *__func\n                id: \"getCollection\"\n                type: *StringType\n                template: *DBRefGetCollectionTemplate\n                argsTemplate: *DBRefGetCollectionArgsTemplate\n            getRef:\n                <<: *__func\n                id: \"getRef\"\n                type: *StringType\n                template: *DBRefGetCollectionTemplate\n                argsTemplate: *DBRefGetCollectionArgsTemplate\n            $ref:\n                callable: *var\n                args: null\n                attr: null\n                id: \"$ref\"\n                type: *StringType\n                template: *DBRefGetCollectionTemplate\n                argsTemplate: *DBRefGetCollectionArgsTemplate\n            getId:\n                <<: *__func\n                id: \"getId\"\n                type: *StringType\n                template: *DBRefGetIdTemplate\n                argsTemplate: *DBRefGetIdArgsTemplate\n            $id:\n                callable: *var\n                args: null\n                attr: null\n                id: \"$id\"\n                type: *StringType\n                template: *DBRefGetIdTemplate\n                argsTemplate: *DBRefGetIdArgsTemplate\n    NumberInt: &Int32Type\n        <<: *__type\n        id: \"NumberInt\"\n        code: 105\n        type: *ObjectType\n        attr: {}\n    NumberLong: &LongType\n        <<: *__type\n        id: \"NumberLong\"\n        code: 106\n        type: *ObjectType\n        attr:\n            toString:\n                <<: *__func\n                id: \"LongtoString\" # Needs process method\n                type: *StringType\n            top:\n                callable: *var\n                args: null\n                attr: null\n                id: \"top\"\n                type: *IntegerType\n                template: *LongTopTemplate\n                argsTemplate: null\n            bottom:\n                callable: *var\n                args: null\n                attr: null\n                id: \"bottom\"\n                type: *IntegerType\n                template: *LongBottomTemplate\n                argsTemplate: null\n            floatApprox:\n                callable: *var\n                args: null\n                attr: null\n                id: \"floatApprox\"\n                type: *IntegerType\n                template: *LongFloatApproxTemplate\n                argsTemplate: null\n    MinKeyType: &MinKeyType\n        <<: *__type\n        id: \"MinKey\"\n        code: 107\n        type: *ObjectType\n    MaxKeyType: &MaxKeyType\n        <<: *__type\n        id: \"MaxKey\"\n        code: 108\n        type: *ObjectType\n    Timestamp: &TimestampType\n        <<: *__type\n        id: \"TimestampFromShell\"\n        code: 110\n        type: *ObjectType\n        attr:\n            toString:\n                <<: *__func\n                id: \"toString\"\n                type: *StringType\n                template: *TimestampToStringTemplate\n                argsTemplate: *TimestampToStringArgsTemplate\n            getTime:\n                <<: *__func\n                id: \"getTime\"\n                type: *IntegerType\n                template: *TimestampGetLowBitsTemplate\n                argsTemplate: *TimestampGetLowBitsArgsTemplate\n            getInc:\n                <<: *__func\n                id: \"getInc\"\n                type: *IntegerType\n                template: *TimestampGetHighBitsTemplate\n                argsTemplate: *TimestampGetHighBitsArgsTemplate\n            t:\n                callable: *var\n                args: null\n                attr: null\n                id: \"getTime\"\n                type: *IntegerType\n                template: *TimestampTTemplate\n                argsTemplate: null\n            i:\n                callable: *var\n                args: null\n                attr: null\n                id: \"getInc\"\n                type: *IntegerType\n                template: *TimestampITemplate\n                argsTemplate: null\n    Symbol: &SymbolType\n        <<: *__type\n        id: \"Symbol\"\n        code: 111\n        type: *ObjectType\n    NumberDecimal: &Decimal128Type\n        <<: *__type\n        id: \"NumberDecimal\"\n        code: 112\n        type: *ObjectType\n        attr: {}\n    SUBTYPE_DEFAULT:\n        id: \"SUBTYPE_DEFAULT\"\n        callable: *var\n        args: null\n        code: 113\n        type: *IntegerType\n        template: *BinarySymbolSubtypeDefaultTemplate\n    SUBTYPE_FUNCTION:\n        id: \"SUBTYPE_FUNCTION\"\n        callable: *var\n        args: null\n        code: 113\n        type: *IntegerType\n        template: *BinarySymbolSubtypeFunctionTemplate\n    SUBTYPE_BYTE_ARRAY:\n        id: \"SUBTYPE_BYTE_ARRAY\"\n        callable: *var\n        args: null\n        code: 113\n        type: *IntegerType\n        template: *BinarySymbolSubtypeByteArrayTemplate\n    SUBTYPE_UUID_OLD:\n        id: \"SUBTYPE_UUID_OLD\"\n        callable: *var\n        args: null\n        code: 113\n        type: *IntegerType\n        template: *BinarySymbolSubtypeUuidOldTemplate\n    SUBTYPE_UUID:\n        id: \"SUBTYPE_UUID\"\n        callable: *var\n        args: null\n        code: 113\n        type: *IntegerType\n        template: *BinarySymbolSubtypeUuidTemplate\n    SUBTYPE_MD5:\n        id: \"SUBTYPE_MD5\"\n        callable: *var\n        args: null\n        code: 113\n        type: *IntegerType\n        template: *BinarySymbolSubtypeMd5Template\n    SUBTYPE_USER_DEFINED:\n        id: \"SUBTYPE_USER_DEFINED\"\n        callable: *var\n        args: null\n        code: 113\n        type: *IntegerType\n        template: *BinarySymbolSubtypeUserDefinedTemplate\nNativeTypes:\n    Date: &DateType\n        <<: *__type\n        id: \"Date\"\n        code: 200\n        type: *ObjectType\n        attr: {} # TODO: no built-in date methods added yet\n    RegExp: &RegExpType\n        <<: *__type\n        id: \"RegExp\"\n        code: 8\n        type: *ObjectType\n        attr: {}\n\n\n\n\nBsonSymbols:\n    Code: &CodeSymbol\n        id: \"Code\"\n        code: 100\n        callable: *constructor\n        args:\n            - [ *StringType, null ]\n            - [ *ObjectType, null ]\n        type: *CodeType\n        attr: {}\n        template: *CodeSymbolTemplate\n        argsTemplate: *CodeSymbolArgsTemplate\n    ObjectId: &ObjectIdSymbol\n        id: \"ObjectId\"\n        code: 101\n        callable: *constructor\n        args:\n            - [ *StringType, null ]\n        type: *ObjectIdType\n        attr:\n            fromDate:\n                <<: *__func\n                id: \"ObjectIdCreateFromTime\"\n                args:\n                    - [ *DateType ]\n                type: *ObjectIdType\n                template: *ObjectIdCreateFromTimeTemplate\n                argsTemplate: *ObjectIdCreateFromTimeArgsTemplate\n        template: *ObjectIdSymbolTemplate\n        argsTemplate: *ObjectIdSymbolArgsTemplate\n    BinData: &BinarySymbol\n        id: \"BinData\"\n        code: 102\n        callable: *constructor\n        args:\n            - [ *IntegerType ]\n            - [ *StringType ]\n        type: *BinaryType\n        attr: {}\n        template: *BinarySymbolTemplate\n        argsTemplate: *BinarySymbolArgsTemplate\n    DBRef:\n        id: \"DBRef\"\n        code: 103\n        callable: *constructor\n        args:\n            - [ *StringType ]\n            - [ *ObjectIdType ]\n            - [ *StringType, null ]\n        type: *DBRefType\n        attr: {}\n        template: *DBRefSymbolTemplate\n        argsTemplate: *DBRefSymbolArgsTemplate\n    NumberInt:\n        id: \"Int32\"\n        code: 105\n        callable: *constructor\n        args:\n            - [ *NumericType, *StringType, null ]\n        type: *Int32Type\n        attr: {}\n        template: *Int32SymbolTemplate\n        argsTemplate: *Int32SymbolArgsTemplate\n    NumberLong:\n        id: \"NumberLong\"\n        code: 106\n        callable: *constructor\n        args:\n            - [ *IntegerType, *StringType, null ]\n        type: *LongType\n        attr: {}\n        template: *LongSymbolTemplate\n        argsTemplate: *LongSymbolArgsTemplate\n    MinKey:\n        id: \"MinKey\"\n        code: 107\n        callable: *constructor\n        args: []\n        type: *MinKeyType\n        attr: {}\n        template: *MinKeySymbolTemplate\n        argsTemplate: *MinKeySymbolArgsTemplate\n    MaxKey:\n        id: \"MaxKey\"\n        code: 108\n        callable: *constructor\n        args: []\n        type: *MaxKeyType\n        attr: {}\n        template: *MaxKeySymbolTemplate\n        argsTemplate: *MaxKeySymbolArgsTemplate\n    Timestamp:\n        id: \"Timestamp\"\n        code: 110\n        callable: *constructor\n        args:\n            - [ *IntegerType, null ]\n            - [ *IntegerType, null ]\n        type: *TimestampType\n        attr: {}\n        template: *TimestampSymbolTemplate\n        argsTemplate: *TimestampSymbolArgsTemplate\n    Symbol:\n        id: \"Symbol\"\n        code: 111\n        callable: *constructor\n        args:\n            - [ *StringType ]\n        type: *SymbolType\n        attr: {}\n        template: *SymbolSymbolTemplate\n        argsTemplate: *SymbolSymbolArgsTemplate\n    NumberDecimal:\n        id: \"NumberDecimal\"\n        code: 112\n        callable: *constructor\n        args:\n            - [ *StringType, *NumericType, null ]\n        type: *Decimal128Type\n        attr: {}\n        template: *Decimal128SymbolTemplate\n        argsTemplate: *Decimal128SymbolArgsTemplate\n\nNativeSymbols:\n    Number:\n        id: \"Number\"\n        code: 2\n        callable: *constructor\n        args:\n            - [ *IntegerType, *StringType, null ]\n        type: *NumericType\n        attr: {} # TODO: no built-in number funcs added yet\n        template: *NumberSymbolTemplate\n        argsTemplate: *NumberSymbolArgsTemplate\n    Date: # Needs emit method\n        id: \"Date\"\n        code: 200\n        callable: *constructor\n        args:\n            - [ *StringType, *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n        type: *DateType\n        attr: # TODO: add more date funcs?\n            now:\n                id: \"now\"\n                code: 200.1\n                callable: *func\n                args: []\n                type: *DateType\n                attr: {}\n                template: *DateSymbolNowTemplate\n                argsTemplate: *DateSymbolNowArgsTemplate\n        template: *DateSymbolTemplate\n        argsTemplate: *DateSymbolArgsTemplate\n    ISODate: # Needs emit method\n        id: \"ISODate\"\n        code: 200\n        callable: *constructor\n        args:\n            - [ *StringType, null ]\n        type: *DateType\n        attr:\n            now:\n                id: \"now\"\n                callable: *constructor\n                args: []\n                type: *DateType\n                attr: {}\n                template: *DateSymbolNowTemplate\n                argsTemplate: *DateSymbolNowArgsTemplate\n        template: *DateSymbolTemplate\n        argsTemplate: *DateSymbolArgsTemplate\n    RegExp: # Needs process method\n        id: \"RegExp\"\n        code: 8\n        callable: *constructor\n        args:\n            - [ *StringType, *RegexType ]\n            - [ *StringType, null ]\n        type: *RegExpType\n        attr: {} # TODO: no built-in regex funcs added yet\n        template: *RegExpSymbolTemplate\n        argsTemplate: *RegExpSymbolArgsTemplate\n\n"},48538:e=>{e.exports="SymbolTypes:\n    VAR: &var 0\n    CONSTRUCTOR: &constructor 1\n    FUNC: &func 2\n# Internal patterns to save typing\n__type: &__type\n    id: null\n    callable: *var\n    args: null\n    type: null\n    attr: {}\n    template: null\n    argsTemplate: null\n__func: &__func\n    callable: *func\n    args: []\n    attr: {}\n    template: null\n    argsTemplate: null\n\n# Javascript Templates\nTemplates:\n    # Misc\n    RegexFlags: &RegexFlags\n        i: 'i'\n        m: 'm'\n        u: 'u'\n        y: 'y'\n        g: 'g'\n    BSONRegexFlags: &BSONRegexFlags\n        i: 'i'\n        m: 'm'\n        x: 'x'\n        s: 's'\n        l: 'l'\n        u: 'u'\n    # Syntax\n    DriverTemplate: &DriverTemplate !!js/function >\n        (spec) => {\n            const comment = `/*\n         * Requires the MongoDB Node.js Driver\n         * https://mongodb.github.io/node-mongodb-native\n         */`;\n            const translateKey = {\n                project: 'projection'\n            };\n\n            let cmd;\n            let defs;\n            if ('aggregation' in spec) {\n                const agg = spec.aggregation;\n                cmd = `coll.aggregate(agg, (cmdErr, result) => {`;\n                defs = `const agg = ${agg};\\n`;\n            } else {\n                let opts = '';\n                const args = {};\n                Object.keys(spec).forEach((k) => {\n                    if (k !== 'options') {\n                        args[k in translateKey ? translateKey[k] : k] = spec[k];\n                    }\n                });\n\n                if (Object.keys(args).length > 0) {\n                    defs = Object.keys(args).reduce((s, k) => {\n                        if (k !== 'filter') {\n                            if (opts === '') {\n                                opts = `${k}: ${k}`;\n                            } else {\n                                opts = `${opts}, ${k}: ${k}`;\n                            }\n                        }\n                        return `${s}const ${k} = ${args[k]};\\n`;\n                    }, '');\n                    opts = opts === '' ? '' : `, { ${opts} }`;\n                }\n                cmd = `coll.find(filter${opts}, (cmdErr, result) => {`;\n            }\n            return `${comment}\\n\\n${defs}\n        MongoClient.connect(\n          '${spec.options.uri}',\n          { useNewUrlParser: true, useUnifiedTopology: true },\n          function(connectErr, client) {\n            assert.equal(null, connectErr);\n            const coll = client.db('${spec.options.database}').collection('${spec.options.collection}');\n            ${cmd}\n              assert.equal(null, cmdErr);\n            });\n            client.close();\n          });`;\n        }\n    EqualitySyntaxTemplate: &EqualitySyntaxTemplate !!js/function >\n        (lhs, op, rhs) => {\n            if (op.includes('!') || op.includes('not')) {\n                return `${lhs} !== ${rhs}`;\n            } else if (op === '==' || op === '===' || op === 'is') {\n                return `${lhs} === ${rhs}`;\n            }\n            return `${lhs} ${op} ${rhs}`;\n        }\n    InSyntaxTemplate: &InSyntaxTemplate !!js/function >\n        (lhs, op, rhs) => {\n            let str = '!==';\n            if (op.includes('!') || op.includes('not')) {\n                str = '===';\n            }\n            return `${rhs}.indexOf(${lhs}) ${str} -1`\n        }\n    AndSyntaxTemplate: &AndSyntaxTemplate !!js/function >\n        (args) => {\n            return args.join(' && ');\n        }\n    OrSyntaxTemplate: &OrSyntaxTemplate !!js/function >\n        (args) => {\n            return args.join(' || ');\n        }\n    NotSyntaxTemplate: &NotSyntaxTemplate !!js/function >\n        (arg) => {\n            return `!${arg}`;\n        }\n    UnarySyntaxTemplate: &UnarySyntaxTemplate null\n    BinarySyntaxTemplate: &BinarySyntaxTemplate !!js/function >\n        (args) => {\n            return args.reduce((s, op, i, arr) => {\n                if (i % 2 === 0) {\n                    return s;\n                }\n                const rhs = arr[i + 1];\n                switch(op) {\n                    case '//':\n                        return `Math.floor(${s}, ${rhs})`;\n                    case '**':\n                        return `Math.pow(${s}, ${rhs})`;\n                    default:\n                        return `${s} ${op} ${rhs}`;\n                }\n            }, args[0]);\n        }\n    ParensSyntaxTemplate: &ParensSyntaxTemplate null\n    EosSyntaxTemplate: &EosSyntaxTemplate null\n    EofSyntaxTemplate: &EofSyntaxTemplate null\n    NewTemplate: &NewSyntaxTemplate !!js/function >\n        (expr, skip, code) => {\n            // Add classes that don't use \"new\" to array.\n            // So far: [Date.now, Decimal128/NumberDecimal, Long/NumberLong]\n            noNew = [200.1, 112, 106];\n            if (skip || (code && noNew.indexOf(code) !== -1)) {\n                return expr;\n            }\n            return `new ${expr}`;\n        }\n    # BSON Object Type templates\n    CodeTypeTemplate: &CodeTypeTemplate null\n    StringTypeTemplate: &StringTypeTemplate !!js/function >\n        (str) => {\n          let newStr = str;\n          if (\n            (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n            (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n            newStr = str.substr(1, str.length - 2);\n          }\n          return `'${newStr.replace(/\\\\([\\s\\S])|(')/g, '\\\\$1$2')}'`;\n        }\n    RegexTypeTemplate: &RegexTypeTemplate !!js/function >\n        (pattern, flags) => {\n            const str = pattern;\n            let newStr = str;\n            if (\n              (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n              (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                newStr = str.substr(1, str.length - 2);\n            }\n            pattern = `'${newStr.replace(/\\\\([\\s\\S])|(')/g, '\\\\$1$2')}'`;\n            return `RegExp(${pattern}${flags ? ', ' + '\\'' + flags + '\\'': ''})`;\n        }\n    BoolTypeTemplate: &BoolTypeTemplate !!js/function >\n        (literal) => {\n            return literal.toLowerCase();\n        }\n    IntegerTypeTemplate: &IntegerTypeTemplate null\n    DecimalTypeTemplate: &DecimalTypeTemplate null\n    LongBasicTypeTemplate: &LongBasicTypeTemplate null\n    HexTypeTemplate: &HexTypeTemplate null\n    OctalTypeTemplate: &OctalTypeTemplate null\n    NumericTypeTemplate: &NumericTypeTemplate null\n    ArrayTypeTemplate: &ArrayTypeTemplate !!js/function >\n        (literal, depth) => {\n            depth++;\n            if (literal === '') {\n                return '[]'\n            }\n            const indent = '\\n' + '  '.repeat(depth);\n            const closingIndent = '\\n' + '  '.repeat(depth - 1);\n\n            return `[${indent}${literal}${closingIndent}]`;\n        }\n    ArrayTypeArgsTemplate: &ArrayTypeArgsTemplate null\n    NullTypeTemplate: &NullTypeTemplate !!js/function >\n        () => {\n            return 'null';\n        }\n    UndefinedTypeTemplate: &UndefinedTypeTemplate !!js/function >\n        () => {\n            return 'undefined';\n        }\n    ObjectTypeTemplate: &ObjectTypeTemplate !!js/function >\n        (literal) => {\n            if (literal === '') {\n                return '{}';\n            }\n            return literal;\n        }\n    ObjectTypeArgsTemplate: &ObjectTypeArgsTemplate !!js/function >\n        (args, depth) => {\n            if (args.length === 0) {\n                return '{}';\n            }\n            depth++;\n            const indent = '\\n' + '  '.repeat(depth);\n            const closingIndent = '\\n' + '  '.repeat(depth - 1);\n            const singleStringify = (str) => {\n                let newStr = str;\n                if (\n                  (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                  (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                    newStr = str.substr(1, str.length - 2);\n                }\n                return `'${newStr.replace(/\\\\([\\s\\S])|(')/g, '\\\\$1$2')}'`;\n            }\n            const pairs = args.map((arg) => {\n                return `${indent}${singleStringify(arg[0])}: ${arg[1]}`;\n            }).join(', ');\n\n            return `{${pairs}${closingIndent}}`\n        }\n    # BSON Object Method templates\n    CodeCodeTemplate: &CodeCodeTemplate null\n    CodeCodeArgsTemplate: &CodeCodeArgsTemplate null\n    CodeScopeTemplate: &CodeScopeTemplate null\n    CodeScopeArgsTemplate: &CodeScopeArgsTemplate null\n    ObjectIdToStringTemplate: &ObjectIdToStringTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.toString()`;\n        }\n    ObjectIdToStringArgsTemplate: &ObjectIdToStringArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    ObjectIdEqualsTemplate: &ObjectIdEqualsTemplate null\n    ObjectIdEqualsArgsTemplate: &ObjectIdEqualsArgsTemplate null\n    ObjectIdGetTimestampTemplate: &ObjectIdGetTimestampTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getTimestamp()`;\n        }\n    ObjectIdGetTimestampArgsTemplate: &ObjectIdGetTimestampArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    BinaryValueTemplate: &BinaryValueTemplate null\n    BinaryValueArgsTemplate: &BinaryValueArgsTemplate null\n    BinaryLengthTemplate: &BinaryLengthTemplate null\n    BinaryLengthArgsTemplate: &BinaryLengthArgsTemplate null\n    BinaryToStringTemplate: &BinaryToStringTemplate null\n    BinaryToStringArgsTemplate: &BinaryToStringArgsTemplate null\n    BinarySubtypeTemplate: &BinarySubtypeTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.sub_type`;\n        }\n    BinarySubtypeArgsTemplate: &BinarySubtypeArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    DBRefGetDBTemplate: &DBRefGetDBTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.db`;\n        }\n    DBRefGetCollectionTemplate: &DBRefGetCollectionTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.namespace`;\n        }\n    DBRefGetIdTemplate: &DBRefGetIdTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.oid`;\n        }\n    DBRefGetDBArgsTemplate: &DBRefGetDBArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    DBRefGetCollectionArgsTemplate: &DBRefGetCollectionArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    DBRefGetIdArgsTemplate: &DBRefGetIdArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongEqualsTemplate: &LongEqualsTemplate null\n    LongEqualsArgsTemplate: &LongEqualsArgsTemplate null\n    LongToStringTemplate: &LongToStringTemplate null\n    LongToStringArgsTemplate: &LongToStringArgsTemplate null\n    LongToIntTemplate: &LongToIntTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.toInt`;\n        }\n    LongToIntArgsTemplate: &LongToIntArgsTemplate null\n    LongToNumberTemplate: &LongToNumberTemplate null\n    LongToNumberArgsTemplate: &LongToNumberArgsTemplate null\n    LongAddTemplate: &LongAddTemplate null\n    LongAddArgsTemplate: &LongAddArgsTemplate null\n    LongSubtractTemplate: &LongSubtractTemplate null\n    LongSubtractArgsTemplate: &LongSubtractArgsTemplate null\n    LongMultiplyTemplate: &LongMultiplyTemplate null\n    LongMultiplyArgsTemplate: &LongMultiplyArgsTemplate null\n    LongDivTemplate: &LongDivTemplate null\n    LongDivArgsTemplate: &LongDivArgsTemplate null\n    LongModuloTemplate: &LongModuloTemplate null\n    LongModuloArgsTemplate: &LongModuloArgsTemplate null\n    LongAndTemplate: &LongAndTemplate null\n    LongAndArgsTemplate: &LongAndArgsTemplate null\n    LongOrTemplate: &LongOrTemplate null\n    LongOrArgsTemplate: &LongOrArgsTemplate null\n    LongXorTemplate: &LongXorTemplate null\n    LongXorArgsTemplate: &LongXorArgsTemplate null\n    LongShiftLeftTemplate: &LongShiftLeftTemplate null\n    LongShiftLeftArgsTemplate: &LongShiftLeftArgsTemplate null\n    LongShiftRightTemplate: &LongShiftRightTemplate null\n    LongShiftRightArgsTemplate: &LongShiftRightArgsTemplate null\n    LongCompareTemplate: &LongCompareTemplate null\n    LongCompareArgsTemplate: &LongCompareArgsTemplate null\n    LongIsOddTemplate: &LongIsOddTemplate null\n    LongIsOddArgsTemplate: &LongIsOddArgsTemplate null\n    LongIsZeroTemplate: &LongIsZeroTemplate null\n    LongIsZeroArgsTemplate: &LongIsZeroArgsTemplate null\n    LongIsNegativeTemplate: &LongIsNegativeTemplate null\n    LongIsNegativeArgsTemplate: &LongIsNegativeArgsTemplate null\n    LongNegateTemplate: &LongNegateTemplate null\n    LongNegateArgsTemplate: &LongNegateArgsTemplate null\n    LongNotTemplate: &LongNotTemplate null\n    LongNotArgsTemplate: &LongNotArgsTemplate null\n    LongNotEqualsTemplate: &LongNotEqualsTemplate null\n    LongNotEqualsArgsTemplate: &LongNotEqualsArgsTemplate null\n    LongGreaterThanTemplate: &LongGreaterThanTemplate null\n    LongGreaterThanArgsTemplate: &LongGreaterThanArgsTemplate null\n    LongGreaterThanOrEqualTemplate: &LongGreaterThanOrEqualTemplate null\n    LongGreaterThanOrEqualArgsTemplate: &LongGreaterThanOrEqualArgsTemplate null\n    LongLessThanTemplate: &LongLessThanTemplate null\n    LongLessThanArgsTemplate: &LongLessThanArgsTemplate null\n    LongLessThanOrEqualTemplate: &LongLessThanOrEqualTemplate null\n    LongLessThanOrEqualArgsTemplate: &LongLessThanOrEqualArgsTemplate null\n    LongFloatApproxTemplate: &LongFloatApproxTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.toNumber()`;\n        }\n    LongTopTemplate: &LongTopTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getHighBits()`;\n        }\n    LongBottomTemplate: &LongBottomTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getLowBits()`;\n        }\n    TimestampToStringTemplate: &TimestampToStringTemplate null\n    TimestampToStringArgsTemplate: &TimestampToStringArgsTemplate null\n    TimestampEqualsTemplate: &TimestampEqualsTemplate null\n    TimestampEqualsArgsTemplate: &TimestampEqualsArgsTemplate null\n    TimestampGetLowBitsTemplate: &TimestampGetLowBitsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getLowBits`;\n        }\n    TimestampGetLowBitsArgsTemplate: &TimestampGetLowBitsArgsTemplate null\n    TimestampGetHighBitsTemplate: &TimestampGetHighBitsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getHighBits`;\n        }\n    TimestampGetHighBitsArgsTemplate: &TimestampGetHighBitsArgsTemplate null\n    TimestampTTemplate: &TimestampTTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getLowBits()`;\n        }\n    TimestampITemplate: &TimestampITemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.getHighBits()`;\n        }\n    TimestampAsDateTemplate: &TimestampAsDateTemplate !!js/function >\n        (lhs) => {\n            return `new Date(${lhs}.getHighBits() * 1000)`;\n        }\n    TimestampAsDateArgsTemplate: &TimestampAsDateArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    TimestampCompareTemplate: &TimestampCompareTemplate null\n    TimestampCompareArgsTemplate: &TimestampCompareArgsTemplate null\n    TimestampNotEqualsTemplate: &TimestampNotEqualsTemplate null\n    TimestampNotEqualsArgsTemplate: &TimestampNotEqualsArgsTemplate null\n    TimestampGreaterThanTemplate: &TimestampGreaterThanTemplate null\n    TimestampGreaterThanArgsTemplate: &TimestampGreaterThanArgsTemplate null\n    TimestampGreaterThanOrEqualTemplate: &TimestampGreaterThanOrEqualTemplate null\n    TimestampGreaterThanOrEqualArgsTemplate: &TimestampGreaterThanOrEqualArgsTemplate null\n    TimestampLessThanTemplate: &TimestampLessThanTemplate null\n    TimestampLessThanArgsTemplate: &TimestampLessThanArgsTemplate null\n    TimestampLessThanOrEqualTemplate: &TimestampLessThanOrEqualTemplate null\n    TimestampLessThanOrEqualArgsTemplate: &TimestampLessThanOrEqualArgsTemplate null\n    SymbolValueOfTemplate: &SymbolValueOfTemplate null\n    SymbolValueOfArgsTemplate: &SymbolValueOfArgsTemplate null\n    SymbolInspectTemplate: &SymbolInspectTemplate null\n    SymbolInspectArgsTemplate: &SymbolInspectArgsTemplate null\n    SymbolToStringTemplate: &SymbolToStringTemplate null\n    SymbolToStringArgsTemplate: &SymbolToStringArgsTemplate null\n    # Symbol Templates\n    CodeSymbolTemplate: &CodeSymbolTemplate null\n    CodeSymbolArgsTemplate: &CodeSymbolArgsTemplate !!js/function >\n        (lhs, code, scope) => {\n            code = code === undefined ? '\\'\\'' : code;\n            scope = scope === undefined ? '' : `, ${scope}`;\n            return `(${code}${scope})`;\n        }\n    ObjectIdSymbolTemplate: &ObjectIdSymbolTemplate null\n    ObjectIdSymbolArgsTemplate: &ObjectIdSymbolArgsTemplate !!js/function >\n        (lhs, str) => {\n          if (!str || str.length === 0) {\n            return '()';\n          }\n          let newStr = str;\n          if (\n            (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n            (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n            newStr = str.substr(1, str.length - 2);\n          }\n          return `('${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}')`;\n        }\n    BinarySymbolTemplate: &BinarySymbolTemplate !!js/function >\n        () => {\n            return 'Binary';\n        }\n    BinarySymbolArgsTemplate: &BinarySymbolArgsTemplate !!js/function >\n        (lhs, buffer, subtype) => {\n            return `(${buffer.toString('base64')}, '${subtype}')`;\n        }\n    BinarySymbolSubtypeDefaultTemplate: &BinarySymbolSubtypeDefaultTemplate null\n    BinarySymbolSubtypeFunctionTemplate: &BinarySymbolSubtypeFunctionTemplate null\n    BinarySymbolSubtypeByteArrayTemplate: &BinarySymbolSubtypeByteArrayTemplate null\n    BinarySymbolSubtypeUuidOldTemplate: &BinarySymbolSubtypeUuidOldTemplate null\n    BinarySymbolSubtypeUuidTemplate: &BinarySymbolSubtypeUuidTemplate null\n    BinarySymbolSubtypeMd5Template: &BinarySymbolSubtypeMd5Template null\n    BinarySymbolSubtypeUserDefinedTemplate: &BinarySymbolSubtypeUserDefinedTemplate null\n    DBRefSymbolTemplate: &DBRefSymbolTemplate null\n    DBRefSymbolArgsTemplate: &DBRefSymbolArgsTemplate null\n    DoubleSymbolTemplate: &DoubleSymbolTemplate !!js/function >\n        () => {\n            return 'Double';\n        }\n    DoubleSymbolArgsTemplate: &DoubleSymbolArgsTemplate null\n    Int32SymbolTemplate: &Int32SymbolTemplate !!js/function >\n        () => {\n            return 'Int32';\n        }\n    Int32SymbolArgsTemplate: &Int32SymbolArgsTemplate !!js/function >\n        (lhs, arg) => {\n            arg = arg === undefined ? 0 : arg;\n            return `(${arg})`;\n        }\n    LongSymbolTemplate: &LongSymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongSymbolArgsTemplate: &LongSymbolArgsTemplate !!js/function >\n        (lhs, arg, type) => {\n            arg = arg === undefined ? 0 : arg;\n            if (type === '_string') {\n                return `Long.fromString(${arg})`;\n            }\n            return `Long.fromNumber(${arg})`;\n        }\n    LongSymbolMaxTemplate: &LongSymbolMaxTemplate null\n    LongSymbolMaxArgsTemplate: &LongSymbolMaxArgsTemplate null\n    LongSymbolMinTemplate: &LongSymbolMinTemplate null\n    LongSymbolMinArgsTemplate: &LongSymbolMinArgsTemplate null\n    LongSymbolZeroTemplate: &LongSymbolZeroTemplate null\n    LongSymbolZeroArgsTemplate: &LongSymbolZeroArgsTemplate null\n    LongSymbolOneTemplate: &LongSymbolOneTemplate null\n    LongSymbolOneArgsTemplate: &LongSymbolOneArgsTemplate null\n    LongSymbolNegOneTemplate: &LongSymbolNegOneTemplate null\n    LongSymbolNegOneArgsTemplate: &LongSymbolNegOneArgsTemplate null\n    LongSymbolFromBitsTemplate: &LongSymbolFromBitsTemplate null\n    LongSymbolFromBitsArgsTemplate: &LongSymbolFromBitsArgsTemplate null\n    LongSymbolFromIntTemplate: &LongSymbolFromIntTemplate null\n    LongSymbolFromIntArgsTemplate: &LongSymbolFromIntArgsTemplate null\n    LongSymbolFromNumberTemplate: &LongSymbolFromNumberTemplate null\n    LongSymbolFromNumberArgsTemplate: &LongSymbolFromNumberArgsTemplate null\n    LongSymbolFromStringTemplate: &LongSymbolFromStringTemplate null\n    LongSymbolFromStringArgsTemplate: &LongSymbolFromStringArgsTemplate null\n    MinKeySymbolTemplate: &MinKeySymbolTemplate null\n    MinKeySymbolArgsTemplate: &MinKeySymbolArgsTemplate null\n    MaxKeySymbolTemplate: &MaxKeySymbolTemplate null\n    MaxKeySymbolArgsTemplate: &MaxKeySymbolArgsTemplate null\n    TimestampSymbolTemplate: &TimestampSymbolTemplate null\n    TimestampSymbolArgsTemplate: &TimestampSymbolArgsTemplate !!js/function >\n        (lhs, arg1, arg2) => {\n            return `(${arg1 === undefined ? 0 : arg1}, ${arg2 === undefined ? 0 : arg2})`;\n        }\n    SymbolSymbolTemplate: &SymbolSymbolTemplate !!js/function >\n        () => {\n            return 'BSONSymbol';\n        }\n    SymbolSymbolArgsTemplate: &SymbolSymbolArgsTemplate null\n    BSONRegExpSymbolTemplate: &BSONRegExpSymbolTemplate !!js/function >\n        () => {\n            return 'BSONRegExp';\n        }\n    BSONRegExpSymbolArgsTemplate: &BSONRegExpSymbolArgsTemplate !!js/function >\n        (lhs, pattern, flags) => {\n            const singleStringify = (str) => {\n                let newStr = str;\n                if (\n                    (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                    (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                    newStr = str.substr(1, str.length - 2);\n                }\n                return `'${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}'`;\n            }\n            return `(${singleStringify(pattern)}${flags ? ', ' + singleStringify(flags) : ''})`;\n        }\n    Decimal128SymbolTemplate: &Decimal128SymbolTemplate !!js/function >\n        () => {\n            return 'Decimal128';\n        }\n    Decimal128SymbolArgsTemplate: &Decimal128SymbolArgsTemplate !!js/function >\n        (lhs, arg) => {\n            arg = arg === undefined ? '0' : arg.toString();\n            if (arg.charAt(0) === '\\'' && arg.charAt(arg.length - 1) === '\\'') {\n                return `.fromString(${arg})`;\n            }\n            return `.fromString('${arg}')`;\n        }\n    Decimal128SymbolFromStringTemplate: &Decimal128SymbolFromStringTemplate null\n    Decimal128SymbolFromStringArgsTemplate: &Decimal128SymbolFromStringArgsTemplate null\n    Decimal128ToStringTemplate: &Decimal128ToStringTemplate null\n    Decimal128ToStringArgsTemplate: &Decimal128ToStringArgsTemplate null\n    # BSON Util Templates\n    ObjectIdCreateFromHexStringTemplate: &ObjectIdCreateFromHexStringTemplate null\n    ObjectIdCreateFromHexStringArgsTemplate: &ObjectIdCreateFromHexStringArgsTemplate null\n    ObjectIdCreateFromTimeTemplate: &ObjectIdCreateFromTimeTemplate !!js/function >\n        () => {\n            return `ObjectId.createFromTime`;\n        }\n    ObjectIdCreateFromTimeArgsTemplate: &ObjectIdCreateFromTimeArgsTemplate !!js/function >\n        (lhs, arg, isNumber) => {\n            if (!isNumber) {\n                return `(${arg}.getTime() / 1000)`;\n            }\n            return `(${arg})`;\n        }\n    ObjectIdIsValidTemplate: &ObjectIdIsValidTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.isValid`;\n        }\n    ObjectIdIsValidArgsTemplate: &ObjectIdIsValidArgsTemplate null\n    # JS Symbol Templates\n    NumberSymbolTemplate: &NumberSymbolTemplate !!js/function >\n        () => {\n            return 'Number';\n        }\n    NumberSymbolArgsTemplate: &NumberSymbolArgsTemplate !!js/function >\n        (lhs, arg) => {\n            arg = arg === undefined ? '0' : arg;\n            return `(${arg})`;\n        }\n    DateSymbolTemplate: &DateSymbolTemplate !!js/function >\n        () => {\n            return 'Date';\n        }\n    DateSymbolArgsTemplate: &DateSymbolArgsTemplate null\n    DateSymbolNowTemplate: &DateSymbolNowTemplate !!js/function >\n        () => {\n            return 'Date.now';\n        }\n    DateSymbolNowArgsTemplate: &DateSymbolNowArgsTemplate null\n    RegExpSymbolTemplate: &RegExpSymbolTemplate !!js/function >\n        () => {\n            return 'RegExp';\n        }\n    RegExpSymbolArgsTemplate: &RegExpSymbolArgsTemplate null\n    ImportTemplate: &ImportTemplate !!js/function >\n        (args) => {\n            const bson = [];\n            const other = [];\n            Object.keys(args).map(\n                (m) => {\n                    if (m > 99 && m < 200) {\n                        bson.push(args[m]);\n                    } else {\n                        other.push(args[m]);\n                    }\n                }\n            );\n            if (bson.length) {\n                other.push(`const {\\n  ${bson.join(',\\n  ')}\\n} = require('mongodb');`);\n            }\n            return other.join('\\n');\n        }\n    DriverImportTemplate: &DriverImportTemplate !!js/function >\n        () => {\n            return `const MongoClient = require('mongodb').MongoClient;\n        const assert = require('assert');`;\n        }\n    0ImportTemplate: &0ImportTemplate null\n    1ImportTemplate: &1ImportTemplate null\n    2ImportTemplate: &2ImportTemplate null\n    3ImportTemplate: &3ImportTemplate null\n    4ImportTemplate: &4ImportTemplate null\n    5ImportTemplate: &5ImportTemplate null\n    6ImportTemplate: &6ImportTemplate null\n    7ImportTemplate: &7ImportTemplate null\n    8ImportTemplate: &8ImportTemplate null\n    9ImportTemplate: &9ImportTemplate null\n    10ImportTemplate: &10ImportTemplate null\n    11ImportTemplate: &11ImportTemplate null\n    12ImportTemplate: &12ImportTemplate null\n    100ImportTemplate: &100ImportTemplate !!js/function >\n        () => {\n            return 'Code';\n        }\n    101ImportTemplate: &101ImportTemplate !!js/function >\n        () => {\n            return 'ObjectId';\n        }\n    102ImportTemplate: &102ImportTemplate !!js/function >\n        () => {\n            return 'Binary';\n        }\n    103ImportTemplate: &103ImportTemplate !!js/function >\n        () => {\n            return 'DBRef';\n        }\n    104ImportTemplate: &104ImportTemplate !!js/function >\n        () => {\n            return 'Double';\n        }\n    105ImportTemplate: &105ImportTemplate !!js/function >\n        () => {\n            return 'Int32';\n        }\n    106ImportTemplate: &106ImportTemplate !!js/function >\n        () => {\n            return 'Long';\n        }\n    107ImportTemplate: &107ImportTemplate !!js/function >\n        () => {\n            return 'MinKey';\n        }\n    108ImportTemplate: &108ImportTemplate !!js/function >\n        () => {\n            return 'MaxKey';\n        }\n    109ImportTemplate: &109ImportTemplate !!js/function >\n        () => {\n            return 'BSONRegExp';\n        }\n    110ImportTemplate: &110ImportTemplate !!js/function >\n        () => {\n            return 'Timestamp';\n        }\n    111ImportTemplate: &111ImportTemplate !!js/function >\n        () => {\n            return 'BSONSymbol';\n        }\n    112ImportTemplate: &112ImportTemplate !!js/function >\n        () => {\n            return 'Decimal128';\n        }\n    113ImportTemplate: &113ImportTemplate null\n    114ImportTemplate: &114ImportTemplate null\n    200ImportTemplate: &200ImportTemplate null\n    201ImportTemplate: &201ImportTemplate null\n    300ImportTemplate: &300ImportTemplate null\n    301ImportTemplate: &301ImportTemplate null\n    302ImportTemplate: &302ImportTemplate null\n    303ImportTemplate: &303ImportTemplate null\n    304ImportTemplate: &304ImportTemplate null\n    305ImportTemplate: &305ImportTemplate null\n    306ImportTemplate: &306ImportTemplate null\n# Universal types\n# Everything inherits from StringType because we haven't implemented any of them.\nBasicTypes:\n    # Universal basic types\n    _bool: &BoolType\n        <<: *__type\n        id: \"_bool\"\n        code: 0\n        template: *BoolTypeTemplate\n    _integer: &IntegerType\n        <<: *__type\n        id: \"_integer\"\n        code: 1\n        template: *IntegerTypeTemplate\n    _long: &LongBasicType\n        <<: *__type\n        id: \"_long\"\n        code: 2\n        template: *LongBasicTypeTemplate\n    _decimal: &DecimalType\n        <<: *__type\n        id: \"_decimal\"\n        code: 3\n        template: *DecimalTypeTemplate\n    _hex: &HexType\n        <<: *__type\n        id: \"_hex\"\n        code: 4\n        template: *HexTypeTemplate\n    _octal: &OctalType\n        <<: *__type\n        id: \"_octal\"\n        code: 5\n        template: *OctalTypeTemplate\n    _numeric: &NumericType\n        <<: *__type\n        id: \"_numeric\"\n        code: 6\n        template: *NumericTypeTemplate\n    _string: &StringType\n        <<: *__type\n        id: \"_string\"\n        code: 7\n        template: *StringTypeTemplate\n    _regex: &RegexType\n        <<: *__type\n        id: \"_regex\"\n        code: 8\n        template: *RegexTypeTemplate\n    _array: &ArrayType\n        <<: *__type\n        id: \"_array\"\n        code: 9\n        template: *ArrayTypeTemplate\n        argsTemplate: *ArrayTypeArgsTemplate\n    _object: &ObjectType\n        <<: *__type\n        id: \"_object\"\n        code: 10\n        template: *ObjectTypeTemplate\n        argsTemplate: *ObjectTypeArgsTemplate\n    _null: &NullType\n        <<: *__type\n        id: \"_null\"\n        code: 11\n        template: *NullTypeTemplate\n    _undefined: &UndefinedType\n        <<: *__type\n        id: \"_undefined\"\n        code: 12\n        template: *UndefinedTypeTemplate\n\nSyntax:\n    equality:\n        template: *EqualitySyntaxTemplate\n    in:\n        template: *InSyntaxTemplate\n    and:\n        template: *AndSyntaxTemplate\n    or:\n        template: *OrSyntaxTemplate\n    not:\n        template: *NotSyntaxTemplate\n    unary:\n        template: *UnarySyntaxTemplate\n    binary:\n        template: *BinarySyntaxTemplate\n    parens:\n        template: *ParensSyntaxTemplate\n    eos:\n        template: *EosSyntaxTemplate\n    eof:\n        template: *EofSyntaxTemplate\n    # The new template takes in expr, and an optional skip argument and optional\n    # id argument. The skip argument is a boolean that if true then doesn't add\n    # new. The code argument is the symbol code being called. The template will check\n    # if it is an exception, i.e. a type that is a constructor but may not use new.\n    new:\n        template: *NewSyntaxTemplate\n    # The regex flags that change symbols between languages can be defined here.\n    # Flags that aren't defined can be left blank and will be ignored.\n    regexFlags: *RegexFlags\n    bsonRegexFlags: *BSONRegexFlags\n    driver: *DriverTemplate\nImports:\n    import:\n        template: *ImportTemplate\n    driver:\n        template: *DriverImportTemplate\n    0:\n        template: *0ImportTemplate\n    1:\n        template: *1ImportTemplate\n    2:\n        template: *2ImportTemplate\n    3:\n        template: *3ImportTemplate\n    4:\n        template: *4ImportTemplate\n    5:\n        template: *5ImportTemplate\n    6:\n        template: *6ImportTemplate\n    7:\n        template: *7ImportTemplate\n    8:\n        template: *8ImportTemplate\n    9:\n        template: *9ImportTemplate\n    10:\n        template: *10ImportTemplate\n    11:\n        template: *11ImportTemplate\n    12:\n        template: *12ImportTemplate\n    100:\n        template: *100ImportTemplate\n    101:\n        template: *101ImportTemplate\n    102:\n        template: *102ImportTemplate\n    103:\n        template: *103ImportTemplate\n    104:\n        template: *104ImportTemplate\n    105:\n        template: *105ImportTemplate\n    106:\n        template: *106ImportTemplate\n    107:\n        template: *107ImportTemplate\n    108:\n        template: *108ImportTemplate\n    109:\n        template: *109ImportTemplate\n    110:\n        template: *110ImportTemplate\n    111:\n        template: *111ImportTemplate\n    112:\n        template: *112ImportTemplate\n    113:\n        template: *113ImportTemplate\n    114:\n        template: *114ImportTemplate\n    200:\n        template: *200ImportTemplate\n    201:\n        template: *201ImportTemplate\n    300:\n        template: *300ImportTemplate\n    301:\n        template: *301ImportTemplate\n    302:\n        template: *302ImportTemplate\n    303:\n        template: *303ImportTemplate\n    304:\n        template: *304ImportTemplate\n    305:\n        template: *305ImportTemplate\n    306:\n        template: *306ImportTemplate\nBsonTypes:\n    Code: &CodeType\n        <<: *__type\n        id: \"Code\"\n        code: 100\n        type: *ObjectType\n        attr:\n            code:\n                callable: *var\n                args: null\n                attr: null\n                id: \"code\"\n                type: *StringType\n                template: *CodeCodeTemplate\n                argsTemplate: *CodeCodeArgsTemplate\n            scope:\n                callable: *var\n                args: null\n                attr: null\n                id: \"scope\"\n                type: *StringType\n                template: *CodeScopeTemplate\n                argsTemplate: *CodeScopeArgsTemplate\n    ObjectId: &ObjectIdType\n        <<: *__type\n        id: \"ObjectId\"\n        code: 101\n        type: *ObjectType\n        attr:\n            toString:\n                <<: *__func\n                id: \"toString\"\n                type: *StringType\n                template: *ObjectIdToStringTemplate\n                argsTemplate: *ObjectIdToStringArgsTemplate\n            equals:\n                <<: *__func\n                id: \"equals\"\n                args:\n                    - [ \"ObjectId\" ]\n                type: *BoolType\n                template: *ObjectIdEqualsTemplate\n                argsTemplate: *ObjectIdEqualsArgsTemplate\n            getTimestamp:\n                <<: *__func\n                id: \"getTimestamp\"\n                type: *IntegerType\n                template: *ObjectIdGetTimestampTemplate\n                argsTemplate: *ObjectIdGetTimestampArgsTemplate\n    BinData: &BinaryType\n        <<: *__type\n        id: \"BinData\"\n        code: 102\n        type: *ObjectType\n        attr:\n            toString:\n                <<: *__func\n                id: \"toString\"\n                type: *StringType\n                template: *BinaryToStringTemplate\n                argsTemplate: *BinaryToStringArgsTemplate\n            base64:\n                <<: *__func\n                id: \"base64\"\n                type: *StringType\n                template: *BinaryValueTemplate\n                argsTemplate: *BinaryValueArgsTemplate\n            length:\n                <<: *__func\n                id: \"length\"\n                type: *IntegerType\n                template: *BinaryLengthTemplate\n                argsTemplate: *BinaryLengthArgsTemplate\n            subtype:\n                <<: *__func\n                id: \"subtype\"\n                type: *IntegerType\n                template: *BinarySubtypeTemplate\n                argsTemplate: *BinarySubtypeArgsTemplate\n    DBRef: &DBRefType\n        <<: *__type\n        id: \"DBRef\"\n        code: 103\n        type: *ObjectType\n        attr:\n            getDb:\n                <<: *__func\n                id: \"getDb\"\n                type: *StringType\n                template: *DBRefGetDBTemplate\n                argsTemplate: *DBRefGetDBArgsTemplate\n            $db:\n                callable: *var\n                args: null\n                attr: null\n                id: \"$db\"\n                type: *StringType\n                template: *DBRefGetDBTemplate\n                argsTemplate: *DBRefGetDBArgsTemplate\n            getCollection:\n                <<: *__func\n                id: \"getCollection\"\n                type: *StringType\n                template: *DBRefGetCollectionTemplate\n                argsTemplate: *DBRefGetCollectionArgsTemplate\n            getRef:\n                <<: *__func\n                id: \"getRef\"\n                type: *StringType\n                template: *DBRefGetCollectionTemplate\n                argsTemplate: *DBRefGetCollectionArgsTemplate\n            $ref:\n                callable: *var\n                args: null\n                attr: null\n                id: \"$ref\"\n                type: *StringType\n                template: *DBRefGetCollectionTemplate\n                argsTemplate: *DBRefGetCollectionArgsTemplate\n            getId:\n                <<: *__func\n                id: \"getId\"\n                type: *StringType\n                template: *DBRefGetIdTemplate\n                argsTemplate: *DBRefGetIdArgsTemplate\n            $id:\n                callable: *var\n                args: null\n                attr: null\n                id: \"$id\"\n                type: *StringType\n                template: *DBRefGetIdTemplate\n                argsTemplate: *DBRefGetIdArgsTemplate\n    NumberInt: &Int32Type\n        <<: *__type\n        id: \"NumberInt\"\n        code: 105\n        type: *ObjectType\n        attr: {}\n    NumberLong: &LongType\n        <<: *__type\n        id: \"NumberLong\"\n        code: 106\n        type: *ObjectType\n        attr:\n            toString:\n                <<: *__func\n                id: \"LongtoString\" # Needs process method\n                type: *StringType\n            top:\n                callable: *var\n                args: null\n                attr: null\n                id: \"top\"\n                type: *IntegerType\n                template: *LongTopTemplate\n                argsTemplate: null\n            bottom:\n                callable: *var\n                args: null\n                attr: null\n                id: \"bottom\"\n                type: *IntegerType\n                template: *LongBottomTemplate\n                argsTemplate: null\n            floatApprox:\n                callable: *var\n                args: null\n                attr: null\n                id: \"floatApprox\"\n                type: *IntegerType\n                template: *LongFloatApproxTemplate\n                argsTemplate: null\n    MinKeyType: &MinKeyType\n        <<: *__type\n        id: \"MinKey\"\n        code: 107\n        type: *ObjectType\n    MaxKeyType: &MaxKeyType\n        <<: *__type\n        id: \"MaxKey\"\n        code: 108\n        type: *ObjectType\n    Timestamp: &TimestampType\n        <<: *__type\n        id: \"TimestampFromShell\"\n        code: 110\n        type: *ObjectType\n        attr:\n            toString:\n                <<: *__func\n                id: \"toString\"\n                type: *StringType\n                template: *TimestampToStringTemplate\n                argsTemplate: *TimestampToStringArgsTemplate\n            getTime:\n                <<: *__func\n                id: \"getTime\"\n                type: *IntegerType\n                template: *TimestampGetLowBitsTemplate\n                argsTemplate: *TimestampGetLowBitsArgsTemplate\n            getInc:\n                <<: *__func\n                id: \"getInc\"\n                type: *IntegerType\n                template: *TimestampGetHighBitsTemplate\n                argsTemplate: *TimestampGetHighBitsArgsTemplate\n            t:\n                callable: *var\n                args: null\n                attr: null\n                id: \"getTime\"\n                type: *IntegerType\n                template: *TimestampTTemplate\n                argsTemplate: null\n            i:\n                callable: *var\n                args: null\n                attr: null\n                id: \"getInc\"\n                type: *IntegerType\n                template: *TimestampITemplate\n                argsTemplate: null\n    Symbol: &SymbolType\n        <<: *__type\n        id: \"Symbol\"\n        code: 111\n        type: *ObjectType\n    NumberDecimal: &Decimal128Type\n        <<: *__type\n        id: \"NumberDecimal\"\n        code: 112\n        type: *ObjectType\n        attr: {}\n    SUBTYPE_DEFAULT:\n        id: \"SUBTYPE_DEFAULT\"\n        callable: *var\n        args: null\n        code: 113\n        type: *IntegerType\n        template: *BinarySymbolSubtypeDefaultTemplate\n    SUBTYPE_FUNCTION:\n        id: \"SUBTYPE_FUNCTION\"\n        callable: *var\n        args: null\n        code: 113\n        type: *IntegerType\n        template: *BinarySymbolSubtypeFunctionTemplate\n    SUBTYPE_BYTE_ARRAY:\n        id: \"SUBTYPE_BYTE_ARRAY\"\n        callable: *var\n        args: null\n        code: 113\n        type: *IntegerType\n        template: *BinarySymbolSubtypeByteArrayTemplate\n    SUBTYPE_UUID_OLD:\n        id: \"SUBTYPE_UUID_OLD\"\n        callable: *var\n        args: null\n        code: 113\n        type: *IntegerType\n        template: *BinarySymbolSubtypeUuidOldTemplate\n    SUBTYPE_UUID:\n        id: \"SUBTYPE_UUID\"\n        callable: *var\n        args: null\n        code: 113\n        type: *IntegerType\n        template: *BinarySymbolSubtypeUuidTemplate\n    SUBTYPE_MD5:\n        id: \"SUBTYPE_MD5\"\n        callable: *var\n        args: null\n        code: 113\n        type: *IntegerType\n        template: *BinarySymbolSubtypeMd5Template\n    SUBTYPE_USER_DEFINED:\n        id: \"SUBTYPE_USER_DEFINED\"\n        callable: *var\n        args: null\n        code: 113\n        type: *IntegerType\n        template: *BinarySymbolSubtypeUserDefinedTemplate\nNativeTypes:\n    Date: &DateType\n        <<: *__type\n        id: \"Date\"\n        code: 200\n        type: *ObjectType\n        attr: {} # TODO: no built-in date methods added yet\n    RegExp: &RegExpType\n        <<: *__type\n        id: \"RegExp\"\n        code: 8\n        type: *ObjectType\n        attr: {}\n\n\n\n\nBsonSymbols:\n    Code: &CodeSymbol\n        id: \"Code\"\n        code: 100\n        callable: *constructor\n        args:\n            - [ *StringType, null ]\n            - [ *ObjectType, null ]\n        type: *CodeType\n        attr: {}\n        template: *CodeSymbolTemplate\n        argsTemplate: *CodeSymbolArgsTemplate\n    ObjectId: &ObjectIdSymbol\n        id: \"ObjectId\"\n        code: 101\n        callable: *constructor\n        args:\n            - [ *StringType, null ]\n        type: *ObjectIdType\n        attr:\n            fromDate:\n                <<: *__func\n                id: \"ObjectIdCreateFromTime\"\n                args:\n                    - [ *DateType ]\n                type: *ObjectIdType\n                template: *ObjectIdCreateFromTimeTemplate\n                argsTemplate: *ObjectIdCreateFromTimeArgsTemplate\n        template: *ObjectIdSymbolTemplate\n        argsTemplate: *ObjectIdSymbolArgsTemplate\n    BinData: &BinarySymbol\n        id: \"BinData\"\n        code: 102\n        callable: *constructor\n        args:\n            - [ *IntegerType ]\n            - [ *StringType ]\n        type: *BinaryType\n        attr: {}\n        template: *BinarySymbolTemplate\n        argsTemplate: *BinarySymbolArgsTemplate\n    DBRef:\n        id: \"DBRef\"\n        code: 103\n        callable: *constructor\n        args:\n            - [ *StringType ]\n            - [ *ObjectIdType ]\n            - [ *StringType, null ]\n        type: *DBRefType\n        attr: {}\n        template: *DBRefSymbolTemplate\n        argsTemplate: *DBRefSymbolArgsTemplate\n    NumberInt:\n        id: \"Int32\"\n        code: 105\n        callable: *constructor\n        args:\n            - [ *NumericType, *StringType, null ]\n        type: *Int32Type\n        attr: {}\n        template: *Int32SymbolTemplate\n        argsTemplate: *Int32SymbolArgsTemplate\n    NumberLong:\n        id: \"NumberLong\"\n        code: 106\n        callable: *constructor\n        args:\n            - [ *IntegerType, *StringType, null ]\n        type: *LongType\n        attr: {}\n        template: *LongSymbolTemplate\n        argsTemplate: *LongSymbolArgsTemplate\n    MinKey:\n        id: \"MinKey\"\n        code: 107\n        callable: *constructor\n        args: []\n        type: *MinKeyType\n        attr: {}\n        template: *MinKeySymbolTemplate\n        argsTemplate: *MinKeySymbolArgsTemplate\n    MaxKey:\n        id: \"MaxKey\"\n        code: 108\n        callable: *constructor\n        args: []\n        type: *MaxKeyType\n        attr: {}\n        template: *MaxKeySymbolTemplate\n        argsTemplate: *MaxKeySymbolArgsTemplate\n    Timestamp:\n        id: \"Timestamp\"\n        code: 110\n        callable: *constructor\n        args:\n            - [ *IntegerType, null ]\n            - [ *IntegerType, null ]\n        type: *TimestampType\n        attr: {}\n        template: *TimestampSymbolTemplate\n        argsTemplate: *TimestampSymbolArgsTemplate\n    Symbol:\n        id: \"Symbol\"\n        code: 111\n        callable: *constructor\n        args:\n            - [ *StringType ]\n        type: *SymbolType\n        attr: {}\n        template: *SymbolSymbolTemplate\n        argsTemplate: *SymbolSymbolArgsTemplate\n    NumberDecimal:\n        id: \"NumberDecimal\"\n        code: 112\n        callable: *constructor\n        args:\n            - [ *StringType, *NumericType, null ]\n        type: *Decimal128Type\n        attr: {}\n        template: *Decimal128SymbolTemplate\n        argsTemplate: *Decimal128SymbolArgsTemplate\n\nNativeSymbols:\n    Number:\n        id: \"Number\"\n        code: 2\n        callable: *constructor\n        args:\n            - [ *IntegerType, *StringType, null ]\n        type: *NumericType\n        attr: {} # TODO: no built-in number funcs added yet\n        template: *NumberSymbolTemplate\n        argsTemplate: *NumberSymbolArgsTemplate\n    Date: # Needs emit method\n        id: \"Date\"\n        code: 200\n        callable: *constructor\n        args:\n            - [ *StringType, *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n        type: *DateType\n        attr: # TODO: add more date funcs?\n            now:\n                id: \"now\"\n                code: 200.1\n                callable: *func\n                args: []\n                type: *DateType\n                attr: {}\n                template: *DateSymbolNowTemplate\n                argsTemplate: *DateSymbolNowArgsTemplate\n        template: *DateSymbolTemplate\n        argsTemplate: *DateSymbolArgsTemplate\n    ISODate: # Needs emit method\n        id: \"ISODate\"\n        code: 200\n        callable: *constructor\n        args:\n            - [ *StringType, null ]\n        type: *DateType\n        attr:\n            now:\n                id: \"now\"\n                callable: *constructor\n                args: []\n                type: *DateType\n                attr: {}\n                template: *DateSymbolNowTemplate\n                argsTemplate: *DateSymbolNowArgsTemplate\n        template: *DateSymbolTemplate\n        argsTemplate: *DateSymbolArgsTemplate\n    RegExp: # Needs process method\n        id: \"RegExp\"\n        code: 8\n        callable: *constructor\n        args:\n            - [ *StringType, *RegexType ]\n            - [ *StringType, null ]\n        type: *RegExpType\n        attr: {} # TODO: no built-in regex funcs added yet\n        template: *RegExpSymbolTemplate\n        argsTemplate: *RegExpSymbolArgsTemplate\n\n"},16106:e=>{e.exports='SymbolTypes:\n    VAR: &var 0\n    CONSTRUCTOR: &constructor 1\n    FUNC: &func 2\n# Internal patterns to save typing\n__type: &__type\n    id: null\n    callable: *var\n    args: null\n    type: null\n    attr: {}\n    template: null\n    argsTemplate: null\n__func: &__func\n    callable: *func\n    args: []\n    attr: {}\n    template: null\n    argsTemplate: null\n\n#############################################\n#             Sample Templates              #\n#                                           #\n# The expected arguments are commented next #\n# to the template itself. Currently all are #\n# set to null, but to define a function     #\n# replace \'null\' with \'!!js/function > \\n   #\n# and a function defined below.             #\n#                                           #\n# See the other template files for examples #\n#                                           #\n#               Good to know:               #\n# lhs is left-hand-side of the expression   #\n# rhs is right-hand-side of the expression  #\n# All args are strings unless noted         #\n#    - arg? is boolean                      #\n#    - arg# is number                       #\n#                                           #\n#############################################\nTemplates:\n    ########\n    # Misc #\n    ########\n\n    # Filter out regex flags that have translations or are unsupported.\n    RegexFlags: &RegexFlags\n        i: \'i\'\n        m: \'m\'\n        u: \'u\'\n        y: \'y\'\n        g: \'g\'\n    BSONRegexFlags: &BSONRegexFlags\n        i: \'i\'\n        m: \'m\'\n        x: \'x\'\n        s: \'s\'\n        l: \'l\'\n        u: \'u\'\n\n    #############################################\n    #                  Syntax                   #\n    #                                           #\n    # Templates for language syntax expressions #\n    #                                           #\n    #############################################\n\n    DriverTemplate: &DriverTemplate null\n    EqualitySyntaxTemplate: &EqualitySyntaxTemplate !!js/function >\n        (lhs, op, rhs) => {\n            if (op.includes(\'!\') || op.includes(\'not\')) {\n                return lhs !== rhs;\n            }\n            if (op === \'==\' || op === \'===\' || op === \'is\') {\n                if (typeof(lhs) === \'object\' && \'equals\' in lhs) {\n                    // Use \'.equals\' for objects, if it exists.\n                    return lhs.equals(rhs);\n                }\n                return lhs === rhs;\n            }\n            if (op === \'>\') {\n                return lhs > rhs;\n            }\n            if (op === \'<\') {\n                return lhs < rhs;\n            }\n            if (op === \'>=\') {\n                return lhs >= rhs;\n            }\n            if (op === \'<=\') {\n                return lhs <= rhs;\n            }\n            throw new Error(`unrecognized operation: ${op}`);\n        }\n    InSyntaxTemplate: &InSyntaxTemplate !!js/function >\n        (lhs, op, rhs) => {\n            if (op.includes(\'!\') || op.includes(\'not\')) {\n                if (typeof rhs === \'array\') {\n                    return rhs.indexOf(lhs) === -1;\n                }\n                return !(lhs in rhs);\n            }\n            if (typeof rhs === \'array\') {\n                return rhs.indexOf(lhs) !== -1;\n            }\n            return lhs in rhs;\n        }\n\n    AndSyntaxTemplate: &AndSyntaxTemplate !!js/function >\n        (args) => {\n            return args.reduce((t, k, i) => {\n                return t && k;\n            });\n        }\n    OrSyntaxTemplate: &OrSyntaxTemplate !!js/function >\n        (args) => {\n            return args.reduce((t, k, i) => {\n                return t || k;\n            });\n        }\n    NotSyntaxTemplate: &NotSyntaxTemplate !!js/function >\n        (arg) => {\n            return !arg;\n        }\n    UnarySyntaxTemplate: &UnarySyntaxTemplate !!js/function >\n        (op, arg) => {\n            switch(op) {\n                case \'+\':\n                    return +arg;\n                case \'-\':\n                    return -arg;\n                case \'~\':\n                    return ~arg;\n                default:\n                    throw new Error(`unrecognized operation: ${op}`);\n            }\n        }\n    BinarySyntaxTemplate: &BinarySyntaxTemplate !!js/function >\n        (args) => {\n            return args.reduce((s, op, i, arr) => {\n                if (i % 2 === 0) {\n                    return s;\n                }\n                const rhs = arr[i + 1];\n                switch(op) {\n                    case \'+\':\n                        return s + rhs;\n                    case \'-\':\n                        return s - rhs;\n                    case \'*\':\n                        return s * rhs;\n                    case \'/\':\n                        return s / rhs;\n                    case \'**\':\n                        return Math.pow(s, rhs);\n                    case \'//\':\n                        return Math.floor(s, rhs);\n                    case \'%\':\n                        return s % rhs;\n                    case \'>>\':\n                        return s >> rhs;\n                    case \'<<\':\n                        return s << rhs;\n                    case \'|\':\n                        return s | rhs;\n                    case \'&\':\n                        return s & rhs;\n                    case \'^\':\n                        return s ^ rhs;\n                    default:\n                        throw new Error(`unrecognized operation: ${op}`);\n                }\n            }, args[0]);\n        }\n    ParensSyntaxTemplate: &ParensSyntaxTemplate !!js/function >\n        (arg) => {\n            return arg;\n        }\n    EosSyntaxTemplate: &EosSyntaxTemplate !!js/function >\n        () => {\n            return \'a unique thing\';\n        }\n    EofSyntaxTemplate: &EofSyntaxTemplate !!js/function >\n        () => {\n            return \'a unique thing\';\n        }\n    FloorDivTemplate: &FloorDivSyntaxTemplate null # Args: lhs, rhs\n    PowerTemplate: &PowerSyntaxTemplate null # Args: lhs, rhs\n    NewTemplate: &NewSyntaxTemplate null # Args: expression, skip?, code# [to check if meant to be skipped]\n\n    #############################################\n    #               Literal Types               #\n    #                                           #\n    # Templates for literal type instance. Most #\n    # get passed the literal itself as an arg.  #\n    #                                           #\n    #############################################\n    StringTypeTemplate: &StringTypeTemplate !!js/function >\n        (str) => {\n            let newStr = str.toString();\n            if (\n                (newStr.charAt(0) === \'"\' && newStr.charAt(newStr.length - 1) === \'"\') ||\n                (newStr.charAt(0) === \'\\\'\' && newStr.charAt(newStr.length - 1) === \'\\\'\')\n            ) {\n                newStr = newStr.substr(1, newStr.length - 2);\n            }\n            return newStr;\n        }\n    RegexTypeTemplate: &RegexTypeTemplate !!js/function >\n        (pattern, flags) => {\n            return new RegExp(pattern, flags);\n        }\n    BoolTypeTemplate: &BoolTypeTemplate !!js/function >\n        (str) => {\n            return str.toLowerCase() === \'true\';\n        }\n    IntegerTypeTemplate: &IntegerTypeTemplate !!js/function >\n        (arg) => {\n            return parseInt(arg, 10);\n        }\n    DecimalTypeTemplate: &DecimalTypeTemplate !!js/function >\n        (arg) => {\n            return parseFloat(arg);\n        }\n    LongBasicTypeTemplate: &LongBasicTypeTemplate !!js/function >\n        (arg) => {\n            return parseInt(arg, 10);\n        }\n    HexTypeTemplate: &HexTypeTemplate !!js/function >\n        (arg) => {\n            return parseInt(arg, 16);\n        }\n    OctalTypeTemplate: &OctalTypeTemplate !!js/function >\n        (arg) => {\n            arg = arg.replace(/[oO]/g, \'\')\n            return parseInt(arg, 8);\n        }\n    NumericTypeTemplate: &NumericTypeTemplate !!js/function >\n        (arg) => {\n            if (arg.contains(\'x\')) {\n                return parseInt(arg, 16);\n            }\n            if (arg.contains(\'o\') || arg.startsWith(\'0\')) {\n                arg = arg.replace(/o/g, \'\')\n                return parseInt(arg, 8);\n            }\n            return parseFloat(arg);\n        }\n    ArrayTypeTemplate: &ArrayTypeTemplate null\n    ArrayTypeArgsTemplate: &ArrayTypeArgsTemplate null # Args: single array element, nestedness, lastElement? (note: not being used atm)\n    NullTypeTemplate: &NullTypeTemplate !!js/function >\n        () => {\n            return null;\n        }\n    UndefinedTypeTemplate: &UndefinedTypeTemplate !!js/function >\n        () => {\n            return undefined;\n        }\n    ObjectTypeTemplate: &ObjectTypeTemplate null # Args: literal (for empty array, is empty string. Otherwise all set)\n    ObjectTypeArgsTemplate: &ObjectTypeArgsTemplate null # Args: single object element [2] (i.e. array with [key, value]), nestedness#\n\n    #############################################\n    #               Symbols                     #\n    #                                           #\n    # Templates for symbols, can be either      #\n    # functions or variables.                   #\n    #                                           #\n    # The *SymbolTemplates return names and     #\n    # usually don\'t take any arguments. The     #\n    # *SymbolArgsTemplates are invoked for func #\n    # calls. The first argument is always the   #\n    # lhs, i.e. the symbol returned from the    #\n    # corresponding SymbolTemplate. The rest of #\n    # the arguments are the processed arguments #\n    # passed to the original function.          #\n    #                                           #\n    #############################################\n    CodeSymbolTemplate: &CodeSymbolTemplate null # No args\n    CodeSymbolArgsTemplate: &CodeSymbolArgsTemplate null # Args: code, scope\n    ObjectIdSymbolTemplate: &ObjectIdSymbolTemplate null # No args\n    ObjectIdSymbolArgsTemplate: &ObjectIdSymbolArgsTemplate null # Args: lhs, string (can be empty or null for no arg)\n    BinarySymbolTemplate: &BinarySymbolTemplate null\n    BinarySymbolArgsTemplate: &BinarySymbolArgsTemplate null\n    BinarySymbolSubtypeDefaultTemplate: &BinarySymbolSubtypeDefaultTemplate null\n    BinarySymbolSubtypeFunctionTemplate: &BinarySymbolSubtypeFunctionTemplate null\n    BinarySymbolSubtypeByteArrayTemplate: &BinarySymbolSubtypeByteArrayTemplate null\n    BinarySymbolSubtypeUuidOldTemplate: &BinarySymbolSubtypeUuidOldTemplate null\n    BinarySymbolSubtypeUuidTemplate: &BinarySymbolSubtypeUuidTemplate null\n    BinarySymbolSubtypeMd5Template: &BinarySymbolSubtypeMd5Template null\n    BinarySymbolSubtypeUserDefinedTemplate: &BinarySymbolSubtypeUserDefinedTemplate null\n    DBRefSymbolTemplate: &DBRefSymbolTemplate null # No args\n    DBRefSymbolArgsTemplate: &DBRefSymbolArgsTemplate null # Args: lhs, coll, id, db\n    DoubleSymbolTemplate: &DoubleSymbolTemplate null # No args\n    DoubleSymbolArgsTemplate: &DoubleSymbolArgsTemplate null # Args: lhs, arg, argType (i.e. \'_string\', \'_double\')\n    Int32SymbolTemplate: &Int32SymbolTemplate null # No args\n    Int32SymbolArgsTemplate: &Int32SymbolArgsTemplate null # Args: lhs, arg, argType\n    LongSymbolTemplate: &LongSymbolTemplate null # No args\n    LongSymbolArgsTemplate: &LongSymbolArgsTemplate !!js/function > # Args: lhs, arg, argType\n        (lhs, arg) => {\n            return lhs.fromNumber(arg);\n        }\n    RegExpSymbolTemplate: &RegExpSymbolTemplate null # No args\n    RegExpSymbolArgsTemplate: &RegExpSymbolArgsTemplate null # Args: lhs, pattern, flags\n    SymbolSymbolTemplate: &SymbolSymbolTemplate null # No args\n    SymbolSymbolArgsTemplate: &SymbolSymbolArgsTemplate null # Args: lhs, arg\n    BSONRegExpSymbolTemplate: &BSONRegExpSymbolTemplate null # No args\n    BSONRegExpSymbolArgsTemplate: &BSONRegExpSymbolArgsTemplate null # Args: lhs, pattern, flags\n    Decimal128SymbolTemplate: &Decimal128SymbolTemplate null # No args\n    Decimal128SymbolArgsTemplate: &Decimal128SymbolArgsTemplate null # Args: lhs, arg\n    MinKeySymbolTemplate: &MinKeySymbolTemplate null # No args\n    MinKeySymbolArgsTemplate: &MinKeySymbolArgsTemplate null # No args\n    MaxKeySymbolTemplate: &MaxKeySymbolTemplate null # No args\n    MaxKeySymbolArgsTemplate: &MaxKeySymbolArgsTemplate null # No args\n    TimestampSymbolTemplate: &TimestampSymbolTemplate null # No args\n    TimestampSymbolArgsTemplate: &TimestampSymbolArgsTemplate null # Args: lhs, low, high\n    # non bson-specific\n    NumberSymbolTemplate: &NumberSymbolTemplate !!js/function >\n        () => {\n            return Number;\n        }\n    NumberSymbolArgsTemplate: &NumberSymbolArgsTemplate null # Args: lhs, arg, argType\n    DateSymbolTemplate: &DateSymbolTemplate null # No args\n    DateSymbolArgsTemplate: &DateSymbolArgsTemplate !!js/function >\n        (lhs, date, isString) => {\n            if (isString) {\n                return date.toString();\n            }\n            return date;\n        }\n\n    #############################################\n    #         Object Attributes/Methods         #\n    #                                           #\n    # These\'re variables or functions called on #\n    # instantiated objects. For example,        #\n    # ObjectId().isValid() or Timestamp().t     #\n    #                                           #\n    # They follow the same pattern with the\n    # *Template/*ArgsTemplates: usually no args #\n    # to the Template and lhs plus any original #\n    # arguments to the ArgsTemplate.            #\n    #                                           #\n    #############################################\n    CodeCodeTemplate: &CodeCodeTemplate null\n    CodeCodeArgsTemplate: &CodeCodeArgsTemplate null\n    CodeScopeTemplate: &CodeScopeTemplate null\n    CodeScopeArgsTemplate: &CodeScopeArgsTemplate null\n    ObjectIdToStringTemplate: &ObjectIdToStringTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs.toString();\n        }\n    ObjectIdToStringArgsTemplate: &ObjectIdToStringArgsTemplate !!js/function >\n        (lhs) => {\n            return lhs;\n        }\n    ObjectIdEqualsTemplate: &ObjectIdEqualsTemplate !!js/function >\n        (lhs) => {\n            return lhs;\n        }\n    ObjectIdEqualsArgsTemplate: &ObjectIdEqualsArgsTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs.equals(rhs);\n        }\n    ObjectIdGetTimestampTemplate: &ObjectIdGetTimestampTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs.getTimestamp();\n        }\n    ObjectIdGetTimestampArgsTemplate: &ObjectIdGetTimestampArgsTemplate !!js/function >\n        (lhs) => {\n            return lhs;\n        }\n    ObjectIdIsValidTemplate: &ObjectIdIsValidTemplate !!js/function >\n        (lhs, rhs) => {\n            return  lhs.isValid;\n        }\n    ObjectIdIsValidArgsTemplate: &ObjectIdIsValidArgsTemplate null\n    BinaryValueTemplate: &BinaryValueTemplate null\n    BinaryValueArgsTemplate: &BinaryValueArgsTemplate null\n    BinaryLengthTemplate: &BinaryLengthTemplate null\n    BinaryLengthArgsTemplate: &BinaryLengthArgsTemplate null\n    BinaryToStringTemplate: &BinaryToStringTemplate null\n    BinaryToStringArgsTemplate: &BinaryToStringArgsTemplate null\n    BinarySubtypeTemplate: &BinarySubtypeTemplate null\n    BinarySubtypeArgsTemplate: &BinarySubtypeArgsTemplate null\n    DBRefGetDBTemplate: &DBRefGetDBTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs.db;\n        }\n    DBRefGetCollectionTemplate: &DBRefGetCollectionTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs.collection;\n        }\n    DBRefGetIdTemplate: &DBRefGetIdTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs.oid;\n        }\n    DBRefGetDBArgsTemplate: &DBRefGetDBArgsTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs;\n        }\n    DBRefGetCollectionArgsTemplate: &DBRefGetCollectionArgsTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs;\n        }\n    DBRefGetIdArgsTemplate: &DBRefGetIdArgsTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs;\n        }\n    LongEqualsTemplate: &LongEqualsTemplate null\n    LongEqualsArgsTemplate: &LongEqualsArgsTemplate null\n    LongToStringTemplate: &LongToStringTemplate null\n    LongToStringArgsTemplate: &LongToStringArgsTemplate null\n    LongToIntTemplate: &LongToIntTemplate null\n    LongToIntArgsTemplate: &LongToIntArgsTemplate null\n    LongValueOfTemplate: &LongValueOfTemplate null\n    LongValueOfArgsTemplate: &LongValueOfArgsTemplate null\n    LongToNumberTemplate: &LongToNumberTemplate null\n    LongToNumberArgsTemplate: &LongToNumberArgsTemplate null\n    LongAddTemplate: &LongAddTemplate null\n    LongAddArgsTemplate: &LongAddArgsTemplate null\n    LongSubtractTemplate: &LongSubtractTemplate null\n    LongSubtractArgsTemplate: &LongSubtractArgsTemplate null\n    LongMultiplyTemplate: &LongMultiplyTemplate null\n    LongMultiplyArgsTemplate: &LongMultiplyArgsTemplate null\n    LongDivTemplate: &LongDivTemplate null\n    LongDivArgsTemplate: &LongDivArgsTemplate null\n    LongModuloTemplate: &LongModuloTemplate null\n    LongModuloArgsTemplate: &LongModuloArgsTemplate null\n    LongAndTemplate: &LongAndTemplate null\n    LongAndArgsTemplate: &LongAndArgsTemplate null\n    LongOrTemplate: &LongOrTemplate null\n    LongOrArgsTemplate: &LongOrArgsTemplate null\n    LongXorTemplate: &LongXorTemplate null\n    LongXorArgsTemplate: &LongXorArgsTemplate null\n    LongShiftLeftTemplate: &LongShiftLeftTemplate null\n    LongShiftLeftArgsTemplate: &LongShiftLeftArgsTemplate null\n    LongShiftRightTemplate: &LongShiftRightTemplate null\n    LongShiftRightArgsTemplate: &LongShiftRightArgsTemplate null\n    LongCompareTemplate: &LongCompareTemplate null\n    LongCompareArgsTemplate: &LongCompareArgsTemplate null\n    LongIsOddTemplate: &LongIsOddTemplate null\n    LongIsOddArgsTemplate: &LongIsOddArgsTemplate null\n    LongIsZeroTemplate: &LongIsZeroTemplate null\n    LongIsZeroArgsTemplate: &LongIsZeroArgsTemplate null\n    LongIsNegativeTemplate: &LongIsNegativeTemplate null\n    LongIsNegativeArgsTemplate: &LongIsNegativeArgsTemplate null\n    LongNegateTemplate: &LongNegateTemplate null\n    LongNegateArgsTemplate: &LongNegateArgsTemplate null\n    LongNotTemplate: &LongNotTemplate null\n    LongNotArgsTemplate: &LongNotArgsTemplate null\n    LongNotEqualsTemplate: &LongNotEqualsTemplate null\n    LongNotEqualsArgsTemplate: &LongNotEqualsArgsTemplate null\n    LongGreaterThanTemplate: &LongGreaterThanTemplate null\n    LongGreaterThanArgsTemplate: &LongGreaterThanArgsTemplate null\n    LongGreaterThanOrEqualTemplate: &LongGreaterThanOrEqualTemplate null\n    LongGreaterThanOrEqualArgsTemplate: &LongGreaterThanOrEqualArgsTemplate null\n    LongLessThanTemplate: &LongLessThanTemplate null\n    LongLessThanArgsTemplate: &LongLessThanArgsTemplate null\n    LongLessThanOrEqualTemplate: &LongLessThanOrEqualTemplate null\n    LongLessThanOrEqualArgsTemplate: &LongLessThanOrEqualArgsTemplate null\n    LongFloatApproxTemplate: &LongFloatApproxTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs.toNumber();\n        }\n    LongTopTemplate: &LongTopTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs.high;\n        }\n    LongBottomTemplate: &LongBottomTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs.low;\n        }\n    TimestampToStringTemplate: &TimestampToStringTemplate null\n    TimestampToStringArgsTemplate: &TimestampToStringArgsTemplate null\n    TimestampEqualsTemplate: &TimestampEqualsTemplate null\n    TimestampEqualsArgsTemplate: &TimestampEqualsArgsTemplate null\n    TimestampGetLowBitsTemplate: &TimestampGetLowBitsTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs.getLowBits();\n        }\n    TimestampGetLowBitsArgsTemplate: &TimestampGetLowBitsArgsTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs;\n        }\n    TimestampGetHighBitsTemplate: &TimestampGetHighBitsTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs.getHighBits();\n        }\n    TimestampGetHighBitsArgsTemplate: &TimestampGetHighBitsArgsTemplate  !!js/function >\n        (lhs, rhs) => {\n            return lhs;\n        }\n    TimestampTTemplate: &TimestampTTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs.getLowBits();\n        }\n    TimestampITemplate: &TimestampITemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs.getHighBits();\n        }\n    TimestampAsDateTemplate: &TimestampAsDateTemplate !!js/function >\n        (lhs, rhs) => {\n            return new Date(lhs.getHighBits() * 1000);\n        }\n    TimestampAsDateArgsTemplate: &TimestampAsDateArgsTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs;\n        }\n    TimestampCompareTemplate: &TimestampCompareTemplate null\n    TimestampCompareArgsTemplate: &TimestampCompareArgsTemplate null\n    TimestampNotEqualsTemplate: &TimestampNotEqualsTemplate null\n    TimestampNotEqualsArgsTemplate: &TimestampNotEqualsArgsTemplate null\n    TimestampGreaterThanTemplate: &TimestampGreaterThanTemplate null\n    TimestampGreaterThanArgsTemplate: &TimestampGreaterThanArgsTemplate null\n    TimestampGreaterThanOrEqualTemplate: &TimestampGreaterThanOrEqualTemplate null\n    TimestampGreaterThanOrEqualArgsTemplate: &TimestampGreaterThanOrEqualArgsTemplate null\n    TimestampLessThanTemplate: &TimestampLessThanTemplate null\n    TimestampLessThanArgsTemplate: &TimestampLessThanArgsTemplate null\n    TimestampLessThanOrEqualTemplate: &TimestampLessThanOrEqualTemplate null\n    TimestampLessThanOrEqualArgsTemplate: &TimestampLessThanOrEqualArgsTemplate null\n    SymbolValueOfTemplate: &SymbolValueOfTemplate null\n    SymbolValueOfArgsTemplate: &SymbolValueOfArgsTemplate null\n    SymbolInspectTemplate: &SymbolInspectTemplate null\n    SymbolInspectArgsTemplate: &SymbolInspectArgsTemplate null\n    SymbolToStringTemplate: &SymbolToStringTemplate null\n    SymbolToStringArgsTemplate: &SymbolToStringArgsTemplate null\n    Decimal128ToStringTemplate: &Decimal128ToStringTemplate null\n    Decimal128ToStringArgsTemplate: &Decimal128ToStringArgsTemplate null\n    # non bson-specific\n    DateSymbolNowTemplate: &DateSymbolNowTemplate !!js/function >\n        () => {\n            return Date.now;\n        }\n    DateSymbolNowArgsTemplate: &DateSymbolNowArgsTemplate null\n\n    #############################################\n    #         Symbol Attributes/Methods         #\n    #                                           #\n    # These\'re variables or functions called on #\n    # symbols. Also called bson-utils.          #\n    #                                           #\n    # They are basically the same thing as      #\n    # object attributes/methods, but need to be #\n    # distinguished since they are separate     #\n    # namespaces that happen to have the same   #\n    # name which is v confusing.                #\n    #                                           #\n    # For example, ObjectId().toString() is an  #\n    # object method, while ObjectId.fromString  #\n    # is a symbol attribute. These are two      #\n    # separate ObjectId related namespaces that #\n    # don\'t overlap.                            #\n    #                                           #\n    #############################################\n    LongSymbolMaxTemplate: &LongSymbolMaxTemplate null\n    LongSymbolMaxArgsTemplate: &LongSymbolMaxArgsTemplate null\n    LongSymbolMinTemplate: &LongSymbolMinTemplate null\n    LongSymbolMinArgsTemplate: &LongSymbolMinArgsTemplate null\n    LongSymbolZeroTemplate: &LongSymbolZeroTemplate null\n    LongSymbolZeroArgsTemplate: &LongSymbolZeroArgsTemplate null\n    LongSymbolOneTemplate: &LongSymbolOneTemplate null\n    LongSymbolOneArgsTemplate: &LongSymbolOneArgsTemplate null\n    LongSymbolNegOneTemplate: &LongSymbolNegOneTemplate null\n    LongSymbolNegOneArgsTemplate: &LongSymbolNegOneArgsTemplate null\n    LongSymbolFromBitsTemplate: &LongSymbolFromBitsTemplate null\n    LongSymbolFromBitsArgsTemplate: &LongSymbolFromBitsArgsTemplate null\n    LongSymbolFromIntTemplate: &LongSymbolFromIntTemplate null\n    LongSymbolFromIntArgsTemplate: &LongSymbolFromIntArgsTemplate null\n    LongSymbolFromNumberTemplate: &LongSymbolFromNumberTemplate null\n    LongSymbolFromNumberArgsTemplate: &LongSymbolFromNumberArgsTemplate null\n    LongSymbolFromStringTemplate: &LongSymbolFromStringTemplate null\n    LongSymbolFromStringArgsTemplate: &LongSymbolFromStringArgsTemplate null\n    Decimal128SymbolFromStringTemplate: &Decimal128SymbolFromStringTemplate null\n    Decimal128SymbolFromStringArgsTemplate: &Decimal128SymbolFromStringArgsTemplate null\n    ObjectIdCreateFromHexStringTemplate: &ObjectIdCreateFromHexStringTemplate null\n    ObjectIdCreateFromHexStringArgsTemplate: &ObjectIdCreateFromHexStringArgsTemplate null\n    ObjectIdCreateFromTimeTemplate: &ObjectIdCreateFromTimeTemplate !!js/function >\n        (lhs, rhs) => {\n            return lhs.createFromTime;\n        }\n    ObjectIdCreateFromTimeArgsTemplate: &ObjectIdCreateFromTimeArgsTemplate null\n    # non bson-specific would go here, but there aren\'t any atm.\n\n    #############################################\n    #                 Imports                   #\n    #                                           #\n    # Each type has a \'code\' that is consistent #\n    # between languages. The import templates   #\n    # for each code generate the required       #\n    # statement for each type. No args.         #\n    #                                           #\n    # The ImportTemplate collects everything    #\n    # into one statement.                       #\n    #                                           #\n    #############################################\n    ImportTemplate: &ImportTemplate null\n    DriverImportTemplate: &DriverImportTemplate null\n    0ImportTemplate: &0ImportTemplate null\n    1ImportTemplate: &1ImportTemplate null\n    2ImportTemplate: &2ImportTemplate null\n    3ImportTemplate: &3ImportTemplate null\n    4ImportTemplate: &4ImportTemplate null\n    5ImportTemplate: &5ImportTemplate null\n    6ImportTemplate: &6ImportTemplate null\n    7ImportTemplate: &7ImportTemplate null\n    8ImportTemplate: &8ImportTemplate null\n    9ImportTemplate: &9ImportTemplate null\n    10ImportTemplate: &10ImportTemplate null\n    11ImportTemplate: &11ImportTemplate null\n    12ImportTemplate: &12ImportTemplate null\n    100ImportTemplate: &100ImportTemplate null\n    101ImportTemplate: &101ImportTemplate null\n    102ImportTemplate: &102ImportTemplate null\n    103ImportTemplate: &103ImportTemplate null\n    104ImportTemplate: &104ImportTemplate null\n    105ImportTemplate: &105ImportTemplate null\n    106ImportTemplate: &106ImportTemplate null\n    107ImportTemplate: &107ImportTemplate null\n    108ImportTemplate: &108ImportTemplate null\n    109ImportTemplate: &109ImportTemplate null\n    110ImportTemplate: &110ImportTemplate null\n    111ImportTemplate: &111ImportTemplate null\n    112ImportTemplate: &112ImportTemplate null\n    113ImportTemplate: &113ImportTemplate null\n    114ImportTemplate: &114ImportTemplate null\n    200ImportTemplate: &200ImportTemplate null\n    201ImportTemplate: &201ImportTemplate null\n    300ImportTemplate: &300ImportTemplate null\n    301ImportTemplate: &301ImportTemplate null\n    302ImportTemplate: &302ImportTemplate null\n    303ImportTemplate: &303ImportTemplate null\n    304ImportTemplate: &304ImportTemplate null\n    305ImportTemplate: &305ImportTemplate null\n    306ImportTemplate: &306ImportTemplate null\n# Universal types\n# Everything inherits from StringType because we haven\'t implemented any of them.\nBasicTypes:\n    # Universal basic types\n    _bool: &BoolType\n        <<: *__type\n        id: "_bool"\n        code: 0\n        template: *BoolTypeTemplate\n    _integer: &IntegerType\n        <<: *__type\n        id: "_integer"\n        code: 1\n        template: *IntegerTypeTemplate\n    _long: &LongBasicType\n        <<: *__type\n        id: "_long"\n        code: 2\n        template: *LongBasicTypeTemplate\n    _decimal: &DecimalType\n        <<: *__type\n        id: "_decimal"\n        code: 3\n        template: *DecimalTypeTemplate\n    _hex: &HexType\n        <<: *__type\n        id: "_hex"\n        code: 4\n        template: *HexTypeTemplate\n    _octal: &OctalType\n        <<: *__type\n        id: "_octal"\n        code: 5\n        template: *OctalTypeTemplate\n    _numeric: &NumericType\n        <<: *__type\n        id: "_numeric"\n        code: 6\n        template: *NumericTypeTemplate\n    _string: &StringType\n        <<: *__type\n        id: "_string"\n        code: 7\n        template: *StringTypeTemplate\n    _regex: &RegexType\n        <<: *__type\n        id: "_regex"\n        code: 8\n        template: *RegexTypeTemplate\n    _array: &ArrayType\n        <<: *__type\n        id: "_array"\n        code: 9\n        template: *ArrayTypeTemplate\n        argsTemplate: *ArrayTypeArgsTemplate\n    _object: &ObjectType\n        <<: *__type\n        id: "_object"\n        code: 10\n        template: *ObjectTypeTemplate\n        argsTemplate: *ObjectTypeArgsTemplate\n    _null: &NullType\n        <<: *__type\n        id: "_null"\n        code: 11\n        template: *NullTypeTemplate\n    _undefined: &UndefinedType\n        <<: *__type\n        id: "_undefined"\n        code: 12\n        template: *UndefinedTypeTemplate\n\nSyntax:\n    equality:\n        template: *EqualitySyntaxTemplate\n    in:\n        template: *InSyntaxTemplate\n    and:\n        template: *AndSyntaxTemplate\n    or:\n        template: *OrSyntaxTemplate\n    not:\n        template: *NotSyntaxTemplate\n    unary:\n        template: *UnarySyntaxTemplate\n    binary:\n        template: *BinarySyntaxTemplate\n    parens:\n        template: *ParensSyntaxTemplate\n    eos:\n        template: *EosSyntaxTemplate\n    eof:\n        template: *EofSyntaxTemplate\n    # The new template takes in expr, and an optional skip argument and optional\n    # id argument. The skip argument is a boolean that if true then doesn\'t add\n    # new. The code argument is the symbol code being called. The template will check\n    # if it is an exception, i.e. a type that is a constructor but may not use new.\n    new:\n        template: *NewSyntaxTemplate\n    # The regex flags that change symbols between languages can be defined here.\n    # Flags that aren\'t defined can be left blank and will be ignored.\n    regexFlags: *RegexFlags\n    bsonRegexFlags: *BSONRegexFlags\n    driver: *DriverTemplate\nImports:\n    import:\n        template: *ImportTemplate\n    driver:\n        template: *DriverImportTemplate\n    0:\n        template: *0ImportTemplate\n    1:\n        template: *1ImportTemplate\n    2:\n        template: *2ImportTemplate\n    3:\n        template: *3ImportTemplate\n    4:\n        template: *4ImportTemplate\n    5:\n        template: *5ImportTemplate\n    6:\n        template: *6ImportTemplate\n    7:\n        template: *7ImportTemplate\n    8:\n        template: *8ImportTemplate\n    9:\n        template: *9ImportTemplate\n    10:\n        template: *10ImportTemplate\n    11:\n        template: *11ImportTemplate\n    12:\n        template: *12ImportTemplate\n    100:\n        template: *100ImportTemplate\n    101:\n        template: *101ImportTemplate\n    102:\n        template: *102ImportTemplate\n    103:\n        template: *103ImportTemplate\n    104:\n        template: *104ImportTemplate\n    105:\n        template: *105ImportTemplate\n    106:\n        template: *106ImportTemplate\n    107:\n        template: *107ImportTemplate\n    108:\n        template: *108ImportTemplate\n    109:\n        template: *109ImportTemplate\n    110:\n        template: *110ImportTemplate\n    111:\n        template: *111ImportTemplate\n    112:\n        template: *112ImportTemplate\n    113:\n        template: *113ImportTemplate\n    114:\n        template: *114ImportTemplate\n    200:\n        template: *200ImportTemplate\n    201:\n        template: *201ImportTemplate\n    300:\n        template: *300ImportTemplate\n    301:\n        template: *301ImportTemplate\n    302:\n        template: *302ImportTemplate\n    303:\n        template: *303ImportTemplate\n    304:\n        template: *304ImportTemplate\n    305:\n        template: *305ImportTemplate\n    306:\n        template: *306ImportTemplate\nBsonTypes:\n    Code: &CodeType\n        <<: *__type\n        id: "Code"\n        code: 100\n        type: *ObjectType\n        attr:\n            code:\n                callable: *var\n                args: null\n                attr: null\n                id: "code"\n                type: *StringType\n                template: *CodeCodeTemplate\n                argsTemplate: *CodeCodeArgsTemplate\n            scope:\n                callable: *var\n                args: null\n                attr: null\n                id: "scope"\n                type: *StringType\n                template: *CodeScopeTemplate\n                argsTemplate: *CodeScopeArgsTemplate\n    ObjectId: &ObjectIdType\n        <<: *__type\n        id: "ObjectId"\n        code: 101\n        type: *ObjectType\n        attr:\n            toString:\n                <<: *__func\n                id: "toString"\n                type: *StringType\n                template: *ObjectIdToStringTemplate\n                argsTemplate: *ObjectIdToStringArgsTemplate\n            equals:\n                <<: *__func\n                id: "equals"\n                args:\n                    - [ "ObjectId" ]\n                type: *BoolType\n                template: *ObjectIdEqualsTemplate\n                argsTemplate: *ObjectIdEqualsArgsTemplate\n            getTimestamp:\n                <<: *__func\n                id: "getTimestamp"\n                type: *IntegerType\n                template: *ObjectIdGetTimestampTemplate\n                argsTemplate: *ObjectIdGetTimestampArgsTemplate\n    BinData: &BinaryType\n        <<: *__type\n        id: "BinData"\n        code: 102\n        type: *ObjectType\n        attr:\n            toString:\n                <<: *__func\n                id: "toString"\n                type: *StringType\n                template: *BinaryToStringTemplate\n                argsTemplate: *BinaryToStringArgsTemplate\n            base64:\n                <<: *__func\n                id: "base64"\n                type: *StringType\n                template: *BinaryValueTemplate\n                argsTemplate: *BinaryValueArgsTemplate\n            length:\n                <<: *__func\n                id: "length"\n                type: *IntegerType\n                template: *BinaryLengthTemplate\n                argsTemplate: *BinaryLengthArgsTemplate\n            subtype:\n                <<: *__func\n                id: "subtype"\n                type: *IntegerType\n                template: *BinarySubtypeTemplate\n                argsTemplate: *BinarySubtypeArgsTemplate\n    DBRef: &DBRefType\n        <<: *__type\n        id: "DBRef"\n        code: 103\n        type: *ObjectType\n        attr:\n            getDb:\n                <<: *__func\n                id: "getDb"\n                type: *StringType\n                template: *DBRefGetDBTemplate\n                argsTemplate: *DBRefGetDBArgsTemplate\n            $db:\n                callable: *var\n                args: null\n                attr: null\n                id: "$db"\n                type: *StringType\n                template: *DBRefGetDBTemplate\n                argsTemplate: *DBRefGetDBArgsTemplate\n            getCollection:\n                <<: *__func\n                id: "getCollection"\n                type: *StringType\n                template: *DBRefGetCollectionTemplate\n                argsTemplate: *DBRefGetCollectionArgsTemplate\n            getRef:\n                <<: *__func\n                id: "getRef"\n                type: *StringType\n                template: *DBRefGetCollectionTemplate\n                argsTemplate: *DBRefGetCollectionArgsTemplate\n            $ref:\n                callable: *var\n                args: null\n                attr: null\n                id: "$ref"\n                type: *StringType\n                template: *DBRefGetCollectionTemplate\n                argsTemplate: *DBRefGetCollectionArgsTemplate\n            getId:\n                <<: *__func\n                id: "getId"\n                type: *StringType\n                template: *DBRefGetIdTemplate\n                argsTemplate: *DBRefGetIdArgsTemplate\n            $id:\n                callable: *var\n                args: null\n                attr: null\n                id: "$id"\n                type: *StringType\n                template: *DBRefGetIdTemplate\n                argsTemplate: *DBRefGetIdArgsTemplate\n    NumberInt: &Int32Type\n        <<: *__type\n        id: "NumberInt"\n        code: 105\n        type: *ObjectType\n        attr: {}\n    NumberLong: &LongType\n        <<: *__type\n        id: "NumberLong"\n        code: 106\n        type: *ObjectType\n        attr:\n            toString:\n                <<: *__func\n                id: "LongtoString" # Needs process method\n                type: *StringType\n            top:\n                callable: *var\n                args: null\n                attr: null\n                id: "top"\n                type: *IntegerType\n                template: *LongTopTemplate\n                argsTemplate: null\n            bottom:\n                callable: *var\n                args: null\n                attr: null\n                id: "bottom"\n                type: *IntegerType\n                template: *LongBottomTemplate\n                argsTemplate: null\n            floatApprox:\n                callable: *var\n                args: null\n                attr: null\n                id: "floatApprox"\n                type: *IntegerType\n                template: *LongFloatApproxTemplate\n                argsTemplate: null\n    MinKeyType: &MinKeyType\n        <<: *__type\n        id: "MinKey"\n        code: 107\n        type: *ObjectType\n    MaxKeyType: &MaxKeyType\n        <<: *__type\n        id: "MaxKey"\n        code: 108\n        type: *ObjectType\n    Timestamp: &TimestampType\n        <<: *__type\n        id: "TimestampFromShell"\n        code: 110\n        type: *ObjectType\n        attr:\n            toString:\n                <<: *__func\n                id: "toString"\n                type: *StringType\n                template: *TimestampToStringTemplate\n                argsTemplate: *TimestampToStringArgsTemplate\n            getTime:\n                <<: *__func\n                id: "getTime"\n                type: *IntegerType\n                template: *TimestampGetLowBitsTemplate\n                argsTemplate: *TimestampGetLowBitsArgsTemplate\n            getInc:\n                <<: *__func\n                id: "getInc"\n                type: *IntegerType\n                template: *TimestampGetHighBitsTemplate\n                argsTemplate: *TimestampGetHighBitsArgsTemplate\n            t:\n                callable: *var\n                args: null\n                attr: null\n                id: "getTime"\n                type: *IntegerType\n                template: *TimestampTTemplate\n                argsTemplate: null\n            i:\n                callable: *var\n                args: null\n                attr: null\n                id: "getInc"\n                type: *IntegerType\n                template: *TimestampITemplate\n                argsTemplate: null\n    Symbol: &SymbolType\n        <<: *__type\n        id: "Symbol"\n        code: 111\n        type: *ObjectType\n    NumberDecimal: &Decimal128Type\n        <<: *__type\n        id: "NumberDecimal"\n        code: 112\n        type: *ObjectType\n        attr: {}\n    SUBTYPE_DEFAULT:\n        id: "SUBTYPE_DEFAULT"\n        callable: *var\n        args: null\n        code: 113\n        type: *IntegerType\n        template: *BinarySymbolSubtypeDefaultTemplate\n    SUBTYPE_FUNCTION:\n        id: "SUBTYPE_FUNCTION"\n        callable: *var\n        args: null\n        code: 113\n        type: *IntegerType\n        template: *BinarySymbolSubtypeFunctionTemplate\n    SUBTYPE_BYTE_ARRAY:\n        id: "SUBTYPE_BYTE_ARRAY"\n        callable: *var\n        args: null\n        code: 113\n        type: *IntegerType\n        template: *BinarySymbolSubtypeByteArrayTemplate\n    SUBTYPE_UUID_OLD:\n        id: "SUBTYPE_UUID_OLD"\n        callable: *var\n        args: null\n        code: 113\n        type: *IntegerType\n        template: *BinarySymbolSubtypeUuidOldTemplate\n    SUBTYPE_UUID:\n        id: "SUBTYPE_UUID"\n        callable: *var\n        args: null\n        code: 113\n        type: *IntegerType\n        template: *BinarySymbolSubtypeUuidTemplate\n    SUBTYPE_MD5:\n        id: "SUBTYPE_MD5"\n        callable: *var\n        args: null\n        code: 113\n        type: *IntegerType\n        template: *BinarySymbolSubtypeMd5Template\n    SUBTYPE_USER_DEFINED:\n        id: "SUBTYPE_USER_DEFINED"\n        callable: *var\n        args: null\n        code: 113\n        type: *IntegerType\n        template: *BinarySymbolSubtypeUserDefinedTemplate\nNativeTypes:\n    Date: &DateType\n        <<: *__type\n        id: "Date"\n        code: 200\n        type: *ObjectType\n        attr: {} # TODO: no built-in date methods added yet\n    RegExp: &RegExpType\n        <<: *__type\n        id: "RegExp"\n        code: 8\n        type: *ObjectType\n        attr: {}\n\n\n\n\nBsonSymbols:\n    Code: &CodeSymbol\n        id: "Code"\n        code: 100\n        callable: *constructor\n        args:\n            - [ *StringType, null ]\n            - [ *ObjectType, null ]\n        type: *CodeType\n        attr: {}\n        template: *CodeSymbolTemplate\n        argsTemplate: *CodeSymbolArgsTemplate\n    ObjectId: &ObjectIdSymbol\n        id: "ObjectId"\n        code: 101\n        callable: *constructor\n        args:\n            - [ *StringType, null ]\n        type: *ObjectIdType\n        attr:\n            fromDate:\n                <<: *__func\n                id: "ObjectIdCreateFromTime"\n                args:\n                    - [ *DateType ]\n                type: *ObjectIdType\n                template: *ObjectIdCreateFromTimeTemplate\n                argsTemplate: *ObjectIdCreateFromTimeArgsTemplate\n        template: *ObjectIdSymbolTemplate\n        argsTemplate: *ObjectIdSymbolArgsTemplate\n    BinData: &BinarySymbol\n        id: "BinData"\n        code: 102\n        callable: *constructor\n        args:\n            - [ *IntegerType ]\n            - [ *StringType ]\n        type: *BinaryType\n        attr: {}\n        template: *BinarySymbolTemplate\n        argsTemplate: *BinarySymbolArgsTemplate\n    DBRef:\n        id: "DBRef"\n        code: 103\n        callable: *constructor\n        args:\n            - [ *StringType ]\n            - [ *ObjectIdType ]\n            - [ *StringType, null ]\n        type: *DBRefType\n        attr: {}\n        template: *DBRefSymbolTemplate\n        argsTemplate: *DBRefSymbolArgsTemplate\n    NumberInt:\n        id: "Int32"\n        code: 105\n        callable: *constructor\n        args:\n            - [ *NumericType, *StringType, null ]\n        type: *Int32Type\n        attr: {}\n        template: *Int32SymbolTemplate\n        argsTemplate: *Int32SymbolArgsTemplate\n    NumberLong:\n        id: "NumberLong"\n        code: 106\n        callable: *constructor\n        args:\n            - [ *IntegerType, *StringType, null ]\n        type: *LongType\n        attr: {}\n        template: *LongSymbolTemplate\n        argsTemplate: *LongSymbolArgsTemplate\n    MinKey:\n        id: "MinKey"\n        code: 107\n        callable: *constructor\n        args: []\n        type: *MinKeyType\n        attr: {}\n        template: *MinKeySymbolTemplate\n        argsTemplate: *MinKeySymbolArgsTemplate\n    MaxKey:\n        id: "MaxKey"\n        code: 108\n        callable: *constructor\n        args: []\n        type: *MaxKeyType\n        attr: {}\n        template: *MaxKeySymbolTemplate\n        argsTemplate: *MaxKeySymbolArgsTemplate\n    Timestamp:\n        id: "Timestamp"\n        code: 110\n        callable: *constructor\n        args:\n            - [ *IntegerType, null ]\n            - [ *IntegerType, null ]\n        type: *TimestampType\n        attr: {}\n        template: *TimestampSymbolTemplate\n        argsTemplate: *TimestampSymbolArgsTemplate\n    Symbol:\n        id: "Symbol"\n        code: 111\n        callable: *constructor\n        args:\n            - [ *StringType ]\n        type: *SymbolType\n        attr: {}\n        template: *SymbolSymbolTemplate\n        argsTemplate: *SymbolSymbolArgsTemplate\n    NumberDecimal:\n        id: "NumberDecimal"\n        code: 112\n        callable: *constructor\n        args:\n            - [ *StringType, *NumericType, null ]\n        type: *Decimal128Type\n        attr: {}\n        template: *Decimal128SymbolTemplate\n        argsTemplate: *Decimal128SymbolArgsTemplate\n\nNativeSymbols:\n    Number:\n        id: "Number"\n        code: 2\n        callable: *constructor\n        args:\n            - [ *IntegerType, *StringType, null ]\n        type: *NumericType\n        attr: {} # TODO: no built-in number funcs added yet\n        template: *NumberSymbolTemplate\n        argsTemplate: *NumberSymbolArgsTemplate\n    Date: # Needs emit method\n        id: "Date"\n        code: 200\n        callable: *constructor\n        args:\n            - [ *StringType, *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n        type: *DateType\n        attr: # TODO: add more date funcs?\n            now:\n                id: "now"\n                code: 200.1\n                callable: *func\n                args: []\n                type: *DateType\n                attr: {}\n                template: *DateSymbolNowTemplate\n                argsTemplate: *DateSymbolNowArgsTemplate\n        template: *DateSymbolTemplate\n        argsTemplate: *DateSymbolArgsTemplate\n    ISODate: # Needs emit method\n        id: "ISODate"\n        code: 200\n        callable: *constructor\n        args:\n            - [ *StringType, null ]\n        type: *DateType\n        attr:\n            now:\n                id: "now"\n                callable: *constructor\n                args: []\n                type: *DateType\n                attr: {}\n                template: *DateSymbolNowTemplate\n                argsTemplate: *DateSymbolNowArgsTemplate\n        template: *DateSymbolTemplate\n        argsTemplate: *DateSymbolArgsTemplate\n    RegExp: # Needs process method\n        id: "RegExp"\n        code: 8\n        callable: *constructor\n        args:\n            - [ *StringType, *RegexType ]\n            - [ *StringType, null ]\n        type: *RegExpType\n        attr: {} # TODO: no built-in regex funcs added yet\n        template: *RegExpSymbolTemplate\n        argsTemplate: *RegExpSymbolArgsTemplate\n\n'},97164:e=>{e.exports="SymbolTypes:\n    VAR: &var 0\n    CONSTRUCTOR: &constructor 1\n    FUNC: &func 2\n# Internal patterns to save typing\n__type: &__type\n    id: null\n    callable: *var\n    args: null\n    type: null\n    attr: {}\n    template: null\n    argsTemplate: null\n__func: &__func\n    callable: *func\n    args: []\n    attr: {}\n    template: null\n    argsTemplate: null\n\n# Python Templates\nTemplates:\n    # Misc\n    RegexFlags: &RegexFlags\n        i: 'i'\n        m: 'm'\n        u: 'a'\n        y: ''\n        g: 's'\n    BSONRegexFlags: &BSONRegexFlags\n        i: 'i'\n        m: 'm'\n        x: 'x'\n        s: 's'\n        l: 'l'\n        u: 'u'\n    # Syntax\n\n   # filter, project, sort, collation, skip, limit, maxTimeMS\n    DriverTemplate: &DriverTemplate !!js/function >\n        (spec) => {\n            const comment = `# Requires the PyMongo package.\n        # https://api.mongodb.com/python/current`;\n            const translateKey = {\n                filter: 'filter',\n                project: 'projection',\n                sort: 'sort',\n                collation: 'collation',\n                skip: 'skip',\n                limit: 'limit',\n                maxTimeMS: 'max_time_ms'\n            };\n            const options = spec.options;\n            delete spec.options;\n\n            const connect = `client = MongoClient('${options.uri}')`;\n            const coll = `client['${options.database}']['${options.collection}']`;\n\n            if ('aggregation' in spec) {\n                return `${comment}\\n\\n${connect}\\nresult = ${coll}.aggregate(${spec.aggregation})`;\n            }\n\n            const vars = Object.keys(spec).reduce(\n                (result, k) => {\n                    if (k === 'sort') {\n                        return `${result}\\n${k}=list(${spec[k]}.items())`;\n                    }\n                    return `${result}\\n${k}=${spec[k]}`;\n                },\n                connect\n            );\n\n            const args = Object.keys(spec).reduce(\n                (result, k) => {\n                    const divider = result === '' ? '' : ',\\n';\n                    return `${result}${divider}  ${\n                        k in translateKey ? translateKey[k] : k\n                    }=${k}`;\n                },\n                ''\n            );\n            const cmd = `result = ${coll}.find(\\n${args}\\n)`;\n\n            return `${comment}\\n\\n${vars}\\n\\n${cmd}`;\n        }\n    EqualitySyntaxTemplate: &EqualitySyntaxTemplate !!js/function >\n        (lhs, op, rhs) => {\n            if (op.includes('!')) {\n                return `${lhs} != ${rhs}`;\n            }\n            else if (op === '==' || op === '===' || op === 'is') {\n                return `${lhs} == ${rhs}`;\n            }\n            return `${lhs} ${op} ${rhs}`;\n        }\n    InSyntaxTemplate: &InSyntaxTemplate !!js/function >\n        (lhs, op, rhs) => {\n            let str = 'in';\n            if (op.includes('!') || op.includes('not')) {\n                str = 'not in';\n            }\n            return `${lhs} ${str} ${rhs}`\n        }\n    AndSyntaxTemplate: &AndSyntaxTemplate !!js/function >\n        (args) => {\n            return args.join(' and ');\n        }\n    OrSyntaxTemplate: &OrSyntaxTemplate !!js/function >\n        (args) => {\n            return args.join(' or ');\n        }\n    NotSyntaxTemplate: &NotSyntaxTemplate !!js/function >\n        (arg) => {\n            return `not ${arg}`;\n        }\n    UnarySyntaxTemplate: &UnarySyntaxTemplate null\n    BinarySyntaxTemplate: &BinarySyntaxTemplate !!js/function >\n        (args) => {\n            return args.reduce((s, op, i, arr) => {\n                if (i % 2 === 0) {\n                    return s;\n                }\n                const rhs = arr[i + 1];\n                switch(op) {\n                    case '//':\n                        return `${s} // ${rhs}`;\n                    case '**':\n                        return `${s} ** ${rhs}`;\n                    default:\n                        return `${s} ${op} ${rhs}`;\n                }\n            }, args[0]);\n        }\n    ParensSyntaxTemplate: &ParensSyntaxTemplate null\n    EosSyntaxTemplate: &EosSyntaxTemplate null\n    EofSyntaxTemplate: &EofSyntaxTemplate null\n    NewTemplate: &NewSyntaxTemplate null\n    # BSON Object Type templates\n    CodeTypeTemplate: &CodeTypeTemplate null\n    StringTypeTemplate: &StringTypeTemplate !!js/function >\n        (str) => {\n          let newStr = str;\n          if (\n            (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n            (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n            newStr = str.substr(1, str.length - 2);\n          }\n          return `'${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}'`;\n        }\n    RegexTypeTemplate: &RegexTypeTemplate !!js/function >\n        (pattern, flags) => {\n            flags = flags === '' ? '' : `(?${flags})`;\n            const escaped = pattern.replace(/\\\\(?!\\/)/, '\\\\\\\\');\n\n            // Double-quote stringify\n            const str = escaped + flags;\n            let newStr = str;\n            if (\n                (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                    newStr = str.substr(1, str.length - 2);\n            }\n            return `re.compile(r\"${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}\")`;\n        }\n    BoolTypeTemplate: &BoolTypeTemplate !!js/function >\n        (str) => {\n          return `${str.charAt(0).toUpperCase()}${str.slice(1)}`;\n        }\n    IntegerTypeTemplate: &IntegerTypeTemplate null\n    DecimalTypeTemplate: &DecimalTypeTemplate null\n    LongBasicTypeTemplate: &LongBasicTypeTemplate null\n    HexTypeTemplate: &HexTypeTemplate null\n    OctalTypeTemplate: &OctalTypeTemplate !!js/function >\n        (literal) => {\n            let offset = 0;\n\n            if (\n                literal.charAt(0) === '0' &&\n                (literal.charAt(1) === '0' || literal.charAt(1) === 'o' || literal.charAt(1) === 'O')\n            ) {\n                offset = 2;\n            } else if (literal.charAt(0) === '0') {\n                offset = 1;\n            }\n\n            literal = `0o${literal.substr(offset, literal.length - 1)}`;\n\n            return literal;\n        }\n    NumericTypeTemplate: &NumericTypeTemplate null\n    ArrayTypeTemplate: &ArrayTypeTemplate !!js/function >\n        (literal, depth) => {\n            depth++;\n            if (literal === '') {\n                return '[]'\n            }\n            const indent = '\\n' + '    '.repeat(depth);\n            const closingIndent = '\\n' + '    '.repeat(depth - 1);\n\n            return `[${indent}${literal}${closingIndent}]`;\n        }\n    ArrayTypeArgsTemplate: &ArrayTypeArgsTemplate null\n    NullTypeTemplate: &NullTypeTemplate !!js/function >\n        () => {\n            return 'None';\n        }\n    UndefinedTypeTemplate: &UndefinedTypeTemplate !!js/function >\n        () => {\n            return 'None';\n        }\n    ObjectTypeTemplate: &ObjectTypeTemplate !!js/function >\n        (literal, depth) => {\n            if (literal === '') {\n                return '{}';\n            }\n            return literal;\n        }\n    ObjectTypeArgsTemplate: &ObjectTypeArgsTemplate !!js/function >\n        (args, depth) => {\n            if (args.length === 0) {\n                return '{}';\n            }\n            depth++;\n            const indent = '\\n' + '    '.repeat(depth);\n            const closingIndent = '\\n' + '    '.repeat(depth - 1);\n            const singleStringify = (str) => {\n                let newStr = str;\n                if (\n                  (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                  (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                    newStr = str.substr(1, str.length - 2);\n                }\n                return `'${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}'`;\n            }\n\n            const pairs = args.map((arg) => {\n                return `${indent}${singleStringify(arg[0])}: ${arg[1]}`;\n            }).join(', ');\n\n            return `{${pairs}${closingIndent}}`;\n        }\n    # BSON Object Method templates\n    CodeCodeTemplate: &CodeCodeTemplate !!js/function >\n        (lhs) => {\n            return `str(${lhs})`;\n        }\n    CodeCodeArgsTemplate: &CodeCodeArgsTemplate null\n    CodeScopeTemplate: &CodeScopeTemplate null\n    CodeScopeArgsTemplate: &CodeScopeArgsTemplate null\n    ObjectIdToStringTemplate: &ObjectIdToStringTemplate !!js/function >\n        (lhs) => {\n            return `str(${lhs})`;\n        }\n    ObjectIdToStringArgsTemplate: &ObjectIdToStringArgsTemplate !!js/function >\n        (lhs) => {\n            return '';\n        }\n    ObjectIdEqualsTemplate: &ObjectIdEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} ==`;\n        }\n    ObjectIdEqualsArgsTemplate: &ObjectIdEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    ObjectIdGetTimestampTemplate: &ObjectIdGetTimestampTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.generation_time`;\n        }\n    ObjectIdGetTimestampArgsTemplate: &ObjectIdGetTimestampArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    BinaryValueTemplate: &BinaryValueTemplate !!js/function >\n        () => {\n            return '';\n        }\n    BinaryValueArgsTemplate: &BinaryValueArgsTemplate !!js/function >\n        (lhs) => {\n            return `str(${lhs})`;\n        }\n    BinaryLengthTemplate: &BinaryLengthTemplate !!js/function >\n        () => {\n            return '';\n        }\n    BinaryLengthArgsTemplate: &BinaryLengthArgsTemplate !!js/function >\n        (lhs) => {\n            return `len(${lhs})`;\n        }\n    BinaryToStringTemplate: &BinaryToStringTemplate !!js/function >\n        () => {\n            return '';\n        }\n    BinaryToStringArgsTemplate: &BinaryToStringArgsTemplate !!js/function >\n        (lhs) => {\n            return `str(${lhs})`;\n        }\n    BinarySubtypeTemplate: &BinarySubtypeTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.subtype`;\n        }\n    BinarySubtypeArgsTemplate: &BinarySubtypeArgsTemplate null\n    DBRefGetDBTemplate: &DBRefGetDBTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.database`;\n        }\n    DBRefGetCollectionTemplate: &DBRefGetCollectionTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.collection`;\n        }\n    DBRefGetIdTemplate: &DBRefGetIdTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.id`;\n        }\n    DBRefGetIdArgsTemplate: &DBRefGetIdArgsTemplate !!js/function\n        () => {\n            return '';\n        }\n    DBRefGetDBArgsTemplate: &DBRefGetDBArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    DBRefGetCollectionArgsTemplate: &DBRefGetCollectionArgsTemplate !!js/function\n        () => {\n            return '';\n        }\n    LongEqualsTemplate: &LongEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} ==`;\n        }\n    LongEqualsArgsTemplate: &LongEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongToIntTemplate: &LongToIntTemplate !!js/function >\n        (lhs) => {\n            return `int(${lhs})`;\n        }\n    LongToIntArgsTemplate: &LongToIntArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongToStringTemplate: &LongToStringTemplate !!js/function >\n        () => {\n            return 'str';\n        }\n    LongToStringArgsTemplate: &LongToStringArgsTemplate !!js/function >\n        (lhs) => {\n            return `(${lhs})`;\n        }\n    LongToNumberTemplate: &LongToNumberTemplate !!js/function >\n        (lhs) => {\n            return `float(${lhs})`;\n        }\n    LongToNumberArgsTemplate: &LongToNumberArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongAddTemplate: &LongAddTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} +`;\n        }\n    LongAddArgsTemplate: &LongAddArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongSubtractTemplate: &LongSubtractTemplate !!js/function >\n        (arg) => {\n            return `${arg} -`;\n        }\n    LongSubtractArgsTemplate: &LongSubtractArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongMultiplyTemplate: &LongMultiplyTemplate !!js/function >\n        (arg) => {\n            return `${arg} *`;\n        }\n    LongMultiplyArgsTemplate: &LongMultiplyArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongDivTemplate: &LongDivTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} /`;\n        }\n    LongDivArgsTemplate: &LongDivArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongModuloTemplate: &LongModuloTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} %`;\n        }\n    LongModuloArgsTemplate: &LongModuloArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongAndTemplate: &LongAndTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} &`;\n        }\n    LongAndArgsTemplate: &LongAndArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongOrTemplate: &LongOrTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} |`;\n        }\n    LongOrArgsTemplate: &LongOrArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongXorTemplate: &LongXorTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} ^`;\n        }\n    LongXorArgsTemplate: &LongXorArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongShiftLeftTemplate: &LongShiftLeftTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <<`;\n        }\n    LongShiftLeftArgsTemplate: &LongShiftLeftArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongShiftRightTemplate: &LongShiftRightTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >>`;\n        }\n    LongShiftRightArgsTemplate: &LongShiftRightArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongCompareTemplate: &LongCompareTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} -`;\n        }\n    LongCompareArgsTemplate: &LongCompareArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongIsOddTemplate: &LongIsOddTemplate !!js/function >\n        (lhs) => {\n            return `(${lhs} % 2) == 1`;\n        }\n    LongIsOddArgsTemplate: &LongIsOddArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongIsZeroTemplate: &LongIsZeroTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} == 0`;\n        }\n    LongIsZeroArgsTemplate: &LongIsZeroArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongIsNegativeTemplate: &LongIsNegativeTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} < 0`;\n        }\n    LongIsNegativeArgsTemplate: &LongIsNegativeArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongNegateTemplate: &LongNegateTemplate !!js/function >\n        () => {\n            return '-';\n        }\n    LongNegateArgsTemplate: &LongNegateArgsTemplate !!js/function >\n        (lhs) => {\n            return lhs;\n        }\n    LongNotTemplate: &LongNotTemplate !!js/function >\n        () => {\n            return '~';\n        }\n    LongNotArgsTemplate: &LongNotArgsTemplate !!js/function >\n        (lhs) => {\n            return lhs;\n        }\n    LongNotEqualsTemplate: &LongNotEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} !=`;\n        }\n    LongNotEqualsArgsTemplate: &LongNotEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongGreaterThanTemplate: &LongGreaterThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >`;\n        }\n    LongGreaterThanArgsTemplate: &LongGreaterThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongGreaterThanOrEqualTemplate: &LongGreaterThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >=`;\n        }\n    LongGreaterThanOrEqualArgsTemplate: &LongGreaterThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongLessThanTemplate: &LongLessThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <`;\n        }\n    LongLessThanArgsTemplate: &LongLessThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongLessThanOrEqualTemplate: &LongLessThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <=`;\n        }\n    LongLessThanOrEqualArgsTemplate: &LongLessThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongFloatApproxTemplate: &LongFloatApproxTemplate !!js/function >\n        (lhs) => {\n            return `float(${lhs})`;\n        }\n    LongTopTemplate: &LongTopTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >> 32`;\n        }\n    LongBottomTemplate: &LongBottomTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} & 0x0000ffff`;\n        }\n    TimestampToStringTemplate: &TimestampToStringTemplate !!js/function >\n        () => {\n            return 'str';\n        }\n    TimestampToStringArgsTemplate: &TimestampToStringArgsTemplate !!js/function >\n        (lhs) => {\n            return `(${lhs})`;\n        }\n    TimestampEqualsTemplate: &TimestampEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} ==`;\n        }\n    TimestampEqualsArgsTemplate: &TimestampEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    TimestampGetLowBitsTemplate: &TimestampGetLowBitsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.time`;\n        }\n    TimestampGetLowBitsArgsTemplate: &TimestampGetLowBitsArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    TimestampGetHighBitsTemplate: &TimestampGetHighBitsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.inc`;\n        }\n    TimestampGetHighBitsArgsTemplate: &TimestampGetHighBitsArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    TimestampTTemplate: &TimestampTTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.time`;\n        }\n    TimestampITemplate: &TimestampITemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.inc`;\n        }\n    TimestampAsDateTemplate: &TimestampAsDateTemplate null\n    TimestampAsDateArgsTemplate: &TimestampAsDateArgsTemplate !!js/function >\n        () => {\n            return '.as_datetime()';\n        }\n    TimestampCompareTemplate: &TimestampCompareTemplate !!js/function >\n        (lhs) => {\n            return `(${lhs}.as_datetime() - `;\n        }\n    TimestampCompareArgsTemplate: &TimestampCompareArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}.as_datetime()).total_seconds()`;\n        }\n    TimestampNotEqualsTemplate: &TimestampNotEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} !=`;\n        }\n    TimestampNotEqualsArgsTemplate: &TimestampNotEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    TimestampGreaterThanTemplate: &TimestampGreaterThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >`;\n        }\n    TimestampGreaterThanArgsTemplate: &TimestampGreaterThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    TimestampGreaterThanOrEqualTemplate: &TimestampGreaterThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >=`;\n        }\n    TimestampGreaterThanOrEqualArgsTemplate: &TimestampGreaterThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    TimestampLessThanTemplate: &TimestampLessThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <`;\n        }\n    TimestampLessThanArgsTemplate: &TimestampLessThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    TimestampLessThanOrEqualTemplate: &TimestampLessThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <=`;\n        }\n    TimestampLessThanOrEqualArgsTemplate: &TimestampLessThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    SymbolValueOfTemplate: &SymbolValueOfTemplate !!js/function >\n        (lhs) => {\n            return lhs;\n        }\n    SymbolValueOfArgsTemplate: &SymbolValueOfArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    SymbolInspectTemplate: &SymbolInspectTemplate !!js/function >\n        (lhs) => {\n            return lhs;\n        }\n    SymbolInspectArgsTemplate: &SymbolInspectArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    SymbolToStringTemplate: &SymbolToStringTemplate !!js/function >\n        (lhs) => {\n            return lhs;\n        }\n    SymbolToStringArgsTemplate: &SymbolToStringArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    # Symbol Templates\n    CodeSymbolTemplate: &CodeSymbolTemplate !!js/function > # Also has process method\n        () => {\n            return 'Code';\n        }\n    CodeSymbolArgsTemplate: &CodeSymbolArgsTemplate !!js/function > # Also has process method\n        (lhs, code, scope) => {\n          // Single quote stringify\n          const scopestr = scope === undefined ? '' : `, ${scope}`;\n          let newStr = code === undefined ? '' : code;\n          const str = newStr;\n          if (\n            (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n            (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n            newStr = str.substr(1, str.length - 2);\n          }\n          code = `'${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}'`;\n          return `(${code}${scopestr})`;\n        }\n    ObjectIdSymbolTemplate: &ObjectIdSymbolTemplate null\n    ObjectIdSymbolArgsTemplate: &ObjectIdSymbolArgsTemplate !!js/function >\n        (lhs, str) => {\n          if (!str || str.length === 0) {\n            return '()';\n          }\n          let newStr = str;\n          if (\n            (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n            (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n            newStr = str.substr(1, str.length - 2);\n          }\n          return `('${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}')`;\n        }\n    BinarySymbolTemplate: &BinarySymbolTemplate null\n    BinarySymbolArgsTemplate: &BinarySymbolArgsTemplate !!js/function >\n        (lhs, bytes, type) => {\n            const str = bytes;\n            let newStr = str;\n            if (\n              (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n              (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                newStr = str.substr(1, str.length - 2);\n            }\n            bytes = `'${newStr.replace(/\\\\([\\s\\S])|(')/g, '\\\\$1$2')}'`;\n\n            if (type === null) {\n                return `(b${bytes})`;\n            }\n            return `(b${bytes}, ${type})`;\n        }\n    BinarySymbolSubtypeDefaultTemplate: &BinarySymbolSubtypeDefaultTemplate !!js/function >\n        () => {\n            return 'binary.BINARY_SUBTYPE';\n        }\n    BinarySymbolSubtypeFunctionTemplate: &BinarySymbolSubtypeFunctionTemplate !!js/function >\n        () => {\n            return 'binary.FUNCTION_SUBTYPE';\n        }\n    BinarySymbolSubtypeByteArrayTemplate: &BinarySymbolSubtypeByteArrayTemplate !!js/function >\n        () => {\n            return 'binary.BINARY_SUBTYPE';\n        }\n    BinarySymbolSubtypeUuidOldTemplate: &BinarySymbolSubtypeUuidOldTemplate !!js/function >\n        () => {\n            return 'binary.OLD_UUID_SUBTYPE';\n        }\n    BinarySymbolSubtypeUuidTemplate: &BinarySymbolSubtypeUuidTemplate !!js/function >\n        () => {\n            return 'binary.UUID_SUBTYPE';\n        }\n    BinarySymbolSubtypeMd5Template: &BinarySymbolSubtypeMd5Template !!js/function >\n        () => {\n            return 'binary.MD5_SUBTYPE';\n        }\n    BinarySymbolSubtypeUserDefinedTemplate: &BinarySymbolSubtypeUserDefinedTemplate !!js/function >\n        () => {\n            return 'binary.USER_DEFINED_SUBTYPE';\n        }\n    DBRefSymbolTemplate: &DBRefSymbolTemplate null\n    DBRefSymbolArgsTemplate: &DBRefSymbolArgsTemplate null\n    DoubleSymbolTemplate: &DoubleSymbolTemplate !!js/function >\n        () => {\n            return 'float';\n        }\n    DoubleSymbolArgsTemplate: &DoubleSymbolArgsTemplate null\n    Int32SymbolTemplate: &Int32SymbolTemplate !!js/function >\n        () => {\n            return 'int';\n        }\n    Int32SymbolArgsTemplate: &Int32SymbolArgsTemplate !!js/function >\n        (lhs, arg) => {\n            arg = arg === undefined ? 0 : arg;\n            const str = arg.toString();\n            let newStr = str;\n            if (\n                (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                newStr = str.substr(1, str.length - 2);\n                return `('${newStr}')`;\n            } else {\n                return `(${newStr})`;\n            }\n        }\n    LongSymbolTemplate: &LongSymbolTemplate !!js/function >\n        () => {\n            return 'Int64';\n        }\n    LongSymbolArgsTemplate: &LongSymbolArgsTemplate null\n    LongSymbolMaxTemplate: &LongSymbolMaxTemplate !!js/function >\n        () => {\n            return 'sys.maxsize';\n        }\n    LongSymbolMaxArgsTemplate: &LongSymbolMaxArgsTemplate null\n    LongSymbolMinTemplate: &LongSymbolMinTemplate !!js/function >\n        () => {\n            return '-sys.maxsize -1';\n        }\n    LongSymbolMinArgsTemplate: &LongSymbolMinArgsTemplate null\n    LongSymbolZeroTemplate: &LongSymbolZeroTemplate !!js/function >\n        () => {\n            return 'Int64(0)';\n        }\n    LongSymbolZeroArgsTemplate: &LongSymbolZeroArgsTemplate null\n    LongSymbolOneTemplate: &LongSymbolOneTemplate !!js/function >\n        () => {\n            return 'Int64(1)';\n        }\n    LongSymbolOneArgsTemplate: &LongSymbolOneArgsTemplate null\n    LongSymbolNegOneTemplate: &LongSymbolNegOneTemplate !!js/function >\n        () => {\n            return 'Int64(-1)';\n        }\n    LongSymbolNegOneArgsTemplate: &LongSymbolNegOneArgsTemplate null\n    LongSymbolFromBitsTemplate: &LongSymbolFromBitsTemplate !!js/function > # Also has process method\n        () => {\n            return 'Int64';\n        }\n    LongSymbolFromBitsArgsTemplate: &LongSymbolFromBitsArgsTemplate null\n    LongSymbolFromIntTemplate: &LongSymbolFromIntTemplate !!js/function >\n        () => {\n            return 'Int64';\n        }\n    LongSymbolFromIntArgsTemplate: &LongSymbolFromIntArgsTemplate null\n    LongSymbolFromNumberTemplate: &LongSymbolFromNumberTemplate !!js/function >\n        () => {\n            return 'Int64';\n        }\n    LongSymbolFromNumberArgsTemplate: &LongSymbolFromNumberArgsTemplate null\n    LongSymbolFromStringTemplate: &LongSymbolFromStringTemplate !!js/function >\n        (lhs, arg) => {\n            return 'Int64';\n        }\n    LongSymbolFromStringArgsTemplate: &LongSymbolFromStringArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `(int(${arg}))`;\n        }\n    MinKeySymbolTemplate: &MinKeySymbolTemplate null\n    MinKeySymbolArgsTemplate: &MinKeySymbolArgsTemplate null\n    MaxKeySymbolTemplate: &MaxKeySymbolTemplate null\n    MaxKeySymbolArgsTemplate: &MaxKeySymbolArgsTemplate null\n    TimestampSymbolTemplate: &TimestampSymbolTemplate !!js/function >\n        () => {\n            return 'Timestamp';\n        }\n    TimestampSymbolArgsTemplate: &TimestampSymbolArgsTemplate !!js/function >\n        (lhs, arg1, arg2) => {\n            return `(${arg1 === undefined ? 0 : arg1}, ${arg2 === undefined ? 0 : arg2})`;\n        }\n    SymbolSymbolTemplate: &SymbolSymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    SymbolSymbolArgsTemplate: &SymbolSymbolArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return arg;\n        }\n    BSONRegExpSymbolTemplate: &BSONRegExpSymbolTemplate !!js/function >\n        () => {\n            return 'Regex';\n        }\n    BSONRegExpSymbolArgsTemplate: &BSONRegExpSymbolArgsTemplate !!js/function >\n        (lhs, pattern, flags) => {\n            const singleStringify = (str) => {\n                let newStr = str;\n                if (\n                  (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                  (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                    newStr = str.substr(1, str.length - 2);\n                }\n                return `'${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}'`;\n            }\n            return `(${singleStringify(pattern)}${flags ? ', ' + singleStringify(flags) : ''})`;\n        }\n    Decimal128SymbolTemplate: &Decimal128SymbolTemplate !!js/function >\n        () => {\n            return 'Decimal128';\n        }\n    Decimal128SymbolArgsTemplate: &Decimal128SymbolArgsTemplate !!js/function >\n        (lhs, str) => {\n          let newStr = str;\n          if (\n            (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n            (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n            newStr = str.substr(1, str.length - 2);\n          }\n          return `('${newStr.replace(/\\\\([\\s\\S])|(\")/g, '\\\\$1$2')}')`;\n        }\n    Decimal128SymbolFromStringTemplate: &Decimal128SymbolFromStringTemplate !!js/function >\n        () => {\n            return 'Decimal128';\n        }\n    Decimal128SymbolFromStringArgsTemplate: &Decimal128SymbolFromStringArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `(${arg})`;\n        }\n    Decimal128ToStringTemplate: &Decimal128ToStringTemplate !!js/function >\n        () => {\n            return 'str';\n        }\n    Decimal128ToStringArgsTemplate: &Decimal128ToStringArgsTemplate !!js/function >\n        (lhs) => {\n            return `(${lhs})`;\n        }\n    # BSON Util Templates\n    ObjectIdCreateFromHexStringTemplate: &ObjectIdCreateFromHexStringTemplate !!js/function >\n        () => {\n            return 'ObjectId';\n        }\n    ObjectIdCreateFromHexStringArgsTemplate: &ObjectIdCreateFromHexStringArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `(${arg})`;\n        }\n    ObjectIdCreateFromTimeTemplate: &ObjectIdCreateFromTimeTemplate !!js/function >\n        () => {\n            return `ObjectId.from_datetime`;\n        }\n    ObjectIdCreateFromTimeArgsTemplate: &ObjectIdCreateFromTimeArgsTemplate !!js/function >\n        (lhs, arg, isNumber) => {\n            if (isNumber) {\n                return `(datetime.fromtimestamp(${arg}))`;\n            }\n            return `(${arg})`;\n        }\n    ObjectIdIsValidTemplate: &ObjectIdIsValidTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.is_valid`;\n        }\n    ObjectIdIsValidArgsTemplate: &ObjectIdIsValidArgsTemplate null\n    # JS Symbol Templates\n    NumberSymbolTemplate: &NumberSymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    NumberSymbolArgsTemplate: &NumberSymbolArgsTemplate !!js/function >\n        (lhs, arg) => {\n            arg = arg === undefined ? 0 : arg;\n            const str = arg.toString();\n            let newStr = str;\n            if (\n                (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                newStr = str.substr(1, str.length - 2);\n                return `float('${newStr}')`;\n            } else {\n                return `${newStr}`;\n            }\n        }\n    DateSymbolTemplate: &DateSymbolTemplate !!js/function >\n        () => {\n            return 'datetime';\n        }\n    DateSymbolArgsTemplate: &DateSymbolArgsTemplate !!js/function >\n        (lhs, date, isString) => {\n            const toStr = isString ? '.strftime(\\'%a %b %d %Y %H:%M:%S %Z\\')' : '';\n\n            if (date === null) {\n                return `${lhs}.utcnow()${toStr}`;\n            }\n\n            const dateStr = [\n                date.getUTCFullYear(),\n                date.getUTCMonth() + 1,\n                date.getUTCDate(),\n                date.getUTCHours(),\n                date.getUTCMinutes(),\n                date.getUTCSeconds()\n            ].join(', ');\n\n            return `${lhs}(${dateStr}, tzinfo=timezone.utc)${toStr}`;\n        }\n    DateSymbolNowTemplate: &DateSymbolNowTemplate !!js/function >\n        () => {\n            return 'datetime.utcnow';\n        }\n    DateSymbolNowArgsTemplate: &DateSymbolNowArgsTemplate null\n    RegExpSymbolTemplate: &RegExpSymbolTemplate !!js/function > # Also has process method\n        () => {\n            return 're';\n        }\n    RegExpSymbolArgsTemplate: &RegExpSymbolArgsTemplate null\n    ImportTemplate: &ImportTemplate !!js/function >\n        (args) => {\n            const bson = [];\n            const other = [];\n            Object.keys(args).map(\n                (m) => {\n                    if (m > 99 && m < 200) {\n                        bson.push(args[m]);\n                    } else {\n                        other.push(args[m]);\n                    }\n                }\n            );\n            if (bson.length) {\n                other.push(`from bson import ${bson.join(', ')}`);\n            }\n            return other.join('\\n');\n        }\n    DriverImportTemplate: &DriverImportTemplate !!js/function >\n        () => {\n            return 'from pymongo import MongoClient';\n        }\n    0ImportTemplate: &0ImportTemplate null\n    1ImportTemplate: &1ImportTemplate null\n    2ImportTemplate: &2ImportTemplate null\n    3ImportTemplate: &3ImportTemplate null\n    4ImportTemplate: &4ImportTemplate null\n    5ImportTemplate: &5ImportTemplate null\n    6ImportTemplate: &6ImportTemplate null\n    7ImportTemplate: &7ImportTemplate null\n    8ImportTemplate: &8ImportTemplate !!js/function >\n        () => {\n            return 'import re';\n        }\n    9ImportTemplate: &9ImportTemplate null\n    10ImportTemplate: &10ImportTemplate null\n    11ImportTemplate: &11ImportTemplate null\n    12ImportTemplate: &12ImportTemplate null\n    100ImportTemplate: &100ImportTemplate !!js/function >\n        () => {\n            return 'Code';\n        }\n    101ImportTemplate: &101ImportTemplate !!js/function >\n        () => {\n            return 'ObjectId';\n        }\n    102ImportTemplate: &102ImportTemplate !!js/function >\n        () => {\n            return 'Binary';\n        }\n    103ImportTemplate: &103ImportTemplate !!js/function >\n        () => {\n            return 'DBRef';\n        }\n    104ImportTemplate: &104ImportTemplate null\n    105ImportTemplate: &105ImportTemplate null\n    106ImportTemplate: &106ImportTemplate !!js/function >\n        () => {\n            return 'Int64';\n        }\n    107ImportTemplate: &107ImportTemplate !!js/function >\n        () => {\n            return 'MinKey';\n        }\n    108ImportTemplate: &108ImportTemplate !!js/function >\n        () => {\n            return 'MaxKey';\n        }\n    109ImportTemplate: &109ImportTemplate !!js/function >\n        () => {\n            return 'Regex';\n        }\n    110ImportTemplate: &110ImportTemplate !!js/function >\n        () => {\n            return 'Timestamp';\n        }\n    111ImportTemplate: &111ImportTemplate null\n    112ImportTemplate: &112ImportTemplate !!js/function >\n        () => {\n            return 'Decimal128';\n        }\n    113ImportTemplate: &113ImportTemplate null\n    114ImportTemplate: &114ImportTemplate null\n    200ImportTemplate: &200ImportTemplate !!js/function >\n        () => {\n            return 'from datetime import datetime, tzinfo, timezone';\n        }\n    201ImportTemplate: &201ImportTemplate null\n    300ImportTemplate: &300ImportTemplate null\n    301ImportTemplate: &301ImportTemplate null\n    302ImportTemplate: &302ImportTemplate null\n    303ImportTemplate: &303ImportTemplate null\n    304ImportTemplate: &304ImportTemplate null\n    305ImportTemplate: &305ImportTemplate null\n    306ImportTemplate: &306ImportTemplate null\n# Universal types\n# Everything inherits from StringType because we haven't implemented any of them.\nBasicTypes:\n    # Universal basic types\n    _bool: &BoolType\n        <<: *__type\n        id: \"_bool\"\n        code: 0\n        template: *BoolTypeTemplate\n    _integer: &IntegerType\n        <<: *__type\n        id: \"_integer\"\n        code: 1\n        template: *IntegerTypeTemplate\n    _long: &LongBasicType\n        <<: *__type\n        id: \"_long\"\n        code: 2\n        template: *LongBasicTypeTemplate\n    _decimal: &DecimalType\n        <<: *__type\n        id: \"_decimal\"\n        code: 3\n        template: *DecimalTypeTemplate\n    _hex: &HexType\n        <<: *__type\n        id: \"_hex\"\n        code: 4\n        template: *HexTypeTemplate\n    _octal: &OctalType\n        <<: *__type\n        id: \"_octal\"\n        code: 5\n        template: *OctalTypeTemplate\n    _numeric: &NumericType\n        <<: *__type\n        id: \"_numeric\"\n        code: 6\n        template: *NumericTypeTemplate\n    _string: &StringType\n        <<: *__type\n        id: \"_string\"\n        code: 7\n        template: *StringTypeTemplate\n    _regex: &RegexType\n        <<: *__type\n        id: \"_regex\"\n        code: 8\n        template: *RegexTypeTemplate\n    _array: &ArrayType\n        <<: *__type\n        id: \"_array\"\n        code: 9\n        template: *ArrayTypeTemplate\n        argsTemplate: *ArrayTypeArgsTemplate\n    _object: &ObjectType\n        <<: *__type\n        id: \"_object\"\n        code: 10\n        template: *ObjectTypeTemplate\n        argsTemplate: *ObjectTypeArgsTemplate\n    _null: &NullType\n        <<: *__type\n        id: \"_null\"\n        code: 11\n        template: *NullTypeTemplate\n    _undefined: &UndefinedType\n        <<: *__type\n        id: \"_undefined\"\n        code: 12\n        template: *UndefinedTypeTemplate\n\nSyntax:\n    equality:\n        template: *EqualitySyntaxTemplate\n    in:\n        template: *InSyntaxTemplate\n    and:\n        template: *AndSyntaxTemplate\n    or:\n        template: *OrSyntaxTemplate\n    not:\n        template: *NotSyntaxTemplate\n    unary:\n        template: *UnarySyntaxTemplate\n    binary:\n        template: *BinarySyntaxTemplate\n    parens:\n        template: *ParensSyntaxTemplate\n    eos:\n        template: *EosSyntaxTemplate\n    eof:\n        template: *EofSyntaxTemplate\n    # The new template takes in expr, and an optional skip argument and optional\n    # id argument. The skip argument is a boolean that if true then doesn't add\n    # new. The code argument is the symbol code being called. The template will check\n    # if it is an exception, i.e. a type that is a constructor but may not use new.\n    new:\n        template: *NewSyntaxTemplate\n    # The regex flags that change symbols between languages can be defined here.\n    # Flags that aren't defined can be left blank and will be ignored.\n    regexFlags: *RegexFlags\n    bsonRegexFlags: *BSONRegexFlags\n    driver: *DriverTemplate\nImports:\n    import:\n        template: *ImportTemplate\n    driver:\n        template: *DriverImportTemplate\n    0:\n        template: *0ImportTemplate\n    1:\n        template: *1ImportTemplate\n    2:\n        template: *2ImportTemplate\n    3:\n        template: *3ImportTemplate\n    4:\n        template: *4ImportTemplate\n    5:\n        template: *5ImportTemplate\n    6:\n        template: *6ImportTemplate\n    7:\n        template: *7ImportTemplate\n    8:\n        template: *8ImportTemplate\n    9:\n        template: *9ImportTemplate\n    10:\n        template: *10ImportTemplate\n    11:\n        template: *11ImportTemplate\n    12:\n        template: *12ImportTemplate\n    100:\n        template: *100ImportTemplate\n    101:\n        template: *101ImportTemplate\n    102:\n        template: *102ImportTemplate\n    103:\n        template: *103ImportTemplate\n    104:\n        template: *104ImportTemplate\n    105:\n        template: *105ImportTemplate\n    106:\n        template: *106ImportTemplate\n    107:\n        template: *107ImportTemplate\n    108:\n        template: *108ImportTemplate\n    109:\n        template: *109ImportTemplate\n    110:\n        template: *110ImportTemplate\n    111:\n        template: *111ImportTemplate\n    112:\n        template: *112ImportTemplate\n    113:\n        template: *113ImportTemplate\n    114:\n        template: *114ImportTemplate\n    200:\n        template: *200ImportTemplate\n    201:\n        template: *201ImportTemplate\n    300:\n        template: *300ImportTemplate\n    301:\n        template: *301ImportTemplate\n    302:\n        template: *302ImportTemplate\n    303:\n        template: *303ImportTemplate\n    304:\n        template: *304ImportTemplate\n    305:\n        template: *305ImportTemplate\n    306:\n        template: *306ImportTemplate\nBsonTypes:\n    Code: &CodeType\n        <<: *__type\n        id: \"Code\"\n        code: 100\n        type: *ObjectType\n        attr:\n            code:\n                callable: *var\n                args: null\n                attr: null\n                id: \"code\"\n                type: *StringType\n                template: *CodeCodeTemplate\n                argsTemplate: *CodeCodeArgsTemplate\n            scope:\n                callable: *var\n                args: null\n                attr: null\n                id: \"scope\"\n                type: *StringType\n                template: *CodeScopeTemplate\n                argsTemplate: *CodeScopeArgsTemplate\n    ObjectId: &ObjectIdType\n        <<: *__type\n        id: \"ObjectId\"\n        code: 101\n        type: *ObjectType\n        attr:\n            toString:\n                <<: *__func\n                id: \"toString\"\n                type: *StringType\n                template: *ObjectIdToStringTemplate\n                argsTemplate: *ObjectIdToStringArgsTemplate\n            equals:\n                <<: *__func\n                id: \"equals\"\n                args:\n                    - [ \"ObjectId\" ]\n                type: *BoolType\n                template: *ObjectIdEqualsTemplate\n                argsTemplate: *ObjectIdEqualsArgsTemplate\n            getTimestamp:\n                <<: *__func\n                id: \"getTimestamp\"\n                type: *IntegerType\n                template: *ObjectIdGetTimestampTemplate\n                argsTemplate: *ObjectIdGetTimestampArgsTemplate\n    BinData: &BinaryType\n        <<: *__type\n        id: \"BinData\"\n        code: 102\n        type: *ObjectType\n        attr:\n            toString:\n                <<: *__func\n                id: \"toString\"\n                type: *StringType\n                template: *BinaryToStringTemplate\n                argsTemplate: *BinaryToStringArgsTemplate\n            base64:\n                <<: *__func\n                id: \"base64\"\n                type: *StringType\n                template: *BinaryValueTemplate\n                argsTemplate: *BinaryValueArgsTemplate\n            length:\n                <<: *__func\n                id: \"length\"\n                type: *IntegerType\n                template: *BinaryLengthTemplate\n                argsTemplate: *BinaryLengthArgsTemplate\n            subtype:\n                <<: *__func\n                id: \"subtype\"\n                type: *IntegerType\n                template: *BinarySubtypeTemplate\n                argsTemplate: *BinarySubtypeArgsTemplate\n    DBRef: &DBRefType\n        <<: *__type\n        id: \"DBRef\"\n        code: 103\n        type: *ObjectType\n        attr:\n            getDb:\n                <<: *__func\n                id: \"getDb\"\n                type: *StringType\n                template: *DBRefGetDBTemplate\n                argsTemplate: *DBRefGetDBArgsTemplate\n            $db:\n                callable: *var\n                args: null\n                attr: null\n                id: \"$db\"\n                type: *StringType\n                template: *DBRefGetDBTemplate\n                argsTemplate: *DBRefGetDBArgsTemplate\n            getCollection:\n                <<: *__func\n                id: \"getCollection\"\n                type: *StringType\n                template: *DBRefGetCollectionTemplate\n                argsTemplate: *DBRefGetCollectionArgsTemplate\n            getRef:\n                <<: *__func\n                id: \"getRef\"\n                type: *StringType\n                template: *DBRefGetCollectionTemplate\n                argsTemplate: *DBRefGetCollectionArgsTemplate\n            $ref:\n                callable: *var\n                args: null\n                attr: null\n                id: \"$ref\"\n                type: *StringType\n                template: *DBRefGetCollectionTemplate\n                argsTemplate: *DBRefGetCollectionArgsTemplate\n            getId:\n                <<: *__func\n                id: \"getId\"\n                type: *StringType\n                template: *DBRefGetIdTemplate\n                argsTemplate: *DBRefGetIdArgsTemplate\n            $id:\n                callable: *var\n                args: null\n                attr: null\n                id: \"$id\"\n                type: *StringType\n                template: *DBRefGetIdTemplate\n                argsTemplate: *DBRefGetIdArgsTemplate\n    NumberInt: &Int32Type\n        <<: *__type\n        id: \"NumberInt\"\n        code: 105\n        type: *ObjectType\n        attr: {}\n    NumberLong: &LongType\n        <<: *__type\n        id: \"NumberLong\"\n        code: 106\n        type: *ObjectType\n        attr:\n            toString:\n                <<: *__func\n                id: \"LongtoString\" # Needs process method\n                type: *StringType\n            top:\n                callable: *var\n                args: null\n                attr: null\n                id: \"top\"\n                type: *IntegerType\n                template: *LongTopTemplate\n                argsTemplate: null\n            bottom:\n                callable: *var\n                args: null\n                attr: null\n                id: \"bottom\"\n                type: *IntegerType\n                template: *LongBottomTemplate\n                argsTemplate: null\n            floatApprox:\n                callable: *var\n                args: null\n                attr: null\n                id: \"floatApprox\"\n                type: *IntegerType\n                template: *LongFloatApproxTemplate\n                argsTemplate: null\n    MinKeyType: &MinKeyType\n        <<: *__type\n        id: \"MinKey\"\n        code: 107\n        type: *ObjectType\n    MaxKeyType: &MaxKeyType\n        <<: *__type\n        id: \"MaxKey\"\n        code: 108\n        type: *ObjectType\n    Timestamp: &TimestampType\n        <<: *__type\n        id: \"TimestampFromShell\"\n        code: 110\n        type: *ObjectType\n        attr:\n            toString:\n                <<: *__func\n                id: \"toString\"\n                type: *StringType\n                template: *TimestampToStringTemplate\n                argsTemplate: *TimestampToStringArgsTemplate\n            getTime:\n                <<: *__func\n                id: \"getTime\"\n                type: *IntegerType\n                template: *TimestampGetLowBitsTemplate\n                argsTemplate: *TimestampGetLowBitsArgsTemplate\n            getInc:\n                <<: *__func\n                id: \"getInc\"\n                type: *IntegerType\n                template: *TimestampGetHighBitsTemplate\n                argsTemplate: *TimestampGetHighBitsArgsTemplate\n            t:\n                callable: *var\n                args: null\n                attr: null\n                id: \"getTime\"\n                type: *IntegerType\n                template: *TimestampTTemplate\n                argsTemplate: null\n            i:\n                callable: *var\n                args: null\n                attr: null\n                id: \"getInc\"\n                type: *IntegerType\n                template: *TimestampITemplate\n                argsTemplate: null\n    Symbol: &SymbolType\n        <<: *__type\n        id: \"Symbol\"\n        code: 111\n        type: *ObjectType\n    NumberDecimal: &Decimal128Type\n        <<: *__type\n        id: \"NumberDecimal\"\n        code: 112\n        type: *ObjectType\n        attr: {}\n    SUBTYPE_DEFAULT:\n        id: \"SUBTYPE_DEFAULT\"\n        callable: *var\n        args: null\n        code: 113\n        type: *IntegerType\n        template: *BinarySymbolSubtypeDefaultTemplate\n    SUBTYPE_FUNCTION:\n        id: \"SUBTYPE_FUNCTION\"\n        callable: *var\n        args: null\n        code: 113\n        type: *IntegerType\n        template: *BinarySymbolSubtypeFunctionTemplate\n    SUBTYPE_BYTE_ARRAY:\n        id: \"SUBTYPE_BYTE_ARRAY\"\n        callable: *var\n        args: null\n        code: 113\n        type: *IntegerType\n        template: *BinarySymbolSubtypeByteArrayTemplate\n    SUBTYPE_UUID_OLD:\n        id: \"SUBTYPE_UUID_OLD\"\n        callable: *var\n        args: null\n        code: 113\n        type: *IntegerType\n        template: *BinarySymbolSubtypeUuidOldTemplate\n    SUBTYPE_UUID:\n        id: \"SUBTYPE_UUID\"\n        callable: *var\n        args: null\n        code: 113\n        type: *IntegerType\n        template: *BinarySymbolSubtypeUuidTemplate\n    SUBTYPE_MD5:\n        id: \"SUBTYPE_MD5\"\n        callable: *var\n        args: null\n        code: 113\n        type: *IntegerType\n        template: *BinarySymbolSubtypeMd5Template\n    SUBTYPE_USER_DEFINED:\n        id: \"SUBTYPE_USER_DEFINED\"\n        callable: *var\n        args: null\n        code: 113\n        type: *IntegerType\n        template: *BinarySymbolSubtypeUserDefinedTemplate\nNativeTypes:\n    Date: &DateType\n        <<: *__type\n        id: \"Date\"\n        code: 200\n        type: *ObjectType\n        attr: {} # TODO: no built-in date methods added yet\n    RegExp: &RegExpType\n        <<: *__type\n        id: \"RegExp\"\n        code: 8\n        type: *ObjectType\n        attr: {}\n\n\n\n\nBsonSymbols:\n    Code: &CodeSymbol\n        id: \"Code\"\n        code: 100\n        callable: *constructor\n        args:\n            - [ *StringType, null ]\n            - [ *ObjectType, null ]\n        type: *CodeType\n        attr: {}\n        template: *CodeSymbolTemplate\n        argsTemplate: *CodeSymbolArgsTemplate\n    ObjectId: &ObjectIdSymbol\n        id: \"ObjectId\"\n        code: 101\n        callable: *constructor\n        args:\n            - [ *StringType, null ]\n        type: *ObjectIdType\n        attr:\n            fromDate:\n                <<: *__func\n                id: \"ObjectIdCreateFromTime\"\n                args:\n                    - [ *DateType ]\n                type: *ObjectIdType\n                template: *ObjectIdCreateFromTimeTemplate\n                argsTemplate: *ObjectIdCreateFromTimeArgsTemplate\n        template: *ObjectIdSymbolTemplate\n        argsTemplate: *ObjectIdSymbolArgsTemplate\n    BinData: &BinarySymbol\n        id: \"BinData\"\n        code: 102\n        callable: *constructor\n        args:\n            - [ *IntegerType ]\n            - [ *StringType ]\n        type: *BinaryType\n        attr: {}\n        template: *BinarySymbolTemplate\n        argsTemplate: *BinarySymbolArgsTemplate\n    DBRef:\n        id: \"DBRef\"\n        code: 103\n        callable: *constructor\n        args:\n            - [ *StringType ]\n            - [ *ObjectIdType ]\n            - [ *StringType, null ]\n        type: *DBRefType\n        attr: {}\n        template: *DBRefSymbolTemplate\n        argsTemplate: *DBRefSymbolArgsTemplate\n    NumberInt:\n        id: \"Int32\"\n        code: 105\n        callable: *constructor\n        args:\n            - [ *NumericType, *StringType, null ]\n        type: *Int32Type\n        attr: {}\n        template: *Int32SymbolTemplate\n        argsTemplate: *Int32SymbolArgsTemplate\n    NumberLong:\n        id: \"NumberLong\"\n        code: 106\n        callable: *constructor\n        args:\n            - [ *IntegerType, *StringType, null ]\n        type: *LongType\n        attr: {}\n        template: *LongSymbolTemplate\n        argsTemplate: *LongSymbolArgsTemplate\n    MinKey:\n        id: \"MinKey\"\n        code: 107\n        callable: *constructor\n        args: []\n        type: *MinKeyType\n        attr: {}\n        template: *MinKeySymbolTemplate\n        argsTemplate: *MinKeySymbolArgsTemplate\n    MaxKey:\n        id: \"MaxKey\"\n        code: 108\n        callable: *constructor\n        args: []\n        type: *MaxKeyType\n        attr: {}\n        template: *MaxKeySymbolTemplate\n        argsTemplate: *MaxKeySymbolArgsTemplate\n    Timestamp:\n        id: \"Timestamp\"\n        code: 110\n        callable: *constructor\n        args:\n            - [ *IntegerType, null ]\n            - [ *IntegerType, null ]\n        type: *TimestampType\n        attr: {}\n        template: *TimestampSymbolTemplate\n        argsTemplate: *TimestampSymbolArgsTemplate\n    Symbol:\n        id: \"Symbol\"\n        code: 111\n        callable: *constructor\n        args:\n            - [ *StringType ]\n        type: *SymbolType\n        attr: {}\n        template: *SymbolSymbolTemplate\n        argsTemplate: *SymbolSymbolArgsTemplate\n    NumberDecimal:\n        id: \"NumberDecimal\"\n        code: 112\n        callable: *constructor\n        args:\n            - [ *StringType, *NumericType, null ]\n        type: *Decimal128Type\n        attr: {}\n        template: *Decimal128SymbolTemplate\n        argsTemplate: *Decimal128SymbolArgsTemplate\n\nNativeSymbols:\n    Number:\n        id: \"Number\"\n        code: 2\n        callable: *constructor\n        args:\n            - [ *IntegerType, *StringType, null ]\n        type: *NumericType\n        attr: {} # TODO: no built-in number funcs added yet\n        template: *NumberSymbolTemplate\n        argsTemplate: *NumberSymbolArgsTemplate\n    Date: # Needs emit method\n        id: \"Date\"\n        code: 200\n        callable: *constructor\n        args:\n            - [ *StringType, *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n        type: *DateType\n        attr: # TODO: add more date funcs?\n            now:\n                id: \"now\"\n                code: 200.1\n                callable: *func\n                args: []\n                type: *DateType\n                attr: {}\n                template: *DateSymbolNowTemplate\n                argsTemplate: *DateSymbolNowArgsTemplate\n        template: *DateSymbolTemplate\n        argsTemplate: *DateSymbolArgsTemplate\n    ISODate: # Needs emit method\n        id: \"ISODate\"\n        code: 200\n        callable: *constructor\n        args:\n            - [ *StringType, null ]\n        type: *DateType\n        attr:\n            now:\n                id: \"now\"\n                callable: *constructor\n                args: []\n                type: *DateType\n                attr: {}\n                template: *DateSymbolNowTemplate\n                argsTemplate: *DateSymbolNowArgsTemplate\n        template: *DateSymbolTemplate\n        argsTemplate: *DateSymbolArgsTemplate\n    RegExp: # Needs process method\n        id: \"RegExp\"\n        code: 8\n        callable: *constructor\n        args:\n            - [ *StringType, *RegexType ]\n            - [ *StringType, null ]\n        type: *RegExpType\n        attr: {} # TODO: no built-in regex funcs added yet\n        template: *RegExpSymbolTemplate\n        argsTemplate: *RegExpSymbolArgsTemplate\n\n"},55786:e=>{e.exports="SymbolTypes:\n    VAR: &var 0\n    CONSTRUCTOR: &constructor 1\n    FUNC: &func 2\n# Internal patterns to save typing\n__type: &__type\n    id: null\n    callable: *var\n    args: null\n    type: null\n    attr: {}\n    template: null\n    argsTemplate: null\n__func: &__func\n    callable: *func\n    args: []\n    attr: {}\n    template: null\n    argsTemplate: null\n\n#############################################\n#             Sample Templates              #\n#                                           #\n# The expected arguments are commented next #\n# to the template itself. Currently all are #\n# set to null, but to define a function     #\n# replace 'null' with '!!js/function > \\n   #\n# and a function defined below.             #\n#                                           #\n# See the other template files for examples #\n#                                           #\n#               Good to know:               #\n# lhs is left-hand-side of the expression   #\n# rhs is right-hand-side of the expression  #\n# All args are strings unless noted         #\n#    - arg? is boolean                      #\n#    - arg# is number                       #\n#                                           #\n#############################################\nTemplates:\n    ########\n    # Misc #\n    ########\n\n    # Filter out regex flags that have translations or are unsupported.\n    RegexFlags: &RegexFlags\n        i: 'i'\n        m: 'm'\n        u: ''\n        y: ''\n        g: ''\n    BSONRegexFlags: &BSONRegexFlags\n        i: 'i'\n        m: 'm'\n        x: 'x'\n        s: ''\n        l: ''\n        u: ''\n\n    #############################################\n    #                  Syntax                   #\n    #                                           #\n    # Templates for language syntax expressions #\n    #                                           #\n    #############################################\n\n    DriverTemplate: &DriverTemplate !!js/function >\n        (spec) => {\n            comment = '# Requires the MongoDB Ruby Driver\\n# https://docs.mongodb.com/ruby-driver/master/';\n\n            const getKey = k => {\n                let translateKey = {\n                    project: 'projection',\n                    maxTimeMS: 'max_time_ms'\n                }\n                return k in translateKey ? translateKey[k] : k\n            };\n            const options = spec.options;\n            const filter = spec.filter || {}\n            delete spec.options;\n            delete spec.filter\n\n            const connect = `client = Mongo::Client.new('${options.uri}', :database => '${options.database}')`;\n            const coll = `client.database['${options.collection}']`;\n\n            if ('aggregation' in spec) {\n                return `${comment}\\n\\n${connect}\\nresult = ${coll}.aggregate(${spec.aggregation})`;\n            }\n\n            const vars = Object.keys(spec).reduce(\n                (result, k) => {\n                    return `${result}\\n${getKey(k)} = ${spec[k]}`;\n                },\n                connect\n            );\n\n            const args = Object.keys(spec).reduce(\n                (result, k) => {\n                    const divider = result === '' ? '' : ',\\n';\n                    return `${result}${divider}  ${getKey(k)}: ${getKey(k)}`;\n                },\n                ''\n            );\n\n            const cmd = `result = ${coll}.find(${filter}${args ? `, {\\n${args}\\n}` : ''})`;\n\n            return `${comment}\\n\\n${vars}\\n\\n${cmd}`;\n        }\n    EqualitySyntaxTemplate: &EqualitySyntaxTemplate !!js/function >\n        (lhs, op, rhs) => {\n            if (op.includes('is')) {\n                let not = op.includes('not') ? '!' : ''\n                return `${not}${lhs}.equal?(${rhs})`\n            } else if (op.includes('!') || op.includes('not')) {\n                return `${lhs} != ${rhs}`;\n            } else if (op === '==' || op === '===') {\n                return `${lhs} == ${rhs}`;\n            }\n            return `${lhs} ${op} ${rhs}`;\n        }\n    InSyntaxTemplate: &InSyntaxTemplate !!js/function >\n        (lhs, op, rhs) => {\n            let str = '';\n            if (op.includes('!') || op.includes('not')) {\n                str = '!';\n            }\n            return `${str}${rhs}.include?(${lhs})`\n        }\n    AndSyntaxTemplate: &AndSyntaxTemplate !!js/function >\n        (args) => {\n            return args.join(' && ');\n        }\n    OrSyntaxTemplate: &OrSyntaxTemplate !!js/function >\n        (args) => {\n            return args.join(' || ');\n        }\n    NotSyntaxTemplate: &NotSyntaxTemplate !!js/function >\n        (arg) => {\n            return `!${arg}`;\n        }\n    UnarySyntaxTemplate: &UnarySyntaxTemplate null\n    BinarySyntaxTemplate: &BinarySyntaxTemplate !!js/function >\n        (args) => {\n            return args.reduce((s, op, i, arr) => {\n                if (i % 2 === 0) {\n                    return s;\n                }\n                const rhs = arr[i + 1];\n                switch(op) {\n                    case '//':\n                        return `${s}.div(${rhs})`;\n                    case '**':\n                        return `${s} ** ${rhs}`;\n                    default:\n                        return `${s} ${op} ${rhs}`;\n                }\n            }, args[0]);\n        }\n    ParensSyntaxTemplate: &ParensSyntaxTemplate null\n    EosTemplate: &EosSyntaxTemplate null # No args. End-of-line\n    EofTemplate: &EofSyntaxTemplate null # No args. End-of-file\n    FloorDivTemplate: &FloorDivSyntaxTemplate null # Args: lhs, rhs\n    PowerTemplate: &PowerSyntaxTemplate null # Args: lhs, rhs\n    NewTemplate: &NewSyntaxTemplate null # Args: expression, skip?, code# [to check if meant to be skipped]\n\n    #############################################\n    #               Literal Types               #\n    #                                           #\n    # Templates for literal type instance. Most #\n    # get passed the literal itself as an arg.  #\n    #                                           #\n    #############################################\n    StringTypeTemplate: &StringTypeTemplate  !!js/function >\n        (str) => {\n          let newStr = str;\n          if (\n            (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n            (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n            newStr = str.substr(1, str.length - 2);\n          }\n          return `'${newStr.replace(/\\\\([\\s\\S])|(')/g, '\\\\$1$2')}'`;\n        }\n    RegexTypeTemplate: &RegexTypeTemplate !!js/function >\n        (pattern, flags) => {\n            const str = pattern;\n            let newStr = str;\n            if (\n                (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                newStr = str.substr(1, str.length - 2);\n            }\n            pattern = `${newStr.replace(/\\\\([\\s\\S])/g, '\\\\$1')}`;\n            return `/${pattern}/${flags ? flags : ''}`;\n        }\n    BoolTypeTemplate: &BoolTypeTemplate !!js/function >\n        (literal) => {\n            return literal.toLowerCase();\n        }\n    IntegerTypeTemplate: &IntegerTypeTemplate null # args: literal, argType (i.e. '_string', '_decimal' etc)\n    DecimalTypeTemplate: &DecimalTypeTemplate null # args: literal, argType\n    LongBasicTypeTemplate: &LongBasicTypeTemplate null # args: literal, argType\n    HexTypeTemplate: &HexTypeTemplate null # args: literal, argType\n    OctalTypeTemplate: &OctalTypeTemplate !!js/function >\n        (literal) => {\n            let offset = 0;\n\n            if (\n                literal.charAt(0) === '0' &&\n                (literal.charAt(1) === '0' || literal.charAt(1) === 'o' || literal.charAt(1) === 'O')\n            ) {\n                offset = 2;\n            } else if (literal.charAt(0) === '0') {\n                offset = 1;\n            }\n\n            literal = `0o${literal.substr(offset, literal.length - 1)}`;\n\n            return literal;\n        }\n    NumericTypeTemplate: &NumericTypeTemplate null # args: literal, argType\n    ArrayTypeTemplate: &ArrayTypeTemplate !!js/function >\n        (literal, depth) => {\n            depth++;\n            if (literal === '') {\n                return '[]'\n            }\n            const indent = '\\n' + '  '.repeat(depth);\n            const closingIndent = '\\n' + '  '.repeat(depth - 1);\n\n            return `[${indent}${literal}${closingIndent}]`;\n        }\n    ArrayTypeArgsTemplate: &ArrayTypeArgsTemplate null # Args: single array element, nestedness, lastElement? (note: not being used atm)\n    NullTypeTemplate: &NullTypeTemplate !!js/function >\n        () => {\n            return 'nil';\n        }\n    UndefinedTypeTemplate: &UndefinedTypeTemplate !!js/function >\n        () => {\n            return 'nil';\n        }\n    ObjectTypeTemplate: &ObjectTypeTemplate !!js/function >\n        (literal) => {\n            if (literal === '') {\n                return '{}';\n            }\n            return literal;\n        }\n    ObjectTypeArgsTemplate: &ObjectTypeArgsTemplate !!js/function >\n        (args, depth) => {\n            if (args.length === 0) {\n                return '{}';\n            }\n            depth++;\n            const indent = '\\n' + '  '.repeat(depth);\n            const closingIndent = '\\n' + '  '.repeat(depth - 1);\n            const singleStringify = (str) => {\n                let newStr = str;\n                if (\n                  (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                  (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                    newStr = str.substr(1, str.length - 2);\n                }\n                return `'${newStr.replace(/\\\\([\\s\\S])|(')/g, '\\\\$1$2')}'`;\n            }\n            const pairs = args.map((arg) => {\n                return `${indent}${singleStringify(arg[0])} => ${arg[1]}`;\n            }).join(',');\n\n            return `{${pairs}${closingIndent}}`\n        }\n\n    #############################################\n    #               Symbols                     #\n    #                                           #\n    # Templates for symbols, can be either      #\n    # functions or variables.                   #\n    #                                           #\n    # The *SymbolTemplates return names and     #\n    # usually don't take any arguments. The     #\n    # *SymbolArgsTemplates are invoked for func #\n    # calls. The first argument is always the   #\n    # lhs, i.e. the symbol returned from the    #\n    # corresponding SymbolTemplate. The rest of #\n    # the arguments are the processed arguments #\n    # passed to the original function.          #\n    #                                           #\n    #############################################\n    CodeSymbolTemplate: &CodeSymbolTemplate !!js/function >\n        () => {\n            return 'BSON::Code'\n        }\n    CodeSymbolArgsTemplate: &CodeSymbolArgsTemplate !!js/function >\n        (lhs, code, scope) => {\n            const singleStringify = (str) => {\n                let newStr = str;\n                if (\n                    (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                    (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                    newStr = str.substr(1, str.length - 2);\n                }\n                return `'${newStr.replace(/\\\\([\\s\\S])|(')/g, '\\\\$1$2')}'`;\n            }\n            if (code === undefined) {\n                return '.new'\n            }\n            return !scope ? `.new(${singleStringify(code)})` : `WithScope.new(${singleStringify(code)}, ${scope})`\n        }\n    ObjectIdSymbolTemplate: &ObjectIdSymbolTemplate !!js/function >\n        () => {\n            return 'BSON::ObjectId';\n        }\n    ObjectIdSymbolArgsTemplate: &ObjectIdSymbolArgsTemplate !!js/function >\n        (lhs, id) => {\n            const singleStringify = (str) => {\n                let newStr = str;\n                if (\n                    (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                    (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                    newStr = str.substr(1, str.length - 2);\n                }\n                return `'${newStr.replace(/\\\\([\\s\\S])|(')/g, '\\\\$1$2')}'`;\n            }\n            return !id ? '.new' : `(${singleStringify(id)})`;\n        }\n    BinarySymbolTemplate: &BinarySymbolTemplate null\n    BinarySymbolArgsTemplate: &BinarySymbolArgsTemplate null\n    BinarySymbolSubtypeDefaultTemplate: &BinarySymbolSubtypeDefaultTemplate null\n    BinarySymbolSubtypeFunctionTemplate: &BinarySymbolSubtypeFunctionTemplate null\n    BinarySymbolSubtypeByteArrayTemplate: &BinarySymbolSubtypeByteArrayTemplate null\n    BinarySymbolSubtypeUuidOldTemplate: &BinarySymbolSubtypeUuidOldTemplate null\n    BinarySymbolSubtypeUuidTemplate: &BinarySymbolSubtypeUuidTemplate null\n    BinarySymbolSubtypeMd5Template: &BinarySymbolSubtypeMd5Template null\n    BinarySymbolSubtypeUserDefinedTemplate: &BinarySymbolSubtypeUserDefinedTemplate null\n    DBRefSymbolTemplate: &DBRefSymbolTemplate !!js/function >\n        () => {\n            return 'BSON::DBRef'\n        }\n    DBRefSymbolArgsTemplate: &DBRefSymbolArgsTemplate !!js/function >\n        (lhs, coll, id, db) => {\n            const singleStringify = (str) => {\n                let newStr = str;\n                if (\n                    (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                    (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                    newStr = str.substr(1, str.length - 2);\n                }\n                return `'${newStr.replace(/\\\\([\\s\\S])|(')/g, '\\\\$1$2')}'`;\n            }\n\n            let db_string = db ? `,\\n  '$db' => ${singleStringify(db)}` : ''\n            return `.new(\\n  '$ref' => ${singleStringify(coll)},\\n  '$id' => ${id}${db_string}\\n)`\n        }\n\n    DoubleSymbolTemplate: &DoubleSymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    DoubleSymbolArgsTemplate: &DoubleSymbolArgsTemplate !!js/function >\n        (lhs, arg, type) => {\n            arg = arg === undefined ? 0 : arg;\n            if (type === '_decimal' || type === '_double') {\n                return arg;\n            }\n            return `${arg}.to_f`;\n        }\n    Int32SymbolTemplate: &Int32SymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    Int32SymbolArgsTemplate: &Int32SymbolArgsTemplate !!js/function >\n        (lhs, arg, type) => {\n            arg = arg === undefined ? 0 : arg;\n            if (type === '_integer' || type === '_long') {\n                return arg;\n            }\n            return `${arg}.to_i`;\n        }\n    LongSymbolTemplate: &LongSymbolTemplate !!js/function >\n        () => {\n            return ''\n        }\n    LongSymbolArgsTemplate: &LongSymbolArgsTemplate !!js/function >\n        (lhs, arg, type) => {\n            arg = arg === undefined ? 0 : arg;\n            if (type === '_integer' || type === '_long') {\n                return arg;\n            }\n            return `${arg}.to_i`;\n        }\n    RegExpSymbolTemplate: &RegExpSymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    RegExpSymbolArgsTemplate: &RegExpSymbolArgsTemplate null # Args: lhs, pattern, flags\n    SymbolSymbolTemplate: &SymbolSymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    SymbolSymbolArgsTemplate: &SymbolSymbolArgsTemplate !!js/function >\n        (lhs, arg) => {\n            arg = arg === undefined ? '' : arg;\n            const str = arg.toString();\n            let newStr = str;\n            if (\n                (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                newStr = str.substr(1, str.length - 2);\n                return `:'${newStr}'`;\n            } else {\n                return `${newStr}.to_sym`;\n            }\n        }\n    BSONRegExpSymbolTemplate: &BSONRegExpSymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    BSONRegExpSymbolArgsTemplate: &BSONRegExpSymbolArgsTemplate !!js/function >\n        (lhs, pattern, flags) => {\n            const singleStringify = (str) => {\n                let newStr = str;\n                if (\n                    (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                    (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                    newStr = str.substr(1, str.length - 2);\n                }\n                return `${newStr.replace(/\\\\([\\s\\S])/g, '\\\\$1')}`;\n            }\n            return `/${singleStringify(pattern)}/${flags ? singleStringify(flags) : ''}`;\n        }\n    Decimal128SymbolTemplate: &Decimal128SymbolTemplate !!js/function >\n        () => {\n            return 'BSON::Decimal128';\n        }\n    Decimal128SymbolArgsTemplate: &Decimal128SymbolArgsTemplate !!js/function >\n        (lhs, arg) => {\n            arg = arg === undefined ? '0' : arg.toString();\n            if (arg.charAt(0) === '\\'' && arg.charAt(arg.length - 1) === '\\'') {\n                return `.new(${arg})`;\n            }\n            return `.new('${arg}')`;\n        }\n    MinKeySymbolTemplate: &MinKeySymbolTemplate !!js/function >\n        () => {\n            return 'BSON::MinKey';\n        }\n    MinKeySymbolArgsTemplate: &MinKeySymbolArgsTemplate !!js/function >\n        () => {\n            return '.new';\n        }\n    MaxKeySymbolTemplate: &MaxKeySymbolTemplate !!js/function >\n        () => {\n            return 'BSON::MaxKey';\n        }\n    MaxKeySymbolArgsTemplate: &MaxKeySymbolArgsTemplate !!js/function >\n        () => {\n            return '.new';\n        }\n    TimestampSymbolTemplate: &TimestampSymbolTemplate !!js/function >\n        () => {\n            return 'BSON::Timestamp';\n        }\n    TimestampSymbolArgsTemplate: &TimestampSymbolArgsTemplate !!js/function >\n        (lhs, arg1, arg2) => {\n            return `.new(${arg1 === undefined ? 0 : arg1}, ${arg2 === undefined ? 0 : arg2})`;\n        }\n    # non bson-specific\n    NumberSymbolTemplate: &NumberSymbolTemplate !!js/function >\n        () => {\n            return '';\n        }\n    NumberSymbolArgsTemplate: &NumberSymbolArgsTemplate !!js/function >\n        (lhs, arg, type) => {\n            arg = arg === undefined ? 0 : arg;\n            const str = arg.toString();\n            let newStr = str;\n            if (\n                (str.charAt(0) === '\\'' && str.charAt(str.length - 1) === '\\'') ||\n                (str.charAt(0) === '\"' && str.charAt(str.length - 1) === '\"')) {\n                newStr = str.substr(1, str.length - 2);\n                return `'${newStr}'.to_f`;\n            } else if (type === '_decimal' || type === '_double') {\n                return newStr;\n            } else {\n                return `${newStr}.to_f`;\n            }\n        }\n    DateSymbolTemplate: &DateSymbolTemplate !!js/function >\n        () => {\n            return 'Time';\n        }\n    DateSymbolArgsTemplate: &DateSymbolArgsTemplate !!js/function >\n        (lhs, date, isString) => {\n            const toStr = isString ? '.strftime(\\'%a %b %d %Y %H:%M:%S %Z\\')' : '';\n\n            if (date === null) {\n                return `${lhs}.new.utc${toStr}`;\n            }\n\n            const dateStr = [\n                date.getUTCFullYear(),\n                date.getUTCMonth() + 1,\n                date.getUTCDate(),\n                date.getUTCHours(),\n                date.getUTCMinutes(),\n                date.getUTCSeconds()\n            ].join(', ');\n\n            return `${lhs}.utc(${dateStr})${toStr}`;\n        }\n\n    DateSymbolNowTemplate: &DateSymbolNowTemplate !!js/function >\n        () => {\n            return 'Time.now.utc';\n        }\n    DateSymbolNowArgsTemplate: &DateSymbolNowArgsTemplate !!js/function >\n        (args) => {\n            return '';\n        }\n\n    #############################################\n    #         Object Attributes/Methods         #\n    #                                           #\n    # These're variables or functions called on #\n    # instantiated objects. For example,        #\n    # ObjectId().isValid() or Timestamp().t     #\n    #                                           #\n    # They follow the same pattern with the\n    # *Template/*ArgsTemplates: usually no args #\n    # to the Template and lhs plus any original #\n    # arguments to the ArgsTemplate.            #\n    #                                           #\n    #############################################\n    CodeCodeTemplate: &CodeCodeTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.javascript`;\n        }\n    CodeCodeArgsTemplate: &CodeCodeArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    CodeScopeTemplate: &CodeScopeTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.scope`;\n        }\n    CodeScopeArgsTemplate: &CodeScopeArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    ObjectIdToStringTemplate: &ObjectIdToStringTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.to_s`;\n        }\n    ObjectIdToStringArgsTemplate: &ObjectIdToStringArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    ObjectIdEqualsTemplate: &ObjectIdEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} == `;\n        }\n    ObjectIdEqualsArgsTemplate: &ObjectIdEqualsArgsTemplate !!js/function >\n        (arg) => {\n            return `${arg}`;\n        }\n    ObjectIdGetTimestampTemplate: &ObjectIdGetTimestampTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.to_time`;\n        }\n    ObjectIdGetTimestampArgsTemplate: &ObjectIdGetTimestampArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    ObjectIdIsValidTemplate: &ObjectIdIsValidTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.legal?`\n        }\n    ObjectIdIsValidArgsTemplate: &ObjectIdIsValidArgsTemplate null\n    BinaryValueTemplate: &BinaryValueTemplate null\n    BinaryValueArgsTemplate: &BinaryValueArgsTemplate null\n    BinaryLengthTemplate: &BinaryLengthTemplate null\n    BinaryLengthArgsTemplate: &BinaryLengthArgsTemplate null\n    BinaryToStringTemplate: &BinaryToStringTemplate null\n    BinaryToStringArgsTemplate: &BinaryToStringArgsTemplate null\n    BinarySubtypeTemplate: &BinarySubtypeTemplate null\n    BinarySubtypeArgsTemplate: &BinarySubtypeArgsTemplate null\n    DBRefGetDBTemplate: &DBRefGetDBTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.database`;\n        }\n    DBRefGetCollectionTemplate: &DBRefGetCollectionTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.collection`;\n        }\n    DBRefGetIdTemplate: &DBRefGetIdTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.id`;\n        }\n    DBRefGetDBArgsTemplate: &DBRefGetDBArgsTemplate !!js/function >\n        (lhs) => {\n            return '';\n        }\n    DBRefGetCollectionArgsTemplate: &DBRefGetCollectionArgsTemplate !!js/function >\n        (lhs) => {\n            return '';\n        }\n    DBRefGetIdArgsTemplate: &DBRefGetIdArgsTemplate !!js/function >\n        (lhs) => {\n            return '';\n        }\n    DBRefToStringTemplate: &DBRefToStringTemplate !!js/function >\n        (lhs) => {\n            return '${lhs}.to_s';\n        }\n    DBRefToStringArgsTemplate: &DBRefToStringArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    DoubleValueOfTemplate: &DoubleValueOfTemplate null\n    DoubleValueOfArgsTemplate: &DoubleValueOfArgsTemplate null\n    Int32ValueOfTemplate: &Int32ValueOfTemplate null\n    Int32ValueOfArgsTemplate: &Int32ValueOfArgsTemplate null\n    Int32ToStringTemplate: &Int32ToStringTemplate null\n    Int32ToStringArgsTemplate: &Int32ToStringArgsTemplate null\n    LongEqualsTemplate: &LongEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} ==`;\n        }\n    LongEqualsArgsTemplate: &LongEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongToIntTemplate: &LongToIntTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}`;\n        }\n    LongToIntArgsTemplate: &LongToIntArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongToStringTemplate: &LongToStringTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.to_s`;\n        }\n    LongToStringArgsTemplate: &LongToStringArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongToNumberTemplate: &LongToNumberTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.to_f`;\n        }\n    LongToNumberArgsTemplate: &LongToNumberArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongAddTemplate: &LongAddTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} +`;\n        }\n    LongAddArgsTemplate: &LongAddArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongSubtractTemplate: &LongSubtractTemplate !!js/function >\n        (arg) => {\n            return `${arg} -`;\n        }\n    LongSubtractArgsTemplate: &LongSubtractArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongMultiplyTemplate: &LongMultiplyTemplate !!js/function >\n        (arg) => {\n            return `${arg} *`;\n        }\n    LongMultiplyArgsTemplate: &LongMultiplyArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongDivTemplate: &LongDivTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} /`;\n        }\n    LongDivArgsTemplate: &LongDivArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongModuloTemplate: &LongModuloTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} %`;\n        }\n    LongModuloArgsTemplate: &LongModuloArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongAndTemplate: &LongAndTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} &`;\n        }\n    LongAndArgsTemplate: &LongAndArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongOrTemplate: &LongOrTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} |`;\n        }\n    LongOrArgsTemplate: &LongOrArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongXorTemplate: &LongXorTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} ^`;\n        }\n    LongXorArgsTemplate: &LongXorArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongShiftLeftTemplate: &LongShiftLeftTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <<`;\n        }\n    LongShiftLeftArgsTemplate: &LongShiftLeftArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongShiftRightTemplate: &LongShiftRightTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >>`;\n        }\n    LongShiftRightArgsTemplate: &LongShiftRightArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongCompareTemplate: &LongCompareTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} -`;\n        }\n    LongCompareArgsTemplate: &LongCompareArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongIsOddTemplate: &LongIsOddTemplate !!js/function >\n        (lhs) => {\n            return `(${lhs} % 2) == 1`;\n        }\n    LongIsOddArgsTemplate: &LongIsOddArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongIsZeroTemplate: &LongIsZeroTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} == 0`;\n        }\n    LongIsZeroArgsTemplate: &LongIsZeroArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongIsNegativeTemplate: &LongIsNegativeTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} < 0`;\n        }\n    LongIsNegativeArgsTemplate: &LongIsNegativeArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongNegateTemplate: &LongNegateTemplate !!js/function >\n        () => {\n            return '-';\n        }\n    LongNegateArgsTemplate: &LongNegateArgsTemplate !!js/function >\n        (lhs) => {\n            return lhs;\n        }\n    LongNotTemplate: &LongNotTemplate !!js/function >\n        () => {\n            return '~';\n        }\n    LongNotArgsTemplate: &LongNotArgsTemplate !!js/function >\n        (lhs) => {\n            return lhs;\n        }\n    LongNotEqualsTemplate: &LongNotEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} !=`;\n        }\n    LongNotEqualsArgsTemplate: &LongNotEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongGreaterThanTemplate: &LongGreaterThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >`;\n        }\n    LongGreaterThanArgsTemplate: &LongGreaterThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongGreaterThanOrEqualTemplate: &LongGreaterThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >=`;\n        }\n    LongGreaterThanOrEqualArgsTemplate: &LongGreaterThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongLessThanTemplate: &LongLessThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <`;\n        }\n    LongLessThanArgsTemplate: &LongLessThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongLessThanOrEqualTemplate: &LongLessThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <=`;\n        }\n    LongLessThanOrEqualArgsTemplate: &LongLessThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return ` ${arg}`;\n        }\n    LongFloatApproxTemplate: &LongFloatApproxTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.to_f`;\n        }\n    LongTopTemplate: &LongTopTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >> 32`;\n        }\n    LongBottomTemplate: &LongBottomTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} & 0x0000ffff`;\n        }\n    TimestampToStringTemplate: &TimestampToStringTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.to_s`;\n        }\n    TimestampToStringArgsTemplate: &TimestampToStringArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    TimestampEqualsTemplate: &TimestampEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} == `;\n        }\n    TimestampEqualsArgsTemplate: &TimestampEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}`;\n        }\n    TimestampGetLowBitsTemplate: &TimestampGetLowBitsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.seconds`;\n        }\n    TimestampGetLowBitsArgsTemplate: &TimestampGetLowBitsArgsTemplate !!js/function >\n        () => {\n            return ''\n        }\n    TimestampGetHighBitsTemplate: &TimestampGetHighBitsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.increment`;\n        }\n    TimestampGetHighBitsArgsTemplate: &TimestampGetHighBitsArgsTemplate !!js/function >\n        () => {\n            return ''\n        }\n    TimestampTTemplate: &TimestampTTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.seconds`;\n        }\n    TimestampITemplate: &TimestampITemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.increment`;\n        }\n    TimestampAsDateTemplate: &TimestampAsDateTemplate !!js/function >\n        (lhs) => {\n            return `Time.at(${lhs}.increment).utc`;\n        }\n    TimestampAsDateArgsTemplate: &TimestampAsDateArgsTemplate null\n    TimestampCompareTemplate: &TimestampCompareTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <=> `;\n        }\n    TimestampCompareArgsTemplate: &TimestampCompareArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}`;\n        }\n    TimestampNotEqualsTemplate: &TimestampNotEqualsTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} != `;\n        }\n    TimestampNotEqualsArgsTemplate: &TimestampNotEqualsArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}`;\n        }\n    TimestampGreaterThanTemplate: &TimestampGreaterThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} > `;\n        }\n    TimestampGreaterThanArgsTemplate: &TimestampGreaterThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}`;\n        }\n    TimestampGreaterThanOrEqualTemplate: &TimestampGreaterThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} >= `;\n        }\n    TimestampGreaterThanOrEqualArgsTemplate: &TimestampGreaterThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}`;\n        }\n    TimestampLessThanTemplate: &TimestampLessThanTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} < `;\n        }\n    TimestampLessThanArgsTemplate: &TimestampLessThanArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}`;\n        }\n    TimestampLessThanOrEqualTemplate: &TimestampLessThanOrEqualTemplate !!js/function >\n        (lhs) => {\n            return `${lhs} <= `;\n        }\n    TimestampLessThanOrEqualArgsTemplate: &TimestampLessThanOrEqualArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}`;\n        }\n    SymbolValueOfTemplate: &SymbolValueOfTemplate !!js/function >\n        (lhs) => {\n            return lhs;\n        }\n    SymbolValueOfArgsTemplate: &SymbolValueOfArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    SymbolInspectTemplate: &SymbolInspectTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.inspect`;\n        }\n    SymbolInspectArgsTemplate: &SymbolInspectArgsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    SymbolToStringTemplate: &SymbolToStringTemplate !!js/function >\n        (lhs) => {\n            let extractRegex = (lhs) => {\n                let r = /^:'(.*)'$/;\n                let arr = r.exec(lhs);\n                return arr ? arr[1] : ''\n\n            }\n            let res = extractRegex(lhs)\n            return res ? `'${res}'` : `${lhs}.to_s`;\n        }\n    SymbolToStringArgsTemplate: &SymbolToStringArgsTemplate !!js/function >\n        (lhs) => {\n            return '';\n        }\n    Decimal128ToStringTemplate: &Decimal128ToStringTemplate !!js/function >\n        (lhs) => {\n            return `${lhs}.to_s`;\n        }\n    Decimal128ToStringArgsTemplate: &Decimal128ToStringArgsTemplate !!js/function >\n        (lhs) => {\n            return '';\n        }\n\n    #############################################\n    #         Symbol Attributes/Methods         #\n    #                                           #\n    # These're variables or functions called on #\n    # symbols. Also called bson-utils.          #\n    #                                           #\n    # They are basically the same thing as      #\n    # object attributes/methods, but need to be #\n    # distinguished since they are separate     #\n    # namespaces that happen to have the same   #\n    # name which is v confusing.                #\n    #                                           #\n    # For example, ObjectId().toString() is an  #\n    # object method, while ObjectId.fromString  #\n    # is a symbol attribute. These are two      #\n    # separate ObjectId related namespaces that #\n    # don't overlap.                            #\n    #                                           #\n    #############################################\n    LongSymbolMaxTemplate: &LongSymbolMaxTemplate !!js/function >\n        () => {\n            return '9223372036854775807';\n        }\n    LongSymbolMaxArgsTemplate: &LongSymbolMaxArgsTemplate null\n    LongSymbolMinTemplate: &LongSymbolMinTemplate !!js/function >\n        () => {\n            return '-9223372036854775808';\n        }\n    LongSymbolMinArgsTemplate: &LongSymbolMinArgsTemplate null\n    LongSymbolZeroTemplate: &LongSymbolZeroTemplate !!js/function >\n        () => {\n            return '0';\n        }\n    LongSymbolZeroArgsTemplate: &LongSymbolZeroArgsTemplate null\n    LongSymbolOneTemplate: &LongSymbolOneTemplate !!js/function >\n        () => {\n            return '1';\n        }\n    LongSymbolOneArgsTemplate: &LongSymbolOneArgsTemplate null\n    LongSymbolNegOneTemplate: &LongSymbolNegOneTemplate !!js/function >\n        () => {\n            return '-1';\n        }\n    LongSymbolNegOneArgsTemplate: &LongSymbolNegOneArgsTemplate null\n    LongSymbolFromBitsTemplate: &LongSymbolFromBitsTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongSymbolFromBitsArgsTemplate: &LongSymbolFromBitsArgsTemplate null\n    LongSymbolFromIntTemplate: &LongSymbolFromIntTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongSymbolFromIntArgsTemplate: &LongSymbolFromIntArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return arg;\n        }\n    LongSymbolFromNumberTemplate: &LongSymbolFromNumberTemplate null\n    LongSymbolFromNumberArgsTemplate: &LongSymbolFromNumberArgsTemplate null\n    LongSymbolFromStringTemplate: &LongSymbolFromStringTemplate !!js/function >\n        () => {\n            return '';\n        }\n    LongSymbolFromStringArgsTemplate: &LongSymbolFromStringArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `${arg}.to_i`;\n        }\n    Decimal128SymbolFromStringTemplate: &Decimal128SymbolFromStringTemplate !!js/function >\n        () => {\n            return 'BSON::Decimal128';\n        }\n    Decimal128SymbolFromStringArgsTemplate: &Decimal128SymbolFromStringArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `.new(${arg})`;\n        }\n    ObjectIdCreateFromHexStringTemplate: &ObjectIdCreateFromHexStringTemplate !!js/function >\n        () => {\n            return 'BSON::ObjectId';\n        }\n    ObjectIdCreateFromHexStringArgsTemplate: &ObjectIdCreateFromHexStringArgsTemplate !!js/function >\n        (lhs, arg) => {\n            return `(${arg})`;\n        }\n    ObjectIdCreateFromTimeTemplate: &ObjectIdCreateFromTimeTemplate !!js/function >\n        () => {\n            return 'BSON::ObjectId.from_time';\n        }\n    ObjectIdCreateFromTimeArgsTemplate: &ObjectIdCreateFromTimeArgsTemplate !!js/function >\n        (lhs, arg, isNumber) => {\n            if (!isNumber) {\n                return `(${arg})`;\n            }\n            return `(Time.at(${arg}))`;\n        }\n    # non bson-specific would go here, but there aren't any atm.\n\n    #############################################\n    #                 Imports                   #\n    #                                           #\n    # Each type has a 'code' that is consistent #\n    # between languages. The import templates   #\n    # for each code generate the required       #\n    # statement for each type. No args.         #\n    #                                           #\n    # The ImportTemplate collects everything    #\n    # into one statement.                       #\n    #                                           #\n    #############################################\n    ImportTemplate: &ImportTemplate !!js/function >\n        (args) => {\n            let set = new Set(Object.values(args))\n            if (set.has(`require 'mongo'`)) return `require 'mongo'`\n            return [...set].sort().join('\\n');\n        }\n    DriverImportTemplate: &DriverImportTemplate !!js/function >\n        () => {\n            return `require 'mongo'`\n        }\n    0ImportTemplate: &0ImportTemplate null\n    1ImportTemplate: &1ImportTemplate null\n    2ImportTemplate: &2ImportTemplate null\n    3ImportTemplate: &3ImportTemplate null\n    4ImportTemplate: &4ImportTemplate null\n    5ImportTemplate: &5ImportTemplate null\n    6ImportTemplate: &6ImportTemplate null\n    7ImportTemplate: &7ImportTemplate null\n    8ImportTemplate: &8ImportTemplate null\n    9ImportTemplate: &9ImportTemplate null\n    10ImportTemplate: &10ImportTemplate null\n    11ImportTemplate: &11ImportTemplate null\n    12ImportTemplate: &12ImportTemplate null\n    100ImportTemplate: &100ImportTemplate !!js/function >\n        () => {\n            return `require 'bson'`\n        }\n    101ImportTemplate: &101ImportTemplate !!js/function >\n        () => {\n            return `require 'bson'`\n        }\n    102ImportTemplate: &102ImportTemplate !!js/function >\n        () => {\n            return `require 'bson'`\n        }\n    103ImportTemplate: &103ImportTemplate !!js/function >\n        () => {\n            return `require 'bson'`\n        }\n    104ImportTemplate: &104ImportTemplate null\n    105ImportTemplate: &105ImportTemplate null\n    106ImportTemplate: &106ImportTemplate null\n    107ImportTemplate: &107ImportTemplate !!js/function >\n        () => {\n            return `require 'bson'`\n        }\n    108ImportTemplate: &108ImportTemplate !!js/function >\n        () => {\n            return `require 'bson'`\n        }\n    109ImportTemplate: &109ImportTemplate null\n    110ImportTemplate: &110ImportTemplate !!js/function >\n        () => {\n            return `require 'bson'`\n        }\n    111ImportTemplate: &111ImportTemplate null\n    112ImportTemplate: &112ImportTemplate !!js/function >\n        () => {\n            return `require 'bson'`\n        }\n    113ImportTemplate: &113ImportTemplate null\n    114ImportTemplate: &114ImportTemplate null\n    200ImportTemplate: &200ImportTemplate null\n    201ImportTemplate: &201ImportTemplate null\n    300ImportTemplate: &300ImportTemplate null\n    301ImportTemplate: &301ImportTemplate null\n    302ImportTemplate: &302ImportTemplate null\n    303ImportTemplate: &303ImportTemplate null\n    304ImportTemplate: &304ImportTemplate null\n    305ImportTemplate: &305ImportTemplate null\n    306ImportTemplate: &306ImportTemplate null\n# Universal types\n# Everything inherits from StringType because we haven't implemented any of them.\nBasicTypes:\n    # Universal basic types\n    _bool: &BoolType\n        <<: *__type\n        id: \"_bool\"\n        code: 0\n        template: *BoolTypeTemplate\n    _integer: &IntegerType\n        <<: *__type\n        id: \"_integer\"\n        code: 1\n        template: *IntegerTypeTemplate\n    _long: &LongBasicType\n        <<: *__type\n        id: \"_long\"\n        code: 2\n        template: *LongBasicTypeTemplate\n    _decimal: &DecimalType\n        <<: *__type\n        id: \"_decimal\"\n        code: 3\n        template: *DecimalTypeTemplate\n    _hex: &HexType\n        <<: *__type\n        id: \"_hex\"\n        code: 4\n        template: *HexTypeTemplate\n    _octal: &OctalType\n        <<: *__type\n        id: \"_octal\"\n        code: 5\n        template: *OctalTypeTemplate\n    _numeric: &NumericType\n        <<: *__type\n        id: \"_numeric\"\n        code: 6\n        template: *NumericTypeTemplate\n    _string: &StringType\n        <<: *__type\n        id: \"_string\"\n        code: 7\n        template: *StringTypeTemplate\n    _regex: &RegexType\n        <<: *__type\n        id: \"_regex\"\n        code: 8\n        template: *RegexTypeTemplate\n    _array: &ArrayType\n        <<: *__type\n        id: \"_array\"\n        code: 9\n        template: *ArrayTypeTemplate\n        argsTemplate: *ArrayTypeArgsTemplate\n    _object: &ObjectType\n        <<: *__type\n        id: \"_object\"\n        code: 10\n        template: *ObjectTypeTemplate\n        argsTemplate: *ObjectTypeArgsTemplate\n    _null: &NullType\n        <<: *__type\n        id: \"_null\"\n        code: 11\n        template: *NullTypeTemplate\n    _undefined: &UndefinedType\n        <<: *__type\n        id: \"_undefined\"\n        code: 12\n        template: *UndefinedTypeTemplate\n\nSyntax:\n    equality:\n        template: *EqualitySyntaxTemplate\n    in:\n        template: *InSyntaxTemplate\n    and:\n        template: *AndSyntaxTemplate\n    or:\n        template: *OrSyntaxTemplate\n    not:\n        template: *NotSyntaxTemplate\n    unary:\n        template: *UnarySyntaxTemplate\n    binary:\n        template: *BinarySyntaxTemplate\n    parens:\n        template: *ParensSyntaxTemplate\n    eos:\n        template: *EosSyntaxTemplate\n    eof:\n        template: *EofSyntaxTemplate\n    # The new template takes in expr, and an optional skip argument and optional\n    # id argument. The skip argument is a boolean that if true then doesn't add\n    # new. The code argument is the symbol code being called. The template will check\n    # if it is an exception, i.e. a type that is a constructor but may not use new.\n    new:\n        template: *NewSyntaxTemplate\n    # The regex flags that change symbols between languages can be defined here.\n    # Flags that aren't defined can be left blank and will be ignored.\n    regexFlags: *RegexFlags\n    bsonRegexFlags: *BSONRegexFlags\n    driver: *DriverTemplate\nImports:\n    import:\n        template: *ImportTemplate\n    driver:\n        template: *DriverImportTemplate\n    0:\n        template: *0ImportTemplate\n    1:\n        template: *1ImportTemplate\n    2:\n        template: *2ImportTemplate\n    3:\n        template: *3ImportTemplate\n    4:\n        template: *4ImportTemplate\n    5:\n        template: *5ImportTemplate\n    6:\n        template: *6ImportTemplate\n    7:\n        template: *7ImportTemplate\n    8:\n        template: *8ImportTemplate\n    9:\n        template: *9ImportTemplate\n    10:\n        template: *10ImportTemplate\n    11:\n        template: *11ImportTemplate\n    12:\n        template: *12ImportTemplate\n    100:\n        template: *100ImportTemplate\n    101:\n        template: *101ImportTemplate\n    102:\n        template: *102ImportTemplate\n    103:\n        template: *103ImportTemplate\n    104:\n        template: *104ImportTemplate\n    105:\n        template: *105ImportTemplate\n    106:\n        template: *106ImportTemplate\n    107:\n        template: *107ImportTemplate\n    108:\n        template: *108ImportTemplate\n    109:\n        template: *109ImportTemplate\n    110:\n        template: *110ImportTemplate\n    111:\n        template: *111ImportTemplate\n    112:\n        template: *112ImportTemplate\n    113:\n        template: *113ImportTemplate\n    114:\n        template: *114ImportTemplate\n    200:\n        template: *200ImportTemplate\n    201:\n        template: *201ImportTemplate\n    300:\n        template: *300ImportTemplate\n    301:\n        template: *301ImportTemplate\n    302:\n        template: *302ImportTemplate\n    303:\n        template: *303ImportTemplate\n    304:\n        template: *304ImportTemplate\n    305:\n        template: *305ImportTemplate\n    306:\n        template: *306ImportTemplate\nBsonTypes:\n    Code: &CodeType\n        <<: *__type\n        id: \"Code\"\n        code: 100\n        type: *ObjectType\n        attr:\n            code:\n                callable: *var\n                args: null\n                attr: null\n                id: \"code\"\n                type: *StringType\n                template: *CodeCodeTemplate\n                argsTemplate: *CodeCodeArgsTemplate\n            scope:\n                callable: *var\n                args: null\n                attr: null\n                id: \"scope\"\n                type: *StringType\n                template: *CodeScopeTemplate\n                argsTemplate: *CodeScopeArgsTemplate\n    ObjectId: &ObjectIdType\n        <<: *__type\n        id: \"ObjectId\"\n        code: 101\n        type: *ObjectType\n        attr:\n            toString:\n                <<: *__func\n                id: \"toString\"\n                type: *StringType\n                template: *ObjectIdToStringTemplate\n                argsTemplate: *ObjectIdToStringArgsTemplate\n            equals:\n                <<: *__func\n                id: \"equals\"\n                args:\n                    - [ \"ObjectId\" ]\n                type: *BoolType\n                template: *ObjectIdEqualsTemplate\n                argsTemplate: *ObjectIdEqualsArgsTemplate\n            getTimestamp:\n                <<: *__func\n                id: \"getTimestamp\"\n                type: *IntegerType\n                template: *ObjectIdGetTimestampTemplate\n                argsTemplate: *ObjectIdGetTimestampArgsTemplate\n    BinData: &BinaryType\n        <<: *__type\n        id: \"BinData\"\n        code: 102\n        type: *ObjectType\n        attr:\n            toString:\n                <<: *__func\n                id: \"toString\"\n                type: *StringType\n                template: *BinaryToStringTemplate\n                argsTemplate: *BinaryToStringArgsTemplate\n            base64:\n                <<: *__func\n                id: \"base64\"\n                type: *StringType\n                template: *BinaryValueTemplate\n                argsTemplate: *BinaryValueArgsTemplate\n            length:\n                <<: *__func\n                id: \"length\"\n                type: *IntegerType\n                template: *BinaryLengthTemplate\n                argsTemplate: *BinaryLengthArgsTemplate\n            subtype:\n                <<: *__func\n                id: \"subtype\"\n                type: *IntegerType\n                template: *BinarySubtypeTemplate\n                argsTemplate: *BinarySubtypeArgsTemplate\n    DBRef: &DBRefType\n        <<: *__type\n        id: \"DBRef\"\n        code: 103\n        type: *ObjectType\n        attr:\n            getDb:\n                <<: *__func\n                id: \"getDb\"\n                type: *StringType\n                template: *DBRefGetDBTemplate\n                argsTemplate: *DBRefGetDBArgsTemplate\n            $db:\n                callable: *var\n                args: null\n                attr: null\n                id: \"$db\"\n                type: *StringType\n                template: *DBRefGetDBTemplate\n                argsTemplate: *DBRefGetDBArgsTemplate\n            getCollection:\n                <<: *__func\n                id: \"getCollection\"\n                type: *StringType\n                template: *DBRefGetCollectionTemplate\n                argsTemplate: *DBRefGetCollectionArgsTemplate\n            getRef:\n                <<: *__func\n                id: \"getRef\"\n                type: *StringType\n                template: *DBRefGetCollectionTemplate\n                argsTemplate: *DBRefGetCollectionArgsTemplate\n            $ref:\n                callable: *var\n                args: null\n                attr: null\n                id: \"$ref\"\n                type: *StringType\n                template: *DBRefGetCollectionTemplate\n                argsTemplate: *DBRefGetCollectionArgsTemplate\n            getId:\n                <<: *__func\n                id: \"getId\"\n                type: *StringType\n                template: *DBRefGetIdTemplate\n                argsTemplate: *DBRefGetIdArgsTemplate\n            $id:\n                callable: *var\n                args: null\n                attr: null\n                id: \"$id\"\n                type: *StringType\n                template: *DBRefGetIdTemplate\n                argsTemplate: *DBRefGetIdArgsTemplate\n    NumberInt: &Int32Type\n        <<: *__type\n        id: \"NumberInt\"\n        code: 105\n        type: *ObjectType\n        attr: {}\n    NumberLong: &LongType\n        <<: *__type\n        id: \"NumberLong\"\n        code: 106\n        type: *ObjectType\n        attr:\n            toString:\n                <<: *__func\n                id: \"LongtoString\" # Needs process method\n                type: *StringType\n            top:\n                callable: *var\n                args: null\n                attr: null\n                id: \"top\"\n                type: *IntegerType\n                template: *LongTopTemplate\n                argsTemplate: null\n            bottom:\n                callable: *var\n                args: null\n                attr: null\n                id: \"bottom\"\n                type: *IntegerType\n                template: *LongBottomTemplate\n                argsTemplate: null\n            floatApprox:\n                callable: *var\n                args: null\n                attr: null\n                id: \"floatApprox\"\n                type: *IntegerType\n                template: *LongFloatApproxTemplate\n                argsTemplate: null\n    MinKeyType: &MinKeyType\n        <<: *__type\n        id: \"MinKey\"\n        code: 107\n        type: *ObjectType\n    MaxKeyType: &MaxKeyType\n        <<: *__type\n        id: \"MaxKey\"\n        code: 108\n        type: *ObjectType\n    Timestamp: &TimestampType\n        <<: *__type\n        id: \"TimestampFromShell\"\n        code: 110\n        type: *ObjectType\n        attr:\n            toString:\n                <<: *__func\n                id: \"toString\"\n                type: *StringType\n                template: *TimestampToStringTemplate\n                argsTemplate: *TimestampToStringArgsTemplate\n            getTime:\n                <<: *__func\n                id: \"getTime\"\n                type: *IntegerType\n                template: *TimestampGetLowBitsTemplate\n                argsTemplate: *TimestampGetLowBitsArgsTemplate\n            getInc:\n                <<: *__func\n                id: \"getInc\"\n                type: *IntegerType\n                template: *TimestampGetHighBitsTemplate\n                argsTemplate: *TimestampGetHighBitsArgsTemplate\n            t:\n                callable: *var\n                args: null\n                attr: null\n                id: \"getTime\"\n                type: *IntegerType\n                template: *TimestampTTemplate\n                argsTemplate: null\n            i:\n                callable: *var\n                args: null\n                attr: null\n                id: \"getInc\"\n                type: *IntegerType\n                template: *TimestampITemplate\n                argsTemplate: null\n    Symbol: &SymbolType\n        <<: *__type\n        id: \"Symbol\"\n        code: 111\n        type: *ObjectType\n    NumberDecimal: &Decimal128Type\n        <<: *__type\n        id: \"NumberDecimal\"\n        code: 112\n        type: *ObjectType\n        attr: {}\n    SUBTYPE_DEFAULT:\n        id: \"SUBTYPE_DEFAULT\"\n        callable: *var\n        args: null\n        code: 113\n        type: *IntegerType\n        template: *BinarySymbolSubtypeDefaultTemplate\n    SUBTYPE_FUNCTION:\n        id: \"SUBTYPE_FUNCTION\"\n        callable: *var\n        args: null\n        code: 113\n        type: *IntegerType\n        template: *BinarySymbolSubtypeFunctionTemplate\n    SUBTYPE_BYTE_ARRAY:\n        id: \"SUBTYPE_BYTE_ARRAY\"\n        callable: *var\n        args: null\n        code: 113\n        type: *IntegerType\n        template: *BinarySymbolSubtypeByteArrayTemplate\n    SUBTYPE_UUID_OLD:\n        id: \"SUBTYPE_UUID_OLD\"\n        callable: *var\n        args: null\n        code: 113\n        type: *IntegerType\n        template: *BinarySymbolSubtypeUuidOldTemplate\n    SUBTYPE_UUID:\n        id: \"SUBTYPE_UUID\"\n        callable: *var\n        args: null\n        code: 113\n        type: *IntegerType\n        template: *BinarySymbolSubtypeUuidTemplate\n    SUBTYPE_MD5:\n        id: \"SUBTYPE_MD5\"\n        callable: *var\n        args: null\n        code: 113\n        type: *IntegerType\n        template: *BinarySymbolSubtypeMd5Template\n    SUBTYPE_USER_DEFINED:\n        id: \"SUBTYPE_USER_DEFINED\"\n        callable: *var\n        args: null\n        code: 113\n        type: *IntegerType\n        template: *BinarySymbolSubtypeUserDefinedTemplate\nNativeTypes:\n    Date: &DateType\n        <<: *__type\n        id: \"Date\"\n        code: 200\n        type: *ObjectType\n        attr: {} # TODO: no built-in date methods added yet\n    RegExp: &RegExpType\n        <<: *__type\n        id: \"RegExp\"\n        code: 8\n        type: *ObjectType\n        attr: {}\n\n\n\n\nBsonSymbols:\n    Code: &CodeSymbol\n        id: \"Code\"\n        code: 100\n        callable: *constructor\n        args:\n            - [ *StringType, null ]\n            - [ *ObjectType, null ]\n        type: *CodeType\n        attr: {}\n        template: *CodeSymbolTemplate\n        argsTemplate: *CodeSymbolArgsTemplate\n    ObjectId: &ObjectIdSymbol\n        id: \"ObjectId\"\n        code: 101\n        callable: *constructor\n        args:\n            - [ *StringType, null ]\n        type: *ObjectIdType\n        attr:\n            fromDate:\n                <<: *__func\n                id: \"ObjectIdCreateFromTime\"\n                args:\n                    - [ *DateType ]\n                type: *ObjectIdType\n                template: *ObjectIdCreateFromTimeTemplate\n                argsTemplate: *ObjectIdCreateFromTimeArgsTemplate\n        template: *ObjectIdSymbolTemplate\n        argsTemplate: *ObjectIdSymbolArgsTemplate\n    BinData: &BinarySymbol\n        id: \"BinData\"\n        code: 102\n        callable: *constructor\n        args:\n            - [ *IntegerType ]\n            - [ *StringType ]\n        type: *BinaryType\n        attr: {}\n        template: *BinarySymbolTemplate\n        argsTemplate: *BinarySymbolArgsTemplate\n    DBRef:\n        id: \"DBRef\"\n        code: 103\n        callable: *constructor\n        args:\n            - [ *StringType ]\n            - [ *ObjectIdType ]\n            - [ *StringType, null ]\n        type: *DBRefType\n        attr: {}\n        template: *DBRefSymbolTemplate\n        argsTemplate: *DBRefSymbolArgsTemplate\n    NumberInt:\n        id: \"Int32\"\n        code: 105\n        callable: *constructor\n        args:\n            - [ *NumericType, *StringType, null ]\n        type: *Int32Type\n        attr: {}\n        template: *Int32SymbolTemplate\n        argsTemplate: *Int32SymbolArgsTemplate\n    NumberLong:\n        id: \"NumberLong\"\n        code: 106\n        callable: *constructor\n        args:\n            - [ *IntegerType, *StringType, null ]\n        type: *LongType\n        attr: {}\n        template: *LongSymbolTemplate\n        argsTemplate: *LongSymbolArgsTemplate\n    MinKey:\n        id: \"MinKey\"\n        code: 107\n        callable: *constructor\n        args: []\n        type: *MinKeyType\n        attr: {}\n        template: *MinKeySymbolTemplate\n        argsTemplate: *MinKeySymbolArgsTemplate\n    MaxKey:\n        id: \"MaxKey\"\n        code: 108\n        callable: *constructor\n        args: []\n        type: *MaxKeyType\n        attr: {}\n        template: *MaxKeySymbolTemplate\n        argsTemplate: *MaxKeySymbolArgsTemplate\n    Timestamp:\n        id: \"Timestamp\"\n        code: 110\n        callable: *constructor\n        args:\n            - [ *IntegerType, null ]\n            - [ *IntegerType, null ]\n        type: *TimestampType\n        attr: {}\n        template: *TimestampSymbolTemplate\n        argsTemplate: *TimestampSymbolArgsTemplate\n    Symbol:\n        id: \"Symbol\"\n        code: 111\n        callable: *constructor\n        args:\n            - [ *StringType ]\n        type: *SymbolType\n        attr: {}\n        template: *SymbolSymbolTemplate\n        argsTemplate: *SymbolSymbolArgsTemplate\n    NumberDecimal:\n        id: \"NumberDecimal\"\n        code: 112\n        callable: *constructor\n        args:\n            - [ *StringType, *NumericType, null ]\n        type: *Decimal128Type\n        attr: {}\n        template: *Decimal128SymbolTemplate\n        argsTemplate: *Decimal128SymbolArgsTemplate\n\nNativeSymbols:\n    Number:\n        id: \"Number\"\n        code: 2\n        callable: *constructor\n        args:\n            - [ *IntegerType, *StringType, null ]\n        type: *NumericType\n        attr: {} # TODO: no built-in number funcs added yet\n        template: *NumberSymbolTemplate\n        argsTemplate: *NumberSymbolArgsTemplate\n    Date: # Needs emit method\n        id: \"Date\"\n        code: 200\n        callable: *constructor\n        args:\n            - [ *StringType, *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n            - [ *NumericType, null ]\n        type: *DateType\n        attr: # TODO: add more date funcs?\n            now:\n                id: \"now\"\n                code: 200.1\n                callable: *func\n                args: []\n                type: *DateType\n                attr: {}\n                template: *DateSymbolNowTemplate\n                argsTemplate: *DateSymbolNowArgsTemplate\n        template: *DateSymbolTemplate\n        argsTemplate: *DateSymbolArgsTemplate\n    ISODate: # Needs emit method\n        id: \"ISODate\"\n        code: 200\n        callable: *constructor\n        args:\n            - [ *StringType, null ]\n        type: *DateType\n        attr:\n            now:\n                id: \"now\"\n                callable: *constructor\n                args: []\n                type: *DateType\n                attr: {}\n                template: *DateSymbolNowTemplate\n                argsTemplate: *DateSymbolNowArgsTemplate\n        template: *DateSymbolTemplate\n        argsTemplate: *DateSymbolArgsTemplate\n    RegExp: # Needs process method\n        id: \"RegExp\"\n        code: 8\n        callable: *constructor\n        args:\n            - [ *StringType, *RegexType ]\n            - [ *StringType, null ]\n        type: *RegExpType\n        attr: {} # TODO: no built-in regex funcs added yet\n        template: *RegExpSymbolTemplate\n        argsTemplate: *RegExpSymbolArgsTemplate\n\n"},3080:(e,t,n)=>{var r=n(31777),s=n(31777).Collection;e.exports=r,e.exports.Collection=s},1745:e=>{e.exports={getProperties:function(e){const t=[];return e.collation&&t.push({name:"collation",options:e.collation}),"timeseries"===e.type&&t.push({name:"timeseries"}),"view"===e.type&&t.push({name:"view"}),e.capped&&t.push({name:"capped"}),e.readonly&&t.push({name:"read-only"}),t}}},31777:(e,t,n)=>{n(67526),n(33354),n(25870),n(10930),n(40574),n(94116),n(43267),n(74614),n(19852),n(44306),n(26077),n(71072),n(50183),n(18423);const r=n(71305),s=n(2326),{promisify:a}=n(73837),o=n(84935),{getProperties:i}=n(1745),l=new Map;function p(e){return l.has(e)||l.set(e,o(e)),l.get(e)}const m=new Map;function c(e){return{initialize(){e.forEach((e=>{if(e in this&&"function"==typeof this[e]){const n=this[e];this[e]=(t=n,function(...e){const n=this.isCollection?`${this.parent.cid}$$coll$$${t.name}`:`${this.cid}$$${t.name}`;if(m.has(n))return m.get(n);const r=t.call(this,...e).finally((()=>{m.delete(n)}));return m.set(n,r),r})}var t}))}}}function u(e){return e.parent??e.collection??null}function g(e,...t){let n=u(this);for(;n;)n.emit(e,...t),n=u(n)}function d(e,t){const n=u(e);return n?n.modelType===t?n:d(n,t):null}function h({readonly:e,view_on:t,collation:n,pipeline:r,validation:s}){return{readonly:e,view_on:t,collation:n,pipeline:r,validation:s}}const T=r.extend(c(["fetch"]),{modelType:"Collection",idAttribute:"_id",props:{_id:{type:"string",required:!0},type:{type:"string",default:"collection"},status:{type:"string",default:"initial"},statusError:{type:"string",default:null},readonly:"boolean",view_on:"string",collation:"object",pipeline:"array",validation:"object",is_capped:"boolean",max:"number",is_power_of_two:"boolean",index_sizes:"object",document_count:"number",document_size:"number",avg_document_size:"number",storage_size:"number",free_storage_size:"number",index_count:"number",index_size:"number",padding_factor:"number",extent_count:"number",extent_last_size:"number",flags_user:"number",max_document_size:"number",size:"number",index_details:"object",wired_tiger:"object"},derived:{ns:{deps:["_id"],fn(){return p(this._id).ns}},name:{deps:["_id"],fn(){return p(this._id).collection}},database:{deps:["_id"],fn(){return p(this._id).database}},system:{deps:["_id"],fn(){return p(this._id).system}},oplog:{deps:["_id"],fn(){return p(this._id).oplog}},command:{deps:["_id"],fn(){return p(this._id).command}},special:{deps:["_id"],fn(){return p(this._id).special}},specialish:{deps:["_id"],fn(){return p(this._id).specialish}},normal:{deps:["_id"],fn(){return p(this._id).normal}},isTimeSeries:{deps:["type"],fn(){return"timeseries"===this.type}},isView:{deps:["type"],fn(){return"view"===this.type}},sourceId:{deps:["view_on"],fn(){return this.view_on?`${this.database}.${this.view_on}`:null}},source:{deps:["sourceId"],fn(){return this.collection.get(this.sourceId)??null}},properties:{deps:["collation","type","capped","readonly"],fn(){return i(this)}}},async fetch({dataService:e,fetchInfo:t=!0,force:n=!1}){if(!function(e,t){return t||"ready"!==e}(this.status,n))return;const r=a(e.collectionStats.bind(e));try{const n="initial"===this.status?"fetching":"refreshing";this.set({status:n});const[s,a]=await Promise.all([r(this.database,this.name),t?e.collectionInfo(this.database,this.name):null]);this.set({status:"ready",statusError:null,...s,...a&&h(a)})}catch(e){throw this.set({status:"error",statusError:e.message}),e}},async fetchMetadata({dataService:e}){try{await this.fetch({dataService:e})}catch(e){if("MongoServerError"!==e.name)throw e}const t={namespace:this.ns,isReadonly:this.readonly,isTimeSeries:this.isTimeSeries};if(this.sourceId){try{await this.source.fetch({dataService:e})}catch(e){if("MongoServerError"!==e.name)throw e}Object.assign(t,{sourceName:this.source.ns,sourceReadonly:this.source.readonly,sourceViewon:this.source.sourceId,sourcePipeline:this.pipeline})}return t},toJSON(e={derived:!0}){const t=this.serialize(e);return t.source&&(t.source=t.source.toJSON()),t}}),y=s.extend(function(...e){return{initialize(...t){e.forEach((({initialize:e})=>{e.call(this,...t)}))}}}(c(["fetch"]),("collections",{initialize(){if(this.isCollection){this.on("add",g.bind(this,"add:collections")),this.on("remove",g.bind(this,"remove:collections")),this.on("change",g.bind(this,"change:collections"));for(const e of Object.keys(this.model.prototype._definition))this.on(`change:${e}`,g.bind(this,`change:collections.${e}`))}}})),{modelType:"CollectionCollection",mainIndex:"_id",indexes:["name"],comparator:"_id",model:T,async fetch({dataService:e,fetchInfo:t=!0}){const n=d(this,"Database")?.getId();if(!n)throw new Error(`Trying to fetch ${this.modelType} that doesn't have the Database parent model`);const r=d(this,"Instance");if(!r)throw new Error(`Trying to fetch ${this.modelType} that doesn't have the Instance parent model`);const s=await e.listCollections(n,{},{nameOnly:!t,privileges:r.auth.privileges});this.set(s.filter((e=>!1===p(e._id).system)).map((({_id:e,type:n,...r})=>({_id:e,type:n,...t&&h(r)}))))},toJSON(e={derived:!0}){return this.map((t=>t.toJSON(e)))}});y.prototype[Symbol.iterator]=function*(){for(let e=0,t=this.length;e<t;e++)yield this.at(e)},e.exports=T,e.exports.Collection=y},3711:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Aggregations:()=>vo,CreateViewPlugin:()=>ii,DuplicateViewPlugin:()=>gi,PipelineStorage:()=>kt,StageEditor:()=>ea,activate:()=>Si,configureCreateViewStore:()=>hi,configureStore:()=>Do,deactivate:()=>Ai,default:()=>Ei,metadata:()=>Ti});var r=n(2784),s=n(13980),a=n.n(s),o=n(16435),i=n(72779),l=n.n(i),p=n(50517),m=n(15251);const c={"restore-pipeline":"restore-pipeline-button-module-restore-pipeline__3go8H"};class u extends r.PureComponent{static displayName="RestorePipelineButtonComponent";static propTypes={clickHandler:a().func.isRequired};render(){const e=l()({btn:!0,"btn-xs":!0,"btn-default":!0,[c["restore-pipeline-button"]]:!0});return r.createElement("div",{className:l()(c["restore-pipeline"])},r.createElement(m.TextButton,{text:"Open",className:e,clickHandler:this.props.clickHandler}))}}const g=u,d={"delete-pipeline":"delete-pipeline-button-module-delete-pipeline__vdKCY"};class h extends r.PureComponent{static displayName="DeletePipelineButtonComponent";static propTypes={clickHandler:a().func.isRequired};render(){const e=l()({btn:!0,"btn-xs":!0,"btn-default":!0,[d["delete-pipeline-button"]]:!0});return r.createElement("div",{className:l()(d["delete-pipeline"])},r.createElement(m.IconButton,{title:"Delete",className:e,iconClassName:"fa fa-trash-o",clickHandler:this.props.clickHandler}))}}const T=h;var y=n(6909);const{track:f}=(0,y.createLoggerAndTelemetry)("COMPASS-AGGREGATIONS-UI");class b extends r.PureComponent{static displayName="SavePipelineCardComponent";static propTypes={restorePipelineModalToggle:a().func.isRequired,restorePipelineFrom:a().func.isRequired,deletePipeline:a().func.isRequired,objectID:a().string.isRequired,name:a().string.isRequired};handleDelete=()=>{this.props.deletePipeline(this.props.objectID),f("Aggregation Deleted",{id:this.props.objectID,screen:"aggregations"})};restoreClickHandler=()=>{this.props.restorePipelineFrom(this.props.objectID),this.props.restorePipelineModalToggle(1)};render(){return r.createElement("div",{className:l()("save-pipeline-card-module-save-pipeline-card__3wCNI"),"data-pipeline-object-id":this.props.objectID},r.createElement("div",{className:l()("save-pipeline-card-module-save-pipeline-card-title__1oG_q")},this.props.name),r.createElement(g,{clickHandler:this.restoreClickHandler}),r.createElement(T,{clickHandler:this.handleDelete}))}}const S=b;class A extends r.Component{static displayName="SavePipelineComponent";static propTypes={restorePipelineModalToggle:a().func.isRequired,restorePipelineFrom:a().func.isRequired,deletePipeline:a().func.isRequired,savedPipelinesListToggle:a().func.isRequired,savedPipeline:a().object.isRequired};handleSavedPipelinesClose=()=>{this.props.savedPipelinesListToggle(0)};render(){const e=this.props.savedPipeline.pipelines.map(((e,t)=>r.createElement(S,{restorePipelineModalToggle:this.props.restorePipelineModalToggle,restorePipelineFrom:this.props.restorePipelineFrom,deletePipeline:this.props.deletePipeline,name:e.name,objectID:e.id,key:t}))),t=l()({"save-pipeline-module-save-pipeline__2gWPq":!0,"save-pipeline-module-save-pipeline-is-visible__2ypeL":this.props.savedPipeline.isListVisible});return r.createElement("div",{className:t},r.createElement("div",{className:l()("save-pipeline-module-save-pipeline-header__30tPL")},r.createElement("div",{id:"saved-pipeline-header-title"},"Saved Pipelines"),r.createElement(m.IconButton,{title:"Close Saved Pipelines",className:"btn btn-xs btn-default",iconClassName:"fa fa-times",clickHandler:this.handleSavedPipelinesClose})),r.createElement("div",{className:l()("save-pipeline-module-save-pipeline-cards__hnQKW")},e))}}const E=A,_=6e4,x=1e5,I="3.4.0",L={$addFields:{link:"https://docs.mongodb.com/manual/reference/operator/aggregation/addFields/#pipe._S_addFields",tooltip:"Adds new field(s) to a document with a computed value, or reassigns an existing field(s) with a computed value."},$bucket:{link:"https://docs.mongodb.com/manual/reference/operator/aggregation/bucket/#pipe._S_bucket",tooltip:"Categorizes incoming documents into groups, called buckets, based on specified boundaries."},$bucketAuto:{link:"https://docs.mongodb.com/manual/reference/operator/aggregation/bucketAuto/#pipe._S_bucketAuto",tooltip:"Automatically categorizes documents into a specified number of buckets, attempting even distribution if possible."},$collStats:{link:"https://docs.mongodb.com/manual/reference/operator/aggregation/collStats/#pipe._S_collStats",tooltip:"Returns statistics regarding a collection or view."},$count:{link:"https://docs.mongodb.com/manual/reference/operator/aggregation/count/#pipe._S_count",tooltip:"Returns a count of the number of documents at this stage of the aggregation pipeline."},$currentOp:{link:"https://docs.mongodb.com/manual/reference/operator/aggregation/currentOp/#pipe._S_currentOp",tooltip:""},$densify:{link:"https://docs.mongodb.com/rapid/reference/operator/aggregation/densify",tooltip:"Creates new documents in a sequence of documents where certain values in a field are missing."},$documents:{link:"https://docs.mongodb.com/v5.1/reference/operator/aggregation/documents/#mongodb-pipeline-pipe.-documents",tooltip:"Returns literal documents from input values."},$facet:{link:"https://docs.mongodb.com/manual/reference/operator/aggregation/facet/#pipe._S_facet",tooltip:"Allows for multiple parallel aggregations to be specified."},$geoNear:{link:"https://docs.mongodb.com/manual/reference/operator/aggregation/geoNear/#pipe._S_geoNear",tooltip:"Returns documents based on proximity to a geospatial point."},$graphLookup:{link:"https://docs.mongodb.com/manual/reference/operator/aggregation/graphLookup/#pipe._S_graphLookup",tooltip:"Performs a recursive search on a collection. To each output document, adds a new array field that contains the traversal results of the recursive search for that document."},$group:{link:"https://docs.mongodb.com/manual/reference/operator/aggregation/group/#pipe._S_group",tooltip:"Groups documents by a specified expression."},$indexStats:{link:"https://docs.mongodb.com/manual/reference/operator/aggregation/indexStats/#pipe._S_indexStats",tooltip:"Returns statistics regarding the use of each index for the collection."},$limit:{link:"https://docs.mongodb.com/manual/reference/operator/aggregation/limit/#pipe._S_limit",tooltip:"Limits the number of documents that flow into subsequent stages."},$listLocalSessions:{link:"https://docs.mongodb.com/manual/reference/operator/aggregation/listLocalSessions/#pipe._S_listLocalSessions",tooltip:""},$listSessions:{link:"https://docs.mongodb.com/manual/reference/operator/aggregation/listSessions/#pipe._S_listSessions",tooltip:""},$lookup:{link:"https://docs.mongodb.com/manual/reference/operator/aggregation/lookup/#pipe._S_lookup",tooltip:"Performs a join between two collections."},$match:{link:"https://docs.mongodb.com/manual/reference/operator/aggregation/match/#pipe._S_match",tooltip:"Filters the document stream to allow only matching documents to pass through to subsequent stages."},$merge:{link:"https://docs.mongodb.com/manual/reference/operator/aggregation/merge/#pipe._S_merge",tooltip:"Merges the resulting documents into a collection, optionally overriding existing documents."},$out:{link:"https://docs.mongodb.com/manual/reference/operator/aggregation/out/#pipe._S_out",tooltip:"Writes the result of a pipeline to a new or existing collection."},$project:{link:"https://docs.mongodb.com/manual/reference/operator/aggregation/project/#pipe._S_project",tooltip:"Adds new field(s) to a document with a computed value, or reassigns an existing field(s) with a computed value. Unlike $addFields, $project can also remove fields."},$redact:{link:"https://docs.mongodb.com/manual/reference/operator/aggregation/redact/#pipe._S_redact",tooltip:"Restricts the content for each document based on information stored in the documents themselves."},$replaceRoot:{link:"https://docs.mongodb.com/manual/reference/operator/aggregation/replaceRoot/#pipe._S_replaceRoot",tooltip:"Replaces a document with the specified embedded document."},$replaceWith:{link:"https://docs.mongodb.com/manual/reference/operator/aggregation/replaceWith/",tooltip:"Replaces a document with the specified embedded document."},$sample:{link:"https://docs.mongodb.com/manual/reference/operator/aggregation/sample/#pipe._S_sample",tooltip:"Randomly selects the specified number of documents from its input."},$search:{link:"https://docs.atlas.mongodb.com/reference/full-text-search/query-syntax/#pipe._S_search",tooltip:"Performs a full-text search on the specified field(s)."},$searchMeta:{link:"https://docs.atlas.mongodb.com/reference/atlas-search/query-syntax-dupl/#mongodb-pipeline-pipe.-searchMeta",tooltip:"Performs a full-text search on the specified field(s) and gets back only the generated search meta data from a query."},$set:{link:"https://docs.mongodb.com/manual/reference/operator/aggregation/set/#pipe._S_set",tooltip:"Adds new fields to documents."},$skip:{link:"https://docs.mongodb.com/manual/reference/operator/aggregation/skip/#pipe._S_skip",tooltip:"Skips a specified number of documents before advancing to the next stage."},$sort:{link:"https://docs.mongodb.com/manual/reference/operator/aggregation/sort/#pipe._S_sort",tooltip:"Reorders the document stream by a specified sort key and direction."},$sortByCount:{link:"https://docs.mongodb.com/manual/reference/operator/aggregation/sortByCount/#pipe._S_sortByCount",tooltip:"Groups incoming documents based on the value of a specified expression, then computes the count of documents in each distinct group."},$unset:{link:"https://docs.mongodb.com/manual/reference/operator/aggregation/unset/",tooltip:"Removes or excludes fields from documents."},$unwind:{link:"https://docs.mongodb.com/manual/reference/operator/aggregation/unwind/#pipe._S_unwind",tooltip:"Outputs a new document for each element in a specified array. "}},v={container:"settings-module-container__2ihUV",header:"settings-module-header__FbwbY","header-title":"settings-module-header-title__1XbIM","header-btn-group":"settings-module-header-btn-group__1oKtN","input-group":"settings-module-input-group__3nyRH","input-control":"settings-module-input-control__2fAZJ","input-meta":"settings-module-input-meta__9h0h8"};class C extends r.PureComponent{static displayName="Settings";static propTypes={isAtlasDeployed:a().bool.isRequired,isCommenting:a().bool.isRequired,isExpanded:a().bool.isRequired,limit:a().number.isRequired,largeLimit:a().number.isRequired,maxTimeMS:a().number.isRequired,settings:a().object.isRequired,toggleSettingsIsExpanded:a().func.isRequired,toggleSettingsIsCommentMode:a().func.isRequired,setSettingsSampleSize:a().func.isRequired,setSettingsMaxTimeMS:a().func.isRequired,setSettingsLimit:a().func.isRequired,applySettings:a().func.isRequired,runStage:a().func.isRequired};onCancelClicked(e){e.preventDefault(),e.stopPropagation(),this.props.toggleSettingsIsExpanded()}onCommentModeClicked(){this.props.toggleSettingsIsCommentMode()}onSampleSizeChanged(e){this.props.setSettingsSampleSize(parseInt(e.currentTarget.value,10))}onMaxTimeoutChanged(e){this.props.setSettingsMaxTimeMS(parseInt(e.currentTarget.value,10))}onLimitChanged(e){this.props.setSettingsLimit(parseInt(e.currentTarget.value,10))}onApplyClicked(e){e.preventDefault(),e.stopPropagation(),this.props.applySettings(),this.props.runStage(0),this.props.toggleSettingsIsExpanded()}renderLargeLimit(){if(!this.props.isAtlasDeployed){let e=this.props.largeLimit;return this.props.settings.isDirty&&(e=this.props.settings.limit),r.createElement("div",{className:l()(v["input-group"])},r.createElement("div",{className:l()(v["input-meta"])},r.createElement(p.Label,{htmlFor:"aggregation-limit"},"Limit"),r.createElement(p.Description,{id:"aggregation-limit-description"},"Limits input documents before $group, $bucket, and $bucketAuto stages. Set a limit to make the collection run faster.")),r.createElement("div",{className:l()(v["input-control"])},r.createElement("input",{id:"aggregation-limit","aria-describedby":"aggregation-limit-description",type:"number",min:"0",placeholder:x,value:e,onChange:this.onLimitChanged.bind(this)})))}}renderFields(){let e=this.props.isCommenting,t=this.props.limit,n=this.props.maxTimeMS;return this.props.settings.isDirty&&(e=this.props.settings.isCommentMode,t=this.props.settings.sampleSize,n=this.props.settings.maxTimeMS),r.createElement("div",{className:l()(v.body)},r.createElement("div",{className:l()(v["input-group"])},r.createElement("div",{className:l()(v["input-meta"])},r.createElement(p.Label,{htmlFor:"aggregation-comment-mode"},"Comment Mode"),r.createElement(p.Description,{id:"aggregation-comment-mode-description"},"When enabled, adds helper comments to each stage. Only applies to new stages.")),r.createElement("div",{className:l()(v["input-control"])},r.createElement("input",{id:"aggregation-comment-mode","aria-describedby":"aggregation-comment-mode-description",type:"checkbox",checked:e,onChange:this.onCommentModeClicked.bind(this)}))),r.createElement("div",{className:l()(v["input-group"])},r.createElement("div",{className:l()(v["input-meta"])},r.createElement(p.Label,{htmlFor:"aggregation-sample-size"},"Number of Preview Documents"),r.createElement(p.Description,{id:"aggregation-sample-size-description"},"Specify the number of documents to show in the preview.")),r.createElement("div",{className:l()(v["input-control"])},r.createElement("input",{id:"aggregation-sample-size","aria-describedby":"aggregation-sample-size-description",type:"number",min:"0",placeholder:20,value:t,onChange:this.onSampleSizeChanged.bind(this)}))),r.createElement("div",{className:l()(v["input-group"])},r.createElement("div",{className:l()(v["input-meta"])},r.createElement(p.Label,{htmlFor:"aggregation-max-time-ms"},"Max Time"),r.createElement(p.Description,{id:"aggregation-max-time-ms-description"},"Specifies a cumulative time limit in milliseconds for processing operations on a cursor. Max timeout prevents long hang times.")),r.createElement("div",{className:l()(v["input-control"])},r.createElement("input",{id:"aggregation-max-time-ms","aria-describedby":"aggregation-max-time-ms-description",type:"number",placeholder:_,min:"0",step:"1000",value:n,onChange:this.onMaxTimeoutChanged.bind(this)}))),this.renderLargeLimit())}render(){return this.props.isExpanded?r.createElement("div",{className:l()(v.container)},r.createElement("div",{className:l()(v.header)},r.createElement("div",{className:l()(v["header-title"])},"Settings"),r.createElement("div",{className:l()(v["header-btn-group"])},r.createElement(m.TextButton,{id:"aggregations-settings-cancel",className:"btn btn-default btn-xs",text:"Cancel",clickHandler:this.onCancelClicked.bind(this)}),r.createElement(m.TextButton,{id:"aggregation-settings-apply",className:"btn btn-primary btn-xs",text:"Apply",clickHandler:this.onApplyClicked.bind(this)}))),this.renderFields()):null}}const R=C;var O=n(70602),N=n(13253),j=n(82752),w=n(63584);class D extends r.PureComponent{static displayName="OverviewToggler";static propTypes={isOverviewOn:a().bool.isRequired,toggleOverview:a().func.isRequired};render(){const e=this.props.isOverviewOn?"fa fa-angle-right":"fa fa-angle-down",t=this.props.isOverviewOn?"Expand all stages":"Collapse all stages";return r.createElement("div",{className:l()("overview-toggler-module-overview-toggler__3tSzV")},r.createElement("button",{type:"button",title:t,onClick:this.props.toggleOverview,className:"btn btn-default btn-xs"},r.createElement("i",{className:e,"aria-hidden":!0})))}}const B=D;class M extends r.PureComponent{static displayName="CollationCollapserComponent";static propTypes={isCollationExpanded:a().bool.isRequired,collationCollapseToggled:a().func.isRequired};render(){const e=this.props.isCollationExpanded?"fa fa-caret-down":"fa fa-caret-right",t=this.props.isCollationExpanded?"Collapse":"Expand";return r.createElement("div",{className:l()("collation-collapser-module-collation-collapser__3QGbW")},r.createElement("button",{"data-test-id":"toggle-collation",type:"button",title:t,onClick:this.props.collationCollapseToggled,className:"btn btn-default btn-xs"},r.createElement("i",{className:e,"aria-hidden":!0})," ","Collation"))}}const $=M;var k=n(98990),P=n.n(k);const F={"pipeline-builder-toolbar":"pipeline-builder-toolbar-module-pipeline-builder-toolbar__2NPdN","pipeline-builder-toolbar-update-view":"pipeline-builder-toolbar-module-pipeline-builder-toolbar-update-view__1ynU1","pipeline-builder-toolbar-add-wrapper":"pipeline-builder-toolbar-module-pipeline-builder-toolbar-add-wrapper__3JQK_","pipeline-builder-toolbar-name":"pipeline-builder-toolbar-module-pipeline-builder-toolbar-name__PuQaF","pipeline-builder-toolbar-open-saved-pipelines-button":"pipeline-builder-toolbar-module-pipeline-builder-toolbar-open-saved-pipelines-button__1yM4y","pipeline-builder-toolbar-new-button":"pipeline-builder-toolbar-module-pipeline-builder-toolbar-new-button__3Fzzs","pipeline-builder-toolbar-save-pipeline-button":"pipeline-builder-toolbar-module-pipeline-builder-toolbar-save-pipeline-button__2cuQK","pipeline-builder-toolbar-export-to-language":"pipeline-builder-toolbar-module-pipeline-builder-toolbar-export-to-language__3JmVc","is-modified":"pipeline-builder-toolbar-module-is-modified__1Iur2","export-icon":"pipeline-builder-toolbar-module-export-icon__36KDY"};class U extends r.PureComponent{static displayName="PipelineBuilderToolbarComponent";static propTypes={isAtlasDeployed:a().bool.isRequired,clonePipeline:a().func.isRequired,exportToLanguage:a().func.isRequired,setIsNewPipelineConfirm:a().func.isRequired,newPipelineFromText:a().func.isRequired,nameChanged:a().func.isRequired,name:a().string.isRequired,editViewName:a().string,setIsModified:a().func.isRequired,isModified:a().bool.isRequired,collationCollapseToggled:a().func.isRequired,isCollationExpanded:a().bool.isRequired,isOverviewOn:a().bool.isRequired,toggleOverview:a().func.isRequired,updateView:a().func.isRequired,serverVersion:a().string.isRequired,openCreateView:a().func.isRequired,savedPipeline:a().object.isRequired,savedPipelinesListToggle:a().func.isRequired,getSavedPipelines:a().func.isRequired,saveCurrentPipeline:a().func.isRequired,savingPipelineOpen:a().func.isRequired};onNameChange=e=>{this.props.nameChanged(e.target.value),this.props.setIsModified(!0)};onSaveClicked=()=>{this.isSavedPipeline()?(this.props.saveCurrentPipeline(),this.props.setIsModified(!1)):this.props.savingPipelineOpen()};onSaveAsClicked=()=>{this.isSavedPipeline()?this.props.savingPipelineOpen({name:this.props.name,isSaveAs:!0}):this.onSaveClicked()};handleSavedPipelinesOpen=()=>{this.props.getSavedPipelines(),this.props.savedPipelinesListToggle(1)};handleSavedPipelinesClose=()=>{this.props.savedPipelinesListToggle(0)};isSavedPipeline(){return""!==this.props.name}showNewPipelineConfirmModal(){this.props.setIsNewPipelineConfirm(!0)}renderIsModifiedIndicator(){const e=l()({[F["is-modified"]]:!0,[F["is-modified-on"]]:this.props.isModified});return this.props.isModified?r.createElement("div",{className:e},"- ",r.createElement("span",null,"Modified")):null}renderSaveDropdownMenu(){const e=[r.createElement(N.Z,{key:"save-pipeline-as","data-testid":"save-pipeline-as",onClick:this.onSaveAsClicked.bind(this)},"Save pipeline as")];return P().gte(this.props.serverVersion,I)&&e.push(r.createElement(N.Z,{key:"create-a-view","data-testid":"create-a-view",onClick:this.props.openCreateView},"Create a view")),e}renderSavedPipelineListToggler(){if(!this.props.isAtlasDeployed&&!this.props.editViewName){const e=this.props.savedPipeline.isListVisible?this.handleSavedPipelinesClose:this.handleSavedPipelinesOpen;return r.createElement("span",{"data-tip":"Open saved Pipelines","data-for":"open-saved-pipelines","data-place":"top","data-html":"true"},r.createElement(m.IconButton,{title:"Toggle Saved Pipelines",className:l()("btn","btn-xs","btn-default",F["pipeline-builder-toolbar-open-saved-pipelines-button"]),iconClassName:"fa fa-folder-open-o",clickHandler:e}),r.createElement(O.Tooltip,{id:"open-saved-pipelines"}))}}renderNewPipelineActionsItem(){if(!this.props.editViewName)return r.createElement("div",null,r.createElement(j.Z,{id:"new-pipeline-actions",className:"btn-group"},r.createElement(w.Z,{id:"create-new-pipeline",variant:"default",className:l()("btn-xs",F["pipeline-builder-toolbar-new-button"]),onClick:this.showNewPipelineConfirmModal.bind(this)},r.createElement("i",{className:"fa fa-plus-circle"})),r.createElement(j.Z.Toggle,{className:"btn-default btn-xs btn"}),r.createElement(j.Z.Menu,null,r.createElement(N.Z,{onClick:this.props.newPipelineFromText},"New Pipeline From Text"))))}renderSavedPipelineNameItem(){if(!this.props.isAtlasDeployed&&!this.props.editViewName)return r.createElement("div",{className:F["pipeline-builder-toolbar-add-wrapper"]},r.createElement("div",{className:F["pipeline-builder-toolbar-name"]},this.props.name||"Untitled"),this.renderIsModifiedIndicator())}renderSavePipelineActionsItem(){if(!this.props.isAtlasDeployed&&!this.props.editViewName){const e=l()({btn:!0,"btn-xs":!0,"btn-primary":!0,[F["pipeline-builder-toolbar-save-pipeline-button"]]:!0});return r.createElement("div",null,r.createElement(j.Z,{id:"save-pipeline-actions"},r.createElement(w.Z,{className:e,variant:"primary",onClick:this.onSaveClicked.bind(this)},"Save"),r.createElement(j.Z.Toggle,{className:"btn-xs btn btn-primary"}),r.createElement(j.Z.Menu,null,this.renderSaveDropdownMenu())))}}renderExportToLanguageItem(){return r.createElement("div",{className:F["pipeline-builder-toolbar-export-to-language"],"data-tip":"Export pipeline code to language","data-for":"export-to-language","data-place":"top","data-html":"true"},r.createElement(m.IconButton,{dataTestId:"export-to-language",className:"btn btn-xs btn-default",iconClassName:l()(F["export-icon"]),clickHandler:this.props.exportToLanguage,title:"Export To Language"}),r.createElement(O.Tooltip,{id:"export-to-language"}))}renderUpdateViewButton(){if(this.props.editViewName)return r.createElement("div",{className:l()(F["pipeline-builder-toolbar-update-view"])},r.createElement(m.TextButton,{className:"btn btn-xs btn-primary",text:"Update View",title:"Update View",disabled:!this.props.isModified,clickHandler:this.props.updateView}))}render(){return r.createElement("div",{className:F["pipeline-builder-toolbar"]},r.createElement(B,{isOverviewOn:this.props.isOverviewOn,toggleOverview:this.props.toggleOverview}),this.renderSavedPipelineListToggler(),this.renderNewPipelineActionsItem(),r.createElement($,{isCollationExpanded:this.props.isCollationExpanded,collationCollapseToggled:this.props.collationCollapseToggled}),this.renderUpdateViewButton(),this.renderSavedPipelineNameItem(),this.renderSavePipelineActionsItem(),this.renderExportToLanguageItem())}}const q=U,G="pipeline-preview-toolbar-module-toggle__1_OVN";class H extends r.PureComponent{static displayName="PipelinePreviewToolbarComponent";static propTypes={isAtlasDeployed:a().bool.isRequired,toggleSample:a().func.isRequired,toggleAutoPreview:a().func.isRequired,isSampling:a().bool.isRequired,isAutoPreviewing:a().bool.isRequired,toggleSettingsIsExpanded:a().func.isRequired,isFullscreenOn:a().bool.isRequired,toggleFullscreen:a().func.isRequired};renderAutoPreviewToggle(){return r.createElement("div",{className:"pipeline-preview-toolbar-module-toggle-auto-preview__Q3lc1","data-for":"preview-mode","data-tip":"Show a preview of resulting documents after <br />each stage in the pipeline.","data-place":"top","data-html":"true"},r.createElement(p.Toggle,{checked:this.props.isAutoPreviewing,onChange:this.props.toggleAutoPreview,className:G,id:"autoPreviewToggle",size:"xsmall","aria-labelledby":"autoPreviewToggleLabel"}),r.createElement("label",{className:"pipeline-preview-toolbar-module-toggle-auto-preview-label__1fRaT",htmlFor:"autoPreviewToggle",id:"autoPreviewToggleLabel"},"Auto Preview"),r.createElement(O.Tooltip,{id:"preview-mode"}))}renderSampleToggle(){if(!this.props.isAtlasDeployed)return r.createElement("div",{className:"pipeline-preview-toolbar-module-toggle-sample__iC-qs","data-tip":"Use a random sample of documents instead of<br />the entire collection so you can develop your<br />pipeline quickly. Sample size can be specified<br />in the settings panel.","data-for":"sampling-mode","data-place":"top","data-html":"true"},r.createElement(p.Toggle,{id:"sampleModeToggle",checked:this.props.isSampling,onChange:this.props.toggleSample,className:G,size:"xsmall","aria-labelledby":"sampleModeToggleLabel"}),r.createElement("label",{className:"pipeline-preview-toolbar-module-toggle-sample-label__3TqMe",htmlFor:"sampleModeToggle",id:"sampleModeToggleLabel"},"Sample Mode"),r.createElement(O.Tooltip,{id:"sampling-mode"}))}renderFullscreenButton(){const{isFullscreenOn:e}=this.props,t=e?"fa fa-compress":"fa fa-expand",n=e?"Exit Fullscreen":"Enter Fullscreen";return r.createElement("div",{className:"pipeline-preview-toolbar-module-fullscreen__3CmvD"},r.createElement("button",{type:"button",title:n,className:"btn btn-xs btn-default",onClick:this.props.toggleFullscreen},r.createElement("i",{className:t,"aria-hidden":!0})))}renderSettingsToggle(){return r.createElement("div",{className:"pipeline-preview-toolbar-module-settings__DvLij"},r.createElement(m.IconButton,{title:"Settings",dataTestId:"aggregation-settings",className:"btn btn-xs btn-default",iconClassName:"fa fa-gear",clickHandler:this.props.toggleSettingsIsExpanded}))}render(){return r.createElement("div",{className:"pipeline-preview-toolbar-module-container-right__1Wvh6"},this.renderSampleToggle(),this.renderAutoPreviewToggle(),this.renderSettingsToggle())}}const V=H;class K extends r.PureComponent{static displayName="LegacyPipelineToolbarComponent";static propTypes={isAtlasDeployed:a().bool.isRequired,savedPipelinesListToggle:a().func.isRequired,getSavedPipelines:a().func.isRequired,setIsNewPipelineConfirm:a().func.isRequired,newPipelineFromText:a().func.isRequired,clonePipeline:a().func.isRequired,exportToLanguage:a().func.isRequired,saveCurrentPipeline:a().func.isRequired,savedPipeline:a().object.isRequired,nameChanged:a().func.isRequired,toggleComments:a().func.isRequired,toggleSample:a().func.isRequired,toggleAutoPreview:a().func.isRequired,isModified:a().bool.isRequired,isCommenting:a().bool.isRequired,isSampling:a().bool.isRequired,isAutoPreviewing:a().bool.isRequired,setIsModified:a().func.isRequired,name:a().string,editViewName:a().string,updateView:a().func.isRequired,collationCollapseToggled:a().func.isRequired,isCollationExpanded:a().bool.isRequired,isOverviewOn:a().bool.isRequired,toggleOverview:a().func.isRequired,toggleSettingsIsExpanded:a().func.isRequired,isFullscreenOn:a().bool.isRequired,toggleFullscreen:a().func.isRequired,savingPipelineOpen:a().func.isRequired,serverVersion:a().string.isRequired,openCreateView:a().func.isRequired};static defaultProps={savedPipeline:{isNameValid:!0}};render(){return r.createElement("div",{"data-testid":"legacy-pipeline-toolbar",className:l()("pipeline-toolbar-module-pipeline-toolbar__bfqWn",{"pipeline-toolbar-module-pipeline-toolbar-border__3SYmk":!this.props.isCollationExpanded})},r.createElement(q,{isAtlasDeployed:this.props.isAtlasDeployed,savedPipelinesListToggle:this.props.savedPipelinesListToggle,updateView:this.props.updateView,getSavedPipelines:this.props.getSavedPipelines,savedPipeline:this.props.savedPipeline,clonePipeline:this.props.clonePipeline,newPipelineFromText:this.props.newPipelineFromText,exportToLanguage:this.props.exportToLanguage,saveCurrentPipeline:this.props.saveCurrentPipeline,isValid:this.props.savedPipeline.isNameValid,nameChanged:this.props.nameChanged,isModified:this.props.isModified,setIsModified:this.props.setIsModified,name:this.props.name,editViewName:this.props.editViewName,collationCollapseToggled:this.props.collationCollapseToggled,isCollationExpanded:this.props.isCollationExpanded,isOverviewOn:this.props.isOverviewOn,toggleOverview:this.props.toggleOverview,savingPipelineOpen:this.props.savingPipelineOpen,serverVersion:this.props.serverVersion,openCreateView:this.props.openCreateView,setIsNewPipelineConfirm:this.props.setIsNewPipelineConfirm}),r.createElement(V,{isAtlasDeployed:this.props.isAtlasDeployed,toggleComments:this.props.toggleComments,toggleSample:this.props.toggleSample,toggleAutoPreview:this.props.toggleAutoPreview,isCommenting:this.props.isCommenting,isSampling:this.props.isSampling,isAutoPreviewing:this.props.isAutoPreviewing,isModified:this.props.isModified,toggleSettingsIsExpanded:this.props.toggleSettingsIsExpanded,isFullscreenOn:this.props.isFullscreenOn,toggleFullscreen:this.props.toggleFullscreen}))}}const W=K;class Y extends r.PureComponent{static displayName="CollationToolbarComponent";static propTypes={collation:a().oneOfType([a().bool,a().object]),collationChanged:a().func.isRequired,collationString:a().string,collationStringChanged:a().func.isRequired,openLink:a().func.isRequired};static defaultProps={collation:{},collationString:""};state={hasFocus:!1};onCollationChange=e=>{this.props.collationStringChanged(e.target.value),this.props.collationChanged(e.target.value)};_onFocus=()=>{this.setState({hasFocus:!0})};_onBlur=()=>{this.setState({hasFocus:!1})};render(){return r.createElement("div",{"data-testid":"legacy-collation-toolbar",className:l()("collation-toolbar-module-collation-toolbar__kf_DI",{"collation-toolbar-module-collation-toolbar-in-new-toolbar__N7l6H":"true"===global?.process?.env?.COMPASS_SHOW_NEW_AGGREGATION_TOOLBAR})},r.createElement("div",{onBlur:this._onBlur,onFocus:this._onFocus,className:l()("collation-toolbar-module-collation-toolbar-input-wrapper__1GLoF",{"collation-toolbar-module-has-focus__3Bvkl":this.state.hasFocus})},r.createElement("div",{className:l()("collation-toolbar-module-collation-toolbar-input-label__1dxtj",{"collation-toolbar-module-has-error__3WqdQ":!1===this.props.collation}),"data-testid":"collation-toolbar-input-label"},r.createElement(O.InfoSprinkle,{helpLink:"https://docs.mongodb.com/master/reference/collation/",onClickHandler:this.props.openLink}),"Collation"),r.createElement("input",{"data-test-id":"collation-string",placeholder:"{ locale: 'simple' }",type:"text",onChange:this.onCollationChange,value:this.props.collationString})))}}const z=Y,{track:Z}=(0,y.createLoggerAndTelemetry)("COMPASS-AGGREGATIONS-UI");class X extends r.Component{static displayName="RestorePipelineModalComponent";static propTypes={restorePipelineModalToggle:a().func.isRequired,getPipelineFromIndexedDB:a().func.isRequired,restorePipeline:a().object.isRequired};onRestorePipelineModalToggle=()=>{this.props.restorePipelineModalToggle(0)};openPipeline=()=>{const e=this.props.restorePipeline.pipelineObjectID;Z("Aggregation Opened",{id:e,screen:"aggregations"}),this.props.getPipelineFromIndexedDB(e)};render(){return r.createElement(p.ConfirmationModal,{title:"Are you sure you want to open this pipeline?",open:this.props.restorePipeline.isModalVisible,onConfirm:this.openPipeline,onCancel:this.onRestorePipelineModalToggle,buttonText:"Open Pipeline",trackingId:"restore_pipeline_modal"},"Opening this project will abandon ",r.createElement("b",null,"unsaved")," changes to the current pipeline you are building.")}}const J=X;n(95095);var Q=n(21291),ee=n(59910),te=n.n(ee);n(59047),n(75790);const ne={enableLiveAutocompletion:!1,tabSize:2,fontSize:11,minLines:10,maxLines:1/0,showGutter:!0,useWorker:!1,mode:"ace/mode/mongodb"};class re extends r.PureComponent{static displayName="ImportPipelineComponent";static propTypes={isOpen:a().bool.isRequired,closeImport:a().func.isRequired,changeText:a().func.isRequired,createNew:a().func.isRequired,text:a().string.isRequired,error:a().string};renderError(){if(this.props.error)return r.createElement("div",{className:"import-pipeline-module-import-pipeline-error__2z9T6"},this.props.error)}render(){return r.createElement(p.ConfirmationModal,{title:"New Pipeline From Plain Text",open:this.props.isOpen,onConfirm:this.props.createNew,onCancel:this.props.closeImport,buttonText:"Create New",submitDisabled:""===this.props.text,trackingId:"import_pipeline_modal"},r.createElement("div",{className:"import-pipeline-module-import-pipeline-note__Eyvmd"},"Supports MongoDB Shell syntax. Pasting a pipeline will create a new pipeline."),r.createElement("div",{className:"import-pipeline-module-import-pipeline-editor__AGfE1"},r.createElement(Q.default,{mode:"javascript",theme:"mongodb",width:"100%",value:this.props.text,onChange:this.props.changeText,editorProps:{$blockScrolling:1/0},name:"import-pipeline-editor",setOptions:ne})),this.renderError())}}const se=re;class ae extends r.PureComponent{static displayName="ConfirmImportPipelineComponent";static propTypes={isConfirmationNeeded:a().bool.isRequired,isAutoPreviewing:a().bool.isRequired,closeImport:a().func.isRequired,confirmNew:a().func.isRequired,runStage:a().func.isRequired};onConfirm=()=>{this.props.confirmNew(),this.props.isAutoPreviewing&&this.props.runStage(0)};render(){return r.createElement(p.ConfirmationModal,{title:"Are you sure you want to create a new pipeline?",open:this.props.isConfirmationNeeded,onConfirm:this.onConfirm,onCancel:this.props.closeImport,buttonText:"Confirm",trackingId:"confirm_import_pipeline_modal"},r.createElement("div",{className:"confirm-import-pipeline-module-confirm-import-pipeline-note__nSe7i"},"Creating this pipeline will abandon unsaved changes to the current pipeline."))}}const oe=ae;class ie extends r.PureComponent{static displayName="SavingPipelineModalComponent";static propTypes={isOpen:a().bool.isRequired,isSaveAs:a().bool.isRequired,name:a().string.isRequired,savingPipelineCancel:a().func.isRequired,savingPipelineApply:a().func.isRequired,savingPipelineNameChanged:a().func.isRequired,saveCurrentPipeline:a().func.isRequired,clonePipeline:a().func.isRequired};onNameChanged(e){this.props.savingPipelineNameChanged(e.currentTarget.value)}onSubmit(e){e.preventDefault(),e.stopPropagation(),this.save()}save(){this.props.isSaveAs&&this.props.clonePipeline(),this.props.savingPipelineApply(),this.props.saveCurrentPipeline()}render(){const e=this.props.isSaveAs?"Save Pipeline As...":"Save Pipeline";return r.createElement(p.ConfirmationModal,{title:e,open:this.props.isOpen,onConfirm:this.save.bind(this),onCancel:this.props.savingPipelineCancel,buttonText:"Save",submitDisabled:""===this.props.name,trackingId:"save_pipeline_modal"},r.createElement("form",{onSubmit:this.onSubmit.bind(this)},r.createElement("input",{id:"save-pipeline-name",type:"text",value:this.props.name,onChange:this.onNameChanged.bind(this),className:"form-control",placeholder:"Untitled"})))}}const le=ie;class pe extends r.PureComponent{static displayName="ConfirmNewPipelineComponent";static propTypes={isNewPipelineConfirm:a().bool.isRequired,setIsNewPipelineConfirm:a().func.isRequired,newPipeline:a().func.isRequired};onConfirm=()=>{this.props.newPipeline(),this.onClose()};onClose=()=>{this.props.setIsNewPipelineConfirm(!1)};render(){return r.createElement(p.ConfirmationModal,{title:"Are you sure you want to create a new pipeline?",open:this.props.isNewPipelineConfirm,onConfirm:this.onConfirm,onCancel:this.onClose,buttonText:"Confirm",trackingId:"confirm_new_pipeline_modal"},r.createElement("div",{className:"confirm-new-pipeline-module-confirm-new-pipeline-note__1UZKg"},"Creating this pipeline will abandon unsaved changes to the current pipeline."))}}const me=pe;var ce=n(52908),ue=n(93347),ge=n.n(ue),de=n(7386),he=n.n(de);const Te="Stage must be a properly formatted document.";function ye(...e){const t=ge()(...e);if(!t)throw new Error(Te);return t}function fe(e,t){const n=[];if("$project"!==e.stageOperator)return n;if(!e.isEnabled||!e.stageOperator||""===e.stage)return n;if(!t){t={};try{const n=he()(e.stage);t[e.stageOperator]=ye(n)}catch(e){return n}}const r=t[e.stageOperator];return Object.keys(r).map((e=>{const t=r[e];t&&n.push({name:e,value:e,score:1,meta:JSON.stringify(t),version:"0.0.0"})})),n}function be(e){if(!e.isEnabled||!e.stageOperator||""===e.stage)return{};const t={};try{const n=he()(e.stage);t[e.stageOperator]=ye(n)}catch(t){return e.syntaxError=Te,e.isValid=!1,e.previewDocuments=[],{}}return e.projections=fe(e,t),e.isValid=!0,e.syntaxError=null,t}var Se=n(39752),Ae=n.n(Se),Ee=n(24179),_e=n(84935),xe=n.n(_e),Ie=n(66496),Le=n.n(Ie);const ve="$out",Ce="$merge",Re="$search",Oe="$searchMeta",Ne="$documents",je=e=>!!e&&e.every((e=>e===ce.ATLAS)),we="aggregations/id/CREATE_ID",De=()=>({type:we}),Be="aggregations/pipeline",Me=`${Be}/STAGE_ADDED`,$e=`${Be}/STAGE_ADDED_AFTER`,ke=`${Be}/STAGE_CHANGED`,Pe=`${Be}/STAGE_COLLAPSE_TOGGLED`,Fe=`${Be}/STAGE_DELETED`,Ue=`${Be}/STAGE_MOVED`,qe=`${Be}/STAGE_OPERATOR_SELECTED`,Ge=`${Be}/STAGE_TOGGLED`,He=`${Be}/STAGE_PREVIEW_UPDATED`,Ve=`${Be}/LOADING_STAGE_RESULTS`,Ke=(Object.freeze({$limit:20}),Object.freeze({$limit:x}),["$collStats","$currentOp","$indexStats","$listLocalSessions","$listSessions"]),We=["$group","$bucket","$bucketAuto"],Ye="$out",ze="$merge",Ze="$search",Xe="$searchMeta",Je="$documents",Qe=()=>({id:(new Ee.ObjectId).toHexString(),stageOperator:"",stage:"",isValid:!0,isEnabled:!0,isExpanded:!0,isLoading:!1,isComplete:!1,previewDocuments:[],syntaxError:null,error:null,projections:[]}),et=[Qe()],tt=e=>e.map((e=>Object.assign({},e))),nt={};nt[ke]=(e,t)=>{const n=tt(e);return n[t.index].stage=t.stage,n[t.index].isComplete=!1,n[t.index].fromStageOperators=!1,n},nt[Me]=e=>{const t=tt(e),n={...Qe()};return t.push(n),t},nt[$e]=(e,t)=>{const n=tt(e),r={...Qe()};return n.splice(Number(t.index)+1,0,r),n},nt[Fe]=(e,t)=>{const n=tt(e);return n.splice(t.index,1),n},nt[Ue]=(e,t)=>{if(t.fromIndex===t.toIndex)return e;const n=tt(e);return n.splice(t.toIndex,0,n.splice(t.fromIndex,1)[0]),n},nt[qe]=(e,t)=>{const n=t.stageOperator;if(n!==e[t.index].stageOperator){const s=tt(e),a=(r=n,ce.STAGE_OPERATORS.find((e=>e.name===r))),o=(a||{}).snippet||"{\n  \n}",i=(a||{}).comment||"",l=t.isCommenting?`${i}${o}`:o;return s[t.index].stageOperator=n,s[t.index].stage=l,s[t.index].snippet=l,s[t.index].isExpanded=!0,s[t.index].isComplete=!1,s[t.index].fromStageOperators=!0,s[t.index].previewDocuments=[],[Ze,Xe,Je].includes(s[t.index].stageOperator)&&t.env!==ce.ADL&&t.env!==ce.ATLAS?s[t.index].isMissingAtlasOnlyStageSupport=!0:s[t.index].isMissingAtlasOnlyStageSupport=!1,s}var r;return e},nt[Ge]=(e,t)=>{const n=tt(e);return n[t.index].isEnabled=!n[t.index].isEnabled,n},nt[Pe]=(e,t)=>{const n=tt(e);return n[t.index].isExpanded=!n[t.index].isExpanded,n},nt[He]=(e,t)=>{const n=tt(e);return[Ze,Xe,Je].includes(n[t.index].stageOperator)&&t.env!==ce.ADL&&t.env!==ce.ATLAS&&t.error&&(40324===t.error.code||31082===t.error.code)?(n[t.index].previewDocuments=[],n[t.index].error=null,n[t.index].isMissingAtlasOnlyStageSupport=!0):(n[t.index].previewDocuments=null===t.error||void 0===t.error?t.documents:[],n[t.index].error=t.error?t.error.message:null,n[t.index].isMissingAtlasOnlyStageSupport=!1),n[t.index].isLoading=!1,n[t.index].isComplete=t.isComplete,n},nt[Ve]=(e,t)=>{const n=tt(e);return n[t.index].isLoading=!0,n};const rt=()=>({type:Me}),st=(e,t,n,r,s)=>({type:He,documents:e,index:t,error:n,isComplete:r,env:s}),at=e=>({type:Ve,index:e}),ot=(e,t)=>{const n=e.inputDocuments.count,r=e.largeLimit||x;return e.pipeline.reduce(((s,a,o)=>(o<=t&&a.isEnabled&&(("N/A"===n&&e.sample||n>r&&We.includes(a.stageOperator)&&e.sample)&&s.push({$limit:r}),s.push(a.executor||be(a))),s)),[])},it=(e,t,n,r,s)=>{const a=r.pipeline[s];a.executor=be(a),a.isValid&&a.isEnabled&&a.stageOperator&&a.stageOperator!==Ye&&a.stageOperator!==ze?pt(e,t,n,r,s):n(st([],s,null,!1,r.env))},lt=(e,t,n,r,s,a)=>{const o={maxTimeMS:s.maxTimeMS||_,allowDiskUse:!0,collation:s.collation||void 0};t.aggregate(n,e,o,((e,t)=>{if(e)return r(st([],a,e,!1,s.env));t.toArray(((e,n)=>{r(st(n||[],a,e,!0,s.env)),t.close(),r((0,Se.globalAppRegistryEmit)("agg-pipeline-executed",{id:s.id,numStages:s.pipeline.length,stageOperators:s.pipeline.map((e=>e.stageOperator))}))}))}))},pt=(e,t,n,r,s)=>{n(at(s));const a=((e,t)=>{const n=ot(e,t),r=e.pipeline[e.pipeline.length-1];return n.length>0&&!Ke.includes(r.stageOperator)&&n.push({$limit:e.limit||20}),n})(r,s);lt(a,e,t,n,r,s)},mt=e=>(t,n)=>{const r=n();if(e<r.pipeline.length){""===r.id&&t(De());const{dataService:n}=r.dataService;if(n){const s=r.namespace;for(let a=e;a<r.pipeline.length;a++)it(n,s,t,r,a)}}},ct=()=>new Error("The operation was cancelled.");const{log:ut,mongoLogId:gt}=(0,y.default)("compass-aggregations"),{log:dt,mongoLogId:ht}=(0,y.default)("compass-aggregations");let Tt;!function(e){e.AggregationStarted="compass-aggregations/aggregationStarted",e.AggregationFinished="compass-aggregations/aggregationFinished",e.AggregationFailed="compass-aggregations/aggregationFailed",e.LastPageReached="compass-aggregations/lastPageReached"}(Tt||(Tt={}));const yt={documents:[],page:0,limit:20,isLast:!1,loading:!1},ft=e=>async(t,n)=>{const{pipeline:r,namespace:s,maxTimeMS:a,collation:o,dataService:{dataService:i},aggregation:{limit:l}}=n();if(i)try{const n=new AbortController,p=n.signal;t({type:Tt.AggregationStarted,abortController:n});const m=r.map(be).filter((e=>Object.keys(e).length>0)),c={maxTimeMS:a||_,allowDiskUse:!0,collation:o||void 0},u=await async function(e,t,n,r,s,a,o){if(t.aborted)return Promise.reject(ct());const i=e.startSession("CRUD"),l=e.aggregate(n,r,s).skip(a).limit(o),p=()=>{l.close(),e.killSessions(i).catch((()=>{ut.warn(gt(1001000105),"Aggregations","Attempting to kill the session failed")}))};let m;t.addEventListener("abort",p,{once:!0});try{m=await async function(e,t){if(t.aborted)return Promise.reject(ct());const n=new AbortController,r=function(e,t){if(e.aborted)return Promise.reject(ct());let n;const r=new Promise((function(e,t){n=t})),s=()=>{t.removeEventListener("abort",a),n(ct())},a=()=>{e.removeEventListener("abort",s)};return e.addEventListener("abort",s,{once:!0}),t.addEventListener("abort",a,{once:!0}),r}(t,n.signal);try{return await Promise.race([r,e])}finally{t.aborted||n.abort()}}(l.toArray(),t)}finally{t.removeEventListener("abort",p),m=m||[]}return m}(i,p,s,m,c,(e-1)*l,l);0===u.length?t({type:Tt.LastPageReached,page:e}):t({type:Tt.AggregationFinished,documents:u,page:e,isLast:u.length<l})}catch(e){t({type:Tt.AggregationFailed,error:e.message}),dt.warn(ht(1001000106),"Aggregations","Failed to run aggregation")}};var bt;!function(e){e.ChangeWorkspace="compass-aggregations/changeWorkspace"}(bt||(bt={}));const St=(0,p.css)({display:"flex",gap:p.spacing[2],alignItems:"center"}),At=(0,p.css)({padding:0}),Et=(0,p.css)({border:"none",padding:0,backgroundColor:"transparent",span:{backgroundImage:"none !important"}}),_t={onStageAdded:rt,onChangeWorkspace:e=>({type:bt.ChangeWorkspace,view:e})},xt=(0,o.$j)((({pipeline:e,workspace:t})=>({stages:e.map((e=>e.stageOperator)),isEditing:"results"===t})),_t)((({isEditing:e,stages:t,onStageAdded:n,onChangeWorkspace:s})=>r.createElement("div",{className:St,"data-testid":"toolbar-pipeline-stages"},0===t.filter(Boolean).length?r.createElement(p.Description,{className:(0,p.cx)(At)},"Your pipeline is currently empty. To get started select the",r.createElement(p.Link,{className:Et,as:"button",onClick:()=>n(),hideExternalIcon:!0,"data-testid":"pipeline-toolbar-add-stage-button"},"first stage.")):r.createElement(p.Pipeline,{size:"small"},t.filter(Boolean).map(((e,t)=>r.createElement(p.Stage,{key:`${t}-${e}`},e)))),e&&r.createElement(p.Button,{"data-testid":"pipeline-toolbar-edit-button",variant:"primaryOutline",size:"small",onClick:()=>s("builder"),leftGlyph:r.createElement(p.Icon,{glyph:"Edit"})},"Edit")))),It=(0,p.css)({display:"flex",gap:p.spacing[2],alignItems:"center"}),Lt=(0,p.css)({backgroundColor:"transparent",border:"none",display:"inline"}),vt=(0,p.css)({display:"flex",alignItems:"center",minWidth:"100px"}),Ct=(0,o.$j)(null,{onRunAggregation:()=>e=>e(ft(1))})((({isOptionsVisible:e,onRunAggregation:t,onToggleOptions:n})=>{const s=e?"CaretDown":"CaretRight";return r.createElement("div",{className:It},r.createElement(p.Button,{"data-testid":"pipeline-toolbar-run-button",variant:"primary",size:"small",onClick:()=>{t()}},"Run"),r.createElement(p.Link,{as:"button",className:Lt,"data-testid":"pipeline-toolbar-options-button",hideExternalIcon:!0,onClick:()=>n()},r.createElement("div",{className:vt},e?"Less":"More"," Options"," ",r.createElement(p.Icon,{glyph:s}))))})),Rt="aggregations/is-modified/SET_IS_MODIFIED",Ot=e=>({type:Rt,isModified:e}),Nt=()=>{const{remote:e}=n(72298),t=n(71017),r=process.env.MONGODB_COMPASS_AGGREGATIONS_TEST_BASE_PATH||e.app.getPath("userData");return t.join(r,"SavedPipelines")};var jt=n(57147),wt=n.n(jt),Dt=n(71017),Bt=n.n(Dt);const{debug:Mt}=(0,y.createLoggerAndTelemetry)("COMPASS-AGGREGATIONS-UI"),$t="utf8";class kt{async loadAll(){const e=Nt(),t=(await jt.promises.readdir(e)).filter((e=>e.endsWith(".json"))).map((t=>Bt().join(e,t)));return(await Promise.all(t.map((e=>this._loadOne(e))))).filter(Boolean)}async _loadOne(e){try{const[t,n]=await Promise.all([this._getFileData(e),jt.promises.stat(e)]);return{...t,lastModified:n.mtimeMs}}catch(t){return Mt(`Failed to load pipeline ${Bt().basename(e)}`,t),null}}async _getFileData(e){const t=await jt.promises.readFile(e,$t);return JSON.parse(t)}async updateAttributes(e,t){if(!e)throw new Error("pipelineId is required");const n=Bt().join(Nt(),`${e}.json`),r=await this._getFileData(n);return await jt.promises.writeFile(n,JSON.stringify({...r,...t}),$t),this._loadOne(n)}async delete(e){const t=Bt().join(Nt(),`${e}.json`);return jt.promises.unlink(t)}}const{track:Pt,debug:Ft}=(0,y.createLoggerAndTelemetry)("COMPASS-AGGREGATIONS-UI"),Ut="aggregations/saved-pipeline",qt=`${Ut}/LIST_TOGGLED`,Gt=`${Ut}/ADD`,Ht={pipelines:[],isLoaded:!1,isListVisible:!1},Vt={};Vt[qt]=(e,t)=>{const n=(e=>Object.assign({},e))(e);return n.isListVisible=!!t.index,n},Vt[Gt]=(e,t)=>({...e,pipelines:t.pipelines,isLoaded:!0});const Kt=e=>({type:qt,index:e}),Wt=e=>({type:Gt,pipelines:e}),Yt=()=>(e,t)=>{t().savedPipeline.isLoaded||e(zt())},zt=()=>(e,t)=>{const n=new kt,r=t();n.loadAll().then((t=>{const n=t.filter((({namespace:e})=>e===r.namespace));e(Ot(!1)),e(Wt(n)),e((0,Se.globalAppRegistryEmit)("agg-pipeline-saved",{name:r.name}))})).catch((e=>{Ft("Failed to load pipelines",e)}))},Zt=()=>(e,t)=>{const r=n(24290),s=n(57147),a=n(71017),o=t();""===o.id&&e(De());const i=t().id,l=o.pipeline.map((e=>({...e,previewDocuments:[]})));Pt("Aggregation Saved",{id:i,num_stages:l.length});const p=Object.assign({},{namespace:o.namespace},{env:o.env},{isTimeSeries:o.isTimeSeries},{isReadonly:o.isReadonly},{sourceName:o.sourceName},{pipeline:l},{name:o.name},{id:i},{comments:o.comments},{sample:o.sample},{autoPreview:o.autoPreview},{collation:o.collation},{collationString:o.collationString}),m=Nt();r.series([e=>{s.mkdir(m,{recursive:!0},(()=>{e()}))},e=>{const t=a.join(m,`${p.id}.json`);s.writeFile(t,JSON.stringify(p),{encoding:"utf8",flag:"w"},(()=>{e(null)}))}],(()=>{e(zt())}))},Xt=(0,p.css)({display:"grid",gap:p.spacing[4],gridTemplateAreas:'"pipelineTextAndOpen pipelineStages pipelineAction"',gridTemplateColumns:"min-content",alignItems:"center"}),Jt=(0,p.css)({display:"flex",gridArea:"pipelineTextAndOpen",gap:p.spacing[2]}),Qt=(0,p.css)({border:"none",backgroundColor:"transparent",lineHeight:1,display:"flex",alignItems:"center"}),en=(0,p.css)({gridArea:"pipelineStages",display:"flex"}),tn=(0,p.css)({gridArea:"pipelineAction",justifySelf:"end",display:"flex"}),nn=(0,o.$j)(null,{onShowSavedPipelines:()=>e=>{e(Yt()),e(Kt(1))}})((({onShowSavedPipelines:e,onToggleOptions:t,isOptionsVisible:n})=>r.createElement("div",{className:Xt,"data-testid":"pipeline-header"},r.createElement("div",{className:Jt},r.createElement(p.Body,{weight:"medium"},"Pipeline"),r.createElement("button",{"data-testid":"pipeline-toolbar-open-pipelines-button",onClick:()=>e(),className:Qt,"aria-label":"Open saved pipelines"},r.createElement(p.Icon,{glyph:"Folder"}),r.createElement(p.Icon,{glyph:"CaretDown"}))),r.createElement("div",{className:en},r.createElement(xt,null)),r.createElement("div",{className:tn},r.createElement(Ct,{onToggleOptions:t,isOptionsVisible:n}))))),rn="aggregations/collation/COLLATION_CHANGED",sn=e=>({type:rn,collation:ge().isCollationValid(e)}),an="aggregations/collation/COLLATION_STRING_CHANGED",on=e=>({type:an,collationString:e}),ln=n(4283),pn=e=>()=>{ln?n(72298).shell.openExternal(e):window.open(e,"_new")},mn={collationChanged:sn,collationStringChanged:on,openLink:pn},cn=(0,o.$j)((({collation:e,collationString:t})=>({collation:e,collationString:t})),mn)((({collation:e,collationString:t,collationChanged:n,collationStringChanged:s,openLink:a})=>{const o={collation:e,collationString:t,collationChanged:n,collationStringChanged:s,openLink:a};return r.createElement(z,o)})),un=(0,p.css)({display:"grid"}),gn=()=>r.createElement("div",{className:un,"data-testid":"pipeline-options"},r.createElement(cn,null)),dn=()=>(e,t)=>{const n=t();e((0,Se.localAppRegistryEmit)("open-aggregation-export-to-language",((e,t)=>`[${e.pipeline.filter(((e,n)=>e.isEnabled&&n<=t)).map((e=>function(e){if(!e.isEnabled||!e.stageOperator||""===e.stage)return"{}";const t=he()(e.stage);let n;try{n=ye(t)}catch(t){return e.syntaxError=Te,e.isValid=!1,e.previewDocuments=[],"{}"}e.isValid=!0,e.syntaxError=null;const r=ge().toJSString(n);return`{${e.stageOperator}: ${r}}`}(e))).join(", ")}]`)(n,n.pipeline.length))),e((0,Se.globalAppRegistryEmit)("compass:export-to-language:opened",{source:"Aggregations"}))};var hn=n(64920),Tn=n(88351);const yn=n(22713)("mongodb-aggregations:modules:import-pipeline"),fn="aggregations/import-pipeline",bn=`${fn}/NEW_PIPELINE_FROM_TEXT`,Sn=`${fn}/CLOSE_IMPORT`,An=`${fn}/CHANGE_TEXT`,En=`${fn}/CREATE_NEW`,_n=`${fn}/CONFIRM_NEW`,xn={isOpen:!1,text:"",isConfirmationNeeded:!1,syntaxError:null},In={[bn]:e=>({...e,isOpen:!0,text:""}),[Sn]:e=>({...e,isOpen:!1,isConfirmationNeeded:!1,syntaxError:null}),[An]:(e,t)=>({...e,text:t.text}),[En]:e=>({...e,isOpen:!1,isConfirmationNeeded:!0})},Ln=()=>({type:bn}),vn=e=>{try{return function(e){const t=function(e){if(!e.body||1!==e.body.length)return;const t=e.body[0];if("ExpressionStatement"!==t.type)return;const{type:n,elements:r}=t.expression||{};return"ArrayExpression"!==n||r.find((e=>!function(e){return"ObjectExpression"===e.type&&e.properties&&1===e.properties.length}(e)))?void 0:r.map((e=>function(e){const{key:t,value:n}=e.properties[0];return{operator:t.name||t.value,source:(0,Tn.R_)(n,{comments:!0,indent:"  "})}}(e)))}(function(e){try{return(0,hn.Qc)(e,{ecmaVersion:6})}catch(e){const t=new Error(`Unable to parse the pipeline source: ${e.message}`);throw t.stack=e.stack,t}}(e));if(!t)throw new Error("Unable to extract pipeline stages: the provided input is not an array of objects.");return t}(e).map((e=>Cn(e.operator,e.source,null)))}catch(e){return yn(e),[Cn(null,"",e.message)]}},Cn=(e,t,n)=>({...Qe(),stageOperator:e,stage:t,isValid:!n,syntaxError:n});var Rn=n(18717),On=n(36160),Nn=n.n(On);const jn="aggregations/data-service/DATA_SERVICE_CONNECTED",wn={error:null,dataService:null};function Dn(e=wn,t){return t.type===jn?{error:t.error,dataService:t.dataService}:e}const Bn=(e,t)=>({type:jn,error:e,dataService:t}),Mn="aggregations/fields/FIELDS_CHANGED",$n=[],kn="aggregations/source-name/SOURCE_NAME_CHANGED",Pn=n(22713)("mongodb-aggregations:modules:input-document"),Fn="aggregations/input-documents",Un=`${Fn}/TOGGLE_INPUT_COLLAPSED`,qn=`${Fn}/UPDATE_INPUT_DOCUMENTS`,Gn=`${Fn}/LOADING_INPUT_DOCUMENTS`,Hn={count:0,documents:[],error:null,isExpanded:!0,isLoading:!1},Vn=(e,t,n)=>({type:qn,count:e,documents:t,error:n}),Kn=()=>(e,t)=>{const n=t(),r=n.dataService.dataService,s=n.namespace,a={maxTimeMS:n.settings.maxTimeMS},o=[{$limit:n.settings.sampleSize}];r&&r.isConnected()?(e({type:Gn}),r.estimatedCount(s,a,((t,n)=>{r.aggregate(s,o,a,((r,s)=>{if(r)return e(Vn(t?"N/A":n,[],r));s.toArray(((r,a)=>{e(Vn(t?"N/A":n,a,r)),s.close()}))}))}))):r&&!r.isConnected()&&Pn("warning: trying to refresh aggregation but dataService is disconnected",r)},Wn="aggregations/namespace/NAMESPACE_CHANGED",Yn=e=>({type:Wn,namespace:e}),zn="aggregations/env/ENV_CHANGED",Zn=ce.ON_PREM,Xn="aggregations/env/IS_TIME_SERIES_CHANGED",Jn="aggregations/server-version/SERVER_VERSION_CHANGED",Qn="aggregations/name/NAME_CHANGED",er="aggregations/limit/LIMIT_CHANGED",tr="aggregations/large-limit/LARGE_LIMIT_CHANGED",nr=x,rr="aggregations/is-atlas-deployed/SET_IS_ATLAS_DEPLOYED",sr="aggregations/is-readonly/IS_READONLY_CHANGED",ar="aggregations/allow-writes/ALLOW_WRITES",or="aggregations/max-time-ms/MAX_TIME_MS_CHANGED",ir="aggregations/collation/COLLATION_COLLAPSE_TOGGLED",lr="aggregations/comments/TOGGLE_COMMENTS",pr="aggregations/sample/TOGGLE_SAMPLE",mr="aggregations/autoPreview/TOGGLE_AUTO_PREVIEW",cr=()=>({type:mr}),ur="agreggations/restore-pipeline",gr=`${ur}/MODAL_TOGGLE`,dr=`${ur}/OBJECT_ID`,hr={isModalVisible:!1,pipelineObjectID:""},Tr="aggregations/is-overview-on/TOGGLE_OVERVIEW",yr="aggregations/settings",fr=`${yr}/TOGGLE_IS_EXPANDED`,br=`${yr}/TOGGLE_COMMENT_MODE`,Sr=`${yr}/SET_SAMPLE_SIZE`,Ar=`${yr}/SET_MAX_TIME_MS`,Er=`${yr}/SET_LIMIT`,_r=`${yr}/APPLY_SETTINGS`,xr={isExpanded:!1,isCommentMode:!0,isDirty:!1,sampleSize:20,maxTimeMS:_,limit:x},Ir=()=>({type:fr}),Lr="aggregations/is-fullscreen-on/TOGGLE_FULLSCREEN",vr="aggregations/saving-pipeline/NAME_CHANGED",Cr="aggregations/saving-pipeline/APPLY",Rr="aggregations/saving-pipeline/CANCEL",Or="aggregations/saving-pipeline/OPEN",Nr={isOpen:!1,name:"",isSaveAs:!1},jr=({name:e="",isSaveAs:t=!1}={})=>({type:Or,isSaveAs:t,name:e}),wr="aggregations/out-results-fn/OUT_RESULTS_FN_CHANGED",Dr="aggregations/projections/PROJECTIONS_CHANGED",Br=[],Mr="aggregations/is-new-pipeline-confirm/SET_IS_NEW_PIPELINE_CONFIRM",$r=e=>({type:Mr,isNewPipelineConfirm:e}),{track:kr,debug:Pr}=(0,y.createLoggerAndTelemetry)("COMPASS-AGGREGATIONS-UI"),Fr="aggregations/update-view/ERROR_UPDATING_VIEW",Ur="aggregations/update-view/DISMISS_VIEW_UPDATE_ERROR",qr=e=>({type:Fr,error:`${e}`}),Gr=()=>({type:Ur}),{track:Hr,debug:Vr}=(0,y.createLoggerAndTelemetry)("COMPASS-AGGREGATIONS-UI"),Kr={appRegistry:Se.INITIAL_STATE,allowWrites:!0,dataService:wn,fields:$n,inputDocuments:Hn,namespace:"",env:Zn,isTimeSeries:!1,serverVersion:"4.0.0",pipeline:et,savedPipeline:Ht,restorePipeline:hr,name:"",collation:null,collationString:"",isCollationExpanded:!1,isAtlasDeployed:!1,isReadonly:!1,isOverviewOn:!1,comments:!0,sample:!0,autoPreview:!0,id:"",isModified:!1,importPipeline:xn,settings:xr,limit:20,largeLimit:nr,maxTimeMS:6e4,isFullscreenOn:!1,savingPipeline:Nr,projections:Br,outResultsFn:null,editViewName:null,sourceName:null,isNewPipelineConfirm:!1,updateViewError:null,aggregation:yt,workspace:"builder"},Wr="aggregations/CLEAR_PIPELINE",Yr="aggregations/RESTORE_PIPELINE",zr="aggregations/NEW_PIPELINE",Zr="aggregations/CLONE_PIPELINE",Xr="aggregations/NEW_FROM_PASTE",Jr="aggregations/MODIFY_VIEW",Qr=(0,Rn.combineReducers)({appRegistry:Ae(),allowWrites:function(e=!0,t){return t.type===ar?t.allowWrites:e},comments:function(e=!0,t){return t.type===lr?!e:e},sample:function(e=!0,t){return t.type===pr?!e:e},autoPreview:function(e=!0,t){return t.type===mr?!e:e},dataService:Dn,fields:function(e=$n,t){return t.type===Mn?t.fields:e},inputDocuments:(e=Hn,t)=>t.type===Un?{...e,isExpanded:!e.isExpanded}:t.type===Gn?{...e,isLoading:!0}:t.type===qn?{...e,count:t.count,documents:t.documents,error:t.error,isLoading:!1}:e,namespace:function(e="",t){return t.type===Wn?t.namespace:e},env:function(e=Zn,t){return t.type===zn?t.env:e},isTimeSeries:function(e=!1,t){return t.type===Xn?t.isTimeSeries:e},serverVersion:function(e="4.0.0",t){return t.type===Jn&&t.version||e},savedPipeline:function(e=Ht,t){const n=Vt[t.type];return n?n(e,t):e},restorePipeline:function(e=hr,t){return t.type===gr?{...e,isModalVisible:!!t.index}:t.type===dr?{...e,pipelineObjectID:t.objectID}:e},pipeline:function(e=[Qe()],t){const n=nt[t.type];return n?n(e,t):e},name:function(e="",t){return t.type===Qn?t.name:e},collation:function(e=null,t){return t.type===rn?t.collation:e},collationString:function(e="",t){return t.type===an?t.collationString:e},isCollationExpanded:function(e=!1,t){return t.type===ir?!e:e},id:function(e="",t){return t.type===we?(new Ee.ObjectId).toHexString():e},isModified:function(e=!1,t){return t.type===Rt?t.isModified:e},isAtlasDeployed:function(e=!1,t){return t.type===rr?t.isAtlasDeployed:e},isReadonly:function(e=!1,t){return t.type===sr?t.isReadonly:e},importPipeline:function(e=xn,t){const n=In[t.type];return n?n(e,t):e},isOverviewOn:function(e=!1){return e},settings:function(e=xr,t){return t.type===fr?0==!e.isExpanded&&!0===e.isDirty?{...e,...xr}:{...e,isExpanded:!e.isExpanded}:t.type===br?{...e,isCommentMode:!e.isCommentMode,isDirty:!0}:t.type===Sr?{...e,sampleSize:t.value,isDirty:!0}:t.type===Ar?{...e,maxTimeMS:t.value,isDirty:!0}:t.type===Er?{...e,limit:t.value,isDirty:!0}:(t.type,e)},limit:function(e=20,t){return t.type===er?t.limit:e},largeLimit:function(e=1e5,t){return t.type===tr?t.largeLimit:e},maxTimeMS:function(e=6e4,t){return t.type===or?t.maxTimeMS:e},isFullscreenOn:function(e=!1,t){return t.type===Lr?!e:e},savingPipeline:function(e=Nr,t){return t.type===vr?{...e,name:t.name}:t.type===Or?{...e,isOpen:!0,isSaveAs:t.isSaveAs,name:t.name}:t.type===Rr?{...e,name:"",isOpen:!1}:e},projections:function(e=Br){return e},editViewName:function(e=null){return e},sourceName:function(e=null,t){return t.type===kn?t.sourceName:e},outResultsFn:function(e=null,t){return t.type===wr?t.outResultsFn:e},isNewPipelineConfirm:function(e=!1,t){return t.type===Mr?t.isNewPipelineConfirm:e},updateViewError:function(e=null,t){return t.type===Fr?t.error:t.type===Ur?null:e},aggregation:(e=yt,t)=>{switch(t.type){case Tt.AggregationStarted:return{...e,loading:!0,error:void 0,documents:[],abortController:t.abortController};case Tt.AggregationFinished:return{...e,isLast:t.isLast,page:t.page,documents:t.documents,loading:!1,abortController:void 0,error:void 0};case Tt.AggregationFailed:return{...e,documents:[],loading:!1,abortController:void 0,error:t.error};case Tt.LastPageReached:return{...e,isLast:!0,loading:!1,page:t.page};default:return e}},workspace:(e="builder",t)=>{switch(t.type){case bt.ChangeWorkspace:return t.view;case Tt.AggregationStarted:return"results";default:return e}}}),es={[Wn]:(e,t)=>{const n={...Kr,env:e.env,isTimeSeries:e.isTimeSeries,isReadonly:e.isReadonly,sourceName:e.sourceName,isAtlasDeployed:e.isAtlasDeployed,outResultsFn:e.outResultsFn,allowWrites:e.allowWrites,serverVersion:e.serverVersion,dataService:e.dataService,appRegistry:e.appRegistry};return Qr(n,t)},"aggregations/reset":()=>({...Kr}),[Yr]:(e,t)=>{const n=t.restoreState,r=null===n.comments||void 0===n.comments||n.comments,s=null===n.sample||void 0===n.sample||n.sample,a=null===n.autoPreview||void 0===n.autoPreview||n.autoPreview;return{...Kr,appRegistry:e.appRegistry,namespace:n.namespace,env:n.env,isTimeSeries:n.isTimeSeries,isReadonly:n.isReadonly,sourceName:n.sourceName,pipeline:n.pipeline,name:n.name,collation:n.collation,collationString:n.collationString,isCollationExpanded:!!n.collationString,id:n.id,comments:r,limit:n.limit,largeLimit:n.largeLimit,maxTimeMS:n.maxTimeMS,projections:n.projections,sample:s,autoPreview:a,fields:e.fields,serverVersion:e.serverVersion,dataService:e.dataService,inputDocuments:e.inputDocuments,isAtlasDeployed:e.isAtlasDeployed,allowWrites:e.allowWrites,outResultsFn:e.outResultsFn,savedPipeline:{...e.savedPipeline,isListVisible:!1},restorePipeline:{isModalVisible:!1,pipelineObjectID:""}}},[Wr]:e=>({...e,pipeline:[],limit:20,largeLimit:nr,maxTimeMS:6e4,isAtlasDeployed:e.isAtlasDeployed,allowWrites:e.allowWrites,outResultsFn:e.outResultsFn,savedPipeline:{...e.savedPipeline,isListVisible:!0}}),[zr]:e=>({...Kr,appRegistry:e.appRegistry,namespace:e.namespace,env:e.env,isTimeSeries:e.isTimeSeries,isReadonly:e.isReadonly,sourceName:e.sourceName,fields:e.fields,serverVersion:e.serverVersion,dataService:e.dataService,isAtlasDeployed:e.isAtlasDeployed,allowWrites:e.allowWrites,outResultsFn:e.outResultsFn,inputDocuments:e.inputDocuments}),[Zr]:e=>({...e,id:(new Ee.ObjectId).toHexString(),name:`${e.name} (copy)`,isModified:!0}),[_n]:e=>{const t=vn(e.importPipeline.text),n=t.length>0?t[0].syntaxError:null;return n||Hr("Aggregation Imported From Text",{num_stages:t.length}),{...e,name:"",collation:null,collationString:"",isCollationExpanded:!1,id:(new Ee.ObjectId).toHexString(),pipeline:n?[]:t,importPipeline:{isOpen:!!n,isConfirmationNeeded:!1,text:n?e.importPipeline.text:"",syntaxError:n}}},[Tr]:e=>{const t={...e,isOverviewOn:!e.isOverviewOn};return t.pipeline&&t.pipeline.forEach((e=>{e.isExpanded=!t.isOverviewOn})),t.inputDocuments&&(t.inputDocuments.isExpanded=!t.isOverviewOn),t},[_r]:e=>{const t={...e,limit:e.settings.sampleSize,largeLimit:e.settings.limit,comments:e.settings.isCommentMode,maxTimeMS:e.settings.maxTimeMS};return t.settings.isDirty=!1,t},[Cr]:e=>{const t={...e,name:e.savingPipeline.name};return t.savingPipeline.isOpen=!1,t},[Dr]:e=>{const t={...e,projections:[]};return t.pipeline.map(((e,n)=>{e.projections=fe(e,null),e.projections.map((e=>{e.index=n,t.projections.push(e)}))})),t},[Xr]:(e,t)=>{const n=vn(t.text),r=n.length>0?n[0].syntaxError:null;return r||e.pipeline.length>1?e:{...e,name:"",collation:null,collationString:"",isCollationExpanded:!1,id:(new Ee.ObjectId).toHexString(),pipeline:n,importPipeline:{isOpen:!1,isConfirmationNeeded:!1,text:t.text,syntaxError:r}}},[Jr]:(e,t)=>{const n=t.pipeline.map((e=>Cn(Object.keys(e)[0],(0,ue.toJSString)(Object.values(e)[0],"  "),null)));return{...e,editViewName:t.name,isReadonly:t.isReadonly,sourceName:t.sourceName,collation:null,collationString:"",isCollationExpanded:!1,id:(new Ee.ObjectId).toHexString(),pipeline:n,importPipeline:{isOpen:!1,isConfirmationNeeded:!1,text:"",syntaxError:null}}}},ts=(e,t)=>{const n=es[t.type];return n?n(e,t):Qr(e,t)},ns=()=>({type:Wr}),rs=e=>({type:Yr,restoreState:e}),ss=e=>async t=>{const n=Bt().join(Nt(),`${e}.json`);try{const e=await wt().promises.readFile(n,"utf8"),r=JSON.parse(e);t(ns()),t(rs(r)),t((0,Se.globalAppRegistryEmit)("compass:aggregations:pipeline-opened")),t(mt(0))}catch(e){console.log(e)}},as=()=>(e,t)=>{const n=t(),r={source:n.namespace,pipeline:n.pipeline.map((e=>e.executor||be(e))).filter((e=>!Nn()(e)))};Vr("emitting","open-create-view",r),e((0,Se.localAppRegistryEmit)("open-create-view",r))};function os({onAction:e,title:t,glyph:n,menuItems:s,dataTestId:a}){const[o,i]=(0,r.useState)(!1),l=(0,r.useCallback)((t=>{t.stopPropagation(),i(!1),e(t.currentTarget.dataset.action)}),[e]);return r.createElement(p.Menu,{"data-testid":`${a}-content`,open:o,setOpen:i,justify:"start",trigger:({onClick:e,children:s})=>r.createElement(p.Button,{"data-testid":a,title:t,"aria-label":t,variant:"primary",size:"xsmall",leftGlyph:r.createElement(p.Icon,{glyph:n}),onClick:t=>{t.stopPropagation(),e()}},t,s)},s.map((e=>r.createElement(p.MenuItem,{key:e.title,"data-action":e.action,onClick:l,"aria-label":e.title},e.title))))}const is={onSave:e=>""===e?jr():Zt(),onSaveAs:e=>""===e?jr():jr({name:e,isSaveAs:!0}),onCreateView:()=>as()},ls=(0,o.$j)((({name:e,serverVersion:t})=>({pipelineName:e,isCreateViewAvailable:P().gte(t,I)})),is)((({pipelineName:e,isCreateViewAvailable:t,onSave:n,onSaveAs:s,onCreateView:a})=>r.createElement(os,{dataTestId:"save-menu",title:"Save",glyph:"Save",onAction:t=>{switch(t){case"save":return n(e);case"saveAs":return s(e);case"createView":return a()}},menuItems:[{action:"save",title:"Save"},{action:"saveAs",title:"Save as"},t&&{action:"createView",title:"Create view"}].filter(Boolean)}))),ps=(0,o.$j)(null,(e=>({onCreatePipeline:()=>e($r(!0)),onCreatePipelineFromText:()=>e(Ln())})))((({onCreatePipeline:e,onCreatePipelineFromText:t})=>r.createElement(os,{dataTestId:"create-new-menu",title:"Create new",glyph:"Plus",onAction:n=>{switch(n){case"createPipleine":return e();case"createPipleineFromText":return t()}},menuItems:[{action:"createPipleine",title:"Pipeline"},{action:"createPipleineFromText",title:"Pipeline from text"}]})));function ms(){return ms=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ms.apply(this,arguments)}const cs=(0,p.css)({display:"flex",alignItems:"center"}),us=(0,p.css)({maxWidth:"100px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}),gs=(0,p.css)({fontStyle:"italic",whiteSpace:"pre-wrap"}),ds=(0,o.$j)((({name:e,isModified:t})=>({name:e,isModified:t})))((({name:e,isModified:t})=>r.createElement(p.Body,{className:cs,"data-testid":"pipeline-name"},""===e?"Untitled":r.createElement(p.Tooltip,{trigger:({children:t,...n})=>r.createElement("span",ms({},n,{className:us}),t,e)},r.createElement(p.Body,null,e)),t&&r.createElement("span",{className:gs}," - modified")))),hs=(0,p.css)({display:"flex",gap:p.spacing[2],justifyItems:"center"}),Ts=(0,p.css)({display:"flex",alignItems:"center",gap:p.spacing[1]}),ys=(0,p.css)({marginBottom:0,padding:0,textTransform:"uppercase",margin:"inherit !important"}),fs={onToggleAutoPreview:cr,onToggleSettings:Ir},bs=(0,o.$j)((({autoPreview:e})=>({isAutoPreview:e})),fs)((({isAutoPreview:e,onToggleAutoPreview:t,onToggleSettings:n})=>r.createElement("div",{className:hs,"data-testid":"pipeline-toolbar-extra-settings"},r.createElement("div",{className:Ts},r.createElement(p.Toggle,{id:"auto-preview",size:"small","aria-label":"Toggle Auto Preview",onChange:()=>t(),"data-testid":"pipeline-toolbar-preview-toggle",checked:e}),r.createElement(p.Label,{className:ys,htmlFor:"auto-preview"},"Auto Preview")),r.createElement(p.IconButton,{"aria-label":"More Settings",onClick:()=>n(),"data-testid":"pipeline-toolbar-settings-button"},r.createElement(p.Icon,{glyph:"Settings"}))))),Ss=(0,p.css)({display:"grid",gap:p.spacing[2],gridTemplateAreas:'"settings extraSettings"',alignItems:"center"}),As=(0,p.css)({display:"flex",gap:p.spacing[2],alignItems:"center"}),Es=(0,p.css)({gridArea:"extraSettings",justifySelf:"end",display:"flex"}),_s=(0,o.$j)(null,{onExportToLanguage:dn})((({onExportToLanguage:e})=>r.createElement("div",{className:Ss,"data-testid":"pipeline-settings"},r.createElement("div",{className:As},r.createElement(ds,null),r.createElement(ls,null),r.createElement(ps,null),r.createElement(p.Button,{variant:"primaryOutline",size:"xsmall",leftGlyph:r.createElement(p.Icon,{glyph:"Export"}),onClick:()=>e(),"data-testid":"pipeline-toolbar-export-button"},"Export to language")),r.createElement("div",{className:Es},r.createElement(bs,null))))),xs=(0,p.css)({paddingTop:p.spacing[3],paddingRight:p.spacing[5],paddingBottom:p.spacing[3],paddingLeft:p.spacing[3]}),Is=(0,p.css)({display:"grid",gap:p.spacing[4],gridTemplateAreas:'\n  "headerAndOptionsRow"\n  ',marginLeft:p.spacing[1],marginRight:p.spacing[1]}),Ls=(0,p.css)({gridTemplateAreas:'\n  "headerAndOptionsRow"\n  "settingsRow"\n  '}),vs=(0,p.css)({gridArea:"headerAndOptionsRow",border:"1px solid",borderRadius:"6px",borderColor:p.uiColors.gray.light2,padding:p.spacing[2]}),Cs=(0,p.css)({gridArea:"settingsRow"}),Rs=(0,o.$j)((({workspace:e})=>({isSettingsVisible:"builder"===e})))((({isSettingsVisible:e})=>{const[t,n]=(0,r.useState)(!1);return r.createElement("div",{className:(0,p.cx)(xs,Is,e&&Ls),"data-testid":"pipeline-toolbar"},r.createElement("div",{className:vs},r.createElement(nn,{isOptionsVisible:t,onToggleOptions:()=>n(!t)}),t&&r.createElement(gn,null)),e&&r.createElement("div",{className:Cs},r.createElement(_s,null)))}));var Os=n(77807);class Ns extends r.PureComponent{render(){return r.createElement("div",{className:"resize-handle-module-resize-handle__1Nynw"})}}class js extends r.PureComponent{static displayName="DeleteStageComponent";static propTypes={index:a().number.isRequired,runStage:a().func.isRequired,stageDeleted:a().func.isRequired,setIsModified:a().func.isRequired};onStageDeleted=()=>{this.props.stageDeleted(this.props.index),this.props.setIsModified(!0),this.props.runStage(this.props.index)};render(){return r.createElement("div",{className:l()("delete-stage-module-delete-stage__8OSiF")},r.createElement("button",{"data-test-id":"delete-stage",type:"button",title:"Delete Stage",className:"btn btn-default btn-xs",onClick:this.onStageDeleted},r.createElement("i",{className:"fa fa-trash-o","aria-hidden":!0})))}}const ws=js;class Ds extends r.PureComponent{static displayName="AddAfterStageComponent";static propTypes={index:a().number.isRequired,stageAddedAfter:a().func.isRequired};onStageAddedAfter=()=>{this.props.stageAddedAfter(this.props.index)};render(){return r.createElement("div",{className:l()("add-after-stage-module-add-after-stage__1UYg8"),"data-tip":"Add stage below","data-place":"top","data-for":"add-after-stage"},r.createElement("button",{"data-test-id":"add-after-stage",type:"button",title:"Add After Stage",className:"btn btn-default btn-xs",onClick:this.onStageAddedAfter},"+"),r.createElement(O.Tooltip,{id:"add-after-stage"}))}}const Bs=Ds;class Ms extends r.PureComponent{static displayName="ToggleStageComponent";static propTypes={isEnabled:a().bool.isRequired,index:a().number.isRequired,runStage:a().func.isRequired,stageToggled:a().func.isRequired,setIsModified:a().func.isRequired};onStageToggled=()=>{this.props.stageToggled(this.props.index),this.props.setIsModified(!0),this.props.runStage(this.props.index)};render(){const e=this.props.isEnabled?"Exclude stage from pipeline":"Include stage in pipeline";return r.createElement("div",{className:"toggle-stage-module-toggle-stage__1_Mhc","data-for":"toggle-stage","data-tip":e,"data-place":"top"},r.createElement(p.Toggle,{id:"toggle-stage-button",checked:this.props.isEnabled,onChange:this.onStageToggled,className:"toggle-stage-module-toggle-stage-button__3KjVA","aria-label":e,size:"small"}),r.createElement(O.Tooltip,{id:"toggle-stage"}))}}const $s=Ms;class ks extends r.PureComponent{static displayName="StageGrabberComponent";render(){return r.createElement("div",{className:"stage-grabber-module-stage-grabber__38bSH"},r.createElement("i",{className:"fa fa-bars fa-rotate-90","aria-hidden":!0}))}}const Ps=ks;class Fs extends r.PureComponent{static displayName="StageCollapserComponent";static propTypes={isExpanded:a().bool.isRequired,index:a().number.isRequired,stageCollapseToggled:a().func.isRequired,setIsModified:a().func.isRequired};onStageCollapseToggled=()=>{this.props.stageCollapseToggled(this.props.index),this.props.setIsModified(!0)};render(){const e=this.props.isExpanded?"fa fa-angle-down":"fa fa-angle-right",t=this.props.isExpanded?"Collapse":"Expand";return r.createElement("div",{className:l()("stage-collapser-module-stage-collapser__32n4y")},r.createElement("button",{type:"button",title:t,onClick:this.onStageCollapseToggled,className:"btn btn-default btn-xs"},r.createElement("i",{className:e,"aria-hidden":!0})))}}const Us=Fs;var qs=n(3681);function Gs(){return Gs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gs.apply(this,arguments)}class Hs extends r.Component{static propTypes={option:a().object.isRequired,className:a().string,children:a().node};render(){const{option:e}=this.props;return r.createElement("div",{"data-tip":e.description,"data-place":"right","data-for":`select-option-${e.name}`},r.createElement(qs.Wx,Gs({},this.props,{className:"select-option-with-tooltip-module-option__GKL2T "+this.props.className}),this.props.children,je(e.env)&&r.createElement(p.AtlasLogoMark,{size:12,className:"select-option-with-tooltip-module-optionIcon__kGl8X"})),r.createElement(O.Tooltip,{className:"select-option-with-tooltip-module-tooltip__22fnj",id:`select-option-${e.name}`}))}}const Vs=Hs;class Ks extends r.PureComponent{static displayName="StageOperatorSelectComponent";static propTypes={allowWrites:a().bool.isRequired,env:a().string.isRequired,isTimeSeries:a().bool.isRequired,isReadonly:a().bool.isRequired,sourceName:a().string,stageOperator:a().string,index:a().number.isRequired,isEnabled:a().bool.isRequired,isCommenting:a().bool.isRequired,stageOperatorSelected:a().func.isRequired,serverVersion:a().string.isRequired,setIsModified:a().func.isRequired};onStageOperatorSelected=e=>{this.props.stageOperatorSelected(this.props.index,e,this.props.isCommenting,this.props.env),this.props.setIsModified(!0)};render(){const e=(({serverVersion:e,allowWrites:t,env:n,isTimeSeries:r,isReadonly:s,sourceName:a})=>{const o=P().parse(e),i=o?[o.major,o.minor,o.patch].join("."):e;return ce.STAGE_OPERATORS.filter((e=>!(({oName:e,allowWrites:t})=>[ve,Ce].includes(e)&&!t)({oName:e.name,allowWrites:t})&&!(({oName:e,isTimeSeries:t,isReadonly:n,sourceName:r})=>[Re,Oe,Ne].includes(e)&&(t||n&&!!r))({oName:e.name,isTimeSeries:r,isReadonly:s,sourceName:a})&&((({oVersion:e,version:t})=>P().gte(t,e))({oVersion:e.version,version:i})&&(({oEnv:e,env:t})=>!e||!t||e.includes(t))({oEnv:e.env,env:n})||je(e.env))))})({serverVersion:this.props.serverVersion,allowWrites:this.props.allowWrites,env:this.props.env,isTimeSeries:this.props.isTimeSeries,isReadonly:this.props.isReadonly,sourceName:this.props.sourceName});return r.createElement("div",{className:"stage-operator-select-module-stage-operator-select__3GKV5"},r.createElement(qs.ZP,{optionComponent:Vs,simpleValue:!0,searchable:!0,openOnClick:!0,openOnFocus:!0,clearable:!1,disabled:!this.props.isEnabled,className:"stage-operator-select-module-stage-operator-select-control__1rJ7K",options:e,value:this.props.stageOperator,onChange:this.onStageOperatorSelected}))}}const Ws=Ks;class Ys extends r.PureComponent{static displayName="StageEditorToolbar";static propTypes={allowWrites:a().bool.isRequired,connectDragSource:a().func.isRequired,env:a().string.isRequired,isTimeSeries:a().bool.isRequired,isReadonly:a().bool.isRequired,sourceName:a().string,error:a().string,isExpanded:a().bool.isRequired,isEnabled:a().bool.isRequired,stageOperator:a().string,index:a().number.isRequired,serverVersion:a().string.isRequired,stageOperatorSelected:a().func.isRequired,stageCollapseToggled:a().func.isRequired,stageToggled:a().func.isRequired,stageAddedAfter:a().func.isRequired,stageDeleted:a().func.isRequired,setIsModified:a().func.isRequired,isCommenting:a().bool.isRequired,runStage:a().func.isRequired};render(){const{connectDragSource:e}=this.props;return e(r.createElement("div",{className:l()("stage-editor-toolbar-module-stage-editor-toolbar__1wmGK",{"stage-editor-toolbar-module-stage-editor-toolbar-errored__1yeQY":this.props.error})},r.createElement(Ps,null),r.createElement(Us,{isExpanded:this.props.isExpanded,index:this.props.index,setIsModified:this.props.setIsModified,stageCollapseToggled:this.props.stageCollapseToggled}),r.createElement(Ws,{allowWrites:this.props.allowWrites,env:this.props.env,isTimeSeries:this.props.isTimeSeries,isReadonly:this.props.isReadonly,sourceName:this.props.sourceName,stageOperator:this.props.stageOperator,index:this.props.index,isEnabled:this.props.isEnabled,isCommenting:this.props.isCommenting,stageOperatorSelected:this.props.stageOperatorSelected,setIsModified:this.props.setIsModified,serverVersion:this.props.serverVersion}),r.createElement($s,{index:this.props.index,isEnabled:this.props.isEnabled,runStage:this.props.runStage,setIsModified:this.props.setIsModified,stageToggled:this.props.stageToggled}),r.createElement("div",{className:"stage-editor-toolbar-module-stage-editor-toolbar-right__2Z_DP"},r.createElement(ws,{index:this.props.index,runStage:this.props.runStage,setIsModified:this.props.setIsModified,stageDeleted:this.props.stageDeleted}),r.createElement(Bs,{index:this.props.index,stageAddedAfter:this.props.stageAddedAfter}))))}}const zs=Ys;var Zs=n(80594),Xs=n.n(Zs);const Js={enableLiveAutocompletion:!0,tabSize:2,fontSize:11,minLines:5,maxLines:1/0,showGutter:!0,useWorker:!1,mode:"ace/mode/mongodb"};class Qs extends r.Component{static displayName="StageEditorComponent";static propTypes={stage:a().string,stageOperator:a().string,snippet:a().string,error:a().string,syntaxError:a().string,runStage:a().func.isRequired,index:a().number.isRequired,serverVersion:a().string.isRequired,fields:a().array.isRequired,stageChanged:a().func.isRequired,isAutoPreviewing:a().bool.isRequired,isValid:a().bool.isRequired,fromStageOperators:a().bool.isRequired,setIsModified:a().func.isRequired,projections:a().array.isRequired,projectionsChanged:a().func.isRequired,newPipelineFromPaste:a().func.isRequired};static defaultProps={fields:[],projections:[]};constructor(e){super(e);const t=te().textCompleter;this.completer=new ce.StageAutoCompleter(this.props.serverVersion,t,this.getFieldsAndProjections(),this.props.stageOperator),this.debounceRun=Xs()(this.onRunStage,750)}shouldComponentUpdate(e){return e.stageOperator!==this.props.stageOperator||e.error!==this.props.error||e.syntaxError!==this.props.syntaxError||e.index!==this.props.index||e.serverVersion!==this.props.serverVersion||e.fields.length!==this.props.fields.length||e.projections.length!==this.props.projections.length||e.isValid!==this.props.isValid}componentDidUpdate(e){this.completer.update(this.getFieldsAndProjections(),this.props.stageOperator),this.completer.version=this.props.serverVersion,this.props.stageOperator!==e.stageOperator&&this.editor&&(this.editor.setValue(""),this.editor.insertSnippet(this.props.snippet||""),this.editor.focus())}onStageChange=e=>{if(null===this.props.stageOperator&&e&&"["===e.charAt(0))return this.props.newPipelineFromPaste(e),void this.props.runStage(0);this.props.stageChanged(e,this.props.index),this.props.projectionsChanged(),this.props.setIsModified(!0),!1!==this.props.fromStageOperators&&"$indexStats"!==this.props.stageOperator||!this.props.isAutoPreviewing||this.debounceRun()};onRunStage=()=>{this.props.runStage(this.props.index)};getFieldsAndProjections(){const{fields:e,projections:t,index:n}=this.props,r=t.filter((e=>e.index<n));return[].concat.call([],e,r)}renderError(){if(this.props.error)return r.createElement("div",{"data-test-id":"stage-editor-error-message",className:"stage-editor-module-stage-editor-errormsg__1obh7",title:this.props.error},this.props.error)}renderSyntaxError(){if(!this.props.isValid)return r.createElement("div",{className:"stage-editor-module-stage-editor-syntax-error__1qdZr",title:this.props.syntaxError},this.props.syntaxError)}render(){return r.createElement("div",{className:"stage-editor-module-stage-editor-container__2z3c3"},r.createElement("div",{className:"stage-editor-module-stage-editor__KustH"},r.createElement(Q.default,{className:"stage-editor-module-stage-editor-ace-editor__1Hdqb",mode:"javascript",theme:"mongodb",width:"100%",value:this.props.stage,onChange:this.onStageChange,editorProps:{$blockScrolling:1/0},name:`aggregations-stage-editor-${this.props.index}`,setOptions:Js,onFocus:()=>{te().setCompleters([this.completer])},onLoad:e=>{this.editor=e,this.editor.commands.addCommand({name:"executePipeline",bindKey:{win:"Ctrl-Enter",mac:"Command-Enter"},exec:()=>{this.onRunStage()}})}})),this.renderSyntaxError(),this.renderError())}}const ea=Qs;var ta=n(37861),na=n(74727),ra=n.n(na);class sa extends r.PureComponent{static displayName="LoadingOverlay";static propTypes={text:a().string.isRequired};render(){return r.createElement("div",{className:"loading-overlay-module-loading-overlay__1mmsY"},r.createElement("div",{className:"loading-overlay-module-loading-overlay-box__3BdlO"},r.createElement("i",{className:"fa fa-circle-o-notch fa-spin","aria-hidden":!0}),r.createElement("div",{className:"loading-overlay-module-loading-overlay-box-text__2ofkz"},this.props.text)))}}const aa=sa,oa={"stage-preview":"stage-preview-module-stage-preview__36LJp","stage-preview-empty":"stage-preview-module-stage-preview-empty__o8Dmp","stage-preview-missing-search-support":"stage-preview-module-stage-preview-missing-search-support__3DSAO","stage-preview-missing-search-support-text":"stage-preview-module-stage-preview-missing-search-support-text__1O6HM","stage-preview-out":"stage-preview-module-stage-preview-out__2ZPJV","stage-preview-out-text":"stage-preview-module-stage-preview-out-text__YYI6N","stage-preview-out-button":"stage-preview-module-stage-preview-out-button__2gBrw","stage-preview-out-link":"stage-preview-module-stage-preview-out-link__3Z5j-","stage-preview-documents":"stage-preview-module-stage-preview-documents__1UAEZ","stage-preview-document-card":"stage-preview-module-stage-preview-document-card__3v-vS"},{track:ia}=(0,y.default)("COMPASS-AGGREGATIONS-UI");class la extends r.Component{static displayName="StagePreview";static propTypes={runOutStage:a().func.isRequired,gotoOutResults:a().func.isRequired,gotoMergeResults:a().func.isRequired,documents:a().array.isRequired,error:a().string,isValid:a().bool.isRequired,isEnabled:a().bool.isRequired,isLoading:a().bool.isRequired,isComplete:a().bool.isRequired,isMissingAtlasOnlyStageSupport:a().bool,openLink:a().func.isRequired,index:a().number.isRequired,stageOperator:a().string,stage:a().string};onGotoMergeResults=()=>{this.props.gotoMergeResults(this.props.index)};onGotoOutResults=()=>{const e=he()(this.props.stage).replace(/['"]+/g,"");this.props.gotoOutResults(e)};onSaveDocuments=()=>{this.props.runOutStage(this.props.index)};onAtlasSignupCtaClicked=()=>{ia("Atlas Link Clicked",{screen:"agg_builder"}),this.props.openLink("https://www.mongodb.com/cloud/atlas/lp/search-1?utm_campaign=atlas_search&utm_source=compass&utm_medium=product&utm_content=v1")};renderMergeSection(){return this.props.isComplete?this.props.error?r.createElement("div",{className:oa["stage-preview-out"]}):r.createElement("div",{className:oa["stage-preview-out"]},r.createElement("div",{className:oa["stage-preview-out-text"]},"Documents persisted to collection specified by $merge."),r.createElement(p.Link,{"data-test-id":"go-to-merge-collection",as:"button",className:oa["stage-preview-out-link"],onClick:this.onGotoMergeResults},"Go to collection.")):r.createElement("div",{className:oa["stage-preview-out"]},r.createElement("div",{className:oa["stage-preview-out-text"]},"The $merge operator will cause the pipeline to persist the results to the specified location. Please confirm to execute."),r.createElement("div",{className:oa["stage-preview-out-button"]},r.createElement(m.TextButton,{dataTestId:"save-merge-documents",text:"Merge Documents",className:"btn btn-xs btn-primary",clickHandler:this.onSaveDocuments})))}renderOutSection(){return this.props.isComplete?this.props.error?r.createElement("div",{className:oa["stage-preview-out"]}):r.createElement("div",{className:oa["stage-preview-out"]},r.createElement("div",{className:oa["stage-preview-out-text"]},"Documents persisted to collection: ",he()(this.props.stage),"."),r.createElement(p.Link,{"data-test-id":"go-to-out-collection",as:"button",className:oa["stage-preview-out-link"],onClick:this.onGotoOutResults},"Go to collection.")):r.createElement("div",{className:oa["stage-preview-out"]},r.createElement("div",{className:oa["stage-preview-out-text"]},"The $out operator will cause the pipeline to persist the results to the specified location (collection, S3, or Atlas). If the collection exists it will be replaced. Please confirm to execute."),r.createElement("div",{className:oa["stage-preview-out-button"]},r.createElement(m.TextButton,{dataTestId:"save-out-documents",text:"Save Documents",className:"btn btn-xs btn-primary",clickHandler:this.onSaveDocuments})))}renderAtlasOnlyStagePreviewSection(){return r.createElement("div",{className:oa["stage-preview-missing-search-support"]},r.createElement(p.AtlasLogoMark,{size:30,className:oa["stage-preview-missing-search-support-icon"]}),r.createElement("div",{"data-test-id":"stage-preview-missing-search-support",className:oa["stage-preview-missing-search-support-text"]},"This stage is only available with MongoDB Atlas. Create a free cluster or connect to an Atlas cluster to build search indexes and use ",this.props.stageOperator," aggregation stage to run fast, relevant search queries."),r.createElement(m.TextButton,{text:"Create Free Cluster",className:"btn btn-xs btn-primary",clickHandler:this.onAtlasSignupCtaClicked}))}renderPreview(){if(this.props.isMissingAtlasOnlyStageSupport)return this.renderAtlasOnlyStagePreviewSection();if(this.props.isValid&&this.props.isEnabled){if(this.props.stageOperator===Ye)return this.renderOutSection();if(this.props.stageOperator===ze)return this.renderMergeSection();if(this.props.documents.length>0){const e=this.props.documents.map(((e,t)=>r.createElement("div",{key:t,className:oa["stage-preview-document-card"]},r.createElement(ta.Document,{doc:new(ra())(e),editable:!1}))));return r.createElement("div",{className:oa["stage-preview-documents"]},e)}}return this.props.isLoading?void 0:r.createElement("div",{className:oa["stage-preview-empty"]},r.createElement("div",null,r.createElement("svg",{width:"44",height:"60",viewBox:"0 0 44 60",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{d:"M21.9297 38.2988C23.4783 35.1247 27.7679 30.0989 32.5375 35.3879"}),r.createElement("path",{d:"M1 10.7831V51.3133L9.61538 59M1 10.7831L35.4615 1L43 5.19277M1 10.7831L10.1538 15.6747M9.61538 59L43 45.7229C39.9487 34.0763 38 22.5957 43 5.19277M9.61538 59C5.5 34.9362 7.46154 20.3333 10.1538 15.6747M43 5.19277L10.1538 15.6747"}),r.createElement("path",{d:"M19.7174 26.7113C19.7734 27.324 19.6719 27.8684 19.4884 28.2491C19.2999 28.6402 19.0726 28.7786 18.9038 28.7941C18.7349 28.8095 18.4862 28.7146 18.2299 28.3642C17.9804 28.0232 17.7818 27.5063 17.7257 26.8935C17.6696 26.2808 17.7711 25.7364 17.9546 25.3557C18.1432 24.9646 18.3704 24.8262 18.5393 24.8107C18.7082 24.7953 18.9568 24.8902 19.2132 25.2406C19.4627 25.5816 19.6613 26.0985 19.7174 26.7113Z",fill:"#89979B"}),r.createElement("path",{d:"M32.481 23.5351C32.5371 24.1479 32.4356 24.6923 32.2521 25.0729C32.0636 25.464 31.8363 25.6025 31.6674 25.6179C31.4985 25.6334 31.2499 25.5385 30.9935 25.1881C30.744 24.847 30.5454 24.3301 30.4894 23.7174C30.4333 23.1046 30.5348 22.5602 30.7183 22.1796C30.9068 21.7885 31.1341 21.65 31.303 21.6346C31.4719 21.6191 31.7205 21.714 31.9769 22.0644C32.2264 22.4055 32.425 22.9224 32.481 23.5351Z",fill:"#89979B"}))),r.createElement("div",null,r.createElement("i",{"data-test-id":"stage-preview-empty"},"No Preview Documents")))}renderLoading(){if(this.props.isLoading)return this.props.stageOperator===Ye?r.createElement(aa,{text:"Persisting Documents..."}):r.createElement(aa,{text:"Loading Preview Documents..."})}render(){return r.createElement("div",{className:oa["stage-preview"]},this.renderLoading(),this.renderPreview())}}const pa=la,ma={"stage-preview-toolbar":"stage-preview-toolbar-module-stage-preview-toolbar__2_EjI","stage-preview-toolbar-link":"stage-preview-toolbar-module-stage-preview-toolbar-link__BsZEM","stage-preview-toolbar-errored":"stage-preview-toolbar-module-stage-preview-toolbar-errored__1jA8j"},ca=/s3:/,ua=/atlas:/;class ga extends r.PureComponent{static displayName="StagePreviewToolbar";static propTypes={error:a().string,isEnabled:a().bool.isRequired,isValid:a().bool.isRequired,stageOperator:a().string,stageValue:a().any,count:a().number.isRequired,openLink:a().func.isRequired};getWord(){return 1===this.props.count?"document":"documents"}getOutText(){try{const e=he()(this.props.stageValue);return e.match(ca)?"Documents will be saved to S3.":e.match(ua)?"Documents will be saved to Atlas cluster.":`Documents will be saved to the collection: ${e}`}catch(e){return"Unable to parse the destination for the out stage."}}getText(){if(this.props.isEnabled){if(this.props.stageOperator){if(this.props.stageOperator===Ye&&this.props.isValid)return this.getOutText();const e=L[this.props.stageOperator];let t=null;return t=e?r.createElement(p.Link,{as:"button",className:ma["stage-preview-toolbar-link"],onClick:this.props.openLink.bind(this,e.link)},this.props.stageOperator):r.createElement("span",{className:ma["stage-preview-toolbar-link-invalid"]},this.props.stageOperator),r.createElement("div",null,r.createElement("span",null,"Output after ",t," stage"),this.renderInfoSprinkle(e),r.createElement("span",{"data-test-id":"stage-preview-toolbar-tooltip"},"(Sample of ",this.props.count," ",this.getWord(),")"))}return"A sample of the aggregated results from this stage will be shown below"}return"Stage is disabled. Results not passed in the pipeline."}renderInfoSprinkle(e){if(this.props.stageOperator)return e?r.createElement("span",{"data-tip":e.tooltip,"data-for":"stage-tooltip","data-place":"top","data-html":"true"},r.createElement(O.InfoSprinkle,{onClickHandler:this.props.openLink,helpLink:e.link}),r.createElement(O.Tooltip,{id:"stage-tooltip"})):r.createElement("span",null," ")}render(){return r.createElement("div",{className:l()(ma["stage-preview-toolbar"],{[ma["stage-preview-toolbar-errored"]]:this.props.error})},this.getText())}}const da=ga,ha={"stage-container":"stage-module-stage-container__3MDJj","stage-container-is-first":"stage-module-stage-container-is-first__3wN4H",stage:"stage-module-stage__1mfy-","stage-errored":"stage-module-stage-errored__y31j8","stage-editor-container":"stage-module-stage-editor-container__L0uDj","stage-preview-container":"stage-module-stage-preview-container__3Wqkd","stage-resize-handle-wrapper":"stage-module-stage-resize-handle-wrapper__2AJN1","stage-workspace":"stage-module-stage-workspace__2ElO1"},Ta={top:!1,right:!0,bottom:!1,left:!1,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1};class ya extends r.Component{static displayName="StageComponent";static propTypes={allowWrites:a().bool.isRequired,env:a().string.isRequired,isTimeSeries:a().bool.isRequired,isReadonly:a().bool.isRequired,sourceName:a().string,connectDragSource:a().func.isRequired,stage:a().string.isRequired,stageOperator:a().string,snippet:a().string,error:a().string,syntaxError:a().string,isValid:a().bool.isRequired,isEnabled:a().bool.isRequired,isExpanded:a().bool.isRequired,isLoading:a().bool.isRequired,isComplete:a().bool.isRequired,isMissingAtlasOnlyStageSupport:a().bool,fromStageOperators:a().bool.isRequired,previewDocuments:a().array.isRequired,index:a().number.isRequired,isCommenting:a().bool.isRequired,isAutoPreviewing:a().bool.isRequired,runStage:a().func.isRequired,runOutStage:a().func.isRequired,gotoOutResults:a().func.isRequired,gotoMergeResults:a().func.isRequired,serverVersion:a().string.isRequired,stageChanged:a().func.isRequired,stageCollapseToggled:a().func.isRequired,stageAddedAfter:a().func.isRequired,stageDeleted:a().func.isRequired,stageMoved:a().func.isRequired,stageOperatorSelected:a().func.isRequired,stageToggled:a().func.isRequired,openLink:a().func.isRequired,fields:a().array.isRequired,setIsModified:a().func.isRequired,projections:a().array.isRequired,projectionsChanged:a().func.isRequired,newPipelineFromPaste:a().func.isRequired};shouldComponentUpdate(e){return e.stageOperator!==this.props.stageOperator||e.snippet!==this.props.snippet||e.error!==this.props.error||e.syntaxError!==this.props.syntaxError||e.isValid!==this.props.isValid||e.isEnabled!==this.props.isEnabled||e.isExpanded!==this.props.isExpanded||e.isLoading!==this.props.isLoading||e.isComplete!==this.props.isComplete||e.isMissingAtlasOnlyStageSupport!==this.props.isMissingAtlasOnlyStageSupport||e.fromStageOperators!==this.props.fromStageOperators||e.index!==this.props.index||e.isCommenting!==this.props.isCommenting||e.isAutoPreviewing!==this.props.isAutoPreviewing||e.serverVersion!==this.props.serverVersion||e.fields.length!==this.props.fields.length||e.projections.length!==this.props.projections.length||"$out"===this.props.stageOperator&&e.stage!==this.props.stage}getOpacity(){return this.props.isEnabled?1:.6}renderEditor(){return r.createElement(Os.e,{className:ha["stage-editor"],defaultSize:{width:"388px",height:"auto"},minWidth:"260px",maxWidth:"92%",enable:Ta,ref:e=>{this.resizableRef=e},handleWrapperClass:ha["stage-resize-handle-wrapper"],handleComponent:{right:r.createElement(Ns,null)}},r.createElement(zs,{allowWrites:this.props.allowWrites,connectDragSource:this.props.connectDragSource,env:this.props.env,isTimeSeries:this.props.isTimeSeries,isReadonly:this.props.isReadonly,sourceName:this.props.sourceName,isExpanded:this.props.isExpanded,isEnabled:this.props.isEnabled,stageOperator:this.props.stageOperator,index:this.props.index,stageOperatorSelected:this.props.stageOperatorSelected,stageCollapseToggled:this.props.stageCollapseToggled,stageToggled:this.props.stageToggled,runStage:this.props.runStage,isCommenting:this.props.isCommenting,stageAddedAfter:this.props.stageAddedAfter,stageDeleted:this.props.stageDeleted,setIsModified:this.props.setIsModified,serverVersion:this.props.serverVersion}),this.props.isExpanded&&r.createElement(ea,{stage:this.props.stage,stageOperator:this.props.stageOperator,snippet:this.props.snippet,error:this.props.error,syntaxError:this.props.syntaxError,isValid:this.props.isValid,fromStageOperators:this.props.fromStageOperators,runStage:this.props.runStage,index:this.props.index,serverVersion:this.props.serverVersion,setIsModified:this.props.setIsModified,isAutoPreviewing:this.props.isAutoPreviewing,fields:this.props.fields,stageChanged:this.props.stageChanged,projections:this.props.projections,projectionsChanged:this.props.projectionsChanged,newPipelineFromPaste:this.props.newPipelineFromPaste}))}renderPreview(){return r.createElement("div",{className:ha["stage-preview-container"]},r.createElement(da,{isEnabled:this.props.isEnabled,isValid:this.props.isValid,stageOperator:this.props.stageOperator,stageValue:this.props.stage,count:this.props.previewDocuments.length,openLink:this.props.openLink}),this.props.isExpanded&&r.createElement(pa,{documents:this.props.previewDocuments,isValid:this.props.isValid,isEnabled:this.props.isEnabled,isLoading:this.props.isLoading,isComplete:this.props.isComplete,isMissingAtlasOnlyStageSupport:this.props.isMissingAtlasOnlyStageSupport,error:this.props.error,stageOperator:this.props.stageOperator,stage:this.props.stage,index:this.props.index,runOutStage:this.props.runOutStage,gotoOutResults:this.props.gotoOutResults,gotoMergeResults:this.props.gotoMergeResults,openLink:this.props.openLink}))}render(){const e=this.getOpacity();return r.createElement("div",{"data-test-id":"stage-container","data-stage-index":this.props.index,className:l()(ha["stage-container"],{[ha["stage-container-is-first"]]:0===this.props.index})},r.createElement("div",{className:l()(ha.stage,{[ha["stage-errored"]]:this.props.error}),style:{opacity:e}},this.renderEditor(),this.renderPreview()))}}const fa=ya;class ba extends r.PureComponent{static displayName="InputCollapserComponent";static propTypes={isExpanded:a().bool.isRequired,toggleInputDocumentsCollapsed:a().func.isRequired};render(){const e=this.props.isExpanded?"fa fa-angle-down":"fa fa-angle-right",t=this.props.isExpanded?"Collapse":"Expand";return r.createElement("div",{className:l()("input-collapser-module-input-collapser__3uaex")},r.createElement("button",{type:"button",title:t,onClick:this.props.toggleInputDocumentsCollapsed,className:"btn btn-default btn-xs"},r.createElement("i",{className:e,"aria-hidden":!0})))}}const Sa=ba;class Aa extends r.PureComponent{static displayName="InputDocumentsCountComponent";static propTypes={count:a().oneOfType([a().number,a().string]).isRequired};render(){const e=l()({fa:!0,"fa-database":!0,"input-documents-count-module-input-documents-count-db__3-aF8":!0});return r.createElement("div",{className:l()("input-documents-count-module-input-documents-count__2iiKH")},r.createElement("i",{className:e,"aria-hidden":!0}),r.createElement("div",{className:l()("input-documents-count-module-input-documents-count-label__3luKy")},this.props.count," Documents in the Collection"))}}const Ea=Aa;class _a extends r.PureComponent{static displayName="InputRefreshComponent";static propTypes={refreshInputDocuments:a().func.isRequired};render(){return r.createElement("div",{className:"input-refresh-module-input-refresh__JzWcV"},r.createElement("button",{type:"button",title:"Refresh Documents",onClick:this.props.refreshInputDocuments,className:"btn btn-default btn-xs"},r.createElement("i",{className:"fa fa-repeat","aria-hidden":!0})))}}const xa=_a;class Ia extends r.PureComponent{static displayName="InputBuilderToolbar";static propTypes={toggleInputDocumentsCollapsed:a().func.isRequired,refreshInputDocuments:a().func.isRequired,isExpanded:a().bool.isRequired,count:a().oneOfType([a().number,a().string]).isRequired};render(){return r.createElement("div",{className:l()("input-builder-toolbar-module-input-builder-toolbar__1yirD")},r.createElement(Sa,{toggleInputDocumentsCollapsed:this.props.toggleInputDocumentsCollapsed,isExpanded:this.props.isExpanded}),r.createElement(Ea,{count:this.props.count}),r.createElement(xa,{refreshInputDocuments:this.props.refreshInputDocuments}))}}const La=Ia,va=()=>r.createElement("div",{className:l()("input-preview-toolbar-module-input-preview-toolbar__1yeSk")},r.createElement("div",{className:l()("input-preview-toolbar-module-input-preview-toolbar-text__3oKY5")},"Preview of Documents in the Collection"));va.displayName="InputPreviewToolbar";const Ca=va;class Ra extends r.PureComponent{static displayName="InputToolbarComponent";static propTypes={toggleInputDocumentsCollapsed:a().func.isRequired,refreshInputDocuments:a().func.isRequired,isExpanded:a().bool.isRequired,count:a().oneOfType([a().number,a().string]).isRequired};render(){return r.createElement("div",{className:"input-toolbar-module-input-toolbar__DiE2P"},r.createElement(La,{toggleInputDocumentsCollapsed:this.props.toggleInputDocumentsCollapsed,refreshInputDocuments:this.props.refreshInputDocuments,isExpanded:this.props.isExpanded,count:this.props.count}),r.createElement(Ca,null))}}const Oa=Ra;class Na extends r.PureComponent{static displayName="InputBuilderComponent";render(){return r.createElement("div",{className:"input-builder-module-input-builder__fCiW7"},"Select an operator to construct expressions used in the aggregation pipeline stages. ",r.createElement(p.Link,{href:"https://docs.mongodb.com/manual/reference/operator/aggregation-pipeline/"},"Learn more"))}}const ja=Na;class wa extends r.Component{static displayName="InputPreview";static propTypes={documents:a().array.isRequired,isLoading:a().bool.isRequired};render(){const e=this.props.documents.map(((e,t)=>r.createElement("div",{key:t,className:"input-preview-module-input-preview-document-card__m5YDr"},r.createElement(ta.Document,{doc:new(ra())(e),editable:!1}))));return r.createElement("div",{className:"input-preview-module-input-preview__1ligq"},this.props.isLoading?r.createElement(aa,{text:"Sampling Documents..."}):null,r.createElement("div",{className:"input-preview-module-input-preview-documents__1Ye7w"},e))}}const Da=wa,Ba={"input-workspace":"input-workspace-module-input-workspace__1R0_p"},Ma={top:!1,right:!0,bottom:!1,left:!1,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1};class $a extends r.PureComponent{static displayName="InputWorkspace";static propTypes={documents:a().array.isRequired,isLoading:a().bool.isRequired};render(){return r.createElement("div",{className:Ba["input-workspace"]},r.createElement(Os.e,{defaultSize:{width:"388px",height:"auto"},minWidth:"220px",maxWidth:"92%",enable:Ma,ref:e=>{this.resizableRef=e},handleWrapperClass:Ba["stage-resize-handle-wrapper"],handleComponent:{right:r.createElement(Ns,null)}},r.createElement(ja,null)),r.createElement(Da,{documents:this.props.documents,isLoading:this.props.isLoading}))}}const ka=$a;class Pa extends r.PureComponent{static displayName="InputComponent";static propTypes={toggleInputDocumentsCollapsed:a().func.isRequired,refreshInputDocuments:a().func.isRequired,documents:a().array.isRequired,isLoading:a().bool.isRequired,isExpanded:a().bool.isRequired,count:a().oneOfType([a().number,a().string]).isRequired};render(){const e=this.props.isExpanded?r.createElement(ka,{documents:this.props.documents,isLoading:this.props.isLoading}):null;return r.createElement("div",{className:"input-module-input__2tJKi"},r.createElement(Oa,{toggleInputDocumentsCollapsed:this.props.toggleInputDocumentsCollapsed,refreshInputDocuments:this.props.refreshInputDocuments,isExpanded:this.props.isExpanded,count:this.props.count}),e)}}const Fa=Pa;class Ua extends r.PureComponent{static displayName="AddStageComponent";static propTypes={stageAdded:a().func.isRequired};render(){return r.createElement("div",{className:"add-stage-module-add-stage-container__30V_Q"},r.createElement("div",{className:"add-stage-module-add-stage__1F5P5"},r.createElement(m.TextButton,{dataTestId:"add-stage",text:"Add Stage",className:"btn btn-xs btn-default",clickHandler:this.props.stageAdded})))}}const qa=Ua;var Ga=n(41791),Ha=n(71953),Va=n(72446);const Ka=e=>{const{initialOffset:t,currentOffset:n}=e;if(!t||!n)return{display:"none"};const{x:r,y:s}=n,a=`translate(${r}px, ${s}px)`;return{transform:a,WebkitTransform:a}},Wa=e=>{const{isDragging:t,item:n}=e;return t?r.createElement("div",{className:"custom-drag-layer-module-custom-drag-layer__3Sb88"},r.createElement("div",{style:Ka(e)},r.createElement("div",{className:"custom-drag-layer-module-custom-drag-layer-container__1r4D3"},r.createElement("div",null,n.stageOperator?n.stageOperator:`Stage ${n.index+1}`)))):null};Wa.propTypes={isDragging:a().bool,item:a().object};const Ya=(0,Va.r)((e=>({item:e.getItem(),initialOffset:e.getInitialSourceClientOffset(),currentOffset:e.getSourceClientOffset(),isDragging:e.isDragging()})))(Wa);var za=n(28316),Za=n(88511),Xa=n(13801),Ja=n(42484);class Qa extends r.Component{static propTypes={connectDragSource:a().func.isRequired,connectDropTarget:a().func.isRequired,connectDragPreview:a().func.isRequired,isOver:a().bool.isRequired,isDragging:a().bool.isRequired,index:a().number.isRequired,item:a().object.isRequired,onMove:a().func.isRequired,renderItem:a().func.isRequired};componentDidMount(){const{connectDragPreview:e}=this.props;e&&e((0,Ja.r)(),{captureDraggingState:!0})}render(){return(0,this.props.connectDropTarget)(r.createElement("div",null,this.props.renderItem(this.props.item,this.props.index,this.props.connectDragSource)))}}const eo=(to=function(e){const t={hover(e,t,n){const r=t.getItem().index,s=e.index;if(r!==s){const a=(0,za.findDOMNode)(n).getBoundingClientRect(),o=(a.bottom-a.top)/2,i=t.getClientOffset().y-a.top;if(r<s&&i<o)return;if(r>s&&i>o)return;t.getItem().index=s,e.onMove(r,s)}}};return(0,Xa.G)("stage",t,((e,t)=>({connectDropTarget:e.dropTarget(),isOver:t.isOver()})))(e)}(Qa),(0,Za.E)("stage",{beginDrag:e=>({index:e.index,stageOperator:e.stageOperator})},((e,t)=>({connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()})))(to));var to;let no;function ro(e){return no||(no=(0,Ha.ZP)(e,"undefined"!=typeof window?window:"undefined"!=typeof global?global:null)),no}class so extends r.Component{static propTypes={items:a().array.isRequired,onMove:a().func.isRequired,renderItem:a().func.isRequired};render(){const{items:e,onMove:t,renderItem:n}=this.props;return r.createElement(Ga.W,{backend:ro},r.createElement(Ya,null),e.map(((e,s)=>r.createElement(eo,{key:s,index:s,stageOperator:e.stageOperator,onMove:t,renderItem:n,item:e}))))}}const ao=so,oo=e=>r.createElement(p.Badge,{className:"modify-source-banner-module-modify-source-banner__2oNZr",variant:p.BadgeVariant.Blue},'Modifying pipeline backing "',e.editViewName,'"');oo.propTypes={editViewName:a().string.isRequired};const io=oo;class lo extends r.PureComponent{static displayName="PipelineWorkspace";static propTypes={allowWrites:a().bool.isRequired,editViewName:a().string,env:a().string.isRequired,isTimeSeries:a().bool.isRequired,isReadonly:a().bool.isRequired,sourceName:a().string,pipeline:a().array.isRequired,toggleInputDocumentsCollapsed:a().func.isRequired,refreshInputDocuments:a().func.isRequired,stageAdded:a().func.isRequired,setIsModified:a().func.isRequired,openLink:a().func.isRequired,isCommenting:a().bool.isRequired,isAutoPreviewing:a().bool.isRequired,inputDocuments:a().object.isRequired,runStage:a().func.isRequired,runOutStage:a().func.isRequired,gotoOutResults:a().func.isRequired,gotoMergeResults:a().func.isRequired,serverVersion:a().string.isRequired,stageChanged:a().func.isRequired,stageCollapseToggled:a().func.isRequired,stageAddedAfter:a().func.isRequired,stageDeleted:a().func.isRequired,stageMoved:a().func.isRequired,stageOperatorSelected:a().func.isRequired,stageToggled:a().func.isRequired,fields:a().array.isRequired,isOverviewOn:a().bool.isRequired,projections:a().array.isRequired,projectionsChanged:a().func.isRequired,newPipelineFromPaste:a().func.isRequired};onStageMoved=(e,t)=>{this.props.stageMoved(e,t),this.props.runStage(0)};renderModifyingViewSourceBanner(){if(this.props.editViewName)return r.createElement(io,{editViewName:this.props.editViewName})}renderStage=(e,t,n)=>r.createElement(fa,{allowWrites:this.props.allowWrites,connectDragSource:n,env:this.props.env,isTimeSeries:this.props.isTimeSeries,isReadonly:this.props.isReadonly,sourceName:this.props.sourceName,stage:e.stage,stageOperator:e.stageOperator,snippet:e.snippet,error:e.error,syntaxError:e.syntaxError,isValid:e.isValid,isEnabled:e.isEnabled,isLoading:e.isLoading,isComplete:e.isComplete,isMissingAtlasOnlyStageSupport:e.isMissingAtlasOnlyStageSupport,isExpanded:e.isExpanded,isCommenting:this.props.isCommenting,isAutoPreviewing:this.props.isAutoPreviewing,fromStageOperators:e.fromStageOperators||!1,previewDocuments:e.previewDocuments,runStage:this.props.runStage,index:t,openLink:this.props.openLink,runOutStage:this.props.runOutStage,gotoOutResults:this.props.gotoOutResults,gotoMergeResults:this.props.gotoMergeResults,serverVersion:this.props.serverVersion,stageChanged:this.props.stageChanged,stageCollapseToggled:this.props.stageCollapseToggled,stageAddedAfter:this.props.stageAddedAfter,stageDeleted:this.props.stageDeleted,stageMoved:this.props.stageMoved,stageOperatorSelected:this.props.stageOperatorSelected,stageToggled:this.props.stageToggled,fields:this.props.fields,setIsModified:this.props.setIsModified,key:e.id,isOverviewOn:this.props.isOverviewOn,projections:this.props.projections,projectionsChanged:this.props.projectionsChanged,newPipelineFromPaste:this.props.newPipelineFromPaste});renderStageList=()=>r.createElement(ao,{items:this.props.pipeline,onMove:this.onStageMoved,renderItem:this.renderStage});render(){const e=this.props.inputDocuments;return r.createElement("div",{"data-testid":"pipeline-builder-workspace",className:"pipeline-builder-workspace-module-pipeline-workspace-container-container__1YzmN"},r.createElement("div",{className:"pipeline-builder-workspace-module-pipeline-workspace-container__18Mjz"},r.createElement("div",{className:"pipeline-builder-workspace-module-pipeline-workspace__Gnfv8"},this.renderModifyingViewSourceBanner(),r.createElement(Fa,{toggleInputDocumentsCollapsed:this.props.toggleInputDocumentsCollapsed,refreshInputDocuments:this.props.refreshInputDocuments,documents:e.documents,isLoading:e.isLoading,isExpanded:e.isExpanded,openLink:this.props.openLink,count:e.count,isOverviewOn:this.props.isOverviewOn}),this.renderStageList(),r.createElement(qa,{stageAdded:this.props.stageAdded,setIsModified:this.props.setIsModified}))))}}const po=lo;var mo=n(11586);function co(){return co=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},co.apply(this,arguments)}const uo=(0,p.css)({display:"flex",alignItems:"center",gap:p.spacing[2],flex:"none",marginLeft:"auto"}),go=({value:e,onChange:t})=>{const n=(0,mo.Me)(),s=(0,mo.Me)();return r.createElement("div",{className:uo},r.createElement(p.Overline,{as:"label",id:n,htmlFor:s,"aria-label":"Show documents as"},"View"),r.createElement(p.SegmentedControl,{id:s,"aria-labelledby":n,size:"small",value:e,onChange:t},r.createElement(p.SegmentedControlOption,{"aria-label":"Document list",value:"document"},r.createElement(p.Icon,{size:"small",glyph:"Menu"})),r.createElement(p.SegmentedControlOption,{"aria-label":"JSON list",value:"json"},r.createElement(p.Icon,{size:"small",glyph:"CurlyBraces"}))))},ho=(0,p.css)({display:"grid",flex:1,gridTemplateRows:"1fr auto",gridTemplateColumns:"1fr"}),To=(0,p.css)({display:"flex",paddingLeft:p.spacing[3]+p.spacing[1],paddingRight:p.spacing[5]+p.spacing[1],paddingBottom:p.spacing[3]}),yo=(0,p.css)({flex:1,overflowY:"scroll",width:"100%",paddingLeft:p.spacing[1],paddingRight:p.spacing[2],paddingBottom:p.spacing[3]}),fo=({documents:e,...t})=>{const[n,s]=(0,r.useState)("document"),a=(0,r.useMemo)((()=>({docs:e.map((e=>new(ra())(e))),isEditable:!1,copyToClipboard(e){const t=e.generateObject(),n=Ee.EJSON.stringify(t,void 0,2);navigator.clipboard.writeText(n)}})),[e]);return r.createElement("div",co({},t,{className:ho}),r.createElement("div",{className:To},r.createElement(go,{value:n,onChange:s})),r.createElement("div",{className:yo},"document"===n?r.createElement(ta.DocumentListView,a):r.createElement(ta.DocumentJsonView,a)))},bo=(0,p.css)({flexGrow:1,width:"100%",position:"relative",overflowY:"scroll"}),So=(0,p.css)({display:"flex",justifyContent:"flex-end",alignItems:"center",gap:p.spacing[2]}),Ao=(0,p.css)({textAlign:"center",marginTop:p.spacing[4]}),Eo=(0,p.css)({color:p.uiColors.red.base}),_o={onPrev:()=>(e,t)=>{const{aggregation:{page:n}}=t();n<=1||e(ft(n-1))},onNext:()=>(e,t)=>{const{aggregation:{isLast:n,page:r}}=t();n||e(ft(r+1))},onCancel:()=>(e,t)=>{const{aggregation:{abortController:n}}=t();n?.abort()}},xo=(0,o.$j)((({aggregation:{documents:e,isLast:t,page:n,limit:r,loading:s,error:a}})=>({documents:e,page:n,perPage:r,error:a,loading:s,isPrevDisabled:n<=1||s||Boolean(a),isNextDisabled:t||s||Boolean(a)})),_o)((({documents:e,page:t,perPage:n,loading:s,isPrevDisabled:a,isNextDisabled:o,error:i,onPrev:l,onNext:m,onCancel:c})=>{const u=(t-1)*n,g=u+(e.length||n);return r.createElement("div",{"data-testid":"pipeline-results-workspace",className:bo},r.createElement("div",{className:So},s?r.createElement(p.Body,null,"Loading ..."):r.createElement(p.Body,null,"Showing ",u+1,"  ",g),r.createElement("div",null,r.createElement(p.IconButton,{"aria-label":"Previous page",disabled:a,onClick:()=>l()},r.createElement(p.Icon,{glyph:"ChevronLeft"})),r.createElement(p.IconButton,{"aria-label":"Next page",disabled:o,onClick:()=>m()},r.createElement(p.Icon,{glyph:"ChevronRight"})))),r.createElement(fo,{documents:e,"data-testid":"pipeline-results-workspace"}),0===e.length&&!i&&!s&&r.createElement(p.Body,{className:Ao},"No results to show"),i&&r.createElement(p.Body,{className:(0,p.cx)(Ao,Eo)},i),s&&r.createElement("div",{className:Ao},r.createElement(p.Body,null,"Loading ... "),r.createElement(p.Button,{onClick:()=>c(),variant:"primaryOutline",size:"xsmall"},"Cancel")))}));class Io extends r.PureComponent{static displayName="PipelineComponent";static propTypes={allowWrites:a().bool.isRequired,env:a().string.isRequired,isAtlasDeployed:a().bool.isRequired,getPipelineFromIndexedDB:a().func.isRequired,savedPipelinesListToggle:a().func.isRequired,getSavedPipelines:a().func.isRequired,toggleComments:a().func.isRequired,toggleSample:a().func.isRequired,toggleAutoPreview:a().func.isRequired,restorePipelineModalToggle:a().func.isRequired,restorePipelineFrom:a().func.isRequired,restorePipeline:a().object.isRequired,deletePipeline:a().func.isRequired,pipeline:a().array.isRequired,serverVersion:a().string.isRequired,stageAdded:a().func.isRequired,stageAddedAfter:a().func.isRequired,stageChanged:a().func.isRequired,stageCollapseToggled:a().func.isRequired,stageDeleted:a().func.isRequired,stageMoved:a().func.isRequired,stageOperatorSelected:a().func.isRequired,stageToggled:a().func.isRequired,savedPipeline:a().object.isRequired,saveCurrentPipeline:a().func.isRequired,newPipeline:a().func.isRequired,newPipelineFromText:a().func.isRequired,closeImport:a().func.isRequired,clonePipeline:a().func.isRequired,changeText:a().func.isRequired,createNew:a().func.isRequired,confirmNew:a().func.isRequired,runStage:a().func.isRequired,importPipelineText:a().string.isRequired,exportToLanguage:a().func.isRequired,fields:a().array.isRequired,nameChanged:a().func.isRequired,isModified:a().bool.isRequired,isCommenting:a().bool.isRequired,isSampling:a().bool.isRequired,isAutoPreviewing:a().bool.isRequired,isImportPipelineOpen:a().bool.isRequired,isImportConfirmationNeeded:a().bool.isRequired,setIsModified:a().func.isRequired,gotoOutResults:a().func.isRequired,gotoMergeResults:a().func.isRequired,name:a().string,dismissViewError:a().func.isRequired,editViewName:a().string,updateView:a().func.isRequired,updateViewError:a().string,importPipelineError:a().string,collation:a().oneOfType([a().bool,a().object]),collationChanged:a().func.isRequired,collationString:a().string,collationStringChanged:a().func.isRequired,openLink:a().func.isRequired,collationCollapseToggled:a().func.isRequired,isCollationExpanded:a().bool.isRequired,isOverviewOn:a().bool.isRequired,toggleOverview:a().func.isRequired,settings:a().object.isRequired,toggleSettingsIsExpanded:a().func.isRequired,toggleSettingsIsCommentMode:a().func.isRequired,setSettingsSampleSize:a().func.isRequired,setSettingsMaxTimeMS:a().func.isRequired,setSettingsLimit:a().func.isRequired,limit:a().number.isRequired,largeLimit:a().number.isRequired,maxTimeMS:a().number.isRequired,applySettings:a().func.isRequired,isFullscreenOn:a().bool.isRequired,toggleFullscreen:a().func.isRequired,savingPipelineNameChanged:a().func.isRequired,savingPipelineApply:a().func.isRequired,savingPipelineCancel:a().func.isRequired,savingPipelineOpen:a().func.isRequired,savingPipeline:a().object.isRequired,projections:a().array.isRequired,projectionsChanged:a().func.isRequired,newPipelineFromPaste:a().func.isRequired,openCreateView:a().func.isRequired,isNewPipelineConfirm:a().bool.isRequired,setIsNewPipelineConfirm:a().func.isRequired,inputDocuments:a().object.isRequired,workspace:a().string.isRequired,runOutStage:a().func.isRequired,isTimeSeries:a().bool.isRequired,isReadonly:a().bool.isRequired,sourceName:a().string,toggleInputDocumentsCollapsed:a().func.isRequired,refreshInputDocuments:a().func.isRequired};static defaultProps={projections:[],maxTimeMS:_,limit:20,largeLimit:x};renderCollationToolbar(){return this.props.isCollationExpanded&&"true"!==global?.process?.env?.COMPASS_SHOW_NEW_AGGREGATION_TOOLBAR?r.createElement(z,{collation:this.props.collation,collationChanged:this.props.collationChanged,collationString:this.props.collationString,collationStringChanged:this.props.collationStringChanged,openLink:this.props.openLink}):null}renderModifyingViewSourceError(){if(this.props.updateViewError)return r.createElement(p.Banner,{variant:"danger",dismissible:!0,onClose:this.props.dismissViewError},this.props.updateViewError)}renderRestoreModal(){return this.props.restorePipeline.isModalVisible?r.createElement(J,{restorePipelineModalToggle:this.props.restorePipelineModalToggle,getPipelineFromIndexedDB:this.props.getPipelineFromIndexedDB,restorePipeline:this.props.restorePipeline}):null}renderSavePipeline(){if(!this.props.isAtlasDeployed)return r.createElement(E,{restorePipelineModalToggle:this.props.restorePipelineModalToggle,restorePipelineFrom:this.props.restorePipelineFrom,deletePipeline:this.props.deletePipeline,savedPipelinesListToggle:this.props.savedPipelinesListToggle,savedPipeline:this.props.savedPipeline})}renderPipelineToolbar(){return"true"!==global?.process?.env?.COMPASS_SHOW_NEW_AGGREGATION_TOOLBAR?r.createElement(W,{isAtlasDeployed:this.props.isAtlasDeployed,savedPipelinesListToggle:this.props.savedPipelinesListToggle,updateView:this.props.updateView,getSavedPipelines:this.props.getSavedPipelines,exportToLanguage:this.props.exportToLanguage,saveCurrentPipeline:this.props.saveCurrentPipeline,savedPipeline:this.props.savedPipeline,newPipelineFromText:this.props.newPipelineFromText,clonePipeline:this.props.clonePipeline,toggleComments:this.props.toggleComments,toggleSample:this.props.toggleSample,toggleAutoPreview:this.props.toggleAutoPreview,nameChanged:this.props.nameChanged,setIsModified:this.props.setIsModified,editViewName:this.props.editViewName,isModified:this.props.isModified,isCommenting:this.props.isCommenting,isSampling:this.props.isSampling,isAutoPreviewing:this.props.isAutoPreviewing,collationCollapseToggled:this.props.collationCollapseToggled,isCollationExpanded:this.props.isCollationExpanded,name:this.props.name,isOverviewOn:this.props.isOverviewOn,toggleOverview:this.props.toggleOverview,toggleSettingsIsExpanded:this.props.toggleSettingsIsExpanded,isFullscreenOn:this.props.isFullscreenOn,toggleFullscreen:this.props.toggleFullscreen,savingPipelineOpen:this.props.savingPipelineOpen,serverVersion:this.props.serverVersion,openCreateView:this.props.openCreateView,setIsNewPipelineConfirm:this.props.setIsNewPipelineConfirm}):r.createElement(Rs,null)}renderPipelineWorkspace(){return"results"===this.props.workspace?r.createElement(xo,null):r.createElement(po,{allowWrites:this.props.allowWrites,editViewName:this.props.editViewName,env:this.props.env,isTimeSeries:this.props.isTimeSeries,isReadonly:this.props.isReadonly,sourceName:this.props.sourceName,pipeline:this.props.pipeline,toggleInputDocumentsCollapsed:this.props.toggleInputDocumentsCollapsed,refreshInputDocuments:this.props.refreshInputDocuments,stageAdded:this.props.stageAdded,setIsModified:this.props.setIsModified,openLink:this.props.openLink,isCommenting:this.props.isCommenting,isAutoPreviewing:this.props.isAutoPreviewing,inputDocuments:this.props.inputDocuments,runStage:this.props.runStage,runOutStage:this.props.runOutStage,gotoOutResults:this.props.gotoOutResults,gotoMergeResults:this.props.gotoMergeResults,serverVersion:this.props.serverVersion,stageChanged:this.props.stageChanged,stageCollapseToggled:this.props.stageCollapseToggled,stageAddedAfter:this.props.stageAddedAfter,stageDeleted:this.props.stageDeleted,stageMoved:this.props.stageMoved,stageOperatorSelected:this.props.stageOperatorSelected,stageToggled:this.props.stageToggled,fields:this.props.fields,isOverviewOn:this.props.isOverviewOn,projections:this.props.projections,projectionsChanged:this.props.projectionsChanged,newPipelineFromPaste:this.props.newPipelineFromPaste})}render(){const e=r.createElement(se,{isOpen:this.props.isImportPipelineOpen,closeImport:this.props.closeImport,changeText:this.props.changeText,createNew:this.props.createNew,error:this.props.importPipelineError,text:this.props.importPipelineText}),t=r.createElement(oe,{isConfirmationNeeded:this.props.isImportConfirmationNeeded,closeImport:this.props.closeImport,isAutoPreviewing:this.props.isAutoPreviewing,runStage:this.props.runStage,confirmNew:this.props.confirmNew}),n=r.createElement(me,{isNewPipelineConfirm:this.props.isNewPipelineConfirm,setIsNewPipelineConfirm:this.props.setIsNewPipelineConfirm,newPipeline:this.props.newPipeline}),s=r.createElement(le,{name:this.props.savingPipeline.name,isOpen:this.props.savingPipeline.isOpen,isSaveAs:this.props.savingPipeline.isSaveAs,saveCurrentPipeline:this.props.saveCurrentPipeline,savingPipelineNameChanged:this.props.savingPipelineNameChanged,savingPipelineApply:this.props.savingPipelineApply,savingPipelineCancel:this.props.savingPipelineCancel,savingPipelineOpen:this.props.savingPipelineOpen,clonePipeline:this.props.clonePipeline});return r.createElement("div",{className:l()("pipeline-module-pipeline__toL0j",!!this.props.isFullscreenOn&&"pipeline-module-pipeline-fullscreen__35Yqu")},this.renderPipelineToolbar(),this.renderCollationToolbar(),this.renderModifyingViewSourceError(),this.renderPipelineWorkspace(),this.renderSavePipeline(),r.createElement(R,{isAtlasDeployed:this.props.isAtlasDeployed,isExpanded:this.props.settings.isExpanded,toggleSettingsIsExpanded:this.props.toggleSettingsIsExpanded,toggleSettingsIsCommentMode:this.props.toggleSettingsIsCommentMode,setSettingsSampleSize:this.props.setSettingsSampleSize,setSettingsMaxTimeMS:this.props.setSettingsMaxTimeMS,setSettingsLimit:this.props.setSettingsLimit,isCommenting:this.props.isCommenting,toggleComments:this.props.toggleComments,limit:this.props.limit,largeLimit:this.props.largeLimit,maxTimeMS:this.props.maxTimeMS,applySettings:this.props.applySettings,runStage:this.props.runStage,settings:this.props.settings}),this.renderRestoreModal(),e,t,s,n)}}const Lo=Io;class vo extends r.Component{static displayName="AggregationsComponent";render(){return r.createElement("div",{className:"aggregations-module-aggregations__1lhnE"},r.createElement(Lo,this.props))}}const Co=(0,o.$j)((e=>({allowWrites:e.allowWrites,fields:e.fields,inputDocuments:e.inputDocuments,namespace:e.namespace,env:e.env,isTimeSeries:e.isTimeSeries,isReadonly:e.isReadonly,sourceName:e.sourceName,serverVersion:e.serverVersion,pipeline:e.pipeline,savedPipeline:e.savedPipeline,restorePipeline:e.restorePipeline,name:e.name,isCollationExpanded:e.isCollationExpanded,collation:e.collation,collationString:e.collationString,isModified:e.isModified,isCommenting:e.comments,isSampling:e.sample,isAtlasDeployed:e.isAtlasDeployed,isAutoPreviewing:e.autoPreview,isImportPipelineOpen:e.importPipeline.isOpen,isImportConfirmationNeeded:e.importPipeline.isConfirmationNeeded,importPipelineText:e.importPipeline.text,importPipelineError:e.importPipeline.syntaxError,settings:e.settings,isOverviewOn:e.isOverviewOn,limit:e.limit,largeLimit:e.largeLimit,maxTimeMS:e.maxTimeMS,isFullscreenOn:e.isFullscreenOn,savingPipeline:e.savingPipeline,projections:e.projections,editViewName:e.editViewName,isNewPipelineConfirm:e.isNewPipelineConfirm,setIsNewPipelineConfirm:e.setIsNewPipelineConfirm,updateViewError:e.updateViewError,workspace:e.workspace})),{namespaceChanged:Yn,nameChanged:e=>({type:Qn,name:e}),collationChanged:sn,collationStringChanged:on,toggleInputDocumentsCollapsed:()=>({type:Un}),refreshInputDocuments:Kn,toggleOverview:()=>({type:Tr}),toggleComments:()=>({type:lr}),toggleSample:()=>({type:pr}),toggleAutoPreview:cr,deletePipeline:e=>async(t,n)=>{const r=new kt;await r.delete(e),t(zt()),t(ns()),t((0,Se.globalAppRegistryEmit)("agg-pipeline-deleted",{name:n().name}))},runStage:mt,runOutStage:e=>(t,n)=>{const r=n(),{dataService:s}=r.dataService;s&&(((e,t,n,r,s)=>{n(at(s));const a=ot(r,s);lt(a,e,t,n,r,s)})(s,r.namespace,t,r,e),t((0,Se.globalAppRegistryEmit)("agg-pipeline-out-executed",{id:r.id})))},gotoOutResults:e=>(t,n)=>{const r=n(),s=`${xe()(r.namespace).database}.${e.replace(/"/g,"")}`;r.outResultsFn?r.outResultsFn(s):t((0,Se.globalAppRegistryEmit)("aggregations-open-result-namespace",s))},gotoMergeResults:e=>(t,n)=>{const r=n(),s=((e,t)=>{const n=be(t).$merge;if(Le()(n))return`${e}.${n}`;const r=n.into;return Le()(r)?`${e}.${r}`:`${r.db||e}.${r.coll}`})(xe()(r.namespace).database,r.pipeline[e]);r.outResultsFn?r.outResultsFn(s):t((0,Se.globalAppRegistryEmit)("aggregations-open-result-namespace",s))},stageAdded:rt,stageAddedAfter:e=>({index:e,type:$e}),stageChanged:(e,t)=>({type:ke,index:t,stage:e}),stageCollapseToggled:e=>({type:Pe,index:e}),stageDeleted:e=>({type:Fe,index:e}),stageMoved:(e,t)=>({type:Ue,fromIndex:e,toIndex:t}),stageOperatorSelected:(e,t,n,r)=>({type:qe,index:e,stageOperator:t,isCommenting:n,env:r}),stageToggled:e=>({type:Ge,index:e}),collationCollapseToggled:()=>({type:ir}),toggleSettingsIsExpanded:Ir,toggleSettingsIsCommentMode:()=>({type:br}),setSettingsSampleSize:e=>({type:Sr,value:e}),setSettingsMaxTimeMS:e=>({type:Ar,value:e}),setSettingsLimit:e=>({type:Er,value:e}),exportToLanguage:dn,savedPipelinesListToggle:Kt,saveCurrentPipeline:Zt,savedPipelineAdd:Wt,getSavedPipelines:Yt,restorePipelineModalToggle:e=>({type:gr,index:e}),restorePipelineFrom:e=>({type:dr,objectID:e}),restoreSavedPipeline:rs,newPipeline:()=>({type:zr}),newPipelineFromText:Ln,closeImport:()=>({type:Sn}),clonePipeline:()=>({type:Zr}),changeText:e=>({type:An,text:e}),createNew:()=>({type:En}),confirmNew:()=>({type:_n}),openLink:pn,getPipelineFromIndexedDB:ss,applySettings:e=>(t,n)=>{t((e=>({type:_r,settings:e}))(e)),t((0,Se.globalAppRegistryEmit)("compass:aggregations:settings-applied",{settings:n().settings}))},setIsModified:Ot,limitChanged:e=>({type:er,limit:e}),largeLimitChanged:e=>({type:tr,largeLimit:e}),maxTimeMSChanged:e=>({type:or,maxTimeMS:e}),toggleFullscreen:()=>({type:Lr}),savingPipelineNameChanged:e=>({type:vr,name:e}),savingPipelineApply:()=>({type:Cr}),savingPipelineCancel:()=>({type:Rr}),savingPipelineOpen:jr,projectionsChanged:()=>({type:Dr}),newPipelineFromPaste:e=>t=>{t((e=>({type:Xr,text:e}))(e)),t((0,Se.globalAppRegistryEmit)("compass:aggregations:pipeline-imported"))},updateView:()=>(e,t)=>{e(Gr());const n=t(),r=n.dataService.dataService,s=n.editViewName,a=n.pipeline.map((e=>e.executor||be(e))),o={viewOn:xe()(n.namespace).collection,pipeline:a};try{Pr("calling data-service.updateCollection",s),r.updateCollection(s,o,(t=>{if(t)return Pr("error updating view",t),void e(qr(t));e((0,Se.globalAppRegistryEmit)("refresh-data")),kr("View Updated",{num_stages:a.length}),e((0,Se.globalAppRegistryEmit)("compass:aggregations:update-view",{numStages:a.length}));const r={namespace:s,isReadonly:!0,sourceName:n.namespace,editViewName:null,sourceReadonly:n.isReadonly,sourceViewOn:n.sourceName,sourcePipeline:a};Pr("selecting namespace",r),e((0,Se.globalAppRegistryEmit)("select-namespace",r))}))}catch(t){Pr("Unexpected error updating view",t),e(qr(t))}},openCreateView:as,setIsNewPipelineConfirm:$r,dismissViewError:Gr})(vo);var Ro=n(43292);const Oo=e=>{e.dispatch(Kn())},No=(e,t)=>{e.dispatch((e=>({type:Mn,fields:e}))(t))},jo=(e,t,n,r,s)=>{var a,o,i,l;e.dispatch((a=t,o=n,i=r,l=s,e=>{e(((e,t,n,r)=>({type:Jr,name:e,pipeline:t,isReadonly:n,sourceName:r}))(a,o,i,l)),e(mt(0))}))},wo=(e,t)=>{e.dispatch((e=>({type:zn,env:e}))(t))},Do=(e={})=>{const t=(0,Rn.createStore)(ts,(0,Rn.applyMiddleware)(Ro.Z));if(e.localAppRegistry){const n=e.localAppRegistry;((e,t)=>{e.dispatch((0,Se.localAppRegistryActivated)(t))})(t,n),n.on("refresh-data",(()=>{Oo(t)})),n.on("fields-changed",(e=>{No(t,e.aceFields)}))}if(e.globalAppRegistry){const n=e.globalAppRegistry;((e,t)=>{e.dispatch((0,Se.globalAppRegistryActivated)(t))})(t,n),n.on("refresh-data",(()=>{Oo(t)})),n.on("import-finished",(({ns:e})=>{const{namespace:n}=t.getState();e===n&&Oo(t)})),n.on("compass:deployment-awareness:topology-changed",(e=>{wo(t,e.env)}))}if(e.dataProvider&&((e,t,n)=>{e.dispatch(Bn(t,n))})(t,e.dataProvider.error,e.dataProvider.dataProvider),null!==e.isAtlasDeployed&&void 0!==e.isAtlasDeployed&&((e,t)=>{e.dispatch({type:rr,isAtlasDeployed:t})})(t,e.isAtlasDeployed),null!==e.allowWrites&&void 0!==e.allowWrites&&((e,t)=>{e.dispatch((e=>({type:ar,allowWrites:e}))(t))})(t,e.allowWrites),e.namespace&&((e,t)=>{xe()(t).collection&&(e.dispatch(Yn(t)),Oo(e))})(t,e.namespace),e.serverVersion&&((e,t)=>{e.dispatch((e=>({type:Jn,version:e}))(t))})(t,e.serverVersion),e.fields&&No(t,e.fields),e.outResultsFn&&((e,t)=>{e.dispatch((e=>({type:wr,outResultsFn:e}))(t))})(t,e.outResultsFn),e.editViewName&&jo(t,e.editViewName,e.sourcePipeline,e.isReadonly,e.sourceName),e.env)wo(t,e.env);else if(global&&global.hadronApp&&global.hadronApp.appRegistry){const e=global.hadronApp.appRegistry.getStore("DeploymentAwareness.Store");e&&wo(t,e.state.env)}return e.isTimeSeries&&((e,t)=>{e.dispatch((e=>({type:Xn,isTimeSeries:e}))(t))})(t,e.isTimeSeries),e.isReadonly&&((e,t)=>{e.dispatch((e=>({type:sr,isReadonly:e}))(t))})(t,e.isReadonly),e.sourceName&&((e,t)=>{e.dispatch((e=>({type:kn,sourceName:e}))(t))})(t,e.sourceName),e.aggregation&&ss(e.aggregation.id)(t.dispatch),t};class Bo extends r.Component{static displayName="AggregationsPlugin";static propTypes={store:a().object.isRequired};render(){return r.createElement(o.zt,{store:this.props.store},r.createElement(Co,null))}}const Mo=Bo,$o=[],ko="aggregations/create-view/is-running/TOGGLE_IS_RUNNING",Po=e=>({type:ko,isRunning:e}),Fo="aggregations/create-view/is-visible/TOGGLE_IS_VISIBLE",Uo=e=>({type:Fo,isVisible:e}),qo="aggregations/create-view/name/CHANGE_NAME",Go=e=>({type:qo,name:e}),Ho="aggregations/create-view/error",Vo=`${Ho}/HANDLE_ERROR`,Ko=`${Ho}/CLEAR_ERROR`,Wo="aggregations/create-view/reset",{track:Yo,debug:zo}=(0,y.createLoggerAndTelemetry)("COMPASS-AGGREGATIONS-UI"),Zo=n(84935),Xo="aggregations/create-view/OPEN",Jo={isRunning:!1,isVisible:!1,isDuplicating:!1,name:"",error:null,source:"",pipeline:$o},Qo=(0,Rn.combineReducers)({appRegistry:Ae(),isRunning:function(e=!1,t){return t.type===ko?t.isRunning:e},isDuplicating:function(e=!1,t){return"aggregations/create-view/is-duplicating/TOGGLE_IS_DUPLICATING"===t.type?t.isDuplicating:e},isVisible:function(e=!1,t){return t.type===Fo?t.isVisible:e},name:function(e="",t){return t.type===qo?t.name:e},error:function(e=null,t){return t.type===Vo?t.error:t.type===Ko?null:e},source:function(e="",t){return"aggregations/create-view/source/SET"===t.type?t.source:e},pipeline:function(e=$o,t){return"aggregations/create-view/pipeline/SET"===t.type?t.pipeline:e},dataService:Dn}),ei=(e,t)=>{if(t.type===Wo)return{...e,...Jo};if(t.type===Xo){const n={...e,...Jo,isVisible:!0,isDuplicating:t.duplicate,source:t.source,pipeline:t.pipeline};return zo("handling open",{newState:n}),n}return Qo(e,t)},ti=(e,t)=>(e(Po(!1)),e({type:Vo,error:t})),ni=(e,t,n)=>({type:Xo,source:e,pipeline:t,duplicate:n}),ri=()=>(e,t)=>{zo("creating view!");const n=t(),r=n.dataService.dataService,s=n.name,a=n.source,{database:o}=Zo(n.source),i=n.pipeline,l={};e({type:Ko});try{e(Po(!0)),zo("calling data-service.createView",s,a,i,l),r.createView(s,a,i,l,(t=>{if(t)return zo("error creating view",t),ti(e,t);zo("View created!"),Yo("Aggregation Saved As View",{num_stages:i.length}),e((0,Se.globalAppRegistryEmit)("compass:aggregations:create-view",{numStages:i.length})),e((0,Se.globalAppRegistryEmit)("aggregations-open-result-namespace",`${o}.${s}`)),e({type:Wo})}))}catch(t){return zo("Unexpected error creating view",t),ti(e,t)}};class si extends r.PureComponent{static displayName="CreateViewModalComponent";static propTypes={createView:a().func.isRequired,isVisible:a().bool.isRequired,toggleIsVisible:a().func.isRequired,name:a().string,changeViewName:a().func.isRequired,isDuplicating:a().bool.isRequired,source:a().string.isRequired,pipeline:a().array.isRequired,isRunning:a().bool.isRequired,error:a().object};static defaultProps={name:"",source:"",pipeline:[],isRunning:!1,isVisible:!1,isDuplicating:!1};onNameChange=e=>{this.props.changeViewName(e.target.value)};onFormSubmit=e=>{e.preventDefault(),e.stopPropagation(),this.props.createView()};onCancel=()=>{this.props.toggleIsVisible(!1)};render(){return r.createElement(p.ConfirmationModal,{title:this.props.isDuplicating?"Duplicate View":"Create a View",open:this.props.isVisible,onConfirm:this.props.createView,onCancel:this.onCancel,buttonText:"Create",trackingId:"create_view_modal"},r.createElement("form",{name:"create-view-modal-form",onSubmit:this.onFormSubmit.bind(this),"data-test-id":"create-view-modal"},r.createElement(O.ModalInput,{id:"create-view-name",name:"Enter a View Name",value:this.props.name||"",onChangeHandler:this.onNameChange}),this.props.error?r.createElement(O.ModalStatusMessage,{icon:"times",message:this.props.error.message,type:"error"}):null,this.props.isRunning?r.createElement(O.ModalStatusMessage,{icon:"spinner",message:"Create in Progress",type:"in-progress"}):null))}}const ai=(0,o.$j)((e=>({isRunning:e.isRunning,isVisible:e.isVisible,isDuplicating:e.isDuplicating,name:e.name,error:e.error,source:e.source,pipeline:e.pipeline})),{createView:ri,changeViewName:Go,toggleIsVisible:Uo})(si);class oi extends r.Component{static displayName="CreateViewPlugin";static propTypes={store:a().object.isRequired};render(){return r.createElement(o.zt,{store:this.props.store},r.createElement(ai,null))}}const ii=oi;class li extends r.PureComponent{static displayName="DuplicateViewModalComponent";static propTypes={createView:a().func.isRequired,isVisible:a().bool.isRequired,toggleIsVisible:a().func.isRequired,name:a().string,changeViewName:a().func.isRequired,source:a().string.isRequired,pipeline:a().array.isRequired,isRunning:a().bool.isRequired,error:a().object};static defaultProps={name:"",source:"",pipeline:[],isRunning:!1,isVisible:!1};onNameChange=e=>{this.props.changeViewName(e.target.value)};onFormSubmit=e=>{e.preventDefault(),e.stopPropagation(),this.props.createView()};onCancel=()=>{this.props.toggleIsVisible(!1)};render(){return r.createElement(p.ConfirmationModal,{title:"Duplicate a View",open:this.props.isVisible,onConfirm:this.props.createView,onCancel:this.onCancel,buttonText:"Duplicate",trackingId:"duplicate_view_modal"},r.createElement("form",{name:"create-view-modal-form",onSubmit:this.onFormSubmit.bind(this),"data-test-id":"create-view-modal"},r.createElement(O.ModalInput,{id:"create-view-name",name:"Enter a View Name",value:this.props.name||"",onChangeHandler:this.onNameChange}),this.props.error?r.createElement(O.ModalStatusMessage,{icon:"times",message:this.props.error.message,type:"error"}):null,this.props.isRunning?r.createElement(O.ModalStatusMessage,{icon:"spinner",message:"Duplicate in Progress",type:"in-progress"}):null))}}const pi=(0,o.$j)((e=>({isRunning:e.isRunning,isVisible:e.isVisible,name:e.name,error:e.error,source:e.source,pipeline:e.pipeline})),{createView:ri,changeViewName:Go,toggleIsVisible:Uo})(li),mi=(0,Rn.createStore)(ei,(0,Rn.applyMiddleware)(Ro.Z));mi.onActivated=e=>{mi.dispatch((0,Se.globalAppRegistryActivated)(e)),e.on("data-service-connected",((e,t)=>{mi.dispatch(Bn(e,t))})),e.on("open-create-view",(e=>{mi.dispatch(ni(e.source,e.pipeline,e.duplicate))}))};const ci=mi;class ui extends r.Component{static displayName="DuplicateViewPlugin";render(){return r.createElement(o.zt,{store:ci},r.createElement(pi,null))}}const gi=ui,di=n(22713)("mongodb-aggregations:stores:create-view"),hi=(e={})=>{const t=(0,Rn.createStore)(ei,(0,Rn.applyMiddleware)(Ro.Z));if(e.localAppRegistry){const n=e.localAppRegistry;t.dispatch((0,Se.localAppRegistryActivated)(n)),n.on("open-create-view",(e=>{di("open-create-view",e.source,e.pipeline),t.dispatch(ni(e.source,e.pipeline,!1))}))}if(e.globalAppRegistry){const n=e.globalAppRegistry;t.dispatch((0,Se.globalAppRegistryActivated)(n))}return e.dataProvider&&((e,t,n)=>{e.dispatch(Bn(t,n))})(t,e.dataProvider.error,e.dataProvider.dataProvider),t},Ti=JSON.parse('{"name":"@mongodb-js/compass-aggregations","productName":"Aggregations plugin","version":"8.22.0","apiVersion":"3.0.0","description":"Compass Aggregation Pipeline Builder","main":"lib/index.js","exports":{"webpack":"./src/index.js","browser":"./lib/browser.js","require":"./lib/index.js"},"scripts":{"prepublishOnly":"npm run compile","compile":"npm run webpack -- --mode production","prewebpack":"rimraf ./lib","webpack":"webpack-compass","start":"npm run webpack serve -- --mode development","analyze":"npm run webpack -- --mode production --analyze","typecheck":"tsc --noEmit","depcheck":"depcheck","eslint":"eslint","lint":"npm run eslint .","check":"npm run typecheck && npm run lint && npm run depcheck","check-ci":"npm run check","test":"mocha","test-electron":"xvfb-maybe electron-mocha --no-sandbox","test-cov":"nyc -x \\"**/*.spec.*\\" --reporter=lcov --reporter=text --reporter=html npm run test","test-watch":"npm run test -- --watch","test-ci":"npm run test-cov","test-ci-electron":"npm run test-electron"},"license":"SSPL","peerDependencies":{"@mongodb-js/compass-components":"^0.13.0","@mongodb-js/compass-crud":"^12.22.0","@mongodb-js/compass-export-to-language":"^7.21.0","@mongodb-js/compass-field-store":"^7.21.0","ace-builds":"^1.4.3","async":"^3.2.0","bson":"*","electron":"^13.5.1","hadron-react-buttons":"^5.7.0","hadron-react-components":"^5.13.0","mongodb-ace-autocompleter":"*","mongodb-ace-mode":"^1.6.0","mongodb-ace-theme":"^1.6.0","mongodb-data-service":"^21.19.0","mongodb-js-metrics":"^7.9.0","mongodb-query-parser":"^2.4.4","prop-types":"^15.7.2","react":"^16.14.0","react-ace":"^9.5.0","react-bootstrap":"^0.32.4","react-dom":"^16.14.0"},"devDependencies":{"@mongodb-js/compass-components":"^0.13.0","@mongodb-js/compass-crud":"^12.22.0","@mongodb-js/compass-export-to-language":"^7.21.0","@mongodb-js/compass-field-store":"^7.21.0","@mongodb-js/eslint-config-compass":"^0.7.0","@mongodb-js/mocha-config-compass":"^0.10.0","@mongodb-js/prettier-config-compass":"^0.5.0","@mongodb-js/tsconfig-compass":"^0.6.0","@mongodb-js/webpack-config-compass":"^0.7.0","@react-aria/utils":"^3.11.3","@testing-library/react":"^12.1.4","@testing-library/user-event":"^13.5.0","@types/lodash.isempty":"^4.4.6","@types/semver":"^7.3.9","ace-builds":"^1.4.3","async":"^3.2.0","chai":"^4.3.6","classnames":"^2.2.6","debug":"4.3.0","depcheck":"^1.4.1","electron":"^13.5.1","enzyme":"^3.11.0","eslint":"^7.25.0","hadron-app":"^4.21.0","hadron-app-registry":"^8.10.0","hadron-document":"^7.9.0","hadron-react-buttons":"^5.7.0","hadron-react-components":"^5.13.0","mocha":"^8.4.0","mongodb-ace-autocompleter":"^0.11.0","mongodb-ace-mode":"^1.6.0","mongodb-ace-theme":"^1.6.0","mongodb-connection-model":"^21.15.0","mongodb-data-service":"^21.19.0","mongodb-js-metrics":"^7.9.0","mongodb-query-parser":"^2.4.4","mongodb-reflux-store":"^0.0.1","nyc":"^15.1.0","prop-types":"^15.7.2","react":"^16.14.0","react-ace":"^9.5.0","react-dom":"^16.14.0","reflux":"^0.4.1","reflux-state-mixin":"github:mongodb-js/reflux-state-mixin","rimraf":"^3.0.0","sinon":"^9.2.3","xvfb-maybe":"^0.2.1"},"dependencies":{"@mongodb-js/compass-logging":"^0.10.0","@mongodb-js/mongodb-redux-common":"^1.10.0","acorn-loose":"^8.0.2","astring":"^1.7.0","bson":"*","decomment":"^0.9.2","is-electron-renderer":"^2.0.1","lodash.debounce":"^4.0.8","lodash.isempty":"^4.4.0","lodash.isstring":"^4.0.1","mongodb":"^4.4.1","mongodb-ns":"^2.3.0","re-resizable":"^6.9.0","react-bootstrap":"^0.32.4","react-dnd":"^10.0.2","react-dnd-html5-backend":"^10.0.2","react-redux":"^5.0.6","react-select-plus":"^1.2.0","redux":"^4.1.2","redux-thunk":"^2.3.0","semver":"^5.7.1"},"homepage":"https://github.com/mongodb-js/compass","bugs":{"url":"https://jira.mongodb.org/projects/COMPASS/issues","email":"compass@mongodb.com"},"repository":{"type":"git","url":"https://github.com/mongodb-js/compass.git"}}'),yi={name:"Aggregations",component:Mo,order:2,configureStore:Do,configureActions:()=>{},storeName:"Aggregations.Store",actionName:"Aggregations.Actions"},fi={name:"Create View",component:ii,configureStore:hi,storeName:"Aggregations.CreateViewStore",configureActions:()=>{},actionName:"Aggregations.Actions"},bi={name:"Duplicate View",component:gi},Si=e=>{e.registerRole("Collection.Tab",yi),e.registerRole("Collection.ScopedModal",fi),e.registerRole("Global.Modal",bi),e.registerStore("Aggregations.DuplicateViewStore",ci)},Ai=e=>{e.deregisterRole("Collection.Tab",yi),e.deregisterRole("Collection.ScopedModal",fi),e.deregisterRole("Global.Modal",bi),e.deregisterStore("Aggregations.DuplicateViewStore")},Ei=Mo},2174:(e,t,n)=>{"use strict";n.r(t),n.d(t,{activate:()=>f,deactivate:()=>b,metadata:()=>y});var r=n(18717),s=n(31453),a=n.n(s),o=n(84935),i=n.n(o);const l="app/instance/CHANGE_ERROR_MESSAGE",p=e=>({type:l,errorMessage:e}),m="app/instance/CHANGE_INSTANCE",c="app/instance/CHANGE_DATA_SERVICE",u="app/instance/reset",g=(0,r.combineReducers)({errorMessage:function(e="",t){return t.type===l?t.errorMessage:e},instance:function(e=null,t){return t.type===m?t.instance:e},dataService:function(e=null,t){return t.type===c?t.dataService:e}}),d=n(51296)("mongodb-compass:stores:InstanceStore"),h=(0,r.createStore)(((e,t)=>t.type===u?{...e,errorMessage:"",instance:null,dataService:null}:g(e,t)));h.refreshInstance=async(e,t)=>{const{instance:n,dataService:r}=h.getState();if(n&&r)try{await n.refresh({dataService:r,...t}),h.dispatch(p("")),e.emit("instance-refreshed",{...h.getState(),errorMessage:""})}catch(t){h.dispatch(p(t.message)),e.emit("instance-refreshed",{...h.getState(),errorMessage:t.message})}else d("Trying to refresh the MongoDB instance model without the model or dataService in the state")},h.fetchDatabaseDetails=async(e,{nameOnly:t=!1}={})=>{const{instance:n,dataService:r}=h.getState();if(!n||!r)return void d("Trying to fetch database details without the model or dataService in the state");const s=n.databases.get(e);t?await s.fetchCollections({dataService:r}):await s.fetchCollectionsDetails({dataService:r})},h.fetchCollectionDetails=async e=>{const{instance:t,dataService:n}=h.getState();if(!t||!n)return void d("Trying to fetch collection details without the model or dataService in the state");const{database:r}=i()(e),s=t.databases.get(r).collections.get(e);return await s.fetch({dataService:n}).catch((e=>{d("failed to fetch collection details",e)})),s},h.fetchAllCollections=async()=>{const{instance:e,dataService:t}=h.getState();e&&t?(await e.fetchDatabases({dataService:t}),await Promise.all(e.databases.map((e=>e.fetchCollections({dataService:t}))))):d("Trying to fetch collections without the model or dataService in the state")},h.fetchCollectionMetadata=async e=>{const{instance:t,dataService:n}=h.getState(),{database:r,collection:s}=i()(e);if(!t||!n)return void d("Trying to fetch collection metadata without the model or dataService in the state");const a=await t.getNamespace({database:r,collection:s,dataService:n});return await a.fetchMetadata({dataService:n})},h.refreshNamespace=async({ns:e,database:t})=>{const{instance:n,dataService:r}=h.getState();n.databases.get(t)||await n.fetchDatabases({dataService:r,force:!0});const s=n.databases.get(t);s.collections.get(e)||await s.fetchCollections({dataService:r,force:!0}),await h.refreshNamespaceStats(e)},h.refreshNamespaceStats=async e=>{const{instance:t,dataService:n}=h.getState(),{database:r}=i()(e),s=t.databases.get(r),a=s.collections.get(e);await Promise.allSettled([s.fetch({dataService:n,force:!0}),a.fetch({dataService:n,force:!0})])},h.onActivated=e=>{e.on("data-service-disconnected",(()=>{global.hadronApp.instance?.removeAllListeners(),global.hadronApp.instance=null,e.emit("instance-destroyed",{instance:null}),h.dispatch({type:u})})),e.on("data-service-connected",((t,n)=>{if(t)return h.dispatch(p(t.message)),void e.emit("instance-refreshed",{dataService:null,instance:null,errorMessage:t.message});const r=n.getConnectionString().hosts[0]||"",[s,o]=r.split(":"),i=global.hadronApp.instance=new(a())({_id:r,hostname:s,port:o?+o:void 0});e.emit("instance-created",{instance:i}),h.dispatch((e=>({type:c,dataService:e}))(n)),h.dispatch((e=>({type:m,instance:e}))(i)),h.refreshInstance(e,{fetchDatabases:!0,fetchDbStats:!0})})),e.on("select-database",(e=>{h.fetchDatabaseDetails(e)})),e.on("sidebar-expand-database",(e=>{h.fetchDatabaseDetails(e,{nameOnly:!0})})),e.on("sidebar-filter-navigation-list",(()=>{h.fetchAllCollections()})),e.on("select-namespace",(({namespace:e})=>{h.fetchCollectionDetails(e)})),e.on("open-namespace-in-new-tab",(({namespace:e})=>{h.fetchCollectionDetails(e)})),e.on("refresh-data",(()=>{h.refreshInstance(e)})),e.on("agg-pipeline-out-executed",(()=>{h.refreshInstance(e)})),e.on("document-deleted",(({ns:e})=>{h.refreshNamespaceStats(e)})),e.on("document-inserted",(({ns:e})=>{h.refreshNamespaceStats(e)})),e.on("import-finished",(({ns:e})=>{h.refreshNamespaceStats(e)})),e.on("collection-created",(e=>{h.refreshNamespace(e)})),e.on("collections-list-select-collection",(async({ns:t})=>{const n=await h.fetchCollectionMetadata(t);e.emit("select-namespace",n)})),e.on("sidebar-select-collection",(async({ns:t})=>{const n=await h.fetchCollectionMetadata(t);e.emit("select-namespace",n)})),e.on("sidebar-open-collection-in-new-tab",(async({ns:t})=>{const n=await h.fetchCollectionMetadata(t);e.emit("open-namespace-in-new-tab",n)})),e.on("sidebar-modify-view",(async({ns:t})=>{const n=await h.fetchCollectionDetails(t);if(n.sourceId&&n.pipeline){const t=await h.fetchCollectionMetadata(n.sourceId);t.sourcePipeline=n.pipeline,t.editViewName=n.ns,e.emit("open-namespace-in-new-tab",t)}else d("Tried to modify the view on a collection with required metadata missing",n.toJSON())})),e.on("sidebar-duplicate-view",(async({ns:t})=>{const n=await h.fetchCollectionDetails(t);n.sourceId&&n.pipeline?e.emit("open-create-view",{source:n.sourceId,pipeline:n.pipeline,duplicate:!0}):d("Tried to duplicate the view for a collection with required metadata missing",n.toJSON())})),e.on("aggregations-open-result-namespace",(async function(t){await h.refreshNamespace(i()(t));const n=await h.fetchCollectionMetadata(t);e.emit("open-namespace-in-new-tab",n)}))},h.subscribe((()=>{const e=h.getState();d("App.InstanceStore changed to",e)}));const T=h,y=JSON.parse('{"name":"@mongodb-js/compass-app-stores","productName":"App Stores plugin","version":"5.21.0","apiVersion":"3.0.0","description":"The external stores repo for compass","main":"lib/index.js","exports":{"webpack":"./src/index.js","require":"./lib/index.js"},"scripts":{"clean":"rimraf lib","precompile":"npm run clean","compile":"cross-env NODE_ENV=production webpack --config ./config/webpack.prod.config.js","start":"webpack-dev-server --config ./config/webpack.dev.config.js","start:watch":"npm run clean && webpack --config ./config/webpack.watch.config.js","test":"cross-env NODE_ENV=test mocha-webpack \\"./src/**/*.spec.js\\"","test-watch":"cross-env NODE_ENV=test mocha-webpack \\"./src/**/*.spec.js\\" --watch","test-electron":"xvfb-maybe cross-env NODE_ENV=test karma start","test-cov":"nyc npm run test","check":"npm run lint && npm run depcheck","prepublishOnly":"npm run compile","lint":"eslint \\"./src/**/*.{js,jsx}\\" \\"./test/**/*.js\\" \\"./electron/**/*.js\\" \\"./config/**/*.{js,jsx}\\"","depcheck":"depcheck","test-ci":"npm run test","test-ci-electron":"echo \\"TODO(COMPASS-5555): These tests are broken and disabled for now\\"","bootstrap":"npm run compile"},"license":"SSPL","peerDependencies":{"debug":"*","mongodb-instance-model":"^11.21.0","prop-types":"^15.7.2","react":"^16.14.0","react-bootstrap":"^0.32.1","react-dom":"^16.14.0","react-tooltip":"^3.11.1","redux":"^4.1.2"},"devDependencies":{"@babel/cli":"^7.14.3","@babel/core":"^7.14.3","@babel/plugin-proposal-decorators":"^7.14.2","@babel/plugin-syntax-dynamic-import":"^7.8.3","@babel/preset-env":"^7.14.2","@babel/preset-react":"^7.13.13","@babel/register":"^7.13.16","ampersand-collection-filterable":"^0.3.0","ampersand-rest-collection":"^6.0.0","autoprefixer":"^9.4.6","babel-loader":"^8.2.2","chai":"^4.1.2","chai-enzyme":"1.0.0-beta.1","classnames":"^2.2.6","core-js":"^3.12.1","cross-env":"^7.0.0","css-loader":"^4.3.0","debug":"4.3.0","depcheck":"^1.4.1","electron":"^13.5.1","enzyme":"^3.11.0","enzyme-adapter-react-16":"^1.15.2","eslint":"^7.25.0","eslint-config-mongodb-js":"^5.0.3","eslint-plugin-react":"^7.24.0","extract-text-webpack-plugin":"^4.0.0-beta.0","file-loader":"^5.1.0","font-awesome":"^4.7.0","hadron-app":"^4.21.0","hadron-app-registry":"^8.10.0","hadron-react-components":"^5.13.0","html-webpack-plugin":"^3.2.0","ignore-loader":"^0.1.2","istanbul-instrumenter-loader":"^3.0.1","jsdom":"^16.7.0","jsdom-global":"^3.0.2","karma":"^6.3.4","karma-chai":"^0.1.0","karma-chai-sinon":"^0.1.5","karma-electron":"^7.0.0","karma-mocha":"^1.3.0","karma-mocha-reporter":"^2.2.5","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","less":"^3.11.1","less-loader":"^7.3.0","lodash.foreach":"^4.5.0","lodash.result":"^4.5.2","mocha":"^5.0.0","mocha-webpack":"^2.0.0-beta.0","mongodb-collection-model":"^4.21.0","mongodb-connection-model":"^21.15.0","mongodb-data-service":"^21.19.0","mongodb-database-model":"^1.10.0","mongodb-instance-model":"^11.21.0","mongodb-js-metrics":"^7.9.0","mongodb-ns":"^2.3.0","mongodb-reflux-store":"^0.0.1","node-loader":"^0.6.0","nyc":"^15.0.0","peer-deps-externals-webpack-plugin":"^1.0.4","postcss-loader":"^2.1.6","raf":"^3.4.1","react":"^16.14.0","react-dom":"^16.14.0","react-hot-loader":"^4.13.0","react-redux":"^7.1.3","redux":"^4.1.2","reflux-state-mixin":"github:mongodb-js/reflux-state-mixin","resolve":"^1.15.1","rimraf":"^3.0.1","semver":"^5.4.1","shebang-loader":"^0.0.1","sinon":"^4.5.0","sinon-chai":"^3.5.0","storage-mixin":"^4.13.0","style-loader":"^2.0.0","url-loader":"^3.0.0","uuid":"^3.3.2","webpack":"^4.46.0","webpack-bundle-analyzer":"^3.0.3","webpack-cli":"^3.3.12","webpack-dev-server":"^3.11.2","webpack-merge":"^4.2.2","webpack-node-externals":"^3.0.0","xvfb-maybe":"^0.2.1"},"dependencies":{"reflux":"^0.4.1"},"homepage":"https://github.com/mongodb-js/compass","bugs":{"url":"https://jira.mongodb.org/projects/COMPASS/issues","email":"compass@mongodb.com"},"repository":{"type":"git","url":"https://github.com/mongodb-js/compass.git"}}');function f(e){e.registerStore("App.InstanceStore",T)}function b(e){e.deregisterStore("App.InstanceStore")}},29232:(e,t,n)=>{"use strict";n.r(t),n.d(t,{activate:()=>I,deactivate:()=>L,default:()=>v,metadata:()=>_});var r=n(2784),s=n(16435),a=n(13980),o=n.n(a),i=n(15251),l=n(72779),p=n.n(l);class m extends r.PureComponent{static displayName="AutoUpdateComponent";static propTypes={isVisible:o().bool.isRequired,version:o().string.isRequired,cancelUpdate:o().func.isRequired,visitReleaseNotes:o().func.isRequired};onCancel=()=>{this.props.cancelUpdate()};onUpdate=()=>{n(45727).call("app:install-update"),this.props.cancelUpdate()};onClickReleaseNotes=e=>{e.preventDefault(),this.props.visitReleaseNotes()};render(){const e=p()({"auto-update-module-auto-update__35Paf":!0,"auto-update-module-auto-update-is-visible__1aDl1":this.props.isVisible});return r.createElement("div",{className:e},r.createElement("div",{className:p()("auto-update-module-auto-update-text__2V-y4")},r.createElement("span",{className:p()("auto-update-module-auto-update-text-available__2_R_2")},"Compass ",r.createElement("b",null,"version ",this.props.version)," is now available! Would you like to install and restart Compass?"),r.createElement("span",null,"Read ",r.createElement("a",{onClick:this.onClickReleaseNotes},"Release Notes"))),r.createElement(i.TextButton,{className:"btn btn-default btn-xs",text:"Update Compass",clickHandler:this.onUpdate}),r.createElement("div",{className:p()("auto-update-module-auto-update-cancel__2g4ZR"),onClick:this.onCancel},"Not Now"))}}const c=m;var u=n(18717),g=n(43292);const d="auto-updates",h=`${d}/UPDATE_AVAILABLE`,T=`${d}/CANCEL_UPDATE`,y={isVisible:!1,version:""},f=(0,u.createStore)((function(e=y,t){return t.type===h?{isVisible:!0,version:t.version}:t.type===T?{isVisible:!1,version:""}:e}),(0,u.applyMiddleware)(g.Z));f.onActivated=()=>{try{const e=n(45727),t=global.hadronApp.preferences;e.on("app:update-available",((e,t)=>{var n;f.dispatch((n=t.releaseVersion,{type:h,version:n}))})),t.listenToAndRun(t,"change:autoUpdates",(()=>{t.isFeatureEnabled("autoUpdates")?e.call("app:enable-auto-update"):e.call("app:disable-auto-update")}))}catch(e){}};const b=f;class S extends r.Component{static displayName="AutoUpdatesPlugin";render(){return r.createElement(s.zt,{store:b},r.createElement(A,null))}}const A=(0,s.$j)((e=>({isVisible:e.isVisible,version:e.version})),{cancelUpdate:()=>({type:T}),visitReleaseNotes:()=>()=>{const{shell:e}=n(72298);e.openExternal("https://docs.mongodb.com/compass/current/release-notes/")}})(c),E=S,_=JSON.parse('{"name":"@mongodb-js/compass-auto-updates","productName":"Compass Auto Updates plugin","version":"3.21.0","apiVersion":"3.0.0","description":"Compass Auto Updates Plugin","main":"lib/index.js","exports":{"webpack":"./src/index.js","require":"./lib/index.js"},"scripts":{"clean":"rimraf lib","precompile":"npm run clean","compile":"cross-env NODE_ENV=production webpack --config ./config/webpack.prod.config.js","start":"webpack-dev-server --config ./config/webpack.dev.config.js","start:watch":"npm run clean && webpack --config ./config/webpack.watch.config.js","test":"cross-env NODE_ENV=test mocha-webpack \\"./src/**/*.spec.js\\"","test-watch":"cross-env NODE_ENV=test mocha-webpack \\"./src/**/*.spec.js\\" --watch","test-electron":"xvfb-maybe cross-env NODE_ENV=test karma start","test-cov":"nyc npm run test","check":"npm run lint && npm run depcheck","prepublishOnly":"npm run compile","lint":"eslint \\"./src/**/*.{js,jsx}\\" \\"./test/**/*.js\\" \\"./electron/**/*.js\\" \\"./config/**/*.{js,jsx}\\"","depcheck":"depcheck","test-ci":"npm run test","test-ci-electron":"echo \\"TODO(COMPASS-5555): These tests are broken and disabled for now\\"","bootstrap":"npm run compile"},"license":"SSPL","peerDependencies":{"hadron-react-buttons":"^5.7.0","react":"^16.14.0","react-dom":"^16.14.0","react-redux":"^5.0.6","redux":"^4.1.2"},"devDependencies":{"@babel/cli":"^7.14.3","@babel/core":"^7.14.3","@babel/plugin-proposal-decorators":"^7.14.2","@babel/plugin-syntax-dynamic-import":"^7.8.3","@babel/preset-env":"^7.14.2","@babel/preset-react":"^7.13.13","@babel/register":"^7.13.16","autoprefixer":"^7.1.2","babel-loader":"^8.2.2","chai":"^4.1.2","chai-enzyme":"1.0.0-beta.1","classnames":"^2.2.6","core-js":"^3.12.1","cross-env":"^5.0.1","css-loader":"^4.3.0","depcheck":"^1.4.1","electron":"^13.5.1","enzyme":"^3.11.0","enzyme-adapter-react-16":"^1.15.2","eslint":"^7.25.0","eslint-config-mongodb-js":"^2.1.0","eslint-plugin-react":"^7.24.0","extract-text-webpack-plugin":"^4.0.0-beta.0","file-loader":"^5.1.0","font-awesome":"^4.7.0","hadron-app":"^4.21.0","hadron-app-registry":"^8.10.0","hadron-ipc":"^2.9.0","hadron-react-buttons":"^5.7.0","html-webpack-plugin":"^3.2.0","ignore-loader":"^0.1.2","istanbul-instrumenter-loader":"^3.0.1","jsdom":"^16.7.0","jsdom-global":"^3.0.2","karma":"^6.3.4","karma-chai":"^0.1.0","karma-chai-sinon":"^0.1.5","karma-electron":"^7.0.0","karma-mocha":"^1.3.0","karma-mocha-reporter":"^2.2.5","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","less":"^3.11.1","less-loader":"^7.3.0","mocha":"^4.1.0","mocha-webpack":"^2.0.0-beta.0","mongodb-reflux-store":"^0.0.1","node-loader":"^0.6.0","nyc":"^11.0.3","peer-deps-externals-webpack-plugin":"^1.0.4","postcss-loader":"^2.1.6","prop-types":"^15.7.2","react":"^16.14.0","react-dom":"^16.14.0","react-hot-loader":"^4.13.0","react-redux":"^5.0.6","redux":"^4.1.2","reflux":"^0.4.1","reflux-state-mixin":"github:mongodb-js/reflux-state-mixin","resolve":"^1.15.1","rimraf":"^3.0.1","semver":"^5.4.1","shebang-loader":"^0.0.1","sinon":"^3.2.0","sinon-chai":"^2.11.0","style-loader":"^2.0.0","url-loader":"^3.0.0","webpack":"^4.46.0","webpack-bundle-analyzer":"^2.9.0","webpack-cli":"^3.3.12","webpack-dev-server":"^3.11.2","webpack-merge":"^4.2.2","webpack-node-externals":"^3.0.0"},"dependencies":{"redux-thunk":"^2.3.0"},"homepage":"https://github.com/mongodb-js/compass","bugs":{"url":"https://jira.mongodb.org/projects/COMPASS/issues","email":"compass@mongodb.com"},"repository":{"type":"git","url":"https://github.com/mongodb-js/compass.git"}}'),x={component:E};function I(e){e.registerRole("App.AutoUpdate",x),e.registerStore("AutoUpdates.Store",b)}function L(e){e.deregisterRole("App.AutoUpdate",x),e.deregisterStore("AutoUpdates.Store")}const v=E},78716:(e,t,n)=>{"use strict";n.r(t),n.d(t,{activate:()=>k,deactivate:()=>P,default:()=>F,metadata:()=>M});var r=n(50517),s=n(2784),a=n(70602);const o=(0,r.css)({marginRight:"12px"}),i=(0,r.css)({textTransform:"uppercase",fontSize:"10px",fontWeight:"bold",display:"inline-block",marginRight:" 5px",color:r.uiColors.gray.dark3}),l=(0,r.css)({textTransform:"uppercase",fontSize:"10px",fontWeight:"bold",color:r.uiColors.gray.base,lineHeight:"12px"}),p=(0,r.css)({color:r.uiColors.gray.dark3,display:"inline-block",fontSize:"24px",lineHeight:"24px"}),m=(0,r.css)({color:r.uiColors.gray.base,fontSize:"14px"}),c=({primary:e,dataTestId:t,label:n,value:r})=>s.createElement("div",{className:o,"data-testid":t},s.createElement("div",{className:e?i:l,"data-testid":`${t}-label${e?"-primary":""}`},n),s.createElement("div",{className:e?p:m,"data-testid":`${t}-value${e?"-primary":""}`},r)),u=(0,r.css)({paddingLeft:"15px",paddingRight:"3px",borderRight:`1px solid ${r.uiColors.gray.light2}`,flexBasis:"auto",flexGrow:0,flexShrink:0,display:"flex",alignItems:"flex-end",marginBottom:0,"&:last-child":{borderRight:"none"}}),g=({documentCount:e,isTimeSeries:t,storageSize:n,avgDocumentSize:r})=>s.createElement("div",{"data-testid":"document-stats-item",className:u},!t&&s.createElement(c,{dataTestId:"document-count",label:"Documents",value:e,primary:!0}),s.createElement(c,{dataTestId:"storage-size",label:"storage size",value:n}),!t&&s.createElement(c,{dataTestId:"avg-document-size",label:"avg. size",value:r})),d=(0,r.css)({paddingLeft:"15px",paddingRight:"3px",borderRight:`1px solid ${r.uiColors.gray.light2}`,flexBasis:"auto",flexGrow:0,flexShrink:0,display:"flex",alignItems:"flex-end",marginBottom:0,"&:last-child":{borderRight:"none"}}),h=({indexCount:e,totalIndexSize:t,avgIndexSize:n})=>s.createElement("div",{"data-testid":"index-stats-item",className:d},s.createElement(c,{dataTestId:"index-count",label:"Indexes",value:e,primary:!0}),s.createElement(c,{dataTestId:"total-index-size",label:"total size",value:t}),s.createElement(c,{dataTestId:"avg-index-size",label:"avg. size",value:n})),T=(0,r.css)({textAlign:"right",paddingRight:0,justifyContent:"flex-end",display:"flex",float:"right"}),y=(0,r.css)({display:"none"}),f=({isReadonly:e,isEditing:t,isTimeSeries:n,documentCount:r,storageSize:a,avgDocumentSize:o,indexCount:i,totalIndexSize:l,avgIndexSize:p})=>!0===e||!0===t?s.createElement("div",{"data-testid":"collection-stats-empty",className:y}):s.createElement("div",{"data-testid":"collection-stats",className:T},s.createElement(g,{isTimeSeries:n,documentCount:r,storageSize:a,avgDocumentSize:o}),!n&&s.createElement(h,{indexCount:i,totalIndexSize:l,avgIndexSize:p})),b=e=>s.createElement(r.LeafyGreenProvider,null,s.createElement(a.StoreConnector,{store:e.store},s.createElement(f,e)));var S=n(10862),A=n.n(S),E=n(99837),_=n.n(E),x=n(84935),I=n.n(x),L=n(55038),v=n.n(L),C=n(58836);const R=n.n(C)()("compass-collection-stats:store"),O="N/A",N=A().createStore({mixins:[_().store],updateCollectionDetails(e){const t={namespace:e.ns,isReadonly:Boolean(e.readonly),isTimeSeries:"timeseries"===e.type,...this._formatCollectionStats(e)};this.setState(t)},getInitialState:()=>({namespace:"",isEditing:!1,isReadonly:!1,isTimeSeries:!1,documentCount:O,storageSize:O,avgDocumentSize:O,indexCount:O,totalIndexSize:O,avgIndexSize:O}),_formatCollectionStats(e){const{document_count:t,index_count:n,index_size:r,status:s,avg_document_size:a,storage_size:o,free_storage_size:i}=e;return["initial","fetching","error"].includes(s)?{documentCount:O,storageSize:O,avgDocumentSize:O,indexCount:O,totalIndexSize:O,avgIndexSize:O}:{documentCount:this._format(t),storageSize:this._format(o-i,"b"),avgDocumentSize:this._format(a,"b"),indexCount:this._format(n),totalIndexSize:this._format(r,"b"),avgIndexSize:this._format(this._avg(r,n),"b")}},_avg:(e,t)=>t<=0?0:e/t,_format(e,t="a"){if("number"!=typeof(n=e)||isNaN(n))return O;var n;const r=e<=1e3?"0":"0.0";return v()(e).format(r+t)}});function j(e,t){e.ns===N.state.namespace&&("ready"===t&&N.updateCollectionDetails(e),"error"===t&&(R("failed to fetch collection details",e.statusError),N.setState({...N.getInitialState(),namespace:N.state.namespace})))}const w=Symbol("instance"),D=Symbol("globalAppRegistry");function B(){N[w]=null}const M=JSON.parse('{"name":"@mongodb-js/compass-collection-stats","description":"Compass Collection Stats","productName":"Collection Stats","author":{"name":"MongoDB Inc","email":"compass@mongodb.com"},"publishConfig":{"access":"public"},"homepage":"https://github.com/mongodb-js/compass","bugs":{"url":"https://jira.mongodb.org/projects/COMPASS/issues","email":"compass@mongodb.com"},"version":"6.21.0","apiVersion":"3.0.0","files":["dist"],"main":"dist/index.js","exports":{"webpack":"./src/index.ts","require":"./dist/index.js"},"types":"./dist/index.d.ts","repository":{"type":"git","url":"https://github.com/mongodb-js/compass.git"},"scripts":{"bootstrap":"npm run compile","prepublishOnly":"npm run compile","compile":"tsc -p tsconfig.json","precompile":"rimraf dist","eslint":"eslint","prettier":"prettier","lint":"npm run eslint . && npm run prettier -- --check .","depcheck":"depcheck","check":"npm run typecheck && npm run lint && npm run depcheck","check-ci":"npm run check","test":"mocha","test-electron":"xvfb-maybe electron-mocha --no-sandbox","test-cov":"nyc -x \\"**/*.spec.*\\" --reporter=lcov --reporter=text --reporter=html npm run test","test-watch":"npm run test -- --watch","test-ci":"npm run test-cov","test-ci-electron":"npm run test-electron","typecheck":"tsc --noEmit","reformat":"npm run prettier -- --write ."},"license":"SSPL","peerDependencies":{"@mongodb-js/compass-components":"^0.13.0","hadron-react-components":"^5.12.0","mongodb-data-service":"^21.18.0","mongodb-ns":"^2.3.0","numeral":"*","react":"^16.14.0","react-dom":"^16.14.0","reflux":"^0.4.1","reflux-state-mixin":"github:mongodb-js/reflux-state-mixin"},"devDependencies":{"@mongodb-js/compass-components":"^0.13.0","@mongodb-js/eslint-config-compass":"^0.7.0","@mongodb-js/mocha-config-compass":"^0.10.0","@mongodb-js/prettier-config-compass":"^0.5.0","@mongodb-js/tsconfig-compass":"^0.6.0","@testing-library/react":"^12.0.0","@types/chai":"^4.2.21","@types/chai-dom":"^0.0.10","@types/mocha":"^9.0.0","@types/numeral":"^2.0.2","@types/react":"^17.0.5","@types/react-dom":"^17.0.10","chai":"^4.1.2","debug":"4.3.0","depcheck":"^1.4.1","electron-mocha":"^10.1.0","eslint":"^7.25.0","hadron-app-registry":"^8.9.0","hadron-react-components":"^5.12.0","mocha":"^8.4.0","mongodb-data-service":"^21.18.0","mongodb-instance-model":"^11.20.0","mongodb-ns":"^2.3.0","numeral":"^2.0.6","nyc":"^15.0.0","prettier":"2.3.2","react":"^16.14.0","react-dom":"^16.14.0","reflux":"^0.4.1","reflux-state-mixin":"github:mongodb-js/reflux-state-mixin","resolve":"^1.15.1","rimraf":"^3.0.1","xvfb-maybe":"^0.2.1"}}'),$={component:b,name:"Collection HUD",order:1,configureStore:e=>{const t=e.namespace,n=e.globalAppRegistry,r=e.isEditing||!1;if(!t)throw new Error("Trying to render collection stats without namespace");const s=n.getStore("App.InstanceStore"),{instance:a}=s?.getState()??{};if(!a)throw new Error("Trying to configure collection stats plugin store without instance model");N[D]||(N[D]=n,n.on("instance-destroyed",B)),N[w]||(N[w]=a,a.on("change:collections.status",j)),N.setState({namespace:t,isEditing:r});const{database:o,ns:i}=I()(t),l=a.databases?.get(o)?.collections.get(i)??null;if(!l)throw new Error(`Couldn't find collection model for namespace ${t}`);return N.updateCollectionDetails(l),N},storeName:"CollectionStats.Store"};function k(e){e.registerRole("Collection.HUD",$)}function P(e){e.deregisterRole("Collection.HUD",$)}const F=b},2797:(e,t,n)=>{"use strict";n.r(t),n.d(t,{activate:()=>Ae,deactivate:()=>Ee,default:()=>_e,metadata:()=>Se});var r=n(2784),s=n(16435),a=n(13980),o=n.n(a),i=n(72779),l=n.n(i),p=n(50517),m=n(24179),c=n(42915),u=n(19257),g=n.n(u),d=n(6909);const{debug:h}=(0,d.createLoggerAndTelemetry)("mongodb-compass:compass-collection:context"),T=(e,t)=>{const n=e.configureActions();return t.registerAction(e.actionName,n),n},y=({role:e,globalAppRegistry:t,localAppRegistry:n,dataService:r,namespace:s,serverVersion:a,isReadonly:o,isTimeSeries:i,actions:l,allowWrites:p,sourceName:m,editViewName:c,sourcePipeline:u,query:g,aggregation:d})=>{const h=e.configureStore({localAppRegistry:n,globalAppRegistry:t,dataProvider:{error:r.error,dataProvider:r.dataService},namespace:s,serverVersion:a,isReadonly:o,isTimeSeries:i,actions:l,allowWrites:p,sourceName:m,editViewName:c,sourcePipeline:u,query:g,aggregation:d});return n.registerStore(e.storeName,h),h},f=({state:e,namespace:t,isReadonly:n,isTimeSeries:s,isDataLake:a,sourceName:o,editViewName:i,sourcePipeline:l,query:m,aggregation:u})=>{const d=e.serverVersion,f=new c.default,b=e.appRegistry,S=(b.getRole("Collection.Tab")||[]).filter((e=>!(!["Indexes","Validation","Explain Plan"].includes(e.name)||!a)||!e.minimumServerVersion||g().gte(d,e.minimumServerVersion))),A=[],E=[],_=[],x=b.getRole("Query.QueryBar")[0];f.registerRole("Query.QueryBar",x);const I=T(x,f);y({role:x,globalAppRegistry:b,localAppRegistry:f,dataService:e.dataService,namespace:t,serverVersion:d,isReadonly:n,isTimeSeries:s,actions:I,allowWrites:!a,query:m,aggregation:u}),S.forEach(((c,g)=>{const S=T(c,f),x=y({role:c,globalAppRegistry:b,localAppRegistry:f,dataService:e.dataService,namespace:t,serverVersion:d,isReadonly:n,isTimeSeries:s,actions:S,allowWrite:!a,sourceName:o,editViewName:i,sourcePipeline:l,query:m,aggregation:u});A.push(c.name),c.hasQueryHistory&&_.push(g),E.push(r.createElement(p.ErrorBoundary,{key:g,displayName:c.component.displayName,onError:(e,t)=>{h("error rendering collection view",c.component.displayName,e,t)}},r.createElement(c.component,{store:x,actions:S})))}));const L=b.getRole("Collection.HUD")[0],v=L.component,C=y({role:L,globalAppRegistry:b,localAppRegistry:f,dataService:e.dataService,namespace:t,serverVersion:d,isReadonly:n,isTimeSeries:s,sourceName:o,actions:{},allowWrites:!a,isEditing:Boolean(i)}),R=(({globalAppRegistry:e,localAppRegistry:t,dataService:n,namespace:r,serverVersion:s,isReadonly:a,isTimeSeries:o,sourceName:i,allowWrites:l})=>{const p=e.getRole("Collection.ScopedModal");return p?p.map(((p,m)=>(({role:e,globalAppRegistry:t,localAppRegistry:n,dataService:r,namespace:s,serverVersion:a,isReadonly:o,isTimeSeries:i,sourceName:l,allowWrites:p,key:m})=>{const c=e.configureActions(),u=y({role:e,globalAppRegistry:t,localAppRegistry:n,dataService:r,namespace:s,serverVersion:a,isReadonly:o,isTimeSeries:i,sourceName:l,actions:c,allowWrites:p});return{component:e.component,store:u,actions:c,key:m}})({role:p,globalAppRegistry:e,localAppRegistry:t,dataService:n,namespace:r,serverVersion:s,isReadonly:a,isTimeSeries:o,sourceName:i,allowWrites:l,key:m}))):[]})({globalAppRegistry:b,localAppRegistry:f,dataService:e.dataService,namespace:t,serverVersion:d,isReadonly:n,isTimeSeries:s,sourceName:o,allowWrites:!a});return b.getStore("Field.Store")({localAppRegistry:f,globalAppRegistry:b,namespace:t,serverVersion:d}),{tabs:A,views:E,queryHistoryIndexes:_,statsPlugin:v,statsStore:C,scopedModals:R,localAppRegistry:f,sourcePipeline:l}};var b=n(84935),S=n.n(b);const A="collection",E=`${A}/tabs/SELECT_NAMESPACE`,_=`${A}/tabs/CREATE_TAB`,x=`${A}/tabs/CLOSE_TAB`,I=`${A}/tabs/SELECT_TAB`,L=`${A}/tabs/MOVE_TAB`,v=`${A}/tabs/PREV_TAB`,C=`${A}/tabs/NEXT_TAB`,R=`${A}/tabs/CHANGE_ACTIVE_SUBTAB`,O=`${A}/tabs/CLEAR`,N=`${A}/tabs/COLLECTION_DROPPED`,j=`${A}/tabs/DATABASE_DROPPED`,w=[],D=({isReadOnly:e})=>{const{ipcRenderer:t}=n(45727);t&&t.call("window:show-collection-submenu",{isReadOnly:e})},B={[E]:(e,t)=>e.reduce(((e,n)=>{if(n.isActive){const n=t.editViewName?1:0;e.push({id:t.id,namespace:t.namespace,isActive:!0,activeSubTab:n,activeSubTabName:t.context.tabs[n],isReadonly:t.isReadonly,isTimeSeries:t.isTimeSeries,tabs:t.context.tabs,views:t.context.views,subtab:t.context.subtab,queryHistoryIndexes:t.context.queryHistoryIndexes,statsPlugin:t.context.statsPlugin,statsStore:t.context.statsStore,pipeline:t.context.sourcePipeline,scopedModals:t.context.scopedModals,sourceName:t.sourceName,editViewName:t.editViewName,sourceReadonly:t.sourceReadonly,sourceViewOn:t.sourceViewOn,localAppRegistry:t.context.localAppRegistry})}else e.push({...n});return e}),[]),[_]:(e,t)=>{const n=e.map((e=>({...e,isActive:!1}))),r=t.query?0:t.aggregation||t.editViewName?1:0;return n.push({id:t.id,namespace:t.namespace,isActive:!0,activeSubTab:r,activeSubTabName:t.context.tabs[r],isReadonly:t.isReadonly,isTimeSeries:t.isTimeSeries,tabs:t.context.tabs,views:t.context.views,subtab:t.context.subtab,queryHistoryIndexes:t.context.queryHistoryIndexes,statsPlugin:t.context.statsPlugin,statsStore:t.context.statsStore,scopedModals:t.context.scopedModals,sourceName:t.sourceName,pipeline:t.context.sourcePipeline,editViewName:t.editViewName,sourceReadonly:t.sourceReadonly,sourceViewOn:t.sourceViewOn,localAppRegistry:t.context.localAppRegistry}),n},[x]:(e,t)=>{const n=t.index,r=e.findIndex((e=>e.isActive)),s=e.length;return e.reduce(((e,t,a)=>(n!==a&&(r===n?e.push({...t,isActive:U(n,a,s)}):e.push({...t})),e)),[])},[L]:(e,t)=>{if(t.fromIndex===t.toIndex)return e;const n=e.map((e=>({...e})));return n.splice(t.toIndex,0,n.splice(t.fromIndex,1)[0]),n},[C]:e=>{const t=e.findIndex((e=>e.isActive));return e.map(((n,r)=>({...n,isActive:q(t,r,e.length)})))},[v]:e=>{const t=e.findIndex((e=>e.isActive));return e.map(((n,r)=>({...n,isActive:F(t,r,e.length)})))},[I]:(e,t)=>e.map(((e,n)=>({...e,isActive:t.index===n}))),[R]:(e,t)=>e.map((e=>{const n=t.id===e.id?t.activeSubTab:e.activeSubTab;return{...e,activeSubTab:n,activeSubTabName:e.tabs[n]}})),[O]:()=>w,[N]:(e,t)=>{const n=e.filter((e=>e.namespace!==t.namespace));return n.length>0&&n.findIndex((e=>e.isActive))<0&&(n[0].isActive=!0),n},[j]:(e,t)=>{const n=e.filter((e=>S()(e.namespace).database!==t.name));return n.length>0&&n.findIndex((e=>e.isActive))<0&&(n[0].isActive=!0),n}},M=()=>({type:O}),$=({namespace:e,isReadonly:t,isTimeSeries:n,sourceName:r,editViewName:s,sourceReadonly:a,sourceViewOn:o,sourcePipeline:i})=>(l,p)=>{const m=p();if(0===m.tabs.length)l(k({namespace:e,isReadonly:t,isTimeSeries:n,sourceName:r,editViewName:s,sourceReadonly:a,sourceViewOn:o,sourcePipeline:i}));else{const p=m.tabs.findIndex((e=>e.isActive)),c=m.tabs[p].namespace;e!==c&&l(P({namespace:e,isReadonly:t,isTimeSeries:n,sourceName:r,editViewName:s,sourceReadonly:a,sourceViewOn:o,sourcePipeline:i}))}},k=({namespace:e,isReadonly:t,isTimeSeries:n,sourceName:r,editViewName:s,sourceReadonly:a,sourceViewOn:o,sourcePipeline:i,query:l,aggregation:p})=>(c,u)=>{const g=u(),d=f({state:g,namespace:e,isReadonly:t,isDataLake:g.isDataLake,isTimeSeries:n,sourceName:r,editViewName:s,sourcePipeline:i,query:l,aggregation:p});c((({id:e,namespace:t,isReadonly:n,isTimeSeries:r,sourceName:s,editViewName:a,context:o,sourceReadonly:i,sourceViewOn:l,query:p,aggregation:m})=>({type:_,id:e,namespace:t,isReadonly:n||!1,isTimeSeries:r||!1,sourceName:s,editViewName:a,context:o,sourceReadonly:i,sourceViewOn:l,query:p,aggregation:m}))({id:(new m.ObjectId).toHexString(),namespace:e,isReadonly:t,isTimeSeries:n,sourceName:r,editViewName:s,context:d,sourceReadonly:!!a,sourceViewOn:o,query:l,aggregation:p})),D({isReadOnly:t})},P=({namespace:e,isReadonly:t,isTimeSeries:n,sourceName:r,editViewName:s,sourceReadonly:a,sourceViewOn:o,sourcePipeline:i})=>(l,p)=>{const c=p(),u=f({state:c,namespace:e,isReadonly:t,isDataLake:c.isDataLake,isTimeSeries:n,sourceName:r,editViewName:s,sourcePipeline:i});l((({id:e,namespace:t,isReadonly:n,isTimeSeries:r,sourceName:s,editViewName:a,context:o,sourceReadonly:i,sourceViewOn:l})=>({type:E,id:e,namespace:t,isReadonly:n||!1,isTimeSeries:r,sourceName:s,editViewName:a,context:o,sourceReadonly:i,sourceViewOn:l}))({id:(new m.ObjectId).toHexString(),namespace:e,isReadonly:t,isTimeSeries:n,sourceName:r,editViewName:s,context:u,sourceReadonly:!!a,sourceViewOn:o})),D({isReadOnly:t})},F=(e,t,n)=>0===e?t===n-1:t===e-1,U=(e,t,n)=>e===n-1?t===n-2:t===e+1,q=(e,t,n)=>e===n-1?0===t:t===e+1;function G({sourceName:e}){return r.createElement("div",{className:"collection-header-actions-module-collection-header-actions-readonly-on__2SQeb",title:e},"view on: ",e)}G.propTypes={sourceName:o().string.isRequired};const H=G;function V({editViewName:e,isReadonly:t,onEditViewClicked:n,onReturnToViewClicked:s,sourceName:a}){return r.createElement("div",{className:"collection-header-actions-module-collection-header-actions__cQy-j"},t&&a&&r.createElement(H,{sourceName:a}),t&&a&&!e&&r.createElement(p.Button,{size:p.ButtonSize.XSmall,onClick:n},"EDIT VIEW"),e&&r.createElement(p.Button,{className:"collection-header-actions-module-collection-header-actions-return-to-view__3pV3i",size:p.ButtonSize.XSmall,onClick:s},"< Return to View"))}V.propTypes={editViewName:o().string,isReadonly:o().bool.isRequired,onEditViewClicked:o().func.isRequired,onReturnToViewClicked:o().func.isRequired,sourceName:o().string};const K=V,W="collection-header-module-collection-header-badge__2y9ub",Y=function(){return r.createElement(p.Badge,{className:W,variant:p.BadgeVariant.LightGray},"READ-ONLY")},z=function(){return r.createElement(p.Badge,{className:W,variant:p.BadgeVariant.DarkGray},r.createElement(p.Icon,{glyph:"TimeSeries",title:"Time-Series Collection"}),"TIME-SERIES")},Z=function(){return r.createElement(p.Badge,{className:W,variant:p.BadgeVariant.DarkGray},r.createElement(p.Icon,{glyph:"Visibility",title:"View"}),"VIEW")};class X extends r.Component{static displayName="CollectionHeaderComponent";static propTypes={globalAppRegistry:o().object.isRequired,namespace:o().string.isRequired,isReadonly:o().bool.isRequired,isTimeSeries:o().bool.isRequired,statsPlugin:o().func.isRequired,selectOrCreateTab:o().func.isRequired,statsStore:o().object.isRequired,sourceName:o().string,sourceReadonly:o().bool.isRequired,sourceViewOn:o().string,editViewName:o().string,pipeline:o().array};onEditViewClicked=()=>{this.props.selectOrCreateTab({namespace:this.props.sourceName,isReadonly:this.props.sourceReadonly,isTimeSeries:this.props.isTimeSeries,sourceName:this.props.sourceViewOn,editViewName:this.props.namespace,sourceReadonly:!1,sourceViewOn:null,sourcePipeline:this.props.pipeline})};onReturnToViewClicked=()=>{this.props.selectOrCreateTab({namespace:this.props.editViewName,isReadonly:!0,isTimeSeries:this.props.isTimeSeries,sourceName:this.props.namespace,editViewName:null,sourceReadonly:this.props.isReadonly,sourceViewOn:this.props.sourceName,sourcePipeline:this.props.pipeline})};handleDBClick=e=>{this.props.globalAppRegistry.emit("select-database",e)};renderStats(){return r.createElement(this.props.statsPlugin,{store:this.props.statsStore})}render(){const e=S()(this.props.namespace),t=e.database,n=e.collection;return r.createElement("div",{className:"collection-header-module-collection-header__3PZn8"},!this.props.isReadonly&&this.renderStats(),r.createElement("div",{title:`${t}.${n}`,className:"collection-header-module-collection-header-title__2AYZ8","data-testid":"collection-header-title"},r.createElement("div",{"data-testid":"collection-header-namespace",className:"collection-header-module-collection-header-namespace__21u6F"},r.createElement("a",{className:"collection-header-module-collection-header-title-db__2U8uC",onClick:()=>this.handleDBClick(t),href:"#"},t),r.createElement("span",null,"."),r.createElement("span",{className:"collection-header-module-collection-header-title-collection__12ip_"},n)),this.props.isReadonly&&r.createElement(Y,null),this.props.isTimeSeries&&r.createElement(z,null),this.props.isReadonly&&this.props.sourceName&&r.createElement(Z,null),r.createElement(K,{editViewName:this.props.editViewName,isReadonly:this.props.isReadonly,onEditViewClicked:this.onEditViewClicked,onReturnToViewClicked:this.onReturnToViewClicked,sourceName:this.props.sourceName})))}}const J=X,{track:Q}=(0,d.createLoggerAndTelemetry)("COMPASS-COLLECTION-UI");function ee(e){return e.toLowerCase().replace(/ /g,"_")}function te({namespace:e,isReadonly:t,isTimeSeries:n,statsPlugin:s,statsStore:a,editViewName:o,sourceReadonly:i,sourceViewOn:l,selectOrCreateTab:m,pipeline:c,sourceName:u,activeSubTab:g,id:d,queryHistoryIndexes:h,tabs:T,views:y,localAppRegistry:f,globalAppRegistry:b,changeActiveSubTab:S,scopedModals:A}){(0,r.useEffect)((()=>{T&&T.length>0&&Q("Screen",{name:ee(T[g]||"Unknown")})}),[]);const E=(0,r.useCallback)(((e,t)=>{g!==e&&(h.includes(e)||f.emit("collapse-query-history"),f.emit("subtab-changed",t),b.emit("compass:screen:viewed",{screen:t}),Q("Screen",{name:ee(t)}),S(e,d))}),[g,h,f,b,S]);return r.createElement("div",{className:"collection-module-collection__3fDNs"},r.createElement("div",{className:"collection-module-collection-container__2enjc"},r.createElement(J,{globalAppRegistry:b,namespace:e,isReadonly:t,isTimeSeries:n,statsPlugin:s,statsStore:a,editViewName:o,sourceReadonly:i,sourceViewOn:l,selectOrCreateTab:m,pipeline:c,sourceName:u}),r.createElement(p.TabNavBar,{"data-test-id":"collection-tabs","aria-label":"Collection Tabs",tabs:T,views:y,activeTabIndex:g,onTabClicked:e=>E(e,T[e]),mountAllViews:!0})),r.createElement("div",{className:"collection-module-collection-modal-container__1aI0U"},A.map((e=>r.createElement(e.component,{store:e.store,actions:e.actions,key:e.key})))))}te.displayName="CollectionComponent",te.propTypes={namespace:o().string.isRequired,isTimeSeries:o().bool,isReadonly:o().bool.isRequired,tabs:o().array.isRequired,views:o().array.isRequired,scopedModals:o().array.isRequired,queryHistoryIndexes:o().array.isRequired,statsPlugin:o().func.isRequired,selectOrCreateTab:o().func.isRequired,statsStore:o().object.isRequired,localAppRegistry:o().object.isRequired,globalAppRegistry:o().object.isRequired,activeSubTab:o().number.isRequired,id:o().string.isRequired,sourceName:o().string,sourceReadonly:o().bool.isRequired,sourceViewOn:o().string,editViewName:o().string,pipeline:o().array,changeActiveSubTab:o().func.isRequired};const ne=te,re={namespace:"",isReadonly:!1,isTimeSeries:!1,sourceName:""};function se(e){switch(e){case"timeseries":return"TimeSeries";case"view":return"Visibility";default:return"Folder"}}class ae extends r.PureComponent{static displayName="Workspace";static propTypes={tabs:o().array.isRequired,closeTab:o().func.isRequired,createNewTab:o().func.isRequired,selectOrCreateTab:o().func.isRequired,appRegistry:o().object.isRequired,prevTab:o().func.isRequired,nextTab:o().func.isRequired,moveTab:o().func.isRequired,selectTab:o().func.isRequired,changeActiveSubTab:o().func.isRequired};constructor(e){super(e),this.boundHandleKeypress=this.handleKeypress.bind(this)}componentDidMount(){window.addEventListener("keydown",this.boundHandleKeypress)}componentWillUnmount(){window.removeEventListener("keydown",this.boundHandleKeypress)}onCreateNewTab=()=>{const e=this.activeTab(),t=e?{namespace:e.namespace,isReadonly:e.isReadonly,isTimeSeries:e.isTimeSeries,sourceName:e.sourceName,editViewName:e.editViewName,sourceReadonly:e.sourceReadonly,sourceViewOn:e.sourceViewOn,sourcePipeline:e.pipeline}:re;this.props.createNewTab(t)};handleKeypress=e=>{(e.ctrlKey||e.metaKey)&&(e.shiftKey?221===e.keyCode?this.props.nextTab():219===e.keyCode&&this.props.prevTab():87===e.keyCode?(this.props.closeTab(this.props.tabs.findIndex((e=>e.isActive))),this.props.tabs.length>0&&e.preventDefault()):84===e.keyCode&&this.onCreateNewTab())};activeTab(){return this.props.tabs.find((e=>e.isActive))}renderViews(){return this.props.tabs.map((e=>{const t=l()({"workspace-module-workspace-view-tab__3PCP7":!0,hidden:!e.isActive});return r.createElement("div",{className:t,id:e.id,key:e.id+"-wrap"},r.createElement(ne,{key:e.id,id:e.id,namespace:e.namespace,isReadonly:e.isReadonly,isTimeSeries:e.isTimeSeries,sourceName:e.sourceName,editViewName:e.editViewName,sourceReadonly:e.sourceReadonly,sourceViewOn:e.sourceViewOn,tabs:e.tabs,views:e.views,scopedModals:e.scopedModals,queryHistoryIndexes:e.queryHistoryIndexes,statsPlugin:e.statsPlugin,statsStore:e.statsStore,activeSubTab:e.activeSubTab,pipeline:e.pipeline,changeActiveSubTab:this.props.changeActiveSubTab,selectOrCreateTab:this.props.selectOrCreateTab,globalAppRegistry:this.props.appRegistry,localAppRegistry:e.localAppRegistry}))}))}render(){const e=this.props.tabs.findIndex((e=>e.isActive));return r.createElement("div",{className:"workspace-module-workspace__14WwH"},r.createElement(p.WorkspaceTabs,{"aria-label":"Collection Tabs",onCreateNewTab:this.onCreateNewTab,onMoveTab:this.props.moveTab,onSelectTab:this.props.selectTab,onCloseTab:this.props.closeTab,tabs:this.props.tabs.map((e=>{return{title:e.activeSubTabName,subtitle:e.namespace,tabContentId:e.id,iconGlyph:se((t=e.isTimeSeries,n=e.isReadonly,t?"timeseries":n?"view":"collection"))};var t,n})),selectedTabIndex:e}),r.createElement("div",{className:"workspace-module-workspace-views__hcMk8"},this.renderViews()))}}const oe=(0,s.$j)((e=>({tabs:e.tabs,appRegistry:e.appRegistry})),{createNewTab:k,selectOrCreateTab:$,closeTab:e=>({type:x,index:e}),prevTab:()=>({type:v}),nextTab:()=>({type:C}),moveTab:(e,t)=>({type:L,fromIndex:e,toIndex:t}),selectTab:e=>({type:I,index:e}),changeActiveSubTab:(e,t)=>({type:R,activeSubTab:e,id:t})})(ae);var ie=n(18717),le=n(43292);const pe="collection/app-registry/APP_REGISTRY_ACTIVATED",me="collection/data-service/DATA_SERVICE_CONNECTED",ce={error:null,dataService:null},ue="collection/server-version/SERVER_VERSION_CHANGED",ge={appRegistry:null,dataService:ce,serverVersion:"4.0.0",tabs:w,isDataLake:!1},de={"collection/reset":()=>({...ge})},he=(0,ie.combineReducers)({appRegistry:function(e=null,t){return t.type===pe?t.appRegistry:e},dataService:function(e=ce,t){return t.type===me?{error:t.error,dataService:t.dataService}:e},serverVersion:function(e="4.0.0",t){return t.type===ue&&t.version||e},tabs:function(e=w,t){const n=B[t.type];return n?n(e,t):e},isDataLake:function(e=!1,t){return"collection/is-data-lake/IS_DATA_LAKE_CHANGED"===t.type?t.isDataLake:e}}),Te=(0,ie.createStore)(((e,t)=>{const n=de[t.type];return n?n(e,t):he(e,t)}),(0,ie.applyMiddleware)(le.Z));Te.onActivated=e=>{const t=n(45727);e.on("open-namespace-in-new-tab",(e=>{e.namespace&&""!==S()(e.namespace).collection&&Te.dispatch(k({namespace:e.namespace,isReadonly:e.isReadonly,sourceName:e.sourceName,editViewName:e.editViewName,sourceReadonly:e.sourceReadonly,isTimeSeries:!!e.isTimeSeries,sourceViewOn:e.sourceViewOn,sourcePipeline:e.sourcePipeline,query:e.query,aggregation:e.aggregation}))})),e.on("select-namespace",(e=>{e.namespace&&""!==S()(e.namespace).collection&&Te.dispatch($({namespace:e.namespace,isReadonly:e.isReadonly,isTimeSeries:e.isTimeSeries,sourceName:e.sourceName,editViewName:e.editViewName,sourceReadonly:e.sourceReadonly,sourceViewOn:e.sourceViewOn,sourcePipeline:e.sourcePipeline}))})),e.on("database-selected",(()=>{Te.dispatch(M())})),e.on("collection-dropped",(e=>{Te.dispatch((e=>({type:N,namespace:e}))(e))})),e.on("database-dropped",(e=>{Te.dispatch((e=>({type:j,name:e}))(e))})),e.on("data-service-connected",((e,t)=>{Te.dispatch(((e,t)=>({type:me,error:e,dataService:t}))(e,t))})),e.on("server-version-changed",(e=>{Te.dispatch((e=>({type:ue,version:e}))(e))})),e.on("data-service-disconnected",(()=>{Te.dispatch(M())})),t.on("window:menu-share-schema-json",(()=>{const e=Te.getState();if(e.tabs){const t=e.tabs.find((e=>!0===e.isActive));t.localAppRegistry&&t.localAppRegistry.emit("menu-share-schema-json")}})),t.on("compass:open-export",(()=>{const t=Te.getState();if(t.tabs){const n=t.tabs.find((e=>!0===e.isActive));if(n){const t=n.localAppRegistry.getStore("CRUD.Store"),{query:r,count:s}=t.state,{filter:a,limit:o,skip:i}=r;e.emit("open-export",{namespace:n.namespace,query:{filter:a,limit:o,skip:i},count:s})}}})),t.on("compass:open-import",(()=>{const t=Te.getState();if(t.tabs){const n=t.tabs.find((e=>!0===e.isActive));n&&e.emit("open-import",{namespace:n.namespace})}})),Te.dispatch((e=>({type:pe,appRegistry:e}))(e))},Te.subscribe((()=>{const e=Te.getState();0===e.tabs.length&&e.appRegistry&&e.appRegistry.emit("all-collection-tabs-closed")}));const ye=Te;class fe extends r.Component{static displayName="CollectionWorkspacePlugin";render(){return r.createElement(s.zt,{store:ye},r.createElement(oe,null))}}const be=fe,Se=JSON.parse('{"name":"@mongodb-js/compass-collection","productName":"Collection plugin","version":"3.24.0","apiVersion":"3.0.0","description":"Compass Collection Plugin","main":"lib/index.js","exports":{"webpack":"./src/index.js","require":"./lib/index.js"},"repository":{"type":"git","url":"https://github.com/mongodb-js/compass.git"},"scripts":{"clean":"rimraf lib","precompile":"npm run clean","compile":"cross-env NODE_ENV=production webpack --config ./config/webpack.prod.config.js","start":"webpack-dev-server --config ./config/webpack.dev.config.js","start:watch":"npm run clean && webpack --config ./config/webpack.watch.config.js","test":"cross-env NODE_ENV=test mocha-webpack \\"./src/**/*.spec.js\\"","test-watch":"cross-env NODE_ENV=test mocha-webpack \\"./src/**/*.spec.js\\" --watch","test-electron":"xvfb-maybe cross-env NODE_ENV=test karma start","test-cov":"nyc npm run test","check":"npm run lint && npm run depcheck","prepublishOnly":"npm run compile","lint":"eslint \\"./src/**/*.{js,jsx}\\" \\"./test/**/*.js\\" \\"./electron/**/*.js\\" \\"./config/**/*.{js,jsx}\\"","depcheck":"depcheck","test-ci":"npm run test","test-ci-electron":"echo \\"TODO(COMPASS-5555): These tests are broken and disabled for now\\"","bootstrap":"npm run compile"},"license":"SSPL","peerDependencies":{"@mongodb-js/compass-components":"^0.13.0","bson":"*","hadron-ipc":"^2.9.0","hadron-react-buttons":"^5.7.0","hadron-react-components":"^5.13.0","mongodb-ns":"^2.3.0","mongodb-query-parser":"^2.4.4","react":"^16.14.0","react-dom":"^16.14.0","react-redux":"*","redux":"^4.1.2","redux-thunk":"^2.3.0"},"devDependencies":{"@babel/cli":"^7.14.3","@babel/core":"^7.14.3","@babel/plugin-proposal-decorators":"^7.14.2","@babel/plugin-syntax-dynamic-import":"^7.8.3","@babel/preset-env":"^7.14.2","@babel/preset-react":"^7.13.13","@babel/register":"^7.13.16","@mongodb-js/compass-aggregations":"^8.22.0","@mongodb-js/compass-collection-stats":"^6.21.0","@mongodb-js/compass-components":"^0.13.0","@mongodb-js/compass-crud":"^12.22.0","@mongodb-js/compass-deployment-awareness":"^11.21.0","@mongodb-js/compass-explain-plan":"^5.24.0","@mongodb-js/compass-field-store":"^7.21.0","@mongodb-js/compass-indexes":"^4.23.0","@mongodb-js/compass-query-bar":"^7.20.0","@mongodb-js/compass-query-history":"^8.21.0","@mongodb-js/compass-schema":"^5.21.0","@mongodb-js/compass-schema-validation":"^5.22.0","autoprefixer":"^9.7.4","babel-loader":"^8.2.2","bson":"^4.4.1","bson-transpilers":"^1.7.0","chai":"^4.2.0","chai-enzyme":"1.0.0-beta.1","classnames":"^2.2.6","core-js":"^3.12.1","cross-env":"^7.0.0","css-loader":"^4.3.0","d3-flextree":"1.0.3","d3-timer":"1.0.7","depcheck":"^1.4.1","electron":"^13.5.1","enzyme":"^3.11.0","enzyme-adapter-react-16":"^1.15.2","eslint":"^7.25.0","eslint-config-mongodb-js":"^5.0.3","extract-text-webpack-plugin":"^4.0.0-beta.0","file-loader":"^5.1.0","font-awesome":"^4.7.0","hadron-app":"^4.21.0","hadron-app-registry":"^8.10.0","hadron-ipc":"^2.9.0","hadron-react-buttons":"^5.7.0","hadron-react-components":"^5.13.0","html-webpack-plugin":"^3.2.0","ignore-loader":"^0.1.2","istanbul-instrumenter-loader":"^3.0.1","jsdom":"^16.7.0","jsdom-global":"^3.0.2","karma":"^6.3.4","karma-chai":"^0.1.0","karma-chai-sinon":"^0.1.5","karma-electron":"^7.0.0","karma-junit-reporter":"^2.0.1","karma-mocha":"^1.3.0","karma-mocha-reporter":"^2.2.5","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","less":"^3.11.1","less-loader":"^7.3.0","mocha":"^7.0.1","mocha-webpack":"^2.0.0-beta.0","mongodb-connection-model":"^21.15.0","mongodb-data-service":"^21.19.0","mongodb-ns":"^2.3.0","mongodb-query-parser":"^2.4.4","mongodb-reflux-store":"^0.0.1","node-loader":"^0.6.0","nyc":"^15.0.0","peer-deps-externals-webpack-plugin":"^1.0.4","postcss-loader":"^2.1.6","prop-types":"^15.7.2","react":"^16.14.0","react-dom":"^16.14.0","react-hot-loader":"^4.13.0","react-redux":"^5.0.6","redux":"^4.1.2","redux-thunk":"^2.3.0","reflux":"^0.4.1","reflux-state-mixin":"github:mongodb-js/reflux-state-mixin","resolve":"^1.15.1","rimraf":"^3.0.2","semver":"^5.4.1","shebang-loader":"^0.0.1","sinon":"^9.0.0","sinon-chai":"^3.5.0","style-loader":"^2.0.0","url-loader":"^3.0.0","webpack":"^4.46.0","webpack-bundle-analyzer":"^3.6.0","webpack-cli":"^3.3.12","webpack-dev-server":"^3.11.2","webpack-merge":"^4.2.2","webpack-node-externals":"^3.0.0","xvfb-maybe":"^0.2.1"},"dependencies":{"@mongodb-js/compass-logging":"^0.10.0","lodash.filter":"^4.6.0","lodash.isempty":"^4.4.0"},"homepage":"https://github.com/mongodb-js/compass","bugs":{"url":"https://jira.mongodb.org/projects/COMPASS/issues","email":"compass@mongodb.com"}}');function Ae(e){e.registerComponent("Collection.Workspace",be),e.registerStore("Collection.Store",ye)}function Ee(e){e.deregisterComponent("Collection.Workspace"),e.deregisterStore("Collection.Store")}const _e=be},50517:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Accordion:()=>Xe,AtlasLogoMark:()=>A.Iq,BSONValue:()=>Pr,Badge:()=>g.Z,BadgeVariant:()=>g.$,Banner:()=>d.Z,BannerVariant:()=>d.$,Body:()=>B.uT,Button:()=>M,ButtonSize:()=>h.$u,ButtonVariant:()=>h.$e,CancelLoader:()=>ae,Card:()=>$,Cell:()=>C.bL,Checkbox:()=>Qt,ConfirmationModal:()=>pe,ContentWithFallback:()=>Tn,Description:()=>Q,Disclaimer:()=>B.em,DocumentList:()=>a,ErrorBoundary:()=>On,FadeInPlaceholder:()=>_n,FavoriteIcon:()=>Xt,FileInput:()=>Ce,FocusState:()=>et,H1:()=>B.H1,H2:()=>B.H2,H3:()=>B.H3,Icon:()=>b.default,IconButton:()=>F,InlineCode:()=>B.ZM,InlineDefinition:()=>vn,InlineInfoLink:()=>Gn,InlineKeyCode:()=>B.wh,Label:()=>J,LeafyGreenProvider:()=>en.ZP,Link:()=>B.rU,Menu:()=>E.v2,MenuItem:()=>E.sN,MenuSeparator:()=>E.Cl,Modal:()=>Oe,ModalFooter:()=>U,ModalTitle:()=>we,MongoDBLogo:()=>A.ap,MongoDBLogoMark:()=>A.zr,Option:()=>v.Wx,OptionGroup:()=>v.Ye,Overline:()=>B.Lh,Pipeline:()=>fr.B_,Placeholder:()=>zn,Portal:()=>tn.Z,Radio:()=>I.Y8,RadioBox:()=>x.X,RadioBoxGroup:()=>Me,RadioBoxSize:()=>x.$u,RadioGroup:()=>G,ResizeDirection:()=>Fe,ResizeHandle:()=>He,Row:()=>C.X2,SegmentedControl:()=>H,SegmentedControlOption:()=>L.L,Select:()=>V,SelectSize:()=>v.$u,SpinLoader:()=>Pe,Stage:()=>fr.Hf,Subtitle:()=>B.QE,Tab:()=>R.O,TabNavBar:()=>Un,Table:()=>K,TableHeader:()=>C.xD,Tabs:()=>W,TextArea:()=>Y,TextInput:()=>z,Theme:()=>o,ThemeProvider:()=>m,Toast:()=>j.Z,ToastArea:()=>sn,ToastVariant:()=>j.$,Toggle:()=>ln,Tooltip:()=>un,VirtualGrid:()=>pr,WorkspaceContainer:()=>Bn,WorkspaceTabs:()=>Zt,breakpoints:()=>ge.AV,cache:()=>ee.cache,compassFontSizes:()=>r,compassUIColors:()=>s,css:()=>ee.css,cx:()=>ee.cx,emotion:()=>ee.default,flush:()=>ee.flush,getRegisteredStyles:()=>ee.getRegisteredStyles,hydrate:()=>ee.hydrate,injectGlobal:()=>ee.injectGlobal,keyframes:()=>ee.keyframes,merge:()=>ee.merge,mergeProps:()=>rt,sheet:()=>ee.sheet,spacing:()=>ge.W0,uiColors:()=>ue.s,useDOMRect:()=>Zn,useDefaultAction:()=>mt,useFocusRing:()=>ur,useFocusState:()=>tt,useHoverState:()=>nt,useSortControls:()=>Tr,useSortedItems:()=>yr,useTheme:()=>c,useToast:()=>an,withTheme:()=>u});var r={};n.r(r),n.d(r,{defaultFontSize:()=>We,smallFontSize:()=>Ke});var s={};n.r(s),n.d(s,{gold:()=>it,gray8:()=>st,scrollbarThumbDarkTheme:()=>pt,scrollbarThumbLightTheme:()=>lt,transparentGray:()=>at,transparentWhite:()=>ot});var a={};n.r(a),n.d(a,{Document:()=>Ks,DocumentActionsGroup:()=>Gr,DocumentFieldsToggleGroup:()=>Kr});var o,i=n(2784);function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}!function(e){e.Light="Light",e.Dark="Dark"}(o||(o={}));const p=(0,i.createContext)({theme:o.Light}),m=({children:e,theme:t})=>i.createElement(p.Provider,{value:t},e);function c(){return(0,i.useContext)(p)}const u=function(e){const t=(t,n)=>{const r=c(),s="true"===global?.process?.env?.COMPASS_LG_DARKMODE;return i.createElement(e,l({darkMode:s?r?.theme===o.Dark:void 0,ref:n},t))},n=e.displayName||e.name||"Component";return t.displayName=`withTheme(${n})`,i.forwardRef(t)};var g=n(22878),d=n(18085),h=n(26702),T=n(36587),y=n(11875),f=n(24347),b=n(6132),S=n(39094),A=n(51594),E=n(62626),_=n(55310),x=n(55921),I=n(71750),L=n(79073),v=n(56662),C=n(19434),R=n(55981),O=n(38243),N=n(33112),j=n(51819),w=n(2115),D=n(18109),B=n(75511);const M=u(h.ZP),$=u(y.Z),k=u(T.Z),P=u(f.Z),F=u(S.Z),U=u(_.$_),q=u(_.ZP),G=u(I.Ee),H=u(L.s),V=u(v.Ph),K=u(C.iA),W=u(R.m),Y=u(O.C),z=u(N.ZP),Z=u(w.Z),X=u(D.ZP),J=u(B.__),Q=u(B.dk);var ee=n(57407);const te=(0,ee.css)({height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"10px 0"}),ne=(0,ee.css)({margin:"0 auto 30px",textAlign:"left",fontSize:"24px",color:"#807f7f",fontWeight:200}),re=(0,ee.css)({animation:"fa-spin 2s infinite linear",width:"40px",textAlign:"center",display:"inline-block",textRendering:"auto",font:"normal normal normal 20px/1 FontAwesome","&::before":{boxSizing:"border-box",content:'"\\f1ce"'}}),se=(0,ee.css)({padding:"0 10px 0 10px",height:"28px",fontWeight:"bold",fontSize:"13px",lineHeight:"26px",textTransform:"uppercase",backgroundColor:"transparent",border:"1px solid #13AA52",borderRadius:"3px",boxShadow:"none",color:"#13AA52",fontFamily:"Akzidenz",WebkitAppearance:"button",cursor:"pointer",overflow:"visible",margin:0,boxSizing:"border-box",outline:"none"}),ae=function({dataTestId:e,progressText:t,cancelText:n,onCancel:r}){return i.createElement("div",{"data-testid":e,className:te},i.createElement("div",{className:ne},i.createElement("i",{className:re}),t),i.createElement("div",null,i.createElement("button",{className:se,onClick:r},n)))};var oe=n(6909);function ie(){return ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ie.apply(this,arguments)}const{track:le}=(0,oe.createLoggerAndTelemetry)("COMPASS-UI"),pe=function({trackingId:e,...t}){return(0,i.useEffect)((()=>{t.open&&e&&le("Screen",{name:e})}),[t.open,e]),i.createElement(P,ie({"data-testid":e},t))};var me=n(71017),ce=n.n(me),ue=n(6583),ge=n(25615);const{base:de}=ue.s.red,he=(0,ee.css)({marginTop:ge.W0[2],marginBottom:ge.W0[2],marginRight:"auto",marginLeft:"auto",display:"flex"}),Te=(0,ee.css)({margin:"5px auto 20px"}),ye=(0,ee.css)({display:"flex",flexDirection:"row"}),fe=(0,ee.css)({marginLeft:ge.W0[1]}),be=(0,ee.css)({width:"100%"}),Se=(0,ee.css)({color:`${de} !important`}),Ae=(0,ee.css)({width:"90%",paddingRight:ge.W0[3]}),Ee=(0,ee.css)({color:ue.s.gray.base,marginTop:ge.W0[1],fontStyle:"italic",fontWeight:"normal",fontSize:12}),_e=(0,ee.css)({"&:link, &:active, &:hover":{textDecoration:"none"}}),xe=(0,ee.css)({display:"inline-block",verticalAlign:"middle",font:"normal normal normal 14px/1 FontAwesome",fontSize:"inherit",textRendering:"auto",margin:"0 0 0 5px",cursor:"pointer",color:"#bfbfbe","&:link, &:active":{color:"#bfbfbe"},"&:link, &:active, &:hover":{textDecoration:"none"},"&:hover":{color:"#fbb129"}}),Ie=(0,ee.css)({color:ue.s.gray.dark1}),Le=(0,ee.css)({color:ue.s.gray.light1});let ve;!function(e){e.Horizontal="HORIZONTAL",e.Vertical="VERTICAL"}(ve||(ve={}));const Ce=u((function({id:e,label:t,dataTestId:n,darkMode:r,onChange:s,disabled:a,multi:o=!1,optional:l=!1,optionalMessage:p,error:m=!1,errorMessage:c,variant:u=ve.Horizontal,showFileOnNewLine:g=!1,link:d,description:h,values:T}){const y=i.useRef(null),f=i.useMemo((()=>Array.isArray(T)&&T.length>0?T.map((e=>ce().basename(e))).join(", "):o?"Select files...":"Select a file..."),[T,o]),S=i.useCallback((e=>{const t=Array.from(e.currentTarget.files).map((e=>e.path));s(t)}),[s]),A="true"===global?.process?.env?.COMPASS_LG_DARKMODE;return i.createElement("div",null,i.createElement("div",{className:(0,ee.cx)({[he]:u===ve.Horizontal},{[Te]:u===ve.Vertical})},i.createElement("div",{className:(0,ee.cx)({[Ae]:u===ve.Horizontal})},i.createElement(J,{htmlFor:`${e}_file_input`,disabled:a},i.createElement("span",{className:(0,ee.cx)({[A&&r?Le:Ie]:a})},t)),l&&i.createElement("div",{className:Ee},p||"Optional"),d||h?d?i.createElement(B.rU,{"data-testid":"file-input-link",href:d,className:(0,ee.cx)(h?_e:xe),hideExternalIcon:!h},h??""):i.createElement(Q,{"data-testid":"file-input-description"},h):null),i.createElement("input",{"data-testid":n??"file-input",ref:y,id:`${e}_file_input`,name:e,type:"file",multiple:o,onChange:S,style:{display:"none"},key:T?T.join(","):"empty"}),i.createElement(M,{id:e,"data-testid":"file-input-button",className:be,disabled:a,onClick:()=>{!a&&y.current&&y.current.click()},title:"Select a file",leftGlyph:i.createElement(b.default,{glyph:"AddFile",title:null,fill:"currentColor"})},f)),g&&T&&T.length>0&&T.map(((e,t)=>i.createElement("div",{className:ye,key:e},e,i.createElement(F,{className:fe,"aria-label":"Remove file",onClick:()=>{const e=[...T];e.splice(t,1),s(e)}},i.createElement(b.default,{glyph:"X"}))))),m&&c&&i.createElement(J,{"data-testid":"file-input-error",className:Se,htmlFor:""},c))})),{track:Re}=(0,oe.createLoggerAndTelemetry)("COMPASS-UI");function Oe({trackingId:e,...t}){return(0,i.useEffect)((()=>{t.open&&e&&Re("Screen",{name:e})}),[t.open,e]),i.createElement(q,t)}function Ne(){return Ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ne.apply(this,arguments)}const je=(0,ee.css)({marginBottom:ge.W0[4]});function we(e){return i.createElement(B.H3,Ne({},e,{className:(0,ee.cx)(je,e.className)}))}function De(){return De=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},De.apply(this,arguments)}const Be=(0,ee.css)({marginTop:ge.W0[1]});function Me(e){return i.createElement(x.eb,De({},e,{className:`${Be}${e.className?` ${e.className}`:""}`}))}const $e=ee.keyframes`
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
`,ke=ee.css`
  border: 2px solid transparent;
  border-top: 2px solid ${ue.s.gray.dark3};
  border-radius: 50%;
  padding: 0;
  margin: 0;
  box-sizing: border-box;
  display: inline-block;

  animation: ${$e} 700ms ease infinite;
`;function Pe({size:e="12px"}){return i.createElement("div",{className:ke,style:{width:e,height:e}})}var Fe;!function(e){e.TOP="TOP",e.RIGHT="RIGHT"}(Fe||(Fe={}));const Ue=(0,ee.css)({position:"absolute",background:"transparent",padding:0,transition:"opacity 250ms ease",transitionDelay:"0ms",backgroundColor:"#019EE2",opacity:"0",outline:"none",zIndex:100,":focus":{opacity:1},":hover":{transitionDelay:"250ms",opacity:1},WebkitAppearance:"none","::-webkit-slider-thumb":{WebkitAppearance:"none"},"::-ms-track":{background:"none",borderColor:"none",color:"none"}}),qe=(0,ee.css)({width:"4px !important",right:"-2px",bottom:0,top:0,":hover":{cursor:"ew-resize"}}),Ge=(0,ee.css)({width:"100%",height:"4px !important",top:"-2px",right:0,left:0,":hover":{cursor:"ns-resize"}});function He({direction:e,step:t=10,value:n,minValue:r,maxValue:s,onChange:a,title:o}){const l=(0,i.useRef)(!1);function p(e){return Math.min(s,Math.max(r,e))}let m="vertical",c="Width",u=qe;return e===Fe.TOP&&(m="horizontal",c="Height",u=Ge),i.createElement("input",{type:"range","aria-roledescription":`${m} splitter`,"aria-label":`${c} of the ${o}, resize using arrow keys`,className:(0,ee.cx)(Ue,u),min:r,max:s,value:n,step:t,onChange:e=>{l.current||a(p(Number(e.target.value)))},onMouseDown:()=>{l.current=!0},onMouseMove:t=>{l.current&&(e===Fe.RIGHT?a(p(n+t.movementX)):e===Fe.TOP&&a(p(n-t.movementY)))},onMouseUp:t=>{t.currentTarget.blur(),l.current=!1,e===Fe.RIGHT?a(p(n+t.movementX)):e===Fe.TOP&&a(p(n-t.movementY))}})}var Ve=n(11586);const Ke="13px",We="14px",Ye=(0,ee.css)({fontWeight:"bold",fontSize:We,display:"flex",alignItems:"center",border:"none",background:"none",borderRadius:"6px",boxShadow:"none",transition:"box-shadow 150ms ease-in-out","&:hover":{cursor:"pointer"},"&:focus-visible":{outline:"none",boxShadow:`0 0 0 3px ${ue.s.focus}`}}),ze=(0,ee.css)({marginTop:ge.W0[3],display:"flex",alignItems:"center"}),Ze=(0,ee.css)({marginRight:ge.W0[1]}),Xe=function(e){const[t,n]=(0,i.useState)(!1),r=(0,Ve.Me)("region-"),s=(0,Ve.Me)("label-");return i.createElement(i.Fragment,null,i.createElement("div",{className:ze},i.createElement("button",{"data-testid":e["data-testid"],className:Ye,id:s,type:"button","aria-expanded":t?"true":"false","aria-controls":r,onClick:()=>{n((e=>!e))}},i.createElement(b.default,{className:Ze,glyph:t?"ChevronDown":"ChevronRight"}),e.text)),t&&i.createElement("div",{role:"region","aria-labelledby":s,id:r},e.children))};var Je=n(45219),Qe=n(31477);let et;function tt(){const e=(0,i.useRef)(et.NoFocus),[t,n]=(0,i.useState)(!1),[r,s]=(0,i.useState)(!1),{isFocusVisible:a}=(0,Qe._Y)(),{focusWithinProps:o}=(0,Qe.L_)({onFocusWithinChange:s}),{focusProps:l}=(0,Qe.KK)({onFocusChange:n}),p=(0,i.useMemo)((()=>(0,Ve.dG)(l,o)),[l,o]);return e.current=function(e,t,n){return e&&n?et.FocusVisible:e?et.Focus:t&&n?et.FocusWithinVisible:t?et.FocusWithin:et.NoFocus}(t,r,a),[p,e.current,e]}function nt(){const[e,t]=(0,i.useState)(!1);return[{onMouseEnter(){t(!0)},onMouseLeave(){t(!1)}},e]}function rt(...e){const t=e.filter((e=>e.ref));return{...(0,Ve.dG)(...e),...t.length>0&&{ref(e){t.forEach((({ref:t})=>{"function"==typeof t?t(e):t&&"object"==typeof t&&(t.current=e)}))}}}}!function(e){e.NoFocus="NoFocus",e.FocusVisible="FocusVisible",e.Focus="Focus",e.FocusWithinVisible="FocusWithinVisible",e.FocusWithin="FocusWithin"}(et||(et={}));const st="#f5f6f7",at="rgba(180, 180, 180, 0.5)",ot="rgba(255, 255, 255, 0.5)",it="#FFC010",lt="rgba(137, 151, 155, 0.65)",pt="rgba(137, 151, 155, 0.65)";function mt(e){return{onClick:(0,i.useCallback)((t=>{t.stopPropagation(),e(t)}),[e]),onKeyDown:(0,i.useCallback)((t=>{t.target===t.currentTarget&&[" ","Enter"].includes(t.key)&&(t.preventDefault(),t.stopPropagation(),e(t))}),[e])}}function ct(){return ct=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ct.apply(this,arguments)}const ut=(0,ee.css)({border:"1px solid",borderTopWidth:0,borderBottomWidth:0,transition:"border-color .16s ease-out",display:"inline-flex",flexDirection:"row",alignItems:"center",margin:0,paddingRight:ge.W0[1],paddingLeft:ge.W0[3],maxWidth:3*ge.W0[6],minWidth:2*ge.W0[6],position:"relative",color:ue.s.gray.base,outline:"none","&:hover":{cursor:"pointer",zIndex:1,transition:"border-color .16s ease-in"},":not(:first-child)":{marginLeft:"-1px"}}),gt=(0,ee.css)({background:ue.s.white,borderColor:ue.s.gray.light2,"&:hover":{borderColor:ue.s.gray.light1}}),dt=(0,ee.css)({backgroundColor:ue.s.gray.dark3,borderColor:ue.s.gray.dark2,"&:hover":{borderColor:ue.s.gray.dark1}}),ht=(0,ee.css)({"&:hover":{cursor:"default"}}),Tt=(0,ee.css)({zIndex:3,borderColor:ue.s.focus,"&::after":{position:"absolute",content:'""',top:0,right:0,left:0,height:"1px",backgroundColor:ue.s.focus}}),yt=(0,ee.css)({position:"absolute",bottom:0,left:"-1px",right:"-1px",height:0,backgroundColor:ue.s.green.dark1}),ft=(0,ee.css)({height:`${ge.W0[1]}px`,backgroundColor:ue.s.green.dark1,transition:"height 150ms ease-out"}),bt=(0,ee.css)({height:`${ge.W0[1]}px`,backgroundColor:ue.s.focus,transition:"height 150ms ease-out"}),St=(0,ee.css)({visibility:"hidden"}),At=(0,ee.css)({width:ge.W0[1]+ge.W0[2],height:"auto",flexShrink:0,gridArea:"icon",alignSelf:"center"}),Et=(0,ee.css)({color:ue.s.green.dark2}),_t=(0,ee.css)({color:ue.s.green.light2}),xt=(0,ee.css)({color:ue.s.focus}),It=(0,ee.css)({marginRight:ge.W0[1],display:"inline-grid",paddingTop:ge.W0[2],paddingBottom:ge.W0[1]+ge.W0[2],gridTemplateAreas:"\n    'icon tabName'\n    'empty namespace'\n  ",columnGap:ge.W0[2],rowGap:0}),Lt=(0,ee.css)({whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",fontWeight:"bold",fontSize:Ke,gridArea:"tabName"}),vt=(0,ee.css)({color:ue.s.gray.base}),Ct=(0,ee.css)({color:ue.s.gray.base}),Rt=(0,ee.css)({color:ue.s.green.light2}),Ot=(0,ee.css)({color:ue.s.green.dark2}),Nt=(0,ee.css)({color:ue.s.focus}),jt=(0,ee.css)({whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",fontSize:Ke,lineHeight:`${ge.W0[3]}px`,gridArea:"namespace"}),wt=(0,ee.css)({color:ue.s.gray.base}),Dt=(0,ee.css)({color:ue.s.gray.light1}),Bt=(0,ee.css)({color:ue.s.gray.dark1}),Mt=(0,ee.css)({color:ue.s.gray.light2}),$t=u((function({darkMode:e,title:t,isSelected:n,onSelect:r,onClose:s,tabContentId:a,iconGlyph:o,subtitle:l}){const[p,m]=tt(),c=(0,i.useMemo)((()=>m===et.FocusVisible),[m]),u=(0,i.useMemo)((()=>m===et.FocusWithinVisible),[m]),g=mt(r),[d,h]=nt(),T=rt(p,d,g);return i.createElement("div",ct({className:(0,ee.cx)(ut,e?dt:gt,{[ht]:n,[Tt]:c}),"aria-selected":n,role:"tab",tabIndex:n?0:-1,"aria-controls":a,"data-test-id":"workspace-tab-button",title:`${l} - ${t}`},T),i.createElement("div",{className:It},i.createElement(b.default,{size:"small",role:"presentation",className:(0,ee.cx)(At,{[e?_t:Et]:n,[xt]:c}),glyph:o,"data-testid":`workspace-tab-icon-${o}`}),i.createElement("div",{className:(0,ee.cx)(Lt,e?vt:Ct,{[e?Rt:Ot]:n,[Nt]:c})},t),i.createElement(B.uT,{className:(0,ee.cx)(jt,e?Dt:wt,{[e?Mt:Bt]:n})},l)),i.createElement(F,{className:u||c||h?void 0:St,onClick:e=>{e.stopPropagation(),s()},"aria-label":"Close Tab","data-testid":"close-workspace-tab"},i.createElement(b.default,{glyph:"X",role:"presentation"})),i.createElement("div",{className:(0,ee.cx)(yt,{[ft]:n,[bt]:c})}))}));function kt(){return kt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kt.apply(this,arguments)}const Pt=(0,ee.css)({margin:0,padding:0,flexShrink:0,position:"relative",overflow:"overlay",whiteSpace:"nowrap",borderBottom:"1px solid","::-webkit-scrollbar":{":horizontal":{height:ge.W0[1]}}}),Ft=(0,ee.css)({background:ue.s.white,borderBottomColor:ue.s.gray.light2,"::-webkit-scrollbar-thumb":{backgroundColor:lt}}),Ut=(0,ee.css)({backgroundColor:ue.s.gray.dark3,borderBottomColor:ue.s.gray.dark2,"::-webkit-scrollbar-thumb":{backgroundColor:pt}}),qt=(0,ee.css)({padding:0,paddingLeft:ge.W0[3],paddingRight:ge.W0[4],display:"flex",flexDirection:"row",alignItems:"center"}),Gt=(0,ee.css)({display:"inline-flex"}),Ht=(0,ee.css)({display:"inline-flex",flexDirection:"row",alignItems:"center"}),Vt=(0,ee.css)({marginLeft:ge.W0[2],marginRight:ge.W0[2]}),Kt=(0,ee.css)({display:"inline-flex"}),Wt=(0,ee.css)({pointerEvents:"auto !important",cursor:"grabbing !important",zIndex:50}),Yt=(0,Je.W8)((({tab:{tabContentId:e,iconGlyph:t,subtitle:n,title:r},tabIndex:s,selectedTabIndex:a,onSelect:o,onClose:l})=>{const p=(0,i.useCallback)((()=>{o(s)}),[o,s]),m=(0,i.useCallback)((()=>{l(s)}),[l,s]),c=(0,i.useMemo)((()=>a===s),[a,s]);return i.createElement($t,{title:r,isSelected:c,iconGlyph:t,tabContentId:e,subtitle:n,onSelect:p,onClose:m})})),zt=(0,Je.JN)((({tabs:e,onSelect:t,onClose:n,selectedTabIndex:r})=>i.createElement("div",{className:Kt},e.map(((e,s)=>i.createElement(Yt,{key:`tab-${s}-${e.subtitle}`,index:s,tabIndex:s,tab:e,onSelect:t,onClose:n,selectedTabIndex:r})))))),Zt=u((function({"aria-label":e,darkMode:t,onCreateNewTab:n,onCloseTab:r,onMoveTab:s,onSelectTab:a,tabs:o,selectedTabIndex:l}){const p=function({currentTabbable:e}){const t=(0,i.useRef)(null),[n,r]=tt(),s=(0,i.useCallback)((()=>{const n=`[role="tab"]:nth-child(${e+1})`;t.current?.querySelector(n)?.focus()}),[t,e]);return(0,i.useEffect)((()=>{[et.Focus,et.FocusVisible,et.FocusWithin,et.FocusWithinVisible].includes(r)&&s()}),[r,s]),{ref:t,...n}}({currentTabbable:l}),[m]=function({tabsCount:e,onSelectTab:t,selectedTabIndex:n}){return[{onKeyDown:(0,i.useCallback)((r=>{let s=-1;"ArrowLeft"===r.key&&(r.stopPropagation(),s=n-1),"ArrowRight"===r.key&&(r.stopPropagation(),s=n+1),"Home"===r.key&&(r.preventDefault(),r.stopPropagation(),s=0),"End"===r.key&&(r.preventDefault(),r.stopPropagation(),s=e-1),e>0&&s!==n&&s>=0&&s<e&&t(s)}),[n,e,t])}]}({selectedTabIndex:l,onSelectTab:a,tabsCount:o.length}),c=rt(p,m),u=(0,i.useCallback)((({oldIndex:e,newIndex:t})=>{s(e,t)}),[s]);return i.createElement("div",{className:(0,ee.cx)(Pt,t?Ut:Ft)},i.createElement("div",{className:qt},i.createElement("div",kt({className:Gt,role:"tablist","aria-label":e,"aria-orientation":"horizontal"},c),i.createElement(zt,{onClose:r,onSelect:a,tabs:o,selectedTabIndex:l,axis:"x",lockAxis:"x",lockToContainerEdges:!0,lockOffset:"0%",distance:10,onSortEnd:u,helperClass:Wt})),i.createElement("div",{className:Ht},i.createElement(F,{className:Vt,"aria-label":"Create new tab",onClick:n},i.createElement(b.default,{role:"presentation",glyph:"Plus"})))))}));function Xt({isFavorite:e=!1,favoriteColor:t=it,darkMode:n=!1,showCircle:r=!0,size:s=ge.W0[4]}){const a=n?ue.s.white:ue.s.black;return i.createElement("svg",{width:s,height:s,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r&&i.createElement("path",{d:"M12 22.6667C17.891 22.6667 22.6667 17.891 22.6667 12C22.6667 6.10897 17.891 1.33334 12 1.33334C6.10897 1.33334 1.33334 6.10897 1.33334 12C1.33334 17.891 6.10897 22.6667 12 22.6667Z",stroke:a,strokeMiterlimit:"10"}),i.createElement("path",{id:"favoriteIconStar",d:"M11.9195 15.6372L8.89689 17.3104C8.77598 17.3831 8.62053 17.274 8.63781 17.1103L9.20779 13.5639C9.22506 13.5094 9.19051 13.4366 9.15597 13.4003L6.7206 10.8905C6.61697 10.7814 6.66879 10.5995 6.82424 10.5813L10.2096 10.0721C10.2614 10.0721 10.3132 10.0175 10.3477 9.98118L11.8677 6.76215C11.9368 6.63485 12.1095 6.63485 12.1786 6.76215L13.664 9.96299C13.6813 10.0175 13.7331 10.0539 13.8022 10.0539L17.1875 10.5631C17.3257 10.5813 17.3775 10.7632 17.2911 10.8723L14.8212 13.4003C14.7867 13.4366 14.7694 13.5094 14.7694 13.5639L15.3394 17.1103C15.3567 17.2558 15.2185 17.3649 15.0803 17.3104L12.075 15.6372C12.0231 15.6008 11.9713 15.6008 11.9195 15.6372Z",stroke:e?t:a,fill:e?t:"none",strokeMiterlimit:"10"}))}function Jt(){return Jt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jt.apply(this,arguments)}function Qt(e){const t=c();return i.createElement(k,Jt({darkMode:t?.theme===o.Dark},e))}var en=n(84619),tn=n(8226);const nn=(0,i.createContext)({openToast:()=>{},closeToast:()=>{}}),rn=(0,ee.css)({button:{position:"absolute"}}),sn=({children:e})=>{const[t,n]=(0,i.useState)({}),r=(0,i.useRef)({});(0,i.useEffect)((()=>()=>{Object.values(r).forEach(clearTimeout)}),[r]);const s=(0,i.useCallback)((e=>{clearTimeout(r.current[e]),delete r.current[e]}),[r]),a=(0,i.useCallback)(((e,t,n)=>{s(e),r.current[e]=setTimeout(t,n)}),[r,s]),o=(0,i.useCallback)((e=>{s(e),n((t=>{const n={...t};return delete n[e],n}))}),[n,s]),l=(0,i.useCallback)(((e,t)=>{s(e),t.timeout&&a(e,(()=>{o(e)}),t.timeout),n((n=>({...n,[e]:{...t}})))}),[n,a,s,o]);return i.createElement(nn.Provider,{value:{closeToast:o,openToast:l}},i.createElement(i.Fragment,null,e),i.createElement(i.Fragment,null,Object.entries(t).map((([e,{title:t,body:n,variant:r,progress:s}])=>i.createElement(j.Z,{className:rn,key:e,title:t,body:n,variant:r,progress:s,open:!0,close:()=>o(e)})))))};function an(e){const{openToast:t,closeToast:n}=(0,i.useContext)(nn);return{openToast:(0,i.useCallback)(((n,r)=>{t(`${e}--${n}`,r)}),[e,t]),closeToast:(0,i.useCallback)((t=>{n(`${e}--${t}`)}),[e,n])}}function on(){return on=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},on.apply(this,arguments)}function ln(e){const t=c();return i.createElement(Z,on({darkMode:t?.theme===o.Dark},e))}var pn=n(74824),mn=n(67420);function cn(){return cn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cn.apply(this,arguments)}const un=({isDisabled:e,triggerOn:t,delay:n,trigger:r,...s})=>{const a=(0,i.useRef)(null),o=(0,pn.O)({isDisabled:e,trigger:t,delay:n}),{triggerProps:l,tooltipProps:p}=(0,mn.Q)({isDisabled:e,trigger:t},o,a),m=(0,i.useCallback)((e=>{e?o.open():o.close()}),[o]);return i.createElement(X,cn({open:!e&&o.isOpen,setOpen:m,trigger:({children:e,className:t})=>r(rt({children:e,className:t},l))},s,p))};function gn(){return gn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gn.apply(this,arguments)}var dn;function hn(e){return[dn.ContentAnimated,dn.Content].includes(e)}!function(e){e.Nothing="Nothing",e.Fallback="Fallback",e.Content="Content",e.ContentAnimated="ContentAnimated"}(dn||(dn={}));const Tn=({content:e,fallback:t,isContentReady:n,contentAfterFallbackTimeout:r,fallbackTimeout:s})=>{const a=function(e,{contentAfterFallbackTimeout:t=200,fallbackTimeout:n=30}={}){const[r,s]=(0,i.useState)(e?dn.Content:dn.Nothing);return(0,i.useEffect)((()=>{if(!hn(r))if(e&&r===dn.Nothing)s(dn.Content);else{if(e&&r===dn.Fallback){const e=setTimeout((()=>{s(dn.ContentAnimated)}),t);return()=>{clearTimeout(e)}}if(!e&&r===dn.Nothing){const e=setTimeout((()=>{s(dn.Fallback)}),n);return()=>{clearTimeout(e)}}}}),[r,e,t,n]),r}(n,{contentAfterFallbackTimeout:r,fallbackTimeout:s});return i.createElement(i.Fragment,null,e(hn(a),a===dn.ContentAnimated),t(a===dn.Fallback))},yn=(0,ee.css)({position:"relative"}),fn=(0,ee.keyframes)({from:{opacity:0},to:{opacity:1}}),bn=(0,ee.css)({position:"relative"}),Sn=(0,ee.css)({animation:`${fn} .16s ease-out`}),An=(0,ee.css)({position:"absolute",top:0,right:0,bottom:0,left:0,opacity:0,transition:"opacity .16s ease-out",pointerEvents:"none"}),En=(0,ee.css)({opacity:1,transitionTimingFunction:"ease-in"}),_n=({content:e,fallback:t,isContentReady:n,contentContainerProps:r={},fallbackContainerProps:s={},className:a,...o})=>i.createElement("div",gn({className:(0,ee.cx)(yn,a)},o),i.createElement(Tn,{isContentReady:n,content:(t,n)=>t&&i.createElement("div",gn({},r,{className:(0,ee.cx)(bn,n&&Sn,r.className)}),e()),fallback:e=>i.createElement("div",gn({},s,{className:(0,ee.cx)(An,e&&En,s.className)}),t())}));function xn(){return xn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xn.apply(this,arguments)}const In=(0,ee.css)({backgroundRepeat:"repeat-x",backgroundPosition:"center bottom",backgroundSize:"3px 2px",backgroundImage:"radial-gradient( circle closest-side, currentColor 75%, transparent 25%)"}),Ln=(0,ee.css)({maxWidth:"360px"}),vn=({children:e,definition:t,tooltipProps:n,...r})=>i.createElement(un,xn({justify:"middle",spacing:5,trigger:({children:t,...n})=>{const s=rt({className:In},n,r);return i.createElement("span",s,e,t)}},n),i.createElement(B.uT,{className:Ln},t)),Cn=(0,ee.css)({padding:ge.W0[3],width:"100%"});class Rn extends i.Component{state={error:null};static getDerivedStateFromError(e){return{error:e}}componentDidCatch(e,t){this.props.onError&&this.props.onError(e,t)}render(){const{displayName:e}=this.props,{error:t}=this.state;return t?i.createElement("div",{className:Cn},i.createElement(d.Z,{variant:"danger"},"An error occurred while rendering",e?` ${e}`:"",": ",t.message)):this.props.children}}const On=e=>"true"===process?.env?.COMPASS_DISABLE_ERROR_BOUNDARY?i.createElement(i.Fragment,null,e.children):i.createElement(Rn,e);function Nn(){return Nn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nn.apply(this,arguments)}const jn=(0,ee.css)({height:"100%",width:"100%",display:"flex",overflow:"auto"}),wn=(0,ee.css)({backgroundColor:st,color:ue.s.gray.dark2}),Dn=(0,ee.css)({backgroundColor:ue.s.gray.dark3,color:ue.s.white}),Bn=u((function({className:e,darkMode:t,children:n,"data-test-id":r,...s}){return i.createElement("div",Nn({className:(0,ee.cx)(jn,t?Dn:wn,e),"data-test-id":r},s),n)})),Mn=(0,ee.css)({flexGrow:1,flexShrink:1,flexBasis:"auto",display:"flex",flexDirection:"column",alignItems:"stretch",overflow:"auto"}),$n=(0,ee.css)({padding:`0 ${ge.W0[3]}px`}),kn=(0,ee.css)({background:ue.s.gray.dark3}),Pn=(0,ee.css)({background:ue.s.white}),Fn=(0,ee.css)({display:"none"}),Un=u((function({"data-test-id":e,"aria-label":t,activeTabIndex:n,darkMode:r,mountAllViews:s,tabs:a,views:o,onTabClicked:l}){return i.createElement("div",{className:Mn},i.createElement("div",{className:(0,ee.cx)($n,r?kn:Pn)},i.createElement(W,{"data-test-id":e,"aria-label":t,className:"test-tab-nav-bar-tabs",setSelected:l,selected:n},a.map(((e,t)=>i.createElement(R.O,{className:"test-tab-nav-bar-tab",key:`tab-${t}`,name:e}))))),o.map(((e,t)=>(s||t===n)&&i.createElement(Bn,{className:(0,ee.cx)({[Fn]:t!==n}),key:`tab-content-${a[t]}`,"data-test-id":`${a[t].toLowerCase().replace(/ /g,"-")}-content`},e))))})),qn=(0,ee.css)({marginTop:-ge.W0[2],marginBottom:-ge.W0[2]});function Gn(e){const{"aria-label":t,href:n}=e;return i.createElement(i.Fragment,null,i.createElement(F,{as:"a",className:qn,"aria-label":t,href:n,target:"_blank"},i.createElement(b.default,{glyph:"InfoWithCircle",size:"small"})))}function Hn(){return Hn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hn.apply(this,arguments)}const Vn=e=>(100*e).toFixed(3)+"%",Kn=(0,ee.keyframes)({from:{backgroundPosition:`${Vn(4)} 0`},to:{backgroundPosition:"0 0"}}),Wn=(0,ee.css)({"--gradient-start":ue.s.gray.light3,"--gradient-end":"rgba(235, 241, 239, 1)",alignSelf:"center",borderRadius:3,maxWidth:"80%",backgroundColor:"var(--gradient-start)",backgroundImage:`linear-gradient(\n        to right,\n        var(--gradient-start) 0%,\n        var(--gradient-end) ${Vn(.125)},\n        var(--gradient-start) ${Vn(1/4)},\n        var(--gradient-start) 100%\n    )`,backgroundSize:`${Vn(4)} 100%`,backgroundPosition:"0 0",animation:`${Kn} 4s infinite linear`}),Yn=(0,ee.css)({"--gradient-start":"rgba(38, 55, 66, 1)","--gradient-end":"rgba(47, 64, 74, 1)"}),zn=({className:e,minChar:t=5,maxChar:n=15,width:r,height:s=ge.W0[3],darkMode:a,...o})=>{const l=(0,i.useMemo)((()=>{return r||`${Math.round((e=t,s=n,Math.random()*(s-e)+e))}ch`;var e,s}),[t,n,r]);return i.createElement("div",Hn({},o,{role:"presentation","data-testid":"placeholder",className:(0,ee.cx)(Wn,e,a&&Yn),style:{width:l,height:s}}))};function Zn(){const[e,t]=(0,i.useState)((()=>new DOMRectReadOnly)),n=(0,i.useRef)(null),r=(0,i.useRef)(null);return null===r.current&&(r.current=new ResizeObserver((e=>{t(e[0].contentRect)}))),(0,i.useLayoutEffect)((()=>{if(n.current){const e=n.current;return r.current?.observe(n.current),()=>{r.current?.unobserve(e)}}}),[]),[{ref:n},e]}var Xn=n(50166);function Jn(e,t){if("string"==typeof t)return e?.closest(t)??null;let n=e;for(;n;){if(t(n))return n;n=n.parentElement}return null}function Qn(e){return e?`[data-vlist-item-idx="${e}"]`:"[data-vlist-item-idx]"}function er(e){if(!e.dataset.vlistItemIdx)throw new Error("Trying to get vgrid item index from an non-item element");return Number(e.dataset.vlistItemIdx)}function tr(){return tr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tr.apply(this,arguments)}const nr=(0,i.createContext)({headerHeight:0,renderHeader:()=>null,renderItem:()=>null,renderEmptyList:()=>null,itemsCount:0,rowCount:0,colCount:0,currentTabbable:0,gridProps:{}}),rr=(0,i.forwardRef)((function({style:e,children:t,...n},r){const{headerHeight:s,renderHeader:a,gridProps:o,classNames:l,renderEmptyList:p,itemsCount:m}=(0,i.useContext)(nr);return i.createElement("div",tr({ref:r,style:{...e,height:e.height+s}},n),i.createElement("div",{style:{height:s},className:l?.header},i.createElement(a,{})),i.createElement("div",tr({style:{height:e.height}},o),0===m&&p?i.createElement(p,{}):t))})),sr=(0,ee.css)({display:"grid",alignItems:"stretch",gridTemplateRows:"auto",gridTemplateColumns:"1fr",gridAutoColumns:"1fr",gridAutoFlow:"column"}),ar=(0,ee.css)({width:"100%",minWidth:0}),or=({style:e,index:t})=>{const{colCount:n,itemsCount:r,renderItem:s,currentTabbable:a,classNames:o,itemKey:l}=(0,i.useContext)(nr),p=t*n,m=(0,i.useMemo)((()=>Array.from({length:n},((e,t)=>{const n=p+t;return n>=r?i.createElement("div",{className:(0,ee.cx)(ar,o?.cell),key:`empty${t}`}):i.createElement(s,{key:l?.(n)??n,role:"gridcell",className:(0,ee.cx)(ar,o?.cell),tabIndex:n===a?0:-1,"data-vlist-item-idx":n,index:n})}))),[n,p,r,o?.cell,s,l,a]);return i.createElement("div",{style:e,className:(0,ee.cx)(sr,o?.row),role:"row","aria-rowindex":t+1},m)},ir=(0,ee.css)({width:"100%",flex:1,overflow:"hidden",display:"grid",gridTemplateRows:"auto 1fr",gridTemplateColumns:"100%",outline:"none"}),lr=(0,ee.css)({position:"relative"}),pr=(0,i.forwardRef)((function({itemMinWidth:e,itemHeight:t,itemsCount:n,colCount:r,renderItem:s,headerHeight:a=0,renderHeader:o=(()=>null),renderEmptyList:l,overscanCount:p=3,classNames:m,itemKey:c,resetActiveItemOnBlur:u,...g},d){const h=(0,i.useRef)(null),[T,{width:y,height:f}]=Zn(),b=Math.max(y,e),S=r??Math.max(1,Math.floor(b/e)),A=Math.ceil(n/S),E=(0,i.useCallback)((e=>{const t=Math.floor(e/S);h.current?.scrollToItem(t)}),[h,S]),[_,x]=function({colCount:e,rowCount:t,itemsCount:n,resetActiveItemOnBlur:r=!0,pageSize:s=3,defaultCurrentTabbable:a=0,onFocusMove:o}){const l=(0,i.useRef)(null),[p,m]=(0,i.useState)(0),[c,u]=(0,i.useState)(a),g={tabIndex:p,onFocus:(0,i.useCallback)((e=>{if(e.target===e.currentTarget)m(-1);else{const t=Jn(e.target,Qn());t&&(m(-1),u(er(t)))}}),[a]),onBlur:(0,i.useCallback)((()=>{null!==Jn(document.activeElement,(e=>e===l.current))||(m(0),r&&u(a))}),[r,a]),onMouseDown:(0,i.useCallback)((e=>{Jn(e.target,Qn())||(e.preventDefault(),document.activeElement?.blur())}),[])},d=(0,i.useCallback)((r=>{const a=r.target;if(l.current&&l.current.contains(a)&&a.dataset.vlistItemIdx){let a=-1;if("ArrowUp"===r.key&&(r.preventDefault(),r.stopPropagation(),a=1===t?c-1:c-e),"ArrowDown"===r.key&&(r.preventDefault(),r.stopPropagation(),a=1===t?c+1:c+e),"ArrowLeft"===r.key&&(r.stopPropagation(),a=c-1),"ArrowRight"===r.key&&(r.stopPropagation(),a=c+1),"Home"===r.key&&(r.preventDefault(),r.stopPropagation(),a=r.ctrlKey?0:e*Math.floor(c/e)),"End"===r.key&&(r.preventDefault(),r.stopPropagation(),a=r.ctrlKey?n-1:e*Math.floor(c/e)+(e-1)),"PageUp"===r.key){r.preventDefault(),r.stopPropagation();const t=Math.floor(c/e),n=Math.min(t,s);a=c-e*n}if("PageDown"===r.key){r.preventDefault(),r.stopPropagation();const n=Math.floor(c/e),o=Math.min(t-1-n,s);a=c+e*o}a!==c&&a>=0&&a<n&&u(a)}}),[c,n,t,e,s]),h=0===p?-1:c;return(0,i.useEffect)((()=>{if(h>=0){const e=Jn(document.activeElement,Qn());if(!e||er(e)!==h){o(h);const e=requestAnimationFrame((()=>{l.current?.querySelector(Qn(c))?.focus()}));return()=>{cancelAnimationFrame(e)}}}}),[h]),[{ref:l,onKeyDown:d,...g},h]}({itemsCount:n,colCount:S,rowCount:A,onFocusMove:E,resetActiveItemOnBlur:u}),I=rt({ref:d,className:(0,ee.cx)(ir,m?.container)},g,T);return i.createElement(nr.Provider,{value:{rowCount:A,colCount:S,itemsCount:n,renderItem:s,headerHeight:a,renderHeader:o,currentTabbable:x,classNames:m,gridProps:rt({role:"grid","aria-rowcount":A,className:(0,ee.cx)(lr,m?.grid)},_),itemKey:c,renderEmptyList:l}},i.createElement("div",I,i.createElement(Xn.t7,{ref:h,width:b,height:f,innerElementType:rr,itemCount:A,itemSize:t,overscanCount:p},or)))})),mr=(0,ee.css)({position:"relative",outline:"none","&::after":{position:"absolute",content:'""',pointerEvents:"none",top:3,right:3,bottom:3,left:3,borderRadius:ge.W0[1],boxShadow:`0 0 0 0 ${ue.s.focus}`,transition:"box-shadow .16s ease-in"}}),cr=(0,ee.css)({"&::after":{boxShadow:`0 0 0 3px ${ue.s.focus}`,transitionTimingFunction:"ease-out"}});function ur(){const[e,t]=tt();return{...e,className:(0,ee.cx)(mr,t===et.FocusVisible&&cr)}}const gr=(0,ee.css)({display:"flex",alignItems:"center",gap:ge.W0[2]}),dr=(0,ee.css)({margin:"0 !important",padding:"0 !important"}),hr=(0,ee.css)({"& > button":{margin:0}});function Tr(e,t){const n=(0,Ve.Me)("Sort by"),r=(0,Ve.Me)(),[s,a]=(0,i.useReducer)(((e,t)=>"change-name"===t.type&&t.name!==e.name?{...e,name:t.name}:"change-order"===t.type?{...e,order:-1*e.order}:e),{name:e[0]?.name??null,order:1});return[(0,i.useMemo)((()=>{const o=-1===s.order?"SortDescending":1===s.order?"SortAscending":"Unsorted",l=Math.max(...e.map((e=>e.label.length)));return i.createElement("div",{className:gr},i.createElement(J,{id:n,htmlFor:r,className:dr},"Sort by"),i.createElement(V,{disabled:t?.isDisabled,id:r,"aria-labelledby":n,allowDeselect:!1,className:(0,ee.cx)(hr,(0,ee.css)({minWidth:`calc(${l}ch + ${ge.W0[6]}px)`})),onChange:e=>{a({type:"change-name",name:e||null})},defaultValue:s.name??void 0},e.map((e=>i.createElement(v.Wx,{key:e.name,value:e.name},e.label)))),i.createElement(M,{"aria-label":o,title:o,rightGlyph:i.createElement(b.default,{glyph:o}),onClick:()=>{a({type:"change-order"})},disabled:null===s.name||t?.isDisabled}))}),[s,e,n,r,t?.isDisabled]),t?.isDisabled?{name:null,order:1}:s]}function yr(e,{name:t,order:n},r=null){return(0,i.useMemo)((()=>[...e].sort(((e,s)=>{if(!t)return 0;if(void 0===e[t])return 1;const a=r&&r[t];return a?a(e[t],s[t],n):"string"==typeof e[t]?function(e,t,n){return e.localeCompare(t)*n}(e[t],s[t],n):function(e,t,n){return(e===t?0:e<t?-1:1)*n}(e[t],s[t],n)}))),[e,t,r,n])}var fr=n(60742),br=n(24179);function Sr(e,t=70){const n=e.slice(0,t);return t<e.length?`${n}`:e}const Ar={Int32:"#145a32",Double:"#1e8449",Decimal128:"#229954",Date:"firebrick",Boolean:"purple",String:"steelblue",ObjectId:"orangered"};function Er(e){return e in Ar}const _r=(0,ee.css)({whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}),xr=(0,ee.css)({whiteSpace:"pre-wrap"});function Ir(e){return(0,ee.cx)(_r,"String"===e&&xr,Er(e)&&(0,ee.css)({color:Ar[e]}),`element-value element-value-is-${e.toLowerCase()}`)}const Lr=(0,ee.css)({userSelect:"none"}),vr=({value:e})=>{const t=(0,i.useMemo)((()=>String(e)),[e]);return i.createElement("div",{className:Ir("ObjectId"),title:t},i.createElement("span",{className:Lr},"ObjectId('"),t,i.createElement("span",{className:Lr},"')"))},Cr=({value:e})=>{const{stringifiedValue:t,title:n}=(0,i.useMemo)((()=>e.sub_type===br.Binary.SUBTYPE_ENCRYPTED?{stringifiedValue:"*********",title:"Encrypted"}:e.sub_type===br.Binary.SUBTYPE_UUID?{stringifiedValue:`UUID('${e.toUUID().toHexString()}')`}:{stringifiedValue:`Binary('${Sr(e.toString("base64"),100)}', ${e.sub_type})`}),[e]);return i.createElement("div",{className:Ir("Binary"),title:n??t},t)},Rr=({value:e})=>{const t=(0,i.useMemo)((()=>`Code('${String(e.code)}'${e.scope?`, ${JSON.stringify(e.scope)}`:""})`),[e.code,e.scope]);return i.createElement("div",{className:Ir("Code"),title:t},t)},Or=({value:e})=>{const t=(0,i.useMemo)((()=>{try{return new Date(e).toISOString().replace("Z","+00:00")}catch{return String(e)}}),[e]);return i.createElement("div",{className:Ir("Date"),title:t},t)},Nr=({type:e,value:t})=>{const n=(0,i.useMemo)((()=>String(t.valueOf())),[t]);return i.createElement("div",{className:Ir(e),title:n},n)},jr=({value:e})=>{const t=(0,i.useMemo)((()=>Sr(e,70)),[e]);return i.createElement("div",{className:Ir("String"),title:e},'"',t,'"')},wr=({value:e})=>{const t=(0,i.useMemo)((()=>`/${e.pattern}/${e.options}`),[e.pattern,e.options]);return i.createElement("div",{className:Ir("BSONRegExp"),title:t},t)},Dr=({value:e})=>{const t=(0,i.useMemo)((()=>`Timestamp({ t: ${e.getHighBits()}, i: ${e.getLowBits()} })`),[e]);return i.createElement("div",{className:Ir("Timestamp"),title:t},t)},Br=({type:e})=>{const t=(0,i.useMemo)((()=>`${e}()`),[e]);return i.createElement("div",{className:Ir(e),title:t},t)},Mr=({value:e})=>{const t=(0,i.useMemo)((()=>`DBRef('${e.collection}', '${String(e.oid)}'${e?.db?`, '${e.db}'`:""})`),[e.collection,e.oid,e.db]);return i.createElement("div",{className:Ir("DBRef"),title:t},t)},$r=({value:e})=>{const t=(0,i.useMemo)((()=>`Symbol('${String(e)}')`),[e]);return i.createElement("div",{className:Ir("Symbol"),title:t},t)},kr=({type:e,value:t})=>{const n=(0,i.useMemo)((()=>String(t)),[t]);return i.createElement("div",{className:Ir(e),title:n},n)},Pr=e=>{switch(e.type){case"ObjectId":return i.createElement(vr,{value:e.value});case"Date":return i.createElement(Or,{value:e.value});case"Binary":return i.createElement(Cr,{value:e.value});case"Int32":case"Double":return i.createElement(Nr,{type:e.type,value:e.value});case"String":return i.createElement(jr,{value:e.value});case"BSONRegExp":return i.createElement(wr,{value:e.value});case"Code":return i.createElement(Rr,{value:e.value});case"MinKey":case"MaxKey":return i.createElement(Br,{type:e.type});case"DBRef":return i.createElement(Mr,{value:e.value});case"Timestamp":return i.createElement(Dr,{value:e.value});case"BSONSymbol":return i.createElement($r,{value:e.value});case"Object":case"Array":return i.createElement(kr,{type:e.type,value:e.type});default:return i.createElement(kr,{type:e.type,value:e.value})}},Fr=(0,ee.css)({position:"absolute",display:"flex",gap:ge.W0[2],width:"100%",top:ge.W0[3],paddingLeft:ge.W0[3],paddingRight:ge.W0[3],pointerEvents:"none"}),Ur=(0,ee.css)({flex:"none",pointerEvents:"all"}),qr=(0,ee.css)({flex:"1 0 auto"}),Gr=({onEdit:e,onCopy:t,onClone:n,onRemove:r,onExpand:s,expanded:a,onlyShowOnHover:o=!0})=>{const l=(0,i.useRef)(null),p=function(e){const[t,n]=(0,i.useState)(!1);return(0,i.useEffect)((()=>{const t=e.current?.parentElement,r=()=>{n(!0)},s=()=>{n(!1)};return t?.addEventListener("mouseenter",r),t?.addEventListener("mouseleave",s),()=>{t?.removeEventListener("mouseenter",r),t?.removeEventListener("mouseleave",s)}}),[e]),t}(l),[m,c]=(0,i.useState)(!1);return(0,i.useEffect)((()=>{if(!0===m){const e=setTimeout((()=>{c(!1)}),1200);return()=>{clearTimeout(e)}}}),[m]),i.createElement("div",{ref:l,className:Fr,style:{display:o?p?"flex":"none":"flex"}},s&&i.createElement(M,{size:"xsmall",rightGlyph:i.createElement(b.default,{role:"presentation",glyph:a?"CaretDown":"CaretRight"}),title:a?"Collapse all":"Expand all","aria-label":a?"Collapse all":"Expand all","aria-pressed":a,"data-testid":"expand-document-button",onClick:s,className:Ur}),i.createElement("span",{className:qr}),e&&i.createElement(M,{size:"xsmall",rightGlyph:i.createElement(b.default,{role:"presentation",glyph:"Edit"}),title:"Edit document","aria-label":"Edit document","data-testid":"edit-document-button",onClick:e,className:Ur}),t&&i.createElement(X,{open:m,trigger:({children:e})=>i.createElement("div",null,i.createElement(M,{size:"xsmall",rightGlyph:i.createElement(b.default,{role:"presentation",glyph:"Copy"}),title:"Copy document","aria-label":"Copy document","data-testid":"copy-document-button",onClick:()=>{c(!0),t()},className:Ur}),e),justify:"middle",darkMode:!0},"Copied!"),n&&i.createElement(M,{size:"xsmall",rightGlyph:i.createElement(b.default,{role:"presentation",glyph:"Clone"}),title:"Clone document","aria-label":"Clone document","data-testid":"clone-document-button",onClick:n,className:Ur}),r&&i.createElement(M,{size:"xsmall",rightGlyph:i.createElement(b.default,{role:"presentation",glyph:"Trash"}),title:"Remove document","aria-label":"Remove document","data-testid":"remove-document-button",onClick:r,className:Ur}))},Hr=(0,ee.css)({display:"flex",gap:ge.W0[2],paddingTop:ge.W0[3],paddingLeft:ge.W0[3],paddingRight:ge.W0[3]}),Vr=(0,ee.css)({flex:"none"}),Kr=({showHideButton:e=!0,currentSize:t,totalSize:n,minSize:r=25,step:s=1e3,onSizeChange:a})=>{const o=(0,i.useMemo)((()=>Math.min(n-t,s)),[t,s,n]),l=(0,i.useMemo)((()=>Math.max(t-r,0)),[t,r]),p=(0,i.useMemo)((()=>o>0),[o]),m=(0,i.useMemo)((()=>e&&l>0),[l,e]),c=(0,i.useCallback)((()=>{a(t+o)}),[t,a,o]),u=(0,i.useCallback)((()=>{a(t-l)}),[t,l,a]);return p||m?i.createElement("div",{className:Hr},p&&i.createElement(M,{size:"xsmall",leftGlyph:i.createElement(b.default,{glyph:"ArrowDown"}),onClick:c,className:Vr,"data-testid":"show-more-fields-button"},"Show ",o," more fields"),m&&i.createElement(M,{size:"xsmall",leftGlyph:i.createElement(b.default,{glyph:"ArrowUp"}),onClick:u,className:Vr,"data-testid":"hide-fields-button"},"Hide ",l," fields")):null};var Wr=n(74727);const Yr=(0,i.createContext)(null);function zr(){const[,e]=(0,i.useState)({});return(0,i.useCallback)((()=>{e({})}),[])}var Zr=n(38875),Xr=n.n(Zr);function Jr(){return Jr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jr.apply(this,arguments)}const Qr=(0,ee.css)({maxWidth:"100%",overflowX:"hidden",textOverflow:"ellipsis"}),es=(0,ee.css)({padding:0,margin:0,border:"none",boxShadow:"none",outline:"none",backgroundColor:"transparent",maxWidth:"100%"}),ts=(0,ee.css)({"&:focus, &:active":{borderRadius:"2px",boxShadow:`0 0 0 2px ${ue.s.focus}`}}),ns=(0,ee.css)({backgroundColor:ue.s.red.light2,color:ue.s.red.dark2,"&:focus, &:active":{boxShadow:`0 0 0 2px ${ue.s.red.dark2}`}}),rs=({editing:e,value:t,valid:n,validationMessage:r,onChange:s,autoFocus:a,onEditStart:o})=>{const l=`${Math.max(t.length,1)}ch`;return i.createElement(i.Fragment,null,e?i.createElement(un,{darkMode:!0,isDisabled:n,delay:600,usePortal:!1,trigger:({className:e,children:r,onDragStart:o,onPointerUp:p,onPointerDown:m,onMouseDown:c,...u})=>i.createElement("div",{className:e},i.createElement("input",Jr({type:"text","data-testid":"hadron-document-key-editor",value:t,onChange:e=>{s(e.currentTarget.value)},autoFocus:a,className:(0,ee.cx)(Qr,es,ts,!n&&ns),style:{width:l},spellCheck:"false"},u)),r)},r):i.createElement("div",{"data-testid":"hadron-document-clickable-key",onDoubleClick:o,className:Qr,style:{width:l}},t))},ss=(0,ee.css)({width:"100%",maxWidth:"100%","&::before, &::after":{content:"'\"'",userSelect:"none"}}),as=(0,ee.css)({display:"inline-block",whiteSpace:"nowrap",minWidth:"5ch",maxWidth:"calc(100% - 2ch)",verticalAlign:"top"}),os=(0,ee.css)({});function is(e){return Er(e)?(0,ee.css)({color:Ar[e]}):""}const ls=({editing:e,onEditStart:t,type:n,value:r,valid:s,validationMessage:a,originalValue:o,autoFocus:l,onChange:p,onFocus:m,onBlur:c})=>{const u=String(r),g=(0,i.useMemo)((()=>{if("String"===n){const e=u.split("\n"),t=Math.max(...e.map((e=>e.length))),n=`${Math.min(t+1,70)}ch`,r=Math.max(e.length,t>70?2:1),s=Math.min(r,10);return{width:n,minHeight:ge.W0[3]*Math.min(r,s),height:ge.W0[3]*s}}return{width:`${Math.max(u.length,1)}ch`}}),[u,n]);return i.createElement(i.Fragment,null,e?i.createElement(un,{darkMode:!0,isDisabled:s,delay:600,usePortal:!1,trigger:({className:e,children:t,onDragStart:r,onPointerUp:a,onPointerDown:o,onMouseDown:d,...h})=>i.createElement("div",{className:e},"String"===n?i.createElement("div",{className:(0,ee.cx)(ss,is(n))},i.createElement("textarea",Jr({"data-testid":"hadron-document-value-editor",value:u,onChange:e=>{p(e.currentTarget.value)},onFocus:m,onBlur:c,autoFocus:l,className:(0,ee.cx)(es,ts,as,!s&&ns),spellCheck:"false",style:g},h))):i.createElement("input",Jr({type:"text","data-testid":"hadron-document-value-editor",value:u,onChange:e=>{p(e.currentTarget.value)},onFocus:m,onBlur:c,autoFocus:l,className:(0,ee.cx)(es,ts,is(n),!s&&ns),style:g,spellCheck:"false"},h)),t)},a):i.createElement("div",{"data-testid":"hadron-document-clickable-value",className:os,onDoubleClick:t},i.createElement(Pr,{type:n,value:o})))},ps=Xr().castableTypes(!0),ms=Math.max(...ps.map((e=>e.length))),cs=(0,ee.css)({color:ue.s.gray.base,appearance:"none",paddingLeft:ge.W0[1],width:`calc(${ms}ch + ${ge.W0[4]}px)`,"&:hover, &:focus, &:focus-within, &:active":{appearance:"auto",paddingLeft:0,color:"inherit"}}),us=(0,ee.css)({appearance:"auto",paddingLeft:0}),gs=({editing:e,type:t,onChange:n,visuallyActive:r})=>i.createElement(i.Fragment,null,e&&i.createElement("select",{value:t,"data-testid":"hadron-document-type-editor",onChange:e=>{n(e.currentTarget.value)},className:(0,ee.cx)(es,ts,cs,r&&us)},ps.map((e=>i.createElement("option",{key:e,value:e},e))))),ds={remove:"times-circle",revert:"rotate-left",collapsed:"angle-right",expanded:"angle-right  fa-rotate-90",addChild:"level-down fa-rotate-90",addSibling:"plus-square-o"},hs=(0,ee.css)({width:ge.W0[3],height:ge.W0[3],padding:"2px",textAlign:"center"}),Ts=({icon:e})=>{const t=ds[e];return i.createElement("span",{role:"presentation",className:(0,ee.cx)(hs,`fa fa-${t}`)})};function ys(){return ys=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ys.apply(this,arguments)}const fs=(0,ee.css)({margin:0,padding:0,border:"none",background:"none"}),bs=({editing:e,onRemove:t,onRevert:n})=>i.createElement(i.Fragment,null,e&&(n?i.createElement("button",{"data-testid":"hadron-document-revert",className:fs,"aria-label":"Revert changes",onClick:e=>{e.stopPropagation(),n()}},i.createElement(Ts,{icon:"revert"})):t?i.createElement("button",{"data-testid":"hadron-document-remove",className:fs,"aria-label":"Remove field",onClick:e=>{e.stopPropagation(),t()}},i.createElement(Ts,{icon:"remove"})):null)),Ss=(0,ee.css)({display:"block",width:ge.W0[3],height:ge.W0[3],marginLeft:"auto",boxShadow:"inset 0 0 0 1px currentColor",borderRadius:"2px",userSelect:"none"}),As=(0,ee.css)({width:"auto"}),Es=({editing:e,type:t,parentType:n,keyName:r,onAddFieldToElement:s,onAddFieldAfterElement:a})=>{const[o,l]=(0,i.useState)(!1);return e?i.createElement(E.v2,{open:o,setOpen:l,usePortal:!1,popoverZIndex:999999,align:"bottom",justify:"start",className:As,trigger:({children:e,onClick:t,...n})=>i.createElement(i.Fragment,null,i.createElement("button",ys({"data-testid":"hadron-document-add-element",className:(0,ee.cx)(fs,Ss),onClick:e=>{e.stopPropagation(),t?.(e)}},n),"+"),e)},s&&i.createElement(E.sN,{"data-testid":"hadron-document-add-child",onClick:()=>{l(!1),s()}},i.createElement(Ts,{icon:"addChild"}),"Add"," ","Array"===t?"item":"field"," to ",i.createElement("b",null,r)),i.createElement(E.sN,{"data-testid":"hadron-document-add-sibling",onClick:()=>{l(!1),a()}},i.createElement(Ts,{icon:"addSibling"}),"Add"," ","Array"===n?"item":"field"," after ",i.createElement("b",null,r))):null};function _s(){return _s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_s.apply(this,arguments)}function xs(e){switch(e){case"Date":case"String":case"Decimal128":case"Double":case"Int32":case"Int64":case"Null":case"Undefined":case"ObjectId":return Wr.ElementEditor[`${e}Editor`];default:return Wr.ElementEditor.StandardEditor}}const Is=(0,ee.css)({margin:0,padding:0,border:"none",background:"none"}),Ls=(0,ee.css)({display:"flex",paddingLeft:ge.W0[2],paddingRight:ge.W0[2],"&:hover":{backgroundColor:ue.s.gray.light2}}),vs=(0,ee.css)({backgroundColor:ue.s.yellow.light3,"&:hover":{backgroundColor:ue.s.yellow.light2}}),Cs=(0,ee.css)({backgroundColor:ue.s.red.light3,"&:hover":{backgroundColor:ue.s.red.light2}}),Rs=(0,ee.css)({flex:"none",width:ge.W0[3]}),Os=(0,ee.css)({flex:"none",position:"relative",marginLeft:ge.W0[1],boxSizing:"content-box"}),Ns=(0,ee.css)({position:"absolute",top:0,right:0}),js=(0,ee.css)({"&::before":{display:"block",width:"100%",counterIncrement:"line-number",content:"counter(line-number)",textAlign:"end",color:ue.s.gray.base}}),ws=(0,ee.css)({backgroundColor:ue.s.yellow.base,"&::before":{color:ue.s.yellow.dark2}}),Ds=(0,ee.css)({backgroundColor:ue.s.red.base,color:ue.s.red.light3,"&::before":{color:ue.s.red.light3}}),Bs=(0,ee.css)({flex:"none"}),Ms=(0,ee.css)({width:ge.W0[3],flex:"none"}),$s=(0,ee.css)({flex:"none",fontWeight:"bold",maxWidth:"60%"}),ks=(0,ee.css)({flex:"none",userSelect:"none"}),Ps=(0,ee.css)({flex:1,minWidth:0,maxWidth:"100%"}),Fs=(0,ee.css)({flex:"none",marginLeft:ge.W0[1]}),Us=(0,ee.css)({display:"none"}),qs=(0,ee.css)({'[data-document-element="true"]:hover &, [data-document-element="true"]:focus-within &':{display:"block"}}),Gs=(0,ee.css)({'[data-document-element="true"]:hover &::before, [data-document-element="true"]:focus-within &::before':{visibility:"hidden"}}),Hs=({value:e,editable:t,editingEnabled:n,onEditStart:r,allExpanded:s,lineNumberSize:a,onAddElement:o})=>{const l=(0,i.useContext)(Yr),[p,m]=(0,i.useState)(s),{id:c,key:u,value:g,type:d,revert:h,remove:T,expandable:y,children:f,level:b,parentType:S,removed:A}=function(e){const t=zr(),n=function(e){const t=(0,i.useRef)(null);if(!t.current){const n=xs(e.currentType);t.current=new n(e)}return(0,i.useEffect)((()=>{if(t.current?.element.uuid!==e.uuid||t.current?.element.currentType!==e.currentType){const n=xs(e.currentType);t.current=new n(e)}}),[e,e.uuid,e.currentType]),t.current}(e),[r,s]=(0,i.useState)((()=>e.isDuplicateKey(e.currentKey))),a=(0,i.useCallback)((n=>{e.uuid===n.uuid&&t()}),[e,t]),o=(0,i.useCallback)(((n,r)=>{e===r&&t()}),[e,t]);(0,i.useEffect)((()=>(e.on(Wr.ElementEvents.Converted,a),e.on(Wr.ElementEvents.Edited,a),e.on(Wr.ElementEvents.Reverted,a),e.on(Wr.ElementEvents.Invalid,a),e.on(Wr.ElementEvents.Valid,a),e.on(Wr.ElementEvents.Added,o),e.on(Wr.ElementEvents.Removed,o),()=>{e.off(Wr.ElementEvents.Converted,a),e.off(Wr.ElementEvents.Edited,a),e.off(Wr.ElementEvents.Reverted,a),e.off(Wr.ElementEvents.Valid,a),e.off(Wr.ElementEvents.Added,o),e.off(Wr.ElementEvents.Removed,o)})),[e,a,o]);const l=e.isCurrentTypeValid();return{id:e.uuid,key:{value:e.currentKey,change(t){s(e.isDuplicateKey(t)),e.rename(t)},editable:e.isKeyEditable()&&"Array"!==e.parent?.currentType,valid:!r,validationMessage:r?`Duplicate key "${e.currentKey}" - this will overwrite previous values`:null},value:{value:n.value(),originalValue:e.currentValue,change(e){n.edit(e)},editable:e.isValueEditable()&&"Object"!==e.currentType&&"Array"!==e.currentType,valid:l,validationMessage:l?null:e.invalidTypeMessage??null,startEdit:n.start.bind(n),completeEdit:n.complete.bind(n)},type:{value:e.currentType,change(t){e.changeType(t)}},revert:e.isRevertable()?e.revert.bind(e):null,remove:e.isNotActionable()?null:e.remove.bind(e),expandable:Boolean(e.elements),children:e.elements?[...e.elements]:[],level:e.level,parentType:e.parent?.currentType,removed:e.isRemoved()}}(e);(0,i.useEffect)((()=>{m(s)}),[s]);const E=(0,i.useCallback)((()=>{m((e=>!e))}),[]),_=(0,i.useMemo)((()=>{if(n){const e=String(a).length;return e>2?`${e}.5ch`:ge.W0[3]}return ge.W0[3]}),[a,n]),x=(0,i.useCallback)((()=>{E()}),[E]),I=u.valid&&g.valid,L=n,v={className:(0,ee.cx)(Ls,A?Cs:n&&!I&&vs),onClick:x};return i.createElement(i.Fragment,null,i.createElement("div",_s({"data-document-element":"true","data-testid":"hadron-document-element","data-id":e.uuid},v),t&&i.createElement("div",{className:Rs},i.createElement("div",{className:(0,ee.cx)(Us,L&&qs)},i.createElement(bs,{onRevert:h,onRemove:T,editing:n}))),t&&i.createElement("div",{className:(0,ee.cx)(Os,n&&js,L&&Gs,A?Ds:n&&!I&&ws),style:{minWidth:_}},i.createElement("div",{className:(0,ee.cx)(Us,Ns,L&&qs)},i.createElement(Es,{editing:n,type:d.value,parentType:S&&"Document"===S?"Object":S,keyName:u.value,onAddFieldAfterElement:()=>{const t=e.insertSiblingPlaceholder();o(t)},onAddFieldToElement:"Object"===d.value||"Array"===d.value?()=>{const t=e.insertPlaceholder();o(t),m(!0)}:void 0}))),i.createElement("div",{className:Bs,style:{width:(t?ge.W0[2]:0)+ge.W0[3]*b}}),i.createElement("div",{className:Ms},y&&i.createElement("button",{className:Is,"aria-pressed":p,"aria-label":p?"Collapse field items":"Expand field items",onClick:e=>{e.stopPropagation(),E()}},i.createElement(Ts,{icon:p?"expanded":"collapsed"}))),i.createElement("div",{className:$s,"data-testid":"hadron-document-element-key"},u.editable?i.createElement(rs,{value:u.value,valid:u.valid,validationMessage:u.validationMessage,onChange:e=>{u.change(e)},autoFocus:l?.id===c&&"key"===l.type,editing:n,onEditStart:()=>{r?.(e.uuid,"key")}}):i.createElement("span",null,u.value)),i.createElement("div",{className:ks,role:"presentation"},":"),i.createElement("div",{className:Ps,"data-testid":"hadron-document-element-value"},g.editable?i.createElement(ls,{type:d.value,originalValue:g.originalValue,value:g.value,valid:g.valid,validationMessage:g.validationMessage,onChange:e=>{g.change(e)},autoFocus:l?.id===c&&"value"===l.type,editing:n,onEditStart:()=>{r?.(e.uuid,"value")},onFocus:()=>{g.startEdit()},onBlur:()=>{g.completeEdit()}}):i.createElement(Pr,{type:d.value,value:g.originalValue})),t&&i.createElement("div",{className:Fs,"data-testid":"hadron-document-element-type"},i.createElement(gs,{editing:n,type:d.value,onChange:e=>{d.change(e)}}))),y&&p&&f.map((e=>i.createElement(Hs,{key:e.uuid,value:e,editable:t,editingEnabled:n,onEditStart:r,allExpanded:s,lineNumberSize:a,onAddElement:o}))))},Vs=(0,ee.css)({position:"relative",fontFamily:ge.Vl.code,fontSize:"12px",lineHeight:`${ge.W0[3]}px`,counterReset:"line-number"}),Ks=({value:e,visibleFieldsCount:t,expanded:n=!1,editable:r=!1,editing:s=!1,onEditStart:a})=>{const{elements:o}=function(e){const t=zr(),n=(0,i.useCallback)(((n,r)=>{e===r&&t()}),[e,t]);return(0,i.useEffect)((()=>(e.on(Wr.ElementEvents.Added,n),e.on(Wr.ElementEvents.Removed,n),()=>{e.off(Wr.ElementEvents.Added,n),e.off(Wr.ElementEvents.Removed,n)})),[e,n]),{elements:[...e.elements]}}(e),l=(0,i.useMemo)((()=>o.filter(Boolean).slice(0,t)),[o,t]),[p,m]=(0,i.useState)(null);return(0,i.useEffect)((()=>{s||m(null)}),[s]),i.createElement("div",{className:Vs,"data-testid":"hadron-document","data-id":e.uuid},i.createElement(Yr.Provider,{value:p},l.map((e=>i.createElement(Hs,{value:e,key:e.uuid,editable:r,editingEnabled:s,allExpanded:n,onEditStart:r?(e,t)=>{m({id:e,type:t}),a?.()}:void 0,lineNumberSize:l.length,onAddElement:e=>{m({id:e.uuid,type:"Array"===e.parent?.currentType?"value":"key"})}})))))}},86631:(e,t,n)=>{const r=n(10862).createActions({hideFavoriteMessage:{sync:!0},hideFavoriteModal:{sync:!0},showFavoriteModal:{sync:!0},validateConnectionString:{sync:!0},onAuthSourceChanged:{sync:!0},onAuthStrategyChanged:{sync:!0},onCancelConnectionAttemptClicked:{sync:!0},onChangeViewClicked:{sync:!0},onCnameToggle:{sync:!0},onConnectionFormChanged:{sync:!0},onConnectionSelectAndConnect:{sync:!0},onConnectClicked:{sync:!0},onCreateFavoriteClicked:{sync:!0},onCustomUrlChanged:{sync:!0},onDeleteConnectionClicked:{sync:!0},onDeleteConnectionsClicked:{sync:!0},onDisconnectClicked:{sync:!0},onDuplicateConnectionClicked:{sync:!0},onEditURICanceled:{sync:!0},onEditURIClicked:{sync:!0},onEditURIConfirmed:{sync:!0},onExternalLinkClicked:{sync:!0},onFavoriteNameChanged:{sync:!0},onConnectionSelected:{sync:!0},onChangesDiscarded:{sync:!0},onHideURIClicked:{sync:!0},onHostnameChanged:{sync:!0},onKerberosPrincipalChanged:{sync:!0},onKerberosServiceNameChanged:{sync:!0},onLDAPPasswordChanged:{sync:!0},onLDAPUsernameChanged:{sync:!0},onPasswordChanged:{sync:!0},onPortChanged:{sync:!0},onReadPreferenceChanged:{sync:!0},onReplicaSetChanged:{sync:!0},onResetConnectionClicked:{sync:!0},onSaveAsFavoriteClicked:{sync:!0},onSaveFavoriteClicked:{sync:!0},onSSLCAChanged:{sync:!0},onSSLCertificateChanged:{sync:!0},onSSLMethodChanged:{sync:!0},onSSLPrivateKeyChanged:{sync:!0},onSSLPrivateKeyPasswordChanged:{sync:!0},onSSHTunnelPasswordChanged:{sync:!0},onSSHTunnelPassphraseChanged:{sync:!0},onSSHTunnelHostnameChanged:{sync:!0},onSSHTunnelUsernameChanged:{sync:!0},onSSHTunnelPortChanged:{sync:!0},onSSHTunnelIdentityFileChanged:{sync:!0},onSSHTunnelChanged:{sync:!0},onSRVRecordToggled:{sync:!0},onUsernameChanged:{sync:!0}});e.exports=r},87870:(e,t,n)=>{"use strict";n.r(t),n.d(t,{CONNECTION_FORM_VIEW:()=>r,CONNECTION_STRING_VIEW:()=>s});const r="connectionForm",s="connectionString"},9379:(e,t,n)=>{"use strict";n.r(t),n.d(t,{FavoriteModal:()=>Ke,SSHTunnelIdentityFileValidation:()=>yt,SSHTunnelPasswordValidation:()=>bt,SSLServerClientValidation:()=>ht,SSLServerValidation:()=>gt,activate:()=>Ot,deactivate:()=>Nt,default:()=>jt,metadata:()=>St});var r=n(2784),s=n(70602),a=n(72779),o=n.n(a),i=n(72298),l=n(13980),p=n.n(l),m=n(50517),c=n(86631),u=n.n(c);const g="sidebar-module-connect-sidebar-header__19cj0",d="sidebar-module-connect-sidebar-list__2lpmM",h="sidebar-module-connect-sidebar-list-item__Iyz7m",T="sidebar-module-connect-sidebar-list-item-actions__2VcrW",y="sidebar-module-connect-sidebar-list-item-is-active__21lqV",f="sidebar-module-connect-sidebar-list-item-details__2PZjl",b="sidebar-module-connect-sidebar-list-item-last-used__2wb-J",S="sidebar-module-connect-sidebar-list-item-name__Vjqqu";class A extends r.Component{static displayName="NewConnection";static propTypes={connectionModel:p().object.isRequired,connections:p().object.isRequired};onNewConnectionClicked(){u().onResetConnectionClicked()}getClassName(){const e=["sidebar-module-connect-sidebar-new-connection__2kYrZ"];return this.props.connections[this.props.connectionModel._id]||e.push("sidebar-module-connect-sidebar-new-connection-is-active__iK6Bw"),o()(...e)}render(){return r.createElement("div",{className:this.getClassName()},r.createElement("button",{"data-test-id":"new-connection-button",className:o()(g,"sidebar-module-connect-sidebar-new-connection-button__2vWzQ"),onClick:this.onNewConnectionClicked.bind(this)},r.createElement("i",{className:"fa fa-fw fa-bolt"}),r.createElement("span",null,"New Connection")))}}const E=A;var _=n(76635),x=n(19034),I=n.n(x),L=n(62823),v=n(13253);class C extends r.Component{static displayName="Favorites";static propTypes={connectionModel:p().object.isRequired,connections:p().object.isRequired};onFavoriteClicked(e){u().onConnectionSelected(e)}onFavoriteDoubleClicked(e){u().onConnectionSelectAndConnect(e)}onDuplicateConnectionClicked(e,t){t.stopPropagation(),u().onDuplicateConnectionClicked(e)}onRemoveConnectionClicked(e,t){t.stopPropagation(),u().onDeleteConnectionClicked(e)}onEditConnectionClicked(){u().showFavoriteModal()}onContextualMenuClicked(e){e.stopPropagation()}getClassName(e){const t=[h];return this.props.connectionModel._id===e._id&&t.push(y),o()(...t)}formatLastUsed(e){return e.lastUsed?new Date-e.lastUsed<864e5?I()(e.lastUsed).fromNow():I()(e.lastUsed).format("lll"):"Never"}renderFavorites(){const e=Object.keys(this.props.connections).map((e=>this.props.connections[e])).filter((e=>e.isFavorite)).sort(((e,t)=>`${t.name}`.toLowerCase()<`${e.name}`.toLowerCase()?1:-1));return(0,_.map)(e,((e,t)=>{const n=`${e.hostname}:${e.port}`,s=e.color?{borderRight:`5px solid ${e.color}`}:{borderRight:"5px solid transparent"};return r.createElement("li",{className:this.getClassName(e),style:s,key:t,title:n,onClick:this.onFavoriteClicked.bind(this,e),onDoubleClick:this.onFavoriteDoubleClicked.bind(this,e)},r.createElement("div",{className:f},r.createElement("div",{className:b},this.formatLastUsed(e)),r.createElement("div",{className:S},e.name)),r.createElement(L.Z,{bsSize:"xsmall",bsStyle:"link",title:"",className:T,noCaret:!0,pullRight:!0,onClick:this.onContextualMenuClicked,id:"favorite-actions"},r.createElement(v.Z,{eventKey:"1",onClick:this.onDuplicateConnectionClicked.bind(this,e)},"Duplicate"),r.createElement(v.Z,{eventKey:"2",onClick:this.onRemoveConnectionClicked.bind(this,e)},"Remove")))}))}render(){return r.createElement("div",{className:"sidebar-module-connect-sidebar-favorites__28oLc"},r.createElement("div",{className:g},r.createElement("span",{className:"sidebar-module-connect-sidebar-header-icon__MCTND"},r.createElement(m.Icon,{glyph:"Favorite",title:!1,fill:"currentColor"})),r.createElement("span",{className:"sidebar-module-connect-sidebar-header-label__DD6rC"},"Favorites")),r.createElement("ul",{className:d},this.renderFavorites()))}}const R=C;class O extends r.Component{static displayName="Recents";static propTypes={connectionModel:p().object.isRequired,connections:p().object.isRequired};onRecentClicked(e){u().onConnectionSelected(e)}onRecentDoubleClicked(e){u().onConnectionSelectAndConnect(e)}onRemoveConnectionClicked(e,t){t.stopPropagation(),u().onDeleteConnectionClicked(e)}onClearConnectionsClicked(){u().onDeleteConnectionsClicked()}onSaveAsFavoriteClicked(e,t){t.stopPropagation(),u().onSaveAsFavoriteClicked(e)}formatLastUsed(e){return e.lastUsed?new Date-e.lastUsed<864e5?I()(e.lastUsed).fromNow():I()(e.lastUsed).format("lll"):"Never"}renderRecents(e){return(0,_.map)(e,((e,t)=>{const n=`${e.hostname}:${e.port}`;return r.createElement("li",{className:o()(h,{[y]:this.props.connectionModel._id===e._id}),key:t,title:n,onClick:this.onRecentClicked.bind(this,e),onDoubleClick:this.onRecentDoubleClicked.bind(this,e)},r.createElement("div",{className:f},r.createElement("div",{className:b},this.formatLastUsed(e)),r.createElement("div",{className:S},n)),r.createElement(L.Z,{bsSize:"xsmall",bsStyle:"link",title:"",className:T,noCaret:!0,pullRight:!0,id:"recent-actions"},r.createElement(v.Z,{eventKey:"1",onClick:this.onSaveAsFavoriteClicked.bind(this,e)},"Add to favorites"),r.createElement(v.Z,{eventKey:"2",onClick:this.onRemoveConnectionClicked.bind(this,e)},"Remove")))}))}render(){const e=Object.keys(this.props.connections).map((e=>this.props.connections[e])).filter((e=>!e.isFavorite)).sort(((e,t)=>{const n=e.lastUsed?e.lastUsed:1463658247465;return(t.lastUsed?t.lastUsed:1463658247465)-n})),t=e.length>0?r.createElement("div",{onClick:this.onClearConnectionsClicked,className:"sidebar-module-connect-sidebar-header-recent-clear__1Tj4U"},"Clear all"):"";return r.createElement("div",{className:"connect-sidebar-connections-recents"},r.createElement("div",{className:g},r.createElement("div",{className:"sidebar-module-connect-sidebar-header-recent__2G1uv"},r.createElement("div",null,r.createElement("i",{className:"fa fa-fw fa-history"}),r.createElement("span",null,"Recents")),t)),r.createElement("ul",{className:d},this.renderRecents(e)))}}const N=O;class j extends r.Component{static displayName="Sidebar";static propTypes={connectionModel:p().object.isRequired,connections:p().object.isRequired};render(){return r.createElement("div",null,r.createElement("div",{className:"sidebar-module-connect-sidebar__FOCge"},r.createElement(E,this.props),r.createElement("div",{className:"sidebar-module-connect-sidebar-connections__2e6dm"},r.createElement(R,this.props),r.createElement(N,this.props))))}}const w=j,D={page:"connect-module-page__2lEc9","connect-atlas":"connect-module-connect-atlas__teGEg","connect-atlas-link":"connect-module-connect-atlas-link__3RXOH","connect-atlas-includes":"connect-module-connect-atlas-includes__2DGbA","connect-atlas-learn-more":"connect-module-connect-atlas-learn-more__2GEE5","connect-is-connected":"connect-module-connect-is-connected__22we-",connect:"connect-module-connect__e7BF2","form-container":"connect-module-form-container__Q7M6S","connect-container":"connect-module-connect-container__dBRL2","connect-string":"connect-module-connect-string__1CKl2","connect-string-item":"connect-module-connect-string-item__2-2B2","help-container":"connect-module-help-container__2HMJ0","help-item-list":"connect-module-help-item-list__1kL0o","atlas-link-container":"connect-module-atlas-link-container__1trKe","atlas-link":"connect-module-atlas-link__2vALN","help-item":"connect-module-help-item__265yd","help-item-question":"connect-module-help-item-question__1OJ7x","align-right":"connect-module-align-right__1U39s","connection-message-container":"connect-module-connection-message-container__2WMLQ","connection-message-container-error":"connect-module-connection-message-container-error__1Cykq","connection-message-container-syntax-error":"connect-module-connection-message-container-syntax-error__UKAAt","connection-message-container-unsaved-message":"connect-module-connection-message-container-unsaved-message__2aCW0","unsaved-message-actions":"connect-module-unsaved-message-actions__1-K6E","connection-message-container-success":"connect-module-connection-message-container-success__1sQlQ","connection-message":"connect-module-connection-message__3AO7S",error:"connect-module-error__4ZWK8",success:"connect-module-success__1GCFa","change-view-link":"connect-module-change-view-link__1l9yj","change-view-link-button":"connect-module-change-view-link-button__2y9H-","connect-form":"connect-module-connect-form__1d45N",tabs:"connect-module-tabs__yJEkZ","tabs-container":"connect-module-tabs-container__n7GSe","tabs-header":"connect-module-tabs-header__2AMg4","tabs-header-items":"connect-module-tabs-header-items__n0LSB","tabs-header-item":"connect-module-tabs-header-item__33sgT","tabs-header-item-name":"connect-module-tabs-header-item-name__3Hrgb","selected-header-item-name":"connect-module-selected-header-item-name__1vZHj","selected-header-item":"connect-module-selected-header-item__9ufjs","tabs-view":"connect-module-tabs-view__251Io","tabs-view-content":"connect-module-tabs-view-content__2v60o","tabs-view-content-form":"connect-module-tabs-view-content-form__2kL3G","form-group":"connect-module-form-group__1VXP9","form-item":"connect-module-form-item__1c4Ql","form-item-has-error":"connect-module-form-item-has-error__26lh7","form-control":"connect-module-form-control__319vt","form-item-file-button":"connect-module-form-item-file-button__D5Y6_",help:"connect-module-help__2n4Jw","form-item-switch-wrapper":"connect-module-form-item-switch-wrapper__3kkEZ","favorite-container":"connect-module-favorite-container__CcSDS","form-group-separator":"connect-module-form-group-separator__25jFz","select-label":"connect-module-select-label__19ME5",buttons:"connect-module-buttons__3Lizk",button:"connect-module-button__19JJ8","btn-loading":"connect-module-btn-loading__2hrNw","connect-btn-loader-spin":"connect-module-connect-btn-loader-spin__1VCsE","disabled-uri":"connect-module-disabled-uri__3z2-O","form-control-switch":"connect-module-form-control-switch__2bEPm","file-input":"connect-module-file-input__1a6qJ","is-favorite-pill":"connect-module-is-favorite-pill__lW2Fv","favorite-saved":"connect-module-favorite-saved__1-73E","favorite-saved-visible":"connect-module-favorite-saved-visible__1nseX","is-favorite-pill-text":"connect-module-is-favorite-pill-text__1eH_y","connecting-modal-backdrop":"connect-module-connecting-modal-backdrop__1LY5e","connecting-background":"connect-module-connecting-background__268cD","connecting-background-gradient":"connect-module-connecting-background-gradient__1Ziag",opacityFadeIn:"connect-module-opacityFadeIn__2iNXN","connecting-modal-content":"connect-module-connecting-modal-content__3bL3d","connecting-modal-illustration":"connect-module-connecting-modal-illustration__2BZzH","connecting-modal-status":"connect-module-connecting-modal-status__uQB33","connecting-modal-animation":"connect-module-connecting-modal-animation__gcLSN","connecting-compass-animation-svg":"connect-module-connecting-compass-animation-svg__3Ww33","connecting-compass-shadow":"connect-module-connecting-compass-shadow__2BxyP","connecting-compass-shadow-stroke":"connect-module-connecting-compass-shadow-stroke__39UMi","connecting-compass-circle-1":"connect-module-connecting-compass-circle-1__3ha_y","connecting-compass-circle-2":"connect-module-connecting-compass-circle-2__1Zr7n","connecting-compass-circle-3":"connect-module-connecting-compass-circle-3__32dHB","connecting-compass-arrow-1":"connect-module-connecting-compass-arrow-1__1NG1j","connecting-compass-arrow-2":"connect-module-connecting-compass-arrow-2__1fw1m","connecting-modal-cancel-btn":"connect-module-connecting-modal-cancel-btn__2imKX","connect-sidebar-connections":"connect-module-connect-sidebar-connections__SBk1e","favorite-picker":"connect-module-favorite-picker__2fGAQ","color-box":"connect-module-color-box__3_kl-",color:"connect-module-color__8blQ0",checkmark:"connect-module-checkmark__Hf9gY","red-line":"connect-module-red-line__2DhBc","grey-border":"connect-module-grey-border__2CFJb","color-box-active":"connect-module-color-box-active__3VE2O"};class B extends r.PureComponent{static displayName="FormGroup";static propTypes={id:p().string,separator:p().bool,children:p().oneOfType([p().array,p().object])};getClassName(){const e={[D["form-group"]]:!0,[D["form-group-separator"]]:this.props.separator};return o()(e)}render(){return r.createElement("div",{id:this.props.id,className:this.getClassName()},this.props.children)}}const M=B;function $(){return $=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$.apply(this,arguments)}class k extends r.PureComponent{static displayName="FormInput";static propTypes={label:p().string.isRequired,name:p().string.isRequired,changeHandler:p().func.isRequired,blurHandler:p().func,linkHandler:p().func,placeholder:p().string,value:p().oneOfType([p().string,p().number]),type:p().string,error:p().bool,otherInputAttributes:p().object};getErrorId(){return`form-error-tooltip-${this.props.name}`}renderInfoSprinkle(){if(this.props.linkHandler)return r.createElement("i",{className:D.help,onClick:this.props.linkHandler})}render(){return r.createElement("div",{className:o()({[D["form-item"]]:!0,[D["form-item-has-error"]]:this.props.error})},r.createElement("label",null,r.createElement("span",{className:D["form-item-label"]},this.props.label),this.renderInfoSprinkle()),r.createElement("input",$({name:this.props.name,placeholder:this.props.placeholder,onChange:this.props.changeHandler,onBlur:this.props.blurHandler,value:this.props.value,className:D["form-control"],type:this.props.type||"text"},this.props.otherInputAttributes)))}}const P=k;class F extends r.PureComponent{static displayName="HostInput";static propTypes={hostname:p().string,isHostChanged:p().bool};onHostnameChanged(e){u().onHostnameChanged(e.target.value)}getHostname(){return!1===this.props.isHostChanged?"":this.props.hostname}render(){return r.createElement(P,{label:"Hostname",name:"hostname",placeholder:"localhost",changeHandler:this.onHostnameChanged.bind(this),value:this.getHostname()})}}const U=F;class q extends r.PureComponent{static displayName="PortInput";static propTypes={port:p().number};constructor(e){super(e),this.state={port:e.port}}onPortChanged(e){this.setState({port:e.target.value}),u().onPortChanged(e.target.value?+e.target.value:27017)}render(){if(this.state)return r.createElement(P,{label:"Port",name:"port",placeholder:"27017",changeHandler:this.onPortChanged.bind(this),value:this.state.port,type:"number",otherInputAttributes:{min:1,max:65536}})}}const G=q;class H extends r.PureComponent{static displayName="SRVInput";static propTypes={currentConnectionAttempt:p().object,isSrvRecord:p().bool.isRequired};onSRVRecordToggled(e){u().onSRVRecordToggled(e)}render(){return r.createElement("div",{className:D["form-item"]},r.createElement("label",{id:"srvRecordLabel",htmlFor:"srvRecord"},"SRV Record"),r.createElement("div",{className:D["form-item-switch-wrapper"]},r.createElement(m.Toggle,{id:"srvRecord",name:"srvRecord",type:"button","aria-labelledby":"srvRecordLabel",disabled:!!this.props.currentConnectionAttempt,checked:this.props.isSrvRecord,onChange:this.onSRVRecordToggled.bind(this),className:D["form-control-switch"],style:{width:62,height:32}})))}}const V=H;class K extends r.Component{static displayName="FormItemSelect";static propTypes={label:p().string.isRequired,name:p().string.isRequired,options:p().arrayOf(p().object).isRequired,changeHandler:p().func.isRequired,value:p().string};prepareOptions(e){return e.map(((e,t)=>{const n=Object.keys(e)[0];return r.createElement("option",{key:t,value:n},e[n])}))}render(){return r.createElement("div",{className:o()(D["form-item"])},r.createElement("label",{className:o()(D["select-label"])},r.createElement("span",null,this.props.label)),r.createElement("select",{name:this.props.name,onChange:this.props.changeHandler,className:o()(D["form-control"]),value:this.props.value},this.prepareOptions(this.props.options)))}}const W=K;var Y=n(36160),z=n.n(Y);class Z extends r.PureComponent{static displayName="CnameInput";static propTypes={canonicalize_hostname:p().bool.isRequired};onCnameToggle(e){u().onCnameToggle(e),u().onConnectionFormChanged()}render(){return r.createElement("div",{className:D["form-item"]},r.createElement("label",{id:"canonicalizeHostNameLabel",htmlFor:"canonicalizeHostName"},"Canonicalize Host Name"),r.createElement("div",{className:D["form-item-switch-wrapper"]},r.createElement(m.Toggle,{id:"canonicalizeHostName",name:"canonicalizeHostName",type:"button","aria-labelledby":"canonicalizeHostNameLabel",checked:this.props.canonicalize_hostname,onChange:this.onCnameToggle,className:D["form-control-switch"],style:{width:62,height:32}})))}}const X=Z;class J extends r.Component{static displayName="Kerberos";static propTypes={connectionModel:p().object.isRequired,isValid:p().bool};static defaultProps={connectionModel:{}};onPrincipalChanged(e){u().onKerberosPrincipalChanged(e.target.value.trim())}onServiceNameChanged(e){u().onKerberosServiceNameChanged(e.target.value)}onPrincipalHelp(){const{shell:e}=n(72298);e.openExternal("https://docs.mongodb.com/manual/core/kerberos/#principals")}isPrincipalError(){return!this.props.isValid&&z()(this.props.connectionModel.kerberosPrincipal)}render(){return r.createElement(M,{id:"kerberos-authentication"},r.createElement(P,{label:"Principal",name:"kerberos-principal",error:this.isPrincipalError(),changeHandler:this.onPrincipalChanged.bind(this),value:this.props.connectionModel.kerberosPrincipal||"",linkHandler:this.onPrincipalHelp.bind(this)}),r.createElement(P,{label:"Service Name",placeholder:"mongodb",name:"kerberos-service-name",changeHandler:this.onServiceNameChanged.bind(this),value:this.props.connectionModel.kerberosServiceName||""}),r.createElement(X,{canonicalize_hostname:this.props.connectionModel.kerberosCanonicalizeHostname||!1}))}}const Q=J;class ee extends r.Component{static displayName="LDAP";static propTypes={connectionModel:p().object.isRequired,isValid:p().bool};static defaultProps={connectionModel:{}};onUsernameChanged(e){u().onLDAPUsernameChanged(e.target.value.trim())}onPasswordChanged(e){u().onLDAPPasswordChanged(e.target.value)}onLDAPHelp(){const{shell:e}=n(72298);e.openExternal("https://docs.mongodb.com/manual/core/security-ldap/")}isUsernameError(){return!this.props.isValid&&z()(this.props.connectionModel.ldapUsername)}isPasswordError(){return!this.props.isValid&&z()(this.props.connectionModel.ldapPassword)}render(){return r.createElement(M,{id:"ldap-authentication"},r.createElement(P,{label:"Username",name:"ldap-username",error:this.isUsernameError(),changeHandler:this.onUsernameChanged.bind(this),value:this.props.connectionModel.ldapUsername||"",linkHandler:this.onLDAPHelp.bind(this)}),r.createElement(P,{label:"Password",name:"ldap-password",type:"password",error:this.isPasswordError(),changeHandler:this.onPasswordChanged.bind(this),value:this.props.connectionModel.ldapPassword||""}))}}const te=ee;class ne extends r.Component{static displayName="MongoDBAuthentication";static propTypes={connectionModel:p().object.isRequired,isValid:p().bool};onUsernameChanged(e){u().onUsernameChanged(e.target.value.trim())}onPasswordChanged(e){u().onPasswordChanged(e.target.value)}onAuthSourceChanged(e){u().onAuthSourceChanged(e.target.value)}onSourceHelp(){i.shell.openExternal("https://docs.mongodb.com/manual/core/security-users/#user-authentication-database")}getUsernameError(){const e=this.props.connectionModel;if(!this.props.isValid&&(0,_.isEmpty)(e.mongodbUsername))return!0}getPasswordError(){const e=this.props.connectionModel;if(!this.props.isValid&&(0,_.isEmpty)(e.mongodbPassword))return!0}render(){return r.createElement(M,{id:"mongodb-authentication"},r.createElement(P,{label:"Username",name:"username",error:this.getUsernameError(),changeHandler:this.onUsernameChanged.bind(this),value:this.props.connectionModel.mongodbUsername||""}),r.createElement(P,{label:"Password",name:"password",type:"password",error:this.getPasswordError(),changeHandler:this.onPasswordChanged.bind(this),value:this.props.connectionModel.mongodbPassword||""}),r.createElement(P,{label:"Authentication Database",placeholder:"admin",name:"auth-source",changeHandler:this.onAuthSourceChanged.bind(this),value:this.props.connectionModel.mongodbDatabaseName||"",linkHandler:this.onSourceHelp.bind(this)}))}}const re=ne;class se extends r.Component{static displayName="ScramSha256";static propTypes={connectionModel:p().object.isRequired,isValid:p().bool};onUsernameChanged(e){u().onUsernameChanged(e.target.value.trim())}onPasswordChanged(e){u().onPasswordChanged(e.target.value)}onAuthSourceChanged(e){u().onAuthSourceChanged(e.target.value)}onSourceHelp(){i.shell.openExternal("https://docs.mongodb.com/manual/core/security-users/#user-authentication-database")}getUsernameError(){const e=this.props.connectionModel;if(!this.props.isValid&&(0,_.isEmpty)(e.mongodbUsername))return!0}getPasswordError(){const e=this.props.connectionModel;if(!this.props.isValid&&(0,_.isEmpty)(e.mongodbPassword))return!0}render(){return r.createElement(M,{id:"scram-sha-256"},r.createElement(P,{label:"Username",name:"username",error:this.getUsernameError(),changeHandler:this.onUsernameChanged.bind(this),value:this.props.connectionModel.mongodbUsername||""}),r.createElement(P,{label:"Password",name:"password",type:"password",error:this.getPasswordError(),changeHandler:this.onPasswordChanged.bind(this),value:this.props.connectionModel.mongodbPassword||""}),r.createElement(P,{label:"Authentication Database",placeholder:"admin",name:"authSource",changeHandler:this.onAuthSourceChanged.bind(this),value:this.props.connectionModel.mongodbDatabaseName||"",linkHandler:this.onSourceHelp.bind(this)}))}}const ae=se,oe={NONE:{id:"NONE",title:"None"},MONGODB:{id:"MONGODB",title:"Username / Password"},"SCRAM-SHA-256":{id:"SCRAM-SHA-256",title:"SCRAM-SHA-256"},KERBEROS:{id:"KERBEROS",title:"Kerberos"},LDAP:{id:"LDAP",title:"LDAP"},X509:{id:"X509",title:"X.509"}},ie=Object.values(oe).map((e=>({[e.id]:e.title})));class le extends r.Component{static displayName="Authentication";static propTypes={connectionModel:p().object.isRequired,isValid:p().bool};constructor(e){super(e),this.state={authStrategy:e.connectionModel.authStrategy}}componentWillReceiveProps(e){const t=e.connectionModel.authStrategy;t!==this.state.authStrategy&&this.setState({authStrategy:t})}onAuthStrategyChanged(e){this.setState({authStrategy:e.target.value}),u().onAuthStrategyChanged(e.target.value)}renderAuthStrategy(){switch(this.state.authStrategy){case oe.KERBEROS.id:return r.createElement(Q,{connectionModel:this.props.connectionModel,isValid:this.props.isValid});case oe.LDAP.id:return r.createElement(te,{connectionModel:this.props.connectionModel,isValid:this.props.isValid});case oe.NONE.id:return;case oe.MONGODB.id:return r.createElement(re,{connectionModel:this.props.connectionModel,isValid:this.props.isValid});case oe["SCRAM-SHA-256"].id:return r.createElement(ae,{connectionModel:this.props.connectionModel,isValid:this.props.isValid});case oe.X509.id:default:return}}render(){return r.createElement(M,{id:"authStrategy",separator:!0},r.createElement(W,{label:"Authentication",name:"authStrategy",options:ie,changeHandler:this.onAuthStrategyChanged.bind(this),value:this.props.connectionModel.authStrategy}),this.renderAuthStrategy())}}const pe=le;class me extends r.PureComponent{static displayName="ReplicaSetInput";static propTypes={sshTunnel:p().string,replicaSet:p().string};onReplicaSetChanged(e){u().onReplicaSetChanged(e.target.value)}render(){const e=this.props.sshTunnel;return"NONE"!==e&&e?null:r.createElement(P,{label:"Replica Set Name",name:"replicaSet",changeHandler:this.onReplicaSetChanged.bind(this),value:this.props.replicaSet||""})}}const ce=me;class ue extends r.PureComponent{static displayName="ReadPreferenceSelect";static propTypes={readPreference:p().string.isRequired};onReadPreferenceChanged(e){u().onReadPreferenceChanged(e.target.value)}render(){return r.createElement(W,{label:"Read Preference",name:"readPreference",options:[{primary:"Primary"},{primaryPreferred:"Primary Preferred"},{secondary:"Secondary"},{secondaryPreferred:"Secondary Preferred"},{nearest:"Nearest"}],changeHandler:this.onReadPreferenceChanged.bind(this),value:this.props.readPreference})}}const ge=ue;class de extends r.Component{static displayName="SSLMethod";static propTypes={connectionModel:p().object.isRequired};constructor(e){super(e),this.setupSSLRoles(),this.state={sslMethod:e.connectionModel.sslMethod}}componentWillReceiveProps(e){const t=e.connectionModel.sslMethod;t!==this.state.sslMethod&&this.setState({sslMethod:t})}onSSLMethodChanged(e){this.setState({sslMethod:e.target.value}),u().onSSLMethodChanged(e.target.value)}setupSSLRoles(){this.roles=global.hadronApp.appRegistry.getRole("Connect.SSLMethod"),this.selectOptions=this.roles.map((e=>e.selectOption))}renderSSLMethod(){const e=(0,_.find)(this.roles,(e=>e.name===this.state.sslMethod));if(e.component)return r.createElement(e.component,this.props)}render(){return r.createElement(M,{id:"sslMethod",separator:!0},r.createElement(W,{label:"SSL",name:"sslMethod",options:this.selectOptions,changeHandler:this.onSSLMethodChanged.bind(this),value:this.props.connectionModel.sslMethod}),this.renderSSLMethod())}}const he=de;class Te extends r.Component{static displayName="SSHTunnel";static propTypes={connectionModel:p().object.isRequired};constructor(e){super(e),this.setupSSHTunnelRoles(),this.state={sshTunnel:e.connectionModel.sshTunnel}}componentWillReceiveProps(e){const t=e.connectionModel.sshTunnel;t!==this.state.sshTunnel&&this.setState({sshTunnel:t})}onSSHTunnelChanged(e){this.setState({sshTunnel:e.target.value}),u().onSSHTunnelChanged(e.target.value)}setupSSHTunnelRoles(){this.roles=global.hadronApp.appRegistry.getRole("Connect.SSHTunnel"),this.selectOptions=this.roles.map((e=>e.selectOption))}renderSSHTunnel(){const e=(0,_.find)(this.roles,(e=>e.name===this.state.sshTunnel));if(e.component)return r.createElement(e.component,this.props)}render(){return r.createElement(M,{id:"ssh-tunnel",separator:!0},r.createElement(W,{label:"SSH Tunnel",name:"sshTunnel",options:this.selectOptions,changeHandler:this.onSSHTunnelChanged.bind(this),value:this.props.connectionModel.sshTunnel}),this.renderSSHTunnel())}}const ye=Te;var fe=n(87870);class be extends r.Component{static displayName="FormActions";static propTypes={connectionModel:p().object.isRequired,currentConnectionAttempt:p().object,isValid:p().bool,isConnected:p().bool,errorMessage:p().string,syntaxErrorMessage:p().string,hasUnsavedChanges:p().bool,viewType:p().string,isURIEditable:p().bool,isSavedConnection:p().bool};onCancelConnectionAttemptClicked(e){e.preventDefault(),u().onCancelConnectionAttemptClicked()}onConnectClicked(e){e.preventDefault(),e.stopPropagation(),u().onConnectClicked()}onDisconnectClicked(e){e.preventDefault(),e.stopPropagation(),u().onDisconnectClicked()}onChangesDiscarded(e){e.preventDefault(),u().onChangesDiscarded()}onEditURIClicked(e){e.preventDefault(),e.stopPropagation(),u().onEditURIClicked()}onHideURIClicked(e){e.preventDefault(),e.stopPropagation(),u().onHideURIClicked()}onSaveFavoriteClicked(e){e.preventDefault(),u().onSaveFavoriteClicked()}hasSyntaxError(){return!this.props.isValid&&this.props.syntaxErrorMessage}hasError(){return!this.props.isValid&&this.props.errorMessage}renderUnsavedMessage(){return r.createElement("div",{className:D["unsaved-message-actions"]},"You have unsaved changes.",r.createElement("a",{id:"discardChanges",onClick:this.onChangesDiscarded},"[discard]"),this.props.connectionModel.isFavorite?r.createElement("a",{id:"saveChanges",onClick:this.onSaveFavoriteClicked},"[save changes]"):null)}renderDisconnect=()=>r.createElement(m.Button,{className:D.button,type:"submit",variant:"primary",onClick:this.onDisconnectClicked.bind(this)},"Disconnect");renderConnect=()=>r.createElement(m.Button,{"data-test-id":"connect-button",className:D.button,type:"submit",name:"connect",variant:"primary",disabled:!!this.hasSyntaxError(),onClick:this.onConnectClicked.bind(this)},"Connect");renderConnecting=()=>r.createElement(r.Fragment,null,r.createElement(m.Button,{className:D.button,type:"submit",name:"cancelConnect",onClick:this.onCancelConnectionAttemptClicked.bind(this)},"Cancel"),r.createElement(m.Button,{className:D.button,type:"submit",name:"connecting",disabled:!0,onClick:e=>{e.preventDefault(),e.stopPropagation()}},r.createElement("div",{className:D["btn-loading"]}),"Connecting..."));renderEditURI=()=>{if(this.props.viewType===fe.CONNECTION_STRING_VIEW)return r.createElement(m.Button,{className:D.button,type:"submit",name:"editUrl",onClick:this.onEditURIClicked.bind(this)},"Edit")};renderHideURI=()=>{if(this.props.isSavedConnection&&!this.props.hasUnsavedChanges&&this.props.viewType===fe.CONNECTION_STRING_VIEW)return r.createElement(m.Button,{className:D.button,type:"submit",name:"hideUrl",onClick:this.onHideURIClicked.bind(this)},"Hide")};renderConnectButtons(){return r.createElement("div",{className:D.buttons},!this.props.currentConnectionAttempt&&(this.props.isURIEditable?this.renderHideURI():this.renderEditURI()),this.props.isConnected&&this.renderDisconnect(),!this.props.isConnected&&!this.props.currentConnectionAttempt&&this.renderConnect(),!this.props.isConnected&&!!this.props.currentConnectionAttempt&&this.renderConnecting())}renderMessage(){const e=this.props.connectionModel;let t=`Connected to ${e.hostname}:${e.port}`,n=D["connection-message-container-success"],s=!1;if(this.hasError()?(s=!0,t=this.props.errorMessage,n=D["connection-message-container-error"]):this.hasSyntaxError()&&this.props.viewType===fe.CONNECTION_STRING_VIEW?(s=!0,t=this.props.syntaxErrorMessage,n=D["connection-message-container-syntax-error"]):this.props.isConnected?s=!0:this.props.hasUnsavedChanges&&(s=!0,t=this.renderUnsavedMessage(),n=D["connection-message-container-unsaved-message"]),!0===s)return r.createElement("div",{className:D["connection-message-container"]},r.createElement("div",{className:n},r.createElement("div",{className:D["connection-message"],"data-test-id":"connection-message"},t)))}render(){return r.createElement(M,{id:"favorite"},this.renderMessage(),this.renderConnectButtons())}}const Se=be;class Ae extends r.Component{static displayName="ConnectionForm";static propTypes={connectionModel:p().object.isRequired,currentConnectionAttempt:p().object,isValid:p().bool.isRequired,isHostChanged:p().bool,isPortChanged:p().bool};constructor(e){super(e),this.state={activeTab:0},this.tabs=["Hostname","More Options"]}onConnectionFormChanged(){u().onConnectionFormChanged()}onTabClicked(e,t){t.preventDefault(),this.state.activeTab!==e&&this.setState({activeTab:e})}renderPort(){if(!this.props.connectionModel.isSrvRecord)return r.createElement(G,{port:this.props.connectionModel.port,isPortChanged:this.props.isPortChanged,key:this.props.connectionModel._id})}renderTabs(){return r.createElement("div",{className:o()(D["tabs-header"])},r.createElement("ul",{className:o()(D["tabs-header-items"])},this.tabs.map(((e,t)=>{const n=o()({[D["tabs-header-item"]]:!0,[D["selected-header-item"]]:this.state.activeTab===t}),s=o()({[D["tabs-header-item-name"]]:!0,[D["selected-header-item-name"]]:this.state.activeTab===t});return r.createElement("li",{id:e.replace(/ /g,"_"),key:`tab-${e}`,"data-test-id":`${e.toLowerCase().replace(/ /g,"-")}-tab`,onClick:this.onTabClicked.bind(this,t),className:n},r.createElement("span",{className:s,href:"#"},e))}))))}renderView(){return 0===this.state.activeTab?r.createElement("div",{className:o()(D["tabs-view"])},r.createElement("div",{className:o()(D["tabs-view-content"])},r.createElement("div",{className:o()(D["tabs-view-content-form"])},r.createElement(M,{separator:!0},r.createElement(U,{hostname:this.props.connectionModel.hostname,isHostChanged:this.props.isHostChanged}),this.renderPort(),r.createElement(V,{currentConnectionAttempt:this.props.currentConnectionAttempt,isSrvRecord:this.props.connectionModel.isSrvRecord})),r.createElement(pe,{connectionModel:this.props.connectionModel,isValid:this.props.isValid})))):1===this.state.activeTab?r.createElement("div",{className:o()(D["tabs-view"])},r.createElement("div",{className:o()(D["tabs-view-content"])},r.createElement("div",{className:o()(D["tabs-view-content-form"],D["align-right"])},r.createElement(M,{id:"read-preference",separator:!0},r.createElement(ce,{sshTunnel:this.props.connectionModel.sshTunnel,replicaSet:this.props.connectionModel.replicaSet}),r.createElement(ge,{readPreference:this.props.connectionModel.readPreference})),r.createElement(he,this.props),r.createElement(ye,this.props)))):void 0}render(){return r.createElement("form",{"data-test-id":"connection-form",onChange:this.onConnectionFormChanged.bind(this),className:o()(D["connect-form"])},r.createElement("fieldset",{disabled:!!this.props.currentConnectionAttempt},r.createElement("div",{className:o()(D.tabs)},r.createElement("div",{className:o()(D["tabs-container"])},this.renderTabs(),this.renderView()))),r.createElement(Se,this.props))}}const Ee=Ae,_e="https://docs.mongodb.com/manual/reference/connection-string/";class xe extends r.PureComponent{static displayName="DriverUrlInput";static propTypes={customUrl:p().string,isURIEditable:p().bool};constructor(e){super(e),this.validateConnectionString=(0,_.debounce)(u().validateConnectionString,550)}onExternalLinkClicked(){u().onExternalLinkClicked(_e)}onCustomUrlChanged(e){const t=e.target.value.trim();u().onCustomUrlChanged(t),this.validateConnectionString()}getCustomUrl(){return this.props.customUrl}render(){const e=o()({[D["form-control"]]:!0,[D["disabled-uri"]]:!this.props.isURIEditable}),t=this.props.isURIEditable?r.createElement("span",null,"Paste your connection string (SRV or Standard"," ",r.createElement(s.InfoSprinkle,{helpLink:_e,onClickHandler:this.onExternalLinkClicked.bind(this)}),")"):r.createElement("span",null,"Click edit to modify your connection string (SRV or Standard"," ",r.createElement(s.InfoSprinkle,{helpLink:_e,onClickHandler:this.onExternalLinkClicked.bind(this)}),")");return r.createElement("div",{className:o()(D["connect-string-item"])},r.createElement("label",null,t),r.createElement("input",{disabled:!this.props.isURIEditable,name:"connectionString",placeholder:"e.g. mongodb+srv://username:password@cluster0-jtpxd.mongodb.net/admin",className:e,value:this.getCustomUrl(),onChange:this.onCustomUrlChanged.bind(this)}))}}const Ie=xe;class Le extends r.Component{static displayName="ConnectionString";static propTypes={connectionModel:p().object.isRequired,customUrl:p().string,isValid:p().bool,isConnected:p().bool,currentConnectionAttempt:p().object,errorMessage:p().string,syntaxErrorMessage:p().string,hasUnsavedChanges:p().bool,viewType:p().string,isURIEditable:p().bool,isSavedConnection:p().bool};render(){return r.createElement("form",{"data-test-id":"connect-string",className:o()(D["connect-string"])},r.createElement("fieldset",{disabled:!!this.props.currentConnectionAttempt},r.createElement(M,{separator:!0},r.createElement(Ie,{customUrl:this.props.customUrl,isURIEditable:this.props.isURIEditable})),r.createElement(Se,{connectionModel:this.props.connectionModel,isValid:this.props.isValid,isConnected:this.props.isConnected,currentConnectionAttempt:this.props.currentConnectionAttempt,errorMessage:this.props.errorMessage,syntaxErrorMessage:this.props.syntaxErrorMessage,hasUnsavedChanges:this.props.hasUnsavedChanges,viewType:this.props.viewType,isURIEditable:this.props.isURIEditable,isSavedConnection:this.props.isSavedConnection})))}}const ve=Le;var Ce=n(6909);const{track:Re}=(0,Ce.default)("COMPASS-CONNECT-UI"),Oe=(e,t,n,r)=>{r.preventDefault(),u().onExternalLinkClicked(e,t),n&&n()};let Ne=0,je=0;const we=(e,t,n,s)=>r.createElement("a",{key:"a"+Ne++,onClick:Oe.bind(void 0,e,n,s)},t),De=e=>r.createElement("p",{key:"p"+je++},...e),Be={[fe.CONNECTION_FORM_VIEW]:[{title:"How do I find my username and password?",body:De(["If your mongod instance has authentication set up, you'll need the credentials of the MongoDB user that is configured on the project."])}],[fe.CONNECTION_STRING_VIEW]:[{title:"How do I find my connection string in Atlas?",body:[De(["If you have an Atlas cluster, go to the Cluster view. Click the 'Connect' button for the cluster to which you wish to connect."]),De([we("https://docs.atlas.mongodb.com/compass-connection/","See example")])]},{title:"How do I format my connection string?",body:De([we("https://docs.mongodb.com/manual/reference/connection-string/","See example")])}]},Me={title:"New to Compass and don't have a cluster?",body:[De(["If you don't already have a cluster, you can create one for free using ",we("https://www.mongodb.com/cloud/atlas","MongoDB Atlas"),"."]),De([("https://www.mongodb.com/cloud/atlas/lp/general/try?utm_source=compass&utm_medium=product","Create Free Cluster","create-atlas-cluster-clicked",$e=()=>Re("Atlas Link Clicked",{screen:"connect"}),r.createElement("button",{type:"button",name:"atlasLink",key:"atlasLink",className:"btn btn-sm btn-info",onClick:Oe.bind(void 0,"https://www.mongodb.com/cloud/atlas/lp/general/try?utm_source=compass&utm_medium=product","create-atlas-cluster-clicked",$e)},"Create Free Cluster"))])]};var $e;class ke extends r.Component{static displayName="Help";static propTypes={viewType:p().string};renderHelpItems(){return Be[this.props.viewType].map(((e,t)=>r.createElement("div",{key:t,className:o()(D["help-item"])},r.createElement("p",{key:"pTitle",className:o()(D["help-item-question"])},e.title),e.body)))}render(){return r.createElement("div",{className:o()(D["help-container"])},r.createElement("div",{className:o()(D["help-item-list"])},r.createElement("div",{className:o()(D["atlas-link-container"])},r.createElement("div",{className:o()(D["atlas-link"])},r.createElement("div",{className:o()(D["help-content"])},r.createElement("p",{className:o()(D["help-item-question"])},Me.title),Me.body))),this.renderHelpItems()))}}const Pe=ke;var Fe=n(12170),Ue=n.n(Fe);const qe=["#5fc86e","#326fde","#deb342","#d4366e","#59c1e2","#2c5f4a","#d66531","#773819","#3b8196","#ababab"];class Ge extends r.Component{static displayName="FavoriteColorPicker";static propTypes={colors:p().array,hex:p().string,onChange:p().func};static defaultProps={colors:qe};renderColor(e){const t={[D["color-box"]]:!0,[D["color-box-active"]]:this.props.hex===e};return r.createElement("div",{className:o()(t),onClick:this.props.onChange.bind(this,e),title:e,key:e},r.createElement("div",{style:{background:e},className:o()(D.color)},r.createElement("svg",{className:o()(D.checkmark),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},r.createElement("g",{fill:"white",transform:"translate(1 1)",fillOpacity:this.props.hex===e?1:0,strokeOpacity:this.props.hex===e?1:0},r.createElement("path",{stroke:"#ffffff",d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"})))))}render(){const e={[D["color-box"]]:!0,[D["color-box-active"]]:void 0===this.props.hex};return r.createElement("div",{className:o()(D["favorite-picker"])},r.createElement("div",{className:o()(e),onClick:this.props.onChange.bind(this,void 0),title:"No color",key:"noColor"},r.createElement("div",{style:{background:"#ffffff"},className:o()(D.color,D["grey-border"])},r.createElement("div",{className:o()(D["red-line"])}))),qe.map(this.renderColor.bind(this)))}}const He=Ge;class Ve extends r.PureComponent{static displayName="FavoriteModal";static propTypes={connectionModel:p().object,saveFavorite:p().func,closeFavoriteModal:p().func};constructor(e){super(e),this.state={name:e.connectionModel.name,color:e.connectionModel.color}}handleChangeColor(e){this.setState({color:e})}handleClose(){this.props.closeFavoriteModal()}handleSave(){this.props.saveFavorite(this.state.name,this.state.color)}handleFormSubmit(e){e.preventDefault(),e.stopPropagation(),this.handleSave()}handleChangeName(e){this.setState({name:e.target.value})}render(){return r.createElement(m.ConfirmationModal,{title:this.props.connectionModel.isFavorite?"Edit favorite":"Save connection to favorites",open:!0,onConfirm:this.handleSave.bind(this),onCancel:this.handleClose.bind(this),buttonText:"Save",trackingId:"favorite_modal"},r.createElement("form",{name:"favorite-modal",onSubmit:this.handleFormSubmit.bind(this),"data-test-id":"favorite-modal"},r.createElement(s.ModalInput,{autoFocus:!0,id:"favorite-name",name:"Name",value:this.state.name,onChangeHandler:this.handleChangeName.bind(this)}),r.createElement("p",null,"Color"),r.createElement(He,{hex:this.state.color,onChange:this.handleChangeColor.bind(this)})))}}const Ke=Ve;class We extends r.PureComponent{static displayName="IsFavoritePill";static propTypes={connectionModel:p().object,isModalVisible:p().bool,isMessageVisible:p().bool,savedMessage:p().string,color:p().string,isFavorite:p().bool};closeFavoriteModal(){u().hideFavoriteModal()}saveFavorite(e,t){u().onCreateFavoriteClicked(e,t),u().hideFavoriteModal()}clickFavoritePill(e){e.preventDefault(),e.stopPropagation(),u().showFavoriteModal()}renderFavoriteModal(){if(this.props.isModalVisible)return r.createElement(Ke,{connectionModel:this.props.connectionModel,closeFavoriteModal:this.closeFavoriteModal,saveFavorite:this.saveFavorite})}render(){const e=this.props.isFavorite?"star":"star-o",t=o()({[D["favorite-saved"]]:!0,[D["favorite-saved-visible"]]:this.props.isMessageVisible}),n={backgroundColor:this.props.color||"#dee0e3",color:this.props.color?"#ffffff":this.props.isFavorite?"#243642":"#88989a"};return r.createElement("div",{className:o()(D["is-favorite-pill"])},r.createElement("a",{style:n,className:o()(D["is-favorite-pill-text"]),onClick:this.clickFavoritePill.bind(this)},r.createElement(Ue(),{name:e}),"FAVORITE",r.createElement("div",{className:t},this.props.savedMessage)),this.renderFavoriteModal())}}const Ye=We;class ze extends r.PureComponent{static propTypes={isEditURIConfirm:p().bool.isRequired};onConfirm=()=>{u().onEditURIConfirmed()};onClose=()=>{u().onEditURICanceled()};render(){return r.createElement(m.ConfirmationModal,{title:"Are you sure you want to edit your connection string?",open:this.props.isEditURIConfirm,onConfirm:this.onConfirm,onCancel:this.onClose,buttonText:"Confirm",trackingId:"confirm_edit_conection_string_modal"},r.createElement("div",{id:"edit-uri-note"},"Editing this connection string will reveal your credentials."))}}const Ze=ze;var Xe=n(4858);const Je=()=>Math.PI/(170+100*Math.random())*(Math.random()>.5?1:-1),Qe=Math.PI/9e4;class et extends r.Component{componentDidMount(){this.mounted=!0,this.startAnimation()}componentWillUnmount(){this.mounted=!1}currentRotation=0;rotationVelocity=0;lastFrame=Date.now();startAnimation=()=>{this.lastFrame=Date.now(),this.currentRotation=0,this.rotationVelocity=Je(),window.requestAnimationFrame(this.updateAnimation)};updateAnimation=()=>{if(!this.mounted)return;Date.now()-this.lastFrame>20&&(this.lastFrame=Date.now());const e=Date.now()-this.lastFrame,t=document.getElementById("connectingArrow1"),n=this.currentRotation*(180/Math.PI);t&&t.setAttribute("transform",`rotate(${n}, 24.39, 39.2)`);const r=document.getElementById("connectingArrow2");r&&r.setAttribute("transform",`rotate(${n}, 24.39, 39.2)`),this.currentRotation+=this.rotationVelocity*e,this.rotationVelocity+=Qe*(this.currentRotation>0?-1:1)*e,this.rotationVelocity*=.974,Math.abs(this.rotationVelocity)<Math.PI/1100&&Math.abs(this.currentRotation)<Math.PI/1100&&(this.rotationVelocity=Je()),this.lastFrame=Date.now(),window.requestAnimationFrame(this.updateAnimation)};render(){return r.createElement("div",{className:D["connecting-modal-animation"]},r.createElement("svg",{className:D["connecting-compass-animation-svg"],xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50.82 64.05"},r.createElement("g",null,r.createElement("circle",{className:D["connecting-compass-shadow-stroke"],cx:"26.15",cy:"9.86",r:"8.47"}),r.createElement("circle",{className:D["connecting-compass-circle-1"],cx:"24.39",cy:"9.86",r:"8.47"}),r.createElement("circle",{className:D["connecting-compass-shadow"],cx:"26.15",cy:"39.2",r:"24.38"}),r.createElement("circle",{className:D["connecting-compass-circle-2"],cx:"24.39",cy:"39.2",r:"24.39"}),r.createElement("circle",{className:D["connecting-compass-circle-3"],cx:"24.39",cy:"39.37",r:"20.1"}),r.createElement("polygon",{id:"connectingArrow1",className:D["connecting-compass-arrow-1"],points:"24.39 22.62 21.35 39.2 27.43 39.2 24.39 22.62"}),r.createElement("polygon",{id:"connectingArrow2",className:D["connecting-compass-arrow-2"],points:"24.39 55.77 27.43 39.2 21.35 39.2 24.39 55.77"}))))}}const tt=et;var nt=n(51777);class rt extends r.Component{static propTypes={connectingStatusText:p().string.isRequired,currentConnectionAttempt:p().object};state={showModal:!1};componentDidUpdate=()=>{!this.props.currentConnectionAttempt||this.showModalDebounceTimeout||this.state.showModal||(this.showModalDebounceTimeout=window.setTimeout((()=>{this.props.currentConnectionAttempt&&this.startShowingModal(),this.showModalDebounceTimeout=null}),250)),!this.props.currentConnectionAttempt&&this.state.showModal&&this.stopShowingModal()};componentWillUnmount=()=>{this.showModalDebounceTimeout&&(window.clearTimeout(this.showModalDebounceTimeout),this.showModalDebounceTimeout=null)};onCancelConnectionClicked=()=>{u().onCancelConnectionAttemptClicked()};startShowingModal=()=>{this.setState({showModal:!0})};stopShowingModal=()=>{this.setState({showModal:!1})};showModalDebounceTimeout=null;renderConnectingBackground=()=>r.createElement("svg",{className:D["connecting-background"],xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 310.34 540.72"},r.createElement("defs",null,r.createElement("linearGradient",{id:"linearGradient",x1:"-0.69",y1:"540.32",x2:"311.03",y2:"0.4",gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:"0.09",stopColor:"#ffe1ea",stopOpacity:"0.34"}),r.createElement("stop",{offset:"0.74",stopColor:"#c5e4f2",stopOpacity:"0.61"},r.createElement("animate",{attributeName:"offset",from:"0.74",to:"0.74",dur:"5s",repeatCount:"indefinite",keySplines:"0.4 0 0.2 1; 0.4 0 0.2 1",values:"0.74;0.45;0.74"})),r.createElement("stop",{offset:"1",stopColor:"#fef2c8",stopOpacity:"0.8"}))),r.createElement("g",null,r.createElement("rect",{fill:"url(#linearGradient)",className:D["connecting-background-gradient"],width:"310.34",height:"540.72"})));render(){return r.createElement(r.Fragment,null,!!this.props.currentConnectionAttempt&&this.renderConnectingBackground(),r.createElement(Xe.Z,{className:"with-global-bootstrap-styles",animation:!1,show:this.state.showModal&&!!this.props.currentConnectionAttempt,backdropClassName:D["connecting-modal-backdrop"]},r.createElement(Xe.Z.Body,null,r.createElement("div",{"data-test-id":"connecting-modal-content",className:D["connecting-modal-content"],id:"connectingStatusText"},r.createElement("img",{className:D["connecting-modal-illustration"],src:nt,alt:"Compass connecting illustration"}),r.createElement("h2",{className:D["connecting-modal-status"]},this.props.connectingStatusText),r.createElement(tt,null),r.createElement(m.Link,{as:"button","data-test-id":"cancel-connection-button",onClick:this.onCancelConnectionClicked,hideExternalIcon:!0,className:D["connecting-modal-cancel-btn"]},"Cancel")))))}}const st=rt,{track:at}=(0,Ce.createLoggerAndTelemetry)("COMPASS-CONNECT-UI");class ot extends r.Component{static displayName="Connect";static propTypes={connectingStatusText:p().string,connectionModel:p().object,connections:p().object,currentConnectionAttempt:p().object,isConnected:p().bool,viewType:p().string,isModalVisible:p().bool,isMessageVisible:p().bool,savedMessage:p().string,isEditURIConfirm:p().bool};componentDidMount(){document.title=`${i.remote.app.getName()} - Connect`,at("Screen",{name:"connect"})}onChangeViewClicked(e){u().onChangeViewClicked(e.currentTarget.dataset.viewType)}handleMouseMove(){this.props.isMessageVisible&&u().hideFavoriteMessage()}renderConnectScreen(){return this.props.viewType===fe.CONNECTION_STRING_VIEW?r.createElement(ve,this.props):r.createElement(Ee,this.props)}renderChangeViewLink(){const e=this.props.viewType===fe.CONNECTION_STRING_VIEW,t=`show-connection-${e?"form":"string"}-button`;return r.createElement("div",{className:D["change-view-link"]},r.createElement(m.Link,{as:"button",hideExternalIcon:!0,"data-test-id":t,"data-view-type":e?fe.CONNECTION_FORM_VIEW:fe.CONNECTION_STRING_VIEW,onClick:this.onChangeViewClicked,className:D["change-view-link-button"]},e?"Fill in connection fields individually":"Paste connection string"))}renderHeader(){let e="New Connection";return this.props.connectionModel.isFavorite&&(e=this.props.connectionModel.name.length>40?`${this.props.connectionModel.name.substring(0,40)}...`:this.props.connectionModel.name),r.createElement("header",null,r.createElement("h2",null,e),r.createElement(Ye,{connectionModel:this.props.connectionModel,isModalVisible:this.props.isModalVisible,isMessageVisible:this.props.isMessageVisible,savedMessage:this.props.savedMessage,color:this.props.connectionModel.color,isFavorite:this.props.connectionModel.isFavorite}))}render(){const e="false"!==process.env.USE_NEW_CONNECT_FORM;return r.createElement("div",null,r.createElement("div",{"data-test-id":"connect-section",className:o()(D.page,D.connect)},r.createElement(w,this.props),r.createElement("div",{className:D["form-container"]},!e&&r.createElement("div",{className:D["connect-container"],onMouseMove:this.handleMouseMove.bind(this)},this.renderHeader(),this.renderChangeViewLink(),this.renderConnectScreen()),r.createElement(Pe,this.props)),r.createElement(st,{connectingStatusText:this.props.connectingStatusText,currentConnectionAttempt:this.props.currentConnectionAttempt}),r.createElement(Ze,{isEditURIConfirm:this.props.isEditURIConfirm})))}}const it=ot;var lt=n(87366),pt=n.n(lt);class mt extends r.Component{static displayName="ConnectPlugin";render(){return r.createElement(s.StoreConnector,{store:pt()},r.createElement(it,this.props))}}const ct=mt;class ut extends r.Component{static displayName="SSLServerValidation";static propTypes={connectionModel:p().object.isRequired,isValid:p().bool};onSSLCAChanged(e){u().onSSLCAChanged(e)}getError(){const e=this.props.connectionModel;if(!this.props.isValid&&(0,_.isEmpty)(e.sslCA))return!0}render(){return r.createElement("div",{id:"ssl-server-validation",className:o()(D["form-group"])},r.createElement(m.FileInput,{label:"Certificate Authority",onChange:this.onSSLCAChanged.bind(this),values:this.props.connectionModel.sslCA,error:this.getError(),link:"https://docs.mongodb.com/manual/tutorial/configure-ssl/#certificate-authorities",multi:!0}))}}const gt=ut;class dt extends r.Component{static displayName="SSLServerClientValidation";static propTypes={connectionModel:p().object.isRequired,isValid:p().bool};onCertificateAuthorityChanged(e){u().onSSLCAChanged(e)}onClientCertificateChanged(e){u().onSSLCertificateChanged(e)}onClientPrivateKeyChanged(e){u().onSSLPrivateKeyChanged(e)}onClientKeyPasswordChanged(e){u().onSSLPrivateKeyPasswordChanged(e.target.value)}onPasswordHelp(){i.shell.openExternal("https://docs.mongodb.com/manual/reference/configuration-options/#net.ssl.PEMKeyPassword")}getCertAuthError(){if(this._isInvalid(this.props.connectionModel.sslCA))return!0}getClientCertError(){if(this._isInvalid(this.props.connectionModel.sslCert))return!0}getClientKeyError(){if(this._isInvalid(this.props.connectionModel.sslKey))return!0}_isInvalid(e){return!this.props.isValid&&(0,_.isEmpty)(e)}render(){return r.createElement("div",{id:"ssl-server-client-validation",className:o()(D["form-group"])},r.createElement(m.FileInput,{label:"Certificate Authority",id:"sslCA",error:this.getCertAuthError(),onChange:this.onCertificateAuthorityChanged.bind(this),values:this.props.connectionModel.sslCA,link:"https://docs.mongodb.com/manual/tutorial/configure-ssl/#certificate-authorities"}),r.createElement(m.FileInput,{label:"Client Certificate",id:"sslCert",error:this.getClientCertError(),onChange:this.onClientCertificateChanged.bind(this),values:this.props.connectionModel.sslCert,link:"https://docs.mongodb.com/manual/tutorial/configure-ssl/#pem-file"}),r.createElement(m.FileInput,{label:"Client Private Key",id:"sslKey",error:this.getClientKeyError(),onChange:this.onClientPrivateKeyChanged.bind(this),values:this.props.connectionModel.sslKey,link:"https://docs.mongodb.com/manual/tutorial/configure-ssl/#pem-file"}),r.createElement(P,{label:"Client Key Password",name:"sslPass",type:"password",changeHandler:this.onClientKeyPasswordChanged.bind(this),value:this.props.connectionModel.sslPass||"",linkHandler:this.onPasswordHelp.bind(this)}))}}const ht=dt;class Tt extends r.Component{static displayName="SSHTunnelIdentityFileValidation";static propTypes={connectionModel:p().object.isRequired,isValid:p().bool};onSSHTunnelHostnameChanged(e){u().onSSHTunnelHostnameChanged(e.target.value)}onSSHTunnelUsernameChanged(e){u().onSSHTunnelUsernameChanged(e.target.value.trim())}onSSHTunnelIdentityFileChanged(e){u().onSSHTunnelIdentityFileChanged(e)}onSSHTunnelPassphraseChanged(e){u().onSSHTunnelPassphraseChanged(e.target.value)}onSSHTunnelPortChanged(e){u().onSSHTunnelPortChanged(e.target.value)}onSourceHelp(){i.shell.openExternal("https://docs.mongodb.com/compass/current/connect")}getPort(){return this.props.connectionModel.sshTunnelPort}getHostnameError(){if(this._isInvalid(this.props.connectionModel.sshTunnelHostname))return!0}getPortError(){if(this._isInvalid(this.props.connectionModel.sshTunnelPort))return!0}getUsernameError(){if(this._isInvalid(this.props.connectionModel.sshTunnelUsername))return!0}getFileError(){if(this._isInvalid(this.props.connectionModel.sshTunnelIdentityFile))return!0}_isInvalid(e){return!this.props.isValid&&(0,_.isEmpty)(e)}render(){return r.createElement(M,{id:"sshTunnelIdentityFileValidation"},r.createElement(P,{label:"SSH Hostname",name:"sshTunnelHostname",error:this.getHostnameError(),changeHandler:this.onSSHTunnelHostnameChanged.bind(this),value:this.props.connectionModel.sshTunnelHostname||"",linkHandler:this.onSourceHelp.bind(this)}),r.createElement(P,{label:"SSH Tunnel Port",name:"sshTunnelPort",placeholder:"22",error:this.getPortError(),changeHandler:this.onSSHTunnelPortChanged.bind(this),value:this.getPort(),type:"number"}),r.createElement(P,{label:"SSH Username",name:"sshTunnelUsername",error:this.getUsernameError(),changeHandler:this.onSSHTunnelUsernameChanged.bind(this),value:this.props.connectionModel.sshTunnelUsername||""}),r.createElement(m.FileInput,{label:"SSH Identity File",id:"sshTunnelIdentityFile",error:this.getFileError(),onChange:this.onSSHTunnelIdentityFileChanged.bind(this),values:this.props.connectionModel.sshTunnelIdentityFile}),r.createElement(P,{label:"SSH Passphrase",name:"sshTunnelPassphrase",type:"password",changeHandler:this.onSSHTunnelPassphraseChanged.bind(this),value:this.props.connectionModel.sshTunnelPassphrase||""}))}}const yt=Tt;class ft extends r.Component{static displayName="SSHTunnelPasswordValidation";static propTypes={connectionModel:p().object.isRequired,isValid:p().bool};onSSHTunnelHostnameChanged(e){u().onSSHTunnelHostnameChanged(e.target.value)}onSSHTunnelUsernameChanged(e){u().onSSHTunnelUsernameChanged(e.target.value.trim())}onSSHTunnelPasswordChanged(e){u().onSSHTunnelPasswordChanged(e.target.value)}onSSHTunnelPortChanged(e){u().onSSHTunnelPortChanged(e.target.value)}onHostnameHelp(){i.shell.openExternal("https://docs.mongodb.com/compass/current/connect")}getPort(){return this.props.connectionModel.sshTunnelPort}getHostnameError(){if(this._isInvalid(this.props.connectionModel.sshTunnelHostname))return!0}getPortError(){if(this._isInvalid(this.props.connectionModel.sshTunnelPort))return!0}getUsernameError(){if(this._isInvalid(this.props.connectionModel.sshTunnelUsername))return!0}getPasswordError(){if(this._isInvalid(this.props.connectionModel.sshTunnelPassword))return!0}_isInvalid(e){return!this.props.isValid&&(0,_.isEmpty)(e)}render(){return r.createElement(M,{id:"sshTunnelPassword"},r.createElement(P,{label:"SSH Hostname",name:"sshTunnelHostname",error:this.getHostnameError(),changeHandler:this.onSSHTunnelHostnameChanged.bind(this),value:this.props.connectionModel.sshTunnelHostname||"",linkHandler:this.onHostnameHelp.bind(this)}),r.createElement(P,{label:"SSH Tunnel Port",name:"sshTunnelPort",error:this.getPortError(),changeHandler:this.onSSHTunnelPortChanged.bind(this),value:this.getPort()}),r.createElement(P,{label:"SSH Username",name:"sshTunnelUsername",error:this.getUsernameError(),changeHandler:this.onSSHTunnelUsernameChanged.bind(this),value:this.props.connectionModel.sshTunnelUsername||""}),r.createElement(P,{label:"SSH Password",name:"sshTunnelPassword",type:"password",error:this.getPasswordError(),changeHandler:this.onSSHTunnelPasswordChanged.bind(this),value:this.props.connectionModel.sshTunnelPassword||""}))}}const bt=ft,St=JSON.parse('{"name":"@mongodb-js/compass-connect","productName":"Compass Connect Plugin","version":"7.21.0","apiVersion":"3.0.0","description":"Connection Screen Plugin that supports Compass","main":"lib/index.js","exports":{"webpack":"./src/index.js","require":"./lib/index.js"},"repository":{"type":"git","url":"https://github.com/mongodb-js/compass.git"},"scripts":{"clean":"rimraf lib","precompile":"npm run clean","compile":"cross-env NODE_ENV=production webpack --config ./config/webpack.prod.config.js","start":"cross-env NODE_ENV=development webpack-dev-server --config ./config/webpack.dev.config.js","start-watch":"npm run clean && webpack --config ./config/webpack.watch.config.js","test-watch":"cross-env NODE_ENV=test mocha-webpack \\"./src/**/*.spec.js\\" --watch","test-electron":"xvfb-maybe cross-env NODE_ENV=test xvfb-maybe karma start","posttest-electron":"npm run posttest","pretest":"mongodb-runner start --port=27018","test":"cross-env NODE_ENV=test mocha-webpack \\"./src/**/*.spec.js\\"","posttest":"mongodb-runner stop --port=27018","test-cov":"nyc npm run test","check":"npm run lint && npm run depcheck","prepublishOnly":"npm run compile","lint":"eslint \\"./src/**/*.{js,jsx}\\" \\"./test/**/*.js\\" \\"./electron/**/*.js\\" \\"./config/**/*.{js,jsx}\\"","depcheck":"depcheck","test-ci":"npm run test","test-ci-electron":"npm run test","posttest-ci":"node ../../scripts/killall-mongo.js","bootstrap":"npm run compile"},"license":"SSPL","peerDependencies":{"@mongodb-js/compass-components":"^0.13.0","hadron-ipc":"^2.9.0","hadron-react-buttons":"^5.7.0","hadron-react-components":"^5.13.0","moment":"^2.27.0","mongodb-connection-model":"^21.15.0","mongodb-data-service":"^21.19.0","prop-types":"^15.7.2","react":"^16.14.0","react-bootstrap":"^0.32.1","react-dom":"^16.14.0","react-fontawesome":"^1.6.1"},"devDependencies":{"@babel/cli":"^7.14.3","@babel/core":"^7.14.3","@babel/plugin-proposal-decorators":"^7.14.2","@babel/plugin-syntax-dynamic-import":"^7.8.3","@babel/preset-env":"^7.14.2","@babel/preset-react":"^7.13.13","@babel/register":"^7.13.16","@mongodb-js/compass-components":"^0.13.0","autoprefixer":"^9.4.6","babel-loader":"^8.2.2","chai":"^4.2.0","chai-enzyme":"1.0.0-beta.1","classnames":"^2.2.6","core-js":"^3.12.1","cross-env":"^7.0.0","css-loader":"^4.3.0","depcheck":"^1.4.1","electron":"^13.5.1","enzyme":"^3.11.0","enzyme-adapter-react-16":"^1.15.2","eslint":"^7.25.0","eslint-config-mongodb-js":"^5.0.3","eslint-plugin-react":"^7.24.0","file-loader":"^5.1.0","font-awesome":"^4.7.0","hadron-app":"^4.21.0","hadron-app-registry":"^8.10.0","hadron-ipc":"^2.9.0","hadron-react-buttons":"^5.7.0","hadron-react-components":"^5.13.0","html-webpack-plugin":"^3.2.0","ignore-loader":"^0.1.2","istanbul-instrumenter-loader":"^3.0.1","jsdom":"^16.7.0","jsdom-global":"^3.0.2","karma":"^6.3.4","karma-chai":"^0.1.0","karma-chai-sinon":"^0.1.5","karma-electron":"^7.0.0","karma-mocha":"^1.3.0","karma-mocha-reporter":"^2.2.5","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","less":"^3.11.1","less-loader":"^7.3.0","lodash.isempty":"^4.4.0","mini-css-extract-plugin":"^0.9.0","mocha":"^7.0.1","mocha-webpack":"^2.0.0-beta.0","moment":"^2.27.0","mongodb-build-info":"^1.3.0","mongodb-cloud-info":"^1.1.3","mongodb-connection-model":"^21.15.0","mongodb-connection-string-url":"^2.5.2","mongodb-data-service":"^21.19.0","mongodb-runner":"^4.8.3","mongodb-shell-to-url":"^0.1.0","node-loader":"^0.6.0","nyc":"^15.0.0","peer-deps-externals-webpack-plugin":"^1.0.4","postcss-loader":"^2.1.6","prop-types":"^15.7.2","react":"^16.14.0","react-bootstrap":"^0.32.1","react-dom":"^16.14.0","react-fontawesome":"^1.6.1","react-hot-loader":"^4.13.0","reflux":"^0.4.1","reflux-state-mixin":"github:mongodb-js/reflux-state-mixin","rimraf":"^3.0.0","semver":"^7.1.1","shebang-loader":"^0.0.1","sinon":"^8.1.1","sinon-chai":"^3.4.0","storage-mixin":"^4.13.0","style-loader":"^2.0.0","url-loader":"^3.0.0","webpack":"^4.46.0","webpack-bundle-analyzer":"^3.0.3","webpack-cli":"^3.3.12","webpack-dev-server":"^3.11.2","webpack-merge":"^4.2.2","webpack-node-externals":"^3.0.0","xvfb-maybe":"^0.2.1"},"dependencies":{"@mongodb-js/compass-logging":"^0.10.0","debug":"4.3.0","lodash":"^4.17.15"},"homepage":"https://github.com/mongodb-js/compass","bugs":{"url":"https://jira.mongodb.org/projects/COMPASS/issues","email":"compass@mongodb.com"}}'),At={name:"Connect",component:ct},Et={name:"NONE",selectOption:{NONE:"None"}},_t={name:"SYSTEMCA",selectOption:{SYSTEMCA:"System CA / Atlas Deployment"}},xt={name:"UNVALIDATED",selectOption:{UNVALIDATED:"Unvalidated (insecure)"}},It={name:"SERVER",selectOption:{SERVER:"Server Validation"},component:gt},Lt={name:"ALL",selectOption:{ALL:"Server and Client Validation"},component:ht},vt={name:"NONE",selectOption:{NONE:"None"}},Ct={name:"USER_PASSWORD",selectOption:{USER_PASSWORD:"Use Password"},component:bt},Rt={name:"IDENTITY_FILE",selectOption:{IDENTITY_FILE:"Use Identity File"},component:yt};function Ot(e){e.registerRole("Application.Connect",At),e.registerRole("Connect.SSLMethod",Et),e.registerRole("Connect.SSLMethod",_t),e.registerRole("Connect.SSLMethod",It),e.registerRole("Connect.SSLMethod",Lt),e.registerRole("Connect.SSLMethod",xt),e.registerRole("Connect.SSHTunnel",vt),e.registerRole("Connect.SSHTunnel",Ct),e.registerRole("Connect.SSHTunnel",Rt),e.registerAction("Connect.Actions",u()),e.registerStore("Connect.Store",pt())}function Nt(e){e.deregisterRole("Application.Connect",At),e.deregisterRole("Connect.SSLMethod",Et),e.deregisterRole("Connect.SSLMethod",_t),e.deregisterRole("Connect.SSLMethod",It),e.deregisterRole("Connect.SSLMethod",Lt),e.deregisterRole("Connect.SSLMethod",xt),e.deregisterRole("Connect.SSHTunnel",vt),e.deregisterRole("Connect.SSHTunnel",Ct),e.deregisterRole("Connect.SSHTunnel",Rt),e.deregisterAction("Connect.Actions"),e.deregisterStore("Connect.Store")}const jt=ct},41331:(e,t,n)=>{"use strict";n.r(t),n.d(t,{createConnectionAttempt:()=>p});var r=n(6909),s=n(29487);const{log:a,mongoLogId:o,debug:i}=(0,r.default)("COMPASS-CONNECT-UI");class l{constructor(e){this._connectFn=e,this._cancelled=new Promise((e=>{this._cancelConnectionAttempt=()=>e(null)}))}connect(e){return a.info(o(1001000004),"Connection UI","Initiating connection attempt"),Promise.race([this._cancelled,this._connect(e)])}cancelConnectionAttempt(){a.info(o(1001000005),"Connection UI","Canceling connection attempt"),this._cancelConnectionAttempt(),this._close()}async _connect(e){if(!this._closed)try{return this._dataService=await this._connectFn(e),this._dataService}catch(e){if(function(e){return"MongoError"===e.name&&"Topology closed"===e.message}(e))return i("caught connection attempt closed error",e),null;throw i("connection attempt failed",e),e}}async _close(){if(!this._closed)if(this._closed=!0,this._dataService)try{await this._dataService.disconnect(),i("disconnected from connection attempt")}catch(e){i("error while disconnecting from connection attempt",e)}else i("cancelled connection attempt")}}function p(e=s.connect){return new l(e)}},45922:(e,t,n)=>{"use strict";n.r(t),n.d(t,{trackConnectionAttemptEvent:()=>c,trackNewConnectionEvent:()=>u,trackConnectionFailedEvent:()=>g});var r=n(6909),s=n(59176),a=n(97587),o=n(91491);const{track:i,debug:l}=(0,r.createLoggerAndTelemetry)("COMPASS-CONNECT-UI");async function p(e){const t={is_localhost:!1,is_public_cloud:!1,is_do_url:!1,is_atlas_url:!1,public_cloud_name:""};if((0,s.isLocalhost)(e))return{...t,is_localhost:!0};if((0,s.isDigitalOcean)(e))return{...t,is_do_url:!0};const{isAws:n,isAzure:r,isGcp:o}=await(0,a.getCloudInfo)(e).catch((e=>(l("getCloudInfo failed",e),{}))),i=n?"AWS":r?"Azure":o?"GCP":"";return{is_localhost:!1,is_public_cloud:!!(n||r||o),is_do_url:!1,is_atlas_url:(0,s.isAtlas)(e),public_cloud_name:i}}async function m(e){const{connectionOptions:{connectionString:t,sshTunnel:n}}=e,r=new o.ZP(t),s=r.hosts[0],a=r.searchParams,i=a.get("authMechanism")||(r.username?"DEFAULT":"NONE"),l=a.get("proxyHost");return{...await p(s),auth_type:i.toUpperCase(),tunnel:l?"socks5":n?"ssh":"none",is_srv:r.isSRV}}function c(e,t=i){try{const{favorite:n,lastUsed:r}=e;t("Connection Attempt",{is_favorite:Boolean(n),is_recent:Boolean(r&&!n),is_new:!r})}catch(e){l("trackConnectionAttemptEvent failed",e)}}function u(e,t,n=i){try{n("New Connection",(async()=>{const{dataLake:n,genuineMongoDB:r,host:s,build:a,isAtlas:o}=await t.instance();return{...await m(e),is_atlas:o,is_dataLake:n.isDataLake,is_enterprise:a.isEnterprise,is_genuine:r.isGenuine,non_genuine_server_name:r.dbType,server_version:a.version,server_arch:s.arch,server_os_family:s.os_family,topology_type:t.currentTopologyType()}}))}catch(e){l("trackNewConnectionEvent failed",e)}}function g(e,t,n=i){try{n("Connection Failed",(async()=>({...await m(e),error_code:t.code,error_name:t.codeName??t.name})))}catch(e){l("trackConnectionFailedEvent failed",e)}}},87366:(e,t,n)=>{const r=n(72298),s=n(45727),{sortBy:a,forEach:o,omit:i}=n(76635),l=n(44399),p=n(10862),m=n(99837),{promisify:c}=n(73837),{getConnectionTitle:u,convertConnectionModelToInfo:g}=n(29487),d=n(15216)("compass-connect:store"),h=n(86631),{CONNECTION_FORM_VIEW:T,CONNECTION_STRING_VIEW:y}=n(87870),{createConnectionAttempt:f}=n(41331),{trackConnectionAttemptEvent:b,trackNewConnectionEvent:S,trackConnectionFailedEvent:A}=n(45922),E=l.ConnectionCollection,_=navigator.userAgent.toLowerCase(),{createLoggerAndTelemetry:x}=n(6909),{log:I,mongoLogId:L}=x("COMPASS-CONNECT-UI"),v=["mongodbUsername","mongodbPassword","mongodbDatabaseName","kerberosPrincipal","kerberosServiceName","x509Username","ldapUsername","ldapPassword"],C=["sslCA","sslCert","sslKey","sslPass"],R=["sshTunnelHostname","sshTunnelPort","sshTunnelBindToLocalPort","sshTunnelUsername","sshTunnelPassword","sshTunnelIdentityFile","sshTunnelPassphrase","replicaSet"],O="Connect.Extension",N="Loading connection",j=p.createStore({mixins:[m.store],listenables:h,dataService:null,init(){this.state.fetchedConnections.fetch({success:()=>{this.state.fetchedConnections.forEach((e=>{this.state.connections[e._id]={...e._values}})),this.trigger(this.state)}}),s.on("app:disconnect",this.onDisconnectClicked.bind(this))},onActivated(e){const t=e.getRole(O)||[];o(t,(e=>e(this))),this.appRegistry=e,e.on("clear-current-favorite",(()=>{e.getStore("Connect.Store").state.connectionModel=new l}))},getInitialState:()=>({connectionModel:new l,fetchedConnections:new E,connections:{},connectingStatusText:N,currentConnectionAttempt:null,customUrl:"",isValid:!0,isConnected:!1,errorMessage:null,syntaxErrorMessage:null,hasUnsavedChanges:!1,viewType:y,isHostChanged:!1,isPortChanged:!1,isModalVisible:!1,isMessageVisible:!1,isURIEditable:!0,isEditURIConfirm:!1,isSavedConnection:!1,savedMessage:"Saved to favorites"}),hideFavoriteMessage(){this.setState({isMessageVisible:!1})},hideFavoriteModal(){this.setState({isModalVisible:!1})},showFavoriteMessage(){this.setState({isModalVisible:!0})},showFavoriteModal(){this.state.isModalVisible=!0,this.trigger(this.state)},async validateConnectionString(){const e=this.state.customUrl,t=this.state.connectionModel,n=this.state.connections[t._id];if(this.state.hasUnsavedChanges=!!n,""===e)return this._clearForm(),void this._clearConnection();if(!l.isURI(e))return d("Invalid schema, expected `mongodb` or `mongodb+srv`"),this._setSyntaxErrorMessage("Invalid schema, expected `mongodb` or `mongodb+srv`"),void I.info(L(1001000025),"Connection UI","Rejecting URL due to invalid schema");try{const t=c(l.from);await t(e),this._resetSyntaxErrorMessage()}catch(e){I.info(L(1001000026),"Connection UI","Rejecting invalid URL",{error:e.message}),d("buildConnectionModelFromUrl",e),this._setSyntaxErrorMessage(e.message)}},onAuthSourceChanged(e){this.state.connectionModel.mongodbDatabaseName=e,this.trigger(this.state)},onAuthStrategyChanged(e){this._clearAuthFields(),this.state.connectionModel.authStrategy=e,this.trigger(this.state)},async onChangeViewClicked(e){this.state.viewType=e,e===T?await this._onViewChangedToConnectionForm():e===y&&await this._onViewChangedToConnectionString(),this.trigger(this.state)},onCancelConnectionAttemptClicked(){this._cancelCurrentConnectionAttempt()},async _cancelCurrentConnectionAttempt(){if(!this.state.isConnected&&this.state.currentConnectionAttempt){try{this.state.currentConnectionAttempt.cancelConnectionAttempt()}catch(e){}this.setState({currentConnectionAttempt:null})}},onConnectionFormChanged(){const e=this.state.connectionModel,t=this.state.connections[e._id];this.setState({isValid:!0,errorMessage:null,syntaxErrorMessage:null,hasUnsavedChanges:!!t})},async onConnectClicked(){if(this.state.currentConnectionAttempt)return;const e=g(this.state.connectionModel);b(e),this.setState({currentConnectionAttempt:f(),connectingStatusText:N});try{this.state.viewType===y?await this._connectWithConnectionString():this.state.viewType===T&&await this._connectWithConnectionForm()}catch(e){d("connect error",e),this.setState({isValid:!1,errorMessage:e.message,syntaxErrorMessage:null})}finally{this.setState({currentConnectionAttempt:null})}},onDuplicateConnectionClicked(e){const t=new l;t.set(i(e,["_id","color"])),t.set({name:`${e.name} (copy)`,isFavorite:!0}),this._saveConnection(t)},onChangesDiscarded(){const e=this.state.connections[this.state.connectionModel._id];this.state.connectionModel.set(e),this.state.isURIEditable?this.state.customUrl=this.state.connectionModel.driverUrl:this.state.customUrl=this.state.connectionModel.safeUrl,this.state.hasUnsavedChanges=!1,this.trigger(this.state)},onHideURIClicked(){this.state.isURIEditable=!1,this.state.customUrl=this.state.connectionModel.safeUrl,this.trigger(this.state)},onCreateFavoriteClicked(e,t){this.state.connectionModel.color=t,this.state.connectionModel.name=e,this.state.isMessageVisible=!0,this._saveFavorite()},onCustomUrlChanged(e){this.state.errorMessage=null,this.state.syntaxErrorMessage=null,this.state.customUrl=e,this.trigger(this.state)},onDeleteConnectionClicked(e){const t=this.state.fetchedConnections.find((t=>t._id===e._id));t.destroy({success:()=>{this.state.fetchedConnections.remove(t._id),this.state.connections=this._removeFromCollection(e._id),e._id===this.state.connectionModel._id&&(this.state.connectionModel=new l),this.trigger(this.state)}})},onDeleteConnectionsClicked(){const e=Object.keys(this.state.connections).filter((e=>!this.state.connections[e].isFavorite)),t=e.length;let n=1;e.forEach((e=>{this.state.connections=this._removeFromCollection(e);const r=this.state.fetchedConnections.find((t=>t._id===e));r.destroy({success:()=>{this.state.fetchedConnections.remove(r._id),n===t&&this.trigger(this.state),n++}})}))},async onDisconnectClicked(){this.dataService&&(await this.dataService.disconnect(),this.appRegistry.emit("data-service-disconnected"),this.state.isValid=!0,this.state.isConnected=!1,this.state.errorMessage=null,this.state.syntaxErrorMessage=null,this.state.hasUnsavedChanges=!1,this._saveConnection(this.state.connectionModel),this.dataService=void 0)},onEditURICanceled(){this.state.isEditURIConfirm=!1,this.trigger(this.state)},onEditURIClicked(){this.state.isEditURIConfirm=!0,this.trigger(this.state)},onEditURIConfirmed(){this.state.isURIEditable=!0,this.state.customUrl=this.state.connectionModel.driverUrl,this.state.isEditURIConfirm=!1,this.trigger(this.state)},onExternalLinkClicked(e,t){if(_.indexOf("electron")>-1){const{shell:t}=r;t.openExternal(e)}else window.open(e,"_new");t&&this.appRegistry.emit(t)},onFavoriteNameChanged(e){this.state.connectionModel.name=e,this.trigger(this.state)},onConnectionSelected(e){this.state.connectionModel.set({name:"Local",color:void 0}),this.state.connectionModel.set(e),this.trigger(this.state),this.setState({isURIEditable:!1,isSavedConnection:!0,isValid:!0,isConnected:!1,errorMessage:null,syntaxErrorMessage:null,isHostChanged:!0,isPortChanged:!0,customUrl:this.state.connectionModel.safeUrl,hasUnsavedChanges:!1})},onConnectionSelectAndConnect(e){this.onConnectionSelected(e),this.onConnectClicked()},onHostnameChanged(e){this.state.connectionModel.hostname=e.trim(),this.state.isHostChanged=!0,e.match(/mongodb\.net/i)&&(this.state.connectionModel.sslMethod="SYSTEMCA"),this.trigger(this.state)},onKerberosPrincipalChanged(e){this.state.connectionModel.kerberosPrincipal=e,this.trigger(this.state)},onKerberosServiceNameChanged(e){this.state.connectionModel.kerberosServiceName=e,this.trigger(this.state)},onCnameToggle(e){this.state.connectionModel.kerberosCanonicalizeHostname=void 0!==e?e:!this.state.connectionModel.kerberosCanonicalizeHostname,this.trigger(this.state)},onLDAPUsernameChanged(e){this.state.connectionModel.ldapUsername=e,this.trigger(this.state)},onLDAPPasswordChanged(e){this.state.connectionModel.ldapPassword=e,this.trigger(this.state)},onPasswordChanged(e){this.state.connectionModel.mongodbPassword=e,this.trigger(this.state)},onPortChanged(e){this.state.connectionModel.port=e,this.state.isPortChanged=!0,this.trigger(this.state)},onReadPreferenceChanged(e){this.state.connectionModel.readPreference=e,this.trigger(this.state)},onReplicaSetChanged(e){this.state.connectionModel.replicaSet=e.trim(),this.trigger(this.state)},onResetConnectionClicked(){this.state.viewType=y,this.state.savedMessage="Saved to favorites",this.state.connectionModel=new l,this.state.isURIEditable=!0,this.state.isSavedConnection=!1,this._clearForm(),this.trigger(this.state)},onSaveAsFavoriteClicked(e){this.state.connectionModel.set(e),this.state.isMessageVisible=!0,this.state.connectionModel.isFavorite=!0,this.state.connectionModel.name=`${e.hostname}:${e.port}`,this.state.savedMessage="Saved to favorites",this._saveConnection(this.state.connectionModel)},onSaveFavoriteClicked(){this._saveFavorite()},onSSLCAChanged(e){this.state.connectionModel.sslCA=e,this.trigger(this.state)},onSSLCertificateChanged(e){this.state.connectionModel.sslCert=e,this.trigger(this.state)},onSSLMethodChanged(e){this._clearSSLFields(),this.state.connectionModel.sslMethod=e,this.trigger(this.state)},onSSLPrivateKeyChanged(e){this.state.connectionModel.sslKey=e,this.trigger(this.state)},onSSLPrivateKeyPasswordChanged(e){this.state.connectionModel.sslPass=e,this.trigger(this.state)},onSSHTunnelPasswordChanged(e){this.state.connectionModel.sshTunnelPassword=e,this.trigger(this.state)},onSSHTunnelPassphraseChanged(e){this.state.connectionModel.sshTunnelPassphrase=e,this.trigger(this.state)},onSSHTunnelHostnameChanged(e){this.state.connectionModel.sshTunnelHostname=e,this.trigger(this.state)},onSSHTunnelUsernameChanged(e){this.state.connectionModel.sshTunnelUsername=e,this.trigger(this.state)},onSSHTunnelPortChanged(e){this.state.connectionModel.sshTunnelPort=e,this.trigger(this.state)},onSSHTunnelIdentityFileChanged(e){this.state.connectionModel.sshTunnelIdentityFile=e,this.trigger(this.state)},onSSHTunnelChanged(e){this._clearSSHTunnelFields(),this.state.connectionModel.sshTunnel=e,this.trigger(this.state)},onSRVRecordToggled(e){this.state.connectionModel.isSrvRecord=void 0!==e?e:!this.state.connectionModel.isSrvRecord,this.trigger(this.state)},onUsernameChanged(e){this.state.connectionModel.mongodbUsername=e,this.trigger(this.state)},_saveConnection(e){this.state.connectionModel=e,this.state.fetchedConnections.add(e),this.state.connections[e._id]={...e._values},this.state.customUrl=e.safeUrl,this.trigger(this.state),e.save()},_clearAuthFields(){v.forEach((e=>{this.state.connectionModel[e]=void 0}))},_clearSSLFields(){C.forEach((e=>{this.state.connectionModel[e]=void 0}))},_clearSSHTunnelFields(){R.forEach((e=>{this.state.connectionModel[e]=void 0}))},_setSyntaxErrorMessage(e){this.state.isValid=!1,this.state.errorMessage=null,this.state.syntaxErrorMessage=e,this._clearConnection()},_resetSyntaxErrorMessage(){this.state.isValid=!0,this.state.errorMessage=null,this.state.syntaxErrorMessage=null,this.trigger(this.state)},_saveRecent(e){let t=Object.keys(this.state.connections).filter((e=>!this.state.connections[e].isFavorite));if(10===t.length){t=a(t,"lastUsed"),this.state.connections=this._removeFromCollection(t[9]);const n=this.state.fetchedConnections.find((e=>e._id===t[9]));if(!n)return;n.destroy({success:()=>{this.state.fetchedConnections.remove(n._id),this._saveConnection(e)}})}else this._saveConnection(e)},_onConnectSuccess(e,t){const n=this.state.connectionModel,r=this.state.connections[n._id];this.dataService=e,this.setState({isValid:!0,isConnected:!0,errorMessage:null,syntaxErrorMessage:null,hasUnsavedChanges:!1,isURIEditable:!1,customUrl:n.driverUrl}),n.lastUsed=new Date,r?this._saveConnection(n):this._saveRecent(n),this.appRegistry.emit("data-service-connected",null,e,t,n),S(t,this.dataService)},async _connect(e){if(!this.state.currentConnectionAttempt)return;let t;void 0===e.appname&&(e.appname=r.remote.app.getName());try{d("connecting with connection model",e),t=g(e);const n=await this.state.currentConnectionAttempt.connect(t.connectionOptions);if(!n||!this.state.currentConnectionAttempt)return;this._onConnectSuccess(n,t)}catch(e){A(t,e),d("_connect error",e),this.setState({isValid:!1,errorMessage:e.message,syntaxErrorMessage:null})}},async _connectWithConnectionForm(){const e=this.state.connectionModel;if(e.isValid())this.setState({connectingStatusText:`Connecting to ${u(g(e))}`}),await this._connect(e);else{const t=e.validate(e);this.setState({isValid:!1,errorMessage:t?t.message:"The required fields can not be empty"})}},async _connectWithConnectionString(){const e=this.state.connectionModel,t=this.state.isURIEditable?this.state.customUrl||"mongodb://localhost:27017/?readPreference=primary&ssl=false":this.state.connectionModel.driverUrl;if(!l.isURI(t))return void this._setSyntaxErrorMessage("Invalid schema, expected `mongodb` or `mongodb+srv`");let n;try{const e=c(l.from);n=await e(t)}catch(e){return d("buildConnectionModelFromUrl error",e),void this._setSyntaxErrorMessage(e.message)}const r=e.isFavorite,s=e.driverUrl;e&&"NONE"!==e.sshTunnel&&this._setSshTunnelAttributes(e,n),e&&"NONE"!==e.sslMethod&&this._setTlsAttributes(e,n),this.setState({connectingStatusText:`Connecting to ${n.title}`}),r&&s!==n.driverUrl?await this._connect(n):(e.set(this._getPoorAttributes(n)),await this._connect(e))},_clearConnection(){const e=this.state.connectionModel.isFavorite,t=this.state.connectionModel.name,n=this.state.connectionModel.color,r=new l;this.state.connectionModel.set(this._getPoorAttributes(r)),this.state.connectionModel.set({isFavorite:e,name:t,color:n}),this.trigger(this.state)},_clearForm(){this.state.isValid=!0,this.state.isConnected=!1,this.state.errorMessage=null,this.state.syntaxErrorMessage=null,this.state.customUrl="",this.state.hasUnsavedChanges=!1},async _onViewChangedToConnectionForm(){const e=this.state.connectionModel,t=e.driverUrl,n=this.state.isURIEditable?this.state.customUrl:t,r=this.state.connections[e._id];if(!r&&n===t)return this.state.isHostChanged=!0,this.state.isPortChanged=!0,void this.trigger(this.state);if(""===n)return this.state.isHostChanged=!1,this.state.isPortChanged=!1,this._clearForm(),void this._clearConnection();if(!l.isURI(n))return this._clearConnection(),void this.trigger(this.state);try{const t=c(l.from),s=await t(n);e.set(this._getPoorAttributes(s)),r&&("NONE"!==r.sshTunnel&&this._setSshTunnelAttributes(r,e),"NONE"!==r.sslMethod&&this._setTlsAttributes(r,e),e.name=r.name,e.color=r.color,e.lastUsed=r.lastUsed),this.state.isHostChanged=!0,this.state.isPortChanged=!0,this.setState({connectionModel:e}),this._resetSyntaxErrorMessage()}catch(e){this.state.connectionModel=new l,this.trigger(this.state)}},_onViewChangedToConnectionString(){const e=this.state.connectionModel.driverUrl,t=this.state.isValid;this.state.isURIEditable?!t||!0!==this.state.isHostChanged&&!0!==this.state.isPortChanged||(this.state.customUrl=e):this.state.customUrl=this.state.connectionModel.safeUrl,this.trigger(this.state)},async _saveFavorite(){const e=this.state.connectionModel,t=e.isFavorite;let n=this.state.customUrl;if(t&&(this.state.savedMessage="Favorite is updated"),this.state.isURIEditable||(n=e.driverUrl),e.isFavorite=!0,this.state.hasUnsavedChanges=!1,this.state.isURIEditable=!1,this.state.viewType===y)try{const t=c(l.from),r=await t(n);e.set(this._getPoorAttributes(r)),n.match(/[?&]ssl=true/i)&&(e.sslMethod="SYSTEMCA"),this._saveConnection(e)}catch(e){}else if(this.state.viewType===T){if(!e.isValid()){const t=e.validate(e);return void this.setState({isValid:!1,errorMessage:t?t.message:"The required fields can not be empty"})}this._saveConnection(e)}},_getPoorAttributes:e=>i(e.getAttributes({props:!0}),["_id","color","isFavorite","name"]),_removeFromCollection(e){return i(this.state.connections,[e])},_setSshTunnelAttributes(e,t){t&&(R.forEach((n=>{t[n]=e[n]})),t.sshTunnel=e.sshTunnel)},_setTlsAttributes(e,t){t&&(C.forEach((n=>{t[n]=e[n]})),t.sslMethod=e.sslMethod)}});e.exports=j,e.exports.EXTENSION=O},37861:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Document:()=>C,DocumentJsonView:()=>ne,DocumentList:()=>ct,DocumentListView:()=>J,InsertDocumentDialog:()=>Y,activate:()=>sn,configureActions:()=>yt,configureStore:()=>$t,deactivate:()=>an,default:()=>on,metadata:()=>Pt});var r=n(74727),s=n.n(r),a=n(2784),o=n(13980),i=n.n(o),l=(n(46106),n(50517)),p=n(76635),m=n(15251);const c="Blocked",u="Error",g="Viewing",d={Progress:"is-in-progress",Success:"is-success",Error:"is-error",Blocked:"is-error",Editing:"is-modified",Viewing:"is-viewing"};class h extends a.Component{constructor(e){super(e),this.state={mode:g,message:""},this.invalidElements=[],this.boundHandleUpdateBlocked=this.handleUpdateBlocked.bind(this),this.boundHandleUpdateError=this.handleUpdateError.bind(this),this.boundHandleUpdateSuccess=this.handleUpdateSuccess.bind(this),this.boundHandleCancel=this.handleCancel.bind(this)}componentDidMount(){this.unsubscribeModified=this.handleModification.bind(this),this.unsubscribeInvalid=this.handleInvalid.bind(this),this.unsubscribeValid=this.handleValid.bind(this),this.props.doc.on(r.Element.Events.Added,this.unsubscribeModified),this.props.doc.on(r.Element.Events.Edited,this.unsubscribeModified),this.props.doc.on(r.Element.Events.Removed,this.unsubscribeModified),this.props.doc.on(r.Element.Events.Reverted,this.unsubscribeModified),this.props.doc.on(r.Element.Events.Invalid,this.unsubscribeInvalid),this.props.doc.on(r.Element.Events.Valid,this.unsubscribeValid),this.props.doc.on("update-error",this.boundHandleUpdateError),this.props.doc.on("update-blocked",this.boundHandleUpdateBlocked),this.props.doc.on("update-success",this.boundHandleUpdateSuccess),this.handleModification()}componentDidUpdate(e){this.props.doc!==e.doc&&this.handleCancel(),this.props.editing===e.editing&&this.props.containsErrors===e.containsErrors&&this.props.modified===e.modified||this.handleModification()}componentWillUnmount(){this.props.doc.removeListener(r.Element.Events.Added,this.unsubscribeModified),this.props.doc.removeListener(r.Element.Events.Edited,this.unsubscribeModified),this.props.doc.removeListener(r.Element.Events.Removed,this.unsubscribeModified),this.props.doc.removeListener(r.Element.Events.Reverted,this.unsubscribeModified),this.props.doc.removeListener(r.Element.Events.Invalid,this.unsubscribeInvalid),this.props.doc.removeListener(r.Element.Events.Valid,this.unsubscribeValid),this.props.doc.removeListener("update-error",this.boundHandleUpdateError),this.props.doc.removeListener("update-blocked",this.boundHandleUpdateBlocked),this.props.doc.removeListener("update-success",this.boundHandleUpdateSuccess)}handleCancel(){this.props.cancelHandler?this.props.cancelHandler():(this.props.api&&this.props.api.stopEditing(),this.props.doc.cancel(),this.setState({mode:g,message:""}))}handleUpdateError(e){this.setState({mode:u,message:e})}handleUpdateSuccess(){this.setState({mode:"Success",message:"Document Updated."})}handleUpdateBlocked(){this.setState({mode:c,message:"Document was modified in the background or it longer exists. Do you wish to continue and possibly overwrite new changes?"})}handleValid(e){(0,p.pull)(this.invalidElements,e.uuid)}handleInvalid(e){this.invalidElements.includes(e.uuid)||(this.invalidElements.push(e.uuid),this.handleModification())}handleModification(){if(this.hasErrors())this.setState({mode:u,message:"Update not permitted while document contains errors."});else{const e=this.isModified();this.setState({mode:e?"Editing":g,message:e?"Document Modified.":""})}}handleUpdate(){const e=!this.props.updateDocument||this.state.mode===c;this.props.api&&this.props.api.stopEditing(),this.setState({mode:"Progress",message:"Updating Document."}),e?this.props.replaceDocument(this.props.doc):this.props.updateDocument(this.props.doc)}hasErrors(){return this.props.containsErrors??this.invalidElements.length>0}isModified(){return this.props.modified??this.props.doc.isModified()}style(){return`document-footer document-footer-${d[this.state.mode]}`}render(){return a.createElement("div",{className:this.style()},a.createElement("div",{"data-test-id":"document-message",className:"document-footer-message",title:this.state.message},this.state.message),a.createElement("div",{className:"document-footer-actions"},a.createElement(m.TextButton,{className:"btn btn-borderless btn-xs cancel",text:"Cancel",dataTestId:"cancel-document-button",clickHandler:this.boundHandleCancel}),a.createElement(m.TextButton,{className:"btn btn-default btn-xs",text:this.props.updateDocument?"Update":"Replace",disabled:this.hasErrors(),dataTestId:"update-document-button",clickHandler:this.handleUpdate.bind(this)})))}}h.displayName="DocumentFooter",h.propTypes={doc:i().object.isRequired,replaceDocument:i().func.isRequired,updateDocument:i().func,cancelHandler:i().func,api:i().any,editing:i().bool,modified:i().bool,containsErrors:i().bool};const T=h,y={Progress:"is-in-progress",Success:"is-success",Error:"is-error",Deleting:"is-error"};class f extends a.Component{constructor(e){super(e),this.state={mode:"Deleting",message:"Document Flagged For Deletion."},this.boundHandleRemoveError=this.handleRemoveError.bind(this),this.boundHandleRemoveSuccess=this.handleRemoveSuccess.bind(this)}componentDidMount(){this.props.doc.on("remove-error",this.boundHandleRemoveError),this.props.doc.on("remove-success",this.boundHandleRemoveSuccess)}componentWillUnmount(){this.props.doc.removeListener("remove-error",this.boundHandleRemoveError),this.props.doc.removeListener("remove-success",this.boundHandleRemoveSuccess)}handleRemoveError(e){this.setState({mode:"Error",message:e})}handleRemove(){this.props.api&&this.props.api.stopEditing(),this.setState({mode:"Progress",message:"Deleting Document."}),this.props.removeDocument(this.props.doc)}handleRemoveSuccess(){this.setState({mode:"Success",message:"Document Deleted."})}style(){return`document-footer document-footer-${y[this.state.mode]}`}render(){return a.createElement("div",{className:this.style()},a.createElement("div",{className:"document-footer-message","data-test-id":"document-message",title:this.state.message},this.state.message),a.createElement("div",{className:"document-footer-actions"},a.createElement(m.TextButton,{className:"btn btn-borderless btn-xs cancel",text:"Cancel",dataTestId:"cancel-document-button",clickHandler:this.props.cancelHandler}),a.createElement(m.TextButton,{className:"btn btn-default btn-xs error",text:"Delete",dataTestId:"confirm-delete-document-button",clickHandler:this.handleRemove.bind(this)})))}}f.displayName="RemoveDocumentFooter",f.propTypes={doc:i().object.isRequired,removeDocument:i().func.isRequired,cancelHandler:i().func.isRequired,api:i().any};const b=f,S="document",A=`${S}-contents`,E=`${S}-elements`;class _ extends a.Component{constructor(e){super(e),this.state={renderSize:25,editing:!1,deleting:!1,deleteFinished:!1,expandAll:!1},this.boundHandleCancel=this.handleCancel.bind(this),this.boundHandleUpdateSuccess=this.handleUpdateSuccess.bind(this),this.boundHandleRemoveSuccess=this.handleRemoveSuccess.bind(this)}componentDidMount(){this.subscribeToDocumentEvents(this.props.doc)}componentDidUpdate(e){e.doc!==this.props.doc&&(this.unsubscribeFromDocumentEvents(e.doc),this.subscribeToDocumentEvents(this.props.doc),(this.state.editing||this.state.deleting)&&setImmediate((()=>{this.setState({editing:!1,deleting:!1})})))}componentWillUnmount(){this.unsubscribeFromDocumentEvents(this.props.doc)}setRenderSize(e){this.setState({renderSize:e})}subscribeToDocumentEvents(e){e.on(s().Events.Cancel,this.boundHandleCancel),e.on("remove-success",this.boundHandleRemoveSuccess),e.on("update-success",this.boundHandleUpdateSuccess)}unsubscribeFromDocumentEvents(e){e.removeListener(s().Events.Cancel,this.boundHandleCancel),e.removeListener("remove-success",this.boundHandleRemoveSuccess),e.removeListener("update-success",this.boundHandleUpdateSuccess)}handleUpdateSuccess(){this.state.editing&&setTimeout((()=>{this.setState({editing:!1,renderSize:25})}),500)}handleRemoveSuccess(){this.state.deleting&&setTimeout((()=>{this.setState({deleting:!1,deleteFinished:!0})}),500)}handleCancel(){this.setState({editing:!1,renderSize:25})}handleCopy(){this.props.copyToClipboard(this.props.doc)}handleClone(){this.props.openInsertDocumentDialog(this.props.doc.generateObject(),!0)}handleDelete(){this.setState({deleting:!0,editing:!1,renderSize:25})}handleCancelRemove(){this.setState({deleting:!1,deleteFinished:!1})}handleEdit(){this.setState({editing:!0})}handleExpandAll(){this.setState({expandAll:!this.state.expandAll})}style(){let e=S;return this.state.editing&&(e=e.concat(" document-is-editing")),this.state.deleting&&!this.state.deleteFinished&&(e=e.concat(" document-is-deleting")),e}renderActions(){if(!this.state.editing&&!this.state.deleting)return a.createElement(l.DocumentList.DocumentActionsGroup,{onEdit:this.handleEdit.bind(this),onCopy:this.handleCopy.bind(this),onRemove:this.handleDelete.bind(this),onClone:this.handleClone.bind(this),onExpand:this.handleExpandAll.bind(this),expanded:this.state.expandAll})}renderElements(){return a.createElement(l.DocumentList.Document,{value:this.props.doc,visibleFieldsCount:this.state.renderSize,expanded:this.state.expandAll,editable:!0,editing:this.state.editing,onEditStart:this.handleEdit.bind(this)})}renderExpansion(){return a.createElement(l.DocumentList.DocumentFieldsToggleGroup,{showHideButton:!this.state.editing,currentSize:this.state.renderSize,totalSize:this.props.doc.elements.size,minSize:25,step:this.state.editing?100:1e3,onSizeChange:this.setRenderSize.bind(this)})}renderFooter(){return this.state.editing?a.createElement(T,{doc:this.props.doc,replaceDocument:this.props.replaceDocument,updateDocument:this.props.updateDocument}):this.state.deleting?a.createElement(b,{doc:this.props.doc,removeDocument:this.props.removeDocument,cancelHandler:this.handleCancelRemove.bind(this)}):void 0}render(){return a.createElement("div",{className:this.style(),"data-test-id":"editable-document"},a.createElement("div",{className:A},a.createElement("div",{className:E},this.renderElements()),this.renderExpansion(),this.renderActions()),this.renderFooter())}}_.displayName="EditableDocument",_.propTypes={doc:i().object.isRequired,editable:i().bool,removeDocument:i().func.isRequired,replaceDocument:i().func.isRequired,updateDocument:i().func.isRequired,openInsertDocumentDialog:i().func.isRequired,copyToClipboard:i().func.isRequired};const x=_;class I extends a.Component{state={renderSize:25};setRenderSize(e){this.setState({renderSize:e})}handleClone=()=>{this.props.openInsertDocumentDialog(this.props.doc.generateObject(),!0)};handleCopy=()=>{this.props.copyToClipboard(this.props.doc)};renderElements(){return a.createElement(l.DocumentList.Document,{value:this.props.doc,expanded:this.state.expandAll,visibleFieldsCount:this.state.renderSize})}renderExpansion(){return a.createElement(l.DocumentList.DocumentFieldsToggleGroup,{currentSize:this.state.renderSize,totalSize:this.props.doc.elements.size,minSize:25,onSizeChange:this.setRenderSize.bind(this)})}renderActions(){return a.createElement(l.DocumentList.DocumentActionsGroup,{onCopy:this.props.copyToClipboard?this.handleCopy:void 0,onClone:this.props.openInsertDocumentDialog?this.handleClone:void 0})}render(){return a.createElement("div",{className:"document","data-test-id":"readonly-document"},a.createElement("div",{className:"document-contents"},this.renderElements(),this.renderExpansion(),this.renderActions()))}}I.displayName="ReadonlyDocument",I.propTypes={copyToClipboard:i().func,doc:i().object.isRequired,expandAll:i().bool,openInsertDocumentDialog:i().func,tz:i().string};const L=I;class v extends a.Component{render(){return this.props.editable&&this.props.isTimeSeries?a.createElement(L,{doc:this.props.doc,copyToClipboard:this.props.copyToClipboard,openInsertDocumentDialog:this.props.openInsertDocumentDialog}):this.props.editable?a.createElement(x,this.props):a.createElement(L,{doc:this.props.doc,copyToClipboard:this.props.copyToClipboard})}}v.displayName="Document",v.propTypes={doc:i().object.isRequired,editable:i().bool,isTimeSeries:i().bool,removeDocument:i().func,replaceDocument:i().func,updateDocument:i().func,openInsertDocumentDialog:i().func,copyToClipboard:i().func};const C=v;var R=n(24179),O=n(70602),N=n(39551),j=n.n(N),w=n(72779),D=n.n(w),B=(n(95095),n(21291));n(59910),n(59047),n(75790),n(8170);const M="/** \n* Paste one or more documents here\n*/\n",$={tabSize:2,fontSize:11,minLines:2,maxLines:1/0,showGutter:!0,readOnly:!1,highlightActiveLine:!0,highlightGutterLine:!0,useWorker:!1};class k extends a.Component{componentDidMount(){if(""!==this.props.jsonDoc){let e=this.props.jsonDoc;this.props.isCommentNeeded&&(e=`${M}${e}`),this.editor.setValue(e)}}shouldComponentUpdate(e){return e.jsonDoc!==this.props.jsonDoc}onChange(e){this.props.updateComment(e.includes(M)),this.props.updateJsonDoc(e.split("*/\n").pop())}render(){let e=this.props.jsonDoc;return this.props.isCommentNeeded&&(e=`${M}${this.props.jsonDoc}`),a.createElement("div",{className:D()("insert-json-document-module-editor__a90Xy")},a.createElement(B.default,{mode:"json",defaultValue:M,value:e,onChange:this.onChange.bind(this),theme:"mongodb",width:"100%",editorProps:{$blockScrolling:1/0},setOptions:$,onLoad:e=>{this.editor=e}}))}}k.displayName="InsertJsonDocumentComponent",k.propTypes={updateJsonDoc:i().func,jsonDoc:i().string,isCommentNeeded:i().bool,updateComment:i().func};const P=k;class F extends a.PureComponent{render(){return a.createElement("div",{className:"document","data-test-id":"insert-document-modal"},a.createElement(l.DocumentList.Document,{value:this.props.doc,editable:!0,editing:!0}))}}F.displayName="InsertDocument",F.propTypes={doc:i().object.isRequired,version:i().string.isRequired,tz:i().string};const U=F,q="document-footer",G=`${q}-message`,H={progress:"is-in-progress",error:"is-error",modifying:"is-modifying"},V=e=>a.createElement("div",{className:`${q} ${q}-${H[e.mode]}`},a.createElement("div",{className:G,title:e.message},e.message));V.displayName="InsertDocumentFooter",V.propTypes={message:i().string.isRequired,mode:i().string.isRequired};const K=V;class W extends a.PureComponent{constructor(e){super(e),this.state={message:this.props.message,mode:this.props.mode},this.unsubscribeInvalid=this.handleInvalid.bind(this),this.unsubscribeValid=this.handleValid.bind(this),this.invalidElements=[]}componentWillReceiveProps(e){this.hasManyDocuments()||(e.isOpen&&this.props.jsonView&&!e.jsonView?(this.invalidElements=[],e.doc.on(r.Element.Events.Invalid,this.unsubscribeInvalid),e.doc.on(r.Element.Events.Valid,this.unsubscribeValid)):(!e.isOpen&&this.props.isOpen&&!this.props.jsonView||e.isOpen&&this.props.isOpen&&!this.props.jsonView&&e.jsonView)&&(this.props.doc.removeListener(r.Element.Events.Invalid,this.unsubscribeInvalid),this.props.doc.removeListener(r.Element.Events.Valid,this.unsubscribeValid))),this.setState({message:e.message,mode:e.mode})}handleValid(e){this.hasErrors()&&((0,p.pull)(this.invalidElements,e.uuid),this.forceUpdate())}handleInvalid(e){this.invalidElements.includes(e.uuid)||(this.invalidElements.push(e.uuid),this.forceUpdate())}handleInsert(){this.setState({message:"Inserting Document",mode:"progress"}),this.hasManyDocuments()?this.props.insertMany():this.props.insertDocument()}switchInsertDocumentView(e){this.hasManyDocuments()?this.props.toggleInsertDocumentView(e):this.props.toggleInsertDocument(e)}hasErrors(){return this.props.jsonView?!!j()(this.props.jsonDoc).err:this.invalidElements.length>0}hasManyDocuments(){const e=j()(this.props.jsonDoc).value;return Array.isArray(e)}renderDocument(){if(this.props.doc)return a.createElement(U,{doc:this.props.doc,version:this.props.version,tz:this.props.tz})}renderDocumentOrJsonView(){return this.props.jsonView?a.createElement(P,{updateJsonDoc:this.props.updateJsonDoc,jsonDoc:this.props.jsonDoc,isCommentNeeded:this.props.isCommentNeeded,updateComment:this.props.updateComment}):this.hasManyDocuments()?a.createElement("div",{className:"view-not-supported"},a.createElement("p",null,"This view is not supported for multiple documents. To specify data types and use other functionality of this view, please insert documents one at a time.")):this.renderDocument()}render(){const e=this.props.jsonView?"JSON":"List";return a.createElement(l.ConfirmationModal,{title:`Insert to Collection ${this.props.ns}`,className:"insert-document-dialog",open:this.props.isOpen,onConfirm:this.handleInsert.bind(this),onCancel:this.props.closeInsertDocumentDialog,buttonText:"Insert",submitDisabled:this.hasErrors(),trackingId:"insert_document_modal"},a.createElement("div",{className:"insert-document-views"},a.createElement(O.ViewSwitcher,{dataTestId:"insert-document-dialog-view",label:"View",buttonLabels:["JSON","List"],showLabels:!1,iconClassNames:["curly-bracket","fa fa-list-ul"],activeButton:e,disabled:this.hasErrors(),onClick:this.switchInsertDocumentView.bind(this)})),this.renderDocumentOrJsonView(),a.createElement(K,{message:this.hasErrors()?"Insert not permitted while document contains errors.":this.state.message,mode:this.hasErrors()?"error":this.state.mode}))}}W.displayName="InsertDocumentDialog",W.propTypes={closeInsertDocumentDialog:i().func.isRequired,toggleInsertDocumentView:i().func.isRequired,toggleInsertDocument:i().func.isRequired,insertDocument:i().func.isRequired,insertMany:i().func.isRequired,isOpen:i().bool.isRequired,message:i().string.isRequired,mode:i().string.isRequired,version:i().string.isRequired,updateJsonDoc:i().func.isRequired,jsonDoc:i().string,jsonView:i().bool,doc:i().object,ns:i().string,tz:i().string,isCommentNeeded:i().bool,updateComment:i().func.isRequired};const Y=W;class z extends a.PureComponent{static displayName="ZeroGraphic";render(){return a.createElement("svg",{className:"document-list-zero-state-graphic",xmlns:"http://www.w3.org/2000/svg",width:"38",height:"48",viewBox:"0 0 38 48"},a.createElement("g",{fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",transform:"translate(1 1)"},a.createElement("polyline",{stroke:"#116149",points:"30 .002 30 6.002 36 6.002"}),a.createElement("polyline",{stroke:"#116149",points:"30 26.002 30 32.002 36 32.002"}),a.createElement("line",{y1:".002",y2:"2.002",stroke:"#116149"}),a.createElement("line",{y1:"12.002",y2:"14.002",stroke:"#116149"}),a.createElement("polyline",{stroke:"#116149",points:"0 6.002 0 8.002 2 8.002"}),a.createElement("line",{y1:"18.002",y2:"20.002",stroke:"#116149"}),a.createElement("line",{y1:"24.002",y2:"26.002",stroke:"#116149"}),a.createElement("line",{y1:"30.002",y2:"32.002",stroke:"#116149"}),a.createElement("polyline",{stroke:"#116149",points:"0 36.002 0 38.002 2 38.002"}),a.createElement("line",{x1:"6",x2:"8",y1:"8.002",y2:"8.002",stroke:"#116149"}),a.createElement("line",{x1:"12",x2:"14",y1:"8.002",y2:"8.002",stroke:"#116149"}),a.createElement("line",{x1:"18",x2:"20",y1:"8.002",y2:"8.002",stroke:"#116149"}),a.createElement("line",{x1:"6",x2:"8",y1:"38.002",y2:"38.002",stroke:"#116149"}),a.createElement("line",{x1:"12",x2:"14",y1:"38.002",y2:"38.002",stroke:"#116149"}),a.createElement("line",{x1:"18",x2:"20",y1:"38.002",y2:"38.002",stroke:"#116149"}),a.createElement("polygon",{stroke:"#16CC62",points:"36 20.002 20 20.002 20 .002 30 .002 36 6.002"}),a.createElement("polygon",{stroke:"#16CC62",points:"36 46.002 20 46.002 20 26.002 30 26.002 36 32.002"})))}}const Z=z;class X extends a.Component{renderDocuments(){return this.props.docs.map((e=>a.createElement("li",{className:"document-list-item","data-test-id":"document-list-item",key:e.uuid},a.createElement(C,{key:e.uuid,doc:e,editable:this.props.isEditable,isTimeSeries:this.props.isTimeSeries,copyToClipboard:this.props.copyToClipboard,removeDocument:this.props.removeDocument,replaceDocument:this.props.replaceDocument,updateDocument:this.props.updateDocument,openInsertDocumentDialog:this.props.openInsertDocumentDialog}))))}render(){return a.createElement("ol",{className:"document-list"},this.renderDocuments())}}X.propTypes={docs:i().array.isRequired,isEditable:i().bool,isTimeSeries:i().bool,removeDocument:i().func,replaceDocument:i().func,updateDocument:i().func,openInsertDocumentDialog:i().func,copyToClipboard:i().func},X.displayName="DocumentListView";const J=X;class Q extends a.Component{constructor(e){super(e);const t=this._getObjectAsString();this.state={editing:!1,deleting:!1,deleteFinished:!1,containsErrors:!1,value:t,initialValue:t},this.boundHandleCancel=this.handleCancel.bind(this),this.boundHandleUpdateSuccess=this.handleUpdateSuccess.bind(this),this.boundHandleRemoveSuccess=this.handleRemoveSuccess.bind(this)}componentDidMount(){this.subscribeToDocumentEvents(this.props.doc),this.editor.getSession().foldAll(2)}componentDidUpdate(e,t){if(this.props.doc!==e.doc){this.unsubscribeFromDocumentEvents(e.doc),this.subscribeToDocumentEvents(this.props.doc);const t=this._getObjectAsString();this.setState({editing:!1,deleting:!1,value:t,initialValue:t})}t.editing!==this.state.editing&&!1===this.state.editing&&this.editor.getSession().foldAll(2)}componentWillUnmount(){this.unsubscribeFromDocumentEvents(this.props.doc)}_getObjectAsString(){return R.EJSON.stringify(this.props.doc.generateObject(),null,2)}subscribeToDocumentEvents(e){e.on("remove-success",this.boundHandleRemoveSuccess),e.on("update-success",this.boundHandleUpdateSuccess)}unsubscribeFromDocumentEvents(e){e.removeListener("remove-success",this.boundHandleRemoveSuccess),e.removeListener("update-success",this.boundHandleUpdateSuccess)}handleUpdateSuccess(){this.state.editing&&setTimeout((()=>{this.setState({editing:!1})}),500)}handleRemoveSuccess(){this.state.deleting&&setTimeout((()=>{this.setState({deleting:!1,deleteFinished:!0})}),500)}handleCancel(){this.setState({editing:!1,deleting:!1,value:this._getObjectAsString()})}handleCopy(){this.props.copyToClipboard(this.props.doc)}handleClone(){this.props.openInsertDocumentDialog(this.props.doc.generateObject(),!0)}handleDelete(){this.setState({deleting:!0,editing:!1})}handleCancelRemove(){this.setState({deleting:!1,deleteFinished:!1})}handleEdit(){this.setState({editing:!0})}handleOnChange(e){this.setState({value:e,containsErrors:!!j()(e).err})}jsonStyle(){let e="json";return this.state.editing&&(e=e.concat(" json-document-is-editing")),this.state.deleting&&!this.state.deleteFinished&&(e=e.concat(" json-document-is-deleting")),e}renderActions(){if(this.props.editable&&!this.state.editing&&!this.state.deleting)return a.createElement(l.DocumentList.DocumentActionsGroup,{onEdit:!this.props.isTimeSeries&&this.handleEdit.bind(this),onCopy:this.handleCopy.bind(this),onRemove:!this.props.isTimeSeries&&this.handleDelete.bind(this),onClone:this.handleClone.bind(this)})}renderJson(){const e={tabSize:2,fontSize:11,minLines:2,maxLines:1/0,showGutter:!0,readOnly:!this.state.editing,highlightActiveLine:!1,highlightGutterLine:!1,showLineNumbers:this.state.editing,vScrollBarAlwaysVisible:!1,hScrollBarAlwaysVisible:!1,fixedWidthGutter:!1,showPrintMargin:!1,displayIndentGuides:!1,wrapBehavioursEnabled:!0,foldStyle:"markbegin",useWorker:!1};return a.createElement("div",{className:"json-ace-editor"},a.createElement(B.default,{mode:"json",value:this.state.value,theme:"mongodb",width:"100%",editorProps:{$blockScrolling:1/0},onChange:this.handleOnChange.bind(this),setOptions:e,onLoad:e=>{this.editor=e}}))}renderFooter(){return this.state.editing?a.createElement(T,{doc:this.props.doc,replaceDocument:()=>{this.props.doc.apply(R.EJSON.parse(this.state.value)),this.props.replaceDocument(this.props.doc)},cancelHandler:this.handleCancel.bind(this),editing:this.state.editing,modified:this.state.value!==this.state.initialValue,containsErrors:this.state.containsErrors}):this.state.deleting?a.createElement(b,{doc:this.props.doc,removeDocument:this.props.removeDocument,cancelHandler:this.handleCancelRemove.bind(this)}):void 0}render(){return a.createElement("div",{className:this.jsonStyle(),"data-test-id":"editable-json"},a.createElement("div",{className:"json-contents"},this.renderJson(),this.renderActions()),this.renderFooter())}}Q.displayName="EditableJson",Q.propTypes={doc:i().object.isRequired,editable:i().bool,isTimeSeries:i().bool,removeDocument:i().func.isRequired,replaceDocument:i().func.isRequired,updateDocument:i().func.isRequired,openInsertDocumentDialog:i().func.isRequired,copyToClipboard:i().func.isRequired};const ee=Q;class te extends a.Component{renderDocuments(){return this.props.docs.map(((e,t)=>a.createElement("li",{className:"document-json-item","data-test-id":"document-json-item",key:t},a.createElement(ee,{key:e.uuid,doc:e,editable:this.props.isEditable,isTimeSeries:this.props.isTimeSeries,copyToClipboard:this.props.copyToClipboard,removeDocument:this.props.removeDocument,replaceDocument:this.props.replaceDocument,updateDocument:this.props.updateDocument,openInsertDocumentDialog:this.props.openInsertDocumentDialog}))))}render(){return a.createElement("ol",{className:"document-json"},this.renderDocuments())}}te.propTypes={docs:i().array.isRequired,isEditable:i().bool,isTimeSeries:i().bool,removeDocument:i().func,replaceDocument:i().func,updateDocument:i().func,openInsertDocumentDialog:i().func,copyToClipboard:i().func},te.displayName="DocumentJsonView";const ne=te;var re=n(32819),se=n(84935),ae=n.n(se),oe=n(12170),ie=n.n(oe);const le="ag-header-breadcrumb",pe={Array:"[ ]",Object:"{ }"};class me extends a.PureComponent{constructor(e){super(e),this.onTabClicked=this.onTabClicked.bind(this)}onTabClicked(e){this.props.pathChanged(this.props.path.slice(0,e+1),this.props.types.slice(0,e+1))}onHomeClicked(){this.props.pathChanged([],[])}getPathClassName(e){return e===this.props.path.length-1?`${le}-tab ${le}-tab-active`:`${le}-tab`}render(){return a.createElement("div",{className:`${le}-container`},a.createElement("div",{onClick:this.onHomeClicked.bind(this),className:`${le}-tab`},a.createElement(ie(),{name:"home",className:`${le}-home-icon`}),this.props.collection),this.props.path.map(((e,t)=>{let n="";return"number"==typeof e&&t>0&&(n=this.props.path[t-1]+"."),n=n.concat(e),a.createElement("span",{key:t,onClick:()=>this.onTabClicked(t),className:this.getPathClassName(t)},n," ",pe[this.props.types[t]])})))}}me.propTypes={collection:i().string.isRequired,pathChanged:i().func.isRequired,path:i().array.isRequired,types:i().array.isRequired},me.defaultPropTypes={collection:""},me.displayName="BreadcrumbComponent";const ce=me,ue="editable-element",ge="editable-element-value",de=`${ge}-is-invalid-type`;class he extends a.Component{constructor(e){if(super(e),this.isEmpty=void 0===e.value||null===e.value,this.isDeleted=!1,this.element=e.value,this.editable=!0,e.context.path.length>0&&"$_id"!==e.column.getColId()){const t=e.node.data.hadronDocument.getChild(e.context.path);if(!t||e.parentType&&t.currentType!==e.parentType)this.editable=!1;else if("Array"===t.currentType){let n=0;t.elements.lastElement&&(n=t.elements.lastElement.currentKey+1),e.column.getColId()>n&&(this.editable=!1)}}}componentDidMount(){this.isEmpty||this.subscribeElementEvents()}componentWillUnmount(){this.isEmpty||this.unsubscribeElementEvents()}subscribeElementEvents(){this.unsubscribeAdded=this.handleElementEvent.bind(this),this.unsubscribeConverted=this.handleElementEvent.bind(this),this.unsubscribeEdited=this.handleElementEvent.bind(this),this.unsubscribeReverted=this.handleElementEvent.bind(this),this.element.on(r.Element.Events.Added,this.unsubscribeAdded),this.element.on(r.Element.Events.Converted,this.unsubscribeConverted),this.element.on(r.Element.Events.Edited,this.unsubscribeEdited),this.element.on(r.Element.Events.Reverted,this.unsubscribeReverted)}unsubscribeElementEvents(){this.element.removeListener(r.Element.Events.Added,this.unsubscribeAdded),this.element.removeListener(r.Element.Events.Converted,this.unsubscribeConverted),this.element.removeListener(r.Element.Events.Edited,this.unsubscribeEdited),this.element.removeListener(r.Element.Events.Reverted,this.unsubscribeReverted)}handleElementEvent(){this.forceUpdate()}handleUndo(e){e.stopPropagation();const t=this.props.node.data.hadronDocument.getStringId();if(this.element.isAdded()){this.isDeleted=!0;const e=!this.element.parent.isRoot()&&"Array"===this.element.parent.currentType;this.props.elementRemoved(this.element.currentKey,t,e)}else this.element.isRemoved()?this.props.elementAdded(this.element.currentKey,this.element.currentType,t):this.props.elementTypeChanged(this.element.currentKey,this.element.type,t);this.element.revert()}handleDrillDown(e){e.stopPropagation(),this.props.drillDown(this.props.node.data.hadronDocument,this.element)}handleClicked(){"editing"===this.props.node.data.state&&this.props.api.startEditingCell({rowIndex:this.props.node.rowIndex,colKey:this.props.column.getColId()})}refresh(){return!0}renderInvalidCell(){let e=`${ge}-is-${this.element.currentType.toLowerCase()}`;return e=`${e} ${de}`,a.createElement("div",{className:e},this.element.currentValue)}getLength(){return"Object"===this.element.currentType?Object.keys(this.element.generateObject()).length:"Array"===this.element.currentType?this.element.elements.size:void 0}renderValidCell(){let e=ue,t="";return this.element.isAdded()?e=`${e} ${ue}-is-added`:this.element.isEdited()&&(e=`${e} ${ue}-is-edited`),t="Object"===this.element.currentType?`{} ${this.getLength()} fields`:"Array"===this.element.currentType?`[] ${this.getLength()} elements`:a.createElement(l.BSONValue,{type:this.props.value.currentType,value:this.props.value.currentValue}),a.createElement("div",{className:e},t)}renderUndo(e,t){let n="table-view-cell-circle-button";return e&&t&&(n=`${n} ${n}-left`),e?a.createElement("div",{className:`${n}`,onClick:this.handleUndo.bind(this)},a.createElement("span",{className:"fa fa-rotate-left","aria-hidden":!0})):null}renderExpand(e){return e?a.createElement("div",{className:"table-view-cell-circle-button",onClick:this.handleDrillDown.bind(this)},a.createElement("span",{className:"fa fa-expand","aria-hidden":!0})):null}render(){let e,t="table-view-cell",n=!1,r=!1;return this.editable?this.isEmpty||this.isDeleted?(e="No field",t=`${t}-is-empty`):this.element.isCurrentTypeValid()?this.element.isRemoved()?(e="Deleted field",t=`${t}-is-deleted`,n=!0):(e=this.renderValidCell(),this.element.isAdded()?(t=`${t}-is-added`,n=!0):this.element.isModified()&&(t=`${t}-is-edited`,n=!0),r="Object"===this.element.currentType||"Array"===this.element.currentType):(e=this.renderInvalidCell(),t=`${t}-is-invalid`,n=!0):(e="",t=`${t}-is-uneditable`),a.createElement("div",{className:t,onClick:this.handleClicked.bind(this)},this.renderUndo(n,r),this.renderExpand(r),e)}}he.propTypes={api:i().any,value:i().any,node:i().any,column:i().any,context:i().any,parentType:i().any.isRequired,elementAdded:i().func.isRequired,elementRemoved:i().func.isRequired,elementTypeChanged:i().func.isRequired,drillDown:i().func.isRequired,tz:i().string.isRequired},he.displayName="CellRenderer";const Te=he;class ye extends a.Component{refresh(){return!0}render(){return a.createElement("div",{className:"table-view-cell-row-number"},this.props.value)}}ye.propTypes={value:i().any},ye.displayName="RowNumberRenderer";const fe=ye;class be extends a.Component{constructor(e){super(e),this.doc=e.data.hadronDocument,this.state={mode:e.data.state},this.boundHandleUpdateSuccess=this.handleUpdateSuccess.bind(this),this.boundHandleRemoveSuccess=this.handleRemoveSuccess.bind(this)}componentDidMount(){this.doc.on("remove-success",this.boundHandleRemoveSuccess),this.doc.on("update-success",this.boundHandleUpdateSuccess)}componentWillUnmount(){this.doc.removeListener("remove-success",this.boundHandleRemoveSuccess),this.doc.removeListener("update-success",this.boundHandleUpdateSuccess)}handleUpdateSuccess(e){let t=e;if(this.props.context.path.length)for(let e=0;e<this.props.context.path.length;e++)t=t[this.props.context.path[e]];this.props.replaceDoc(this.doc.getStringId(),""+e._id,t),this.props.context.handleUpdate(e)}handleRemoveSuccess(){this.props.context.handleRemove(this.props.node)}handleCancelRemove(){this.props.api.stopEditing(),this.props.context.removeFooter(this.props.node)}handleCancelUpdate(){this.props.api.stopEditing();const e=this.doc.getStringId();let t=this.doc;if(this.props.context.path.length&&(t=this.doc.getChild(this.props.context.path)),this.doc.cancel(),this.props.context.removeFooter(this.props.node),t){let n=t.generateObject();this.props.context.path.length&&null===t.elements&&(n={}),this.props.replaceDoc(e,e,n),this.props.cleanCols()}}refresh(){return!0}render(){return"editing"===this.state.mode?a.createElement(T,{doc:this.doc,replaceDocument:this.props.replaceDocument,updateDocument:this.props.updateDocument,cancelHandler:this.handleCancelUpdate.bind(this),api:this.props.api}):"deleting"===this.state.mode?a.createElement(b,{doc:this.doc,removeDocument:this.props.removeDocument,cancelHandler:this.handleCancelRemove.bind(this),api:this.props.api}):void 0}}be.propTypes={api:i().any,data:i().any,context:i().any,node:i().any,updateDocument:i().func.isRequired,removeDocument:i().func.isRequired,replaceDocument:i().func.isRequired,replaceDoc:i().func.isRequired,cleanCols:i().func.isRequired},be.displayName="FullWidthCellRenderer";const Se=be;class Ae extends a.Component{constructor(e){super(e)}handleEdit(){this.props.context.addFooter(this.props.node,this.props.data,"editing")}handleRemove(){this.props.context.addFooter(this.props.node,this.props.data,"deleting")}handleClone(){this.props.context.handleClone(this.props.data)}handleCopy(){this.props.copyToClipboard(this.props.data.hadronDocument)}refresh(){return!0}renderTopLevelActions(){if(!this.props.nested)return a.createElement("div",null,a.createElement(m.IconButton,{title:"Copy Document",className:"table-view-row-actions-panel-button btn btn-default btn-xs document-actions-button-copy",iconClassName:"table-view-row-actions-button-icon fa fa-copy",clickHandler:this.handleCopy.bind(this)}),a.createElement(m.IconButton,{title:"Clone Document",className:"table-view-row-actions-panel-button btn btn-default btn-xs",iconClassName:"table-view-row-actions-button-icon fa fa-clone",clickHandler:this.handleClone.bind(this)}),a.createElement(m.IconButton,{title:"Delete Document",className:"table-view-row-actions-panel-button btn btn-default btn-xs",iconClassName:"table-view-row-actions-button-icon fa fa-trash-o",clickHandler:this.handleRemove.bind(this)}))}render(){return"editing"!==this.props.value.state&&"deleting"!==this.props.value.state&&this.props.isEditable?a.createElement("div",{className:"table-view-row-actions"},a.createElement("div",{className:"table-view-row-actions-panel"},a.createElement(m.IconButton,{title:"Edit Document",className:"table-view-row-actions-panel-button btn btn-default btn-xs",iconClassName:"table-view-row-actions-button-icon fa fa-pencil",clickHandler:this.handleEdit.bind(this)}),this.renderTopLevelActions())):null}}Ae.propTypes={api:i().any,value:i().any,node:i().any,context:i().any,data:i().any,nested:i().bool,isEditable:i().bool.isRequired,copyToClipboard:i().func.isRequired},Ae.displayName="RowActionsRenderer";const Ee=Ae;class _e extends a.Component{constructor(e){super(e)}refresh(){return!0}render(){if(this.props.hide)return null;let e=this.props.displayName;return"$new"===this.props.displayName&&(e="New Field"),a.createElement("div",{className:D()("table-view-cell-header",{"table-view-cell-header-subtable-objectid":!0===this.props.subtable})},a.createElement("b",null,e)," ",this.props.bsonType)}}_e.propTypes={displayName:i().any,bsonType:i().string,hide:i().bool,subtable:i().bool},_e.displayName="HeaderCellRenderer";const xe=_e;var Ie=n(28316),Le=n(38875),ve=n.n(Le);const{DateEditor:Ce}=r.ElementEditor;class Re extends a.Component{constructor(e){super(e),this.state={isOpen:!1},this.element=e.element,this.className=e.className?e.className:"editable-element"}getClassName(){let e=`${this.className}-types dropdown`;return this.element.currentType!==this.element.type&&(e=`${e} editable-element-types-is-edited`),this.state.isOpen?`${e} open`:`${e} closed`}castableValue(){return this.element.generateObject()}handleTypeChange(e){const t=e.target.innerText||e.target.textContent;if("Object"===t)this.element.edit("{"),this.element.next();else if("Array"===t)this.element.edit("["),this.element.next();else try{if("Date"===t){const e=new Ce(this.element);e.edit(this.castableValue()),e.complete()}else{const e=ve().cast(this.castableValue(),t);this.element.edit(e)}}catch(e){this.element.setInvalid(this.element.currentValue,t,e.message)}}isHighPrecision(){return this.props.version>="3.4.0"}toggleOpenClass(e=!this.state.isOpen){this.setState({isOpen:e})}renderDropdown(){return a.createElement("div",{className:this.getClassName()},a.createElement("button",{className:"btn-crud",type:"button",tabIndex:"0",id:"types-dropdown","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":this.state.isOpen,onClick:()=>this.toggleOpenClass(),onBlur:()=>this.toggleOpenClass(!1),ref:this.props.buttonRef?this.props.buttonRef:()=>{}},this.element.currentType,a.createElement("span",{className:"caret"})),a.createElement("ul",{className:"dropdown-menu","aria-labelledby":"types-dropdown"},this.renderTypes()))}renderTypes(){return ve().castableTypes(this.isHighPrecision()).map((e=>a.createElement("li",{key:e},a.createElement("span",{className:`editable-element-type-${e.toLowerCase()}`,onMouseDown:this.handleTypeChange.bind(this)},e))))}render(){return this.renderDropdown()}}Re.displayName="Types",Re.propTypes={element:i().object.isRequired,version:i().string.isRequired,className:i().string,buttonRef:i().any};const Oe=Re;var Ne=n(96758),je=n.n(Ne);const we="table-view-cell-editor-button",De=`${we}-menu`,Be=`${De}-option`,Me=`${De}-field`,$e="fa fa-level-down fa-rotate-90";class ke extends a.Component{constructor(e){super(e),this.state={menu:!1},void 0===e.value&&(this.empty=!0)}divClassName(){return this.state.menu?`${we} ${we}-is-selected btn btn-default btn-xs`:`${we} btn btn-default btn-xs`}handleClick(){(this.empty||this.props.value.isParentEditable())&&this.setState({menu:!this.state.menu})}handleKeyPress(e){"Enter"===e.key&&this.props.value.isParentEditable()&&this.setState({menu:!this.state.menu})}handleClickOutside(){this.setState({menu:!1})}handleAddFieldClick(){this.setState({menu:!1});let e=this.props.node.data.hadronDocument,t=!1;this.props.context.path.length&&(e=e.getChild(this.props.context.path));const n=!e.isRoot()&&"Array"===e.currentType;let r;if(r=this.empty?e.insertEnd("$new",""):e.insertAfter(this.props.value,"$new",""),n){const n=e.elements.lastElement.currentKey;null!==this.props.columnApi.getColumn(n)&&(t=!0)}this.props.addColumn(r.currentKey,this.props.column.getColDef().colId,this.props.node.childIndex,this.props.context.path,n,t,this.props.node.data.hadronDocument.getStringId())}handleAddChildClick(){this.setState({menu:!1});const e={colId:this.props.value.insertEnd("$new","").currentKey,rowIndex:this.props.node.childIndex};this.props.drillDown(this.props.node.data.hadronDocument,this.props.value,e)}isElementObject(){return!this.empty&&"Object"===this.props.value.currentType}isElementArray(){return!this.empty&&"Array"===this.props.value.currentType}isParentArray(){return!!this.props.context.path.length&&"Array"===this.props.node.data.hadronDocument.getChild(this.props.context.path).currentType}menuClassName(){return this.state.menu?`${De} ${De}-is-visible dropdown-menu`:`${De} dropdown-menu`}renderArrayItem(){if(this.isElementArray()&&this.props.value.isValueEditable())return this.renderMenuItem($e,"Add Array Element To ",this.handleAddChildClick.bind(this),"add-element-to-array")}renderDefaultItem(){const e=this.isParentArray()?"Add Array Element After ":"Add Field After ";return this.renderMenuItem("fa fa-plus-square-o",e,this.handleAddFieldClick.bind(this),"add-field-after")}renderValue(){return this.empty?null:a.createElement(l.BSONValue,{type:this.props.value.currentType,value:this.props.value.currentValue})}renderIdentifier(){return this.empty?this.props.column.getColDef().headerName:this.isParentArray()&&(this.isElementObject()||this.isElementArray())?this.props.value.currentType:this.props.value.currentKey||this.renderValue()}renderMenuItem(e,t,n,r){return a.createElement("li",{onClick:n,"data-test-id":r},a.createElement("span",{className:Be},a.createElement("i",{className:e}),t,a.createElement("span",{className:Me},this.renderIdentifier())))}renderObjectItem(){if(this.isElementObject()&&this.props.value.isValueEditable())return this.renderMenuItem($e,"Add Field To ",this.handleAddChildClick.bind(this),"add-child-to-object")}renderMenu(){return a.createElement("ul",{className:this.menuClassName(),style:{left:`${this.props.displace}px`}},this.renderObjectItem(),this.renderArrayItem(),this.renderDefaultItem())}render(){return this.empty&&this.isParentArray()?null:a.createElement("button",{className:this.divClassName(),onClick:this.handleClick.bind(this),onKeyPress:this.handleKeyPress.bind(this),onBlur:this.handleClickOutside.bind(this),ref:this.props.buttonRef},a.createElement(ie(),{name:"plus-square-o",className:`${we}-icon`}),this.renderMenu())}}ke.displayName="AddFieldButton",ke.propTypes={value:i().object,displace:i().number.isRequired,columnApi:i().any.isRequired,api:i().any.isRequired,context:i().any.isRequired,column:i().any.isRequired,node:i().any.isRequired,addColumn:i().func.isRequired,drillDown:i().func.isRequired,buttonRef:i().any.isRequired};const Pe=je()(ke);function Fe(){return Fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fe.apply(this,arguments)}const Ue={Array:[],Object:{},Decimal128:0,Int32:0,Int64:0,Double:0,MaxKey:0,MinKey:0,Timestamp:0,Date:0,String:"",Code:"",Binary:"",ObjectId:"",BSONRegExp:"",Symbol:"",Boolean:!1,Undefined:void 0,Null:null};class qe extends a.Component{constructor(e){super(e),this.state={fieldName:""},this.changed=!1,this.onKeyDown=this.onKeyDown.bind(this)}componentWillMount(){this.element=this.props.value,this.wasEmpty=!1,this.newField=!1;let e=this.props.node.data.hadronDocument;if(this.props.context.path.length&&(e=e.getChild(this.props.context.path)),void 0===this.element&&"$new"===this.props.column.getColDef().headerName)this.wasEmpty=!0,this.element=e.insertEnd("$new",""),this.newField=!0;else if(void 0===this.element){this.wasEmpty=!0;const t=this.props.column.getColDef().headerName;let n=this.props.column.getColDef().headerComponentParams.bsonType;"Mixed"===n&&(n="String");const r=ve().cast(Ue[n],n);this.element=e.insertEnd(t,r),this.element.edit(r)}else"$new"!==this.element.currentKey&&this.setState({fieldName:this.element.currentKey}),this.newField="$new"===this.props.value.currentKey;this.oldType=this.element.currentType,this._editors=(0,r.ElementEditor)(this.element,this.props.tz),this.editor().start()}componentDidMount(){for(this.props.eGridCell&&this.props.eGridCell.addEventListener("keydown",this.onKeyDown),this.nodes=[this.fieldNameNode,this.inputNode,this.typesNode,this.expandNode,this.addFieldNode,this.removeNode],this.nodeIndex=1,this.maxNodes=this.nodes.length-1;void 0===this.nodes[this.maxNodes];)this.maxNodes--;for(this.minNodes=0;void 0===this.nodes[this.minNodes];)this.minNodes++;this.focus()}componentWillUnmount(){this.props.eGridCell&&this.props.eGridCell.removeEventListener("keydown",this.onKeyDown),this.props.api.stopEditing()}onKeyDown(e){if(e.stopPropagation(),27!==e.keyCode&&13!==e.keyCode||this.props.api.stopEditing(),e.shiftKey&&9===e.keyCode){for(e.preventDefault();this.nodeIndex>-1&&void 0===this.nodes[this.nodeIndex];)this.nodeIndex--;const t=this.nodes[this.nodeIndex];this.nodeIndex<=this.minNodes||void 0===t?this.props.api.tabToPreviousCell():(t.focus(),this.nodeIndex--)}else if(9===e.keyCode){for(e.preventDefault();this.nodeIndex<6&&void 0===this.nodes[this.nodeIndex];)this.nodeIndex++;const t=this.nodes[this.nodeIndex];this.nodeIndex>this.maxNodes||void 0===t?this.props.api.tabToNextCell():(t.focus(),this.nodeIndex++)}}getValue(){return this.element}isCancelAfterEnd(){this.editor().complete();const e=this.props.node.data.hadronDocument.getStringId();if(this.newField){const e=this.state.fieldName,t=[].concat(this.props.context.path,[e]);if(""===e||this.isDuplicateKey(e))return this.element.revert(),this.props.removeColumn("$new"),!1;this.props.renameColumn(this.element.currentKey,e),this.element.rename(e);const n=this.props.column.getColDef();n.valueGetter=function(e){return e.data.hadronDocument.getChild(t)},n.headerName=e,n.colId=e,n.editable=function(e){return"deleting"!==e.node.data.state},this.props.api.refreshHeader()}else if(this.wasEmpty){if(!this.changed)return this.element.revert(),!1}else this.element.isAdded()||this.element.isRemoved()||this.element.currentType===this.oldType||this.props.elementTypeChanged(this.element.currentKey,this.element.currentType,e);!this.element.isRemoved()&&this.element.isAdded()&&this.props.elementAdded(this.element.currentKey,this.element.currentType,e),this.props.api.refreshCells({rowNodes:[this.props.node],force:!0})}focus(){setTimeout((()=>{const e=Ie.findDOMNode(this.props.reactContainer);e&&e.focus()}))}handleTypeChange(){const e=this.element.currentType;if(e!==this.oldType&&(this.changed=!0,"Array"===e||"Object"===e))for(const e of this.element.elements)e.isAdded()&&""===e.currentKey&&""===e.currentValue&&e.remove();this.forceUpdate()}handleRemoveField(){if(this.element.isRemovable()){const e=this.props.node.data.hadronDocument.getStringId();if(this.wasEmpty)return this.element=void 0,this.props.api.stopEditing();if(this.newField||this.element.isAdded()){const t=!this.element.parent.isRoot()&&"Array"===this.element.parent.currentType;this.props.elementRemoved(this.element.currentKey,e,t)}else this.props.elementMarkRemoved(this.element.currentKey,e);this.element.remove()}this.props.api.stopEditing()}handleDrillDown(){this.changed=!0,this.props.api.stopEditing(),this.props.drillDown(this.props.node.data.hadronDocument,this.element)}handleInputChange(e){this.changed=!0,this._pasting?this._pasteEdit(e.target.value):this.editor().edit(e.target.value),this.forceUpdate()}handleFieldNameChange(e){this.setState({fieldName:e.target.value})}handlePaste(){this._pasting=!0}_pasteEdit(e){try{this.editor().paste(e)}catch(t){this.editor().edit(e)}finally{this._pasting=!1}}isDuplicateKey(e){const t=this.props.columnApi.getAllColumns();for(let n=0;n<t.length;n++)if(t[n].getColDef().colId===e)return!0;return!1}editor(){return this._editors[this.element.currentType]||this._editors.Standard}styleField(e){let t="editable-element-field";return e&&(t=`${t}`,this.isDuplicateKey(this.state.fieldName)&&(t=`${t}-is-duplicate`)),t}styleValue(){let e=`editable-element-value-is-${this.element.currentType.toLowerCase()}`;return this.element.isCurrentTypeValid()||(e=`${e} editable-element-value-is-invalid-type`),`editable-element-value editable-element-value-is-editing ${e}`}wrapperStyle(){return`editable-element-value-wrapper editable-element-value-wrapper-is-${this.element.currentType.toLowerCase()}`}renderFieldName(){return this.newField&&"$new"===this.element.currentKey?a.createElement("div",{className:"table-view-cell-editor-input table-view-cell-editor-input-field"},a.createElement("span",{className:"table-view-cell-editor-input-field-inner"},a.createElement("input",{type:"text",onChange:this.handleFieldNameChange.bind(this),onClick:()=>{this.nodeIndex=1},className:this.styleField(!0),value:this.state.fieldName,ref:e=>{this.fieldNameNode=e},placeholder:"Field Name"}))):null}renderTypes(e){return e?a.createElement("div",{className:"table-view-cell-editor-input-types",onBlur:this.handleTypeChange.bind(this),onClick:()=>{this.nodeIndex=3}},a.createElement(Oe,{element:this.element,version:this.props.version,className:"table-view-cell-editor-types btn btn-default btn-xs",buttonRef:e=>{this.typesNode=e}})):null}renderInput(e){return e?a.createElement("div",{className:"table-view-cell-editor-input"},a.createElement("span",{className:this.wrapperStyle()},a.createElement(O.Tooltip,{id:this.element.uuid,className:"editable-element-value-tooltip",border:!0,getContent:()=>this.element.invalidTypeMessage}),a.createElement("input",{"data-tip":"","data-for":this.element.uuid,ref:e=>{this.inputNode=e},type:"text",style:{width:"100px"},className:this.styleValue(),onChange:this.handleInputChange.bind(this),onClick:()=>{this.nodeIndex=2},onPaste:this.handlePaste.bind(this),value:this.editor().value(!0),placeholder:"Value"}))):null}renderExpand(e){return e?a.createElement("button",{className:"table-view-cell-editor-button btn btn-default btn-xs",onMouseDown:this.handleDrillDown.bind(this),ref:e=>{this.expandNode=e}},a.createElement(ie(),{name:"expand",className:"table-view-cell-editor-button-icon"})):null}renderRemoveField(){return this.wasEmpty||"_id"===this.element.currentKey&&!this.props.context.path.length?null:a.createElement("button",{className:"table-view-cell-editor-button btn btn-default btn-xs",onMouseDown:this.handleRemoveField.bind(this),ref:e=>{this.removeNode=e}},a.createElement(ie(),{name:"trash",className:"table-view-cell-editor-button-icon"}))}onAddField(){setImmediate((()=>{this.props.api.stopEditing(),this.props.addColumn(...arguments)}))}renderActions(e,t,n){if("$new"===this.element.currentKey)return null;const r=87*e+130*t+23*n;return a.createElement("span",{className:"table-view-cell-editor-actions"},this.renderExpand(n),a.createElement("span",{onClick:()=>{this.nodeIndex=5}},a.createElement(Pe,Fe({},this.props,{addColumn:this.onAddField.bind(this),displace:r,buttonRef:e=>{this.addFieldNode=e}}))),this.renderRemoveField())}render(){const e="_id"!==this.element.currentKey||this.props.context.path.length,t="Object"!==this.element.currentType&&"Array"!==this.element.currentType&&this.element.isValueEditable(),n="Object"===this.element.currentType||"Array"===this.element.currentType;return a.createElement("div",{className:"table-view-cell-editor"},this.renderFieldName(),this.renderInput(t),this.renderTypes(e),this.renderActions(e,t,n))}}qe.propTypes={reactContainer:i().any,value:i().any,column:i().any,node:i().any,api:i().any,columnApi:i().any,context:i().any,addColumn:i().func.isRequired,version:i().string.isRequired,removeColumn:i().func.isRequired,renameColumn:i().func.isRequired,elementAdded:i().func.isRequired,elementRemoved:i().func.isRequired,elementTypeChanged:i().func.isRequired,elementMarkRemoved:i().func.isRequired,drillDown:i().func.isRequired,eGridCell:i().any,tz:i().string.isRequired},qe.displayName="CellEditor";const Ge=qe;class He extends a.Component{constructor(e){super(e),this.createColumnHeaders=this.createColumnHeaders.bind(this),this.createColumnHeader=this.createColumnHeader.bind(this),this.createRowData=this.createRowData.bind(this),this.updateHeaders=this.updateHeaders.bind(this),this.removeFooter=this.removeFooter.bind(this),this.handleRemove=this.handleRemove.bind(this),this.handleUpdate=this.handleUpdate.bind(this),this.addFooter=this.addFooter.bind(this),this.handleClone=this.handleClone.bind(this),this.updateWidth=this.updateWidth.bind(this),this.sharedGridProperties={gridOptions:{context:{addFooter:this.addFooter,removeFooter:this.removeFooter,handleUpdate:this.handleUpdate,handleRemove:this.handleRemove,handleClone:this.handleClone,path:[]},onCellDoubleClicked:this.onCellDoubleClicked.bind(this),rowHeight:28,getRowStyle:this.updateWidth,suppressPreventDefaultOnMouseWheel:!0,suppressRowTransform:!0,tabToNextCell:e=>e.previousCellDef&&e.nextCellDef&&e.previousCellDef.rowIndex===e.nextCellDef.rowIndex?e.nextCellDef:null},onGridReady:this.onGridReady.bind(this),isFullWidthCell:function(e){return e.data.isFooter},fullWidthCellRendererFramework:Se,fullWidthCellRendererParams:{replaceDoc:this.props.replaceDoc,cleanCols:this.props.cleanCols,removeDocument:this.props.removeDocument,replaceDocument:this.props.replaceDocument,updateDocument:this.props.updateDocument},getRowNodeId:function(e){const t=e.isFooter?"1":"0";return""+e.hadronDocument.getStringId()+t}},this.collection=ae()(e.ns).collection,this.hadronDocs=[],this.topLevel=!0,this.AGGrid=a.createElement(re.AgGridReact,this.sharedGridProperties)}componentDidMount(){this.unsubscribeGridStore=this.props.store.gridStore.listen(this.modifyColumns.bind(this))}componentWillUnmount(){this.unsubscribeGridStore(),this.gridApi.destroy()}componentWillReceiveProps(e){this.hadronDocs=e.docs}componentDidUpdate(e){this.handleBreadcrumbChange(),this.props.docs.length>e.docs.length&&this.handleInsert()}handleClone(e){this.props.openInsertDocumentDialog(e.hadronDocument.generateObject(),!0)}onGridReady(e){this.gridApi=e.api,this.columnApi=e.columnApi,this.hadronDocs=this.props.docs,this.handleBreadcrumbChange()}onCellDoubleClicked(e){this.addFooter(e.node,e.data,"editing")}addFooter(e,t,n){if(!this.props.isEditable||t.isFooter||t.hasFooter)return;e.data.hasFooter=!0,e.data.state=n,this.gridApi.refreshCells({rowNodes:[e],columns:["$rowActions"],force:!0});const r={hadronDocument:t.hadronDocument,hasFooter:!1,isFooter:!0,state:n};this.gridApi.updateRowData({add:[r],addIndex:e.rowIndex+1})}removeFooter(e){const t=e.data.hadronDocument.getStringId()+"0",n=this.gridApi.getRowNode(t);n.data.hasFooter=!1,n.data.state=null,this.gridApi.refreshCells({rowNodes:[n],columns:["$rowActions"],force:!0}),this.gridApi.clearFocusedCell(),this.gridApi.updateRowData({remove:[e.data]})}handleRemove(e){const t=e.data.hadronDocument.getStringId(),n=t+"0",r=this.gridApi.getRowNode(n);this.updateRowNumbers(r.data.rowNumber,!1),this.removeFooter(e);for(const n of e.data.hadronDocument.elements)this.props.elementRemoved(n.currentKey,t,!1);this.gridApi.updateRowData({remove:[r.data]})}handleUpdate(e){const t=e._id+"0",n=this.gridApi.getRowNode(t),r=n.data.rowNumber,a={hadronDocument:new(s())(e),isFooter:!1,hasFooter:!1,state:null,rowNumber:r};for(let e=0;e<this.hadronDocs.length;e++)if(this.hadronDocs[e].getStringId()===a.hadronDocument.getStringId()){this.hadronDocs[e]=a.hadronDocument;break}n.setData(a),this.gridApi.redrawRows({rowNodes:[n]});const o=e._id+"1",i=this.gridApi.getRowNode(o);this.removeFooter(i),this.props.cleanCols()}addGridColumn(e,t,n,r,s){const a=(0,p.map)(this.columnApi.getAllGridColumns(),(e=>e.getColDef()));let o=0;for(;o<a.length;){if(!s&&""+a[o].colId==""+t)return;o++}for(o=0;o<a.length;){if(""+a[o].colId==""+e){if(s){let e=o+1;for(;e<a.length;){if(!a[e].colId.toString().includes("$")){const t=a[e].colId+1;a[e].colId=t,a[e].headerName=t,a[e].valueGetter=function(e){return e.data.hadronDocument.getChild([].concat(r,[t]))}}e++}}break}o++}const i=s?"Array":"Object",l=this.createColumnHeader(n,!0,[].concat(r,[t]),i);a.splice(o+1,0,l),this.gridApi.setColumnDefs(a),s&&this.gridApi.refreshCells({force:!0})}removeColumns(e){const t=(0,p.map)(this.columnApi.getAllGridColumns(),(e=>e.getColDef())),n=[];for(let r=0;r<t.length;r++)e.includes(""+t[r].colId)||e.includes(t[r].colId)||n.push(t[r]);this.gridApi.setColumnDefs(n)}updateHeaders(e,t){const n=Object.keys(e);for(let r=0;r<t.length;r++)n.includes(""+t[r].colId)&&(t[r].headerComponentParams.bsonType=e[t[r].colId])}modifyColumns(e){if("add"in e&&this.addGridColumn(e.add.colIdBefore,e.add.newColId,e.add.colType,e.add.path,e.add.isArray),"remove"in e&&this.removeColumns(e.remove.colIds),"updateHeaders"in e){const t=(0,p.map)(this.columnApi.getAllGridColumns(),(e=>e.getColDef()));this.updateHeaders(e.updateHeaders.showing,t),this.gridApi.refreshHeader()}if("refresh"in e){const t=this.gridApi.getRowNode(e.refresh.oid+"0");this.gridApi.refreshCells({rowNodes:[t],force:!0})}"edit"in e&&(this.gridApi.setFocusedCell(e.edit.rowIndex,e.edit.colId),this.gridApi.startEditingCell({rowIndex:e.edit.rowIndex,colKey:e.edit.colId}))}updateRowNumbers(e,t){const n=t?1:-1;this.gridApi.forEachNodeAfterFilterAndSort((function(t){!t.data.isFooter&&t.data.rowNumber>=e&&(t.data.rowNumber+=n)})),this.gridApi.refreshCells({columns:["$rowNumber"]})}insertRow(e,t,n){const r={hadronDocument:e,isFooter:!1,hasFooter:!1,state:null,rowNumber:n};if(this.hadronDocs.splice(t,0,r.hadronDocument),this.topLevel){this.updateRowNumbers(n,!0),this.gridApi.updateRowData({add:[r],addIndex:t});for(const t of r.hadronDocument.elements)this.props.elementAdded(t.currentKey,t.currentType,e._id)}}handleInsert(){if(!this.props.error){const e=this.props.docs[this.props.docs.length-1];for(const t of e.elements)this.addGridColumn(null,t.currentKey,t.currentType,[])}}handleBreadcrumbChange(){if(!this.gridApi)return;const e=this.props.table;if(0===e.path.length){this.topLevel=!0;const e=this.createColumnHeaders(this.hadronDocs,[],[]);this.gridApi.gridOptionsWrapper.gridOptions.context.path=[],this.gridApi.setColumnDefs(e),this.gridApi.setRowData(this.createRowData(this.hadronDocs,this.props.start))}else if("Object"===e.types[e.types.length-1]||"Array"===e.types[e.types.length-1]){this.topLevel=!1;const t=this.createColumnHeaders(this.hadronDocs,e.path,e.types);t.push(this.createObjectIdHeader()),t.length<=3&&t.push(this.createPlaceholderHeader("Array"===e.types[e.types.length-1],e.path)),this.gridApi.gridOptionsWrapper.gridOptions.context.path=e.path,this.gridApi.setRowData(this.createRowData(this.hadronDocs,1)),this.gridApi.setColumnDefs(t)}if(this.gridApi.refreshCells({force:!0}),this.gridApi&&this.addFooters(),e.editParams){const t=""+e.editParams.colId;this.gridApi.ensureColumnVisible(t),this.gridApi.setFocusedCell(e.editParams.rowIndex,t),this.gridApi.startEditingCell({rowIndex:e.editParams.rowIndex,colKey:t})}else e.path.length&&"Array"===e.types[e.types.length-1]&&this.gridApi.ensureColumnVisible("0")}updateWidth(e){const t=this.columnApi.getAllColumns(),n=document.querySelector(".ag-root-wrapper"),r=n?n.offsetWidth:0;if("editing"===e.node.data.state||"deleting"===e.node.data.state){let e=30;const n=this.columnApi.getColumn("$new");for(let n=0;n<t.length-2;n++)e+=200;return e>r||n?{width:"100%"}:{width:`${e}px`}}}addFooters(){this.gridApi.forEachNodeAfterFilterAndSort((e=>{e.data.hadronDocument.isModified()&&this.addFooter(e,e.data,"editing")}))}createPlaceholderHeader(e,t){const n=e?0:"$new",r=e?"Array":"Object";return this.createColumnHeader("String",!0,[].concat(t,[n]),r)}createObjectIdHeader(){return{headerName:"_id",colId:"$_id",cellClass:"ag-cell-subtable-objectid",valueGetter:function(e){return e.data.hadronDocument.get("_id")},headerComponentFramework:xe,headerComponentParams:{hide:!1,bsonType:"ObjectId",subtable:!0},cellRendererFramework:Te,cellRendererParams:{elementAdded:this.props.elementAdded,elementRemoved:this.props.elementRemoved,elementTypeChanged:this.props.elementTypeChanged,drillDown:this.props.drillDown,parentType:"",tz:this.props.tz},editable:!1,cellEditorFramework:Ge,pinned:"left"}}createColumnHeader(e,t,n,r){return{headerName:n[n.length-1],colId:n[n.length-1],valueGetter:function(e){const t=e.data.hadronDocument.getChild(n);if(n.length<=1)return t;const s=e.node.data.hadronDocument.getChild(n.slice(0,n.length-1));return void 0===s||r===s.currentType?t:void 0},valueSetter:function(e){return(void 0!==e.oldValue||void 0!==e.newValue)&&(e.newValue.isEdited()||e.newValue.isAdded()||e.newValue.isRemoved())},headerComponentFramework:xe,headerComponentParams:{hide:!1,bsonType:e},cellRendererFramework:Te,cellRendererParams:{elementAdded:this.props.elementAdded,elementRemoved:this.props.elementRemoved,elementTypeChanged:this.props.elementTypeChanged,drillDown:this.props.drillDown,parentType:r,tz:this.props.tz},editable:function(e){if(!t||"deleting"===e.node.data.state)return!1;if(n.length<=1)return!0;const s=e.node.data.hadronDocument.getChild(n.slice(0,n.length-1));if(!s||s.currentType!==r)return!1;if("Array"===s.currentType&&"$_id"!==e.column.getColId()){let t=0;if(s.elements.lastElement&&(t=s.elements.lastElement.currentKey+1),e.column.getColId()>t)return!1}return!0},cellEditorFramework:Ge,cellEditorParams:{addColumn:this.props.addColumn,removeColumn:this.props.removeColumn,renameColumn:this.props.renameColumn,elementAdded:this.props.elementAdded,elementRemoved:this.props.elementRemoved,version:this.props.version,elementTypeChanged:this.props.elementTypeChanged,elementMarkRemoved:this.props.elementMarkRemoved,drillDown:this.props.drillDown,tz:this.props.tz}}}createColumnHeaders(e,t,n){const r={},s={},a=this.props.isEditable,o=n.length?n[n.length-1]:"Object",i=this.createColumnHeader;r.hadronRowNumber={headerName:"Row",field:"rowNumber",colId:"$rowNumber",width:30,pinned:"left",headerComponentFramework:xe,headerComponentParams:{hide:!0},cellRendererFramework:fe};for(let n=0;n<e.length;n++){let l=e[n];if((!(t.length>0)||(l=l.getChild(t),l&&l.currentType===o))&&void 0!==l)for(const p of l.elements){const l=p.currentKey,m=p.currentType;r[l]=i(m,a,[].concat(t,[l]),o),l in s||(s[l]={}),s[l][e[n].getStringId()]=m}}this.props.resetHeaders(s);const l=Object.values(r),m={};return(0,p.map)(s,(function(e,t){const n=Object.values(e);let r=n[0];for(let e=0;e<n.length;e++)if(r!==n[e]){r="Mixed";break}m[t]=r})),this.updateHeaders(m,l),l.push({colId:"$rowActions",valueGetter:function(e){return e.data},headerComponentFramework:xe,headerComponentParams:{hide:!0},cellRendererFramework:Ee,cellRendererParams:{nested:0!==t.length,isEditable:this.props.isEditable,copyToClipboard:this.props.copyToClipboard,tz:this.props.tz},editable:!1,pinned:"right",width:100}),l}createRowData(e,t){return(0,p.map)(e,((e,n)=>({hadronDocument:e,isFooter:!1,hasFooter:!1,state:null,rowNumber:n+t})))}render(){return a.createElement("div",{className:"ag-parent"},a.createElement(ce,{collection:this.collection,pathChanged:this.props.pathChanged,path:this.props.table.path,types:this.props.table.types}),this.AGGrid)}}He.propTypes={addColumn:i().func,cleanCols:i().func,docs:i().array.isRequired,drillDown:i().func.isRequired,elementAdded:i().func,elementMarkRemoved:i().func,elementRemoved:i().func,elementTypeChanged:i().func,error:i().object,isEditable:i().bool.isRequired,ns:i().string.isRequired,version:i().string.isRequired,openInsertDocumentDialog:i().func,openImportFile:i().func,pathChanged:i().func.isRequired,removeColumn:i().func,copyToClipboard:i().func,renameColumn:i().func,replaceDoc:i().func,resetHeaders:i().func,removeDocument:i().func,replaceDocument:i().func,updateDocument:i().func,start:i().number,store:i().object.isRequired,table:i().object.isRequired,tz:i().string.isRequired},He.displayName="DocumentTableView";const Ve=He;var Ke=n(6909);const{track:We}=(0,Ke.createLoggerAndTelemetry)("COMPASS-CRUD-UI"),Ye="document-list-action-bar",ze=`${Ye}-container`,Ze=`${Ye}-message`,Xe=`${Ye}-refresh`,Je=`${Ye}-pagination`,Qe=`${Ye}-view-switcher`,et=`btn-primary ${Ye}-insert-data`,tt=`${Ye}-insert-data-title`,nt=`${Ye}-export-collection`;class rt extends a.Component{handleRefreshDocuments(){We("Query Results Refreshed"),this.props.refreshDocuments()}handleNextPage(){this.props.getPage(this.props.page+1)}handlePrevPage(){this.props.getPage(this.props.page-1)}switchDocumentView(e){this.props.viewSwitchHandler(e)}_loadedMessage(){const e=this.props.loadingCount?"":`${this.props.count??"N/A"}`;return a.createElement("span",null,"Displaying documents ",a.createElement("b",null,this.props.start," - ",this.props.end)," of ",e)}_loadingSpinner(){if(this.props.loadingCount)return a.createElement(l.SpinLoader,{size:"12px"})}renderPageButtons(){const e=0===this.props.page,t=!!this.props.count&&20*(this.props.page+1)>=this.props.count;return a.createElement("div",{className:Je},a.createElement(m.AnimatedIconTextButton,{clickHandler:this.handlePrevPage.bind(this),stopAnimationListenable:this.props.pageLoadedListenable,className:`btn btn-default btn-xs ${Je}-button ${Je}-button-left`,iconClassName:"fa fa-chevron-left",animatingIconClassName:"fa fa-spinner fa-spin",disabled:e}),a.createElement(m.AnimatedIconTextButton,{clickHandler:this.handleNextPage.bind(this),stopAnimationListenable:this.props.pageLoadedListenable,className:`btn btn-default btn-xs ${Je}-button ${Je}-button-right`,iconClassName:"fa fa-chevron-right",animatingIconClassName:"fa fa-spinner fa-spin",disabled:t}))}renderInsertButton(){if(this.props.readonly)return;const e=global.hadronApp.appRegistry.getComponent("DeploymentAwareness.OptionWriteSelector");return a.createElement(e,{className:et,id:"insert-data-dropdown",isCollectionLevel:!0,title:a.createElement("div",{className:tt},a.createElement("i",{className:"fa fa-download"}),a.createElement("div",null,"ADD DATA")),options:{"import-file":"Import File","insert-document":"Insert Document"},bsSize:"xs",tooltipId:"document-is-not-writable",onSelect:this.props.insertHandler})}renderExportButton(){return a.createElement("div",{"data-for":"export-collection-tooltip","data-tip":"Export Collection","data-place":"top"},a.createElement(m.IconButton,{title:"ExportCollection",className:`${nt} btn btn-default btn-xs`,iconClassName:`${nt}-button fa fa-upload`,dataTestId:"export-collection-button",clickHandler:this.props.openExportFileDialog}),a.createElement(O.Tooltip,{id:"export-collection-tooltip"}))}render(){const e=this.props.loadingCount?"Fetching document count...":"";return a.createElement("div",null,a.createElement("div",{className:Ye},a.createElement("div",{className:ze},this.renderInsertButton(),this.renderExportButton(),a.createElement("div",{className:Qe},a.createElement(O.ViewSwitcher,{dataTestId:"toolbar-view",label:"View",buttonLabels:["List","JSON","Table"],showLabels:!1,iconClassNames:["fa fa-list-ul","curly-bracket","fa fa-table"],activeButton:this.props.activeDocumentView,onClick:this.switchDocumentView.bind(this)}))),a.createElement("div",{className:ze},a.createElement("div",{className:Ze,title:e},this._loadedMessage(),this._loadingSpinner()),this.renderPageButtons(),a.createElement("div",{className:Xe},a.createElement(m.AnimatedIconTextButton,{clickHandler:this.handleRefreshDocuments.bind(this),stopAnimationListenable:this.props.pageLoadedListenable,dataTestId:"refresh-documents-button",className:"btn btn-default btn-xs",iconClassName:"fa fa-repeat",text:"REFRESH",animatingIconClassName:"fa fa-refresh fa-spin"})))))}}rt.displayName="Toolbar",rt.propTypes={activeDocumentView:i().string.isRequired,count:i().number,end:i().number.isRequired,loadingCount:i().bool.isRequired,getPage:i().func.isRequired,insertHandler:i().func,openExportFileDialog:i().func,isExportable:i().bool.isRequired,page:i().number.isRequired,readonly:i().bool.isRequired,refreshDocuments:i().func.isRequired,start:i().number.isRequired,viewSwitchHandler:i().func.isRequired,pageLoadedListenable:i().object.isRequired};const st=rt,at="fetching",ot="error",it="fetchedInitial",lt="fetchedCustom";function pt(){return pt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pt.apply(this,arguments)}class mt extends a.Component{constructor(e){if(super(e),e.isExportable){const t=e.store.localAppRegistry;this.queryBarRole=t.getRole("Query.QueryBar")[0],this.queryBar=this.queryBarRole.component,this.queryBarStore=t.getStore(this.queryBarRole.storeName),this.queryBarActions=t.getAction(this.queryBarRole.actionName)}}onApplyClicked(){this.props.store.refreshDocuments()}onResetClicked(){this.props.store.refreshDocuments()}onCancelClicked(){this.props.store.cancelOperation()}handleOpenInsert(e){"insert-document"===e?this.props.openInsertDocumentDialog({_id:new R.ObjectID,"":""},!1):"import-file"===e&&this.props.openImportFileDialog()}renderViews(){return"List"===this.props.view?a.createElement(J,this.props):"Table"===this.props.view?a.createElement(Ve,this.props):a.createElement(ne,this.props)}renderOutdatedWarning(){if(!this.props.error&&this.props.outdated)return a.createElement(O.StatusRow,{style:"warning"},'The content is outdated and no longer in sync\nwith the current query. Press "Find" again to see the results for\nthe current query.')}renderFetching(){return a.createElement(l.CancelLoader,{dataTestId:"fetching-documents",progressText:"Fetching Documents",cancelText:"Stop",onCancel:this.onCancelClicked.bind(this)})}renderContent(){return this.props.error?a.createElement(O.StatusRow,{style:"error"},this.props.error.message):this.props.status!==at||this.props.debouncingLoad?a.createElement("div",{className:"column-container"},a.createElement("div",{className:"column main"},this.renderViews())):this.renderFetching()}renderInsertModal(){if(this.props.isEditable)return a.createElement(Y,pt({closeInsertDocumentDialog:this.props.closeInsertDocumentDialog,insertDocument:this.props.insertDocument,insertMany:this.props.insertMany,updateJsonDoc:this.props.updateJsonDoc,toggleInsertDocument:this.props.toggleInsertDocument,toggleInsertDocumentView:this.props.toggleInsertDocumentView,jsonView:!0,version:this.props.version,tz:this.props.tz,ns:this.props.ns,updateComment:this.props.updateComment},this.props.insert))}renderQueryBar(){if(this.props.isExportable)return a.createElement(this.queryBar,{store:this.queryBarStore,actions:this.queryBarActions,buttonLabel:"Find",resultId:this.props.resultId,onApply:this.onApplyClicked.bind(this),onReset:this.onResetClicked.bind(this)})}renderZeroState(){if(this.props.docs.length>0||this.props.status===at)return null;if(this.props.status===ot)return null;let e="This collection has no data",t="It only takes a few seconds to import data from a JSON or CSV file";if(0===this.props.docs.length&&this.props.status===lt)return e="No results",t="Try to modify your query to get results",a.createElement("div",{className:"document-list-zero-state"},a.createElement(Z,null),a.createElement(O.ZeroState,{header:e,subtext:t}));const n=this.props.isEditable?"":"disabled";return a.createElement("div",{className:"document-list-zero-state"},a.createElement(Z,null),a.createElement(O.ZeroState,{header:e,subtext:t},a.createElement("div",{className:"document-list-zero-state-action"},a.createElement("div",null,a.createElement(m.TextButton,{dataTestId:"import-data-button",className:`btn btn-primary btn-lg ${n}`,text:"Import Data",clickHandler:this.props.openImportFileDialog})))))}render(){return a.createElement("div",{className:"content-container content-container-documents compass-documents"},a.createElement("div",{className:"controls-container"},this.renderQueryBar(),a.createElement(st,pt({readonly:!this.props.isEditable,insertHandler:this.handleOpenInsert.bind(this),viewSwitchHandler:this.props.viewChanged,activeDocumentView:this.props.view},this.props))),this.renderOutdatedWarning(),this.renderZeroState(),this.renderContent(),this.renderInsertModal())}}mt.displayName="DocumentList",mt.propTypes={closeInsertDocumentDialog:i().func,toggleInsertDocumentView:i().func.isRequired,toggleInsertDocument:i().func.isRequired,error:i().object,insert:i().object,insertDocument:i().func,insertMany:i().func,isEditable:i().bool.isRequired,isExportable:i().bool.isRequired,isTimeSeries:i().bool,store:i().object.isRequired,openInsertDocumentDialog:i().func,openImportFileDialog:i().func,openExportFileDialog:i().func,removeDocument:i().func,replaceDocument:i().func,updateDocument:i().func,updateJsonDoc:i().func,version:i().string.isRequired,view:i().string.isRequired,viewChanged:i().func.isRequired,docs:i().array,ns:i().string,tz:i().string,updateComment:i().func.isRequired,status:i().string,debouncingLoad:i().bool,loadingCount:i().bool,outdated:i().bool,resultId:i().number},mt.defaultProps={error:null,view:"List",version:"3.4.0",isEditable:!0,insert:{},tz:"UTC"};const ct=mt;function ut(){return ut=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ut.apply(this,arguments)}class gt extends a.Component{static displayName="ConnectedDocumentList";static propTypes={store:i().object.isRequired,actions:i().object.isRequired};render(){return a.createElement(O.StoreConnector,{store:this.props.store},a.createElement(ct,ut({},this.props.actions,this.props,{pageLoadedListenable:this.props.store,isExportable:!0})))}}const dt=gt;var ht=n(10862),Tt=n.n(ht);const yt=()=>Tt().createActions(["addColumn","cleanCols","closeInsertDocumentDialog","copyToClipboard","documentRemoved","drillDown","elementAdded","elementMarkRemoved","elementRemoved","elementTypeChanged","getPage","insertDocument","insertMany","toggleInsertDocumentView","toggleInsertDocument","openInsertDocumentDialog","openExportFileDialog","openImportFileDialog","pathChanged","refreshDocuments","cancelOperation","removeDocument","removeColumn","renameColumn","replaceDoc","replaceDocument","resetHeaders","updateDocument","updateJsonDoc","viewChanged","updateComment"]);var ft=n(99837),bt=n.n(ft);const{log:St,mongoLogId:At,debug:Et}=(0,Ke.default)("cancellable-queries"),_t="The operation was cancelled.";async function xt(e,t,n,{signal:r,...s}){if(r.aborted)throw new Error(_t);const a=e.fetch(t,n,s),o=()=>{a.close()};let i;r.addEventListener("abort",o,{once:!0});try{i=await Lt(a.toArray(),r)}finally{r.removeEventListener("abort",o)}return i}async function It(e,t,{signal:n,session:r,maxTimeMS:s}){if(n.aborted)throw new Error(_t);const a=e.fetch("config.collections",{_id:t},{session:r,maxTimeMS:s,projection:{key:1,_id:0}}),o=()=>{a.close()};let i;n.addEventListener("abort",o,{once:!0});try{i=await Lt(a.toArray(),n)}catch(e){if(e.message===_t)throw e;St.warn(At(1001000075),"Documents","Failed to fetch sharding keys",e),i=[]}return n.removeEventListener("abort",o),i.length?i[0].key:{}}async function Lt(e,t){const n=new AbortController,r=function(e,t){let n;const r=new Promise((function(e,t){n=t})),s=()=>{t.removeEventListener("abort",a),n(new Error(_t))},a=()=>{e.removeEventListener("abort",s)};return e.addEventListener("abort",s,{once:!0}),t.addEventListener("abort",a,{once:!0}),r}(t,n.signal);try{return await Promise.race([r,e])}finally{t.aborted||n.abort()}}const vt="Mixed",Ct=(e={})=>{const t=Tt().createStore({init(){const t=e.actions;this.columns={},this.showing={},this.stageRemove={},this.listenTo(t.addColumn,this.addColumn.bind(this)),this.listenTo(t.removeColumn,this.removeColumn.bind(this)),this.listenTo(t.resetHeaders,this.resetColumns.bind(this)),this.listenTo(t.cleanCols,this.cleanCols.bind(this)),this.listenTo(t.elementAdded,this.elementAdded.bind(this)),this.listenTo(t.elementRemoved,this.elementRemoved.bind(this)),this.listenTo(t.elementMarkRemoved,this.elementMarkRemoved.bind(this)),this.listenTo(t.elementTypeChanged,this.elementTypeChanged.bind(this)),this.listenTo(t.renameColumn,this.renameColumn.bind(this)),this.listenTo(t.replaceDoc,this.replaceDoc.bind(this)),this.setShowing=this.setShowing.bind(this)},setShowing(e){if(!(e in this.columns))return;const t=Object.values(this.columns[e]);let n=t[0];for(let e=0;e<t.length;e++)if(n!==t[e]){n=vt;break}this.showing[e]=n},stageField(e,t,n){n?(e in this.stageRemove||(this.stageRemove[e]={}),this.stageRemove[e][t]=!0):e in this.stageRemove&&(delete this.stageRemove[e][t],(0,p.isEmpty)(this.stageRemove[e])&&delete this.stageRemove[e])},resetColumns(e){this.showing={},this.stageRemove={},this.columns=(0,p.cloneDeep)(e);const t=Object.keys(e);for(let e=0;e<t.length;e++)this.setShowing(t[e])},replaceDoc(e,t,n){const r={refresh:{oid:t}};(0,p.forEach)(this.columns,((r,s)=>{e in this.columns[s]&&(delete this.columns[s][e],(0,p.isEmpty)(this.columns[s])&&delete this.columns[s]),s in n&&(s in this.columns||(this.columns[s]={}),this.columns[s][t]=ve().type(n[s])),this.setShowing(s)})),(0,p.forEach)(this.stageRemove,((t,n)=>{n in this.stageRemove&&e in this.stageRemove[n]&&(delete this.stageRemove[n][e],(0,p.isEmpty)(this.stageRemove[n])&&delete this.stageRemove[n])})),(0,p.forEach)(n,((e,r)=>{if("_id"!==r&&!(r in this.columns)){const e=ve().type(n[r]);this.columns[r]={},this.columns[r][t]=e,this.setShowing(r)}})),r.updateHeaders={showing:this.showing},this.trigger(r)},renameColumn(e,t){this.columns[e]&&(this.columns[t]=this.columns[e],this.setShowing(t),this.stageRemove[e]&&(this.stageRemove[t]=this.stageRemove[e]),delete this.columns[e],delete this.stageRemove[e],delete this.showing[e])},cleanCols(){const e=[],t=Object.keys(this.showing);for(let n=0;n<t.length;n++){const r=t[n];r in this.columns||r in this.stageRemove||(e.push(r),delete this.showing[r])}e.length&&this.trigger({remove:{colIds:e}})},elementAdded(e,t,n){let r=-1;if(e in this.columns?(this.columns[e][n]=t,r=this.showing[e],Object.keys(this.columns[e]).length<2?this.showing[e]=t:t!==r&&(this.showing[e]=vt)):(this.columns[e]={},this.columns[e][n]=t,this.showing[e]=t),this.stageField(e,n,!1),r!==this.showing[e]){const t={updateHeaders:{showing:{}}};t.updateHeaders.showing[e]=this.showing[e],this.trigger(t)}},elementMarkRemoved(e,t){delete this.columns[e][t];const n={};if(this.stageField(e,t,!0),(0,p.isEmpty)(this.columns[e]))delete this.columns[e];else{const t=this.showing[e];t===vt&&this.setShowing(e),t!==this.showing[e]&&(n.updateHeaders={showing:{}},n.updateHeaders.showing[e]=this.showing[e],this.trigger(n))}},elementRemoved(e,t,n){const r={},s={};if(n){for(let n=e;n<Object.keys(this.showing).length;n++)n+1 in this.columns&&t in this.columns[n+1]?(n in this.columns||(this.columns[n]={}),this.columns[n][t]=this.columns[n+1][t],this.stageField(n,t,!1),this.showing[n]!==this.columns[n][t]&&(this.setShowing(n),s[n]=this.showing[n])):n+1 in this.stageRemove&&t in this.stageRemove[n+1]?(this.stageField(n,t,!0),n in this.columns&&(delete this.columns[n][t],(0,p.isEmpty)(this.columns[n])&&delete this.columns[n],this.setShowing(n),s[n]=this.showing[n])):(this.stageField(n,t,!1),n in this.columns&&(delete this.columns[n][t],(0,p.isEmpty)(this.columns[n])?delete this.columns[n]:(this.setShowing(n),s[n]=this.showing[n])),n in this.columns||n in this.stageRemove||(r.remove={colIds:[n]},delete this.showing[n]));r.refresh={oid:t}}else if(this.columns[e]&&this.columns[e][t]&&delete this.columns[e][t],this.stageField(e,t,!1),(0,p.isEmpty)(this.columns[e]))delete this.columns[e],e in this.stageRemove||(r.remove={colIds:[e]},delete this.showing[e]);else{const t=this.showing[e];t===vt&&this.setShowing(e),t!==this.showing[e]&&(s[e]=this.showing[e])}(0,p.isEmpty)(s)||(r.updateHeaders={showing:s}),(0,p.isEmpty)(r)||this.trigger(r)},elementTypeChanged(e,t,n){const r=this.showing[e];if(this.columns[e][n]=t,t!==r&&(r===vt?this.setShowing(e):this.showing[e]=1===Object.keys(this.columns[e]).length?t:vt,r!==this.showing[e])){const t={updateHeaders:{showing:{}}};t.updateHeaders.showing[e]=this.showing[e],this.trigger(t)}},addColumn(e,t,n,r,s,a,o){const i={edit:{colId:e,rowIndex:n}};if(a||(i.add={newColId:e,colIdBefore:t,path:r,isArray:s,colType:""}),s){let t=Object.keys(this.showing).length-1;a||(t++,this.columns[t]={});const n={};for(let r=t;r>e;r--)r-1 in this.columns&&o in this.columns[r-1]?(r in this.columns||(this.columns[r]={}),this.columns[r][o]=this.columns[r-1][o],this.setShowing(r),n[r]=this.showing[r]):r-1 in this.stageRemove&&o in this.stageRemove[r-1]&&(r in this.columns&&(delete this.columns[r][o],(0,p.isEmpty)(this.columns[r])&&delete this.columns[r]),r in this.showing||(this.showing[r]=this.showing[r-1])),this.stageField(""+r,o,!1),""+(r-1)in this.stageRemove&&o in this.stageRemove[""+(r-1)]&&this.stageField(""+r,o,!0);e in this.columns&&(delete this.columns[e][o],(0,p.isEmpty)(this.columns[e])?delete this.columns[e]:(this.setShowing(e),n[e]=this.showing[e])),this.stageField(""+e,o,!1),(0,p.isEmpty)(n)||(i.updateHeaders={showing:n})}this.trigger(i)},removeColumn(e){this.trigger({remove:{colIds:[e]}})}});return t},{log:Rt,mongoLogId:Ot,track:Nt}=(0,Ke.default)("COMPASS-CRUD-UI");function jt({filter:e,sort:t,limit:n,skip:r,maxTimeMS:s,project:a,collation:o}={}){const i={filter:e,sort:t,limit:n,skip:r,maxTimeMS:s,project:a,collation:o};for(const e of Object.keys(i))null!==i[e]&&void 0!==i[e]||delete i[e];return i}const wt="error",Dt="modifying",Bt=new Error("Cannot delete documents that do not have an _id field."),Mt=new Error("Unable to update, no changes have been made."),$t=(e={})=>{const t=Tt().createStore({mixins:[bt().store],listenables:e.actions,getInitialState(){return{ns:"",collection:"",abortController:null,sessions:null,error:null,docs:[],start:0,version:"3.4.0",end:0,page:0,isEditable:!0,view:"List",count:0,insert:this.getInitialInsertState(),table:this.getInitialTableState(),query:this.getInitialQueryState(),isDataLake:!1,isReadonly:!1,isTimeSeries:!1,status:"initial",debouncingLoad:!1,loadingCount:!1,outdated:!1,shardKeys:null,resultId:kt()}},getInitialInsertState:()=>({doc:null,jsonDoc:null,message:"",mode:Dt,jsonView:!1,isOpen:!1,isCommentNeeded:!0}),getInitialTableState:()=>({doc:null,path:[],types:[],editParams:null}),getInitialQueryState:()=>({filter:{},sort:null,limit:0,skip:0,maxTimeMS:6e4,project:null,collation:null,...jt(e.query??{})}),modeForTelemetry(){return this.state.view.toLowerCase()},onInstanceCreated(e){e.build.on("change:version",((e,t)=>{this.setState({version:t})})),e.dataLake.on("change:isDataLake",((e,t)=>{t&&this.setState({isDataLake:t,isEditable:!1})}))},onReadonlyChanged(e){this.setState({isReadonly:e})},onTimeSeriesChanged(e){this.setState({isTimeSeries:e})},onCollectionChanged(e){const t=ae()(e),n=this.isListEditable();this.setState({ns:e,collection:t.collection,isEditable:n,table:this.getInitialTableState(),query:this.getInitialQueryState()})},onQueryChanged(e){this.state.query.filter=e.filter||{},this.state.query.sort=e.sort,this.state.query.limit=e.limit,this.state.query.skip=e.skip||0,this.state.query.project=e.project,this.state.query.collation=e.collation,this.state.query.maxTimeMS=e.maxTimeMS,this.state.status!==it&&this.state.status!==lt||this.setState({outdated:!0})},isListEditable(){return!this.state.isDataLake&&!this.state.isReadonly&&!0},copyToClipboard(e){Nt("Document Copied",{mode:this.modeForTelemetry()});const t=R.EJSON.stringify(e.generateObject(),null,2);let n=document.createElement("input");n.type="text",n.setAttribute("styles","display: none;"),n.value=t,document.body.appendChild(n),n.select();const r=document.execCommand("copy");return document.body.removeChild(n),n=null,r},removeDocument(e){Nt("Document Deleted",{mode:this.modeForTelemetry()});const t=e.getId();void 0!==t?this.dataService.deleteOne(this.state.ns,{_id:t},{},(t=>{if(t)e.emit("remove-error",t.message),this.trigger(this.state);else{e.emit("remove-success");const t={view:this.state.view,ns:this.state.ns};this.localAppRegistry.emit("document-deleted",t),this.globalAppRegistry.emit("document-deleted",t);const n=this.findDocumentIndex(e);this.state.docs.splice(n,1),this.setState({count:this.state.count-1,end:Math.max(this.state.end-1,0)})}})):(e.emit("remove-error",Bt),this.trigger(this.state))},updateDocument(e){Nt("Document Updated",{mode:this.modeForTelemetry()});try{const{query:t,updateDoc:n}=e.generateUpdateUnlessChangedInBackgroundQuery(this.state.shardKeys);if(0===Object.keys(n).length)return void e.emit("update-error",Mt.message);const r={returnDocument:"after",promoteValues:!1};this.dataService.findOneAndUpdate(this.state.ns,t,n,r,((t,n)=>{if(t)e.emit("update-error",t.message);else if(n){e.emit("update-success",n),this.localAppRegistry.emit("document-updated",this.state.view),this.globalAppRegistry.emit("document-updated",this.state.view);const t=this.findDocumentIndex(e);this.state.docs[t]=new(s())(n),this.trigger(this.state)}else e.emit("update-blocked")}))}catch(t){e.emit("update-error",`An error occured when attempting to update the document: ${t.message}`)}},replaceDocument(e){Nt("Document Updated",{mode:this.modeForTelemetry()});const t=e.generateObject(),n=e.getOriginalKeysAndValuesForSpecifiedKeys({_id:1,...this.state.shardKeys||{}});this.dataService.findOneAndReplace(this.state.ns,n,t,{returnDocument:"after",promoteValues:!1},((t,n)=>{if(t)e.emit("update-error",t.message);else{e.emit("update-success",n),this.localAppRegistry.emit("document-updated",this.state.view),this.globalAppRegistry.emit("document-updated",this.state.view);const t=this.findDocumentIndex(e);this.state.docs[t]=new(s())(n),this.trigger(this.state)}}))},updateComment(e){const t={...this.state.insert,isCommentNeeded:e};this.setState({insert:t})},findDocumentIndex(e){return(0,p.findIndex)(this.state.docs,(t=>e.getStringId()===t.getStringId()))},async getPage(e){const{ns:t,status:n,view:r}=this.state;if(e<0)return;if(n===at)return;const{filter:a,limit:o,sort:i,project:l,collation:p,maxTimeMS:m}=this.state.query,c=this.state.query.skip+20*e;let u=20;if(o){const e=o-c;if(e<1)return;e<u&&(u=e)}const g=this.dataService.startSession("CRUD"),d=new AbortController,h=d.signal;d.signal.addEventListener("abort",this.onAbort,{once:!0});const T={signal:h,session:g,skip:c,limit:u,sort:i,projection:l,collation:p,maxTimeMS:m,promoteValues:!1,bsonRegExp:!0};this.setState({status:at,abortController:d,sessions:[g],error:null});const y=this.debounceLoading();let f,b;try{b=await xt(this.dataService,t,a,T)}catch(e){b=[],f=e}const S=f?0:b.length;this.setState({error:f,status:f?ot:"fetchedPagination",docs:b.map((e=>new(s())(e))),start:c+1,end:c+S,page:e,table:this.getInitialTableState(),resultId:kt(),abortController:null,sessions:null}),d.signal.removeEventListener("abort",this.onAbort),this.localAppRegistry.emit("documents-paginated",r,b),this.globalAppRegistry.emit("documents-paginated",r,b),y()},closeInsertDocumentDialog(){this.setState({insert:this.getInitialInsertState()})},openInsertDocumentDialog(e,t){const n=new(s())(e,!1);if(t){Nt("Document Cloned",{mode:this.modeForTelemetry()});for(const e of n.elements)if("_id"===e.currentKey){n.elements.remove(e);break}}const r=R.EJSON.stringify(n.generateObject(),null,2);this.setState({insert:{doc:n,jsonDoc:r,jsonView:!0,message:"",mode:Dt,isOpen:!0,isCommentNeeded:!0}})},openImportFileDialog(){this.globalAppRegistry.emit("open-import",{namespace:this.state.ns})},openExportFileDialog(){const{filter:e,limit:t,skip:n}=this.state.query;this.globalAppRegistry.emit("open-export",{namespace:this.state.ns,query:{filter:e,limit:t,skip:n},count:this.state.count})},toggleInsertDocument(e){if("JSON"===e){const e=R.EJSON.stringify(this.state.insert.doc.generateObject(),null,2);this.setState({insert:{doc:this.state.insert.doc,jsonView:!0,jsonDoc:e,message:"",mode:Dt,isOpen:!0,isCommentNeeded:this.state.insert.isCommentNeeded}})}else{let e;e=""===this.state.insert.jsonDoc?this.state.insert.doc:new(s())(R.EJSON.parse(this.state.insert.jsonDoc),!1),this.setState({insert:{doc:e,jsonView:!1,jsonDoc:this.state.insert.jsonDoc,message:"",mode:Dt,isOpen:!0,isCommentNeeded:this.state.insert.isCommentNeeded}})}},toggleInsertDocumentView(e){const t="JSON"===e;this.setState({insert:{doc:{},jsonDoc:this.state.insert.jsonDoc,jsonView:t,message:"",mode:Dt,isOpen:!0,isCommentNeeded:this.state.insert.isCommentNeeded}})},updateJsonDoc(e){this.setState({insert:{doc:{},jsonDoc:e,jsonView:!0,message:"",mode:Dt,isOpen:!0,isCommentNeeded:this.state.insert.isCommentNeeded}})},insertMany(){const e=R.EJSON.parse(this.state.insert.jsonDoc);Nt("Document Inserted",{mode:this.state.insert.jsonView?"json":"field-by-field",multiple:e.length>1}),this.dataService.insertMany(this.state.ns,e,{},(t=>{if(t)return this.setState({insert:{doc:{},jsonDoc:this.state.insert.jsonDoc,jsonView:!0,message:t.message,mode:wt,isOpen:!0,isCommentNeeded:this.state.insert.isCommentNeeded}});const n={ns:this.state.ns,view:this.state.view,mode:this.state.insert.jsonView?"json":"default",multiple:!0,docs:e};this.localAppRegistry.emit("document-inserted",n),this.globalAppRegistry.emit("document-inserted",n),this.state.insert=this.getInitialInsertState(),this.refreshDocuments()}))},insertDocument(){let e;Nt("Document Inserted",{mode:this.state.insert.jsonView?"json":"field-by-field",multiple:!1}),e=this.state.insert.jsonView?R.EJSON.parse(this.state.insert.jsonDoc):this.state.insert.doc.generateObject(),this.dataService.insertOne(this.state.ns,e,{},(t=>{if(t)return this.setState({insert:{doc:this.state.insert.doc,jsonDoc:this.state.insert.jsonDoc,jsonView:this.state.insert.jsonView,message:t.message,mode:wt,isOpen:!0,isCommentNeeded:this.state.insert.isCommentNeeded}});const n=Object.assign({},this.state.query.filter,{_id:e._id});this.dataService.count(this.state.ns,n,{},((t,n)=>{if(t)return this.setState({insert:this.getInitialInsertState()});const r={ns:this.state.ns,view:this.state.view,mode:this.state.insert.jsonView?"json":"default",multiple:!1,docs:[e]};if(this.localAppRegistry.emit("document-inserted",r),this.globalAppRegistry.emit("document-inserted",r),n>0)return this.setState({docs:this.state.docs.concat([new(s())(e)]),count:this.state.count+1,end:this.state.end+1,insert:this.getInitialInsertState()});this.setState({count:this.state.count+1,insert:this.getInitialInsertState()})}))}))},drillDown(e,t,n){this.setState({table:{path:this.state.table.path.concat([t.currentKey]),types:this.state.table.types.concat([t.currentType]),doc:e,editParams:n}})},pathChanged(e,t){this.setState({table:{doc:this.state.table.doc,editParams:this.state.table.editParams,path:e,types:t}})},viewChanged(e){this.globalAppRegistry.emit("document-view-changed",e),this.localAppRegistry.emit("document-view-changed",e),this.setState({view:e})},isCountHintSafe(){const{isTimeSeries:e,query:t={}}=this.state,{filter:n}=t;return!(e||n&&Object.keys(n).length)},isInitialQuery:e=>(0,p.isEmpty)(e.filter)&&(0,p.isEmpty)(e.project)&&(0,p.isEmpty)(e.collation),async refreshDocuments(){if(this.dataService&&!this.dataService.isConnected())return void Rt.warn(Ot(1001000072),"Documents","Trying to refresh documents but dataService is disconnected");const{ns:e,status:t,view:n,query:r={}}=this.state;if(t===at)return;const a={maxTimeMS:r.maxTimeMS,session:this.dataService.startSession("CRUD")},o={skip:r.skip,maxTimeMS:r.maxTimeMS>5e3?5e3:r.maxTimeMS,session:this.dataService.startSession("CRUD")};this.isCountHintSafe()&&(o.hint="_id_");const i={sort:r.sort,projection:r.project,skip:r.skip,limit:20,collation:r.collation,maxTimeMS:r.maxTimeMS,promoteValues:!1,bsonRegExp:!0,session:this.dataService.startSession("CRUD")};r.limit>0&&(o.limit=r.limit,i.limit=Math.min(20,r.limit)),Rt.info(Ot(1001000073),"Documents","Refreshing documents",{ns:e,withFilter:!(0,p.isEmpty)(r.filter),findOptions:i,countOptions:o});const l=new AbortController,m=l.signal;l.signal.addEventListener("abort",this.onAbort,{once:!0}),a.signal=m,o.signal=m,i.signal=m,async function(e,t,n,{signal:r,session:s,skip:a,limit:o,maxTimeMS:i,hint:l}){if(r.aborted)throw new Error(_t);const p={session:s,maxTimeMS:i,hint:l};let m;m=n&&Object.keys(n).length>0?n:{};const c=[{$match:m}];a&&c.push({$skip:a}),o&&c.push({$limit:o}),c.push({$count:"count"});const u=e.aggregate(t,c,p),g=()=>{u.close()};let d;r.addEventListener("abort",g,{once:!0});try{const e=await Lt(u.toArray(),r);d=e.length?e[0].count:0}catch(e){if(e.message===_t)throw e;Et("warning: unable to count documents",e),d=null}return r.removeEventListener("abort",g),d}(this.dataService,e,r.filter,o).then((e=>this.setState({count:e,loadingCount:!1}))).catch((e=>{if(e.message!==_t)throw e;this.setState({loadingCount:!1})}));const c=[It(this.dataService,e,a),xt(this.dataService,e,r.filter,i)];this.setState({status:at,abortController:l,sessions:[a.session,o.session,i.session],outdated:!1,error:null,count:null,loadingCount:!0});const u=this.debounceLoading(),g={};try{const[e,t]=await Promise.all(c);Object.assign(g,{status:this.isInitialQuery(r)?it:lt,isEditable:!this.hasProjection(r)&&this.isListEditable(),error:null,docs:t.map((e=>new(s())(e))),page:0,start:t.length>0?1:0,end:t.length,table:this.getInitialTableState(),shardKeys:e}),this.localAppRegistry.emit("documents-refreshed",n,t),this.globalAppRegistry.emit("documents-refreshed",n,t)}catch(e){Rt.error(Ot(1001000074),"Documents","Failed to refresh documents",e),Object.assign(g,{error:e,status:ot})}u(),Object.assign(g,{abortController:null,sessions:null,resultId:kt()}),l.signal.removeEventListener("abort",this.onAbort),this.setState(g)},async onAbort(){const{sessions:e}=this.state;if(e){this.setState({sessions:null});try{await this.dataService.killSessions(e)}catch(e){Rt.warn(Ot(1001000096),"Documents","Attempting to kill the session failed")}}},cancelOperation(){const{abortController:e}=this.state;e&&(this.setState({abortController:null}),e.abort())},debounceLoading(){this.setState({debouncingLoad:!0});const e=new Promise((e=>{setTimeout(e,200)}));let t;const n=new Promise((e=>{t=e}));return Promise.race([e,n]).then((()=>{this.setState({debouncingLoad:!1})})),t},hasProjection:e=>!!(e.project&&Object.keys(e.project).length>0),setDataService(e,t){e||(this.dataService=t)}});if(e.localAppRegistry){const n=e.localAppRegistry;n.on("query-changed",t.onQueryChanged.bind(t)),n.on("refresh-data",t.refreshDocuments.bind(t)),((e,t)=>{e.localAppRegistry=t})(t,e.localAppRegistry)}if(e.globalAppRegistry){const n=e.globalAppRegistry;n.on("instance-created",(({instance:e})=>{t.onInstanceCreated(e)})),n.on("refresh-data",(()=>{t.refreshDocuments()})),n.on("import-finished",(({ns:e})=>{e===t.state.ns&&t.refreshDocuments()})),((e,t)=>{e.globalAppRegistry=t})(t,n)}null!==e.isReadonly&&void 0!==e.isReadonly&&((e,t)=>{e.onReadonlyChanged(t)})(t,e.isReadonly),e.namespace&&((e,t)=>{e.onCollectionChanged(t)})(t,e.namespace),e.isTimeSeries&&((e,t)=>{e.onTimeSeriesChanged(t)})(t,e.isTimeSeries),e.dataProvider&&(((e,t,n)=>{e.setDataService(t,n)})(t,e.dataProvider.error,e.dataProvider.dataProvider),e.noRefreshOnConfigure||t.refreshDocuments());const n=Ct(e);return t.gridStore=n,t};function kt(){return Math.floor(Math.random()*2**53)}const Pt=JSON.parse('{"name":"@mongodb-js/compass-crud","productName":"Compass CRUD plugin","version":"12.22.0","description":"Compass Plugin for CRUD Operations","repository":{"type":"git","url":"https://github.com/mongodb-js/compass.git"},"main":"lib/index.js","types":"lib/index.d.ts","exports":{"webpack":"./src/index.js","require":"./lib/index.js"},"apiVersion":"3.0.0","scripts":{"clean":"rimraf lib","precompile":"npm run clean","compile":"cross-env NODE_ENV=production webpack --config ./config/webpack.prod.config.js","start":"cross-env NODE_ENV=development webpack-dev-server --config ./config/webpack.dev.config.js","start:watch":"npm run clean && webpack --config ./config/webpack.watch.config.js","pretest":"mongodb-runner start --port 27018","test":"cross-env NODE_ENV=test mocha-webpack \\"./src/**/*.spec.js\\"","test:watch":"cross-env NODE_ENV=test mocha-webpack \\"./src/**/*.spec.js\\" --watch","posttest":"mongodb-runner stop --port 27018","cover":"nyc npm run test","test-check-ci":"npm run check && npm run cover","depcheck":"depcheck","lint":"eslint \\"./src/**/*.{js,jsx}\\" \\"./test/**/*.js\\" \\"./electron/**/*.js\\" \\"./config/**/*.{js,jsx}\\"","check":"npm run depcheck && npm run lint","prepublishOnly":"npm run compile","test-ci":"npm run test","posttest-ci":"node ../../scripts/killall-mongo.js","bootstrap":"npm run compile"},"license":"SSPL","peerDependencies":{"@hot-loader/react-dom":"^16.9.0","@mongodb-js/compass-components":"^0.13.0","@mongodb-js/compass-query-bar":"^7.20.0","bson":"*","hadron-react-buttons":"^5.7.0","hadron-react-components":"^5.13.0","prop-types":"^15.7.2","react":"^16.14.0","react-dom":"^16.14.0","react-tooltip":"^3.11.1"},"devDependencies":{"@babel/cli":"^7.14.3","@babel/core":"^7.14.3","@babel/plugin-proposal-decorators":"^7.14.2","@babel/plugin-syntax-dynamic-import":"^7.8.3","@babel/preset-env":"^7.14.2","@babel/preset-react":"^7.13.13","@babel/register":"^7.13.16","@hot-loader/react-dom":"^16.9.0","@mongodb-js/compass-components":"^0.13.0","@mongodb-js/compass-query-bar":"^7.20.0","ace-builds":"^1.4.3","autoprefixer":"^9.4.6","babel-loader":"^8.2.2","chai":"^4.1.2","chai-as-promised":"*","chai-enzyme":"1.0.0-beta.1","classnames":"^2.2.6","core-js":"^3.12.1","cross-env":"^7.0.0","css-loader":"^4.3.0","depcheck":"^1.4.1","electron":"^13.5.1","enzyme":"^3.11.0","enzyme-adapter-react-16":"^1.15.2","eslint":"^7.25.0","eslint-config-mongodb-js":"^5.0.3","eslint-plugin-react":"^7.24.0","extract-text-webpack-plugin":"^4.0.0-beta.0","file-loader":"^5.1.0","font-awesome":"^4.7.0","hadron-app":"^4.21.0","hadron-app-registry":"^8.10.0","hadron-react-buttons":"^5.7.0","hadron-react-components":"^5.13.0","html-webpack-plugin":"^3.2.0","ignore-loader":"^0.1.2","istanbul-instrumenter-loader":"^3.0.1","jquery":"^3.0.0","jsdom":"^16.7.0","jsdom-global":"^3.0.2","less":"^3.11.1","less-loader":"^7.3.0","mocha":"^5.0.0","mocha-webpack":"^2.0.0-beta.0","mongodb-ace-mode":"^1.6.0","mongodb-connection-model":"^21.15.0","mongodb-data-service":"^21.19.0","mongodb-ns":"^2.3.0","mongodb-runner":"^4.8.3","node-loader":"^0.6.0","numeral":"^2.0.6","nyc":"^15.0.0","peer-deps-externals-webpack-plugin":"^1.0.4","pluralize":"^8.0.0","postcss-loader":"^2.1.6","prop-types":"^15.7.2","react":"^16.14.0","react-ace":"^9.5.0","react-dom":"^16.14.0","react-fontawesome":"^1.6.1","react-hot-loader":"^4.13.0","reflux":"^0.4.1","reflux-state-mixin":"github:mongodb-js/reflux-state-mixin","rimraf":"^3.0.0","semver":"^6.3.0","shebang-loader":"^0.0.1","sinon":"^8.1.1","sinon-chai":"^3.4.0","style-loader":"^2.0.0","url-loader":"^3.0.0","webpack":"^4.46.0","webpack-bundle-analyzer":"^3.1.0","webpack-cli":"^3.3.12","webpack-dev-server":"^3.11.2","webpack-merge":"^4.2.2","webpack-node-externals":"^3.0.0"},"dependencies":{"@mongodb-js/compass-logging":"^0.10.0","ag-grid-community":"20.2.0","ag-grid-react":"20.2.0","bson":"*","debug":"4.3.0","fast-json-parse":"^1.0.3","hadron-document":"^7.9.0","hadron-type-checker":"^6.8.0","lodash":"^4.17.15","moment":"^2.27.0","mongodb-ace-theme":"^1.6.0","react-click-outside":"^3.0.1","react-tooltip":"^3.11.1"},"homepage":"https://github.com/mongodb-js/compass","bugs":{"url":"https://jira.mongodb.org/projects/COMPASS/issues","email":"compass@mongodb.com"}}'),{StandardEditor:Ft,DateEditor:Ut,StringEditor:qt,Int32Editor:Gt,DoubleEditor:Ht,NullEditor:Vt,UndefinedEditor:Kt,ObjectIdEditor:Wt}=r.ElementEditor,Yt={component:dt,name:"Documents",hasQueryHistory:!0,order:1,configureStore:$t,storeName:"CRUD.Store",configureActions:yt,actionName:"CRUD.Actions"},zt={component:C,name:"STANDARD",order:1},Zt={component:Ft},Xt={component:Ut},Jt={component:Ht},Qt={component:qt},en={component:Gt},tn={component:Vt},nn={component:Kt},rn={component:Wt},sn=e=>{e.registerRole("Collection.Tab",Yt),e.registerRole("CRUD.Document",zt),e.registerRole("CRUD.Editor.Standard",Zt),e.registerRole("CRUD.Editor.Date",Xt),e.registerRole("CRUD.Editor.Double",Jt),e.registerRole("CRUD.Editor.String",Qt),e.registerRole("CRUD.Editor.Int32",en),e.registerRole("CRUD.Editor.Null",tn),e.registerRole("CRUD.Editor.Undefined",nn),e.registerRole("CRUD.Editor.ObjectID",rn)},an=e=>{e.deregisterRole("Collection.Tab",Yt),e.deregisterRole("CRUD.Document",zt),e.deregisterRole("CRUD.Editor.Standard",Zt),e.deregisterRole("CRUD.Editor.Date",Xt),e.deregisterRole("CRUD.Editor.Double",Jt),e.deregisterRole("CRUD.Editor.String",Qt),e.deregisterRole("CRUD.Editor.Int32",en),e.deregisterRole("CRUD.Editor.Null",tn),e.deregisterRole("CRUD.Editor.Undefined",nn),e.deregisterRole("CRUD.Editor.ObjectID",rn)},on=ct},29311:(e,t,n)=>{"use strict";n.r(t),n.d(t,{activate:()=>m,deactivate:()=>c,default:()=>u,metadata:()=>p});var r=n(2784),s=n(50517);class a extends r.Component{static displayName="DatabaseComponent";constructor(e){super(e),this.state={activeTab:0},this.setupTabs()}onTabClicked=e=>{this.state.activeTab!==e&&this.setState({activeTab:e})};setupTabs(){const e=global.hadronApp.appRegistry.getRole("Database.Tab"),t=[],n=e.map(((e,n)=>(t.push(e.name),r.createElement(s.ErrorBoundary,{displayName:e.displayName,key:n},r.createElement(e.component,null)))));this.tabs=t,this.views=n}render(){return r.createElement("div",{className:"database-module-database__14FIn"},r.createElement(s.TabNavBar,{"data-test-id":"database-tabs","aria-label":"Database Tabs",tabs:this.tabs,views:this.views,activeTabIndex:this.state.activeTab,onTabClicked:this.onTabClicked}))}}const o=a;class i extends r.Component{static displayName="DatabasePlugin";render(){return r.createElement(o,null)}}const l=i,p=JSON.parse('{"name":"@mongodb-js/compass-database","productName":"Database plugin","version":"2.21.0","apiVersion":"3.0.0","description":"Compass Database Plugin","main":"lib/index.js","exports":{"webpack":"./src/index.js","require":"./lib/index.js"},"scripts":{"clean":"rimraf lib","precompile":"npm run clean","compile":"cross-env NODE_ENV=production webpack --config ./config/webpack.prod.config.js","start":"webpack-dev-server --config ./config/webpack.dev.config.js","start:watch":"npm run clean && webpack --config ./config/webpack.watch.config.js","test":"cross-env NODE_ENV=test mocha-webpack \\"./src/**/*.spec.js\\"","test-watch":"cross-env NODE_ENV=test mocha-webpack \\"./src/**/*.spec.js\\" --watch","test-electron":"xvfb-maybe cross-env NODE_ENV=test karma start","test-cov":"nyc npm run test","check":"npm run lint && npm run depcheck","prepublishOnly":"npm run compile","lint":"eslint \\"./src/**/*.{js,jsx}\\" \\"./test/**/*.js\\" \\"./electron/**/*.js\\" \\"./config/**/*.{js,jsx}\\"","depcheck":"depcheck","test-ci":"npm run test","test-ci-electron":"echo \\"TODO(COMPASS-5555): These tests are broken and disabled for now\\"","bootstrap":"npm run compile"},"license":"SSPL","peerDependencies":{"@mongodb-js/compass-components":"^0.13.0","hadron-react-components":"^5.13.0","react":"^16.14.0","react-dom":"^16.14.0"},"devDependencies":{"@babel/cli":"^7.14.3","@babel/core":"^7.14.3","@babel/plugin-proposal-decorators":"^7.14.2","@babel/plugin-syntax-dynamic-import":"^7.8.3","@babel/preset-env":"^7.14.2","@babel/preset-react":"^7.13.13","@babel/register":"^7.13.16","@mongodb-js/compass-components":"^0.13.0","autoprefixer":"^9.4.6","babel-loader":"^8.2.2","chai":"^4.1.2","chai-enzyme":"1.0.0-beta.1","core-js":"^3.12.1","cross-env":"^7.0.0","css-loader":"^4.3.0","depcheck":"^1.4.1","electron":"^13.5.1","enzyme":"^3.11.0","enzyme-adapter-react-16":"^1.15.2","eslint":"^7.25.0","eslint-config-mongodb-js":"^5.0.3","eslint-plugin-react":"^7.24.0","extract-text-webpack-plugin":"^4.0.0-beta.0","file-loader":"^5.1.0","font-awesome":"^4.7.0","hadron-app":"^4.21.0","hadron-app-registry":"^8.10.0","hadron-react-components":"^5.13.0","html-webpack-plugin":"^3.2.0","ignore-loader":"^0.1.2","istanbul-instrumenter-loader":"^3.0.1","jsdom":"^16.7.0","jsdom-global":"^3.0.2","karma":"^6.3.4","karma-chai":"^0.1.0","karma-chai-sinon":"^0.1.5","karma-electron":"^7.0.0","karma-mocha":"^1.3.0","karma-mocha-reporter":"^2.2.5","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","less":"^3.11.1","less-loader":"^7.3.0","mocha":"^5.0.0","mocha-webpack":"^2.0.0-beta.0","mongodb-reflux-store":"^0.0.1","node-loader":"^0.6.0","nyc":"^15.0.0","peer-deps-externals-webpack-plugin":"^1.0.4","postcss-loader":"^2.1.6","react":"^16.14.0","react-dom":"^16.14.0","react-hot-loader":"^4.13.0","reflux":"^0.4.1","reflux-state-mixin":"github:mongodb-js/reflux-state-mixin","resolve":"^1.15.1","rimraf":"^3.0.1","semver":"^5.4.1","shebang-loader":"^0.0.1","sinon":"^8.1.1","sinon-chai":"^3.4.0","style-loader":"^2.0.0","url-loader":"^3.0.0","webpack":"^4.46.0","webpack-bundle-analyzer":"^3.0.3","webpack-cli":"^3.3.12","webpack-dev-server":"^3.11.2","webpack-merge":"^4.2.2","webpack-node-externals":"^3.0.0"},"homepage":"https://github.com/mongodb-js/compass","bugs":{"url":"https://jira.mongodb.org/projects/COMPASS/issues","email":"compass@mongodb.com"},"repository":{"type":"git","url":"https://github.com/mongodb-js/compass.git"}}');function m(e){e.registerComponent("Database.Workspace",l)}function c(e){e.deregisterComponent("Database.Workspace")}const u=l},58252:(e,t,n)=>{"use strict";n.d(t,{Z:()=>le});var r=n(2784),s=n(65955),a=n(50166),o=n(7688),i=n(11586),l=n(50517);const p=l.spacing[5],m=p,c=l.uiColors.gray.dark2,u=l.uiColors.gray.dark3,g=l.uiColors.gray.dark1,d=(0,l.css)({display:"flex",alignItems:"center",height:m,paddingLeft:l.spacing[5]}),h={database:(0,l.css)({paddingLeft:l.spacing[1]+l.spacing[2]}),collection:(0,l.css)({paddingLeft:l.spacing[5]})},T=({type:e="collection",style:t})=>r.createElement("div",{className:(0,l.cx)(d,h[e]),style:t},r.createElement(l.Placeholder,{darkMode:!0}));function y(){return y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y.apply(this,arguments)}const f=(0,l.css)({color:l.uiColors.white,display:"block",flex:"none",fontSize:0}),b=({glyph:e,className:t,...n})=>r.createElement("span",y({className:(0,l.cx)(f,t)},n),r.createElement(l.Icon,{size:"small",glyph:e})),S=(0,l.css)({flex:"none",width:`${l.spacing[4]}px !important`,height:`${l.spacing[4]}px !important`}),A=(0,l.css)({color:"currentColor !important"}),E=(0,r.forwardRef)((function({glyph:e,label:t,onClick:n,isActive:s,children:a,title:o,className:i,...p},m){return r.createElement(l.IconButton,y({ref:m,className:(0,l.cx)(S,s&&A,i),"aria-label":t,title:o,onClick:n,darkMode:!0},p),r.createElement(b,{role:"presentation",glyph:e}),a)})),_=(0,l.css)({flex:"none",marginLeft:"auto",alignItems:"center",display:"flex"}),x=(0,l.css)({"&:not(:first-child)":{marginLeft:l.spacing[1]}}),I=({actions:e,onAction:t,className:n,isActive:s,isHovered:a,shouldCollapseActionsToMenu:o=!1})=>{const i=(0,r.useRef)(null),[p,m]=(0,r.useState)(!1),c=(0,r.useCallback)((e=>{e.stopPropagation(),t(e.currentTarget.dataset.action),e.currentTarget.dataset.menuitem&&i.current&&(m(!1),i.current.focus())}),[t]);return 0!==e.length&&(s||a||p)?o&&e.length>1?r.createElement("div",{className:(0,l.cx)(_,n)},r.createElement(l.Menu,{open:p,setOpen:m,trigger:({onClick:e,children:t})=>r.createElement(E,{ref:i,glyph:"Ellipsis",label:"Show actions",title:"Show actions","data-testid":"show-actions",onClick:t=>{t.stopPropagation(),e()},isActive:s,className:x},t)},e.map((({action:e,label:t})=>r.createElement(l.MenuItem,{key:e,"data-testid":e,"data-action":e,"data-menuitem":!0,onClick:c},t))))):r.createElement("div",{className:(0,l.cx)(_,n)},e.map((({action:e,icon:t,label:n})=>r.createElement(E,{key:e,glyph:t,label:n,title:n,isActive:s,"data-action":e,onClick:c,className:x})))):null};function L(){return L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},L.apply(this,arguments)}const v=(0,l.css)({display:"flex",alignItems:"center",backgroundColor:c,cursor:"pointer"}),C=(0,l.css)({backgroundColor:g}),R=(0,l.css)({backgroundColor:u}),O=({id:e,level:t,setSize:n,posInSet:s,isExpanded:a,isActive:o,isHovered:i,isTabbable:p,onDefaultAction:m,children:c,className:u,...g})=>{const d=(0,l.useFocusRing)(),h=function(e){return{onClick:(0,r.useCallback)((t=>{t.stopPropagation(),e(t)}),[e]),onKeyDown:(0,r.useCallback)((t=>{t.target===t.currentTarget&&[" ","Enter"].includes(t.key)&&(t.preventDefault(),t.stopPropagation(),e(t))}),[e])}}(m),T=(0,l.mergeProps)({role:"treeitem","aria-level":t,"aria-setsize":n,"aria-posinset":s,"aria-expanded":a,tabIndex:p?0:-1,className:(0,l.cx)(v,o?C:i&&R,u)},g,h,d);return r.createElement("div",L({"data-id":e,"data-testid":`sidebar-database-${e}`},T),c)},N=(0,l.css)({overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}),j=({children:e,className:t,...n})=>r.createElement("span",L({className:(0,l.cx)(N,t)},n),e);function w(){return w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w.apply(this,arguments)}const D=(0,l.css)({padding:0,margin:0,background:"none",border:"none"}),B=(0,l.css)({padding:7,transition:"transform .16s linear",transform:"rotate(0deg)"}),M=(0,l.css)({transform:"rotate(90deg)"}),$=({onClick:e,isExpanded:t})=>r.createElement("button",{type:"button",tabIndex:-1,onClick:e,className:(0,l.cx)(D,B,t&&M)},r.createElement(b,{glyph:"CaretRight"})),k=(0,l.css)({height:p,paddingLeft:l.spacing[1],paddingRight:l.spacing[1]}),P=(0,l.css)({marginLeft:l.spacing[1]}),F=(0,l.css)({marginLeft:"auto"}),U=({id:e,name:t,posInSet:n,setSize:s,isExpanded:a,isActive:o,isReadOnly:i,isTabbable:p,style:m,onNamespaceAction:c,onDatabaseExpand:u})=>{const[g,d]=(0,l.useHoverState)(),h=(0,r.useCallback)((t=>{t.stopPropagation(),u(e,!a)}),[u,e,a]),T=(0,r.useCallback)((e=>{c(e.currentTarget.dataset.id,"select-database")}),[c]),y=(0,r.useCallback)((t=>{c(e,t)}),[e,c]),f=(0,r.useMemo)((()=>[{action:"create-collection",icon:"Plus",label:"Create collection"},{action:"drop-database",icon:"Trash",label:"Drop database"}]),[]);return r.createElement(O,w({id:e,"data-testid":`sidebar-database-${e}`,level:1,setSize:s,posInSet:n,isExpanded:a,isActive:o,isHovered:d,isTabbable:p,onDefaultAction:T,className:k,style:m},g),r.createElement($,{onClick:h,isExpanded:a}),r.createElement(j,{className:P},t),!i&&r.createElement(I,{className:F,onAction:y,isActive:o,isHovered:d,actions:f}))};function q(){return q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q.apply(this,arguments)}const G=({type:e})=>{const t=(0,r.useMemo)((()=>"timeseries"===e?"TimeSeries":"view"===e?"Visibility":"Folder"),[e]);return r.createElement(b,{glyph:t})},H=(0,l.css)({height:m,paddingLeft:l.spacing[5]+l.spacing[1],paddingRight:l.spacing[1]}),V=(0,l.css)({marginLeft:l.spacing[2]}),K=(0,l.css)({marginLeft:"auto"}),W=({id:e,name:t,type:n,posInSet:s,setSize:a,isActive:o,isReadOnly:i,isTabbable:p,style:m,onNamespaceAction:c})=>{const[u,g]=(0,l.useHoverState)(),d=(0,r.useCallback)((e=>{c(e.currentTarget.dataset.id,"select-collection")}),[c]),h=(0,r.useCallback)((t=>{c(e,t)}),[e,c]),T=(0,r.useMemo)((()=>{const e=[{action:"open-in-new-tab",label:"Open in New Tab",icon:"OpenNewTab"}];return i||("view"===n?e.push({action:"drop-collection",label:"Drop View",icon:"Trash"},{action:"duplicate-view",label:"Duplicate View",icon:"Copy"},{action:"modify-view",label:"Modify View",icon:"Edit"}):e.push({action:"drop-collection",label:"Drop Collection",icon:"Trash"})),e}),[n,i]);return r.createElement(O,q({id:e,"data-testid":`sidebar-collection-${e}`,level:2,setSize:a,posInSet:s,isActive:o,isHovered:g,isTabbable:p,onDefaultAction:d,className:H,style:m},u),r.createElement(G,{type:n}),r.createElement(j,{className:V},t),r.createElement(I,{className:K,onAction:h,isActive:o,isHovered:g,actions:T,shouldCollapseActionsToMenu:!0}))};function Y(e){return"placeholder"!==e.type}function z(e){return void 0!==e.isExpanded}function Z(e,t,n,r=0){for(let s=e+1,a=t.length;s<a;s++){const e=t[(s+r)%a];if(Y(e)&&(!n||n(e)))return e}return null}function X(e,t,n,r=0){const s=t.length;for(let a=e-1;a>=0;a--){const e=t[(a+r)%s];if(Y(e)&&(!n||n(e)))return e}return null}function J(e){return Z(-1,e)}const Q=(0,l.css)({maskImage:"linear-gradient(to bottom, black 30%, transparent 95%)"}),ee=()=>{const e=(0,r.useMemo)((()=>Array.from({length:10},((e,t)=>r.createElement(T,{key:t,type:"database"})))),[]);return r.createElement("div",{className:Q},e)};function te(){return te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},te.apply(this,arguments)}const ne=(0,l.css)({position:"relative"}),re=(0,r.memo)((function({index:e,style:t,data:n}){const{items:s,isReadOnly:a,activeNamespace:o,currentTabbable:i,onDatabaseExpand:p,onNamespaceAction:m}=n,c=s[e];return"database"===c.type?r.createElement(U,te({style:t,isReadOnly:a,isActive:c.id===o,isTabbable:c.id===i,onNamespaceAction:m,onDatabaseExpand:p},c)):r.createElement("div",{className:ne},r.createElement(l.FadeInPlaceholder,{isContentReady:"placeholder"!==c.type,contentContainerProps:{style:t},fallbackContainerProps:{style:t},content:()=>"placeholder"!==c.type&&r.createElement(W,te({isReadOnly:a,isActive:c.id===o,isTabbable:c.id===i,onNamespaceAction:m},c)),fallback:()=>r.createElement(T,null)}))}),a.wy),se=(0,l.css)({flex:"1 0 auto"}),ae=({databases:e,expanded:t={},activeNamespace:n="",onDatabaseExpand:m,onNamespaceAction:c,isReadOnly:u=!1,__TEST_REACT_AUTOSIZER_DEFAULT_WIDTH:g=null,__TEST_REACT_AUTOSIZER_DEFAULT_HEIGHT:d=null,__TEST_REACT_WINDOW_OVERSCAN:h=null})=>{const T=(0,r.useRef)(null),y=(0,i.Me)(),f=(0,r.useMemo)((()=>e.map((({_id:n,name:r,collections:s,collectionsLength:a,collectionsStatus:o},i)=>{const l=t[n],p={key:String(i),level:1,id:n,name:r,type:"database",isExpanded:l,setSize:e.length,posInSet:i+1};if(!l)return[p];const m=["ready","refreshing","error"].includes(o),c=Math.min(a,1/0);return[p].concat(m?s.map((({_id:e,name:t,type:n},r)=>({key:`${i}-${r}`,level:2,id:e,name:t,type:n,setSize:s.length,posInSet:r+1}))):Array.from({length:c},((e,t)=>({key:`${i}-${t}`,type:"placeholder"}))))})).flat()),[e,t]),b=(0,r.useCallback)(((e,t)=>{m(e.id,t)}),[m]),S=(0,r.useCallback)((e=>{const t=f.indexOf(e);t>=0&&T.current?.scrollToItem(t)}),[f]),[A,E]=function({items:e,activeItemId:t,onExpandedChange:n,onFocusMove:s=(()=>{})}){const a=(0,r.useRef)(null),o=t||J(e)?.id,[i,p]=(0,r.useState)(o),[m,c]=(0,r.useState)(0),[u,g]=(0,l.useFocusState)(),d=(0,r.useCallback)((e=>{a.current?.querySelector(`[role="treeitem"][data-id="${e}"]`)?.focus()}),[a]);(0,r.useEffect)((()=>{if(g===l.FocusState.FocusVisible||g===l.FocusState.Focus){c(-1);const t=Z(-1,e,(e=>e.id===i));if(t){s(t);const e=requestAnimationFrame((()=>{d(t.id)}));return()=>{cancelAnimationFrame(e)}}}g!==l.FocusState.FocusWithin&&g!==l.FocusState.FocusWithinVisible||c(-1),g===l.FocusState.NoFocus&&c(0)}),[i,d,g,e,s]),(0,r.useEffect)((()=>{p(o)}),[o]);const h=(0,r.useCallback)((t=>{const r=t.target;if("treeitem"!==r.getAttribute("role"))return;const a=r.dataset.id;if(!a)throw new Error("treeitems should have data-id attribute provided to work correctly");const o=Z(-1,e,(e=>e.id===a));if(!o)throw new Error("key event caught on an item that is not part of the items list");const i=e.indexOf(o);let l=null;if("Home"===t.key&&(t.stopPropagation(),l=J(e)),"End"===t.key&&(t.stopPropagation(),l=function(e){return X(e.length,e)}(e)),"ArrowDown"===t.key&&(t.preventDefault(),t.stopPropagation(),l=Z(i,e)),"ArrowUp"===t.key&&(t.preventDefault(),t.stopPropagation(),l=X(i,e)),"ArrowRight"===t.key&&(t.stopPropagation(),z(o)&&!1===o.isExpanded&&n(o,!0),z(o)&&!0===o.isExpanded)){const t=Z(i,e);t?.level===o.level+1&&(l=t)}if("ArrowLeft"===t.key&&(t.stopPropagation(),z(o)&&!0===o.isExpanded?n(o,!1):l=function(e,t,n){return X(t,n,(t=>t.level===e.level-1))}(o,i,e)),"*"===t.key){t.stopPropagation();const r=function(e,t,n){const r=[e];for(let s=t-1;s>=0;s--){const t=n[s];if(Y(t)&&(t.level===e.level&&r.push(t),t.level===e.level-1))break}for(let s=t+1,a=n.length;s<a;s++){const t=n[s];if(Y(t)&&(t.level===e.level&&r.push(t),t.level===e.level-1))break}return r}(o,i,e);for(const e of r)z(o)&&!1===e.isExpanded&&n(e,!0)}if(/^\p{Letter}$/u.test(t.key)){t.stopPropagation();const n=t.key.toLocaleLowerCase();l=Z(0,e,(e=>e.name.toLocaleLowerCase().startsWith(n)),i)}if(l&&l!==o){const e=l.id;s(l),p(e),requestAnimationFrame((()=>{d(e)}))}}),[n,s,d,e]);return[{ref:a,tabIndex:m,onKeyDown:h,...u},i]}({items:f,activeItemId:n,onExpandedChange:b,onFocusMove:S}),_=(0,r.useMemo)((()=>({items:f,isReadOnly:u,activeNamespace:n,currentTabbable:E,onNamespaceAction:c,onDatabaseExpand:m})),[f,u,n,E,c,m]),x=(0,r.useCallback)(((e,t)=>t.items[e].key),[]);return r.createElement(r.Fragment,null,r.createElement(s.T,{id:y},"Databases and Collections"),r.createElement("div",te({role:"tree","aria-labelledby":y,className:se},A,{"data-test-id":"databases-and-collections"}),r.createElement(o.Z,{disableWidth:Boolean(g),disableHeight:Boolean(d)},(({width:e=g,height:t=d})=>r.createElement(a.t7,{ref:T,width:e,height:t,itemData:_,itemCount:f.length,itemSize:p,itemKey:x,overscanCount:h??5},re)))))},oe=(0,l.css)({display:"flex",flex:"1 0 auto"}),ie=(0,l.css)({display:"flex",flex:"1 0 auto"}),le=({isReady:e,...t})=>r.createElement(l.FadeInPlaceholder,{className:oe,contentContainerProps:{className:ie},isContentReady:e,content:()=>r.createElement(ae,t),fallback:()=>r.createElement(ee,null)})},93982:(e,t,n)=>{"use strict";n.r(t),n.d(t,{OptionWriteSelector:()=>J,ReadStateStore:()=>V,TextReadButton:()=>W,TextWriteButton:()=>Z,WriteStateStore:()=>Y,activate:()=>me,deactivate:()=>ce,default:()=>ue,metadata:()=>Q});var r=n(2784),s=n(70602),a=n(13980),o=n.n(a),i=n(72779),l=n.n(i);const p="Single",m="ReplicaSetNoPrimary",c="ReplicaSetWithPrimary",u="Sharded",g="LoadBalanced",d=["primaryPreferred","secondary","secondaryPreferred","nearest"],h=d.concat(["primary"]),T=[p,c,g,u],y={Single:"Single",ReplicaSetNoPrimary:"Replica Set (No Primary)",ReplicaSetWithPrimary:"Replica Set (With Primary)",Sharded:"Sharded Cluster",LoadBalanced:"Using Load Balancer",Unknown:"Unknown"},f=e=>y[e],b=["Standalone","Mongos","RSPrimary"],S={Standalone:"Standalone",Mongos:"Mongos",PossiblePrimary:"Possible Primary",RSPrimary:"Primary",RSSecondary:"Secondary",RSArbiter:"Arbiter",RSOther:"Other",RSGhost:"Ghost",Unknown:"Unknown"},A=e=>S[e];class E extends r.Component{static displayName="Single";static propTypes={server:o().object.isRequired,isDataLake:o().bool.isRequired};renderCluster(){return r.createElement("div",{className:l()("single-module-topology-single-cluster__26Mg3")},r.createElement("div",{className:l()("single-module-topology-single-cluster-title__TRGcD")},"CLUSTER"),r.createElement("div",{className:l()("single-module-topology-single-cluster-type__380fN"),"data-test-id":"topology-single-cluster-type"},A(this.props.server.type)))}render(){return r.createElement("div",{className:l()("single-module-topology-single__2Cy2n")},r.createElement("div",{className:l()("single-module-topology-single-host__2htN6")},r.createElement("div",{className:l()("single-module-topology-single-host-title__12eE1")},"HOST"),r.createElement("div",{className:l()("single-module-topology-single-host-address__3etzY"),"data-test-id":"topology-single-host-address",title:this.props.server.address},this.props.server.address)),this.props.isDataLake?null:this.renderCluster())}}const _=E;class x extends r.Component{static displayName="Sharded";static propTypes={servers:o().array.isRequired};renderServerCount(){const e=this.props.servers.length;return e>1?`${e} Mongoses`:`${e} Mongos`}renderServers(){return this.props.servers.map(((e,t)=>r.createElement("div",{className:l()("sharded-module-topology-sharded-host-address__3tbOE"),key:t,title:e.address},e.address)))}render(){return r.createElement("div",{className:l()("sharded-module-topology-sharded__2kWD4")},r.createElement("div",{className:l()("sharded-module-topology-sharded-host__35fp7")},r.createElement("div",{className:l()("sharded-module-topology-sharded-host-title__1E06V")},this.props.servers.length>1?"HOSTS":"HOST"),this.renderServers()),r.createElement("div",{className:l()("sharded-module-topology-sharded-cluster__6uTUG")},r.createElement("div",{className:l()("sharded-module-topology-sharded-cluster-title__1fbac")},"CLUSTER"),r.createElement("div",{className:l()("sharded-module-topology-sharded-cluster-name__1YWTi")},"Sharded"),r.createElement("div",{className:l()("sharded-module-topology-sharded-cluster-nodes__120R0")},this.renderServerCount())))}}const I=x;class L extends r.Component{static displayName="ReplicaSet";static propTypes={servers:o().array.isRequired,setName:o().string.isRequired,topologyType:o().string.isRequired};renderServerCount(){const e=this.props.servers.length;return e>1?`${e} Nodes`:`${e} Node`}renderServers(){return this.props.servers.map(((e,t)=>r.createElement("div",{className:l()("replica-set-module-topology-replica-set-host-address__3_Fu6"),key:t,title:e.address},e.address)))}render(){return r.createElement("div",{className:l()("replica-set-module-topology-replica-set__1qpA0")},r.createElement("div",{className:l()("replica-set-module-topology-replica-set-host__e_QGd")},r.createElement("div",{className:l()("replica-set-module-topology-replica-set-host-title__3hdD5")},this.props.servers.length>1?"HOSTS":"HOST"),this.renderServers()),r.createElement("div",{className:l()("replica-set-module-topology-replica-set-cluster__3Ptmm")},r.createElement("div",{className:l()("replica-set-module-topology-replica-set-cluster-title__gEBli")},"CLUSTER"),r.createElement("div",{className:l()("replica-set-module-topology-replica-set-cluster-name__2YQkV")},"Replica Set (",this.props.setName,")"),r.createElement("div",{className:l()("replica-set-module-topology-replica-set-cluster-nodes__KIE9m")},this.renderServerCount())))}}const v=L;class C extends r.Component{static displayName="Using Load Balancer";static propTypes={server:o().object.isRequired};render(){return r.createElement("div",{className:l()("load-balanced-module-topology-load-balanced__1tyQw")},r.createElement("div",{className:l()("load-balanced-module-topology-load-balanced-host__2oVoc")},r.createElement("div",{className:l()("load-balanced-module-topology-load-balanced-host-title__2jXeE")},"HOST (Load Balancer)"),this.props.server.address))}}const R=C;class O extends r.Component{static displayName="Unknown";static propTypes={servers:o().array.isRequired,isDataLake:o().bool.isRequired};renderServerCount(){const e=this.props.servers.length;return e>1?`${e} Servers`:`${e} Server`}renderCluster(){return r.createElement("div",{className:l()("unknown-module-topology-unknown-cluster__2E-Z6")},r.createElement("div",{className:l()("unknown-module-topology-unknown-cluster-title__1pGEZ")},"CLUSTER"),r.createElement("div",{className:l()("unknown-module-topology-unknown-cluster-type__3iFR6")},"Unknown"),r.createElement("div",{className:l()("unknown-module-topology-unknown-cluster-nodes__wCRM9")},this.renderServerCount()))}renderServers(){return this.props.servers.map(((e,t)=>r.createElement("div",{className:l()("unknown-module-topology-unknown-host-address__2AQGI"),key:t},e.address)))}render(){return r.createElement("div",{className:l()("unknown-module-topology-unknown__2DgJq")},r.createElement("div",{className:l()("unknown-module-topology-unknown-host__3pRUi")},r.createElement("div",{className:l()("unknown-module-topology-unknown-host-title__1TC-e")},this.props.servers.length>1?"HOSTS":"HOST"),this.renderServers()),this.props.isDataLake?null:this.renderCluster())}}const N=O,j={"topology-single":"deployment-awareness-module-topology-single__cFUra","topology-replica-set":"deployment-awareness-module-topology-replica-set__10Vhx","topology-sharded":"deployment-awareness-module-topology-sharded__2XDrL","topology-unknown":"deployment-awareness-module-topology-unknown__3WuRi","topology-single-address":"deployment-awareness-module-topology-single-address__2J-Vt","topology-single-type":"deployment-awareness-module-topology-single-type__mUA6w","topology-sharded-name":"deployment-awareness-module-topology-sharded-name__2EVlt","topology-sharded-type":"deployment-awareness-module-topology-sharded-type__1hTiY","topology-sharded-type-name":"deployment-awareness-module-topology-sharded-type-name__qn_X9","topology-sharded-mongos":"deployment-awareness-module-topology-sharded-mongos__3li8o","topology-replica-set-name":"deployment-awareness-module-topology-replica-set-name__33RxZ","topology-unknown-name":"deployment-awareness-module-topology-unknown-name__16ucc","topology-replica-set-type":"deployment-awareness-module-topology-replica-set-type__16A4b","topology-unknown-type":"deployment-awareness-module-topology-unknown-type__Yu-nA","topology-replica-set-type-name":"deployment-awareness-module-topology-replica-set-type-name__1z45F","topology-unknown-type-name":"deployment-awareness-module-topology-unknown-type-name__3X_eT","topology-replica-set-nodes":"deployment-awareness-module-topology-replica-set-nodes__1JEn2","topology-unknown-nodes":"deployment-awareness-module-topology-unknown-nodes__17RJj"};class w extends r.Component{static displayName="DeploymentAwarenessComponent";static propTypes={servers:o().array,setName:o().string,topologyType:o().string,isDataLake:o().bool};renderTopologyInfo(){switch(this.props.topologyType){case p:return r.createElement(_,{server:this.props.servers[0],isDataLake:this.props.isDataLake});case u:return r.createElement(I,{servers:this.props.servers});case m:case c:return r.createElement(v,this.props);case g:return r.createElement(R,{server:this.props.servers[0]});default:return r.createElement(N,{servers:this.props.servers,isDataLake:this.props.isDataLake})}}render(){return r.createElement("div",{className:l()(j["deployment-awareness"]),"data-test-id":"deployment-awareness"},this.renderTopologyInfo())}}const D=w;var B=n(10862),M=n.n(B),$=n(99837),k=n.n($);const P=M().createStore({mixins:[k().store],onActivated(e){this.appRegistry=e,e.on("data-service-connected",this.onDataServiceConnected.bind(this)),e.on("instance-created",(({instance:e})=>{e.on("change:status",this.onInstanceStatusChange.bind(this))}))},onInstanceStatusChange({isAtlas:e,dataLake:t},n){if("ready"===n&&e){const e=t.isDataLake?"adl":"atlas";this.setState({isDataLake:t.isDataLake,env:e}),this.appRegistry.emit("compass:deployment-awareness:topology-changed",{topologyType:this.state.topologyType,setName:this.state.setName,servers:this.state.servers,env:e})}},onDataServiceConnected(e,t){t.on("topologyDescriptionChanged",this.topologyDescriptionChanged.bind(this));const n=t.getLastSeenTopology();null!==n&&this._onNewTopologyDescription(n)},topologyDescriptionChanged(e){this._onNewTopologyDescription(e.newDescription)},_onNewTopologyDescription(e){const t=[];for(const n of e.servers.values())t.push({address:n.address,type:n.type,tags:n.tags});this.state.topologyType!==e.type&&this.appRegistry.emit("compass:deployment-awareness:topology-changed",{topologyType:e.type,setName:e.setName,servers:t,env:this.state.env}),this.setState({topologyType:e.type,setName:e.setName,servers:t})},getInitialState:()=>({topologyType:"Unknown",setName:"",servers:[],isDataLake:!1,env:"on-prem"})}),F=M().createActions([]);function U(){return U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},U.apply(this,arguments)}class q extends r.Component{static displayName="ConnectedDeploymentAwarenessComponent";render(){return r.createElement(s.StoreConnector,{store:P},r.createElement(D,U({actions:F},this.props)))}}const G=q;var H=n(15251);const V=M().createStore({mixins:[k().store],init(){P.listen(this.topologyChanged.bind(this))},onActivated(e){e.on("data-service-connected",this.onDataServiceConnected.bind(this)),e.on("data-service-disconnected",this.onDataServiceDisconnected.bind(this))},onDataServiceConnected(e,t){this.setState({dataService:t})},onDataServiceDisconnected(){this.setState({dataService:null})},topologyChanged(e){if(this.state.dataService&&this.state.dataService.isConnected()){const t=e.topologyType,n=this.state.dataService.getReadPreference(),r=((e,t)=>{switch(e){case"Unknown":return!1;case m:return d.includes(t);case c:return h.includes(t);default:return!0}})(t,n);this.setState({isReadable:r,description:this._getDescription(r,t,n)})}},getInitialState:()=>({isReadable:!1,dataService:null,description:"Topology type not yet discovered."}),_getDescription:(e,t,n)=>`Topology type ${f(t)} in conjunction with read preference ${n} ${e?"is readable":"is not readable"}`});class K extends r.Component{static displayName="TextReadButton";static propTypes={className:o().string.isRequired,clickHandler:o().func.isRequired,dataTestId:o().string,disabled:o().bool,id:o().string,style:o().object,text:o().string.isRequired,tooltipId:o().string.isRequired};constructor(e){super(e),this.state=V.state}componentDidMount(){this.unsubscribeReadState=V.listen(this.readStateChanged.bind(this))}componentWillUnmount(){this.unsubscribeReadState()}readStateChanged(e){this.setState(e)}tooltipText(){if(!this.state.isReadable)return V.state.description}render(){const e=this.state.isReadable?null:r.createElement(s.Tooltip,{id:this.props.tooltipId});return r.createElement("div",{className:"tooltip-button-wrapper","data-tip":this.tooltipText(),"data-for":this.props.tooltipId},r.createElement(H.TextButton,{id:this.props.id,className:this.props.className,dataTestId:this.props.dataTestId,disabled:!this.state.isReadable||this.props.disabled,clickHandler:this.props.clickHandler,style:this.props.style,text:this.props.text}),e)}}const W=K,Y=M().createStore({mixins:[k().store],init(){P.listen(this.topologyChanged.bind(this))},topologyChanged(e){const t=e.topologyType;if((e=>T.includes(e))(t))if(t===p){const t=e.servers[0].type,n=(e=>b.includes(e))(t);this.setState({isWritable:n,description:this._generateSingleMessage(n,t)})}else this.setState({isWritable:!0,description:this._generateNonSingleMessage(!0,t)});else this.setState({isWritable:!1,description:this._generateNonSingleMessage(!1,t)})},getInitialState:()=>({isWritable:!1,description:"Topology type not yet discovered."}),_generateNonSingleMessage(e,t){const n=e?"is writable":"is not writable";return`Topology type: ${f(t)} ${n}`},_generateSingleMessage(e,t){const n=e?"is writable":"is not writable";return`Single connection to server type: ${A(t)} ${n}`}});class z extends r.Component{static displayName="TextWriteButton";static propTypes={className:o().string.isRequired,clickHandler:o().func.isRequired,dataTestId:o().string,isCollectionLevel:o().bool,text:o().string.isRequired,tooltipId:o().string.isRequired};componentDidMount(){this.unsubscribeWriteState=Y.listen(this.writeStateChanged.bind(this))}componentWillUnmount(){this.unsubscribeWriteState()}isWritable(){return Y.state.isWritable}writeStateChanged(e){this.setState(e)}tooltipText(){if(!this.isWritable())return Y.state.description}render(){const e=this.isWritable()?null:r.createElement(s.Tooltip,{id:this.props.tooltipId});return r.createElement("div",{className:"tooltip-button-wrapper","data-tip":this.tooltipText(),"data-for":this.props.tooltipId},r.createElement(H.TextButton,{className:this.props.className,dataTestId:this.props.dataTestId,disabled:!this.isWritable(),clickHandler:this.props.clickHandler,text:this.props.text}),e)}}const Z=z;class X extends r.Component{static displayName="OptionWriteSelector";static propTypes={label:o().string,title:o().oneOfType([o().string,o().object]),bsSize:o().string,className:o().string,id:o().string.isRequired,isCollectionLevel:o().bool,onSelect:o().func.isRequired,options:o().object.isRequired,tooltipId:o().string.isRequired};componentDidMount(){this.unsubscribeWriteState=Y.listen(this.writeStateChanged.bind(this))}componentWillUnmount(){this.unsubscribeWriteState()}isWritable(){return Y.state.isWritable}writeStateChanged(e){this.setState(e)}tooltipText(){if(!this.isWritable())return Y.state.description}render(){const e=this.isWritable()?null:r.createElement(s.Tooltip,{id:this.props.tooltipId});return r.createElement("div",{className:"tooltip-button-wrapper","data-tip":this.tooltipText(),"data-for":this.props.tooltipId},r.createElement(s.OptionSelector,{id:this.props.id,label:this.props.label,title:this.props.title,bsSize:this.props.bsSize,options:this.props.options,disabled:!this.isWritable(),onSelect:this.props.onSelect,className:this.props.className}),e)}}const J=X,Q=JSON.parse('{"name":"@mongodb-js/compass-deployment-awareness","productName":"Compass Deployment Awareness","version":"11.21.0","apiVersion":"3.0.0","description":"Compass Deployment Awareness Plugin","main":"lib/index.js","exports":{"webpack":"./src/index.js","require":"./lib/index.js"},"repository":{"type":"git","url":"https://github.com/mongodb-js/compass.git"},"scripts":{"clean":"rimraf lib","precompile":"npm run clean","compile":"cross-env NODE_ENV=production webpack --config ./config/webpack.prod.config.js","start":"webpack-dev-server --config ./config/webpack.dev.config.js","start:watch":"npm run clean && webpack --config ./config/webpack.watch.config.js","test":"cross-env NODE_ENV=test mocha-webpack \\"./src/**/*.spec.js\\"","test-watch":"cross-env NODE_ENV=test mocha-webpack \\"./src/**/*.spec.js\\" --watch","test-electron":"xvfb-maybe cross-env NODE_ENV=test karma start","test-cov":"nyc npm run test","check":"npm run lint && npm run depcheck","prepublishOnly":"npm run compile","lint":"eslint \\"./src/**/*.{js,jsx}\\" \\"./test/**/*.js\\" \\"./electron/**/*.js\\" \\"./config/**/*.{js,jsx}\\"","depcheck":"depcheck","test-ci":"npm run test","test-ci-electron":"echo \\"TODO(COMPASS-5555): These tests are broken and disabled for now\\"","bootstrap":"npm run compile"},"license":"SSPL","peerDependencies":{"hadron-react-buttons":"^5.7.0","hadron-react-components":"^5.13.0","react":"^16.14.0","react-dom":"^16.14.0"},"devDependencies":{"@babel/cli":"^7.14.3","@babel/core":"^7.14.3","@babel/plugin-proposal-decorators":"^7.14.2","@babel/plugin-syntax-dynamic-import":"^7.8.3","@babel/preset-env":"^7.14.2","@babel/preset-react":"^7.13.13","@babel/register":"^7.13.16","autoprefixer":"^9.7.4","babel-loader":"^8.2.2","chai":"^4.2.0","chai-enzyme":"1.0.0-beta.1","classnames":"^2.2.6","core-js":"^3.12.1","cross-env":"^7.0.0","css-loader":"^4.3.0","depcheck":"^1.4.1","electron":"^13.5.1","enzyme":"^3.11.0","enzyme-adapter-react-16":"^1.15.2","eslint":"^7.25.0","eslint-config-mongodb-js":"^5.0.3","extract-text-webpack-plugin":"^4.0.0-beta.0","file-loader":"^5.1.0","font-awesome":"^4.7.0","hadron-app":"^4.21.0","hadron-app-registry":"^8.10.0","hadron-ipc":"^2.9.0","hadron-react-buttons":"^5.7.0","hadron-react-components":"^5.13.0","html-webpack-plugin":"^3.2.0","ignore-loader":"^0.1.2","istanbul-instrumenter-loader":"^3.0.1","jsdom":"^16.7.0","jsdom-global":"^3.0.2","karma":"^6.3.4","karma-chai":"^0.1.0","karma-chai-sinon":"^0.1.5","karma-electron":"^7.0.0","karma-mocha":"^1.3.0","karma-mocha-reporter":"^2.2.5","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","less":"^3.11.1","less-loader":"^7.3.0","mocha":"^7.0.1","mocha-webpack":"^2.0.0-beta.0","mongodb-connection-model":"^21.15.0","mongodb-data-service":"^21.19.0","mongodb-js-metrics":"^7.9.0","mongodb-reflux-store":"^0.0.1","node-loader":"^0.6.0","nyc":"^15.0.0","peer-deps-externals-webpack-plugin":"^1.0.4","postcss-loader":"^2.1.6","prop-types":"^15.7.2","react":"^16.14.0","react-dom":"^16.14.0","react-hot-loader":"^4.13.0","reflux":"^0.4.1","reflux-state-mixin":"github:mongodb-js/reflux-state-mixin","resolve":"^1.15.1","rimraf":"^3.0.2","semver":"^5.4.1","shebang-loader":"^0.0.1","sinon":"^9.0.0","sinon-chai":"^3.5.0","storage-mixin":"^4.13.0","style-loader":"^2.0.0","url-loader":"^3.0.0","uuid":"^7.0.1","webpack":"^4.46.0","webpack-bundle-analyzer":"^3.6.0","webpack-cli":"^3.3.12","webpack-dev-server":"^3.11.2","webpack-merge":"^4.2.2","webpack-node-externals":"^3.0.0","xvfb-maybe":"^0.2.1"},"homepage":"https://github.com/mongodb-js/compass","bugs":{"url":"https://jira.mongodb.org/projects/COMPASS/issues","email":"compass@mongodb.com"}}'),ee="DeploymentAwareness",te=`${ee}.TextWriteButton`,ne=`${ee}.TextReadButton`,re=`${ee}.OptionWriteSelector`,se=`${ee}.Actions`,ae=`${ee}.Store`,oe=`${ee}.WriteStateStore`,ie=`${ee}.ReadStateStore`,le={name:ee,component:G,order:2},pe="InstanceDetails.Item";function me(e){e.registerRole(pe,le),e.registerComponent(ne,W),e.registerComponent(te,Z),e.registerComponent(re,J),e.registerAction(se,F),e.registerStore(ae,P),e.registerStore(oe,Y),e.registerStore(ie,V)}function ce(e){e.deregisterRole(pe,le),e.deregisterComponent(ne),e.deregisterComponent(te),e.deregisterComponent(re),e.deregisterAction(se),e.deregisterStore(ae),e.deregisterStore(oe),e.deregisterStore(ie)}const ue=G},30918:e=>{e.exports={INITIAL:"initial",OUTDATED:"outdated",EXECUTED:"executed"}},8630:e=>{e.exports=["MULTIPLE","UNAVAILABLE","COLLSCAN","COVERED","INDEX"]},88753:e=>{e.exports={DEFAULT_CARD_WIDTH:276,DEFAULT_CARD_HEIGHT:132,SHARD_CARD_HEIGHT:30,HIGHLIGHT_FIELD_HEIGHT:41,VERTICAL_PADDING:50}},47021:(e,t,n)=>{"use strict";n.r(t),n.d(t,{activate:()=>rt,configureStore:()=>et,deactivate:()=>st,default:()=>at,metadata:()=>tt});var r=n(2784),s=n(13980),a=n.n(s),o=n(16435),i=n(76635);const l="explain/namespace/NAMESPACE_CHANGED",p=e=>({type:l,namespace:e}),m=navigator.userAgent.toLowerCase();var c=n(65440),u=n(42895),g=n.n(u),d=n(88753),h=n.n(d),T=n(73837);const y=n(30453)("mongodb-compass:stores:explain-tree-stages");window.d3=global.d3=g(),n(26525);const f="explain/tree-stages/TREE_STAGES_CHANGED",b={nodes:[],links:[],width:0,height:0},S=(e,t)=>{void 0===t&&(t=e,e=void 0);const n={name:t.stage||t.shardName,nReturned:t.nReturned,curStageExecTimeMS:void 0!==t.executionTimeMillisEstimate?t.executionTimeMillisEstimate:t.executionTimeMillis,details:(0,i.omit)(t,["inputStage","inputStages","shards","executionStages"]),x:t.x,y:t.y,depth:t.depth,isShard:!!t.shardName,parent:e,children:[...c.i.getChildStages(t)].map((t=>S(e,t)))};return n.highlights=(e=>{switch(e.name){case"IXSCAN":return{"Index Name":e.details.indexName,"Multi Key Index":e.details.isMultiKey};case"PROJECTION":return{"Transform by":JSON.stringify(e.details.transformBy)};case"COLLSCAN":return{"Documents Examined":e.details.docsExamined};default:return{}}})(n),n},A=e=>{if(e.children&&0!==e.children.length){const t=(0,i.map)(e.children,A.bind(void 0));e.prevStageExecTimeMS=(0,i.max)(t)}else e.prevStageExecTimeMS=0;return e.isShard&&(e.curStageExecTimeMS=e.prevStageExecTimeMS),e.curStageExecTimeMS=Math.max(0,e.curStageExecTimeMS),e.curStageExecTimeMS},E={[f]:(e,t)=>{const n=t.explain;if(!(0,i.has)(n.rawExplainObject,"executionStats.executionStages"))return b;const r=S(n.rawExplainObject.executionStats.executionStages),s=g().layout.flextree().setNodeSizes(!0).nodeSize((e=>{const t=h().SHARD_CARD_HEIGHT,n=h().DEFAULT_CARD_HEIGHT+(0,i.keys)(e.highlights).length*h().HIGHLIGHT_FIELD_HEIGHT;let r=e.isShard?t:n;return r+=h().VERTICAL_PADDING,[h().DEFAULT_CARD_WIDTH,r]})).spacing(((e,t)=>e.parent===t.parent?40:70)),a=s.nodes(r),o=s.links(a),l=(0,i.maxBy)(a,(e=>Number(e.depth))),p=(0,i.maxBy)(a,(e=>Number(e.x))),m=(0,i.minBy)(a,(e=>Number(e.x)));y("stats",{leafNode:l,rightMostNode:p,leftMostNode:m});const c=m.x,u=l.y+l.y_size,d=p.x+p.x_size-m.x+30+26,f=A(a[0]);(0,i.forEach)(a,((e,t)=>{e.totalExecTimeMS=f,e.x+=-c,e.key=(0,T.format)("stage-%d",t)}));const E={nodes:a,links:o,width:d,height:u};return y("ExplainTreeStages state changed from",e,"to",E),E}};var _=n(39752),x=n.n(_),I=n(6909),L=n(30918),v=n.n(L);const C="json",R="tree",{track:O}=(0,I.createLoggerAndTelemetry)("COMPASS-EXPLAIN-UI"),N="explain/SWITCHED_TO_TREE_VIEW",j="explain/SWITCHED_TO_JSON_VIEW",w="explain/EXPLAIN_STATE_CHANGED",D="explain/EXPLAIN_PLAN_FETCHED",B={explainState:v().INITIAL,viewType:R,error:null,errorParsing:!1,executionSuccess:!1,executionTimeMillis:0,inMemorySort:!1,isCollectionScan:!1,isCovered:!1,isMultiKey:!1,isSharded:!1,indexType:"UNAVAILABLE",index:null,nReturned:0,namespace:"",numShards:0,parsedQuery:{},rawExplainObject:{},originalExplainData:{},totalDocsExamined:0,totalKeysExamined:0,usedIndexes:[],resultId:U()},M=(e,t)=>({...e,viewType:t.viewType}),$={[N]:M,[j]:M,[w]:(e,t)=>{let n="";return t.explainState===v().INITIAL?B:(n=t.explainState,{...e,explainState:n})},[D]:(e,t)=>({...e,...t.explain})},k=e=>({type:w,explainState:e}),P=e=>({type:D,explain:e}),F=e=>{if(!e)return"UNAVAILABLE";const t=(0,i.groupBy)(e.usedIndexes,"shard"),n=Object.values(t).map((e=>e.map((({index:e})=>e))));for(let e=0;e<n.length;e++)for(let t=e+1;t<n.length;t++)if(!(0,i.isEqual)(n[e],n[t]))return"MULTIPLE";return e.isCollectionScan?"COLLSCAN":e.isCovered?"COVERED":"INDEX"};function U(){return Math.floor(Math.random()*2**53)}var q=n(50517),G=n(70602);class H extends r.Component{static displayName="ZeroGraphic";render(){return r.createElement("svg",{className:"zero-graphic-module-zero-graphic__3fIXy",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 42 48"},r.createElement("g",{fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",transform:"translate(1 1)"},r.createElement("path",{stroke:"#16CC62",d:"M20,0 L20,6"}),r.createElement("path",{stroke:"#116149",d:"M18,0 L22,0"}),r.createElement("path",{stroke:"#16CC62",d:"M37.5,7.5 L33.632,11.368"}),r.createElement("path",{stroke:"#116149",d:"M36 6L39 9M6 26L10 26M10 16L13 19M10 36L13 33M34 26L30 26M20 40L20 36M20 12L20 16M30 36L27 33M30 16L27 19"}),r.createElement("path",{stroke:"#16CC62",d:"M40,26 C40,37.044 31.044,46 20,46 C8.954,46 0,37.044 0,26 C0,14.956 8.954,6 20,6 C31.044,6 40,14.956 40,26 L40,26 Z"})))}}const V=H,K=function(){return r.createElement(q.Banner,{className:"explain-cannot-visualize-banner-module-explain-cannot-visualize-banner__3PE7A",variant:q.BannerVariant.Warning},"Visual explain plan is not supported with this query on this collection in this Compass release. Please refer to the raw json output of the explain for insight into the operation.")};class W extends r.Component{static displayName="FlexBoxComponent";static propTypes={children:a().node,flexDirection:a().oneOf(["row","row-reverse","column","column-reverse"]),justifyContent:a().oneOf(["flex-start","flex-end","center","space-between","space-around"]),alignItems:a().oneOf(["flex-start","flex-end","center","stretch","baseline"]),alignContent:a().oneOf(["flex-start","flex-end","center","stretch","space-between","space-around"])};static defaultProps={flexDirection:"row",justifyContent:"flex-start",alignItems:"center",alignContent:"center"};render(){const e=(0,i.omit)(this.props,"children");return e.display="flex",r.createElement("div",{style:e},this.props.children)}}const Y=W;var z=n(72779),Z=n.n(z);const X={"summary-stat":"summary-stat-module-summary-stat__2vG0K","summary-stat-is-index":"summary-stat-module-summary-stat-is-index__1Xpon","summary-stat-label":"summary-stat-module-summary-stat-label__1UMd5","summary-stat-value":"summary-stat-module-summary-stat-value__27pCz","summary-stat-info-sprinkle":"summary-stat-module-summary-stat-info-sprinkle__287Ej","summary-stat-index-icon":"summary-stat-module-summary-stat-index-icon__23taA","summary-stat-has-nreturned":"summary-stat-module-summary-stat-has-nreturned__1Tezn"};class J extends r.Component{static displayName="SummaryStatComponent";static propTypes={dataTestId:a().string,dataLink:a().string,label:a().string.isRequired,value:a().any,openLink:a().func.isRequired};render(){const e=this.props.label,t=String(this.props.value),n=this.props.dataLink,s=this.props.dataTestId,a=n?r.createElement("i",{className:Z()(X["summary-stat-info-sprinkle"]),onClick:this.props.openLink.bind(this,n)}):null,o="nReturned"===this.props.dataLink?Z()(X["summary-stat-has-nreturned"]):"";return r.createElement("div",{className:Z()(X["summary-stat"],X[o]),"data-test-id":s},a,r.createElement("span",{className:Z()(X["summary-stat-label"])},e),r.createElement("span",{className:Z()(X["summary-stat-value"])},t))}}const Q=J;var ee=n(12170),te=n.n(ee);const ne="index-definition-type-module-index-definition-type-pair-field-sort__2O-0g";class re extends r.Component{static displayName="IndexDefinitionType";static propTypes={index:a().object.isRequired};renderDirection(e){return 1===e.value?r.createElement("span",{className:Z()(ne)},r.createElement("i",{className:"fa fa-arrow-circle-up fa-lg"})):-1===e.value?r.createElement("span",{className:Z()(ne)},r.createElement("i",{className:"fa fa-arrow-circle-down fa-lg"})):r.createElement("span",{className:Z()("index-definition-type-module-index-definition-type-pair-field-type__37EZ2")},e.value._bsontype?this.renderBsonValue(e.value):e.value)}renderBsonValue(e){return"Decimal128"===e._bsontype?e.toString():"Int32"===e._bsontype?e.valueOf():"Long"===e._bsontype?e.toNumber():e}render(){const e=(0,i.map)(this.props.index.fields.serialize(),(e=>r.createElement("span",{key:e.field,className:Z()("index-definition-type-module-index-definition-type-pair__11ImP")},r.createElement("span",{className:Z()("index-definition-type-module-index-definition-type-pair-field__uPzd0")},e.field,this.renderDirection(e)))));return r.createElement("div",{className:Z()("index-definition-type-module-index-definition__NjrPZ")},r.createElement("p",{className:Z()("index-definition-type-module-index-definition-type__3039T")},e))}}const se=re;var ae=n(8630),oe=n.n(ae);const ie={"summary-index-stat":"summary-index-stat-module-summary-index-stat__1TSc2","summary-index-stat-is-index":"summary-index-stat-module-summary-index-stat-is-index__C4vH2","summary-index-stat-label":"summary-index-stat-module-summary-index-stat-label__3eH37","summary-index-stat-value":"summary-index-stat-module-summary-index-stat-value__2WFZM","summary-index-stat-info-sprinkle":"summary-index-stat-module-summary-index-stat-info-sprinkle__ijsgR","summary-index-stat-index-icon":"summary-index-stat-module-summary-index-stat-index-icon__3CT3r","summary-index-stat-has-nreturned":"summary-index-stat-module-summary-index-stat-has-nreturned__2_fAP","summary-stat-value":"summary-index-stat-module-summary-stat-value__88REM"};class le extends r.Component{static displayName="SummaryIndexStatComponent";static propTypes={dataLink:a().string,indexType:a().oneOf(oe()).isRequired,index:a().object,openLink:a().func.isRequired};getIndexMessageText(){return{COLLSCAN:"No index available for this query.",COVERED:"Query covered by index:",MULTIPLE:"Shard results differ (see details below)",INDEX:"Query used the following index:"}[this.props.indexType]}getIndexMessageIcon(){const e=r.createElement(te(),{fixedWidth:!0,style:{color:"#507b32"},name:"check-circle"}),t=r.createElement(te(),{fixedWidth:!0,style:{color:"#fbb129"},name:"exclamation-triangle"});return{COLLSCAN:t,COVERED:e,MULTIPLE:t,INDEX:null,UNAVAILABLE:null}[this.props.indexType]}getIndexMessageColor(){return{COLLSCAN:"#7F6A4E",COVERED:"#507b32",MULTIPLE:"#7F6A4E",INDEX:"#000",UNAVAILABLE:"#000"}[this.props.indexType]}render(){const e=this.props.dataLink;return r.createElement("div",{className:Z()(ie["summary-index-stat"],ie["summary-stat-is-index"])},r.createElement("i",{className:Z()(ie["summary-index-stat-info-sprinkle"]),onClick:this.props.openLink.bind(this,e)}),r.createElement("span",null,r.createElement("span",{className:Z()(ie["summary-index-stat-index-icon"])},this.getIndexMessageIcon()),r.createElement("span",{className:Z()(ie["summary-index-stat-index-message"]),style:{color:this.getIndexMessageColor()}},this.getIndexMessageText())),this.props.index?r.createElement(se,{index:this.props.index}):null)}}const pe=le,me="explain-summary-module-summary-stats__CNOGP",ce="https://docs.mongodb.com/master/reference/explain-results/",ue={NRETURNED:`${ce}#explain.executionStats.nReturned`,KEYS_EXAMINED:`${ce}#explain.executionStats.totalKeysExamined`,DOCS_EXAMINED:`${ce}#explain.executionStats.totalDocsExamined`,EXECUTION_TIME:`${ce}#explain.executionStats.executionTimeMillis`,SORT_STAGE:`${ce}#sort-stage`,INDEX_USED:`${ce}#collection-scan-vs-index-use`};class ge extends r.Component{static displayName="ExplainSummaryComponent";static propTypes={nReturned:a().number.isRequired,totalKeysExamined:a().number.isRequired,totalDocsExamined:a().number.isRequired,executionTimeMillis:a().number.isRequired,inMemorySort:a().bool.isRequired,indexType:a().oneOf(oe()).isRequired,index:a().object,openLink:a().func.isRequired};render(){const e=this.props.inMemorySort?"yes":"no";return r.createElement("div",{className:"explain-summary-module-explain-summary__2G31t","data-test-id":"explain-summary"},r.createElement("h3",null,"Query Performance Summary"),r.createElement(Y,{alignItems:"flex-start"},r.createElement("div",{className:me},r.createElement(Q,{dataTestId:"documents-returned-summary",dataLink:ue.NRETURNED,label:"Documents Returned:",value:this.props.nReturned,openLink:this.props.openLink}),r.createElement(Q,{dataLink:ue.KEYS_EXAMINED,label:"Index Keys Examined:",value:this.props.totalKeysExamined,openLink:this.props.openLink}),r.createElement(Q,{dataLink:ue.DOCS_EXAMINED,label:"Documents Examined:",value:this.props.totalDocsExamined,openLink:this.props.openLink})),r.createElement("div",{className:me},r.createElement(Q,{dataLink:ue.EXECUTION_TIME,label:"Actual Query Execution Time (ms):",value:this.props.executionTimeMillis,openLink:this.props.openLink}),r.createElement(Q,{dataLink:ue.SORT_STAGE,label:"Sorted in Memory:",value:e,openLink:this.props.openLink}),r.createElement(pe,{dataLink:ue.INDEX_USED,indexType:this.props.indexType,index:this.props.index,openLink:this.props.openLink}))))}}const de=ge;var he=n(74727),Te=n.n(he),ye=n(37861),fe=n(72298);class be extends r.Component{static displayName="ExplainJSONComponent";static propTypes={originalExplainData:a().object.isRequired};copyToClipboard=()=>{fe.clipboard.writeText(JSON.stringify(this.props.originalExplainData))};render(){const e=new(Te())(this.props.originalExplainData);return r.createElement("div",{className:"explain-json-module-explain-json__2lDaK"},r.createElement("ol",{className:"explain-json-module-document-list__1Cb5u"},r.createElement(ye.Document,{copyToClipboard:this.copyToClipboard,doc:e,expandAll:!0})))}}const Se=be;var Ae=n(63584);const Ee={"explain-stage":"explain-stage-module-explain-stage__gQpnf","stage-header":"explain-stage-module-stage-header__3ymeG","explain-stage-is-shard":"explain-stage-module-explain-stage-is-shard__v4eNV",key:"explain-stage-module-key__1opSc",value:"explain-stage-module-value__2dkA7",core:"explain-stage-module-core__2Km1N",nReturned:"explain-stage-module-nReturned__3IHFD","exec-time":"explain-stage-module-exec-time__3JNK_",highlighted:"explain-stage-module-highlighted__3Xiuv",clock:"explain-stage-module-clock__2l_0N",face:"explain-stage-module-face__8zbeK",details:"explain-stage-module-details__3gbxm","details-output":"explain-stage-module-details-output__2swep"};let _e="",xe=100;class Ie extends r.Component{static displayName="ExplainStageComponent";static propTypes={name:a().string.isRequired,nReturned:a().number.isRequired,highlights:a().object.isRequired,curStageExecTimeMS:a().number.isRequired,prevStageExecTimeMS:a().number.isRequired,totalExecTimeMS:a().number.isRequired,isShard:a().bool.isRequired,details:a().object.isRequired,x:a().number.isRequired,y:a().number.isRequired,xoffset:a().number.isRequired,yoffset:a().number.isRequired};static defaultProps={name:"",nReturned:0,isShard:!1,totalExecTimeMS:1,curStageExecTimeMS:0,prevStageExecTimeMS:0,x:0,y:0,xoffset:0,yoffset:0,details:{}};constructor(e){super(e),this.state={detailsOpen:!1}}componentDidMount(){this.drawArc()}componentDidUpdate(){this.drawArc()}getNewZIndex(){return xe++}getDetails(){if(!this.state.detailsOpen)return null;const e=JSON.stringify(this.props.details,null," ")||"{}";return r.createElement("div",{className:Z()(Ee["details-output"])},r.createElement("pre",null,r.createElement("code",null,e)))}getHighlightSections(){return(0,i.map)(this.props.highlights,((e,t)=>((0,i.isBoolean)(e)&&(e=e?"yes":"no"),r.createElement("li",{key:(0,i.camelCase)(t),className:Z()(Ee["key-value-pair"])},r.createElement("span",{className:Z()(Ee.key)},t),r.createElement("span",{className:Z()(Ee.value)},e)))))}detailsButtonClicked(){const e=!this.state.detailsOpen;this.setState({detailsOpen:e})}drawArc(){const e=this.props.totalExecTimeMS,t=this.props.curStageExecTimeMS,n=this.props.prevStageExecTimeMS/e*2*Math.PI||0,r=t/e*2*Math.PI||0,s=n,a=g().svg.arc(),o=g().select(_e).selectAll("svg").data([null]).enter().append("svg").attr("width",60).attr("height",60).append("g").attr("transform","translate(30,30)");o.append("path").attr("class","prevArcPath").style("fill","#dfdfdf"),g().select(_e).select(".prevArcPath").attr("d",a({startAngle:0,endAngle:s,innerRadius:24,outerRadius:29})),o.append("path").attr("class","currArcPath").style("fill","#43B1E5"),g().select(_e).select(".currArcPath").attr("d",a({startAngle:n,endAngle:r,innerRadius:24,outerRadius:29}))}renderShardView(){const e=this.props.x+this.props.xoffset,t=this.props.y+this.props.yoffset;return r.createElement("div",{className:Z()(Ee["explain-stage"],Ee["explain-stage-is-shard"]),style:{zIndex:this.state.detailsOpen?this.getNewZIndex():"initial",top:t,left:e}},r.createElement("h3",{className:Z()(Ee["stage-header"])},this.props.name))}renderStageView(){const e=this.props.x+this.props.xoffset,t=this.props.y+this.props.yoffset,n=this.props.curStageExecTimeMS-this.props.prevStageExecTimeMS;return r.createElement("div",{"data-test-id":"explain-stage",className:Z()(Ee["explain-stage"]),style:{zIndex:this.state.detailsOpen?this.getNewZIndex():"initial",top:t,left:e}},r.createElement("h3",{className:Z()(Ee["stage-header"])},this.props.name),r.createElement("ul",{className:Z()(Ee.core)},r.createElement("li",{className:Z()(Ee["key-value-pair"],Ee.nReturned)},r.createElement("span",{className:Z()(Ee.key)},"nReturned"),r.createElement("span",{className:Z()(Ee.value)},this.props.nReturned)),r.createElement("li",{className:Z()(Ee["key-value-pair"],Ee["exec-time"])},r.createElement("span",{className:Z()(Ee.key)},"Execution Time"),r.createElement("span",{className:Z()(Ee.value)},r.createElement("div",{className:Z()(Ee.clock),ref:e=>{_e=e}},r.createElement("div",{className:Z()(Ee.face)},r.createElement("span",null,n),"ms"))))),r.createElement("ul",{className:Z()(Ee.highlighted)},this.getHighlightSections()),r.createElement("div",{className:Z()(Ee.details)},r.createElement(Ae.Z,{bsSize:"xsmall",bsStyle:"default",className:this.state.detailsOpen?"active":"",onClick:this.detailsButtonClicked.bind(this)},"Details"),this.getDetails()))}render(){return this.props.isShard?this.renderShardView():this.renderStageView()}}const Le=Ie;let ve="";class Ce extends r.Component{static displayName="ExplainTreeComponent";static propTypes={nodes:a().array,links:a().array,width:a().number,height:a().number};static defaultProps={nodes:[],links:[],width:0,height:0};shouldComponentUpdate(e){return e.nodes!==this.props.nodes}componentDidUpdate(){this.drawLinks()}getStages(){return(0,i.map)(this.props.nodes,(e=>r.createElement(Le,e)))}drawLinks(){const e=e=>`M${e.source.x+e.source.x_size/2},${e.source.y}\n      V${e.target.y-h().VERTICAL_PADDING/2}\n      H${e.target.x+h().DEFAULT_CARD_WIDTH/2}\n      V${e.target.y}`,t=g().select(ve).selectAll('svg[id="links"]').data([null]);t.enter().append("svg").attr("id","links").attr("width","100%").attr("height","100%").append("g"),t.on("dblclick.zoom",null).on("touchstart.zoom",null).on("mousewheel.zoom",null).on("MozMousePixelScroll.zoom",null);const n=t.select("g").selectAll("path").data(this.props.links,(e=>e.target.key)).attr("d",e);n.enter().append("path").style({fill:"none",stroke:"#dee0e3","stroke-width":"6px"}).attr("d",e),n.exit().remove()}render(){return r.createElement("div",{className:Z()("explain-tree-module-explain-tree__2S5gz"),style:{height:this.props.height,width:this.props.width},ref:e=>{ve=e}},this.getStages())}}const Re=Ce;function Oe(){return Oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oe.apply(this,arguments)}class Ne extends r.Component{static displayName="ExplainBodyComponent";static propTypes={explain:a().shape({errorParsing:a().bool,nReturned:a().number.isRequired,totalKeysExamined:a().number.isRequired,totalDocsExamined:a().number.isRequired,executionTimeMillis:a().number.isRequired,inMemorySort:a().bool.isRequired,indexType:a().oneOf(oe()).isRequired,index:a().object,viewType:a().string.isRequired,rawExplainObject:a().object.isRequired,originalExplainData:a().object.isRequired}),openLink:a().func.isRequired,treeStages:a().object.isRequired};renderSummary(){if(this.props.explain.viewType!==C&&!this.props.explain.errorParsing)return r.createElement(de,Oe({},this.props.explain,{openLink:this.props.openLink}))}renderDetailsView(){return this.props.explain.viewType===C?r.createElement(Se,{originalExplainData:this.props.explain.originalExplainData}):r.createElement(Re,this.props.treeStages)}render(){const{explain:e}=this.props;return r.createElement("div",{className:"explain-body-module-explain-body__36Wiu"},this.renderSummary(),e.errorParsing&&e.viewType===R&&r.createElement(K,null),this.renderDetailsView())}}const je=Ne;function we(){return we=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},we.apply(this,arguments)}class De extends r.Component{static displayName="ExplainStatesComponent";static propTypes={isEditable:a().bool.isRequired,openLink:a().func.isRequired,explain:a().shape({nReturned:a().number.isRequired,totalKeysExamined:a().number.isRequired,totalDocsExamined:a().number.isRequired,executionTimeMillis:a().number.isRequired,inMemorySort:a().bool.isRequired,indexType:a().oneOf(oe()).isRequired,index:a().object,viewType:a().string.isRequired,rawExplainObject:a().object.isRequired,originalExplainData:a().object.isRequired,explainState:a().string.isRequired,error:a().object,resultId:a().number.isRequired}),fetchExplainPlan:a().func.isRequired,changeExplainPlanState:a().func.isRequired,switchToTreeView:a().func.isRequired,switchToJSONView:a().func.isRequired,query:a().any,treeStages:a().object.isRequired,appRegistry:a().object.isRequired,queryExecuted:a().func.isRequired};constructor(e){super(e);const t=e.appRegistry.localAppRegistry;this.queryBarRole=t.getRole("Query.QueryBar")[0],this.queryBar=this.queryBarRole.component,this.queryBarStore=t.getStore(this.queryBarRole.storeName),this.queryBarActions=t.getAction(this.queryBarRole.actionName)}componentDidUpdate(){this.props.queryExecuted()}onViewSwitch(e){"Visual Tree"===e?this.props.switchToTreeView():"Raw JSON"===e&&this.props.switchToJSONView()}onExecuteExplainClicked(){this.props.changeExplainPlanState(v().EXECUTED),this.props.fetchExplainPlan(this.queryBarStore.state)}checkIfZeroState(){return this.props.explain.explainState===v().INITIAL||!this.props.isEditable}renderBanner(){return this.props.isEditable?this.props.explain.explainState===v().OUTDATED?r.createElement(G.StatusRow,{style:"warning"},'The explain content is outdated and no longer in sync\nwith the documents view. Press "Explain" again to see the explain plan for\nthe current query.'):this.props.explain.error?r.createElement(G.StatusRow,{style:"error"},this.props.explain.error.message):void 0:r.createElement(G.StatusRow,{style:"warning"},"Explain plans on readonly views are not supported.")}renderZeroState(){if(this.checkIfZeroState())return r.createElement("div",{key:"zero-state",className:"explain-states-module-zero-state-container__1h28i"},r.createElement(V,null),r.createElement(G.ZeroState,{header:"Evaluate the performance of your query",subtext:"Explain provides key execution metrics that help diagnose slow queries and optimize index usage."},r.createElement("div",null,r.createElement(q.Button,{onClick:this.onExecuteExplainClicked.bind(this),disabled:!this.props.isEditable,"data-test-id":"execute-explain-button",variant:q.ButtonVariant.Primary,size:q.ButtonSize.Large},"Execute Explain")),r.createElement(q.Link,{className:"explain-states-module-zero-state-link__1f4bi",href:"https://docs.mongodb.com/compass/master/query-plan/",target:"_blank"},"Learn more about explain plans")))}renderContent(){if(!this.checkIfZeroState())return r.createElement(je,we({key:"explain-body"},this.props))}renderQueryBar(){return r.createElement(this.queryBar,{store:this.queryBarStore,actions:this.queryBarActions,buttonLabel:"Explain",resultId:this.props.explain.resultId,onApply:this.onExecuteExplainClicked.bind(this),onReset:this.onExecuteExplainClicked.bind(this)})}renderViewSwitcher(){const e=this.props.explain.viewType===R?"Visual Tree":"Raw JSON";return r.createElement("div",{className:"explain-states-module-action-bar__3bgER"},r.createElement(G.ViewSwitcher,{label:"View Details As",dataTestId:"explain-states",buttonLabels:["Visual Tree","Raw JSON"],activeButton:e,disabled:this.checkIfZeroState(),onClick:this.onViewSwitch.bind(this)}))}render(){return[r.createElement("div",{key:"controls-container",className:"explain-states-module-controls-container__27VbK"},this.renderBanner(),this.renderQueryBar(),this.renderViewSwitcher()),this.renderZeroState(),this.renderContent()]}}const Be=De,Me="explain/query/QUERY_CHANGED",$e="explain/query/QUERY_EXECUTED",ke={filter:{},sort:null,project:null,skip:0,limit:0,collation:null,maxTimeMS:5e3,isChanged:!1};class Pe extends r.Component{static displayName="ExplainPlanComponent";render(){return r.createElement("div",{className:"explain-plan-module-root__29egc"},r.createElement(Be,this.props))}}const Fe=(0,o.$j)((e=>(0,i.pick)(e,["namespace","isEditable","explain","treeStages","appRegistry"])),{namespaceChanged:p,openLink:e=>()=>{if(m.indexOf("electron")>-1){const{shell:t}=n(72298);t.openExternal(e)}else window.open(e,"_new")},switchToTreeView:()=>({type:N,viewType:R}),switchToJSONView:()=>({type:j,viewType:C}),fetchExplainPlan:e=>(t,n)=>{const r=n(),s=r.dataService.dataService,a=r.namespace,o=r.indexes,l=e.filter,p={sort:e.sort,projection:e.project,skip:e.skip,limit:e.limit,maxTimeMS:e.maxTimeMS};let m=r.explain;e.collation&&(p.collation=e.collation),s&&s.explain(a,l,p,((e,n)=>{if(e)return m.resultId=U(),m.error=e,t(P(m));if(!(r=n).executionStats&&r.stages)return m.errorParsing=!0,m.originalExplainData=n,m.resultId=U(),t(P(m));var r;try{m=((e,t)=>{const n=new c.i(t),{namespace:r,parsedQuery:s,executionSuccess:a,nReturned:o,executionTimeMillis:i,totalKeysExamined:l,totalDocsExamined:p,rawExplainObject:m,originalExplainData:u,usedIndexes:g,isCovered:d,isMultiKey:h,inMemorySort:T,isCollectionScan:y,isSharded:f,numShards:b}=n;return{...e,namespace:r,parsedQuery:s,executionSuccess:a,nReturned:o,executionTimeMillis:i,totalKeysExamined:l,totalDocsExamined:p,rawExplainObject:m,originalExplainData:u,usedIndexes:g,isCovered:d,isMultiKey:h,inMemorySort:T,isCollectionScan:y,isSharded:f,numShards:b}})(m,n)}catch(e){return m.errorParsing=!0,m.originalExplainData=n,m.resultId=U(),t(P(m))}m=((e,t)=>({...e,indexType:F(e),index:e.usedIndexes.length>0&&"string"==typeof e.usedIndexes[0].index?(0,i.find)(t,(t=>t.name===e.usedIndexes[0].index)):null}))(m,o),m.resultId=U(),t(P(m)),t((e=>({type:f,explain:e}))(m));const s={with_filter:Object.entries(l).length>0,index_used:m.usedIndexes.length>0};O("Explain Plan Executed",s),t((0,_.globalAppRegistryEmit)("explain-plan-fetched",{viewMode:m.viewType,executionTimeMS:m.executionTimeMillis,inMemorySort:m.inMemorySort,isCollectionScan:m.isCollectionScan,isCovered:m.isCovered,isMultiKey:m.isMultiKey,isSharded:m.isSharded,indexType:m.indexType,index:m.index?m.index.serialize():null,numberOfDocsReturned:m.nReturned,numberOfShards:m.numShards,totalDocsExamined:m.totalDocsExamined,totalKeysExamined:m.totalKeysExamined,usedIndexes:m.usedIndexes}))}))},changeExplainPlanState:e=>t=>t(k(e)),explainStateChanged:k,queryExecuted:()=>({type:$e})})(Pe);class Ue extends r.Component{static displayName="ExplainPlanPlugin";static propTypes={store:a().object.isRequired};render(){return r.createElement(o.zt,{store:this.props.store},r.createElement(Fe,null))}}const qe=Ue;var Ge=n(18717),He=n(43292);const Ve="explain/data-service/DATA_SERVICE_CONNECTED",Ke={error:null,dataService:null},We="explain/edit-mode/EDIT_MODE_CHANGED",Ye="explain/indexes/INDEXES_CHANGED",ze=[],Ze={appRegistry:_.INITIAL_STATE,dataService:Ke,namespace:"",isEditable:!0,explain:B,indexes:ze,query:ke,treeStages:b},Xe=(0,Ge.combineReducers)({appRegistry:x(),dataService:function(e=Ke,t){return t.type===Ve?{error:t.error,dataService:t.dataService}:e},namespace:function(e="",t){return t.type===l?t.namespace:e},isEditable:function(e=!0,t){return t.type===We?t.isEditable:e},explain:function(e=B,t){const n=$[t.type];return n?n(e,t):e},indexes:function(e=ze,t){return t.type===Ye?t.indexes:e},query:function(e=ke,t){return t.type===Me?{...t.query,isChanged:!0}:t.type===$e?{...e,isChanged:!1}:e},treeStages:function(e=b,t){const n=E[t.type];return n?n(e,t):e}}),Je={[l]:(e,t)=>{const n={...Ze,dataService:e.dataService,appRegistry:e.appRegistry};return Xe(n,t)},"explain/reset":()=>({...Ze})},Qe=(e,t)=>{const n=Je[t.type];return n?n(e,t):Xe(e,t)},et=(e={})=>{const t=(0,Ge.createStore)(Qe,(0,Ge.applyMiddleware)(He.Z));if(e.localAppRegistry){const n=e.localAppRegistry;t.dispatch((0,_.localAppRegistryActivated)(n)),n.on("indexes-changed",(e=>{t.dispatch({type:Ye,indexes:e})})),n.on("query-changed",(e=>{t.dispatch({type:Me,query:e})})),n.on("subtab-changed",(e=>{if("Explain Plan"===e){const e=t.getState();!0===e.query.isChanged&&e.explain.explainState!==v().INITIAL&&t.dispatch(k(v().OUTDATED))}}))}if(e.globalAppRegistry){const n=e.globalAppRegistry;t.dispatch((0,_.globalAppRegistryActivated)(n))}var n;return e.dataProvider&&((e,t,n)=>{e.dispatch(((e,t)=>({type:Ve,error:e,dataService:t}))(t,n))})(t,e.dataProvider.error,e.dataProvider.dataProvider),e.namespace&&(t.dispatch(p(e.namespace)),t.dispatch(k(v().INITIAL))),e.isReadonly&&t.dispatch((n=e.isReadonly,{type:We,isEditable:n})),t},tt=JSON.parse('{"name":"@mongodb-js/compass-explain-plan","productName":"Explain Plan plugin","version":"5.24.0","apiVersion":"3.0.0","description":"Evaluate the performance of your quer","main":"lib/index.js","exports":{"webpack":"./src/index.js","require":"./lib/index.js"},"scripts":{"clean":"rimraf lib","precompile":"npm run clean","compile":"cross-env NODE_ENV=production webpack --config ./config/webpack.prod.config.js","start":"cross-env NODE_ENV=development webpack-dev-server --config ./config/webpack.dev.config.js","start:watch":"npm run clean && webpack --config ./config/webpack.watch.config.js","test":"cross-env NODE_ENV=test mocha-webpack \\"./src/**/*.spec.js\\"","test-watch":"cross-env NODE_ENV=test mocha-webpack \\"./src/**/*.spec.js\\" --watch","test-electron":"xvfb-maybe cross-env NODE_ENV=test karma start","test-cov":"nyc npm run test","check":"npm run lint && npm run depcheck","prepublishOnly":"npm run compile","lint":"eslint \\"./src/**/*.{js,jsx}\\" \\"./test/**/*.js\\" \\"./electron/**/*.js\\" \\"./config/**/*.{js,jsx}\\"","depcheck":"depcheck","test-ci":"npm run test","test-ci-electron":"echo \\"TODO(COMPASS-5555): These tests are broken and disabled for now\\"","bootstrap":"npm run compile"},"license":"SSPL","peerDependencies":{"@mongodb-js/compass-components":"^0.13.0","@mongodb-js/compass-crud":"^12.22.0","@mongodb-js/compass-field-store":"^7.21.0","@mongodb-js/compass-indexes":"^4.23.0","@mongodb-js/compass-query-bar":"^7.20.0","@mongodb-js/compass-query-history":"^8.21.0","d3":"^3.5.17","debug":"*","hadron-document":"^7.9.0","hadron-react-buttons":"^5.7.0","hadron-react-components":"^5.13.0","mongodb-query-parser":"^2.4.4","prop-types":"^15.7.2","react":"^16.14.0","react-bootstrap":"^0.32.1","react-dom":"^16.14.0","react-fontawesome":"^1.6.1","react-redux":"^5.0.6","redux-thunk":"^2.3.0","reflux-state-mixin":"github:mongodb-js/reflux-state-mixin"},"devDependencies":{"@babel/cli":"^7.14.3","@babel/core":"^7.14.3","@babel/plugin-proposal-decorators":"^7.14.2","@babel/plugin-syntax-dynamic-import":"^7.8.3","@babel/preset-env":"^7.14.2","@babel/preset-react":"^7.13.13","@babel/register":"^7.13.16","@babel/types":"^7.14.2","@mongodb-js/compass-components":"^0.13.0","@mongodb-js/compass-crud":"^12.22.0","@mongodb-js/compass-field-store":"^7.21.0","@mongodb-js/compass-indexes":"^4.23.0","@mongodb-js/compass-logging":"^0.10.0","@mongodb-js/compass-query-bar":"^7.20.0","@mongodb-js/compass-query-history":"^8.21.0","@mongodb-js/explain-plan-helper":"^0.7.0","autoprefixer":"^9.7.0","babel-loader":"^8.2.2","chai":"^4.2.0","chai-enzyme":"1.0.0-beta.1","classnames":"^2.2.6","core-js":"^3.12.1","cross-env":"^7.0.0","css-loader":"^4.3.0","d3":"^3.5.17","d3-flextree":"1.0.3","d3-timer":"1.0.10","debug":"4.3.0","depcheck":"^1.4.1","electron":"^13.5.1","enzyme":"^3.11.0","enzyme-adapter-react-16":"^1.15.2","eslint":"^7.25.0","eslint-config-mongodb-js":"^5.0.3","eslint-plugin-react":"^7.24.0","extract-text-webpack-plugin":"^4.0.0-beta.0","file-loader":"^5.1.0","font-awesome":"^4.7.0","hadron-app":"^4.21.0","hadron-app-registry":"^8.10.0","hadron-document":"^7.9.0","hadron-react-buttons":"^5.7.0","hadron-react-components":"^5.13.0","html-webpack-plugin":"^3.2.0","ignore-loader":"^0.1.2","istanbul-instrumenter-loader":"^3.0.1","jsdom":"^16.7.0","jsdom-global":"^3.0.2","karma":"^6.3.4","karma-chai":"^0.1.0","karma-chai-sinon":"^0.1.5","karma-electron":"^7.0.0","karma-mocha":"^1.3.0","karma-mocha-reporter":"^2.2.5","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","less":"^3.11.1","less-loader":"^7.3.0","mocha":"^7.0.1","mocha-webpack":"^2.0.0-beta.0","mongodb-connection-model":"^21.15.0","mongodb-data-service":"^21.19.0","mongodb-query-parser":"^2.4.4","mongodb-reflux-store":"^0.0.1","node-loader":"^0.6.0","nyc":"^15.0.0","peer-deps-externals-webpack-plugin":"^1.0.4","postcss-loader":"^2.1.6","prop-types":"^15.7.2","react":"^16.14.0","react-bootstrap":"^0.32.1","react-dom":"^16.14.0","react-fontawesome":"^1.6.1","react-hot-loader":"^4.13.0","react-redux":"^5.0.6","react-select-plus":"^1.2.0","redux":"^4.1.2","redux-thunk":"^2.3.0","reflux-state-mixin":"github:mongodb-js/reflux-state-mixin","resolve":"^1.15.1","rimraf":"^3.0.1","semver":"^7.1.1","shebang-loader":"^0.0.1","sinon":"^9.0.0","sinon-chai":"^3.3.0","style-loader":"^2.0.0","url-loader":"^3.0.0","webpack":"^4.46.0","webpack-bundle-analyzer":"^3.6.0","webpack-cli":"^3.3.12","webpack-dev-server":"^3.11.2","webpack-merge":"^4.2.2","webpack-node-externals":"^3.0.0","xvfb-maybe":"^0.2.1"},"dependencies":{"@mongodb-js/mongodb-redux-common":"^1.10.0","d3-flextree":"1.0.3","d3-timer":"1.0.10","lodash":"^4.17.15","reflux":"^0.4.1"},"homepage":"https://github.com/mongodb-js/compass","bugs":{"url":"https://jira.mongodb.org/projects/COMPASS/issues","email":"compass@mongodb.com"},"repository":{"type":"git","url":"https://github.com/mongodb-js/compass.git"}}'),nt={name:"Explain Plan",component:qe,order:4,configureStore:et,configureActions:()=>{},storeName:"ExplainPlan.Store"};function rt(e){e.registerRole("Collection.Tab",nt)}function st(e){e.deregisterRole("Collection.Tab",nt)}const at=qe},98259:(e,t,n)=>{"use strict";n.r(t),n.d(t,{activate:()=>ye,configureStore:()=>de,deactivate:()=>fe,default:()=>be,metadata:()=>he});var r=n(84935),s=n.n(r),a=n(13688),o=n.n(a),i=n(39752),l=n.n(i);const p="export-to-language/transpiled-expression/TRANSPILED_EXPRESSION_CHANGED",m="export-to-language/imports/IMPORTS_CHANGED",c="export-to-language/error/ERROR_CHANGED",u=e=>({type:c,error:e}),g=e=>(t,n)=>{const r=n(),a=r.outputLang,l=r.builders&&!("java"===a&&"Pipeline"===r.mode);try{let n;if(r.driver){const t=s()(r.namespace),i=Object.assign({options:{collection:t.collection,database:t.database,uri:r.uri}},e);n=o().shell[a].compileWithDriver(i,l)}else{const t="Query"===r.mode?e.filter:e.aggregation;n=o().shell[a].compile(t,l,!1)}t({type:p,transpiledExpression:n}),t((c=o().shell[a].getImports(r.driver),{type:m,imports:c})),t(u(null)),t((0,i.globalAppRegistryEmit)("compass:export-to-language:run",{language:a,showImports:r.showImports,type:r.mode,driver:r.driver}))}catch(e){return t(u(e.message))}var c},d="export-to-language/copy-success/COPY_SUCCESS_CHANGED",h="export-to-language/output-lang/OUTPUT_LANG_CHANGED",T="export-to-language/modal-open/MODAL_OPEN_CHANGED",y=e=>({type:T,modalOpen:e}),f="export-to-language/show-imports/SHOW_IMPORTS_CHANGED",b="export-to-language/builders/BUILDERS_CHANGED",S="export-to-language/driver/DRIVER_CHANGED";var A=n(15251),E=n(93367),_=n(4858),x=n(2784),I=n(3681),L=n(72779),v=n.n(L),C=n(13980),R=n.n(C);class O extends x.PureComponent{static displayName="SelectLangComponent";static propTypes={outputLangChanged:R().func.isRequired,inputExpression:R().object.isRequired,outputLang:R().string.isRequired,runTranspiler:R().func.isRequired};handleOutputSelect=e=>{this.props.outputLangChanged(e.value),this.props.runTranspiler(this.props.inputExpression)};render(){const e=this.props.outputLang||"";return x.createElement(I.ZP,{name:"select-lang",className:v()("select-lang-module-select-lang__3MTMs"),searchable:!1,clearable:!1,placeholder:"Python",value:e,onChange:this.handleOutputSelect,options:[{value:"java",label:"Java"},{value:"javascript",label:"Node"},{value:"csharp",label:"C#"},{value:"python",label:"Python 3"},{value:"ruby",label:"Ruby"}]})}}const N=O;var j=n(86186),w=(n(95095),n(21291));n(50021),n(81641),n(40900),n(33486),n(90407),n(75790);class D extends x.PureComponent{static displayName="EditorComponent";static propTypes={language:R().string,value:R().string.isRequired};static defaultProps={language:"javascript"};componentDidUpdate(){this.editor.setValue(this.props.value),this.editor.session.setMode(`ace/mode/${this.props.language}`),this.editor.clearSelection()}render(){const e=v()("editor-module-editor__178WF");return x.createElement("div",{className:e},x.createElement(w.default,{mode:this.props.language,defaultValue:"",value:this.props.value,theme:"mongodb",width:"100%",editorProps:{$blockScrolling:1/0},setOptions:{tabSize:2,fontSize:11,minLines:5,maxLines:1/0,showGutter:!0,readOnly:!0,highlightActiveLine:!1,highlightGutterLine:!1,useWorker:!1},onLoad:e=>{this.editor=e}}))}}const B=D;var M=n(66081),$=n.n(M);class k extends x.PureComponent{static displayName="ExportFormComponent";static propTypes={copySuccess:R().string,copyToClipboard:R().func.isRequired,imports:R().string.isRequired,showImports:R().bool.isRequired,inputExpression:R().object.isRequired,transpiledExpression:R().string.isRequired,mode:R().string.isRequired,outputLang:R().string.isRequired,error:R().string,from:R().string.isRequired,outputLangChanged:R().func.isRequired,copySuccessChanged:R().func.isRequired,runTranspiler:R().func.isRequired};getInput(){return""!==this.props.from?$()(this.props.from,null,2):""}getOutput(){const{showImports:e,imports:t,transpiledExpression:n,error:r}=this.props;return r?"":e&&""!==t?`${t}\n\n${this.props.transpiledExpression}`:n}copyOutputHandler=e=>{e.preventDefault(),this.props.copyToClipboard(this.getOutput()),this.props.copySuccessChanged("output"),setTimeout((()=>{this.props.copySuccessChanged(null)}),2500)};copyInputHandler=e=>{e.preventDefault(),this.props.copyToClipboard(this.props.from),this.props.copySuccessChanged("input"),setTimeout((()=>{this.props.copySuccessChanged(null)}),2500)};render(){const e=v()({"export-form-module-export-to-lang-query-output-copy__I9KFB":!0,"btn-sm":!0,"btn-primary":!0,btn:!0}),t=v()({"export-form-module-export-to-lang-query-input-copy__1y0Dt":!0,"btn-sm":!0,"btn-primary":!0,btn:!0}),n=this.props.error?x.createElement(j.Z,{bsStyle:"danger",className:v()("export-form-module-export-to-lang-query-input-error__2QRAD"),children:this.props.error}):"",r="output"===this.props.copySuccess?x.createElement("div",{className:v()("export-form-module-export-to-lang-query-output-bubble__2kDvH")},"Copied!"):"",s="input"===this.props.copySuccess?x.createElement("div",{className:v()("export-form-module-export-to-lang-query-input-bubble__3kkXo")},"Copied!"):"";return x.createElement("form",{name:"export-to-lang","data-test-id":"export-to-lang",className:"export-to-lang"},x.createElement("div",{className:v()("export-form-module-export-to-lang-headers__3-yXk")},x.createElement("p",{className:v()("export-form-module-export-to-lang-headers-input__2Omhn")},`My ${this.props.mode}:`),x.createElement("div",{className:v()("export-form-module-export-to-lang-headers-output__1zETs"),"data-test-id":"select-lang-field"},x.createElement("p",{className:v()("export-form-module-export-to-lang-headers-output-title__1pwHR")},`Export ${this.props.mode} To:`),x.createElement(N,this.props))),x.createElement("div",{className:v()("export-form-module-export-to-lang-query__2i_iB")},x.createElement("div",{className:v()("export-form-module-export-to-lang-query-input__2TxoU")},x.createElement(B,{value:this.getInput()}),s,x.createElement("div",{className:v()("export-form-module-export-to-lang-copy-input-container__119qP")},x.createElement(A.IconTextButton,{dataTestId:"export-to-lang-copy-input",clickHandler:this.copyInputHandler,className:t,iconClassName:"fa fa-copy"}))),x.createElement("div",{className:v()("export-form-module-export-to-lang-query-output__3MTia")},x.createElement(B,{language:this.props.outputLang,value:this.getOutput()}),r,x.createElement("div",{className:v()("export-form-module-export-to-lang-copy-output-container__zT0E5")},x.createElement(A.IconTextButton,{dataTestId:"export-to-lang-copy-output",clickHandler:this.copyOutputHandler,className:e,iconClassName:"fa fa-copy"})))),n)}}const P=k,F={"export-to-lang-modal-checkbox-builders":"export-modal-module-export-to-lang-modal-checkbox-builders__1G-I1","export-to-lang-modal-checkbox-imports":"export-modal-module-export-to-lang-modal-checkbox-imports__nYmYh","export-to-lang-modal-checkbox-driver":"export-modal-module-export-to-lang-modal-checkbox-driver__bi2k9"};var U=n(6909),q=n(26144),G=n.n(q);let H;function V(){return V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},V.apply(this,arguments)}const{track:K}=(0,U.createLoggerAndTelemetry)("COMPASS-EXPORT-TO-LANGUAGE-UI");class W extends x.PureComponent{static displayName="ExportModalComponent";static propTypes={copySuccess:R().string,copyToClipboard:R().func.isRequired,builders:R().bool.isRequired,driver:R().bool.isRequired,imports:R().string.isRequired,showImports:R().bool.isRequired,inputExpression:R().object.isRequired,transpiledExpression:R().string.isRequired,modalOpen:R().bool.isRequired,mode:R().string.isRequired,outputLang:R().string.isRequired,error:R().string,uri:R().string.isRequired,showImportsChanged:R().func.isRequired,buildersChanged:R().func.isRequired,driverChanged:R().func.isRequired,outputLangChanged:R().func.isRequired,copySuccessChanged:R().func.isRequired,modalOpenChanged:R().func.isRequired,runTranspiler:R().func.isRequired};showHandler=()=>{K("Query"===this.props.mode?"Query Export Opened":"Aggregation Export Opened",{...this.stageCountForTelemetry()}),K("Screen",{name:"export_to_language_modal"})};closeHandler=()=>{this.props.modalOpenChanged(!1)};importsHandler=()=>{this.props.showImportsChanged(!this.props.showImports)};buildersHandler=()=>{this.props.buildersChanged(!this.props.builders),this.props.runTranspiler(this.props.inputExpression)};driverHandler=()=>{this.props.driverChanged(!this.props.driver),this.props.runTranspiler(this.props.inputExpression)};stageCountForTelemetry=()=>{if("Query"===this.props.mode)return{};try{return{num_stages:(e=this.props.inputExpression.aggregation,H||(H=G().createContext(Object.create(null),{codeGeneration:{strings:!1,wasm:!1},microtaskMode:"afterEvaluate"}),G().runInContext(["BSONRegExp","DBRef","Decimal128","Double","Int32","Long","Int64","MaxKey","MinKey","ObjectID","ObjectId","BSONSymbol","Timestamp","Code","Buffer","Binary"].map((e=>`function ${e}() {}`)).join("\n"),H)),G().runInContext("("+e+")",H,{timeout:100}).length)}}catch(e){return{num_stages:-1}}var e};copySuccessChanged=e=>{if("output"===e){let e;e="Query"===this.props.mode?"Query Exported":"Aggregation Exported",K(e,{language:this.props.outputLang,with_import_statements:this.props.showImports,with_builders:this.props.builders,with_drivers_syntax:this.props.driver,...this.stageCountForTelemetry()})}this.props.copySuccessChanged(e)};renderBuilderCheckbox=()=>"java"===this.props.outputLang&&"Query"===this.props.mode?x.createElement("div",{className:v()(F["export-to-lang-modal-checkbox-builders"])},x.createElement(E.Z,{defaultChecked:this.props.builders,"data-test-id":"export-to-lang-checkbox-builders",onClick:this.buildersHandler},"Use Builders")):null;render(){return x.createElement(_.Z,{show:this.props.modalOpen,backdrop:"static",bsSize:"large",onHide:this.closeHandler,onShow:this.showHandler,"data-test-id":"export-to-lang-modal",className:v()("with-global-bootstrap-styles",F["export-to-lang-modal"])},x.createElement(_.Z.Header,null,x.createElement(_.Z.Title,{"data-test-id":"export-to-lang-modal-title"},`Export ${this.props.mode} To Language`)),x.createElement(_.Z.Body,{"data-test-id":"export-to-lang-modal-body"},x.createElement(P,V({},this.props,{copySuccessChanged:this.copySuccessChanged,from:"Query"===this.props.mode?this.props.inputExpression.filter:this.props.inputExpression.aggregation})),x.createElement("div",{className:v()(F["export-to-lang-modal-checkbox-imports"])},x.createElement(E.Z,{"data-test-id":"export-to-lang-checkbox-imports",onClick:this.importsHandler,defaultChecked:this.props.showImports},"Include Import Statements")),x.createElement("div",{className:v()(F["export-to-lang-modal-checkbox-driver"])},x.createElement(E.Z,{"data-test-id":"export-to-lang-checkbox-driver",onClick:this.driverHandler,defaultChecked:this.props.driver},"Include Driver Syntax")),this.renderBuilderCheckbox()),x.createElement(_.Z.Footer,null,x.createElement(A.TextButton,{"data-test-id":"export-to-lang-close",className:"btn btn-default btn-sm",text:"Close",clickHandler:this.closeHandler})))}}const Y=W;var z=n(16435);class Z extends x.PureComponent{static displayName="ExportToLanguageComponent";static propTypes={copySuccess:R().string,copyToClipboard:R().func,builders:R().bool.isRequired,driver:R().bool.isRequired,imports:R().string.isRequired,showImports:R().bool.isRequired,inputExpression:R().object.isRequired,transpiledExpression:R().string.isRequired,modalOpen:R().bool.isRequired,mode:R().string.isRequired,outputLang:R().string.isRequired,error:R().string,uri:R().string.isRequired,showImportsChanged:R().func.isRequired,buildersChanged:R().func.isRequired,driverChanged:R().func.isRequired,outputLangChanged:R().func.isRequired,errorChanged:R().func.isRequired,modalOpenChanged:R().func.isRequired,copySuccessChanged:R().func.isRequired,runTranspiler:R().func.isRequired};render(){return x.createElement("div",{"data-test-id":"export-to-language"},x.createElement(Y,this.props))}}const X=(0,z.$j)((e=>({builders:e.builders,copySuccess:e.copySuccess,copyToClipboard:e.copyToClipboard,driver:e.driver,imports:e.imports,showImports:e.showImports,inputExpression:e.inputExpression,transpiledExpression:e.transpiledExpression,modalOpen:e.modalOpen,mode:e.mode,outputLang:e.outputLang,error:e.error,uri:e.uri})),{showImportsChanged:e=>({type:f,showImports:e}),buildersChanged:e=>({type:b,builders:e}),driverChanged:e=>({type:S,driver:e}),outputLangChanged:e=>({type:h,outputLang:e}),errorChanged:u,modalOpenChanged:y,copySuccessChanged:e=>({type:d,copySuccess:e}),runTranspiler:g})(Z);class J extends x.Component{static displayName="ExportToLanguagePlugin";static propTypes={store:R().object.isRequired};render(){return x.createElement(z.zt,{store:this.props.store},x.createElement(X,null))}}const Q=J,ee="export-to-language/input-expression/INPUT_EXPRESSION_CHANGED",te={filter:""},ne=e=>({type:ee,inputExpression:e}),re="export-to-language/mode/MODE_CHANGED",se=e=>({type:re,mode:e}),ae="export-to-language/uri/URI_CHANGED",oe="export-to-language/copy-to-clipboard/COPY_TO_CLIPBOARD_FN_CHANGED",ie=e=>{n(72298).clipboard.writeText(e)},le="export-to-language/namespace/NAMESPACE_CHANGED";var pe=n(18717),me=n(43292);i.INITIAL_STATE;const ce=(0,pe.combineReducers)({builders:function(e=!0,t){return t.type===b?t.builders:e},copySuccess:function(e=null,t){return t.type===d?t.copySuccess:e},copyToClipboard:function(e=ie,t){return t.type===oe?t.copyToClipboard:e},driver:function(e=!1,t){return t.type===S?t.driver:e},imports:function(e="",t){return t.type===m?t.imports:e},inputExpression:function(e=te,t){return t.type===ee?t.inputExpression:e},modalOpen:function(e=!1,t){return t.type===T?t.modalOpen:e},mode:function(e="Query",t){return t.type===re?t.mode:e},outputLang:function(e="python",t){return t.type===h?t.outputLang:e},error:function(e=null,t){return t.type===c?t.error:e},transpiledExpression:function(e="",t){return t.type===p?t.transpiledExpression:e},showImports:function(e=!1,t){return t.type===f?t.showImports:e},uri:function(e="",t){return t.type===ae?t.uri:e},namespace:function(e="",t){return t.type===le?t.namespace:e},appRegistry:l()}),ue=(e,t)=>ce(e,t);var ge=n(91491);const de=(e={})=>{const t=(0,pe.createStore)(ue,(0,pe.applyMiddleware)(me.Z));if(e.localAppRegistry){const n=e.localAppRegistry;t.dispatch((0,i.localAppRegistryActivated)(n)),n.on("open-aggregation-export-to-language",(e=>{t.dispatch(se("Pipeline")),t.dispatch(y(!0)),t.dispatch(g({aggregation:e})),t.dispatch(ne({aggregation:e}))})),n.on("open-query-export-to-language",(e=>{const n={};"string"==typeof e?n.filter=""===e?"{}":e:["filter","project","sort","collation","skip","limit","maxTimeMS"].forEach((t=>{e[t]&&""!==e[t]?n[t]=e[t]:"filter"===t&&(n[t]="{}")})),t.dispatch(se("Query")),t.dispatch(y(!0)),t.dispatch(g(n)),t.dispatch(ne(n))}))}if(e.globalAppRegistry){const n=e.globalAppRegistry;t.dispatch((0,i.globalAppRegistryActivated)(n))}var n;return e.dataProvider&&((e,t,n)=>{var r;e.dispatch((r=function(e){let t;try{t=new ge.ZP(e.getConnectionOptions().connectionString)}catch(e){return"<uri>"}return/^mongodb compass/i.exec(t.searchParams.get("appName")||"")&&t.searchParams.delete("appName"),t.href}(n),{type:ae,uri:r}))})(t,e.dataProvider.error,e.dataProvider.dataProvider),e.namespace&&((e,t)=>{e.dispatch({type:le,namespace:t})})(t,e.namespace),e.copyToClipboardFn&&t.dispatch((n=e.copyToClipboardFn,{type:oe,copyToClipboard:n})),t},he=JSON.parse('{"name":"@mongodb-js/compass-export-to-language","productName":"Export To Language plugin","version":"7.21.0","apiVersion":"3.0.0","description":"export to language modal","main":"lib/index.js","exports":{"webpack":"./src/index.js","require":"./lib/index.js"},"scripts":{"clean":"rimraf lib","precompile":"npm run clean","compile":"webpack --config ./config/webpack.prod.config.js","start":"webpack-dev-server --config ./config/webpack.dev.config.js","start:watch":"npm run clean && webpack --config ./config/webpack.watch.config.js","test":"cross-env NODE_ENV=test mocha-webpack \\"./src/**/*.spec.js\\"","test-watch":"cross-env NODE_ENV=test mocha-webpack \\"./src/**/*.spec.js\\" --watch","test-electron":"xvfb-maybe cross-env NODE_ENV=test karma start","test-cov":"nyc npm run test","check":"npm run lint && npm run depcheck","prepublishOnly":"npm run compile","lint":"eslint \\"./src/**/*.{js,jsx}\\" \\"./test/**/*.js\\" \\"./electron/**/*.js\\" \\"./config/**/*.{js,jsx}\\"","depcheck":"depcheck","test-ci":"npm run test","test-ci-electron":"echo \\"TODO(COMPASS-5555): These tests are broken and disabled for now\\"","bootstrap":"npm run compile"},"license":"SSPL","peerDependencies":{"bson-transpilers":"^1.7.0","hadron-react-buttons":"^5.7.0","mongodb-ace-theme":"^1.6.0","prop-types":"^15.7.2","react":"^16.14.0","react-bootstrap":"^0.32.1","react-dom":"^16.14.0","react-redux":"^5.0.6","react-tooltip":"^3.11.1","redux":"^4.1.2"},"devDependencies":{"@babel/cli":"^7.14.3","@babel/core":"^7.14.3","@babel/plugin-proposal-decorators":"^7.14.2","@babel/plugin-syntax-dynamic-import":"^7.8.3","@babel/preset-env":"^7.14.2","@babel/preset-react":"^7.13.13","@babel/register":"^7.13.16","ace-builds":"^1.4.3","autoprefixer":"^9.6.4","babel-loader":"^8.2.2","bson-transpilers":"^1.7.0","chai":"^4.1.2","chai-enzyme":"^1.0.0-beta.0","classnames":"^2.2.6","core-js":"^3.12.1","cross-env":"^5.2.1","css-loader":"^4.3.0","debug":"^3.2.6","depcheck":"^1.4.1","electron":"^13.5.1","enzyme":"^3.11.0","enzyme-adapter-react-16":"^1.15.2","eslint":"^7.25.0","eslint-config-mongodb-js":"^2.1.0","eslint-plugin-react":"^7.24.0","extract-text-webpack-plugin":"^4.0.0-beta.0","file-loader":"^5.1.0","font-awesome":"^4.7.0","hadron-app":"^4.21.0","hadron-app-registry":"^8.10.0","hadron-react-buttons":"^5.7.0","html-webpack-plugin":"^3.2.0","ignore-loader":"^0.1.2","istanbul-instrumenter-loader":"^3.0.1","jsdom":"^16.7.0","jsdom-global":"^3.0.2","karma":"^6.3.4","karma-chai":"^0.1.0","karma-chai-sinon":"^0.1.5","karma-electron":"^7.0.0","karma-mocha":"^1.3.0","karma-mocha-reporter":"^2.2.5","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","less":"^3.11.1","less-loader":"^7.3.0","mini-css-extract-plugin":"^0.8.0","mocha":"^4.1.0","mocha-webpack":"^2.0.0-beta.0","mongodb-ace-theme":"^1.6.0","mongodb-connection-model":"^21.15.0","mongodb-data-service":"^21.19.0","mongodb-ns":"^2.3.0","mongodb-reflux-store":"^0.0.1","node-loader":"^0.6.0","nyc":"^13.1.0","peer-deps-externals-webpack-plugin":"^1.0.4","postcss-loader":"^2.1.6","prop-types":"^15.7.2","react":"^16.14.0","react-ace":"^9.5.0","react-bootstrap":"^0.32.1","react-dom":"^16.14.0","react-hot-loader":"^4.13.0","react-redux":"^5.0.6","redux":"^4.1.2","resolve":"^1.15.1","rimraf":"^2.7.1","semver":"^5.7.1","shebang-loader":"^0.0.1","sinon":"^3.2.0","sinon-chai":"^2.11.0","style-loader":"^2.0.0","url-loader":"^3.0.0","webpack":"^4.46.0","webpack-bundle-analyzer":"^3.5.2","webpack-cli":"^3.3.12","webpack-dev-server":"^3.11.2","webpack-merge":"^4.2.2","webpack-node-externals":"^3.0.0"},"dependencies":{"@mongodb-js/compass-logging":"^0.10.0","@mongodb-js/mongodb-redux-common":"^1.10.0","js-beautify":"^1.10.2","mongodb-connection-string-url":"^2.5.2","react-select-plus":"^1.2.0","redux-thunk":"^2.3.0"},"homepage":"https://github.com/mongodb-js/compass","bugs":{"url":"https://jira.mongodb.org/projects/COMPASS/issues","email":"compass@mongodb.com"},"repository":{"type":"git","url":"https://github.com/mongodb-js/compass.git"}}'),Te={name:"Export To Language",component:Q,configureStore:de,configureActions:()=>{},storeName:"ExportToLanguage.Store"};function ye(e){e.registerRole("Collection.ScopedModal",Te)}function fe(e){e.deregisterRole("Collection.ScopedModal",Te)}const be=Q},65236:(e,t,n)=>{"use strict";n.r(t),n.d(t,{activate:()=>C,configureStore:()=>L,deactivate:()=>R,default:()=>O,metadata:()=>v});var r=n(18717),s=n(63637),a=n.n(s),o=n(3293),i=n.n(o),l=n(66496),p=n.n(l),m=n(94430),c=n.n(m),u=n(64537),g=n.n(u),d=n(32711),h=n.n(d),T=n(9907),y=n.n(T),f=n(21666),b=n.n(f);const S="field-store/CHANGE_FIELDS",A={fields:{},topLevelFields:[],aceFields:[]},E=(e=A,t)=>t.type===S?{fields:t.fields,topLevelFields:t.topLevelFields,aceFields:t.aceFields}:"field-store/reset"===t.type?A:e;var _=n(35164),x=n.n(_);const I=["name","path","count","type"],L=(e={})=>{const t=(0,r.createStore)(E);if(t._mergeFields=(e,t)=>a()(e,t,(function(e,t,n){return"count"===n?i()(e)?e+t:t:"type"===n?e===t?e:p()(e)?c()([e,t]):g()(e)?c()(e.concat(t)):t:void 0})),t._flattenedFields=(e,n,r,s=1)=>{if(n){r&&(e[r.path].hasOwnProperty("nestedFields")||(e[r.path].nestedFields=[]),n.map((t=>{e[r.path].nestedFields.includes(t.path)||e[r.path].nestedFields.push(t.path)})));for(const r of n){const n=e[r.path]||{},a=h()(r,I);e[r.path]=t._mergeFields(n,a);for(const n of r.types)"Document"===n.name&&t._flattenedFields(e,n.fields,r),"Array"===n.name&&t._flattenedArray(e,n.types,r,s)}}},t._flattenedArray=(e,n,r,s)=>{e[r.path].dimensionality=s;for(const a of n)"Document"===a.name&&t._flattenedFields(e,a.fields,r),"Array"===a.name&&t._flattenedArray(e,a.types,r,s+1)},t._processAceFields=e=>Object.keys(e).map((e=>{const t=e.indexOf(".")>-1||e.indexOf(" ")>-1?`"${e}"`:e;return{name:e,value:t,score:1,meta:"field",version:"0.0.0"}})),t._mergeSchema=e=>{const n=y()(t.getState().fields),r=[];for(const t of e.fields){const e=t.name;r.push(e)}t._flattenedFields(n,e.fields);const s=b()(t.getState().topLevelFields,r),a=t._processAceFields(n);t.dispatch(((e,t,n)=>({type:S,fields:e,topLevelFields:t,aceFields:n}))(n,s,a))},t.processDocuments=e=>{x()(e,{storeValues:!1},((e,n)=>{e||t._mergeSchema(n)}))},t.processSingleDocument=e=>{t.processDocuments([e])},t.processSchema=e=>{t._mergeSchema(e)},e.localAppRegistry){const n=e.localAppRegistry;n.on("documents-refreshed",((e,n)=>{t.processSingleDocument(n[0]||{})})),n.on("document-inserted",(({docs:e})=>{t.processSingleDocument(e[0]||{})})),n.on("documents-paginated",((e,n)=>{t.processSingleDocument(n[0]||{})}));const r=n.getStore("Schema.Store");r&&r.listen((e=>{"complete"===e.samplingState&&t.processSchema(e.schema)})),t.subscribe((()=>{const e=t.getState();n.emit("fields-changed",e)}))}return t},v=JSON.parse('{"name":"@mongodb-js/compass-field-store","productName":"Compass Compass Field Store package","version":"7.21.0","apiVersion":"3.0.0","description":"FieldStore keeps track of available fields in a collection.","main":"lib/index.js","exports":{"webpack":"./src/index.js","require":"./lib/index.js"},"scripts":{"clean":"rimraf lib","precompile":"npm run clean","compile":"cross-env NODE_ENV=production webpack --config ./config/webpack.prod.config.js","start":"webpack-dev-server --config ./config/webpack.dev.config.js","start:watch":"npm run clean && webpack --config ./config/webpack.watch.config.js","test":"cross-env NODE_ENV=test mocha-webpack \\"./src/**/*.spec.js\\"","test-watch":"cross-env NODE_ENV=test mocha-webpack \\"./src/**/*.spec.js\\" --watch","test-electron":"xvfb-maybe cross-env NODE_ENV=test karma start","test-cov":"nyc npm run test","check":"npm run lint && npm run depcheck","lint":"eslint \\"./src/**/*.{js,jsx}\\" \\"./test/**/*.js\\" \\"./electron/**/*.js\\" \\"./config/**/*.{js,jsx}\\"","depcheck":"depcheck","test-ci":"npm run test","test-ci-electron":"echo \\"TODO(COMPASS-5555): These tests are broken and disabled for now\\"","prepublishOnly":"npm run compile","bootstrap":"npm run compile"},"license":"SSPL","peerDependencies":{"debug":"*","mongodb-schema":"^8.2.5"},"devDependencies":{"@babel/cli":"^7.14.3","@babel/core":"^7.14.3","@babel/plugin-proposal-decorators":"^7.14.2","@babel/plugin-syntax-dynamic-import":"^7.8.3","@babel/preset-env":"^7.14.2","@babel/preset-react":"^7.13.13","@babel/register":"^7.13.16","autoprefixer":"^9.4.6","babel-loader":"^8.2.2","chai":"^4.2.0","chai-enzyme":"1.0.0-beta.1","classnames":"^2.2.6","core-js":"^3.12.1","cross-env":"^7.0.0","css-loader":"^4.3.0","debug":"4.3.0","depcheck":"^1.4.1","electron":"^13.5.1","enzyme":"^3.11.0","enzyme-adapter-react-16":"^1.15.2","eslint":"^7.25.0","eslint-config-mongodb-js":"^5.0.3","extract-text-webpack-plugin":"^4.0.0-beta.0","file-loader":"^5.1.0","font-awesome":"^4.7.0","hadron-app":"^4.21.0","hadron-app-registry":"^8.10.0","hadron-react-components":"^5.13.0","html-webpack-plugin":"^3.2.0","ignore-loader":"^0.1.2","istanbul-instrumenter-loader":"^3.0.1","jsdom":"^16.7.0","jsdom-global":"^3.0.2","karma":"^6.3.4","karma-chai":"^0.1.0","karma-chai-sinon":"^0.1.5","karma-electron":"^7.0.0","karma-mocha":"^1.3.0","karma-mocha-reporter":"^2.2.5","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","less":"^3.11.1","less-loader":"^7.3.0","lodash.clonedeep":"^4.5.0","lodash.isarray":"^4.0.0","lodash.isnumber":"^3.0.3","lodash.isstring":"^4.0.1","lodash.mergewith":"^4.6.1","lodash.pick":"^4.4.0","lodash.union":"^4.6.0","lodash.uniq":"^4.5.0","mocha":"^7.0.1","mocha-webpack":"^2.0.0-beta.0","mock-require":"^3.0.3","mongodb-connection-model":"^21.15.0","mongodb-reflux-store":"^0.0.1","mongodb-schema":"^8.2.5","node-loader":"^0.6.0","nyc":"^15.0.0","peer-deps-externals-webpack-plugin":"^1.0.4","postcss-loader":"^2.1.6","prop-types":"^15.7.2","react":"^16.14.0","react-dom":"^16.14.0","react-hot-loader":"^4.13.0","react-redux":"^7.1.3","redux":"^4.1.2","reflux-state-mixin":"github:mongodb-js/reflux-state-mixin","resolve":"^1.15.1","rimraf":"^3.0.2","semver":"^5.4.1","shebang-loader":"^0.0.1","sinon":"^8.1.1","sinon-chai":"^3.4.0","style-loader":"^2.0.0","url-loader":"^3.0.0","webpack":"^4.46.0","webpack-bundle-analyzer":"^3.6.0","webpack-cli":"^3.3.12","webpack-dev-server":"^3.11.2","webpack-merge":"^4.2.2","webpack-node-externals":"^3.0.0","xvfb-maybe":"^0.2.1"},"dependencies":{"reflux":"^0.4.1"},"homepage":"https://github.com/mongodb-js/compass","bugs":{"url":"https://jira.mongodb.org/projects/COMPASS/issues","email":"compass@mongodb.com"},"repository":{"type":"git","url":"https://github.com/mongodb-js/compass.git"}}');function C(e){e.registerStore("Field.Store",L)}function R(e){e.deregisterStore("Field.Store")}const O=L},61432:(e,t,n)=>{"use strict";n.r(t),n.d(t,{activate:()=>j,deactivate:()=>w,metadata:()=>O});var r=n(2784),s=n(16435),a=n(50517);const o=(0,a.css)({borderRadius:"0 0 5px 5px",border:"1px solid",borderTop:"none",position:"absolute",zIndex:4,right:a.spacing[4],width:4*a.spacing[6],boxShadow:"0px 2px 5px rgba(6, 22, 23, 0.3)"}),i=(0,a.css)({background:a.compassUIColors.gray8,borderColor:a.uiColors.gray.light2}),l=(0,a.css)({background:a.uiColors.gray.dark2,borderColor:a.uiColors.gray.dark1}),p=(0,a.css)({paddingLeft:a.spacing[2],paddingTop:a.spacing[2],fontSize:"11px"}),m=(0,a.css)({color:a.uiColors.gray.dark1}),c=(0,a.css)({color:a.uiColors.gray.light2}),u=(0,a.css)({display:"flex",justifyContent:"space-between",flexDirection:"row",alignItems:"center"}),g=(0,a.css)({padding:a.spacing[2],paddingRight:a.spacing[1],flex:1}),d=(0,a.css)({margin:`0px ${a.spacing[1]}px`}),h=(0,a.withTheme)((function({darkMode:e,dispatchStopFind:t,setSearchTerm:n,dispatchFind:s,toggleStatus:h,searchTerm:T,searching:y}){const f=(0,r.useRef)(null),b=(0,r.useCallback)((e=>{n(e.target.value)}),[n]),S=(0,r.useCallback)((()=>{t(),n(""),h()}),[t,n,h]),A=(0,r.useCallback)((e=>{if("Escape"===e.key&&S(),"Enter"===e.key){e.preventDefault();const n=f.current?.value;if(!n||""===n)return t();const r=e.shiftKey;s(n,!r,y)}}),[S,s,y,t]);return(0,r.useEffect)((()=>(f.current?.focus(),window.addEventListener("keydown",A),()=>{window.removeEventListener("keydown",A)})),[A]),r.createElement("div",{className:(0,a.cx)(o,e?l:i)},r.createElement(a.Body,{className:(0,a.cx)(p,e?c:m),id:"find-in-page-label"},"Use (Shift+) Enter to navigate results."),r.createElement("div",{className:u},r.createElement("form",{name:"find-in-page","data-testid":"find-in-page",className:g},r.createElement(a.TextInput,{type:"text","aria-label":"Find in page","aria-labelledby":"find-in-page-label",ref:f,onChange:b,value:T})),r.createElement(a.IconButton,{className:d,"aria-label":"Close find box",onClick:S},r.createElement(a.Icon,{glyph:"X",role:"presentation"}))))}));var T=n(45727);const y="TOGGLE_STATUS",f="SEARCH_TERM",b="STOP_FIND",S="FIND",A={searching:!1,searchTerm:"",enabled:!1},E=e=>({searchTerm:e,type:f}),_=()=>({type:y}),x=(0,s.$j)((e=>({searchTerm:e.searchTerm,searching:e.searching,enabled:e.enabled})),{dispatchStopFind:()=>({type:b}),setSearchTerm:E,dispatchFind:(e,t,n)=>({findNext:n,forward:t,type:S,searchTerm:e}),toggleStatus:_})((({enabled:e,dispatchStopFind:t,setSearchTerm:n,dispatchFind:s,toggleStatus:a,searchTerm:o,searching:i})=>r.createElement("div",{"data-test-id":"find-in-page"},e&&r.createElement(h,{dispatchStopFind:t,setSearchTerm:n,dispatchFind:s,toggleStatus:a,searchTerm:o,searching:i}))));var I=n(18717),L=n(43292);const v=(0,I.createStore)((function(e=A,t){return t.type===y?{...e,enabled:!0!==e.enabled}:t.type===f?{...e,searchTerm:t.searchTerm}:t.type===b?function(e){return T.ipcRenderer.call("app:stop-find-in-page","clearSelection"),{...e,searching:!1}}(e):t.type===S?function(e,t){const n={forward:t.forward,findNext:t.findNext};return T.ipcRenderer.call("app:find-in-page",t.searchTerm,n),{...e,searching:!0}}(e,t):e}),(0,I.applyMiddleware)(L.Z)),C=Object.assign(v,{onActivated(){T.ipcRenderer.on("app:find",(()=>{if(C.getState().enabled)return T.ipcRenderer.call("app:stop-find-in-page","clearSelection"),C.dispatch(E("")),C.dispatch(_());C.dispatch(_())}))}}),R=C,O=JSON.parse('{"name":"@mongodb-js/compass-find-in-page","productName":"Compass Find In Page plugin","description":"cmd-f UI for Compass","version":"3.21.0","author":{"name":"MongoDB Inc","email":"compass@mongodb.com"},"publishConfig":{"access":"public"},"repository":{"type":"git","url":"https://github.com/mongodb-js/compass.git"},"homepage":"https://github.com/mongodb-js/compass","bugs":{"url":"https://jira.mongodb.org/projects/COMPASS/issues","email":"compass@mongodb.com"},"files":["dist"],"main":"dist/index.js","exports":{"webpack":"./src/index.ts","require":"./dist/index.js"},"types":"./dist/index.d.ts","scripts":{"prepublishOnly":"npm run compile","compile":"npm run webpack -- --mode production","prewebpack":"rimraf ./lib","webpack":"webpack-compass","start":"npm run webpack serve -- --mode development","analyze":"npm run webpack -- --mode production --analyze","typecheck":"tsc --noEmit","eslint":"eslint","prettier":"prettier","lint":"npm run eslint . && npm run prettier -- --check .","depcheck":"depcheck","check":"npm run typecheck && npm run lint && npm run depcheck","check-ci":"npm run check","test":"mocha","test-electron":"xvfb-maybe electron-mocha --no-sandbox","test-cov":"nyc -x \\"**/*.spec.*\\" --reporter=lcov --reporter=text --reporter=html npm run test","test-watch":"npm run test -- --watch","test-ci":"npm run test-cov","test-ci-electron":"npm run test-electron","reformat":"npm run prettier -- --write ."},"license":"SSPL","peerDependencies":{"@mongodb-js/compass-components":"^0.13.0","debug":"*","hadron-ipc":"^2.9.0","react":"^16.14.0","react-dom":"^16.14.0","react-redux":"^5.0.6","react-tooltip":"^3.11.1","redux":"^4.1.2","redux-thunk":"^2.4.1"},"devDependencies":{"@mongodb-js/compass-components":"^0.13.0","@mongodb-js/eslint-config-compass":"^0.7.0","@mongodb-js/mocha-config-compass":"^0.10.0","@mongodb-js/prettier-config-compass":"^0.5.0","@mongodb-js/tsconfig-compass":"^0.6.0","@mongodb-js/webpack-config-compass":"^0.7.0","@testing-library/react":"^12.0.0","@testing-library/user-event":"^13.5.0","@types/chai":"^4.2.21","@types/chai-dom":"^0.0.10","@types/mocha":"^9.0.0","@types/react":"^17.0.5","@types/react-dom":"^17.0.10","@types/sinon-chai":"^3.2.5","chai":"^4.3.4","depcheck":"^1.4.1","eslint":"^7.25.0","hadron-app-registry":"^8.10.0","mocha":"^8.4.0","nyc":"^15.1.0","prettier":"2.3.2","rimraf":"^3.0.2","sinon":"^9.2.3","xvfb-maybe":"^0.2.1"}}'),N={name:"FindInPage",component:()=>r.createElement(s.zt,{store:R},r.createElement(x,null))};function j(e){e.registerRole("Find",N),e.registerStore("FindInPage.Store",R)}function w(e){e.deregisterRole("Find",N),e.deregisterStore("FindInPage.Store")}},82243:(e,t,n)=>{"use strict";n.r(t),n.d(t,{activate:()=>gt,deactivate:()=>dt,default:()=>ht,metadata:()=>ut});var r=n(2784),s=n(50517),a=n(69089),o=n(29487),i=n(6909);const l=(0,s.css)({display:"flex",flexDirection:"column",margin:0,padding:0,maxWidth:"80%",height:"100%",position:"relative",background:s.uiColors.gray.dark3,color:"white"}),p=({initialWidth:e,minWidth:t,children:n})=>{const[a,o]=(0,r.useState)(e),i=(0,r.useCallback)((()=>Math.max(t,window.innerWidth-100)),[t]);return r.createElement("div",{className:l,style:{minWidth:t,width:a,flex:"none"}},n,r.createElement(s.ResizeHandle,{onChange:e=>o(e),direction:s.ResizeDirection.RIGHT,value:a,minValue:t,maxValue:i(),title:"sidebar"}))},{track:m}=(0,i.default)("COMPASS-CONNECT-UI"),c=(0,s.css)({position:"relative",margin:0,width:10*s.spacing[5],display:"inline-block"}),u=(0,s.css)({backgroundColor:s.uiColors.green.light3,paddingBottom:s.spacing[4]}),g=(0,s.css)({margin:0,padding:s.spacing[4],paddingBottom:0}),d=(0,s.css)({fontSize:s.compassFontSizes.defaultFontSize}),h=(0,s.css)({marginTop:s.spacing[2]}),T=(0,s.css)({marginTop:s.spacing[2]}),y=(0,s.css)({fontWeight:"bold",background:s.uiColors.white,"&:hover":{background:s.uiColors.white},"&:focus":{background:s.uiColors.white}}),f=function(){return r.createElement("div",{className:c},r.createElement("div",{className:(0,s.cx)(g,u)},r.createElement(s.Subtitle,{className:d},"New to Compass and don't have a cluster?"),r.createElement(s.Body,{className:h},"If you don't already have a cluster, you can create one for free using"," ",r.createElement(s.Link,{href:"https://www.mongodb.com/cloud/atlas",target:"_blank"},"MongoDB Atlas")),r.createElement("div",{className:T},r.createElement(s.Button,{"data-testid":"atlas-cta-link",className:y,onClick:()=>m("Atlas Link Clicked",{screen:"connect"}),variant:s.ButtonVariant.PrimaryOutline,href:"https://www.mongodb.com/cloud/atlas/lp/general/try?utm_source=compass&utm_medium=product",target:"_blank",size:s.ButtonSize.Small},"CREATE FREE CLUSTER"))),r.createElement("div",{className:g},r.createElement(s.Subtitle,{className:d},"How do I find my connection string in Atlas?"),r.createElement(s.Body,{className:h},"If you have an Atlas cluster, go to the Cluster view. Click the 'Connect' button for the cluster to which you wish to connect."),r.createElement(s.Link,{href:"https://docs.atlas.mongodb.com/compass-connection/",target:"_blank"},"See example")),r.createElement("div",{className:g},r.createElement(s.Subtitle,{className:d},"How do I format my connection string?"),r.createElement(s.Link,{href:"https://docs.mongodb.com/manual/reference/connection-string/",target:"_blank"},"See example")))},b=(0,s.css)({marginTop:s.spacing[3],textAlign:"center"}),S=(0,s.css)({width:70,height:"auto"}),A=(0,s.css)({fill:"#136149",opacity:.12}),E=(0,s.css)({stroke:"#136149",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),_=(0,s.css)(E,{opacity:.12}),x=(0,s.css)({fill:"#fef7e3",opacity:.85}),I=(0,s.css)({fill:"#f7a76f"}),L=(0,s.css)({fill:"#FF5516"}),v=(0,s.css)({fill:"rgba(9, 128, 76, 0.3)"}),C=()=>Math.PI/(170+100*Math.random())*(Math.random()>.5?1:-1),R=Math.PI/9e4,O=function(){const e=(0,r.useRef)(),t=(0,r.useRef)(Date.now()),n=(0,r.useRef)(0),s=(0,r.useRef)(C()),a=(0,r.useRef)(null),o=(0,r.useRef)(null);return(0,r.useEffect)((()=>(e.current=window.requestAnimationFrame((function r(){Date.now()-t.current>20&&(t.current=Date.now());const i=Date.now()-t.current,l=a.current,p=n.current*(180/Math.PI);l?.setAttribute("transform",`rotate(${p}, 24.39, 39.2)`),o.current?.setAttribute("transform",`rotate(${p}, 24.39, 39.2)`),n.current+=s.current*i,s.current+=R*(n.current>0?-1:1)*i,s.current*=.974,Math.abs(s.current)<Math.PI/1100&&Math.abs(n.current)<Math.PI/1100&&(s.current=C()),t.current=Date.now(),e.current=window.requestAnimationFrame(r)})),()=>{void 0!==e.current&&window.cancelAnimationFrame(e.current)})),[]),r.createElement("div",{className:b},r.createElement("svg",{className:S,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50.82 64.05"},r.createElement("g",null,r.createElement("circle",{className:_,cx:"26.15",cy:"9.86",r:"8.47"}),r.createElement("circle",{className:E,cx:"24.39",cy:"9.86",r:"8.47"}),r.createElement("circle",{className:A,cx:"26.15",cy:"39.2",r:"24.38"}),r.createElement("circle",{className:I,cx:"24.39",cy:"39.2",r:"24.39"}),r.createElement("circle",{className:x,cx:"24.39",cy:"39.37",r:"20.1"}),r.createElement("polygon",{ref:a,className:L,points:"24.39 22.62 21.35 39.2 27.43 39.2 24.39 22.62"}),r.createElement("polygon",{ref:o,className:v,points:"24.39 55.77 27.43 39.2 21.35 39.2 24.39 55.77"}))))},N=(0,s.css)({maxHeight:"40vh"}),j=function(){return r.createElement("svg",{className:N,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 258 196"},r.createElement("defs",null,r.createElement("style",null,".cls-1,.cls-17,.cls-18,.cls-22,.cls-26,.cls-36,.cls-4,.cls-9{fill:none;}.cls-2{isolation:isolate;}.cls-3{fill:url(#linear-gradient);}.cls-4{stroke:#fff;}.cls-17,.cls-18,.cls-22,.cls-26,.cls-36,.cls-4,.cls-9{stroke-linecap:round;stroke-linejoin:round;}.cls-5{clip-path:url(#clip-path);}.cls-6{fill:url(#linear-gradient-2);}.cls-7{fill:url(#linear-gradient-3);}.cls-8{fill:#f9fbfa;opacity:0.45;}.cls-9{stroke:#f7a76f;}.cls-10,.cls-11{fill:#fef7e3;}.cls-11{opacity:0.85;}.cls-12{fill:url(#linear-gradient-4);}.cls-13{fill:url(#linear-gradient-5);}.cls-14{fill:url(#linear-gradient-6);}.cls-15{fill:#09804c;}.cls-16{fill:url(#linear-gradient-7);}.cls-17{stroke:#136149;}.cls-18{stroke:#09804c;}.cls-19{fill:url(#linear-gradient-8);}.cls-20{fill:#f7a76f;}.cls-21,.cls-25{mix-blend-mode:soft-light;}.cls-21{fill:url(#linear-gradient-9);}.cls-22{stroke:#83dba7;}.cls-23{fill:#83dba7;}.cls-24{fill:#136149;}.cls-25{fill:url(#linear-gradient-10);}.cls-26{stroke:#86681d;}.cls-27{fill:url(#linear-gradient-11);}.cls-28{fill:#8f221b;}.cls-29{fill:#fcebe2;}.cls-30{fill:#f9d3c5;}.cls-31{opacity:0.55;fill:url(#linear-gradient-12);}.cls-32{opacity:0.25;fill:url(#linear-gradient-13);}.cls-33{fill:#86681d;}.cls-34,.cls-38,.cls-41{fill:#a49437;}.cls-35{fill:url(#linear-gradient-14);}.cls-36{stroke:#ffeb99;}.cls-37{fill:#ffdd49;}.cls-38{opacity:0.24;}.cls-39{fill:url(#linear-gradient-15);}.cls-40{fill:url(#linear-gradient-16);}.cls-41{opacity:0.2;mix-blend-mode:multiply;}"),r.createElement("linearGradient",{id:"linear-gradient",x1:"77.43",y1:"217.08",x2:"201.34",y2:"2.47",gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:"0",stopColor:"#fef2c8",stopOpacity:"0.8"}),r.createElement("stop",{offset:"0.26",stopColor:"#c5e4f2",stopOpacity:"0.61"}),r.createElement("stop",{offset:"0.91",stopColor:"#ffe1ea",stopOpacity:"0.34"})),r.createElement("clipPath",{id:"clip-path"},r.createElement("polygon",{className:"cls-1",points:"251.85 187.92 26.93 187.92 26.93 31.63 112.74 31.63 113.36 -0.77 179.97 -0.77 180.25 31.63 251.85 31.63 251.85 187.92"})),r.createElement("linearGradient",{id:"linear-gradient-2",x1:"-5049.95",y1:"2020.36",x2:"-5078.07",y2:"2069.06",gradientTransform:"translate(-4814.22 2157.76) rotate(180)",gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:"0",stopColor:"#c5e4f2",stopOpacity:"0"}),r.createElement("stop",{offset:"0.24",stopColor:"#c5e4f2",stopOpacity:"0.29"}),r.createElement("stop",{offset:"0.51",stopColor:"#c5e4f2",stopOpacity:"0.59"}),r.createElement("stop",{offset:"0.74",stopColor:"#c5e4f2",stopOpacity:"0.81"}),r.createElement("stop",{offset:"0.91",stopColor:"#c5e4f2",stopOpacity:"0.95"}),r.createElement("stop",{offset:"1",stopColor:"#c5e4f2"})),r.createElement("linearGradient",{id:"linear-gradient-3",x1:"-63.96",y1:"2079.44",x2:"-46.7",y2:"2109.32",gradientTransform:"matrix(1, 0, 0, -1, 287, 2157.76)",gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:"0",stopColor:"#c5e4f2"}),r.createElement("stop",{offset:"0.09",stopColor:"#c5e4f2",stopOpacity:"0.95"}),r.createElement("stop",{offset:"0.26",stopColor:"#c5e4f2",stopOpacity:"0.81"}),r.createElement("stop",{offset:"0.49",stopColor:"#c5e4f2",stopOpacity:"0.59"}),r.createElement("stop",{offset:"0.76",stopColor:"#c5e4f2",stopOpacity:"0.29"}),r.createElement("stop",{offset:"1",stopColor:"#c5e4f2",stopOpacity:"0"})),r.createElement("linearGradient",{id:"linear-gradient-4",x1:"-4954.15",y1:"2015.75",x2:"-4954.15",y2:"2047.15",xlinkHref:"#linear-gradient-2"}),r.createElement("linearGradient",{id:"linear-gradient-5",x1:"-253.84",y1:"1977.35",x2:"-253.84",y2:"1998.54",gradientTransform:"matrix(1, 0, 0, -1, 287, 2157.76)",xlinkHref:"#linear-gradient-2"}),r.createElement("linearGradient",{id:"linear-gradient-6",x1:"183.42",y1:"164.07",x2:"208.8",y2:"120.11",gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:"0.18",stopColor:"#c5e4f2",stopOpacity:"0.22"}),r.createElement("stop",{offset:"0.91",stopColor:"#ffe1ea",stopOpacity:"0.34"})),r.createElement("linearGradient",{id:"linear-gradient-7",x1:"124.75",y1:"81.18",x2:"162.71",y2:"15.42",gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:"0",stopColor:"#13aa52"}),r.createElement("stop",{offset:"0.49",stopColor:"#13ac52"}),r.createElement("stop",{offset:"0.67",stopColor:"#11b354"}),r.createElement("stop",{offset:"0.8",stopColor:"#0ebe57"}),r.createElement("stop",{offset:"0.9",stopColor:"#0acf5b"}),r.createElement("stop",{offset:"0.91",stopColor:"#0ad05b"})),r.createElement("linearGradient",{id:"linear-gradient-8",x1:"124.5",y1:"189.67",x2:"124.5",y2:"88.94",gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:"0",stopColor:"#cf4a22"}),r.createElement("stop",{offset:"0.15",stopColor:"#da6337"}),r.createElement("stop",{offset:"0.37",stopColor:"#e7814f"}),r.createElement("stop",{offset:"0.59",stopColor:"#f09661"}),r.createElement("stop",{offset:"0.8",stopColor:"#f5a36b"}),r.createElement("stop",{offset:"1",stopColor:"#f7a76f"})),r.createElement("linearGradient",{id:"linear-gradient-9",x1:"170.93",y1:"76.95",x2:"189.01",y2:"76.95",gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:"0",stopColor:"#f4bde5"}),r.createElement("stop",{offset:"0.11",stopColor:"#e4b4d9"}),r.createElement("stop",{offset:"0.31",stopColor:"#b99cb8"}),r.createElement("stop",{offset:"0.61",stopColor:"#737584"}),r.createElement("stop",{offset:"0.96",stopColor:"#15403c"}),r.createElement("stop",{offset:"1",stopColor:"#0b3b35"})),r.createElement("linearGradient",{id:"linear-gradient-10",x1:"166.03",y1:"65.96",x2:"205.66",y2:"53.85",gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:"0",stopColor:"#0b3b35"}),r.createElement("stop",{offset:"0.24",stopColor:"#0b3b35",stopOpacity:"0.96"}),r.createElement("stop",{offset:"0.37",stopColor:"#0b3b35",stopOpacity:"0.83"}),r.createElement("stop",{offset:"0.48",stopColor:"#0b3b35",stopOpacity:"0.59"}),r.createElement("stop",{offset:"0.57",stopColor:"#0b3b35",stopOpacity:"0.27"}),r.createElement("stop",{offset:"0.62",stopColor:"#0b3b35",stopOpacity:"0"})),r.createElement("linearGradient",{id:"linear-gradient-11",x1:"114.87",y1:"107.65",x2:"114.87",y2:"99.03",xlinkHref:"#linear-gradient-8"}),r.createElement("linearGradient",{id:"linear-gradient-12",x1:"115.99",y1:"195.32",x2:"144.86",y2:"145.31",gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:"0",stopColor:"#a63517"}),r.createElement("stop",{offset:"0.2",stopColor:"#b03e3c"}),r.createElement("stop",{offset:"0.4",stopColor:"#b8455d"}),r.createElement("stop",{offset:"0.52",stopColor:"#be4956"}),r.createElement("stop",{offset:"0.71",stopColor:"#d05642"}),r.createElement("stop",{offset:"0.92",stopColor:"#ed6a23"}),r.createElement("stop",{offset:"1",stopColor:"#f97216"})),r.createElement("linearGradient",{id:"linear-gradient-13",x1:"118.76",y1:"195.47",x2:"140.24",y2:"158.26",xlinkHref:"#linear-gradient-12"}),r.createElement("linearGradient",{id:"linear-gradient-14",x1:"91.24",y1:"296.7",x2:"106.12",y2:"296.7",gradientTransform:"translate(-14.86 -160.06) rotate(-7.33)",gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:"0",stopColor:"#86681d"}),r.createElement("stop",{offset:"0.16",stopColor:"#b2922d"}),r.createElement("stop",{offset:"0.31",stopColor:"#d5b43a"}),r.createElement("stop",{offset:"0.43",stopColor:"#ebc942"}),r.createElement("stop",{offset:"0.52",stopColor:"#f3d145"}),r.createElement("stop",{offset:"1",stopColor:"#ffeb99"})),r.createElement("linearGradient",{id:"linear-gradient-15",x1:"64.56",y1:"123.86",x2:"66.07",y2:"106.68",gradientTransform:"matrix(1, 0, 0, 1, 1.8, -2.48)",gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:"0",stopColor:"#86681d"}),r.createElement("stop",{offset:"0.02",stopColor:"#957622"}),r.createElement("stop",{offset:"0.07",stopColor:"#b2922d"}),r.createElement("stop",{offset:"0.12",stopColor:"#caa936"}),r.createElement("stop",{offset:"0.17",stopColor:"#dcbb3d"}),r.createElement("stop",{offset:"0.24",stopColor:"#e9c841"}),r.createElement("stop",{offset:"0.33",stopColor:"#f1cf44"}),r.createElement("stop",{offset:"0.52",stopColor:"#f3d145"}),r.createElement("stop",{offset:"1",stopColor:"#ffeb99"})),r.createElement("linearGradient",{id:"linear-gradient-16",x1:"35.61",y1:"115.3",x2:"43.56",y2:"101.54",gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:"0",stopColor:"#86681d"}),r.createElement("stop",{offset:"0.08",stopColor:"#9a7b24"}),r.createElement("stop",{offset:"0.26",stopColor:"#c0a032"}),r.createElement("stop",{offset:"0.43",stopColor:"#dcbb3d"}),r.createElement("stop",{offset:"0.58",stopColor:"#edcb43"}),r.createElement("stop",{offset:"0.69",stopColor:"#f3d145"}))),r.createElement("g",{className:"cls-2"},r.createElement("g",{id:"WHITE"},r.createElement("rect",{className:"cls-3",x:"26.93",y:"31.63",width:"224.92",height:"156.3"}),r.createElement("path",{className:"cls-4",d:"M208.46,81.74h35a7.46,7.46,0,0,0,7.46-7.46h0a7.46,7.46,0,0,0-7.46-7.47h-4.13A11.24,11.24,0,0,1,228.1,55.56h0a11.24,11.24,0,0,1,11.24-11.24H250.7"}),r.createElement("g",{className:"cls-5"},r.createElement("path",{className:"cls-6",d:"M199.82,116.67h98a12.91,12.91,0,0,0-12.91-12.77,11.25,11.25,0,0,0-2.24.2,18,18,0,0,0-16.77-11.45,17.49,17.49,0,0,0-6,1,25,25,0,0,0-42.07,9.15,14.52,14.52,0,0,0-3.66-.47,14.31,14.31,0,0,0-14.33,14.28Z"}),r.createElement("path",{className:"cls-7",d:"M258.94,66.09a9,9,0,0,0-13.46-7.85,15.87,15.87,0,0,0-31.2-.87,9.39,9.39,0,0,0-11.46,6.69,9.82,9.82,0,0,0-.3,2.41"}),r.createElement("path",{className:"cls-8",d:"M302.5,15.5H179.4a11.25,11.25,0,0,0-11.25,11.25h0A11.25,11.25,0,0,0,179.4,38h4.12A7.46,7.46,0,0,1,191,45.46h0a7.46,7.46,0,0,1-7.46,7.46H111.18A12.16,12.16,0,0,0,99,65.09h0a12.15,12.15,0,0,0,12.16,12.16h20.15a6.8,6.8,0,0,1,6.79,6.8h0a6.8,6.8,0,0,1-6.79,6.8h-42a14.47,14.47,0,0,0-14.47,14.6h0a14.47,14.47,0,0,0,14.47,14.33H188.8a6.8,6.8,0,0,0,6.8-6.8h0a6.81,6.81,0,0,0-6.8-6.8H168.65A12.15,12.15,0,0,1,156.49,94h0a12.15,12.15,0,0,1,12.16-12.16H241a7.48,7.48,0,0,0,7.47-7.47h0A7.47,7.47,0,0,0,241,66.93h-4.12a11.25,11.25,0,0,1-11.25-11.25h0a11.25,11.25,0,0,1,11.25-11.25H302.5A14.45,14.45,0,0,0,317,30h0A14.46,14.46,0,0,0,302.5,15.5Z"}),r.createElement("path",{className:"cls-4",d:"M189,28.88h38.36a7.47,7.47,0,0,0,7.46-7.47h0A7.46,7.46,0,0,0,227.37,14h-4.12A11.25,11.25,0,0,1,212,2.7h0A11.25,11.25,0,0,1,223.25-8.55h80.09"}),r.createElement("line",{className:"cls-9",x1:"129.23",y1:"2.93",x2:"168.88",y2:"197.94"}),r.createElement("path",{className:"cls-10",d:"M129.23,2.93,317.88,192.25H159.29S194.55,136.31,129.23,2.93Z"}),r.createElement("line",{className:"cls-9",x1:"50.81",y1:"83.52",x2:"69.49",y2:"192.25"}),r.createElement("path",{className:"cls-11",d:"M57.21,87.78,236.14,193.06l-151.82-1S122.53,169.25,57.21,87.78Z"})),r.createElement("g",{id:"Titles"},r.createElement("path",{className:"cls-12",d:"M90.32,142h99.23a13.09,13.09,0,0,0-13.08-12.93,12.36,12.36,0,0,0-2.27.2,18.21,18.21,0,0,0-17-11.59,17.69,17.69,0,0,0-6.07,1A25.31,25.31,0,0,0,108.55,128a14.89,14.89,0,0,0-3.7-.47A14.49,14.49,0,0,0,90.32,142Z"}),r.createElement("path",{className:"cls-13",d:"M60.77,180a8.82,8.82,0,0,0-13.18-7.68,15.54,15.54,0,0,0-30.53-.85A9.18,9.18,0,0,0,5.85,178a9.45,9.45,0,0,0-.3,2.37"})),r.createElement("path",{className:"cls-4",d:"M92.07,181.25H42.22a6,6,0,0,1-6-6.05h0a6,6,0,0,1,6-6H60.14A10.81,10.81,0,0,0,71,158.33h0a10.82,10.82,0,0,0-10.82-10.82H26.93"}),r.createElement("path",{className:"cls-14",d:"M163.27,93.82,229,190.35,167.5,152.68S170.93,119.23,163.27,93.82Z"}),r.createElement("polygon",{className:"cls-15",points:"208.46 81.99 170.93 81.99 170.93 34.75 208.46 34.75 196.75 59.17 208.46 81.99"}),r.createElement("polygon",{className:"cls-16",points:"189.01 71.92 108.71 71.92 98.44 24.68 178.74 24.68 189.01 71.92"}),r.createElement("line",{className:"cls-17",x1:"116.88",y1:"89.3",x2:"169.93",y2:"164.94"}),r.createElement("path",{className:"cls-18",d:"M116.52,89.32c3.68,0,26.88,98.6,26.88,98.6"}),r.createElement("path",{className:"cls-18",d:"M108.48,88.44c-3.68,0,10.74,100.36,14.49,100.36"}),r.createElement("polygon",{className:"cls-19",points:"141.6 189.67 130.5 189.67 107.41 88.94 116.45 88.94 141.6 189.67"}),r.createElement("path",{className:"cls-20",d:"M95.86,15h-.73a1.8,1.8,0,0,0-1.79,1.8l17.45,75.32h4.32L97.66,16.76A1.81,1.81,0,0,0,95.86,15Z"}),r.createElement("line",{className:"cls-17",x1:"107.84",y1:"89.3",x2:"84.32",y2:"164.94"}),r.createElement("polygon",{className:"cls-21",points:"189.01 71.92 170.93 81.99 170.93 72.3 189.01 71.92"}),r.createElement("path",{className:"cls-22",d:"M173.07,35l7,32H116.09q-3.59-16.47-7.16-32.93"}),r.createElement("path",{className:"cls-15",d:"M107.24,29.24c.3,1.39.45,2.09.76,3.48h65c-.3-1.39-.45-2.09-.76-3.48ZM110,31.53a.73.73,0,0,1-.7-.55.44.44,0,0,1,.46-.55.75.75,0,0,1,.7.55A.44.44,0,0,1,110,31.53Zm2.58,0a.73.73,0,0,1-.7-.55.44.44,0,0,1,.46-.55.75.75,0,0,1,.7.55A.44.44,0,0,1,112.6,31.53Zm2.57,0a.74.74,0,0,1-.7-.55.44.44,0,0,1,.46-.55.74.74,0,0,1,.7.55A.44.44,0,0,1,115.17,31.53Z"}),r.createElement("path",{className:"cls-23",d:"M129.16,64.74h-11Q114.89,49.88,111.65,35h11Q125.92,49.88,129.16,64.74Z"}),r.createElement("path",{className:"cls-23",d:"M145.12,64.9H131.68c-.77-3.53-1.16-5.29-1.92-8.83h13.45C144,59.61,144.36,61.37,145.12,64.9Z"}),r.createElement("path",{className:"cls-23",d:"M161.05,64.9H147.6c-.77-3.53-1.15-5.29-1.92-8.83h13.45C159.9,59.61,160.28,61.37,161.05,64.9Z"}),r.createElement("path",{className:"cls-23",d:"M177,64.9H163.53c-.77-3.53-1.15-5.29-1.92-8.83h13.45C175.82,59.61,176.21,61.37,177,64.9Z"}),r.createElement("path",{className:"cls-22",d:"M125.24,35.31h45.3"}),r.createElement("path",{className:"cls-22",d:"M125.94,38.52h45.3"}),r.createElement("path",{className:"cls-22",d:"M126.64,41.73h11.91"}),r.createElement("path",{className:"cls-22",d:"M142.56,41.73h11.92"}),r.createElement("path",{className:"cls-22",d:"M158.49,41.73H170.4"}),r.createElement("path",{className:"cls-22",d:"M129,51.51h11.92"}),r.createElement("path",{className:"cls-22",d:"M145.75,51.51h11.91"}),r.createElement("path",{className:"cls-17",d:"M131.36,57.77c.78,0,2.31,7,3.09,7s-.74-7,0-7,2.31,7,3.1,7-.75-7,0-7,2.32,7,3.1,7-.74-7,0-7,2.32,7,3.1,7"}),r.createElement("path",{className:"cls-24",d:"M150.25,60.93h-1.46l.45,2.07h1.46Z"}),r.createElement("path",{className:"cls-24",d:"M165.9,61.28h-1.46l.45,2.07h1.46Z"}),r.createElement("path",{className:"cls-24",d:"M168.43,62.32H167l.22,1h1.46Z"}),r.createElement("path",{className:"cls-24",d:"M170.54,62h-1.46l.3,1.39h1.47Z"}),r.createElement("path",{className:"cls-24",d:"M172.59,61.28h-1.46l.45,2.07H173Z"}),r.createElement("path",{className:"cls-24",d:"M175.12,62.83h-1.46l.11.52h1.46Z"}),r.createElement("path",{className:"cls-24",d:"M152.84,59.46h-1.47c.31,1.42.47,2.12.77,3.54h1.46C153.3,61.58,153.14,60.88,152.84,59.46Z"}),r.createElement("path",{className:"cls-24",d:"M155.93,60.34h-1.46c.23,1.06.34,1.6.58,2.66h1.46Z"}),r.createElement("path",{className:"cls-24",d:"M159,60.93H157.5L158,63h1.46Z"}),r.createElement("path",{className:"cls-17",d:"M114.1,36.93h7"}),r.createElement("path",{className:"cls-17",d:"M114.66,39.51h7"}),r.createElement("path",{className:"cls-17",d:"M115.22,42.1h7"}),r.createElement("path",{className:"cls-17",d:"M115.79,44.69h7"}),r.createElement("path",{className:"cls-17",d:"M116.35,47.27h7"}),r.createElement("path",{className:"cls-17",d:"M116.91,49.86h7"}),r.createElement("path",{className:"cls-17",d:"M117.47,52.44h7"}),r.createElement("path",{className:"cls-17",d:"M118,55h7"}),r.createElement("path",{className:"cls-17",d:"M118.6,57.62h7"}),r.createElement("path",{className:"cls-17",d:"M119.16,60.2h7"}),r.createElement("path",{className:"cls-17",d:"M119.72,62.79h7"}),r.createElement("path",{className:"cls-22",d:"M127.1,44.85h45.3"}),r.createElement("path",{className:"cls-22",d:"M127.78,48h45.3"}),r.createElement("polygon",{className:"cls-25",points:"199.82 34.75 195.09 57.72 200.78 81.99 182.82 81.74 170.93 81.99 189.01 71.92 180.93 34.75 199.82 34.75"}),r.createElement("line",{className:"cls-26",x1:"96.08",y1:"18.92",x2:"129.4",y2:"161.84"}),r.createElement("polygon",{className:"cls-27",points:"120.79 107.65 110.49 107.65 108.95 99.03 119.25 99.03 120.79 107.65"}),r.createElement("rect",{className:"cls-28",x:"108",y:"97.89",width:"12.16",height:"2.29",rx:"1.14"}),r.createElement("rect",{className:"cls-28",x:"109.76",y:"106.45",width:"12.16",height:"2.29",rx:"1.14"}),r.createElement("rect",{className:"cls-28",x:"106.61",y:"87.77",width:"10.64",height:"2.29",rx:"1.14"}),r.createElement("path",{className:"cls-20",d:"M84.32,164.94l14.29,30.3h72l-.71-30.3S136.92,169.35,84.32,164.94Z"}),r.createElement("polygon",{className:"cls-29",points:"115.43 195.24 97.86 165.53 121.01 168.66 135.58 195.24 115.43 195.24"}),r.createElement("polygon",{className:"cls-30",points:"150.46 195.24 135.67 166.02 152.95 164.97 168.88 195.24 150.46 195.24"}),r.createElement("rect",{className:"cls-28",x:"81.49",y:"161.84",width:"91.99",height:"13.56"}),r.createElement("polygon",{className:"cls-31",points:"173.48 175.4 81.49 175.4 173.48 161.84 173.48 175.4"}),r.createElement("polyline",{className:"cls-32",points:"88.06 175.4 169.93 175.4 169.93 180.1 92.15 180.1 89.72 175.4"}),r.createElement("rect",{className:"cls-33",x:"103.63",y:"152.68",width:"3.54",height:"5.89"}),r.createElement("line",{className:"cls-17",x1:"102.52",y1:"159.25",x2:"101.31",y2:"161.85"}),r.createElement("line",{className:"cls-17",x1:"105.42",y1:"158.85",x2:"105.42",y2:"161.85"}),r.createElement("line",{className:"cls-17",x1:"108.52",y1:"159.19",x2:"109.9",y2:"161.85"}),r.createElement("rect",{className:"cls-34",x:"100.24",y:"158.51",width:"10.37",height:"0.68"}),r.createElement("rect",{className:"cls-34",x:"103.1",y:"151.99",width:"4.57",height:"1.03",rx:"0.52"}),r.createElement("rect",{className:"cls-35",x:"113.36",y:"119.76",width:"14.97",height:"3.77",rx:"1.88",transform:"translate(22.61 -18.89) rotate(9.86)"}),r.createElement("path",{className:"cls-34",d:"M128.83,123c-.21,1.19-.6,2.11-.88,2.06h0l-1.83-.32a.41.41,0,0,1-.31-.58,7.58,7.58,0,0,0,.46-1.61,6.94,6.94,0,0,0,.11-1.67.41.41,0,0,1,.49-.45l1.83.32h0C129,120.83,129,121.84,128.83,123Z"}),r.createElement("path",{className:"cls-36",d:"M127.78,120.62a5.59,5.59,0,0,1-.73,4.2"}),r.createElement("path",{className:"cls-37",d:"M96.59,121.83l20.59,3.4c1.41.16,2.78-8,1.37-8.18l-20.71-3.82Z"}),r.createElement("polygon",{className:"cls-38",points:"110.19 115.51 103.53 122.94 97.09 121.87 97.84 113.23 110.19 115.51"}),r.createElement("path",{className:"cls-39",d:"M98.76,124.26,32,113.22l12.69-11L100.53,111C103.15,111.37,101.38,124.6,98.76,124.26Z"}),r.createElement("path",{className:"cls-37",d:"M93.15,116.49c-.36,2.83-2.28,6.5-3.21,6.38L83,122c-.93-.12,1.12-2.18,1.84-6.81.61-3.92-.26-6.48.67-6.36l6.92.89C93.39,109.81,93.52,113.66,93.15,116.49Z"}),r.createElement("circle",{className:"cls-34",cx:"89.42",cy:"114.5",r:"2.15"}),r.createElement("polygon",{className:"cls-40",points:"25.23 99.01 44.7 102.2 54.46 116.93 32.01 113.22 25.23 99.01"}),r.createElement("path",{className:"cls-37",d:"M41.59,115l-22.42-4.1L20.8,98.73l4.43.28a17.51,17.51,0,0,1,16.36,16Z"}),r.createElement("path",{className:"cls-33",d:"M21.68,105c-.46,3.35-1.58,6-2.51,5.84s-1.32-2.94-.87-6.29,1.57-6,2.5-5.85S22.13,101.68,21.68,105Z"}),r.createElement("circle",{className:"cls-34",cx:"102.36",cy:"122.21",r:"3.06"}),r.createElement("path",{className:"cls-41",d:"M128.7,123.28h0l-.89-.15h0l-.94-.16a.41.41,0,0,0-.45.23l-7.26-1.26c.06-1.3-.09-2.33-.58-2.38l-16.76-3.09c-.11-1.64-.5-2.83-1.26-2.93l-7.88-1.25a.42.42,0,0,0-.2-.1l-2.25-.29-45.5-7.2-16-2.62a17.78,17.78,0,0,0-3.44-.57l-4.43-.27c-.93-.13-2.05,2.49-2.5,5.84s-.06,6.17.87,6.3l22.42,4.1h0a.88.88,0,0,0,0-.17l12.89,2.13h0l28.33,4.69c0,.21,0,.32.23.35l6.92.89a.36.36,0,0,0,.2,0l8.62,1.43a1.13,1.13,0,0,0,1-.5,3,3,0,0,0,5.5-.51l12,2c.48.06.95-.85,1.32-2.08l7.25,1.26a.42.42,0,0,0,.34.37l1.83.31h0c.28,0,.67-.88.88-2.07S129,123.33,128.7,123.28Z"}),r.createElement("path",{className:"cls-17",d:"M105.4,152.51V129.89H82.69a2,2,0,0,1-2-2h0a2,2,0,0,1,2-2h6.64V114.5"}),r.createElement("rect",{className:"cls-33",x:"102.35",y:"134.17",width:"6.1",height:"1.6"}),r.createElement("g",{id:"_96px-_-MongoDB-_-Leaf-_-Leaf-Forest","data-name":"96px-/-MongoDB-/-Leaf-/-Leaf-Forest"},r.createElement("g",{id:"mongodb-leaf"},r.createElement("path",{id:"Stroke-1",className:"cls-26",d:"M115,101.36s2.88,2,.72,3.51C113.17,104.36,115,101.36,115,101.36Z"}),r.createElement("line",{id:"Stroke-3",className:"cls-26",x1:"115.37",y1:"103.06",x2:"115.84",y2:"105.31"}))))))},w=(0,s.css)({position:"fixed",zIndex:500,top:0,left:0,bottom:0,right:0}),D=(0,s.keyframes)({"0%":{opacity:0},"100%":{opacity:1}}),B=(0,s.css)({opacity:.9,animation:`${D} 500ms ease-out`}),M=function(){return r.createElement("svg",{className:w,"data-testid":"connecting-background-svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 310.34 540.72"},r.createElement("defs",null,r.createElement("linearGradient",{id:"linearGradient",x1:"-0.69",y1:"540.32",x2:"311.03",y2:"0.4",gradientUnits:"userSpaceOnUse"},r.createElement("stop",{offset:"0.09",stopColor:"#ffe1ea",stopOpacity:"0.34"}),r.createElement("stop",{offset:"0.74",stopColor:"#c5e4f2",stopOpacity:"0.61"},r.createElement("animate",{attributeName:"offset",from:"0.74",to:"0.74",dur:"5s",repeatCount:"indefinite",keySplines:"0.4 0 0.2 1; 0.4 0 0.2 1",values:"0.74;0.45;0.74"})),r.createElement("stop",{offset:"1",stopColor:"#fef2c8",stopOpacity:"0.8"}))),r.createElement("g",null,r.createElement("rect",{fill:"url(#linearGradient)",className:B,width:"310.34",height:"540.72"})))},$=(0,s.css)({textAlign:"center",padding:s.spacing[3]}),k=(0,s.css)({marginTop:s.spacing[3],fontWeight:"bold",maxHeight:100,overflow:"hidden",textOverflow:"ellipsis"}),P=(0,s.css)({border:"none",background:"none",padding:0,margin:0,marginTop:s.spacing[3]}),F=function({connectingStatusText:e,onCancelConnectionClicked:t}){const[n,a]=(0,r.useState)(!1),o=(0,r.useRef)(null);return(0,r.useEffect)((()=>(null!==o.current||n||(o.current=setTimeout((()=>{a(!0),o.current=null}),250)),()=>{o.current&&(clearTimeout(o.current),o.current=null)})),[n]),r.createElement(r.Fragment,null,r.createElement(M,null),r.createElement(s.Modal,{open:n,setOpen:()=>t()},r.createElement("div",{"data-testid":"connecting-modal-content",className:$,id:"connectingStatusText"},r.createElement(j,null),r.createElement(s.H2,{className:k},e),r.createElement(O,null),r.createElement(s.Link,{as:"button","data-testid":"cancel-connection-button",onClick:t,hideExternalIcon:!0,className:P},"Cancel"))))};var U=n(25130),q=n.n(U),G=n(76635),H=n(80684);const{log:V,mongoLogId:K,debug:W}=(0,i.default)("COMPASS-CONNECT-UI");class Y{_closed=!1;_dataService=null;constructor(e){this._connectFn=e,this._cancelled=new Promise((e=>{this._cancelConnectionAttempt=()=>e()}))}connect(e){return V.info(K(1001000004),"Connection UI","Initiating connection attempt"),Promise.race([this._cancelled,this._connect(e)])}cancelConnectionAttempt(){V.info(K(1001000005),"Connection UI","Canceling connection attempt"),this._cancelConnectionAttempt?.(),this._close()}isClosed(){return this._closed}async _connect(e){if(!this._closed)try{return this._dataService=await this._connectFn(e),this._dataService}catch(e){if(function(e){return"MongoError"===e?.name&&"Topology closed"===e?.message}(e))return void W("caught connection attempt closed error",e);throw W("connection attempt failed",e),e}}async _close(){if(!this._closed)if(this._closed=!0,this._dataService)try{await this._dataService.disconnect(),W("disconnected from connection attempt")}catch(e){W("error while disconnecting from connection attempt",e)}else W("cancelled connection attempt")}}var z=n(59176),Z=n(97587),X=n(91491);const{track:J,debug:Q}=(0,i.createLoggerAndTelemetry)("COMPASS-CONNECT-UI");async function ee(e){const t={is_localhost:!1,is_public_cloud:!1,is_do_url:!1,is_atlas_url:!1,public_cloud_name:""};if((0,z.isLocalhost)(e))return{...t,is_localhost:!0};if((0,z.isDigitalOcean)(e))return{...t,is_do_url:!0};const{isAws:n,isAzure:r,isGcp:s}=await(0,Z.getCloudInfo)(e).catch((e=>(Q("getCloudInfo failed",e),{}))),a=n?"AWS":r?"Azure":s?"GCP":"";return{is_localhost:!1,is_public_cloud:!!(n||r||s),is_do_url:!1,is_atlas_url:(0,z.isAtlas)(e),public_cloud_name:a}}async function te({connectionOptions:{connectionString:e,sshTunnel:t}}){const n=new X.ZP(e,{looseValidation:!0}),r=n.hosts[0],s=n.typedSearchParams(),a=s.get("authMechanism")||(n.username?"DEFAULT":"NONE"),o=s.get("proxyHost");return{...await ee(r),auth_type:a.toUpperCase(),tunnel:o?"socks5":t?"ssh":"none",is_srv:n.isSRV}}const ne=q()("mongodb-compass:connections:connections-store");function re(){return{id:(0,H.Z)(),connectionOptions:{connectionString:"mongodb://localhost:27017"}}}function se(e,t){switch(t.type){case"attempt-connect":return{...e,connectionAttempt:t.connectionAttempt,connectingStatusText:t.connectingStatusText,connectionErrorMessage:null};case"cancel-connection-attempt":return{...e,connectionAttempt:null,connectionErrorMessage:null};case"connection-attempt-succeeded":return{...e,connectionAttempt:null,isConnected:!0,connectionErrorMessage:null};case"connection-attempt-errored":return{...e,connectionAttempt:null,connectionErrorMessage:t.connectionErrorMessage};case"set-active-connection":case"new-connection":return{...e,activeConnectionId:t.connectionInfo.id,activeConnectionInfo:t.connectionInfo,connectionErrorMessage:null};case"set-connections":return{...e,connections:t.connections,connectionErrorMessage:null};case"set-connections-and-select":return{...e,connections:t.connections,activeConnectionId:t.activeConnectionInfo.id,activeConnectionInfo:t.activeConnectionInfo,connectionErrorMessage:null};default:return e}}const ae=(0,s.css)({position:"absolute",right:s.spacing[1],top:0,margin:"auto 0",bottom:0}),oe=function({connectionString:e,iconColor:t,connectionInfo:n,duplicateConnection:a,removeConnection:o}){const[i,l]=(0,r.useState)(!1),{openToast:p}=(0,s.useToast)("compass-connections");return r.createElement(r.Fragment,null,r.createElement(s.Menu,{"data-testid":"connection-menu",align:"bottom",justify:"start",trigger:r.createElement(s.IconButton,{className:(0,s.cx)(ae,(0,s.css)({color:t})),"aria-label":"Connection Options Menu"},r.createElement(s.Icon,{glyph:"Ellipsis"})),open:i,setOpen:l},r.createElement(s.MenuItem,{"data-testid":"copy-connection-string",onClick:async()=>{await async function(e){try{await navigator.clipboard.writeText(e),p("copy-to-clipboard",{title:"Success",body:"Copied to clipboard.",variant:s.ToastVariant.Success,timeout:5e3})}catch(e){p("copy-to-clipboard",{title:"Error",body:"An error occurred when copying to clipboard. Please try again.",variant:s.ToastVariant.Warning,timeout:5e3})}}(e),l(!1)}},"Copy Connection String"),n.favorite&&r.createElement(s.MenuItem,{"data-testid":"duplicate-connection",onClick:()=>{a(n),l(!1)}},"Duplicate"),r.createElement(s.MenuItem,{"data-testid":"remove-connection",onClick:()=>o(n)},"Remove")))},ie=(0,s.css)({borderRadius:"50%",width:s.spacing[3],height:s.spacing[3],flexShrink:0,marginTop:s.spacing[1]/2,marginRight:s.spacing[2],gridArea:"icon"}),le=function({connectionString:e,color:t}){const n="connection-icon";if((0,z.isAtlas)(e))return r.createElement(s.MongoDBLogoMark,{className:(0,s.cx)(ie,(0,s.css)({path:{fill:t}})),"data-testid":n});const a=(0,z.isLocalhost)(e)?"Laptop":"Cloud";return r.createElement(s.Icon,{glyph:a,className:ie,fill:t,"data-testid":n})},pe=(0,s.css)({visibility:"hidden"}),me=(0,s.css)({visibility:"visible"}),ce=(0,s.css)({position:"relative",width:"100%","&:hover":{"&::after":{opacity:1,width:s.spacing[1]}},[`&:hover .${pe}`]:me,"&:focus":{"&::after":{opacity:1,width:s.spacing[1]}},[`&:focus-within .${pe}`]:me,"&:focus-within":{"&::after":{opacity:1,width:s.spacing[1]}}}),ue=(0,s.css)({margin:0,paddingTop:s.spacing[1],paddingRight:s.spacing[3],paddingBottom:s.spacing[1],paddingLeft:s.spacing[2],width:"100%",display:"grid",gridTemplateAreas:"'color icon title' 'color . description'",gridTemplateColumns:"auto auto 1fr",gridTemplateRows:"1fr 1fr",alignItems:"center",justifyItems:"start",border:"none",borderRadius:0,background:"none","&:hover":{cursor:"pointer",border:"none",background:s.uiColors.gray.dark2},"&:focus":{border:"none"}}),ge=(0,s.css)({color:s.uiColors.white,fontSize:s.compassFontSizes.defaultFontSize,lineHeight:"20px",margin:0,flexGrow:1,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",gridArea:"title",width:"calc(100% - 20px)",textAlign:"left"}),de=(0,s.css)({color:s.uiColors.gray.base,fontWeight:"bold",fontSize:"12px",lineHeight:"20px",margin:0,padding:0,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",gridArea:"description"}),he={month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric"};function Te({favorite:e,className:t}){const{connectionColorToHex:n}=(0,a.IK)(),o=n(e?.color);return r.createElement("div",{className:(0,s.cx)((0,s.css)({background:o,height:"100%",width:s.spacing[2],borderRadius:s.spacing[2],marginRight:s.spacing[2],gridArea:"color"}),t)})}const ye=function({isActive:e,connectionInfo:t,onClick:n,onDoubleClick:i,duplicateConnection:l,removeConnection:p}){const m=(0,o.getConnectionTitle)(t),{connectionOptions:{connectionString:c},favorite:u,lastUsed:g}=t,{connectionColorToHex:d}=(0,a.IK)(),h=d(u?.color)??"",T=e&&h,y=T?s.uiColors.black:s.uiColors.white,f=T?`${h} !important`:"none",b=T?s.uiColors.gray.dark3:s.uiColors.gray.base,S=T?s.uiColors.gray.dark3:s.uiColors.white;return r.createElement("div",{className:ce},r.createElement("button",{className:(0,s.cx)(ue,(0,s.css)({background:f})),"data-testid":`saved-connection-button-${t.id||""}`,onClick:n,onDoubleClick:()=>i(t)},r.createElement(Te,{favorite:t.favorite}),r.createElement(le,{color:y,connectionString:c}),r.createElement(s.H3,{className:(0,s.cx)(ge,(0,s.css)({color:y})),"data-testid":(u?"favorite":"recent")+"-connection-title",title:m},m),r.createElement(s.Description,{className:(0,s.cx)(de,(0,s.css)({color:b})),"data-testid":(u?"favorite":"recent")+"-connection-description"},g?g.toLocaleString("default",he):"Never")),r.createElement("div",{className:e?me:pe},r.createElement(oe,{iconColor:S,connectionString:t.connectionOptions.connectionString,connectionInfo:t,duplicateConnection:l,removeConnection:p})))},fe=(0,s.css)({display:"flex",flexDirection:"column",background:s.uiColors.gray.dark2,position:"relative"}),be=(0,s.css)({border:"none",fontWeight:"bold",borderRadius:0,svg:{color:s.uiColors.white},":hover":{border:"none",boxShadow:"none"}}),Se=(0,s.css)({marginTop:s.spacing[4],marginBottom:s.spacing[3],paddingLeft:s.spacing[3],paddingRight:s.spacing[2],display:"flex",flexDirection:"row",alignItems:"center",":hover":{}}),Ae=(0,s.css)({marginTop:s.spacing[4]}),Ee=(0,s.css)({color:"white",flexGrow:1,fontSize:"16px",lineHeight:"24px",fontWeight:700}),_e=(0,s.css)({fontSize:s.spacing[3],margin:0,marginRight:s.spacing[2],padding:0,display:"flex"}),xe=(0,s.css)({overflowY:"auto",padding:0,paddingBottom:s.spacing[3],"::-webkit-scrollbar-thumb":{background:s.compassUIColors.transparentGray}}),Ie=(0,s.css)({listStyleType:"none",margin:0,padding:0}),Le=r.createElement("svg",{width:s.spacing[4],height:s.spacing[4],viewBox:"0 0 24 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{d:"M9.66663 11.6667C9.66663 14.0566 11.6101 16 14 16C16.3899 16 18.3333 14.0566 18.3333 11.6667C18.3333 9.27677 16.3899 7.33333 14 7.33333C11.6101 7.33333 9.66663 9.27677 9.66663 11.6667Z",stroke:"white"}),r.createElement("path",{d:"M4.99998 12.449C4.99998 12.2348 4.99998 12.0475 4.99998 11.8333C4.99998 6.96162 8.9616 3 13.8333 3C18.705 3 22.6666 6.96162 22.6666 11.8333C22.6666 16.705 18.705 20.6667 13.8333 20.6667M1.33331 9L4.63998 12.1795C4.85331 12.3846 5.17331 12.3846 5.35998 12.1795L8.66665 9",stroke:"white",strokeMiterlimit:"10"}),r.createElement("path",{d:"M13.6666 10V12H15.6666",stroke:"white",strokeMiterlimit:"10"})),ve=function({activeConnectionId:e,recentConnections:t,favoriteConnections:n,createNewConnection:a,setActiveConnectionId:o,onDoubleClick:i,removeAllRecentsConnections:l,duplicateConnection:p,removeConnection:m}){const[c,u]=(0,r.useState)(!1);return r.createElement(r.Fragment,null,r.createElement("div",{className:fe},r.createElement(s.Button,{className:be,darkMode:!0,onClick:a,size:"large","data-testid":"new-connection-button",rightGlyph:r.createElement(s.Icon,{glyph:"Plus"})},"New Connection")),r.createElement("div",{className:xe},r.createElement("div",{className:Se},r.createElement("div",{className:_e},r.createElement(s.FavoriteIcon,{darkMode:!0})),r.createElement(s.H2,{className:Ee},"Favorites")),r.createElement("ul",{className:Ie},n.map(((t,n)=>r.createElement("li",{"data-testid":"favorite-connection","data-id":`favorite-connection-${t?.favorite?.name||""}`,key:`${t.id||""}-${n}`},r.createElement(ye,{"data-testid":"favorite-connection",key:`${t.id||""}-${n}`,isActive:!!e&&e===t.id,connectionInfo:t,onClick:()=>o(t.id),onDoubleClick:i,removeConnection:m,duplicateConnection:p}))))),r.createElement("div",{className:(0,s.cx)(Se,Ae),onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1)},r.createElement("div",{className:_e},Le),r.createElement(s.H2,{className:Ee},"Recents"),c&&r.createElement(s.Button,{onClick:l,variant:"default",size:"xsmall",darkMode:!0},"Clear All")),r.createElement("ul",{className:Ie},t.map(((t,n)=>r.createElement("li",{"data-testid":"recent-connection",key:`${t.id||""}-${n}`},r.createElement(ye,{isActive:!!e&&e===t.id,connectionInfo:t,onClick:()=>o(t.id),onDoubleClick:i,removeConnection:m,duplicateConnection:p})))))))},{debug:Ce}=(0,i.createLoggerAndTelemetry)("mongodb-compass:connections:connections"),Re=(0,s.css)({position:"absolute",left:0,right:0,bottom:0,top:0,display:"flex",flexDirection:"row"}),Oe=(0,s.css)({position:"relative",flexGrow:1,display:"flex",padding:s.spacing[4],margin:0,paddingBottom:s.spacing[3],flexDirection:"row",flexWrap:"wrap",gap:s.spacing[4]}),Ne=10*s.spacing[4]+s.spacing[2],je=9*s.spacing[4],we=function({onConnected:e,connectionStorage:t=new o.ConnectionStorage,appName:n,connectFn:i=o.connect}){const{state:l,cancelConnectionAttempt:m,connect:c,createNewConnection:u,duplicateConnection:g,setActiveConnectionById:d,removeAllRecentsConnections:h,removeConnection:T,saveConnection:y,favoriteConnections:b,recentConnections:S}=function({onConnected:e,connectionStorage:t,appName:n,connectFn:a}){const{openToast:i}=(0,s.useToast)("compass-connections"),[l,p]=(0,r.useReducer)(se,{activeConnectionId:void 0,activeConnectionInfo:re(),connectingStatusText:"",connections:[],connectionAttempt:null,connectionErrorMessage:null,isConnected:!1}),{activeConnectionId:m,isConnected:c,connectionAttempt:u,connections:g}=l,d=(0,r.useRef)(),{recentConnections:h,favoriteConnections:T}=(0,r.useMemo)((()=>{const e=(l.connections||[]).filter((e=>!!e.favorite)).sort(((e,t)=>{const n=e.favorite?.name?.toLocaleLowerCase()||"";return(t.favorite?.name?.toLocaleLowerCase()||"")<n?1:-1}));return{recentConnections:(l.connections||[]).filter((e=>!e.favorite)).sort(((e,t)=>{const n=e.lastUsed?.getTime()??0;return(t.lastUsed?.getTime()??0)-n})),favoriteConnections:e}}),[l.connections]);async function y(e){try{return n=e?.connectionOptions?.connectionString,new X.ZP(n),await t.save(e),ne(`saved connection with id ${e.id||""}`),!0}catch(t){return ne(`error saving connection with id ${e.id||""}: ${t.message}`),i("save-connection-error",{title:"Error",variant:s.ToastVariant.Warning,body:`An error occurred while saving the connection. ${t.message}`}),!1}var n}async function f(e){if(await t.delete(e),p({type:"set-connections",connections:g.filter((t=>t.id!==e.id))}),m===e.id){const e=re();p({type:"set-active-connection",connectionInfo:e})}}const b=(0,r.useCallback)((async(n,r)=>{try{e(n,r);const s=await t.load(n.id)??n;await y({...(0,G.cloneDeep)(s),lastUsed:new Date}),!s.favorite&&!s.lastUsed&&h.length>=10&&await t.delete(h[h.length-1])}catch(e){ne(`error occurred connection with id ${n.id||""}: ${e.message}`)}}),[e,t,y,f,h]);return(0,r.useEffect)((()=>(async function(e,t){try{e({type:"set-connections",connections:await t.loadAll()})}catch(e){ne("error loading connections",e)}}(p,t),()=>{d.current&&!d.current.isClosed()&&d.current.cancelConnectionAttempt()})),[]),{state:l,recentConnections:h,favoriteConnections:T,cancelConnectionAttempt(){u?.cancelConnectionAttempt(),p({type:"cancel-connection-attempt"})},connect:async e=>{if(u||c)return;const t=function(e=o.connect){return new Y(e)}(a);d.current=t,p({type:"attempt-connect",connectingStatusText:`Connecting to ${(0,o.getConnectionTitle)(e)}`,connectionAttempt:t}),function({favorite:e,lastUsed:t}){try{const n={is_favorite:Boolean(e),is_recent:Boolean(t&&!e),is_new:!t};J("Connection Attempt",n)}catch(e){Q("trackConnectionAttemptEvent failed",e)}}(e),ne("connecting with connectionInfo",e);try{const r=function(e,t){let n;try{n=new X.ZP(e,{looseValidation:!0})}catch(e){}if(!n)return e;const r=n.typedSearchParams();return r.has("appName")||r.set("appName",t),n.href}(e.connectionOptions.connectionString,n),s=await t.connect({...(0,G.cloneDeep)(e.connectionOptions),connectionString:r});if(d.current=void 0,!s||t.isClosed())return;p({type:"connection-attempt-succeeded"}),b(e,s),function(e,t){try{J("New Connection",(async()=>{const{dataLake:n,genuineMongoDB:r,host:s,build:a,isAtlas:o}=await t.instance();return{...await te(e),is_atlas:o,is_dataLake:n.isDataLake,is_enterprise:a.isEnterprise,is_genuine:r.isGenuine,non_genuine_server_name:r.dbType,server_version:a.version,server_arch:s.arch,server_os_family:s.os_family,topology_type:t.currentTopologyType()}}))}catch(e){Q("trackNewConnectionEvent failed",e)}}(e,s),ne("connection attempt succeeded with connection info",e)}catch(t){d.current=void 0,function(e,t){try{J("Connection Failed",(async()=>({...await te(e),error_code:t.code,error_name:t.codeName??t.name})))}catch(e){Q("trackConnectionFailedEvent failed",e)}}(e,t),ne("connect error",t),p({type:"connection-attempt-errored",connectionErrorMessage:t.message})}},createNewConnection(){p({type:"new-connection",connectionInfo:re()})},async saveConnection(e){if(!await y(e))return;const t=g.findIndex((t=>t.id===e.id)),n=[...g];-1!==t?n[t]=(0,G.cloneDeep)(e):n.push((0,G.cloneDeep)(e)),m!==e.id?p({type:"set-connections",connections:n}):p({type:"set-connections-and-select",connections:n,activeConnectionInfo:(0,G.cloneDeep)(e)})},setActiveConnectionById(e){const t=g.find((t=>t.id===e));t&&p({type:"set-active-connection",connectionInfo:t})},removeConnection:f,async duplicateConnection(e){const t={...(0,G.cloneDeep)(e),id:(0,H.Z)()};t.favorite.name+=" (copy)",await y(t),p({type:"set-connections-and-select",connections:[...g,t],activeConnectionInfo:t})},async removeAllRecentsConnections(){const e=g.filter((e=>!e.favorite));await Promise.all(e.map((e=>t.delete(e)))),p({type:"set-connections",connections:g.filter((e=>e.favorite))})}}}({onConnected:e,connectionStorage:t,connectFn:i,appName:n}),{activeConnectionId:A,activeConnectionInfo:E,connectionAttempt:_,connectionErrorMessage:x,connectingStatusText:I,isConnected:L}=l;return r.createElement("div",{"data-testid":L?"connections-connected":"connections-disconnected",className:Re},r.createElement(p,{minWidth:je,initialWidth:Ne},r.createElement(ve,{activeConnectionId:A,favoriteConnections:b,recentConnections:S,createNewConnection:u,setActiveConnectionId:d,onDoubleClick:c,removeAllRecentsConnections:h,removeConnection:T,duplicateConnection:g})),r.createElement(s.WorkspaceContainer,null,r.createElement("div",{className:Oe},r.createElement(s.ErrorBoundary,{onError:(e,t)=>{Ce("error rendering connect form",e,t)}},r.createElement(a.ZP,{onConnectClicked:e=>c({...(0,G.cloneDeep)(e)}),key:A,onSaveConnectionClicked:y,initialConnectionInfo:E,connectionErrorMessage:x})),r.createElement(f,null))),(L||!!_&&!_.isClosed())&&r.createElement(F,{connectingStatusText:I,onCancelConnectionClicked:m}))};var De=n(45727),Be=n.n(De),Me=n(84935),$e=n.n(Me),ke=n(42915),Pe=n(84649);const Fe=n.n(Pe)()("mongodb-compass:home:app-registry-context"),Ue=(0,r.createContext)(new ke.default),qe=Ue;let Ge,He;!function(e){e.APPLICATION_CONNECT="Application.Connect",e.FIND_IN_PAGE="Find",e.GLOBAL_MODAL="Global.Modal"}(Ge||(Ge={})),function(e){e.SIDEBAR_COMPONENT="Sidebar.Component",e.SHELL_COMPONENT="Global.Shell",e.COLLECTION_WORKSPACE="Collection.Workspace",e.DATABASE_WORKSPACE="Database.Workspace",e.INSTANCE_WORKSPACE="Instance.Workspace"}(He||(He={}));const Ve=()=>(0,r.useContext)(Ue),Ke=e=>{const t=(0,r.useContext)(Ue),[n]=(0,r.useState)((()=>{const n=t.getComponent(e);return n||Fe(`home plugin loading component, but ${String(e)} is NULL`),n}));return n||null};function We(e){const t=(0,r.useContext)(Ue),[n]=(0,r.useState)((()=>{const n=t.getRole(e);return n||Fe(`home plugin loading role, but ${String(e)} is NULL`),n}));return n||null}function Ye(e,t,n){t?n&&n.database?n.collection?document.title=`${e} - ${t}/${n.database}.${n.collection}`:document.title=`${e} - ${t}/${n.database}`:document.title=`${e} - ${t}`:document.title=`${e}`}const ze=()=>null,Ze=({namespace:e})=>{const t=Ke(He.COLLECTION_WORKSPACE)??ze,n=Ke(He.DATABASE_WORKSPACE)??ze,s=Ke(He.INSTANCE_WORKSPACE)??ze;return e.collection?r.createElement(t,null):e.database?r.createElement(n,null):r.createElement(s,null)},Xe=(0,s.css)({display:"flex",flexDirection:"column",alignItems:"stretch",height:"100vh"}),Je=(0,s.css)({display:"flex",flexDirection:"row",alignItems:"stretch",flex:1,overflow:"auto",height:"100%",zIndex:0}),Qe=(0,s.css)({flexGrow:1,flexShrink:1,flexBasis:"600px",order:2,overflowX:"hidden"});function et({namespace:e}){const t=Ke(He.SIDEBAR_COMPONENT),n=We(Ge.GLOBAL_MODAL),s=Ke(He.SHELL_COMPONENT),a=We(Ge.FIND_IN_PAGE),o=a?a[0].component:null;return r.createElement("div",{"data-test-id":"home-view",className:Xe},r.createElement("div",{className:Je},t&&r.createElement(t,null),r.createElement("div",{className:Qe},r.createElement(Ze,{namespace:e})),o&&r.createElement(o,null)),n&&n.map(((e,t)=>{const n=e.component;return r.createElement(n,{key:t})})),s&&r.createElement(s,null))}const tt=(0,s.css)({display:"flex",flexDirection:"column",alignItems:"stretch",height:"100vh"}),nt=(0,s.css)({display:"flex",flexDirection:"row",alignItems:"stretch",flex:1,overflow:"auto",height:"100%",zIndex:0}),rt={database:"",collection:""},st={connectionTitle:"",isConnected:!1,namespace:rt};function at(e,t){switch(t.type){case"connected":return{...e,namespace:{...rt},isConnected:!0,connectionTitle:t.connectionTitle};case"update-namespace":return{...e,namespace:t.namespace};case"disconnected":return{...st};default:return e}}function ot(){Be().ipcRenderer.call("window:hide-collection-submenu")}function it({appName:e}){const t=Ve(),n=We(Ge.APPLICATION_CONNECT),s=(0,r.useRef)(),a="false"!==process.env.USE_NEW_CONNECT_FORM,[{connectionTitle:i,isConnected:l,namespace:p},m]=(0,r.useReducer)(at,{...st});function c(e,t,n){s.current=t,m({type:"connected",connectionTitle:(0,o.getConnectionTitle)(n)||""})}function u(e){ot(),m({type:"update-namespace",namespace:$e()(e)})}function g(e){m({type:"update-namespace",namespace:$e()(e.namespace)})}function d(){ot(),m({type:"update-namespace",namespace:$e()("")})}function h(e){m({type:"update-namespace",namespace:$e()(e.namespace)})}function T(){m({type:"update-namespace",namespace:$e()("")})}const y=(0,r.useCallback)((()=>{m({type:"disconnected"}),Ye(e)}),[e]);if((0,r.useEffect)((()=>{l&&Ye(e,i,p)}),[l,e,i,p]),(0,r.useEffect)((()=>{function e(){!async function(){s.current&&(await s.current.disconnect(),s.current=void 0,t.emit("data-service-disconnected"))}()}if(a)return Be().ipcRenderer.on("app:disconnect",e),()=>{Be().ipcRenderer.removeListener("app:disconnect",e)}}),[t,a,y]),(0,r.useEffect)((()=>(t.on("data-service-connected",c),t.on("data-service-disconnected",y),t.on("select-database",u),t.on("select-namespace",g),t.on("open-instance-workspace",d),t.on("open-namespace-in-new-tab",h),t.on("all-collection-tabs-closed",T),()=>{t.removeListener("data-service-connected",c),t.removeListener("data-service-disconnected",y),t.removeListener("select-database",u),t.removeListener("select-namespace",g),t.removeListener("open-instance-workspace",d),t.removeListener("open-namespace-in-new-tab",h),t.removeListener("all-collection-tabs-closed",T)})),[t,y]),l)return r.createElement("div",{className:"with-global-bootstrap-styles"},r.createElement(et,{namespace:p}));if(a)return r.createElement("div",{className:tt,"data-test-id":"home-view"},r.createElement("div",{className:nt},r.createElement(we,{onConnected:function(e,n){t.emit("data-service-connected",null,n,e)},appName:e})));if(!n)return null;const f=n[0].component;return r.createElement("div",{className:`with-global-bootstrap-styles ${tt}`,"data-test-id":"home-view"},r.createElement("div",{className:nt},r.createElement(f,null)))}function lt(e){const t=Ve(),[n,a]=(0,r.useState)({theme:global.hadronApp?.theme??s.Theme.Light});function o(){a({theme:s.Theme.Dark})}function i(){a({theme:s.Theme.Light})}return(0,r.useEffect)((()=>(t.on("darkmode-enable",o),t.on("darkmode-disable",i),()=>{t.removeListener("darkmode-enable",o),t.removeListener("darkmode-disable",i)})),[t]),r.createElement(s.ThemeProvider,{theme:n},r.createElement(s.ToastArea,null,r.createElement(it,e)))}lt.displayName="HomeComponent";const pt=lt;function mt({appName:e,appRegistry:t}){return r.createElement(qe.Provider,{value:t},r.createElement(s.LeafyGreenProvider,null,r.createElement(pt,{appName:e})))}mt.displayName="HomePlugin";const ct=mt,ut=JSON.parse('{"name":"@mongodb-js/compass-home","productName":"Home plugin","version":"5.24.0","apiVersion":"3.0.0","description":"Home","main":"lib/index.js","exports":{"webpack":"./src/index.ts","require":"./lib/index.js"},"scripts":{"clean":"rimraf ./lib","precompile":"npm run clean","prewebpack":"rimraf ./lib","webpack":"webpack-compass","compile":"npm run webpack -- --mode production","prettier":"prettier","test":"mocha","test-electron":"xvfb-maybe electron-mocha \\"./src/**/*.spec.tsx\\" --no-sandbox","cover":"nyc npm run test","check":"npm run lint && npm run depcheck","eslint":"eslint","prepublishOnly":"npm run compile","lint":"npm run eslint . && npm run prettier -- --check .","depcheck":"depcheck","start":"echo \\"There is not an electron running environment available for this package. Please run `npm start` from the root to run this.\\"","test-cov":"nyc -x \\"**/*.spec.*\\" --reporter=lcov --reporter=text --reporter=html npm run test","test-ci":"npm run test-cov","test-ci-electron":"npm run test-electron","bootstrap":"npm run compile","reformat":"npm run prettier -- --write ."},"license":"SSPL","dependencies":{"@mongodb-js/compass-connections":"^0.8.0"},"peerDependencies":{"@mongodb-js/compass-components":"^0.13.0","debug":"*","hadron-react-buttons":"^5.7.0","hadron-react-components":"^5.13.0","mongodb-data-service":"^21.19.0","mongodb-ns":"^2.3.0","react":"^16.14.0","react-bootstrap":"^0.32.1","react-dom":"^16.14.0","react-tooltip":"^3.11.1"},"devDependencies":{"@mongodb-js/compass-components":"^0.13.0","@mongodb-js/eslint-config-compass":"^0.7.0","@mongodb-js/mocha-config-compass":"^0.10.0","@mongodb-js/prettier-config-compass":"^0.5.0","@mongodb-js/tsconfig-compass":"^0.6.0","@mongodb-js/webpack-config-compass":"^0.7.0","@testing-library/react":"^12.0.0","@types/chai":"^4.2.21","chai":"^4.1.2","debug":"^3.0.1","depcheck":"^1.4.1","electron":"^13.5.1","electron-mocha":"^10.1.0","eslint":"^7.25.0","eventemitter3":"^4.0.0","hadron-app-registry":"^8.10.0","hadron-ipc":"^2.9.0","hadron-react-buttons":"^5.7.0","hadron-react-components":"^5.13.0","mocha":"^8.4.0","mongodb-data-service":"^21.19.0","mongodb-ns":"^2.3.0","nyc":"^15.0.0","prettier":"2.3.2","react":"^16.14.0","react-dom":"^16.14.0","resolve":"^1.15.1","rimraf":"^3.0.2","sinon":"^8.1.1","xvfb-maybe":"^0.2.1"},"homepage":"https://github.com/mongodb-js/compass","bugs":{"url":"https://jira.mongodb.org/projects/COMPASS/issues","email":"compass@mongodb.com"},"repository":{"type":"git","url":"https://github.com/mongodb-js/compass.git"}}');function gt(e){e.registerComponent("Home.Home",ct)}function dt(e){e.deregisterComponent("Home.Home")}const ht=ct},53221:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ExportPlugin:()=>gr,ImportPlugin:()=>Mn,activate:()=>br,deactivate:()=>Sr,default:()=>Ar,metadata:()=>Tr});var r=n(2784),s=n(13980),a=n.n(s),o=n(16435),i=(n(95682),n(21045),n(17244),n(42068),n(75519),n(39432),n(73574),n(33619),n(53862),n(26881),n(35359),n(98208),n(13608),n(75676),n(5993),n(74456),n(4858)),l=n(15251);function p(){const{dialog:e,getCurrentWindow:t}=n(72298).remote;return e.showOpenDialog(t(),{title:"Select a file to import",filters:[{name:"All Files",extensions:["*"]},{name:"JSON",extensions:["json","ndjson","jsonl"]},{name:"CSV",extensions:["csv","tsv"]}],properties:["openFile","createDirectory","promptToCreate"]})}const m="STARTED",c="CANCELED",u="COMPLETED",g="COMPLETED_WITH_ERRORS",d="FAILED",h="UNSPECIFIED",T=[c,u,g,d],y=[u,g],f=m,b=c,S=u,A=d,E=h,_=g;var x=n(72779),I=n.n(x);const L={"progress-bar":"progress-bar-module-progress-bar__29A2l","progress-bar-chart-wrapper":"progress-bar-module-progress-bar-chart-wrapper__13gUZ","progress-bar-bar":"progress-bar-module-progress-bar-bar__387L8","progress-bar-bar-is-canceled":"progress-bar-module-progress-bar-bar-is-canceled__1nvqd","progress-bar-bar-is-failed":"progress-bar-module-progress-bar-bar-is-failed__2hMyr","progress-bar-bar-is-completed":"progress-bar-module-progress-bar-bar-is-completed__3VXeo","progress-bar-bar-is-with-errors":"progress-bar-module-progress-bar-bar-is-with-errors__1_Gc9","progress-bar-bar-is-secondary":"progress-bar-module-progress-bar-bar-is-secondary__3smTl","progress-bar-status":"progress-bar-module-progress-bar-status__1YBGV","progress-bar-status-message":"progress-bar-module-progress-bar-status-message__1pNfr","progress-bar-status-message-is-failed":"progress-bar-module-progress-bar-status-message-is-failed__1Q5Uy","progress-bar-status-message-cancel":"progress-bar-module-progress-bar-status-message-cancel__QaLyT","progress-bar-status-stats":"progress-bar-module-progress-bar-status-stats__126Ta"};function v(e,t){return function(n=""){const r=`${t}${""!==n?"-"+n:""}`,s=e[r];if(!s)throw new TypeError(`Style does not exist for ${r}`);return s}}const C=new Intl.NumberFormat;function R(e){return C.format(Math.ceil(Number(e)))}const O=v(L,"progress-bar");function N(e,t){return`${Math.min(Math.max(e/t*100,0),100).toFixed(3)}%`}class j extends r.PureComponent{static displayName="ProgressBarComponent";static propTypes={status:a().string.isRequired,message:a().string.isRequired,docsTotal:a().number,docsProcessed:a().number,docsWritten:a().number,cancel:a().func,progressLabel:a().func,progressTitle:a().func,withErrors:a().bool};static defaultProps={progressLabel:(e,t)=>`${e}/${t}`,progressTitle:(e,t)=>`${e} documents out of ${t}`};getBarClassName(e=!1){const{status:t,withErrors:n}=this.props;return I()({[O("bar")]:!0,[O("bar-is-canceled")]:t===c,[O("bar-is-completed")]:t===u,[O("bar-is-failed")]:t===d,[O("bar-is-with-errors")]:!T.includes(t)&&n||t===g,[O("bar-is-secondary")]:e})}getMessageClassName(){return I()({[O("status-message")]:!0,[O("status-message-is-failed")]:this.props.status===d})}getCancelButton(){return this.props.status!==m?null:r.createElement("button",{className:I()(O("status-message-cancel")),onClick:this.handleCancel},"Stop")}handleCancel=e=>{e.stopPropagation(),e.preventDefault(),this.props.cancel()};renderStats(){const{docsTotal:e,docsWritten:t,progressLabel:n,progressTitle:s}=this.props,a=R(t),o=R(e);return r.createElement("p",{className:O("status-stats"),title:s(a,o)},n(a,o))}render(){const{message:e,status:t,docsProcessed:n,docsTotal:s,docsWritten:a}=this.props;return t===h?null:r.createElement("div",{className:O("chart-wrapper")},r.createElement("div",{className:O()},r.createElement("div",{className:this.getBarClassName(),style:{width:N(a,s)}}),Boolean(n)&&r.createElement("div",{className:this.getBarClassName(!0),style:{width:N(n,s)}})),r.createElement("div",{className:L["progress-bar-status"]},r.createElement("p",{className:this.getMessageClassName()},e,this.getCancelButton()),this.renderStats()))}}const w=j;var D=n(11808),B=n.n(D);const M=v({"error-box":"error-box-module-error-box__BFG56"},"error-box"),$={fg:"#FFF",bg:"#000",newline:!0,escapeXML:!0,stream:!1};class k extends r.PureComponent{static propTypes={message:a().string,dataTestId:a().string};render(){if(!this.props.message)return null;const e=(t=this.props.message,new(B())($).toHtml(t));var t;return r.createElement("div",{"data-test-id":this.props.dataTestId,className:M(),dangerouslySetInnerHTML:{__html:e}})}}const P=k;var F=n(38896),U=n.n(F);const q={},G=function(e){return q[e]||(q[e]=U()(`mongodb-compass-import-export:${e}`)),q[e]};n(67526),n(33354),n(25870),n(10930),n(40574),n(94116),n(43267),n(74614),n(19852),n(44306),n(26077),n(71072),n(50183);var H=n(24179);const V=G("bson-csv"),K=["1","true","TRUE",!0],W=["0","false","FALSE","null","","NULL",!1],Y={String:{fromString:function(e){return""+e}},Number:{fromString:function(e){return(e=""+e).includes(".")?parseFloat(e):parseInt(e,10)}},Boolean:{fromString:function(e){return!!K.includes(e)||!W.includes(e)&&Boolean(e)}},Date:{fromString:function(e){return e instanceof Date?e:new Date(""+e)}},ObjectID:{fromString:function(e){const{isBSON:t}=Q(e);return t?e:new H.default.ObjectID(e)}},Long:{fromString:function(e){return e instanceof H.default.Long?e:H.default.Long.fromString(e)}},RegExpr:{fromString:function(e){return e instanceof H.default.BSONRegExp?e:new H.default.BSONRegExp(e)}},Binary:{fromString:function(e){return e instanceof H.default.Binary?e:new H.default.Binary(e,H.default.Binary.SUBTYPE_DEFAULT)}},UUID:{fromString:function(e){return e instanceof H.default.Binary?e:new H.default.Binary(e,H.default.Binary.SUBTYPE_UUID)}},MD5:{fromString:function(e){return e instanceof H.default.Binary?e:new H.default.Binary(e,H.default.Binary.SUBTYPE_MD5)}},Timestamp:{fromString:function(e){return e instanceof H.default.Timestamp?e:H.default.Timestamp.fromString(e)}},Double:{fromString:function(e){return new H.default.Double(e)}},Int32:{fromString:function(e){return parseInt(e,10)}},Decimal128:{fromString:function(e){return H.default.Decimal128.fromString(e)}}};Y.BSONRegExp=Y.RegExpr;const z=Y,Z=new Map([["[object Array]","Array"],["[object Object]","Object"],["[object String]","String"],["[object Date]","Date"],["[object Number]","Number"],["[object Function]","Function"],["[object RegExp]","RegExp"],["[object Boolean]","Boolean"],["[object Null]","Null"],["[object Undefined]","Undefined"]]);function X(e){const t=e&&e._bsontype;return"ObjectId"===t?"ObjectID":t||void 0}function J(e){const t=X(e);if(t)return t;const n=Object.prototype.toString.call(e);return Z.get(n)||X(e)}function Q(e){const t=J(e),n=X(e);return{type:n||t,isBSON:!!n}}const ee=function(e){const{type:t,isBSON:n}=Q(e);return n?"BSONRegExp"===t?`/${e.pattern}/${e.options}`:"ObjectID"===t?e.toString("hex"):"Binary"===t?e.toString("base64"):e.toString():"Array"===t?H.default.EJSON.stringify(e,null,null):"Date"===t?e.toISOString():""+e},te=G("select-field-type");class ne extends r.PureComponent{static propTypes={selectedType:a().string,onChange:a().func.isRequired};onChange(e){te("type changed",e.currentTarget.value),this.props.onChange(e.currentTarget.value)}render(){const{selectedType:e}=this.props,t=this.onChange.bind(this);return r.createElement("select",{defaultValue:e,onChange:t},Object.keys(z).map((e=>r.createElement("option",{key:e,value:e},e))))}}const re=ne,se=v({"import-preview":"import-preview-module-import-preview__vnqCr","import-preview-header":"import-preview-module-import-preview-header__2M-_p",unchecked:"import-preview-module-unchecked__1SV4V"},"import-preview"),ae=G("import-preview");class oe extends r.PureComponent{static propTypes={values:a().array,fields:a().array,index:a().number};render(){const{values:e,index:t}=this.props,n=e.map(((e,t)=>{const n=this.props.fields[t];return""===e&&(e=r.createElement("i",null,"empty string")),n&&!n.checked?r.createElement("td",{key:t,className:"unchecked"},e):r.createElement("td",{key:t},e)}));return r.createElement("tr",null,[].concat(r.createElement("td",{key:"field-index"},t+1),n))}}class ie extends r.PureComponent{static propTypes={values:a().array,fields:a().array};render(){const{values:e}=this.props;return r.createElement("tbody",null,e.map(((e,t)=>r.createElement(oe,{key:t,fields:this.props.fields,values:e,index:t}))))}}class le extends r.PureComponent{static propTypes={fields:a().array,onCheckedChanged:a().func.isRequired,setFieldType:a().func.isRequired};onCheckedChanged(e,t){ae("Checked changed",e,t.currentTarget.checked),this.props.onCheckedChanged(e,t.currentTarget.checked)}render(){const e=this.props.fields.map((e=>r.createElement("th",{key:e.path,"data-test-id":`preview-field-header-${e.path}`},r.createElement("div",null,r.createElement("input",{type:"checkbox",checked:e.checked,title:e.checked?`${e.path} values will be imported`:`Values for ${e.path} will be ignored`,onChange:this.onCheckedChanged.bind(this,e.path)}),r.createElement("ul",null,r.createElement("li",null,e.path),r.createElement("li",null,r.createElement(re,{selectedType:e.type,onChange:this.props.setFieldType.bind(this,e.path)})))))));return r.createElement("thead",null,r.createElement("tr",null,[].concat(r.createElement("th",{key:"field-index"}),e)))}}class pe extends r.PureComponent{static propTypes={fields:a().array,values:a().array,onFieldCheckedChanged:a().func.isRequired,setFieldType:a().func.isRequired,loaded:a().bool};render(){const{loaded:e,fields:t,values:n}=this.props;return e?Array.isArray(t)&&Array.isArray(n)?r.createElement("div",{className:se()},r.createElement("div",{className:se("header")},"Specify Fields and Types"),r.createElement("table",null,r.createElement(le,{fields:this.props.fields,onCheckedChanged:this.props.onFieldCheckedChanged,setFieldType:this.props.setFieldType}),r.createElement(ie,{fields:this.props.fields,values:this.props.values}))):(ae("Preview unavailable: Fields or values is not an array",{fields:t,values:n}),null):(ae("Preview unavailable: not loaded yet"),null)}}const me=pe;var ce=n(50517);const ue="csv",ge="json";var de=n(99262),he=n(63584);const Te=v({"select-file-type":"select-file-type-module-select-file-type__3zshe","select-file-type-selected":"select-file-type-module-select-file-type-selected__1W_MU"},"select-file-type");class ye extends r.PureComponent{static propTypes={fileType:a().string,onSelected:a().func,label:a().string};render(){const{fileType:e,onSelected:t,label:n}=this.props;return r.createElement(de.Z,null,r.createElement(ce.Label,null,n),r.createElement("div",{className:Te()},r.createElement(he.Z,{"data-test-id":"select-file-type-json","aria-selected":e===ge,className:I()({[Te("selected")]:e===ge}),onClick:t.bind(this,ge)},"JSON"),r.createElement(he.Z,{"data-test-id":"select-file-type-csv","aria-selected":e===ue,className:I()({[Te("selected")]:e===ue}),onClick:t.bind(this,ue)},"CSV")))}}const fe=ye,be=v({"import-options-form":"import-options-module-import-options-form__bilx7","import-options-browse-group":"import-options-module-import-options-browse-group__2xD1A","import-options-browse-button":"import-options-module-import-options-browse-button__2f_Py","import-options-input":"import-options-module-import-options-input__uT7y6","import-options-legend":"import-options-module-import-options-legend__2byE0","import-options-option":"import-options-module-import-options-option__3HfdT","import-options-option-checkbox":"import-options-module-import-options-option-checkbox__2YdzK","import-options-option-select":"import-options-module-import-options-option-select__2xpqO","import-options-option-checkbox-label":"import-options-module-import-options-option-checkbox-label__rVl5u","import-options-option-select-label":"import-options-module-import-options-option-select-label__31CmG"},"import-options");class Se extends r.PureComponent{static propTypes={delimiter:a().string,setDelimiter:a().func.isRequired,fileType:a().string,selectImportFileType:a().func.isRequired,fileName:a().string,selectImportFileName:a().func.isRequired,stopOnErrors:a().bool,setStopOnErrors:a().func,ignoreBlanks:a().bool,setIgnoreBlanks:a().func,fileOpenDialog:a().func};handleChooseFile=e=>{this.props.selectImportFileName(e[0])};handleOnSubmit=e=>{e.preventDefault(),e.stopPropagation()};render(){const e=this.props.fileType===ue,t=this.props.fileName?[this.props.fileName]:void 0;return r.createElement("form",{onSubmit:this.handleOnSubmit,className:be("form")},r.createElement(ce.FileInput,{label:"Select File",id:"import-file",onChange:this.handleChooseFile.bind(this),values:t,variant:"VERTICAL"}),r.createElement(fe,{fileType:this.props.fileType,onSelected:this.props.selectImportFileType,label:"Select Input File Type"}),r.createElement("fieldset",null,r.createElement("legend",{className:be("legend")},"Options"),e&&r.createElement(r.Fragment,null,r.createElement("div",{className:be("option")},r.createElement("label",{className:be("option-select-label")},"Select delimiter",r.createElement("select",{id:"import-delimiter-select",onChange:e=>{this.props.setDelimiter(e.currentTarget.value)},defaultValue:this.props.delimiter,className:be("option-select")},r.createElement("option",{value:","},"comma"),r.createElement("option",{value:"\t"},"tab"),r.createElement("option",{value:";"},"semicolon"),r.createElement("option",{value:" "},"space")))),r.createElement("div",{className:be("option")},r.createElement("label",{className:be("option-checkbox-label")},r.createElement("input",{type:"checkbox",checked:this.props.ignoreBlanks,onChange:()=>{this.props.setIgnoreBlanks(!this.props.ignoreBlanks)},className:be("option-checkbox")}),"Ignore empty strings"))),r.createElement("div",{className:be("option")},r.createElement("label",{className:be("option-checkbox-label")},r.createElement("input",{type:"checkbox",checked:this.props.stopOnErrors,onChange:()=>{this.props.setStopOnErrors(!this.props.stopOnErrors)},className:be("option-checkbox")}),"Stop on errors"))))}}const Ae=Se;var Ee=n(73837),_e=n.n(Ee),xe=n(57147),Ie=n.n(xe),Le=n(12781),ve=n.n(Le),Ce=n(95609),Re=n.n(Ce),Oe=n(6856);const Ne="import-export/ns/NS_CHANGED",je=e=>({type:Ne,ns:e}),we="import-export/ns/DATA_SERVICE_CONNECTED",De=(e,t)=>({type:we,error:e,dataService:t}),Be="import-export/global-app-registry",Me=`${Be}/GLOBAL_APP_REGISTRY_ACTIVATED`,$e=`${Be}/GLOBAL_APP_REGISTRY_EMIT`,ke=e=>({type:Me,appRegistry:e}),Pe=(e,...t)=>({type:$e,name:e,args:t});var Fe=n(58205),Ue=n.n(Fe),qe=n(717);const Ge=G("detect-import-file"),He=function(e,t){let n;Ge("peeking at",e);let r=!1;const s=Ie().createReadStream(e,"utf-8"),a=Ue()({maxBuffer:1024},(function(t,s){const a=t.toString("utf-8");Ge("peek is",a),"["===a[0]||"{"===a[0]?(n="json","}"===a[a.length-1]&&(r=!0)):n=/\.(csv)$/.test(e)?"csv":"json",Ge("swapping"),s("done")}));(0,qe.mark)("detect-import-file"),ve().pipeline(s,a,(function(s){if((0,qe.stop)("detect-import-file"),s&&"done"!==s)return Ge("pipeline error",s),t(s);const a={fileName:e,fileIsMultilineJSON:r,fileType:n};return Ge("detected",a),t(null,a)}))},Ve=G("collection-stream");function Ke({index:e,code:t,errmsg:n,op:r,errInfo:s}){const a=new Error(n);return a.index=e,a.code=t,a.op=r,a.errInfo=s,a.name=e&&r?"WriteError":"WriteConcernError",a}class We extends Le.Writable{constructor(e,t,n){super({objectMode:!0}),this.dataService=e,this.ns=t,this.BATCH_SIZE=1e3,this.docsWritten=0,this.docsProcessed=0,this.stopOnErrors=n,this.batch=[],this._batchCounter=0,this._stats={ok:0,nInserted:0,nMatched:0,nModified:0,nRemoved:0,nUpserted:0,writeErrors:[],writeConcernErrors:[]},this._errors=[]}_collection(){return this.dataService._collection(this.ns,"CRUD")}_write(e,t,n){if(this.batch.push(e),this.batch.length===this.BATCH_SIZE)return this._executeBatch(n);n()}_final(e){if(Ve("running _final()"),0===this.batch.length)return Ve("%d docs written",this.docsWritten),this.printJobStats(),e();Ve("draining buffered docs",this.batch.length),this._executeBatch(e)}_executeBatch(e){const t=this.batch;this.batch=[],this._collection().bulkWrite(t.map((e=>({insertOne:e}))),{ordered:this.stopOnErrors,retryWrites:!1,checkKeys:!1},((n,r)=>{const s=n&&n.result&&n.result.result||r;return this._mergeBulkOpResult(s||{}),this.docsProcessed+=t.length,this.docsWritten=this._stats.nInserted,this._batchCounter++,n&&this._errors.push(n),this.printJobStats(),this.emit("progress",{docsWritten:this.docsWritten,docsProcessed:this.docsProcessed,errors:this._errors.concat(this._stats.writeErrors).concat(this._stats.writeConcernErrors)}),this.stopOnErrors?e(n):e()}))}_mergeBulkOpResult(e={}){["nInserted","nMatched","nModified","nRemoved","nUpserted","ok"].forEach((t=>{this._stats[t]+=e[t]||0})),this._stats.writeErrors.push(...(e.writeErrors||[]).map(Ke)),this._stats.writeConcernErrors.push(...(e.writeConcernErrors||[]).map(Ke))}printJobStats(){console.group("Import Info"),console.table(this._stats),console.log("Errors Seen"),console.log(this._errors.concat(this._stats.writeErrors).concat(this._stats.writeConcernErrors)),console.groupEnd()}}var Ye=n(13650),ze=n(60336),Ze=n.n(ze),Xe=n(855),Je=n.n(Xe),Qe=n(98357),et=n.n(Qe),tt=n(65824),nt=n.n(tt);const rt=G("import-parser"),st=function({fileName:e="myfile",fileType:t="json",delimiter:n=",",fileIsMultilineJSON:r=!1}={}){return"csv"===t?function({delimiter:e=","}={}){return Ze()({separator:e})}({delimiter:n}):(rt("got kwargs",{fileName:e,fileType:t,delimiter:n,fileIsMultilineJSON:r}),function({selector:e="*",fileName:t="import.json"}={}){rt("creating json parser with selector",{selector:e,fileName:t});let n="";const r=new Ye.parse(e),s=new Le.Transform({writableObjectMode:!1,readableObjectMode:!0,transform:function(e,t,s){n=e,rt("parser write",e.toString("utf-8")),r.write(e),s()}});return r.on("data",(e=>{try{const t=H.EJSON.parse(H.EJSON.stringify(e,{relaxed:!1,promoteValues:!0,bsonRegExp:!0,legacy:!1}),{relaxed:!1,legacy:!1,promoteValues:!0,bsonRegExp:!0});rt("JSON parser on data",{d:e,doc:t}),s.push(t)}catch(e){rt("error parsing JSON",e)}})),r.on("error",(function(e){try{Je()(n.toString("utf-8"),H.EJSON.deserialize,t)}catch(t){rt("error parsing JSON",t),rt("original JSONStream error",e),s.emit("error",t)}finally{n=""}})),r.on("end",s.emit.bind(s,"end")),s}({selector:r?null:"*",fileName:e}))};var at=n(66338);function ot(e){return(0,at.flatten)(e,{safe:!0,ignoreValue:function(e){if(Q(e).isBSON)return!0}})}const it={serialize:ot,deserialize:function(e){return(0,at.unflatten)(e)}};var lt=n(39491),pt=n.n(lt);const mt=G("import-preview"),ct=n(83279);var ut=n(76635),gt=n.n(ut);const dt=G("apply-import-type-and-projection");function ht(e,{transform:t=[],exclude:n=[],ignoreBlanks:r=!1,keyPrefix:s=""}={}){if(Array.isArray(e))return dt("data is an array"),e.map((function(e){return ht(e,{transform:t,exclude:n,ignoreBlanks:r,keyPrefix:s})}));if(null==e)return dt("data is null or undefined"),e;if(0===Object.keys(e).length)return dt("empty document"),e;const a=ot(e),o={};gt().forEach(n,(function(e){n.indexOf(e)>-1&&gt().unset(a,[e])}),{});const i=gt().fromPairs(t);return gt().keys(a).forEach((function(e){const t=gt().get(a,e);if(!0===r&&""===t)return gt().unset(o,[e]),!1;const n=gt().get(i,e);if(!n)return void gt().set(o,e,t);let s=t;if(n!==Q(t).type){if(!z[n])throw new TypeError("Cant find lookup for "+n);s=z[n].fromString(t)}gt().set(o,e,s)})),dt("result",o),o}var Tt=n(6909);const yt=(0,Ee.promisify)(Ie().exists),ft=(0,Ee.promisify)(Ie().stat),{log:bt,mongoLogId:St,debug:At,track:Et}=(0,Tt.default)("COMPASS-IMPORT-EXPORT-UI"),_t="import-export/import",xt=`${_t}/STARTED`,It=`${_t}/CANCELED`,Lt=`${_t}/GUESSTIMATED_PROGRESS`,vt=`${_t}/PROGRESS`,Ct=`${_t}/FINISHED`,Rt=`${_t}/FAILED`,Ot=`${_t}/FILE_TYPE_SELECTED`,Nt=`${_t}/FILE_SELECTED`,jt=`${_t}/OPEN`,wt=`${_t}/CLOSE`,Dt=`${_t}/SET_PREVIEW`,Bt=`${_t}/SET_DELIMITER`,Mt=`${_t}/SET_GUESSTIMATED_TOTAL`,$t=`${_t}/SET_STOP_ON_ERRORS`,kt=`${_t}/SET_IGNORE_BLANKS`,Pt=`${_t}/TOGGLE_INCLUDE_FIELD`,Ft=`${_t}/SET_FIELD_TYPE`,Ut={isOpen:!1,errors:[],fileName:"",fileIsMultilineJSON:!1,useHeaderLines:!0,status:E,fileStats:null,docsTotal:-1,docsProcessed:0,docsWritten:0,guesstimatedDocsTotal:0,guesstimatedDocsProcessed:0,delimiter:",",stopOnErrors:!1,ignoreBlanks:!0,fields:[],values:[],previewLoaded:!1,exclude:[],transform:[],fileType:""},qt=e=>({type:Rt,error:e}),Gt=(e,t,n,r)=>s=>{At("loading preview",{fileName:e,fileType:t,delimiter:n,fileIsMultilineJSON:r});const a=Ie().createReadStream(e,{encoding:"utf8",end:20480}),o=Re()(),i=function({MAX_SIZE:e=10,fileType:t}={}){return new Le.Writable({objectMode:!0,write:function(n,r,s){if(this.docs||(this.docs=[],this.fields=[],this.values=[]),this.docs.length>=e)return mt("noop"),s();this.docs.push(n);const a=it.serialize(n);if(0===this.fields.length){for(let[e,n]of Object.entries(a)){"symbol"==typeof e&&(e=e.description),pt().equal(typeof e,"string","import-preview: expected key to be a String not "+typeof e);const r={path:e,checked:!0};t===ue&&(r.type=J(n)),this.fields.push(r)}mt("set fields",this.fields,{from:n})}const o=Object.keys(a);o.length!==this.fields.length&&mt("invariant detected!",{expected:this.fields.map((e=>e.path)),got:o});const i=Object.values(a).map((e=>ee(e)));return mt("set values",i),this.values.push(i),s(null)}})}({fileType:t,delimiter:n,fileIsMultilineJSON:r});ve().pipeline(a,o,function(e,t,n){return Ue()({maxBuffer:20480},(function(r,s){return s(null,st({fileType:e,delimiter:t,fileIsMultilineJSON:n}))}))}(t,n,r),i,(function(e){if(e)return bt.error(St(1001000097),"Import","Failed to load preview docs",e),void At("Error while loading preview docs:",e.stack);s({type:Dt,fields:i.fields,values:i.values})}))},Ht=v({"import-modal-errors":"import-modal-module-import-modal-errors__1K9Rg","import-modal-errors-list":"import-modal-module-import-modal-errors-list__2Gkok","import-modal-errors-list-item":"import-modal-module-import-modal-errors-list-item__1hvo1","import-modal-show-more-errors-button":"import-modal-module-import-modal-show-more-errors-button__1qTtk","import-modal-show-more-errors-button-text":"import-modal-module-import-modal-show-more-errors-button-text__b-YSt"},"import-modal"),Vt={[m]:"Importing documents...",[c]:"Import canceled",[u]:"Import completed",[g]:"Import completed with following errors:",[d]:"Failed to import with the following error:",[h]:""};function Kt({errors:e}){const[t,n]=(0,r.useState)(3),s=(0,r.useMemo)((()=>[...new Set(e.map((e=>e.message)))].reverse()),[e]),a=(0,r.useMemo)((()=>R(Math.min(10,s.length-t))),[s.length,t]),o=(0,r.useCallback)((()=>{n((e=>e+10))}));return 0===s.length?r.createElement("div",{className:Ht("errors")},r.createElement(P,{dataTestId:"import-error-box",message:s[0]})):r.createElement("div",{className:Ht("errors")},r.createElement("ul",{className:Ht("errors-list")},s.slice(0,t).map((e=>r.createElement("li",{key:e,className:Ht("errors-list-item")},r.createElement(P,{dataTestId:"import-error-box",message:e}))))),a>0&&r.createElement("button",{className:I()("btn btn-default btn-xs",Ht("show-more-errors-button")),onClick:o},r.createElement("i",{className:"fa fa-arrow-down","aria-hidden":"true"}),r.createElement("span",{className:Ht("show-more-errors-button-text")},"Show ",a," more errors")))}Kt.propTypes={errors:a().array};class Wt extends r.PureComponent{static propTypes={open:a().bool,ns:a().string.isRequired,startImport:a().func.isRequired,cancelImport:a().func.isRequired,closeImport:a().func.isRequired,errors:a().array,status:a().string.isRequired,selectImportFileType:a().func.isRequired,selectImportFileName:a().func.isRequired,setDelimiter:a().func.isRequired,delimiter:a().string,fileType:a().string,fileName:a().string,stopOnErrors:a().bool,setStopOnErrors:a().func,ignoreBlanks:a().bool,setIgnoreBlanks:a().func,docsTotal:a().number,docsProcessed:a().number,docsWritten:a().number,guesstimatedDocsTotal:a().number,guesstimatedDocsProcessed:a().number,fields:a().array,values:a().array,toggleIncludeField:a().func.isRequired,setFieldType:a().func.isRequired,previewLoaded:a().bool};handleCancel=()=>{this.props.cancelImport()};handleClose=()=>{this.handleCancel(),this.props.closeImport()};handleImportBtnClicked=()=>{this.props.startImport()};wasImportSuccessful(){return y.includes(this.props.status)}renderDoneButton(){return this.wasImportSuccessful()?r.createElement(l.TextButton,{dataTestId:"done-button",className:"btn btn-primary btn-sm",text:"DONE",clickHandler:this.handleClose}):null}renderCancelButton(){if(!this.wasImportSuccessful())return r.createElement(l.TextButton,{dataTestId:"cancel-button",className:"btn btn-default btn-sm",text:T.includes(this.props.status)?"Close":"Cancel",clickHandler:this.handleClose})}renderImportButton(){return this.wasImportSuccessful()?null:r.createElement(l.TextButton,{dataTestId:"import-button",className:"btn btn-primary btn-sm",text:this.props.status===m?"Importing...":"Import",disabled:!this.props.fileName||this.props.status===m,clickHandler:this.handleImportBtnClicked})}renderImportPreview(){if(this.props.fileType===ue)return r.createElement(me,{loaded:this.props.previewLoaded,onFieldCheckedChanged:this.props.toggleIncludeField,setFieldType:this.props.setFieldType,values:this.props.values,fields:this.props.fields})}render(){const{status:e,errors:t,docsTotal:n,docsProcessed:s,docsWritten:a,guesstimatedDocsTotal:o,guesstimatedDocsProcessed:l}=this.props,m=-1===n;return r.createElement(i.Z,{className:"with-global-bootstrap-styles",show:this.props.open,onHide:this.handleClose,backdrop:"static","data-test-id":"import-modal"},r.createElement(i.Z.Header,{closeButton:!0},"Import To Collection ",this.props.ns),r.createElement(i.Z.Body,null,r.createElement(Ae,{delimiter:this.props.delimiter,setDelimiter:this.props.setDelimiter,fileType:this.props.fileType,selectImportFileType:this.props.selectImportFileType,fileName:this.props.fileName,selectImportFileName:this.props.selectImportFileName,stopOnErrors:this.props.stopOnErrors,setStopOnErrors:this.props.setStopOnErrors,ignoreBlanks:this.props.ignoreBlanks,setIgnoreBlanks:this.props.setIgnoreBlanks,fileOpenDialog:p}),this.renderImportPreview(),r.createElement(w,{status:this.props.status,withErrors:t.length>0,cancel:this.props.cancelImport,docsWritten:a,docsProcessed:Math.max(s,l),docsTotal:m?Math.max(s,o):n,progressLabel:(e,t)=>`${e}/${m?"~":""}${t}`,progressTitle:(e,t)=>`Imported ${e} out of ${m?"approximately ":""}${t} documents`,message:Vt[e]}),r.createElement(Kt,{errors:t})),r.createElement(i.Z.Footer,null,this.renderCancelButton(),this.renderImportButton(),this.renderDoneButton()))}}const Yt=(0,o.$j)((e=>({ns:e.ns,open:e.importData.isOpen,errors:e.importData.errors,fileType:e.importData.fileType,fileName:e.importData.fileName,status:e.importData.status,docsTotal:e.importData.docsTotal,docsProcessed:e.importData.docsProcessed,docsWritten:e.importData.docsWritten,guesstimatedDocsTotal:e.importData.guesstimatedDocsTotal,guesstimatedDocsProcessed:e.importData.guesstimatedDocsProcessed,delimiter:e.importData.delimiter,stopOnErrors:e.importData.stopOnErrors,ignoreBlanks:e.importData.ignoreBlanks,fields:e.importData.fields,values:e.importData.values,previewLoaded:e.importData.previewLoaded})),{startImport:()=>(e,t)=>{const n=t(),{ns:r,dataService:{dataService:s},importData:a}=n,{fileName:o,fileType:i,fileIsMultilineJSON:l,fileStats:{size:p},delimiter:m,ignoreBlanks:c,stopOnErrors:u,exclude:g,transform:d}=a,h=c&&i===ue;bt.info(St(1001000080),"Import","Start reading from source file",{ns:r,fileName:o,fileType:i,fileIsMultilineJSON:l,fileSize:p,delimiter:m,ignoreBlanks:h,stopOnErrors:u,exclude:g,transform:d});const T=Ie().createReadStream(o,"utf8"),y=Re()(),f=st({fileName:o,fileType:i,delimiter:m,fileIsMultilineJSON:l}),b=function({transform:e=[],exclude:t=[],ignoreBlanks:n=!1}={}){if(!Array.isArray(e))throw new TypeError("spec.transform must be an array");if(!Array.isArray(t))throw new TypeError("spec.exclude must be an array");return 0===e.length&&0===t.length&&!1===n?(dt("spec is a noop. passthrough stream"),new Le.PassThrough({objectMode:!0})):(dt("creating transform stream for spec",{transform:e,exclude:t,ignoreBlanks:n}),new Le.Transform({objectMode:!0,transform:function(r,s,a){try{return a(null,ht(r,{transform:e,exclude:t,ignoreBlanks:n}))}catch(e){return a(e)}}}))}({exclude:g,transform:d,ignoreBlanks:h}),S=function(e,t,n){return new We(e,t,n)}(s,r,u);S.on("progress",((t,n)=>{e((({docsWritten:e,docsProcessed:t,errors:n})=>({type:vt,docsWritten:e,docsProcessed:t,errors:n}))(t))}));const A=function(t,n){const r=nt()({objectMode:!0,length:t/800,time:250}),s=et()((function(t){!function(t,n){var r,s;t||e((r=n.transferred,s=n.length,{type:Lt,guesstimatedDocsProcessed:r,guesstimatedDocsTotal:s}))}(null,t)}),250,{leading:!0});return r.on("progress",s),r}(p),E=function(t,n,r){return new Le.Transform({objectMode:!0,transform:function(r,s,a){if(this.sizes||(this.sizes=[],this._done=!1,this.lastBytesRead=0),!0===this._done)return a(null,r);if(this.sizes.push(ct(r)),t.bytesRead>=65536&&!this._done&&1e3===this.sizes.length){this._done=!0;const r=t.bytesRead/this.sizes.length,s=n/r;o=s,null||(A.setLength(o),e({type:Mt,guesstimatedDocsTotal:o})),console.group("Object Size estimator"),console.log("source.bytesRead",t.bytesRead),console.log("bytesPerDoc",r),console.log("docs seen",this.sizes.length),console.log("est docs",s),console.log("js object sizes for docs seen",this.sizes),console.groupEnd()}var o;return a(null,r)}})}(T,p);console.time("import"),console.group("import:start"),console.group("Import Options:"),console.table({fileName:o,fileType:i,fileIsMultilineJSON:l,size:p,delimiter:m,ignoreBlanks:h,stopOnErrors:u}),console.log("Exclude"),console.table(g),console.log("Transform"),console.table(d),console.log("Running import..."),e(((e,t)=>({type:xt,source:e,dest:t}))(T,S)),ve().pipeline(T,y,f,b,E,A,S,(function(t){if(console.timeEnd("import"),Et("Import Completed",{file_type:i,all_fields:0===g.length,stop_on_error_selected:u,number_of_docs:S.docsWritten,success:!t}),t)return bt.error(St(1001000081),"Import","Import failed",{ns:r,docsWritten:S.docsWritten,error:t.message}),At("Error while importing:",t.stack),console.groupEnd(),console.groupEnd(),e(qt(t));var n,s;bt.info(St(1001000082),"Import","Import completed",{ns:r,docsWritten:S.docsWritten,docsProcessed:S.docsProcessed}),e((n=S.docsWritten,s=S.docsProcessed,{type:Ct,docsWritten:n,docsTotal:s}));const a={ns:r,size:p,fileType:i,docsWritten:S.docsWritten,fileIsMultilineJSON:l,delimiter:m,ignoreBlanks:h,stopOnErrors:u,hasExcluded:g.length>0,hasTransformed:d.length>0};e(Pe("import-finished",a)),console.groupEnd(),console.groupEnd()}))},cancelImport:()=>(e,t)=>{const{importData:n}=t(),{source:r,dest:s}=n;r&&s?(At("cancelling"),r.unpipe(),At("import canceled by user"),e({type:It})):At("no active import to cancel.")},selectImportFileType:e=>(t,n)=>{const{previewLoaded:r,fileName:s,delimiter:a,fileIsMultilineJSON:o}=n().importData;t({type:Ot,fileType:e}),r&&(At("preview needs updated because fileType changed"),t(Gt(s,e,a,o)))},selectImportFileName:e=>(t,n)=>{let r={};yt(e).then((t=>{if(!t)throw new Error(`File ${e} not found`);return ft(e)})).then((t=>(r={...t,type:Oe.lookup(e)},(0,Ee.promisify)(He)(e)))).then((s=>{At("get detection results"),t({type:Nt,fileName:e,fileStats:r,fileIsMultilineJSON:s.fileIsMultilineJSON,fileType:s.fileType});const a=n().importData.delimiter;t(Gt(e,s.fileType,a,s.fileIsMultilineJSON))})).catch((e=>{At("dispatching error",e.stack),t(qt(e))}))},setDelimiter:e=>(t,n)=>{const{previewLoaded:r,fileName:s,fileType:a,fileIsMultilineJSON:o}=n().importData;t({type:Bt,delimiter:e}),r&&(At("preview needs updated because delimiter changed",{fileName:s,fileType:a,delimiter:e,fileIsMultilineJSON:o}),t(Gt(s,a,e,o)))},setStopOnErrors:e=>({type:$t,stopOnErrors:e}),setIgnoreBlanks:e=>({type:kt,ignoreBlanks:e}),closeImport:()=>({type:wt}),toggleIncludeField:e=>({type:Pt,path:e}),setFieldType:(e,t)=>({type:Ft,path:e,bsonType:t})})(Wt),zt=Yt;var Zt=n(18717),Xt=n(43292);const Jt="QUERY",Qt="FIELDS",en="FILETYPE",tn=Jt;var nn=n(7049),rn=n(22037);const{log:sn,mongoLogId:an}=(0,Tt.default)("COMPASS-IMPORT-EXPORT-UI");function on(e){return Object.keys(it.serialize(e))}const ln=n(65824),{log:pn,mongoLogId:mn,debug:cn,track:un}=(0,Tt.default)("COMPASS-IMPORT-EXPORT-UI"),gn="import-export/export",dn=`${gn}/STARTED`,hn=`${gn}/CANCELED`,Tn=`${gn}/PROGRESS`,yn=`${gn}/FINISHED`,fn=`${gn}/ERROR`,bn=`${gn}/SELECT_FILE_TYPE`,Sn=`${gn}/SELECT_FILE_NAME`,An=`${gn}/ON_MODAL_OPEN`,En=`${gn}/CLOSE`,_n=`${gn}/CHANGE_EXPORT_STEP`,xn=`${gn}/UPDATE_ALL_FIELDS`,In=`${gn}/UPDATE_SELECTED_FIELDS`,Ln=`${gn}/TOGGLE_FULL_COLLECTION`,vn=`${gn}/RESET`,Cn={isOpen:!1,exportStep:tn,isFullCollection:!1,progress:0,query:{filter:{}},error:null,fields:{},allFields:{},fileName:"",fileType:ge,status:E,exportedDocsCount:0,count:0},Rn=e=>({type:fn,error:e}),On=e=>({type:In,fields:e}),Nn=async(e,t,n)=>{if((!n.filter||Object.keys(n.filter).length<1)&&!n.limit&&!n.skip)try{const n=(0,Ee.promisify)(e.estimatedCount.bind(e));return await n(t,{})}catch(e){}const r=(0,Ee.promisify)(e.count.bind(e));return await r(t,n.filter||{},{...n.limit?{limit:n.limit}:{},...n.skip?{skip:n.skip}:{}})},jn=(0,Zt.combineReducers)({globalAppRegistry:(e=null,t)=>t.type===Me?t.appRegistry:t.type===$e?(e&&e.emit(t.name,...t.args),e):e,dataService:(e=null,t)=>t.type===we?{error:t.error,dataService:t.dataService}:e,ns:(e="",t)=>t.type===Ne?t.ns:e,exportData:(e=Cn,t)=>{if(t.type===vn)return{...Cn};if(t.type===Ln)return{...e,isFullCollection:!e.isFullCollection};if(t.type===An)return{...Cn,count:t.count,query:t.query,isOpen:!0};if(t.type===En)return{...e,isOpen:!1};if(t.type===dn)return{...e,error:null,progress:0,status:f,source:t.source,dest:t.dest,count:t.count};if(t.type===Tn)return{...e,progress:t.progress,exportedDocsCount:t.exportedDocsCount};if(t.type===yn){const n=!(e.error||e.status===b);return{...e,status:n?S:e.status,exportedDocsCount:t.exportedDocsCount,source:void 0,dest:void 0}}return t.type===hn?{...e,status:b,source:void 0,dest:void 0}:t.type===In?{...e,fields:t.fields}:t.type===xn?{...e,allFields:t.fields}:t.type===Sn?{...e,fileName:t.fileName,status:E,exportedDocsCount:0,source:void 0,dest:void 0}:t.type===bn?{...e,fileType:t.fileType}:t.type===_n?{...e,exportStep:t.status}:t.type===fn?{...e,error:t.error,status:A}:e},importData:(e=Ut,t)=>{if(At("reducer handling action",t.type),t.type===Nt)return{...e,fileName:t.fileName,fileType:t.fileType,fileStats:t.fileStats,fileIsMultilineJSON:t.fileIsMultilineJSON,status:E,docsTotal:-1,docsProcessed:0,docsWritten:0,guesstimatedDocsTotal:0,guesstimatedDocsProcessed:0,errors:[],source:void 0,dest:void 0,fields:[]};if(t.type===Ot)return{...e,fileType:t.fileType};if(t.type===$t)return{...e,stopOnErrors:t.stopOnErrors};if(t.type===kt)return{...e,ignoreBlanks:t.ignoreBlanks};if(t.type===Bt)return{...e,delimiter:t.delimiter};if(t.type===Dt){const n={...e,values:t.values,fields:t.fields,previewLoaded:!0,exclude:[]};return n.transform=n.fields.filter((e=>e.checked)).map((e=>[e.path,e.type])),n}if(t.type===Pt){const n={...e};return n.fields=n.fields.map((e=>(e.path===t.path&&(e.checked=!e.checked),e))),n.transform=n.fields.map((e=>[e.path,e.type])),n.exclude=n.fields.filter((e=>!e.checked)).map((e=>e.path)),n}if(t.type===Ft){const n={...e};return n.fields=n.fields.map((e=>(e.path===t.path&&(e.checked=!0,e.type=t.bsonType),e))),n.exclude=n.fields.filter((e=>!e.checked)).map((e=>e.path)),n.transform=n.fields.filter((e=>e.checked)).map((e=>[e.path,e.type])),n}if(t.type===Rt)return{...e,errors:e.errors.includes(t.error)?e.errors:e.errors.concat(t.error),status:A};if(t.type===xt)return{...e,errors:[],docsTotal:-1,docsProcessed:0,docsWritten:0,guesstimatedDocsTotal:0,guesstimatedDocsProcessed:0,status:f,source:t.source,dest:t.dest};if(t.type===Mt)return{...e,guesstimatedDocsTotal:t.guesstimatedDocsTotal};if(t.type===Lt)return{...e,guesstimatedDocsProcessed:t.guesstimatedDocsProcessed,guesstimatedDocsTotal:t.guesstimatedDocsTotal};if(t.type===vt)return{...e,docsWritten:t.docsWritten,docsProcessed:t.docsProcessed,errors:t.errors};if(t.type===Ct){const n=e.status!==b,r=e.errors.length>0;let s=e.stats;return n&&r?s=_:n&&(s=S),{...e,status:s,docsWritten:t.docsWritten,docsTotal:t.docsTotal,source:void 0,dest:void 0}}return t.type===It?{...e,status:b,source:void 0,dest:void 0}:t.type===jt?{...Ut,isOpen:!0}:t.type===wt?{...e,isOpen:!1}:e}}),wn=(0,Zt.createStore)(jn,(0,Zt.applyMiddleware)(Xt.Z));wn.onActivated=e=>{wn.dispatch(ke(e)),e.on("data-service-connected",((e,t)=>{wn.dispatch(De(e,t))})),e.on("open-import",(({namespace:e})=>{wn.dispatch((e=>t=>{Et("Import Opened"),t(je(e)),t({type:jt})})(e))}))};const Dn=wn;class Bn extends r.Component{render(){return r.createElement(o.zt,{store:Dn},r.createElement(zt,null))}}const Mn=Bn;var $n=n(84935),kn=n.n($n),Pn=n(72591),Fn=n(51854);const Un=v({"export-select-output-form":"export-select-output-module-export-select-output-form__tcIyO","export-select-output-browse-group":"export-select-output-module-export-select-output-browse-group__1tmu3","export-select-output-output":"export-select-output-module-export-select-output-output__1odfl"},"export-select-output"),qn={[h]:"",[d]:"",[g]:"",[c]:"Export canceled",[u]:"Export completed",[m]:"Exporting documents..."};class Gn extends r.PureComponent{static propTypes={count:a().number,fileType:a().string,fileName:a().string,ns:a().string.isRequired,status:a().string.isRequired,exportedDocsCount:a().number,progress:a().number.isRequired,startExport:a().func.isRequired,exportStep:a().string.isRequired,cancelExport:a().func.isRequired,selectExportFileType:a().func.isRequired,selectExportFileName:a().func.isRequired};handleOnSubmit=e=>{e.preventDefault(),e.stopPropagation(),this.props.fileName&&this.props.startExport()};handleChooseFile=()=>{const e=kn()(this.props.ns).collection;(function(e,t){const{dialog:r,getCurrentWindow:s}=n(72298).remote,a=[{name:`${e} file`,extensions:[e.toLowerCase()]}],o=`Select ${e} target file`;return r.showSaveDialog(s(),{title:o,defaultPath:t,filters:a,buttonLabel:"Select"})})(this.props.fileType,e).then((e=>{e&&e.filePath&&!e.canceled&&this.props.selectExportFileName(e.filePath)}))};render(){return this.props.exportStep!==en?null:r.createElement("div",null,r.createElement("form",{onSubmit:this.handleOnSubmit,className:Un("form")},r.createElement(fe,{fileType:this.props.fileType,label:"Select Export File Type",onSelected:this.props.selectExportFileType}),r.createElement(de.Z,{controlId:"export-file"},r.createElement(ce.Label,{htmlFor:"select-export-file-output"},"Output"),r.createElement(Pn.Z,{bsClass:Un("browse-group")},r.createElement(Fn.Z,{type:"text",value:this.props.fileName,readOnly:!0}),r.createElement(l.IconTextButton,{text:"Browse",id:"select-export-file-output",iconClassName:"fa fa-folder-open-o",clickHandler:this.handleChooseFile,className:"btn btn-default btn-sm"})))),r.createElement(w,{status:this.props.status,docsTotal:this.props.count,progress:this.props.progress,cancel:this.props.cancelExport,message:qn[this.props.status],docsWritten:this.props.exportedDocsCount}))}}const Hn=Gn;var Vn=n(70602);const Kn=v({"export-field-field-number":"export-field-module-export-field-field-number__1guqd"},"export-field");class Wn extends r.PureComponent{static propTypes={index:a().number,checked:a().number,field:a().string.isRequired,onChange:a().func.isRequired};render(){return r.createElement("tr",{key:this.props.field},r.createElement("td",null,r.createElement("input",{type:"checkbox",id:this.props.index,name:this.props.field,checked:this.props.checked,onChange:this.props.onChange,"aria-label":`Include ${this.props.field} in exported collection`})),r.createElement("td",{className:Kn("field-number")},this.props.index+1),r.createElement("td",null,this.props.field))}}const Yn=Wn,zn=v({"export-select-fields-new-field":"export-select-fields-module-export-select-fields-new-field__1nS6u","export-select-fields-caption":"export-select-fields-module-export-select-fields-caption__3XRQ2","export-select-fields-field-wrapper":"export-select-fields-module-export-select-fields-field-wrapper__3WTOb","export-select-fields-field-name":"export-select-fields-module-export-select-fields-field-name__c9V7k","export-select-fields-field-number":"export-select-fields-module-export-select-fields-field-number__194Mu","export-select-fields-add-field-input":"export-select-fields-module-export-select-fields-add-field-input__19ux4","export-select-fields-return-symbol":"export-select-fields-module-export-select-fields-return-symbol__3RQbz","export-select-fields-table":"export-select-fields-module-export-select-fields-table__Y0c77"},"export-select-fields");class Zn extends r.PureComponent{static propTypes={fields:a().object.isRequired,exportStep:a().string.isRequired,updateSelectedFields:a().func.isRequired};constructor(e){super(e),this.newFieldRef=r.createRef()}state={addingFields:!1};componentDidUpdate(){this.state.addingFields&&(this.newFieldRef.current.scrollIntoView(),this.newFieldRef.current.focus())}addNewFieldButton=()=>{this.newFieldRef.current.scrollIntoView(),this.newFieldRef.current.focus(),this.setState({addingFields:!0})};handleFieldCheckboxChange=e=>{const t=Object.assign({},this.props.fields);t[`${e.target.name}`]^=1,this.props.updateSelectedFields(t)};handleHeaderCheckboxChange=()=>{const e=Object.assign({},this.props.fields);this.isEveryFieldChecked()?Object.keys(e).map((t=>e[t]=0)):Object.keys(e).map((t=>e[t]=1)),this.props.updateSelectedFields(e)};handleInputOnBlur=()=>{this.setState({addingFields:!1})};handleAddFieldSubmit=e=>{if("Enter"===e.key){const t={};t[e.target.value]=1;const n=Object.assign({},this.props.fields,t);this.props.updateSelectedFields(n),this.setState({addingFields:!0})}};isEveryFieldChecked(){const e=this.props.fields;return Object.keys(e).every((t=>1===e[t]))}renderFieldRows(){return Object.keys(this.props.fields).map(((e,t)=>r.createElement(Yn,{key:t,field:e,index:t,checked:this.props.fields[e],onChange:this.handleFieldCheckboxChange})))}renderEmptyField(){const e=Object.keys(this.props.fields).length;return r.createElement("tr",{key:`new-field ${e}`},r.createElement("td",null),r.createElement("td",{className:zn("field-number")},e+1),r.createElement("td",null,r.createElement("input",{type:"text",ref:this.newFieldRef,placeholder:"Add field",onBlur:this.handleInputOnBlur,className:zn("add-field-input"),onKeyDown:this.handleAddFieldSubmit}),r.createElement("div",{className:zn("return-symbol")},r.createElement("i",{className:"fa fa-level-down fa-rotate-90"}),r.createElement("p",null,"to add"))))}render(){if(this.props.exportStep!==Qt)return null;const e=I()("btn","btn-default","btn-xs",zn("new-field"));return r.createElement("div",null,r.createElement("div",{className:zn("caption")},r.createElement("p",null,"Select Fields"),r.createElement("div",{"data-place":"top","data-for":"field-tooltip","data-tip":"The fields displayed are from a sample of documents in the collection. To ensure all fields are exported, add missing field names."},r.createElement("i",{className:"fa fa-info-circle"}),r.createElement(Vn.Tooltip,{id:"field-tooltip"})),r.createElement(l.TextButton,{text:"+ Add Field",className:e,clickHandler:this.addNewFieldButton})),r.createElement("div",{className:zn("field-wrapper")},r.createElement("table",{className:zn("table")},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,r.createElement("input",{type:"checkbox",name:"Select All",checked:this.isEveryFieldChecked(),onChange:this.handleHeaderCheckboxChange})),r.createElement("th",null,""),r.createElement("th",{colSpan:"2",className:zn("field-name")},"Field Name"))),r.createElement("tbody",null,this.renderFieldRows(),this.renderEmptyField()))))}}const Xn=Zn;var Jn=n(93347);function Qn(e,t){let n=`db.${kn()(e).collection}.find(\n`;return n+="  "+(0,Jn.stringify)(t.filter?t.filter:{},""),t.project&&(n+=",\n  "+(0,Jn.stringify)(t.project,"")),n+="\n)",t.limit&&(n+=`.limit(${t.limit})`),t.skip&&(n+=`.skip(${t.skip})`),n}n(95095);var er=n(21291);n(50021),n(75790);const tr={tabSize:2,fontSize:11,minLines:5,maxLines:1/0,showGutter:!1,readOnly:!0,fixedWidthGutter:!1,highlightActiveLine:!1,highlightGutterLine:!1,useWorker:!1};class nr extends r.PureComponent{static displayName="QueryViewerComponent";static propTypes={query:a().object.isRequired,disabled:a().bool.isRequired,ns:a().string.isRequired};render(){return r.createElement("div",{className:I()("query-viewer-module-query-viewer__3aV9a")},r.createElement(er.default,{mode:"javascript",theme:"mongodb",width:"100%",value:Qn(this.props.ns,this.props.query),editorProps:{$blockScrolling:1/0},setOptions:tr}))}}const rr=nr,sr=v({"export-modal-radio":"export-modal-module-export-modal-radio__3id_b","export-modal-back-button":"export-modal-module-export-modal-back-button__2r09E","export-modal-query":"export-modal-module-export-modal-query__3ShiM","export-modal-query-is-disabled":"export-modal-module-export-modal-query-is-disabled__JsdOH","export-modal-query-viewer":"export-modal-module-export-modal-query-viewer__3Zis9","export-modal-query-viewer-is-disabled":"export-modal-module-export-modal-query-viewer-is-disabled__2fOyS"},"export-modal"),{track:ar}=(0,Tt.createLoggerAndTelemetry)("COMPASS-IMPORT-EXPORT-UI"),or={[m]:"Exporting documents...",[c]:"Export canceled",[u]:"Export completed",[h]:""};class ir extends r.PureComponent{static propTypes={open:a().bool,error:a().object,count:a().number,fileType:a().string,fileName:a().string,ns:a().string.isRequired,query:a().object.isRequired,status:a().string.isRequired,fields:a().object.isRequired,exportedDocsCount:a().number,progress:a().number.isRequired,startExport:a().func.isRequired,closeExport:a().func.isRequired,cancelExport:a().func.isRequired,exportStep:a().string.isRequired,sampleFields:a().func.isRequired,updateSelectedFields:a().func.isRequired,isFullCollection:a().bool.isRequired,changeExportStep:a().func.isRequired,toggleFullCollection:a().func.isRequired,selectExportFileType:a().func.isRequired,selectExportFileName:a().func.isRequired};componentDidMount=()=>{document.addEventListener("selectExportFileName",this.handleSelectExportFilename)};componentWillUnmount=()=>{document.removeEventListener("selectExportFileName",this.handleSelectExportFilename)};getStatusMessage=()=>or[this.props.status]||(this.props.error?this.props.error.message:"");handleSelectExportFilename=({detail:e})=>{this.props.selectExportFileName(e)};handleCancel=()=>{this.props.cancelExport()};handleShow=()=>{ar("Screen",{name:"export_modal"})};handleClose=()=>{this.handleCancel(),this.props.closeExport()};handleExport=()=>{this.props.startExport()};handleChangeModalStatus=e=>{this.props.changeExportStep(e),e===Qt&&0===Object.entries(this.props.fields).length&&this.props.sampleFields()};handleRevealClick=()=>{!function(e){const{shell:t}=n(72298);t.showItemInFolder(e)}(this.props.fileName)};handleExportOptionSelect=()=>{this.props.toggleFullCollection()};handleBackButton=()=>{const e=this.props.exportStep===en?Qt:Jt;this.handleChangeModalStatus(e)};handleOnSubmit=e=>{e.preventDefault(),e.stopPropagation(),this.props.fileName&&this.props.startExport()};renderExportOptions(){if(this.props.exportStep!==Jt)return null;const{isFullCollection:e}=this.props,t=I()({[sr("query")]:!0,[sr("query-is-disabled")]:e}),n=I()({[sr("query-viewer")]:!0,[sr("query-viewer-is-disabled")]:e}),s=this.props.count,a="number"==typeof s?`  ${R(s)} results`:"";return r.createElement(de.Z,{controlId:"export-collection-option"},r.createElement("div",{className:sr("radio")},r.createElement("label",{className:t,"data-test-id":"export-with-filters-label"},r.createElement("input",{type:"radio","data-test-id":"export-with-filters",value:"filter",checked:!e,onChange:this.handleExportOptionSelect,"aria-label":"Export collection with filters radio button"}),"Export query with filters",a," (Recommended)")),r.createElement("div",{className:n,"data-test-id":"query-viewer-wrapper"},r.createElement(rr,{ns:this.props.ns,query:this.props.query,disabled:e})),r.createElement("div",{className:sr("radio")},r.createElement("label",null,r.createElement("input",{type:"radio","data-test-id":"export-full-collection",value:"full",checked:e,onChange:this.handleExportOptionSelect,"aria-label":"Export full collection radio button"}),"Export Full Collection")))}renderSelectFields(){return r.createElement(Xn,{fields:this.props.fields,exportStep:this.props.exportStep,updateSelectedFields:this.props.updateSelectedFields})}renderSelectOutput(){return r.createElement(Hn,{count:this.props.count,status:this.props.status,fileType:this.props.fileType,fileName:this.props.fileName,ns:this.props.ns,progress:this.props.progress,exportStep:this.props.exportStep,startExport:this.props.startExport,cancelExport:this.props.cancelExport,exportedDocsCount:this.props.exportedDocsCount,selectExportFileType:this.props.selectExportFileType,selectExportFileName:this.props.selectExportFileName})}renderBackButton(){const e=I()("btn","btn-default","btn-sm",sr("back-button"));if(this.props.exportStep!==Jt)return r.createElement(l.TextButton,{dataTestId:"back-button",text:"< BACK",className:e,clickHandler:this.handleBackButton})}renderNextButton(){if(this.props.status===u&&this.props.exportStep===en)return r.createElement(l.TextButton,{dataTestId:"show-file-button",text:"Show File",className:"btn btn-primary btn-sm",clickHandler:this.handleRevealClick});if(this.props.exportStep===Jt)return r.createElement(l.TextButton,{dataTestId:"select-fields-button",text:"Select Fields",className:"btn btn-primary btn-sm",clickHandler:this.handleChangeModalStatus.bind(this,Qt)});if(this.props.exportStep===Qt){const e=0===Object.entries(this.props.fields).length;return r.createElement(l.TextButton,{dataTestId:"select-output-button",text:"Select Output",disabled:e,className:"btn btn-primary btn-sm",clickHandler:this.handleChangeModalStatus.bind(this,en)})}return r.createElement(l.TextButton,{dataTestId:"export-button",text:"Export",clickHandler:this.handleExport,className:"btn btn-primary btn-sm",disabled:this.props.status===m})}render(){const e=this.props.status===u&&this.props.exportStep===en?"Close":"Cancel";return r.createElement(i.Z,{className:"with-global-bootstrap-styles",show:this.props.open,onShow:this.handleShow,onHide:this.handleClose,backdrop:"static","data-test-id":"export-modal"},r.createElement(i.Z.Header,{closeButton:!0},"Export Collection ",this.props.ns),r.createElement(i.Z.Body,null,this.renderExportOptions(),this.renderSelectFields(),this.renderSelectOutput(),Boolean(this.props.error)&&r.createElement(P,{message:this.props.error.message})),r.createElement(i.Z.Footer,null,this.renderBackButton(),r.createElement(l.TextButton,{dataTestId:`${e.toLowerCase()}-button`,text:e,clickHandler:this.handleClose,className:"btn btn-default btn-sm"}),this.renderNextButton()))}}const lr=(0,o.$j)((e=>({ns:e.ns,error:e.exportData.error,query:e.exportData.query,open:e.exportData.isOpen,status:e.exportData.status,fields:e.exportData.fields,fileType:e.exportData.fileType,fileName:e.exportData.fileName,progress:e.exportData.progress,exportStep:e.exportData.exportStep,isFullCollection:e.exportData.isFullCollection,exportedDocsCount:e.exportData.exportedDocsCount,count:e.exportData.count??null})),{startExport:()=>async(e,t)=>{const{ns:n,exportData:r,dataService:{dataService:s}}=t(),a=r.isFullCollection?{filter:{}}:r.query,o=r.isFullCollection?await Nn(s,n,a):r.count,i=Object.fromEntries(Object.entries(r.fields).filter((e=>1===e[1])));Object.keys(i).length>0&&(void 0===r.fields._id||0===r.fields._id)&&(i._id=0),pn.info(mn(1001000083),"Export","Start reading from collection",{ns:n,numDocsToExport:o,spec:a,projection:i});const l=function(e,t,n={filter:{}},r={}){const{limit:s,skip:a}=n;return e.fetch(t,n.filter||{},{projection:r,limit:s,skip:a}).stream()}(s,n,a,i),p=ln({objectMode:!0,length:o,time:250});p.on("progress",(function(t){e(((e,t)=>({type:Tn,progress:e,exportedDocsCount:t}))(t.percentage,t.transferred))})),pn.info(mn(1001000084),"Export","Start writing to file",{ns:n,fileType:r.fileType,fileName:r.fileName,fields:Object.keys(r.allFields)});const m=Object.keys(r.fields).filter((e=>e.split(".").some(((e,t,n)=>i[n.slice(0,t+1).join(".")]))));let c;c="csv"===r.fileType?function({columns:e}){return nn.WU({headers:e,alwaysWriteHeaders:!0,transform:e=>function(e){const t={};return function e(n,r,s=1){Object.keys(n).forEach((function(a){const o=n[a],{type:i,isBSON:l}=Q(o),p=r?r+"."+a:a;if(V("serialize",{isBSON:l,type:i,value:o}),l)t[p]=ee(o);else if("Array"!==i)if("Date"!==i){if("Boolean"===i){if(K.includes(o))return void(t[p]="true");if(W.includes(o))return void(t[p]="false")}if("Object"===i&&Object.keys(o).length&&s<1e3)return e(o,p,s+1);t[p]=""+o}else t[p]=o.toISOString();else t[p]=H.default.EJSON.stringify(o,null,null)}))}(e),t}(e)})}({columns:m}):function({brackets:e=!0}={}){return new Le.Transform({readableObjectMode:!1,writableObjectMode:!0,transform:function(t,n,r){this._counter>=1&&(e?this.push(","):this.push(rn.EOL));const s=H.EJSON.stringify(t,null,e?2:null);void 0===this._counter&&(this._counter=0,e&&this.push("[")),r(null,s),this._counter++},final:function(t){e&&this.push("]"),t()}})}();const u=Ie().createWriteStream(r.fileName);cn("executing pipeline"),e(((e,t,n)=>({type:dn,source:e,dest:t,count:n}))(l,u,o)),ve().pipeline(l,p,c,u,(function(t){if(un("Export Completed",{all_docs:r.isFullCollection,file_type:r.fileType,all_fields:Object.values(r.fields).every((e=>1===e)),number_of_docs:o,success:!t}),t)return pn.error(mn(1001000085),"Export","Export failed",{ns:n,error:t.message}),cn("error running export pipeline",t),e(Rn(t));pn.info(mn(1001000086),"Export","Finished export",{ns:n,numDocsToExport:o,fileName:r.fileName}),e({type:yn,exportedDocsCount:o}),e(Pe("export-finished",o,r.fileType))}))},closeExport:()=>({type:En}),sampleFields:()=>async(e,t)=>{const{ns:n,exportData:r,dataService:{dataService:s}}=t(),a=r.isFullCollection?{filter:{}}:r.query;try{const t=await async function(e,t,{filter:n,sampleSize:r}={},s={}){const a=_e().promisify(e.find.bind(e));r=r||50;const o=await a(t,n||{},{limit:r,...s}),i=new Set;for(const e of o)for(const t of on(e))i.add(t);const l=[...i].sort();return sn.info(an(1001000063),"Export","Retrieved fields from sample",{allFields:l,sampleSize:r,filter:n}),Object.fromEntries(l.map((e=>[e,1])))}(s,n,{filter:a.filter,sampleSize:50}),r=function(e,{maxDepth:t}={}){const n=Object.keys(e).map((e=>function(e,t){return t?e.split(".").slice(0,t).join("."):e}(e,t)));return Object.fromEntries(n.map((e=>[e,1])))}(t,{maxDepth:2});e({type:xn,fields:t}),e(On(r))}catch(e){cn("failed to load fields",e)}},cancelExport:()=>(e,t)=>{const{exportData:n}=t(),{source:r,dest:s}=n;r&&s?(pn.info(mn(1001000088),"Export","Cancelling export by user request"),r.unpipe(),e({type:hn})):cn("no active streams to cancel.")},updateSelectedFields:On,changeExportStep:e=>({type:_n,status:e}),selectExportFileType:e=>({type:bn,fileType:e}),selectExportFileName:e=>({type:Sn,fileName:e}),toggleFullCollection:()=>({type:Ln})})(ir),pr=lr,mr=(0,Zt.createStore)(jn,(0,Zt.applyMiddleware)(Xt.Z));mr.onActivated=e=>{mr.dispatch(ke(e)),e.on("data-service-connected",((e,t)=>{mr.dispatch(De(e,t))})),e.on("open-export",(({namespace:e,query:t,count:n})=>{mr.dispatch((({namespace:e,query:t,count:n})=>async(r,s)=>{un("Export Opened");const{dataService:{dataService:a}}=s();try{const s=n??await Nn(a,e,t);r(je(e)),r((({namespace:e,count:t,query:n})=>({type:An,namespace:e,count:t,query:n}))({namespace:e,query:t,count:s}))}catch(e){r(Rn(e))}})({namespace:e,query:t,count:n}))}))};const cr=mr;class ur extends r.Component{render(){return r.createElement(o.zt,{store:cr},r.createElement(pr,null))}}const gr=ur;class dr extends r.Component{static displayName="ImportExportPlugin";static propTypes={exportStore:a().object.isRequired,importStore:a().object.isRequired};render(){return r.createElement("div",null,r.createElement(Mn,{store:this.props.importStore}),r.createElement(gr,{store:this.props.exportStore}))}}const hr=dr,Tr=JSON.parse('{"name":"@mongodb-js/compass-import-export","description":"Import/Export feature for Compass","author":{"name":"MongoDB Inc","email":"compass@mongodb.com"},"publishConfig":{"access":"public"},"bugs":{"url":"https://jira.mongodb.org/projects/COMPASS/issues","email":"compass@mongodb.com"},"homepage":"https://github.com/mongodb-js/compass","version":"6.22.0","repository":{"type":"git","url":"https://github.com/mongodb-js/compass.git"},"files":["lib"],"license":"SSPL","main":"lib/index.js","exports":{"webpack":"./src/index.ts","require":"./lib/index.js"},"types":"./lib/index.d.ts","scripts":{"prepublishOnly":"npm run compile","compile":"npm run webpack -- --mode production","prewebpack":"rimraf ./lib","webpack":"webpack-compass","start":"npm run webpack serve -- --mode development","analyze":"npm run webpack -- --mode production --analyze","typecheck":"tsc --noEmit","eslint":"eslint","prettier":"prettier","lint":"npm run eslint . && npm run prettier -- --check .","depcheck":"depcheck","check":"npm run typecheck && npm run lint && npm run depcheck","check-ci":"npm run check","pretest":"mongodb-runner start --port=27018","posttest":"mongodb-runner stop --port=27018","pretest-electron":"mongodb-runner start --port=27018","posttest-electron":"mongodb-runner stop --port=27018","test":"mocha","test-electron":"xvfb-maybe electron-mocha --no-sandbox","test-cov":"nyc -x \\"**/*.spec.*\\" --reporter=lcov --reporter=text --reporter=html npm run test","test-watch":"npm run test -- --watch","test-ci":"npm run test-cov","test-ci-electron":"npm run test-electron","reformat":"npm run prettier -- --write ."},"peerDependencies":{"react":"*","react-dom":"*"},"dependencies":{"@mongodb-js/compass-components":"^0.13.0","@mongodb-js/compass-logging":"^0.10.0","JSONStream":"^1.3.5","ace-builds":"^1.4.3","ansi-to-html":"^0.6.11","bson":"*","classnames":"^2.2.6","csv-parser":"^2.3.1","debug":"4.3.0","electron":"^13.5.1","fast-csv":"^3.4.0","flat":"cipacda/flat","hadron-react-buttons":"^5.7.0","hadron-react-components":"^5.13.0","lodash":"^4.17.21","lodash.throttle":"^4.1.1","marky":"^1.2.1","mime-types":"^2.1.24","mongodb-ace-theme":"^1.6.0","mongodb-ns":"^2.3.0","mongodb-query-parser":"^2.4.4","object-sizeof":"^1.5.1","parse-json":"^5.0.0","peek-stream":"^1.1.3","progress-stream":"^2.0.0","prop-types":"^15.7.2","react":"^16.14.0","react-ace":"^9.5.0","react-bootstrap":"^0.32.1","react-dom":"^16.14.0","react-redux":"^5.0.6","redux":"^4.1.2","redux-thunk":"^2.3.0","strip-bom-stream":"^4.0.0"},"devDependencies":{"@mongodb-js/eslint-config-compass":"^0.7.0","@mongodb-js/mocha-config-compass":"^0.10.0","@mongodb-js/prettier-config-compass":"^0.5.0","@mongodb-js/tsconfig-compass":"^0.6.0","@mongodb-js/webpack-config-compass":"^0.7.0","@testing-library/react":"^12.0.0","@testing-library/user-event":"^13.5.0","@types/chai":"^4.2.21","@types/chai-as-promised":"^7.1.4","@types/chai-dom":"^0.0.10","@types/mocha":"^9.0.0","@types/react":"^17.0.5","@types/react-dom":"^17.0.10","@types/sinon-chai":"^3.2.5","chai":"^4.3.6","chai-as-promised":"*","depcheck":"^1.4.1","enzyme":"^3.11.0","enzyme-adapter-react-16":"^1.15.2","eslint":"^7.25.0","hadron-app-registry":"^8.10.0","mocha":"^8.4.0","mongodb-data-service":"^21.19.0","nyc":"^15.1.0","prettier":"2.3.2","redux-mock-store":"^1.5.4","rimraf":"^3.0.2","sinon":"^9.2.3","xvfb-maybe":"^0.2.1"}}'),yr={name:"Import",component:Mn},fr={name:"Export",component:gr};function br(e){e.registerRole("Global.Modal",fr),e.registerStore("ExportModal.Store",cr),e.registerRole("Global.Modal",yr),e.registerStore("ImportModal.Store",Dn)}function Sr(e){e.deregisterRole("Global.Modal",fr),e.deregisterStore("ExportModal.Store"),e.deregisterRole("Global.Modal",yr),e.deregisterStore("ImportModal.Store")}const Ar=hr},51777:(e,t,n)=>{"use strict";e.exports=n.p+"assets/connecting-illustration.d5208aa6f1a32a7e5594.svg"},53666:e=>{"use strict";e.exports=JSON.parse('{"Syntax":{"message":"Invalid syntax"},"Type":{"message":"Unexpected type"},"Argument":{"message":"Invalid argument"},"Runtime":{"message":"Generic error"},"Unimplemented":{"message":"Functionality not implemented"},"Reference":{"message":"Reference error"},"Attribute":{"message":"Attribute error"},"Internal":{"message":"An internal error occurred"},"Range":{"message":"Value is out of range"}}')}}]);